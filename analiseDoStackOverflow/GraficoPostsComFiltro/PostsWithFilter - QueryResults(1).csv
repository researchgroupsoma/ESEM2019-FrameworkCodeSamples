framework,Id,PostTypeId,AcceptedAnswerId,ParentId,CreationDate,DeletionDate,Score,ViewCount,Body,OwnerUserId,OwnerDisplayName,LastEditorUserId,LastEditorDisplayName,LastEditDate,LastActivityDate,Title,Tags,AnswerCount,CommentCount,FavoriteCount,ClosedDate,CommunityOwnedDate
Android,47866673,1,47881098,,2017,,1,1912,"<p>i'm studying the <a href=""https://developer.android.com/topic/libraries/architecture/index.html"" rel=""nofollow noreferrer"">Android Architecture Components</a> and i'm a little bit confused. In the <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/BasicSample"" rel=""nofollow noreferrer"">sample</a> they use a repository and state that changes within the datasource of the repository are observed by the ViewModels. I don't understand how the changes within the datasource are pushed to the ViewModels, as i cannot see any code within the ViewModels that subscribes them to the repository. Analogously, the fragments observe the ViewModel's LiveData, but they actually subscribe to the LiveData:</p>

<pre><code> // Observe product data
    model.getObservableProduct().observe(this, new Observer&lt;ProductEntity&gt;() {
        @Override
        public void onChanged(@Nullable ProductEntity productEntity) {
            model.setProduct(productEntity);
        }
    });
</code></pre>

<p>I cannot see any kind of subscribing within the ViewModels to observe the Repository. Am i missing something?</p>
",5268086,,1000551,,2018-03-19 11:24:36,2018-03-19 11:24:36,Android Architecture Components: How is LiveData in the repository observed by a ViewModel,<android><mvvm><viewmodel><android-architecture-components><android-livedata>,1,1,2,,
Android,35604954,1,35606877,,2016,,1,424,"<p>I am trying to capture a photo and after that, allow to the user to add some effects, draw, drag other assets to the image, add text, etc. Like snapchat camera.</p>

<p>I have followed the <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">Camera 2 API sample</a>. The major part of the code is at
<a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"" rel=""nofollow noreferrer"">Camera2BasicFragment.java</a></p>

<p>I have achieved the capture and preview image, but the example set the image in a <code>TextureView</code>, but I do not have idea how to continue to manipulate the image.</p>

<p>I dont know if I should use a <code>TextureView</code> or a <code>Canvas</code> or a <code>SurfaceView</code>.</p>

<p>An example of the final image result that I want:</p>

<p><a href=""https://i.stack.imgur.com/4aLG4.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/4aLG4.jpg"" alt=""example""></a></p>

<p>Thanks in advance.</p>
",3796083,,4848308,,2016-02-24 16:15:18,2016-02-24 16:15:18,"Capture photo and apply effects (scale, rotate, grey, draw with finger)",<android><android-camera2>,1,11,2,,
Android,38403559,1,38409251,,2016,,1,257,"<p>I would like to know how to automate creating a new app for Google Play Store. I know that it's possible to generate screenshots, create the <code>apk</code>, upload listing information etc. But how can I <strong>create</strong> the app initially? I want to create with a new package and all. Is there a way to automate this? </p>

<p>I read the fastlane documentation as well as the code here:</p>

<p><a href=""https://github.com/googlesamples/android-play-publisher-api/tree/master/v2/python"" rel=""nofollow"">https://github.com/googlesamples/android-play-publisher-api/tree/master/v2/python</a></p>

<p>I also read the documentation here:</p>

<p><a href=""https://developers.google.com/android-publisher/#publishing"" rel=""nofollow"">https://developers.google.com/android-publisher/#publishing</a></p>

<p>So far i'm not finding anything for <em>creating</em> a new package name.</p>
",1233366,,,,,2016-07-16 8:20:06,Google Play Dev Console automation of creating a new app,<android><fastlane>,1,0,2,,
Android,39363500,1,,,2016,,1,2781,"<p>I use <code>setAlarmClock</code> method of <code>Alarmmanager</code> for do alarm clock application.
When I set alarm clock from 6.00 AM and alarm in 6.01 AM . It delay and not exact.</p>

<p>Code when <code>setAlarmClock</code>.</p>

<pre><code>Intent intent = new Intent(getBaseContext(), AlarmReceiver.class);
intent.setFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
intent.putExtra(AppConstant.REMINDER, note.convertToString());
PendingIntent pendingIntent = PendingIntent.getBroadcast(getApplicationContext(),
        note.getId(), intent, PendingIntent.FLAG_CANCEL_CURRENT);
AlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);

if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {
    alarmManager.setAlarmClock(new AlarmManager.AlarmClockInfo(getTargetTime().getTimeInMillis(),pendingIntent),pendingIntent);
}
</code></pre>

<p>Code when setCalander for alarm</p>

<pre><code>  private Calendar getTargetTime() {
    Calendar calNow = Calendar.getInstance();
    Calendar calSet = (Calendar) calNow.clone();
    calSet.set(Calendar.DAY_OF_MONTH, sDay);
    calSet.set(Calendar.HOUR_OF_DAY, sHour);
    calSet.set(Calendar.MINUTE, sMinute);
    calSet.set(Calendar.SECOND, 0);
    calSet.set(Calendar.MILLISECOND, 0);

    return calSet;
}
</code></pre>

<p>Ok, I implement from this project <a href=""https://github.com/googlesamples/android-DirectBoot"" rel=""nofollow"">https://github.com/googlesamples/android-DirectBoot</a>.</p>

<p>This project use setAlarmClock for alarm when it's time.</p>

<p>update: I change setAlarmClock to setExact</p>

<p>This code:</p>

<pre><code> alarmManager.setExact(AlarmManager.RTC_WAKEUP, getTargetTime().getTimeInMillis(), pendingIntent);
</code></pre>

<p>It doesn't work for me but It delay same setAlarmClock.</p>

<p>Current Time in millisecond: 1473318858628
I change to default format by use <a href=""http://www.ruddwire.com/handy-code/date-to-millisecond-calculators/#.V9EPXfmLRD8"" rel=""nofollow"">http://www.ruddwire.com/handy-code/date-to-millisecond-calculators/#.V9EPXfmLRD8</a></p>

<p>Thu Sep 08 2016 14:14:18 GMT+0700</p>

<p>Set Alarm Time in millisecond:1473318960000</p>

<p>Thu Sep 08 2016 14:16:00 GMT+0700</p>

<p>And now It's 14:16:00 , It doesn't alarm.</p>

<p>It's alarm on 14.20:00 , so delay about 4 minutes. ( Time in millisecond = 1473319200207)</p>

<p>Thank</p>
",5549837,,5549837,,2016-09-08 7:23:25,2016-09-08 7:23:25,setAlarmClock not exact in android marshmallow,<android><alarmmanager><android-alarms>,1,2,2,,
Android,54529117,1,55016471,,2019,,1,44,"<p><a href=""https://i.stack.imgur.com/YOXFF.png"" rel=""nofollow noreferrer"">ref: log</a>  </p>

<p>We use the <a href=""https://github.com/googlesamples/android-SimpleMediaPlayer"" rel=""nofollow noreferrer"">Google sample project</a> with the following changes. Same things we use in our project, we got an error (-38,0) on media player error listener in Samsung flagship devices and Google devices. (tested in note 8-8.1 and pixel 2xl-9.0)</p>

<p>Here, <code>onError</code> listener calls first then <code>onPrepared</code> listener.</p>

<p>Expected solution: Play audio without any error.</p>

<pre><code>package com.example.android.mediaplayersample;

import android.content.Context;
import android.content.res.AssetFileDescriptor;
import android.media.AudioManager;
import android.media.MediaPlayer;

import java.util.concurrent.Executors;
import java.util.concurrent.ScheduledExecutorService;
import java.util.concurrent.TimeUnit;

/**
 * Exposes the functionality of the {@link MediaPlayer} and implements the {@link PlayerAdapter}
 * so that {@link MainActivity} can control music playback.
 */
public final class MediaPlayerHolder implements PlayerAdapter {

    public static final int PLAYBACK_POSITION_REFRESH_INTERVAL_MS = 1000;

    private final Context mContext;
    private MediaPlayer mMediaPlayer;
    private int mResourceId;
    private PlaybackInfoListener mPlaybackInfoListener;
    private ScheduledExecutorService mExecutor;
    private Runnable mSeekbarPositionUpdateTask;

    public MediaPlayerHolder(Context context) {
        mContext = context.getApplicationContext();
    }

    /**
     * Once the {@link MediaPlayer} is released, it can't be used again, and another one has to be
     * created. In the onStop() method of the {@link MainActivity} the {@link MediaPlayer} is
     * released. Then in the onStart() of the {@link MainActivity} a new {@link MediaPlayer}
     * object has to be created. That's why this method is private, and called by load(int) and
     * not the constructor.
     */
    private void initializeMediaPlayer() {
        if (mMediaPlayer != null) {

            mMediaPlayer.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
                @Override
                public void onPrepared(MediaPlayer mediaPlayer) {
                    logToUI(""OnPrepared()"");
                    mediaPlayer.start();
                }
            });
            mMediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
                @Override
                public void onCompletion(MediaPlayer mediaPlayer) {
                    stopUpdatingCallbackWithPosition(true);
                    logToUI(""MediaPlayer playback completed"");
                    if (mPlaybackInfoListener != null) {
                        mPlaybackInfoListener.onStateChanged(PlaybackInfoListener.State.COMPLETED);
                        mPlaybackInfoListener.onPlaybackCompleted();
                    }
                }
            });
            mMediaPlayer.setOnErrorListener(new MediaPlayer.OnErrorListener() {
                @Override
                public boolean onError(MediaPlayer mediaPlayer, int i, int i1) {
                    logToUI(""OnError()"" + i + "" "" + i1);
                    return true;
                }
            });
            logToUI(""mMediaPlayer = new MediaPlayer()"");
        }
    }

    public void setPlaybackInfoListener(PlaybackInfoListener listener) {
        mPlaybackInfoListener = listener;
    }

    // Implements PlaybackControl.
    @Override
    public void loadMedia(int resourceId) {
        mResourceId = resourceId;
        mMediaPlayer = new MediaPlayer();

        try {
            logToUI(""load() {1. setDataSource}"");
            mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
            mMediaPlayer.setDataSource(""http://radio-electron.ru:8000/96"");
        } catch (Exception e) {
            logToUI(e.toString());
        }

        initializeMediaPlayer();


        try {
            logToUI(""load() {2. prepare}"");
            mMediaPlayer.prepareAsync();
        } catch (Exception e) {
            logToUI(e.toString());
        }

        initializeProgressCallback();
        logToUI(""initializeProgressCallback()"");
    }

    @Override
    public void release() {
        if (mMediaPlayer != null) {
            logToUI(""release() and mMediaPlayer = null"");
            mMediaPlayer.release();
            mMediaPlayer = null;
        }
    }

    @Override
    public boolean isPlaying() {
        if (mMediaPlayer != null) {
            return mMediaPlayer.isPlaying();
        }
        return false;
    }

    @Override
    public void play() {
        if (mMediaPlayer != null &amp;&amp; !mMediaPlayer.isPlaying()) {
            logToUI(String.format(""playbackStart() %s"",
                    mContext.getResources().getResourceEntryName(mResourceId)));
            mMediaPlayer.start();
            if (mPlaybackInfoListener != null) {
                mPlaybackInfoListener.onStateChanged(PlaybackInfoListener.State.PLAYING);
            }
            startUpdatingCallbackWithPosition();
        }
    }

    @Override
    public void reset() {
        if (mMediaPlayer != null) {
            logToUI(""playbackReset()"");
            mMediaPlayer.reset();
            loadMedia(mResourceId);
            if (mPlaybackInfoListener != null) {
                mPlaybackInfoListener.onStateChanged(PlaybackInfoListener.State.RESET);
            }
            stopUpdatingCallbackWithPosition(true);
        }
    }

    @Override
    public void pause() {
        if (mMediaPlayer != null &amp;&amp; mMediaPlayer.isPlaying()) {
            mMediaPlayer.pause();
            if (mPlaybackInfoListener != null) {
                mPlaybackInfoListener.onStateChanged(PlaybackInfoListener.State.PAUSED);
            }
            logToUI(""playbackPause()"");
        }
    }

    @Override
    public void seekTo(int position) {
        if (mMediaPlayer != null) {
            logToUI(String.format(""seekTo() %d ms"", position));
            mMediaPlayer.seekTo(position);
        }
    }

    /**
     * Syncs the mMediaPlayer position with mPlaybackProgressCallback via recurring task.
     */
    private void startUpdatingCallbackWithPosition() {
        if (mExecutor == null) {
            mExecutor = Executors.newSingleThreadScheduledExecutor();
        }
        if (mSeekbarPositionUpdateTask == null) {
            mSeekbarPositionUpdateTask = new Runnable() {
                @Override
                public void run() {
                    updateProgressCallbackTask();
                }
            };
        }
        mExecutor.scheduleAtFixedRate(
                mSeekbarPositionUpdateTask,
                0,
                PLAYBACK_POSITION_REFRESH_INTERVAL_MS,
                TimeUnit.MILLISECONDS
        );
    }

    // Reports media playback position to mPlaybackProgressCallback.
    private void stopUpdatingCallbackWithPosition(boolean resetUIPlaybackPosition) {
        if (mExecutor != null) {
            mExecutor.shutdownNow();
            mExecutor = null;
            mSeekbarPositionUpdateTask = null;
            if (resetUIPlaybackPosition &amp;&amp; mPlaybackInfoListener != null) {
                mPlaybackInfoListener.onPositionChanged(0);
            }
        }
    }

    private void updateProgressCallbackTask() {
        if (mMediaPlayer != null &amp;&amp; mMediaPlayer.isPlaying()) {
            int currentPosition = mMediaPlayer.getCurrentPosition();
            if (mPlaybackInfoListener != null) {
                mPlaybackInfoListener.onPositionChanged(currentPosition);
            }
        }
    }

    @Override
    public void initializeProgressCallback() {
        final int duration = mMediaPlayer.getDuration();
        if (mPlaybackInfoListener != null) {
            mPlaybackInfoListener.onDurationChanged(duration);
            mPlaybackInfoListener.onPositionChanged(0);
            logToUI(String.format(""firing setPlaybackDuration(%d sec)"",
                    TimeUnit.MILLISECONDS.toSeconds(duration)));
            logToUI(""firing setPlaybackPosition(0)"");
        }
    }

    private void logToUI(String message) {
        if (mPlaybackInfoListener != null) {
            mPlaybackInfoListener.onLogUpdated(message);
        }
    }

}
</code></pre>
",9222720,,,,,2019-03-06 5:55:31,"I face android media player error (-38, 0) in Samsung and Google latest version mobile",<android><android-mediaplayer><samsung-mobile>,1,0,2,,
Android,37547385,1,,,2016,,1,376,"<p>I am working on Location and Geo Fencing. But I have seen couple of problems. I think that I have missing some thing but indeed I have many confusions regarding Geo Fencing and Location services Such as Fused Location API. </p>

<p><strong>What I am doing</strong> </p>

<p>According to my App scenario, I have to get the user location ( which I am getting using Fused Location API) and also I have ask the user what is his destination and let say he is on Point A and he picks Place F. Now I want that My app should notify him that he has Arrived at point F.</p>

<p>Problems and Confusion : </p>

<ol>
<li><p>I am notified (through my notification) that I have arrived to my destination only and only if I am in my app. it looks like that my location did not update google to my current location. so what is a best way that if the app is close or in back ground google still track him </p></li>
<li><p>What I am doing is creating the geo fence around the destination of user. Now I do not know what is a way of google to track user. ? can you please clear me that after creating geo fence how does google track Us ? </p></li>
<li><p>Do I need to implement some thing in service so that my service should remain running if my app is in background or even my app is force closed? </p></li>
</ol>

<p>I think I am quiet clear about my question that What I want . Please share your views and also tell me how does google track us when we geo fence any location ? </p>

<p>I am following <a href=""https://github.com/googlesamples/android-Geofencing"" rel=""nofollow"">this</a> to create the geofence. </p>

<p>Please sahre your views. </p>
",6404917,,,,,2016-06-22 12:37:26,GeoFencing Best Stratigies,<android><android-geofence><google-geolocation><android-fusedlocation>,1,1,1,,
Android,28116521,1,28158985,,2015,,1,932,"<p><a href=""https://github.com/googlesamples/android-play-location/tree/master/Geofencing"" rel=""nofollow"">Creating and Monitoring Geofences example app</a> on github does not work as expected, Geofences in Google Play Services don't seem to work properly.</p>

<p>I have read elsewhere at Stack Overflow, that Reto Meier mentioned at Google IO that the GPS will turn on only if the phone approaches the geofence to conserve battery.
Seems that it does not turn on at all.</p>

<p>Here is the situation:</p>

<ul>
<li>I have an Emulator with Google APIs (same happens with real phone).</li>
<li>I have the above mentioned app out of the box installed and Geofence added.</li>
<li>I have a KML file that drives me in and out of the Geofence.</li>
</ul>

<p>Gofence ENTER is <strong>not</strong> triggered.</p>

<p>Now, just to be sure that KML actually works, I open Google maps. I play KML and I can see the blue ""You Are Here"" dot nicely moving in and out of Geofence, and the geofences <strong>do</strong> get triggered.</p>

<p>While Google Maps is up and running, I see GPS indicator in status bar.</p>

<p>So, it seems to me that Goefence only gets triggered if the GPS is explicitly on.</p>

<p>Can somebody explain this please? There is a lot of questions here on Stack Overflow that deal with the same problem.</p>

<p>Thanks.</p>

<p><strong>EDIT</strong>:
Did the field test with real phone. While <a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationUpdates"" rel=""nofollow"">Location Updates</a> app was running and tracking me <a href=""https://github.com/googlesamples/android-play-location/tree/master/Geofencing"" rel=""nofollow"">Creating and Monitoring Geofences example app</a> was getting ENTER/EXIT events. As soon as I killed Location Updates app, the Geofences app stopped getting ENTER/EXIT events.</p>

<p>Seems to me like Google has optimized the power consumption for Geofences to the point of uselessness.</p>
",2407357,,2407357,,2015-01-23 22:34:46,2015-01-26 21:41:01,Geofences do not work as expected,<google-play-services><geofencing>,1,0,1,,
Android,48095462,1,,,2018,,1,161,"<p>I've an activity in my app which <strong>Either</strong> picks an image from gallery to scan for a barcode and then displays the result in a <code>TextView</code> and picked image in an <code>ImageView</code> <strong>OR</strong> starts the camera to scan one and displays the result in the respective <code>TextView</code>.</p>

<p>I'm using <a href=""https://github.com/googlesamples/android-vision"" rel=""nofollow noreferrer"">Google Mobile Vision API</a> (indirectly through a <a href=""https://github.com/KingsMentor/MobileVisionBarcodeScanner"" rel=""nofollow noreferrer"">Library</a> just to skip the boiler plate code) and the scanning works impressively fast.</p>

<p>I've tried my best to find a way before asking this question through searching the sample project of the library and Google Mobile Vision API and the internet but failed to find one.</p>

<p>How can I pass the actual scanned barcode to an <code>ImageView</code> (or an Activity)? (seems impossible directly)</p>

<p>My code is basically this (just with some intents etc)</p>

<pre><code>@Override
    public void onRetrieved(final Barcode barcode) {
        Log.d(TAG, ""Barcode read: "" + barcode.displayValue);
        runOnUiThread(new Runnable() {
            @Override
            public void run() {
                AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this)
                        .setTitle(""code retrieved"")
                        .setMessage(barcode.displayValue);
                builder.show();
            }
        });


    }

    // for multiple callback
    @Override
    public void onRetrievedMultiple(final Barcode closetToClick, final List&lt;BarcodeGraphic&gt; barcodeGraphics) {
        runOnUiThread(new Runnable() {
            @Override
            public void run() {
                String message = ""Code selected : "" + closetToClick.displayValue + ""\n\nother "" +
                        ""codes in frame include : \n"";
                for (int index = 0; index &lt; barcodeGraphics.size(); index++) {
                    Barcode barcode = barcodeGraphics.get(index).getBarcode();
                    message += (index + 1) + "". "" + barcode.displayValue + ""\n"";
                }
                AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this)
                        .setTitle(""code retrieved"")
                        .setMessage(message);
                builder.show();
            }
        });

    }

    @Override
    public void onBitmapScanned(SparseArray&lt;Barcode&gt; sparseArray) {
        for (int i = 0; i &lt; sparseArray.size(); i++) {
        Barcode barcode = sparseArray.valueAt(i);
        Log.e(""value"", barcode.displayValue);
        }
    }

    @Override
    public void onRetrievedFailed(String reason) {
        // in case of failure
    }
}
</code></pre>

<p>Above code works great but is there a way possible to use that <code>SparseArray</code> for obtaining the actual scanned barcode?</p>
",8439566,,472495,,2018-01-05 18:46:55,2018-01-05 18:46:55,How to pass the actual barcode scanned to an ImageView,<android><barcode><google-vision>,1,0,1,,
Android,48105925,1,,,2018,,1,596,"<p>Using Google's mvvm architecture components <a href=""https://github.com/googlesamples/android-architecture-components/tree/178fe541643adb122d2a8925cf61a21950a4611c/GithubBrowserSample"" rel=""nofollow noreferrer"">Github browser sample as a reference</a>, how would one cancel a viewmodel hosted, live data observed, retrofit network request? :)</p>

<p>Maybe I'm reading it wrong, but if network conditions are poor and requests take for example 30 seconds, each request should be cancelled otherwise many requests might be launched if the app is opened and closed rapidly. How would a well designed app handle this?</p>

<p>The callback when the livedata observer is removed can be accessed <a href=""https://github.com/googlesamples/android-architecture-components/blob/178fe541643adb122d2a8925cf61a21950a4611c/GithubBrowserSample/app/src/main/java/com/android/example/github/util/LiveDataCallAdapter.java"" rel=""nofollow noreferrer"">by overriding onInactive here</a> I think. I could try cancelling all calls here, but what if I don't want to cancel some calls for some reason?</p>

<p>I'm guessing Facebook doesn't cancel trying to load your feed when you hit the back button.</p>
",1866373,,,,,2018-01-05 3:01:42,"Should my mvvm, livedata app cancel network requests when app is backgrounded?",<android><mvvm><android-architecture-components><android-architecture-lifecycle>,1,0,1,,
Android,47839974,1,,,2017,,1,479,"<p>For my university thesis, I need a android program which can detect and recognize a face in real time. I have read about 'android-vision' library and tested the example code.</p>

<p><a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker/app/src/main/java/com/google/android/gms/samples/vision/face/facetracker."" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker/app/src/main/java/com/google/android/gms/samples/vision/face/facetracker.</a></p>

<p>Modified code:</p>

<pre><code>package com.google.android.gms.samples.vision.face.facetracker;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.os.AsyncTask;
import android.os.Environment;
import android.util.Log;
import android.widget.Toast;

import com.google.android.gms.samples.vision.face.facetracker.ui.camera.GraphicOverlay;
import com.google.android.gms.vision.face.Face;

import java.io.ByteArrayOutputStream;
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.net.Socket;
import java.text.SimpleDateFormat;
import java.util.Date;

/**
 * Graphic instance for rendering face position, orientation, and landmarks within an associated
 * graphic overlay view.
 */
class FaceGraphic extends GraphicOverlay.Graphic
{
    private static final float FACE_POSITION_RADIUS = 10.0f;
    private static final float ID_TEXT_SIZE = 40.0f;
    private static final float ID_Y_OFFSET = 50.0f;
    private static final float ID_X_OFFSET = -50.0f;
    private static final float BOX_STROKE_WIDTH = 5.0f;

    public Canvas canvas1;
    public Face face;
    int i =0;
    int flag = 0;

    private static final int COLOR_CHOICES[] = {
        Color.BLUE,
        Color.CYAN,
        Color.GREEN,
        Color.MAGENTA,
        Color.RED,
        Color.WHITE,
        Color.YELLOW
    };
    private static int mCurrentColorIndex = 0;

    private Paint mFacePositionPaint;
    private Paint mIdPaint;
    private Paint mBoxPaint;

    private volatile Face mFace;
    private int mFaceId;
    private float mFaceHappiness;
    public Bitmap myBitmap ;
    FaceGraphic(GraphicOverlay overlay)
    {
        super(overlay);

        mCurrentColorIndex = (mCurrentColorIndex + 1) % COLOR_CHOICES.length;
        final int selectedColor = COLOR_CHOICES[mCurrentColorIndex];

        mFacePositionPaint = new Paint();
        mFacePositionPaint.setColor(selectedColor);

        mIdPaint = new Paint();
        mIdPaint.setColor(selectedColor);
        mIdPaint.setTextSize(ID_TEXT_SIZE);

        mBoxPaint = new Paint();
        mBoxPaint.setColor(selectedColor);
        mBoxPaint.setStyle(Paint.Style.STROKE);
        mBoxPaint.setStrokeWidth(BOX_STROKE_WIDTH);
    }

    void setId(int id)
    {
        mFaceId = id;
        flag = 1;
    }


    /**
     * Updates the face instance from the detection of the most recent frame.  Invalidates the
     * relevant portions of the overlay to trigger a redraw.
     */
    void updateFace(Face face)
    {
        mFace = face;
        postInvalidate();
    }

    /**
     * Draws the face annotations for position on the supplied canvas.
     */
    @Override
    public void draw(Canvas canvas)
    {
        face = mFace;
        if (face == null)
        {
            return;
        }

        // Draws a circle at the position of the detected face, with the face's track id below.
        float x = translateX(face.getPosition().x + face.getWidth() / 2);
        float y = translateY(face.getPosition().y + face.getHeight() / 2);
 //       canvas.drawCircle(x, y, FACE_POSITION_RADIUS, mFacePositionPaint);
        canvas.drawText(""id: "" + mFaceId, x + ID_X_OFFSET, y + ID_Y_OFFSET, mIdPaint);
  //      canvas.drawText(""happiness: "" + String.format(""%.2f"", face.getIsSmilingProbability()), x - ID_X_OFFSET, y - ID_Y_OFFSET, mIdPaint);
  //      canvas.drawText(""right eye: "" + String.format(""%.2f"", face.getIsRightEyeOpenProbability()), x + ID_X_OFFSET * 2, y + ID_Y_OFFSET * 2, mIdPaint);
  //      canvas.drawText(""left eye: "" + String.format(""%.2f"", face.getIsLeftEyeOpenProbability()), x - ID_X_OFFSET*2, y - ID_Y_OFFSET*2, mIdPaint);

        // Draws a bounding box around the face.
        float xOffset = scaleX(face.getWidth() / 2.0f);
        float yOffset = scaleY(face.getHeight() / 2.0f);
        float left = x - xOffset;
        float top = y - yOffset;
        float right = x + xOffset;
        float bottom = y + yOffset;
        canvas.drawRect(left, top, right, bottom, mBoxPaint);

        Log.d(""MyTag"", ""hello ""+i);
        i++;

        if (flag == 1)
        {
            flag = 0;
            canvas1=canvas;
            // send face image to server for recognition
            new MyAsyncTask().execute(""ppppp"");

        }
    }


    class MyAsyncTask extends AsyncTask&lt;String, Void, String&gt;
    {
        private Context context;

        public MyAsyncTask()
        {
            // TODO Auto-generated constructor stub
            //context = applicationContext;
        }

        protected String doInBackground(String... params)
        {
            try
            {

                Log.d(""MyTag"", ""face.getWidth() ""+face.getWidth());
                Bitmap temp_bitmap = Bitmap.createBitmap((int)face.getWidth(), (int)face.getHeight(), Bitmap.Config.RGB_565);
                canvas1.setBitmap(temp_bitmap);


            }
            catch (Exception e)
            {
                Log.e(""MyTag"", ""I got an error"", e);
                e.printStackTrace();
            }
            Log.d(""MyTag"", ""doInBackground"");
            return null;
        }

        protected void onPostExecute(String result) {
            Log.d(""MyTag"", ""onPostExecute "" + result);
            // tv2.setText(s);

        }

    }

}
</code></pre>

<p>It give me this error:</p>

<pre><code>12-16 03:08:00.310 22926-23044/com.google.android.gms.samples.vision.face.facetracker E/MyTag: I got an error
                                                                                               java.lang.UnsupportedOperationException
                                                                                                   at android.view.HardwareCanvas.setBitmap(HardwareCanvas.java:39)
                                                                                                   at com.google.android.gms.samples.vision.face.facetracker.FaceGraphic$MyAsyncTask.doInBackground(FaceGraphic.java:175)
                                                                                                   at com.google.android.gms.samples.vision.face.facetracker.FaceGraphic$MyAsyncTask.doInBackground(FaceGraphic.java:158)
</code></pre>

<p>This code can detect face in real time. For recognition part, I am planning to use 'JavaCV' <a href=""https://github.com/bytedeco/javacv"" rel=""nofollow noreferrer"">https://github.com/bytedeco/javacv</a>. If I can capture the face in a bitmap then I can save it in .jpg image then I can recognize it. Could you please give me some advise, how to save detected face. Thank you. </p>
",1850484,,1850484,,2017-12-15 21:30:08,2018-12-06 16:26:23,Save real-time detected face(Track Faces) image using 'android-vision' library,<java><android><android-vision>,1,3,1,,
Android,49236067,1,,,2018,,1,233,"<p>I never worked with such a confusing DI-framework like <a href=""/questions/tagged/dagger"" class=""post-tag"" title=""show questions tagged &#39;dagger&#39;"" rel=""tag"">dagger</a>! - However, I try to wrap my head around it.</p>

<p>I have two scopes: ActivityScope and FragmentScope</p>

<p>On some of the samples provided <a href=""https://github.com/googlesamples/android-architecture/blob/todo-mvp-dagger/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/statistics/StatisticsFragment.java#L36"" rel=""nofollow noreferrer"">StatisticsFragment.java</a> you see e.g. the fragment annotated with the scope </p>

<pre><code>@ActivityScoped
public class StatisticsFragment extends DaggerFragment implements 
StatisticsContract.View {
...
}
</code></pre>

<p><strong>Question 1:</strong>
Is this just documentation or not? In my app it makes no difference if I annotate the concrete fragment or not.</p>

<p><strong>Question 2:</strong> Where in the generated code can I see which scope is used? My fragment injects a Presenter and an AuthProvider. The AuthProvider is annotated with Singleton (in AppModule), the Presenter is defined in UIModule -> LoginModule</p>

<p>looks like this:</p>

<p><strong>UIModule.java:</strong></p>

<hr>

<pre><code>@Module(includes = AndroidSupportInjectionModule.class)
public abstract class UIModule {

    @ActivityScope
    @ContributesAndroidInjector(modules = LoginModule.class)
    abstract LoginActivity loginActivity();

    @ChildFragmentScope
    @ContributesAndroidInjector(modules = LoginModule.class)
    abstract LoginFragment loginFragment();

    @Binds
    //@ChildFragmentScope
    public abstract LoginContract.View loginView(final LoginFragment fragment);
}
</code></pre>

<p><strong>LoginModule.java</strong></p>

<hr>

<pre><code>@Module
public abstract class LoginModule {

    @Provides
    //@ChildFragmentScope
    static LoginContract.Presenter provideLoginPresenter(final LoginContract.View view, final BaseStore store) {
        return new LoginPresenter(view,store);
    }

}
</code></pre>

<p><strong>LoginFragemt.java</strong></p>

<hr>

<pre><code>public class LoginFragment extends DaggerFragment {
   @Inject
   LoginContract.Presenter presenter;

   @Inject
   Provider&lt;MyAuthClass&gt; myAuthClass;

   ... 
}
</code></pre>

<p>presenter is created every time the Fragment gets created, myAuthClass gets created only once and is <a href=""/questions/tagged/singleton"" class=""post-tag"" title=""show questions tagged &#39;singleton&#39;"" rel=""tag"">singleton</a>.
Perfect - but I have no idea <strong>HOW</strong> this works!!!</p>

<p>DaggerFragment#onAttach must somehow know that Presenter is a ""local"" singleton and MyAuthClass is a <a href=""/questions/tagged/global"" class=""post-tag"" title=""show questions tagged &#39;global&#39;"" rel=""tag"">global</a>-<a href=""/questions/tagged/singleton"" class=""post-tag"" title=""show questions tagged &#39;singleton&#39;"" rel=""tag"">singleton</a> ...</p>
",504184,,3903073,,2018-03-12 17:08:34,2018-03-12 20:32:36,"Dagger 2, scopes + annotation",<dagger-2><dagger.android>,1,0,1,,
Android,43382586,1,,,2017,,1,261,"<p><a href=""https://github.com/googlesamples/android-UniversalMusicPlayer/tree/master/mobile/src/main"" rel=""nofollow noreferrer"">Here</a> is the Google sample app. It's set up to pull metadata from a URL with a JSON. I would like to know how to have Firebase be my source. </p>

<p>Here is my attempt in changing the RemoteJSONSource class:</p>

<pre><code>package com.mm.android.uamp.model;

import android.support.v4.media.MediaMetadataCompat;
import android.util.Log;

import com.google.firebase.database.DataSnapshot;
import com.google.firebase.database.DatabaseError;
import com.google.firebase.database.DatabaseReference;
import com.google.firebase.database.FirebaseDatabase;
import com.google.firebase.database.ValueEventListener;
import com.mm.android.uamp.utils.LogHelper;

import java.util.ArrayList;
import java.util.Iterator;

public class RemoteJSONSource implements MusicProviderSource {

private static final String TAG = LogHelper.makeLogTag(RemoteJSONSource.class);

DatabaseReference mRootRef = FirebaseDatabase.getInstance().getReference();
DatabaseReference mMusic = mRootRef.child(""music"");

ArrayList&lt;MediaMetadataCompat&gt; tracksFromFB = new ArrayList&lt;&gt;();
public void buildFromFirebase(){

    mMusic.addListenerForSingleValueEvent(new ValueEventListener() {

        @Override
        public void onDataChange(DataSnapshot dataSnapshot) {

            for (DataSnapshot music : dataSnapshot.getChildren()){

                String title = music.child(""title"").getValue(String.class);
                String album = music.child(""album"").getValue(String.class);
                String artist = music.child(""artist"").getValue(String.class);
                String genre = music.child(""genre"").getValue(String.class);
                String source = music.child(""source"").getValue(String.class);
                String id = String.valueOf(source.hashCode());
                String iconUrl = music.child(""image"").getValue(String.class);
                int trackNumber = music.child(""trackNumber"").getValue(Integer.class);
                int totalTrackCount = music.child(""totalTrackCount"").getValue(Integer.class);
                int duration = music.child(""duration"").getValue(Integer.class);

                MediaMetadataCompat theMetadataFB = new MediaMetadataCompat.Builder()
                        .putString(MediaMetadataCompat.METADATA_KEY_MEDIA_ID, id)
                        .putString(MusicProviderSource.CUSTOM_METADATA_TRACK_SOURCE, source)
                        .putString(MediaMetadataCompat.METADATA_KEY_ALBUM, album)
                        .putString(MediaMetadataCompat.METADATA_KEY_ARTIST, artist)
                        .putLong(MediaMetadataCompat.METADATA_KEY_DURATION, duration)
                        .putString(MediaMetadataCompat.METADATA_KEY_GENRE, genre)
                        .putString(MediaMetadataCompat.METADATA_KEY_ALBUM_ART_URI, iconUrl)
                        .putString(MediaMetadataCompat.METADATA_KEY_TITLE, title)
                        .putLong(MediaMetadataCompat.METADATA_KEY_TRACK_NUMBER, trackNumber)
                        .putLong(MediaMetadataCompat.METADATA_KEY_NUM_TRACKS, totalTrackCount)
                        .build();

                tracksFromFB.add(theMetadataFB);
            }
        }

        @Override
        public void onCancelled(DatabaseError databaseError) {
            Log.w(TAG, ""loadPost:onCancelled"", databaseError.toException());
        }
    });
}

@Override
public Iterator&lt;MediaMetadataCompat&gt; iterator() {
    buildFromFirebase();
    ArrayList&lt;MediaMetadataCompat&gt; tracksFB = tracksFromFB;

    return tracksFB.iterator();
}

}
</code></pre>

<p>The firebase onDataChange is asynchronous so I think it hasn't finished pulling the data yet before the iterator method returns tracksFB.iterator cause tracksFB array is null. Weird thing is when I run in debug mode with a line break on</p>

<p>ArrayList tracksFB = tracksFromFB;</p>

<p>It works. From my research I think I need a callback or some type of pausing task, but I just cant figure it out.</p>

<p>Possible relevant code connected to the iterator method</p>

<pre><code>public interface MusicProviderSource {
   String CUSTOM_METADATA_TRACK_SOURCE = ""__SOURCE__"";
   Iterator&lt;MediaMetadataCompat&gt; iterator();
}
</code></pre>

<p>next</p>

<pre><code>public class MusicProvider {
private static final String TAG = LogHelper.makeLogTag(MusicProvider.class);
private MusicProviderSource mSource;
private ConcurrentMap&lt;String, List&lt;MediaMetadataCompat&gt;&gt; mMusicListByGenre;
private final ConcurrentMap&lt;String, MutableMediaMetadata&gt; mMusicListById;

private final Set&lt;String&gt; mFavoriteTracks;

enum State {
    NON_INITIALIZED, INITIALIZING, INITIALIZED
}

private volatile State mCurrentState = State.NON_INITIALIZED;

public interface Callback {
    void onMusicCatalogReady(boolean success);
}

public MusicProvider() {
    this(new RemoteJSONSource());
}
public MusicProvider(MusicProviderSource source) {
    mSource = source;
    mMusicListByGenre = new ConcurrentHashMap&lt;&gt;();
    mMusicListById = new ConcurrentHashMap&lt;&gt;();
    mFavoriteTracks = Collections.newSetFromMap(new ConcurrentHashMap&lt;String, Boolean&gt;());
}

public Iterable&lt;String&gt; getGenres() {
    if (mCurrentState != State.INITIALIZED) {
        return Collections.emptyList();
    }
    return mMusicListByGenre.keySet();
}

/**
 * Get an iterator over a shuffled collection of all songs
 */
public Iterable&lt;MediaMetadataCompat&gt; getShuffledMusic() {
    if (mCurrentState != State.INITIALIZED) {
        return Collections.emptyList();
    }
    List&lt;MediaMetadataCompat&gt; shuffled = new ArrayList&lt;&gt;(mMusicListById.size());
    for (MutableMediaMetadata mutableMetadata: mMusicListById.values()) {
        shuffled.add(mutableMetadata.metadata);
    }
    Collections.shuffle(shuffled);
    return shuffled;
}

/**
 * Get music tracks of the given genre
 *
 */
public Iterable&lt;MediaMetadataCompat&gt; getMusicsByGenre(String genre) {
    if (mCurrentState != State.INITIALIZED || !mMusicListByGenre.containsKey(genre)) {
        return Collections.emptyList();
    }
    return mMusicListByGenre.get(genre);
}

}
</code></pre>

<p>Also the musicService.java in the link above might be relevant. PLEASE help! </p>
",7789011,,4625829,,2017-04-13 2:46:05,2017-11-27 20:50:49,How to use Firebase with the Android universal music player?,<android><firebase><android-asynctask><callback><firebase-realtime-database>,1,3,1,,
Android,43371389,1,43460146,,2017,,1,439,"<p>According to <a href=""https://developer.android.com/google/play/billing/billing_reference.html"" rel=""nofollow noreferrer"" title=""documentation"">in-app billing reference</a> and <a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/aidl/com/android/vending/billing/IInAppBillingService.aidl"" rel=""nofollow noreferrer"">the next aidl definition</a>, there is method <code>getPurchaseHistory()</code>. The code is as simple as:</p>

<pre><code>Bundle purchaseHistoryBundle = service.getPurchaseHistory(6, BuildConfig.APPLICATION_ID, ""subs"", null, new Bundle());
</code></pre>

<p>Response I get is <code>6 (BILLING_RESPONSE_RESULT_ERROR)</code>. That means ""Fatal error during the API action""</p>

<p>What's wrong with the code? And if it is a bug in the service, where is the right place to report it?</p>
",1732338,,,,,2017-04-21 19:40:35,Android In-app billing getPurchaseHistory() doesn't work,<android><google-play-services><in-app-billing>,1,4,1,,
Android,43549220,1,,,2017,,1,375,"<p>I'm trying to implement camera2api provided by google with this link
<a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Video</a></p>

<p>Everything works fine but after after stoping the video the app crashes on mediarecorder.stop()</p>

<p>I'm using Xiaomi 4A </p>

<p>Logcat:</p>

<p>4-21 23:37:42.189 20375-20375/? E/AndroidRuntime: FATAL EXCEPTION: main
                                                   Process: com.example.android.camera2video, PID: 20375
                                                   java.lang.RuntimeException: stop failed.
                                                       at android.media.MediaRecorder.stop(Native Method)
                                                       at com.example.android.camera2video.Camera2VideoFragment.stopRecordingVideo(Camera2VideoFragment.java:687)
                                                       at com.example.android.camera2video.Camera2VideoFragment.onClick(Camera2VideoFragment.java:314)
                                                       at android.view.View.performClick(View.java:5207)
                                                       at android.view.View$PerformClick.run(View.java:21177)
                                                       at android.os.Handler.handleCallback(Handler.java:739)
                                                       at android.os.Handler.dispatchMessage(Handler.java:95)
                                                       at android.os.Looper.loop(Looper.java:148)
                                                       at android.app.ActivityThread.main(ActivityThread.java:5441)
                                                       at java.lang.reflect.Method.invoke(Native Method)
                                                       at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:738)
                                                       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:628)</p>
",6140957,,6140957,,2017-04-21 18:08:28,2018-02-07 10:51:50,Android media recorder crashes on stop,<android><google-api><android-mediarecorder><android-camera2>,1,3,1,,
Android,26479618,1,26480019,,2014,,1,1950,"<p>I am trying out Android L's new profile manager. <a href=""https://github.com/googlesamples/android-BasicManagedProfile"" rel=""nofollow"">https://github.com/googlesamples/android-BasicManagedProfile</a></p>

<p>When I deploy the apk, the package manager is not able to resolve the intent for device provisioning hence, I am getting ""Device provisioning is not enabled. Stopping.""</p>

<p>I have the latest Android L device image, that I got from <a href=""http://developer.android.com/preview/index.html#download"" rel=""nofollow"">http://developer.android.com/preview/index.html#download</a></p>

<p>How can I enable device provisioning so that I can run the sample code.</p>
",710802,,,,,2014-10-21 6:13:22,"Android L ""Device provisioning is not enabled""?",<android><android-5.0-lollipop>,1,2,1,,
Android,36170914,1,,,2016,,1,370,"<p>I have been working on an music player app based on <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""nofollow"">android-UniversalMusicPlayer</a> sample. And I have had installed LeakCanary to detect memory leak issue and find out that there is indeed a memory leak issue. Please be noted that I did not make any changes except adding the memory leak detection.  </p>

<p>Please refer to the following information for details:</p>

<pre class=""lang-html prettyprint-override""><code>In com.example.android.uamp:1.1:2.

com.example.android.uamp.ui.FullScreenPlayerActivity has leaked:
GC ROOT static android.os.UserManager.sInstance
references android.os.UserManager.mContext
references android.app.ContextImpl.mOuterContext
references com.example.android.uamp.MusicService.mConnections
references android.support.v4.util.ArrayMap.mArray
references array java.lang.Object[].[2]
references android.os.Handler$MessengerImpl.this$0
references android.support.v4.media.MediaBrowserCompat$CallbackHandler.mCallbackImpl
references android.support.v4.media.MediaBrowserCompat$MediaBrowserImplApi23.mBrowserObj
references android.media.browse.MediaBrowser.mContext
leaks com.example.android.uamp.ui.FullScreenPlayerActivity instance
Retaining: 631 KB.
Reference Key: 21cd0054-506d-4c6f-94d1-47090c16fbb0
Device: LGE google Nexus 5 hammerhead
Android Version: 6.0.1 API: 23 LeakCanary: 1.4-beta1 02804f3
Durations: watch=5024ms, gc=121ms, heap dump=6019ms, analysis=40029ms
</code></pre>



<p>You could also refer to the <a href=""https://www.dropbox.com/s/h6b4x1jib2r6cte/Dump_memory_Leak_UniversalMusicPlayer.hprof?dl=0"" rel=""nofollow"">link</a> for the dump hprof file. To me it seems that this is a Android system bug? In this case, is there workaround? This is a deadly serious issue to my app as I could stably crash my app by exiting the app and entering the app again with playback on. Any help will be greatly appreciated. </p>
",4068957,,,,,2016-04-14 19:34:40,Memory Leak issue : com.example.android.uamp.ui.FullScreenPlayerActivity has leaked,<android><memory-leaks><exoplayer>,1,3,1,,
Android,36530511,1,,,2016,,1,679,"<p>I've been looking for a solution to this and I came across several answers that didn't fit the use-case. The <a href=""https://github.com/googlesamples/android-fit/tree/master/BasicSensorsApi"" rel=""nofollow"">sample code from Google</a> works fine if imported as is, but the code sits in an Activity and is messy if you want to integrate into a real project where the code would ideally be in a fragment.</p>

<p>The issue is with the <strong>enableAutoManage</strong> functionality and what to do in the fresh install case where the googleApiClient is built but the authentication/account-pick screen is not yet done and you end up with connection failed on the googleApiClient. I'm going to answer this in full, below.</p>
",764897,,,,,2018-09-24 5:50:20,How to implement Google Fit step counter within a Fragment,<android><google-fit>,1,0,1,,
Android,53931191,1,53954074,,2018,,1,51,"<p>I'm implement one demo Video and Audio recording using <code>MediaRecorder</code></p>

<p>Download the demo from hear : <strong><a href=""https://github.com/googlesamples/android-MediaRecorder"" rel=""nofollow noreferrer"">Android MediaRecorder Sample</a></strong> </p>

<p>There is one method <strong><code>prepareVideoRecorder()</code></strong> in <code>MainActivity.java</code>. in this method initialization and <strong>set Source</strong> Audio and video like:</p>

<pre><code>mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
</code></pre>

<p>Now i want to audio <strong>ON</strong> or <strong>OFF</strong> functionality.</p>

<p>For that i'll tried like this :</p>

<pre><code> if (!AppSetting.getValue(activity, Config.AUDIO, false)) {
            mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
        }else {
            mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
            mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
        }
</code></pre>

<p>But app is Crash with below error :</p>

<pre><code>java.lang.IllegalStateException
at android.media.MediaRecorder.setAudioEncoder(Native Method)
</code></pre>

<p>So how to i solve this error or there is another solution for Audio <strong>ON</strong> or <strong>OFF</strong>:</p>
",9180439,,,,,2018-12-28 7:11:39,How to ON or OFF audio recording using MediaRecorder,<java><android><audio><android-mediarecorder>,1,0,1,,
Android,55301892,1,,,2019,,1,114,"<p>I have been trying to implement <a href=""https://developers.google.com/identity/sms-retriever/verify"" rel=""nofollow noreferrer"">SMS Retriever API</a> to collect incoming sms from the server on the phone, apparently <code>onReceive()</code> on the broadcast listener is never called when sms is received on the phone.</p>

<p><strong>Client implementation</strong> is mentioned as below. </p>

<pre><code>    private fun startSMSListener() {
    Log.d(TAG, ""startSMSListener():"")

    val client = SmsRetriever.getClient(this)
    val retriever = client.startSmsRetriever()
    retriever.addOnSuccessListener {

        Toast.makeText(this@MainActivity,""Listener started"", Toast.LENGTH_SHORT).show()

        val otpListener = object : SMSBroadcastReceiver.OTPListener {
            override fun onOTPReceived(otp: String) {
                Log.d(TAG, ""onOTPReceived(): $otp"")
                tv_hash_code.text = otp
                Toast.makeText(this@MainActivity, otp , Toast.LENGTH_LONG).show()
            }

            override fun onOTPTimeOut() {
                Log.d(TAG, ""onOTPTimeOut():"")
                Toast.makeText(this@MainActivity,""TimeOut"", Toast.LENGTH_SHORT).show()
            }
        }
        //smsBroadcastReceiver this is already initialized 
        smsBroadcastReceiver.injectOTPListener(otpListener)
        registerReceiver(smsBroadcastReceiver,
            IntentFilter(SmsRetriever.SMS_RETRIEVED_ACTION))
    }
    retriever.addOnFailureListener {
        Toast.makeText(this@MainActivity,""Problem to start listener"", Toast.LENGTH_SHORT).show()
    }
}
</code></pre>

<p>Broadcast receiver is </p>

<pre><code>class SMSBroadcastReceiver : BroadcastReceiver() {


private var otpReceiver: OTPListener? = null

fun injectOTPListener(receiver: OTPListener?) {
    Log.d(TAG, ""injectOTPListener is empty : ${receiver == null}"")
    this.otpReceiver = receiver
}

override fun onReceive(context: Context, intent: Intent) {
    Log.d(TAG, intent.action)
    if (SmsRetriever.SMS_RETRIEVED_ACTION == intent.action) {
        val extras = intent.extras
        val status = extras.get(SmsRetriever.EXTRA_STATUS) as Status

        when (status.statusCode) {

            CommonStatusCodes.SUCCESS -&gt; {
                Log.d(TAG, ""CommonStatusCodes.SUCCESS"")
                Toast.makeText(context, ""CommonStatusCodes.SUCCESS"", Toast.LENGTH_LONG).show()

                val message = extras.get(SmsRetriever.EXTRA_SMS_MESSAGE) as String

                val pattern = Pattern.compile(""\\d{6}"")
                val matcher = pattern.matcher(message)

                if (matcher.find()) {
                    otpReceiver?.onOTPReceived(matcher.group(0))
                    return
                }
            }
            CommonStatusCodes.TIMEOUT -&gt; {
                Log.d(TAG, ""CommonStatusCodes.TIMEOUT"")
                Toast.makeText(context, ""CommonStatusCodes.TIMEOUT"", Toast.LENGTH_LONG).show()
                otpReceiver?.onOTPTimeOut()
            }
        }
    }
}

interface OTPListener {


    fun onOTPReceived(otp: String)

    fun onOTPTimeOut()
}
}
</code></pre>

<p><strong>Server Implementation</strong> </p>

<p>This is what I have for the message </p>

<pre><code>&lt;#&gt; Your SmsVerificationCOde code is: 123456
wPMABADKiiS
</code></pre>

<p>This Hash-Code generated using debug key, I tried three different methods to generate the hash-code which all provide the same value.</p>

<ol>
<li><p>Keytool</p>

<p>keytool -exportcert -alias androiddebugkey -keystore  ~/.android/debug.keystore -storepass android -keypass android | xxd -p | tr -d ""[:space:]"" | echo -n com.example.smsverificationcode <code>cat</code> | sha256sum | tr -d ""[:space:]-"" | xxd -r -p | base64 | cut -c1-11</p></li>
<li><p><a href=""https://github.com/googlesamples/android-credentials/blob/master/sms-verification/bin/sms_retriever_hash_v9.sh"" rel=""nofollow noreferrer"">Script</a></p>

<p>./sms_retriever_hash_v9.sh --package ""com.example.smsverificationcode"" --keystore ~/.android/debug.keystore</p></li>
<li><p><a href=""https://github.com/googlesamples/android-credentials/blob/master/sms-verification/android/app/src/main/java/com/google/samples/smartlock/sms_verify/AppSignatureHelper.java"" rel=""nofollow noreferrer"">AppSignatureHelper</a></p></li>
</ol>

<p>all of them seem to provide the same hash-code which makes me believe that hash-code is alright ( I tried this for release type any way, all method provide me with another ""value"" which is same for all method of evaluation )</p>

<p>Reference:
<a href=""https://developers.google.com/identity/sms-retriever/verify"" rel=""nofollow noreferrer"">https://developers.google.com/identity/sms-retriever/verify</a>
<a href=""https://medium.com/@wilderpereira/secure-android-otp-account-verification-with-the-sms-retriever-api-c395c1985fbf"" rel=""nofollow noreferrer"">https://medium.com/@wilderpereira/secure-android-otp-account-verification-with-the-sms-retriever-api-c395c1985fbf</a></p>

<p>I am positive the client implementation is correct as I get the TimeOut error after 5 minutes, but never actually get anything at time of sms arrival.</p>

<p>I believe that Android system is not able to figure out the my application based of the hash-code or the format of my message could be wrong.</p>

<p>Kindly have a look and correct me where I could be wrong. any help is highly regarded.</p>
",11209303,,11209303,,2019-03-22 15:41:06,2019-03-22 16:28:46,SMS Retriever API android system unable to send message to the Broadcast Receiver,<android><kotlin><sms>,1,2,1,,
Android,48645234,1,48649395,,2018,,1,452,"<p>I setup a device owner application provisioning app as shown in google sample <a href=""https://github.com/googlesamples/android-NfcProvisioning"" rel=""nofollow noreferrer"">NFC Provisioning</a> , with additional features to setup <code>EXTRA_PROVISIONING_DEVICE_ADMIN_PACKAGE_DOWNLOAD_LOCATION</code> and <code>EXTRA_PROVISIONING_DEVICE_ADMIN_PACKAGE_CHECKSUM</code>. I would like as shown in the video of <a href=""https://youtu.be/Za0OQo8DRM4?t=36m57s"" rel=""nofollow noreferrer"">Google I/O 2016</a>, to provide both device owner app and cosu app. 
How can I achieve this goal?</p>

<p>I should setup a single app which is both cosu and device owner or I have to provide download location automatically via nfc through provisioning app and instruct my device owner to download and install the specific app?</p>
",4875522,,,,,2018-02-06 18:12:33,Provisioning Device Owner and CosuApp,<android><android-for-work><cosu>,1,0,1,,
Android,40419605,1,40419946,,2016,,1,903,"<p>I am trying to get access to <code>""/""</code> (root) directory using <code>Storage Access Framework</code> on Android 7.0 and above, after looking to the Google sample on <a href=""https://github.com/googlesamples/android-ScopedDirectoryAccess"" rel=""nofollow noreferrer"">GitHub</a>, i can see that there are only predefined directories are passed in while creating accessIntent using StorageVolume class, but how to get access to any other directory than those predefined directories?</p>

<p>Here is my code, which i tried:</p>

<pre><code>    StorageManager storageManager = (StorageManager) getSystemService(Context.STORAGE_SERVICE);
    File root = new File(""/"");
    StorageVolume storageVolume = storageManager.getStorageVolume(root);

    Intent intent = storageVolume.createAccessIntent(""/"");
    startActivityForResult(intent, REQUEST_CODE);
</code></pre>

<p>i am getting null as storageVolume and unable to get access to ""/"" directory using StorageVolume framework.</p>

<blockquote>
  <p>How to get <a href=""https://developer.android.com/training/articles/scoped-directory-access.html"" rel=""nofollow noreferrer"">Scoped Directory Access</a> to <code>""/""</code> directory
  using <a href=""https://developer.android.com/guide/topics/providers/document-provider.html"" rel=""nofollow noreferrer"">Storage Access Framework</a> on Android 7.0 and above?</p>
</blockquote>
",1791546,,1791546,,2016-11-07 11:14:48,2016-11-07 11:14:48,"How to get access to ""/"" (root) directory using Storage Access framework",<android><android-7.0-nougat><android-7.1-nougat>,1,1,1,,
Android,31786559,1,31875851,,2015,,1,258,"<p>Following the <a href=""http://tools.android.com/tech-docs/android-ndk-preview"" rel=""nofollow"">Android NDK Preview</a> document, I install android-ndk-10e and experimental gradle plugin ,import the <a href=""https://github.com/googlesamples/android-ndk/tree/master/Teapot"" rel=""nofollow"">Teapot</a> sample project then set the ""Android Native"".</p>

<p>Things seem works fine except that the breakpoints in native code can not be triggered. Have tested on OS X Yosemite and Windows 7, both failed.</p>

<p>Here is a <a href=""https://groups.google.com/forum/#!topic/android-ndk/r4q67-JKBPM"" rel=""nofollow"">post</a> says doing some changes to gradle file, but not working for me.</p>
",853569,,,,,2015-08-07 10:46:31,Breakpoints in native code can not be triggered in Android Studio 13,<android-studio><gradle><android-ndk>,1,0,1,,
Android,39253010,1,,,2016,,1,299,"<p>I'm trying to develop an application that uses Camera 2 API, but I have a problem when I try to edit the height of the bottom bar. I would like to remove the black space between the camera and bottom bar. Moreover, I would like to extend the camera height.</p>

<p>I followed the Google <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">Camera2Basic</a> example.</p>

<p><a href=""https://i.stack.imgur.com/4foft.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/4foft.jpg"" alt=""enter image description here""></a></p>

<p>Could I fix this problem?</p>

<p>Thanks.</p>

<p><strong>activity_camera.xml</strong></p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;FrameLayout xmlns:android=""http://schemas.android.com/apk/res/android""
    xmlns:tools=""http://schemas.android.com/tools""
    android:id=""@+id/container""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""
    android:background=""#000""
    tools:context="".CameraActivity"" /&gt;
</code></pre>

<p><strong>fragment_camera2.xml</strong></p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;RelativeLayout xmlns:android=""http://schemas.android.com/apk/res/android""
    xmlns:app=""http://schemas.android.com/apk/res-auto""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""
    android:foreground=""?selectableItemBackground"" &gt;

    &lt;widgets.AutoFitTextureView
        android:id=""@+id/texture""
        android:layout_width=""match_parent""
        android:layout_height=""match_parent""
        android:layout_alignParentLeft=""true""
        android:layout_alignParentStart=""true""
        android:layout_alignParentTop=""true"" /&gt;

    &lt;FrameLayout
        android:id=""@+id/control""
        android:layout_width=""match_parent""
        android:layout_height=""wrap_content""
        android:layout_alignParentBottom=""true""
        android:layout_alignParentLeft=""true""
        android:layout_alignParentStart=""true""
        android:elevation=""4dp""
        android:paddingBottom=""12dp""
        android:paddingLeft=""16dp""
        android:paddingRight=""16dp""
        android:paddingTop=""12dp""
        android:background=""@color/white"" &gt;

        &lt;ImageButton
            android:id=""@+id/picture""
            android:layout_width=""@dimen/ic_camera""
            android:layout_height=""@dimen/ic_camera""
            android:layout_gravity=""center""
            android:background=""@drawable/cam_circle_selector""
            android:contentDescription=""@string/description_info""
            android:scaleType=""fitXY""
            app:srcCompat=""@drawable/ic_action_capture"" /&gt;

    &lt;/FrameLayout&gt;

&lt;/RelativeLayout&gt;
</code></pre>
",4711153,,4711153,,2016-10-05 15:49:25,2019-01-06 7:57:11,Android Camera2 - Remove black space between camera and bottom bar,<android><android-camera2>,1,7,1,,
Android,38869938,1,,,2016,,1,197,"<p>I want to <strong>send ""text"" from android device to a LED panel via a ""BLE"" adapter.</strong></p>

<p>I am able to connect the android device with the ""BLE adapter"" through the following sample project. As this is an open-source project, i have no problems in the connection part.
<a href=""https://github.com/googlesamples/android-BluetoothLeGatt"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-BluetoothLeGatt</a></p>

<p>Now, i want to send data (say ""Hello World"") from the device to the ble adapter. I find a project on Google Play and it would send data successfully to the ""BLE Adapter"" as shown below
<a href=""https://play.google.com/store/apps/details?id=com.ingics.uc.serialble.v2"" rel=""nofollow noreferrer"">https://play.google.com/store/apps/details?id=com.ingics.uc.serialble.v2</a></p>

<p>However, <strong>this is not an open-source project and there are no ways for me to work it out programmatically.</strong> </p>

<p>I have searched github and found some projects claming they would send data to bluetooth devices but i still would not work it out.
<a href=""https://github.com/suzp1984/Light_BLE"" rel=""nofollow noreferrer"">https://github.com/suzp1984/Light_BLE</a>
<a href=""https://github.com/Lembed/Android-BLE-Terminal"" rel=""nofollow noreferrer"">https://github.com/Lembed/Android-BLE-Terminal</a></p>

<p>I know ""BLE"" is a big topic here but the objective i want to achieve is very simple. Great if anyone would share with me some ""<strong>simple sample projects</strong>"" for me to achieve my goal.</p>

<p><a href=""https://i.stack.imgur.com/rQXU1.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/rQXU1.png"" alt=""enter image description here""></a></p>
",4152203,,,,,2016-08-10 9:56:41,Android Send Data via Blue Tooth Low Energy adapter,<android><bluetooth><bluetooth-lowenergy>,1,0,1,,
Android,39797164,1,,,2016,,1,1363,"<p>In this <a href=""https://stackoverflow.com/questions/32051973/google-vision-api-samples-get-the-camerasource-to-focus?rq=1"">SO Thread</a>, <a href=""https://stackoverflow.com/users/5231007/pm0733464"">pm0733464</a>, says this: </p>

<blockquote>
  <p>we open sourced the CameraSource class, which has an auto focus method as well. This one allows you to set a specific focus mode as opposed to the ""continuous video"" mode that the official API defaults to:</p>
</blockquote>

<p>Which was great. But it seems that the Google Vision API has moved on and the open Sourced version has not. The official API now has a new type of processor called: FocusingProcessor -- which allows the detector to only respond on the OnFocus event. </p>

<pre><code> barcodeDetector = new BarcodeDetector.Builder(this)
            .setBarcodeFormats(Barcode.QR_CODE | Barcode.PDF417)
            .build();
 barcodeDetector.setProcessor(new BarcodeFocusingProcessor(
            barcodeDetector,
            new NullTracker()));
 CameraSource.Builder builder = new CameraSource.Builder(getApplicationContext(), barcodeDetector)
            .setFacing(CameraSource.CAMERA_FACING_BACK)
            .setRequestedPreviewSize(1600, 1024)
            .setAutoFocusEnabled(true)
            .setRequestedFps(24.0f);
    cameraSource = builder.build();
</code></pre>

<p>In my experiments this ""finds"" barcodes much faster than using the processor that the examples show in the <a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java"" rel=""nofollow noreferrer"">Official Google Vision API Samples</a></p>

<p>Am I missing something somewhere? Or is the CameraSource in the Google.Vision libraries not the same one they are showing in the open source?</p>

<p>[EDIT] 
Sharing code by request of pm0733464:</p>

<p>For the record, I began with the fork of the vision api Demo which allows for <a href=""https://github.com/wax911/Vision-Barcode-Scanner"" rel=""nofollow noreferrer"">automatically detecting barcode</a></p>

<p>My code makes some simple changes. First off, I add PDF417 to the scanable barcodes. Then I set the processor to an autofocus-er. I turn the tracker into a nullTracker because I don't need the graphic displaying, and I hoped that would speed some things up</p>

<p>in  <strong>BarcodeCaptureActivity</strong> I change <strong>createCameraSource</strong> where it defined the barcode detector like to this:</p>

<pre><code>  BarcodeDetector barcodeDetector =
                new BarcodeDetector.Builder(context)
                        .setBarcodeFormats(Barcode.PDF417)
                        .build();


        barcodeDetector.setProcessor(new MyCameraFocusingProcessor(
                barcodeDetector,
                new NullTracker()));


// Creates and starts the camera.  Note that this uses a higher resolution in comparison
        // to other detection examples to enable the barcode detector to detect small barcodes
        // at long distances.

        CameraSource.Builder builder = new CameraSource.Builder(getApplicationContext(), barcodeDetector)
                .setFacing(CameraSource.CAMERA_FACING_BACK)
                .setRequestedPreviewSize(1600, 1024)
                .setRequestedFps(24.0f);

        // make sure that auto focus is an available option
        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.ICE_CREAM_SANDWICH)
        {
            builder = builder.setFocusMode(
                    autoFocus ? Camera.Parameters.FOCUS_MODE_CONTINUOUS_PICTURE : null);
        }

        mCameraSource = builder
                .setFlashMode(useFlash ? Camera.Parameters.FLASH_MODE_TORCH : null)
                .build();
    }
</code></pre>

<p>My FocusProcessor (in the same class) looks like this:</p>

<pre><code>private class MyCameraFocusingProcessor implements Detector.Processor&lt;Barcode&gt;
    {
        public MyCameraFocusingProcessor(BarcodeDetector barcodeDetector, NullTracker emptyTracker)
        {

        }

        @Override
        public void release()
        {

        }

        @Override
        public void receiveDetections(Detector.Detections&lt;Barcode&gt; detections)
        {
            //  boolean chk = detections.detectorIsOperational();
            int sizeCheck = detections.getDetectedItems().size();
            if (sizeCheck &gt; 0)
            {
                SparseArray&lt;Barcode&gt; codes = detections.getDetectedItems();
                for (int i = 0; i &lt; sizeCheck; i++)
                {
                    Barcode barcode = codes.valueAt(i);
                    try
                    {
                        if (barcode.format == Barcode.PDF417)
                        {
                            Intent data = new Intent();
                            data.putExtra(BarcodeObject, barcode);
                            setResult(CommonStatusCodes.SUCCESS, data);
                            finish();
                            break;
                        }
                    }
                    catch (Exception ex)
                    {
                        Log.d(""Detect"", ""Error: "" + ex.getMessage());
                    }
                }
            }
            return;
        }
    }

    private class NullTracker
    {

    }
</code></pre>
",628887,,-1,,2017-05-23 12:00:40,2016-10-10 16:06:43,Is the Open Sourced Google Vision API CameraSource class Out-Dated?,<android><android-camera><google-play-services><android-vision><google-vision>,1,0,1,,
Android,29540171,1,,,2015,,1,1148,"<p>NOTE: Before you say it's a duplicate and others have solved it and that there are tutorials (like <a href=""http://androidopentutorials.com/android-vertical-scrollbar-styling/"" rel=""nofollow""><strong>this one</strong></a>), I know, but for some reason, they don't work for me.</p>

<h2>Background</h2>

<p>I've made a library (<a href=""https://github.com/AndroidDeveloperLB/ListViewVariants"" rel=""nofollow""><strong>here</strong></a>) that shows how to mimic the way that the Contacts app of Lollipop shows the headers on the left.</p>

<p>I'd like to know how to customize the scrollbar and the fast-scroller to look like on Lollipop (either like the contacts app there as I've done <a href=""https://github.com/AndroidDeveloperLB/LollipopContactsRecyclerViewFastScroller"" rel=""nofollow""><strong>with RecyclerView</strong></a>, or like the default one for ListView).</p>

<h2>The problem</h2>

<p>For some reason, even though I use the same attributes that are talked about on all of the tutorials and StackOverflow posts, they don't do anything.</p>

<p>Here's the style I created:</p>

<pre><code>&lt;style name=""CustomTheme"" &gt;
  &lt;item name=""android:scrollbarFadeDuration""&gt;250&lt;/item&gt;
  &lt;item name=""android:scrollbarDefaultDelayBeforeFade""&gt;300&lt;/item&gt;
  &lt;item name=""android:scrollbarSize""&gt;10dip&lt;/item&gt;
  &lt;item name=""android:scrollbarThumbHorizontal""&gt;@drawable/scrollbar_handle_material&lt;/item&gt;
  &lt;item name=""android:scrollbarThumbVertical""&gt;@drawable/scrollbar_handle_material&lt;/item&gt;
  &lt;item name=""android:scrollbarTrackHorizontal""&gt;@null&lt;/item&gt;
  &lt;item name=""android:scrollbarTrackVertical""&gt;@null&lt;/item&gt;
&lt;/style&gt;
</code></pre>

<p><strong>res/drawable/scrollbar_handle_material.xml</strong></p>

<pre><code>&lt;shape xmlns:android=""http://schemas.android.com/apk/res/android""
       android:tint=""?attr/colorControlNormal""
       android:shape=""rectangle""&gt;
  &lt;solid android:color=""#84ffffff""/&gt;
  &lt;size android:width=""4dp""/&gt;
&lt;/shape&gt;
</code></pre>

<p>And of course I use it for the ListView:</p>

<pre><code>style=""@style/CustomTheme""
</code></pre>

<h2>What I've tried</h2>

<p>Well, I tried to play with the attributes, I tried to use a simple ListView (and a GridView, by using the sample ""<a href=""https://github.com/googlesamples/android-DisplayingBitmaps/"" rel=""nofollow""><strong>DisplayingBitmaps</strong></a>"") and I tried to set the attributes right in the ListView tag (instead of using a style) as such:</p>

<pre><code>            android:scrollbarFadeDuration=""250""
            android:scrollbarDefaultDelayBeforeFade=""300""
            android:scrollbarSize=""10dp""
            android:scrollbarThumbHorizontal=""@drawable/scrollbar_handle_material""
            android:scrollbarThumbVertical=""@drawable/scrollbar_handle_material""
            android:scrollbarTrackHorizontal=""@null""
            android:scrollbarTrackVertical=""@null""
</code></pre>

<p>... but nothing does anything...</p>

<h2>The question</h2>

<p>How could it be? what's missing? what's wrong ?</p>

<p>I'd also like to ask if it's possible on Android 2.x.</p>
",878126,,,,,2015-04-10 19:06:15,How to customize the scrollbar on ListView?,<android><android-listview><scrollbar>,1,4,1,,
Android,52576072,1,52576209,,2018,,1,416,"<p>Recently I have dived into learning new andoirdX artefacts including Android Architecture Components. </p>

<p>After reading through the officials docs and a google code samples I have successfully added the necessary dependencies in both my project and app level Gradle files. 
They are as follows</p>

<pre><code>dependencies {
    classpath 'com.android.tools.build:gradle:3.2.0'
    classpath ""org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version""
    classpath ""android.arch.navigation:navigation-safe-args-gradle-plugin:$navigationVersion""

    // NOTE: Do not place your application dependencies here; they belong
    // in the individual module build.gradle files
}
</code></pre>

<p>and </p>

<pre><code>apply plugin: 'com.android.application'

apply plugin: 'kotlin-android'

apply plugin: 'kotlin-android-extensions'

apply plugin: 'kotlin-kapt'

apply plugin: 'androidx.navigation.safeargs'

android {
compileSdkVersion 28
defaultConfig {
    applicationId ""_ _ _ _ _ _""
    minSdkVersion 15
    targetSdkVersion 28
    versionCode 1
    versionName ""1.0""
    vectorDrawables.useSupportLibrary = true
    testInstrumentationRunner ""androidx.test.runner.AndroidJUnitRunner""
}
buildTypes {
    release {
        minifyEnabled false
        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
    }
}
}

dependencies {
implementation fileTree(dir: 'libs', include: ['*.jar'])
implementation""org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlin_version""
implementation 'androidx.appcompat:appcompat:1.0.0'
implementation 'androidx.recyclerview:recyclerview:1.0.0'
implementation 'androidx.constraintlayout:constraintlayout:2.0.0-alpha2'
implementation 'com.google.android.material:material:1.0.0-rc01'
testImplementation 'junit:junit:4.12'
androidTestImplementation 'androidx.test:runner:1.1.0-alpha3'
androidTestImplementation 'androidx.test.espresso:espresso-core:3.1.0-alpha3'


def lifecycle_version = ""2.0.0-beta01""
def room_version = ""2.0.0-beta01""
def navigationVersion = '1.0.0-alpha06'
kapt ""androidx.room:room-compiler:$room_version""
kapt ""androidx.lifecycle:lifecycle-compiler:$lifecycle_version""

implementation 'androidx.core:core-ktx:1.0.0-alpha1'
implementation ""androidx.lifecycle:lifecycle-viewmodel-ktx:$lifecycle_version""
implementation ""androidx.lifecycle:lifecycle-livedata:$lifecycle_version""
implementation ""androidx.lifecycle:lifecycle-runtime:$lifecycle_version""
implementation ""android.arch.navigation:navigation-fragment-ktx:$navigationVersion""
implementation ""android.arch.navigation:navigation-ui-ktx:$navigationVersion""

implementation ""androidx.room:room-runtime:$room_version""
 }
</code></pre>

<p>after giving Gradle sync everything worked fine, however, it showed an error saying <strong>""Manifest merge error please see logs for more info""</strong></p>

<p>I have double checked with <a href=""https://github.com/googlesamples/android-sunflower"" rel=""nofollow noreferrer"">an app from google</a> repository and everything seems normal.</p>

<p>Please accept my humble appreciation in advance</p>
",,user5436326,,,,2018-09-30 8:39:26,Manifest marge error after migrating to androidX,<android><android-jetpack><android-navigation-component>,1,0,1,,
Android,26310908,1,27478710,,2014,,1,1108,"<p>I have an experiment with Android Manage Profile <a href=""https://github.com/googlesamples/android-BasicManagedProfile"" rel=""nofollow"">https://github.com/googlesamples/android-BasicManagedProfile</a> for Android L Platform.
Android L successfully installed on my Nexus 7 and sample application of basic manage profile successfully compiled and run on the device. </p>

<p>The sample app correctly send intent to start the Provisioning.</p>

<pre><code>Intent intent = new Intent(ACTION_PROVISION_MANAGED_PROFILE);
    intent.putExtra(EXTRA_PROVISIONING_DEVICE_ADMIN_PACKAGE_NAME,
                    activity.getApplicationContext().getPackageName());
    intent.putExtra(EXTRA_PROVISIONING_DEFAULT_MANAGED_PROFILE_NAME,
                    ""Sample Managed Profile"");
    intent.putExtra(EXTRA_DEVICE_ADMIN, BasicDeviceAdminReceiver.getComponentName(activity));
    if (intent.resolveActivity(activity.getPackageManager()) != null) {
        startActivity(intent);
        activity.finish();
    } else {
        Toast.makeText(activity, ""Device provisioning is not enabled. Stopping."",
                       Toast.LENGTH_SHORT).show();
    }
</code></pre>

<p>The provisioning activity shown and display a message that require restart to encrypt the device.
After device restarted there is a notification ""Continue provisioning"", when I click the notification, the provisioning activity ask to restart the device again and again.</p>

<p>I already tried also in emulator and got the same behaviour. </p>

<p>Is anyone have a clue on this? </p>
",1024806,,,,,2014-12-15 6:48:26,Android L Manage Profile,<android><android-5.0-lollipop>,1,0,1,,
Android,35127970,1,,,2016,,1,408,"<p>Im implementing a use fingerprint instead of password feature for devices with nexus imprint. </p>

<p>Its fairly easy to prompt for a fingerprint and see if was correct or not but Im scratching my head trying to protect a value with fingerprint, Im following this example <a href=""https://github.com/googlesamples/android-FingerprintDialog"" rel=""nofollow"">https://github.com/googlesamples/android-FingerprintDialog</a> but there is no recover value with fingerprint, it only explains how to store it</p>

<p>any good example of something like that?</p>

<p>The API expects a password so the general idea is:</p>

<ul>
<li>user activates ""protect with fingerprint""</li>
<li>is asked for the password</li>
<li>if correct, is asked for fingerprint</li>
<li>if correct, password is securely stored</li>
<li>for any subsequent logins, when touching the fingerprint scanner, if correct, the value is decrypted and sent to server for login</li>
</ul>
",1481061,,,,,2016-02-01 11:01:04,Protect value with fingerprint,<android><security><fingerprint><biometrics>,1,0,1,,
Android,39481821,1,,,2016,,1,579,"<h1>Question</h1>

<p>I want to do something similar to what's done on the <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">Camera2Basic</a> sample, that is:</p>

<ol>
<li><strong>Previewing</strong> images from the camera using a <code>TextureView</code></li>
<li><strong>Processing</strong> images from the camera using a <code>ImageReader</code></li>
</ol>

<p>With a few differences regarding <code>2</code>:</p>

<ul>
<li>I'm only interested on the gray channel (brightness) from the images to be processed. Their dimensions should be around 1000 x 1000 pixels (and not the highest resolution available)</li>
<li>When a image to be processed is available, a generic <code>process(Image)</code> method will be called instead of saving images to disk. What this method does is out of the scope of this question, but it takes around 50 ms to return</li>
<li>The image data should be processed periodically (around 10 FPS, but speed is not critical) instead of eventually</li>
</ul>

<p>How can I accomplish this using the <code>Camera2</code> API?</p>

<h1>Observations</h1>

<ul>
<li>I've changed the way I'm creating the <code>ImageReader</code> instance, selecting smaller dimensions and a different format (<code>YUV_420_888</code> instead of <code>JPEG</code>). The <code>Y</code> plane will be accessed in order to get the brightness data. Is there a more efficient format (since I'm simply ignoring the <code>U</code> and <code>V</code> planes)?</li>
<li>Both <code>TextureView</code> and <code>ImageReader</code> surfaces should be filled periodically, but at different rates. Since there can be only one repeating <code>CameraRequest</code> on a <code>CameraCaptureSession</code> (which can be set by calling <code>setRepeatingRequest()</code>), am I supposed to manually call <code>capture()</code> periodically (e.g. call <code>setRepeatingRequest()</code> with the preview request and call <code>capture()</code> periodically with the process request)?</li>
<li>Can the performance be improved by sending reprocessed requests to obtain the images to be processed from the preview images? If so, how can I do it?</li>
</ul>
",4681266,,,,,2016-09-20 8:55:43,Use Camera2 to Preview and Process camera data,<android><android-camera2>,1,0,1,,
Android,48887518,1,,,2018,,1,476,"<p>My Espresso test is working fine with Espresso version <code>2.2.2</code> but When I update my studio to latest one and applied migration rule test going to fail and required to update the version.<br>
<strong>library using</strong> </p>

<pre><code>androidTestImplementation'com.android.support.test.espresso:espresso-core:3.0.1'
    implementation 'com.android.support.test.espresso:espresso-idling-resource:3.0.1'
    androidTestImplementation 'junit:junit:4.12'
    androidTestImplementation 'com.android.support.test:runner:1.0.1'
    androidTestCompile 'com.android.support.test:rules:1.0.1'
    androidTestImplementation ""com.android.support:support-annotations:${support}""
    implementation fileTree(include: ['*.jar'], dir: 'libs')
</code></pre>

<p>For Idling resource during testing I am using the <a href=""https://github.com/googlesamples/android-testing/tree/master/ui/espresso/IdlingResourceSample"" rel=""nofollow noreferrer"">IdlingResourceSample</a> also I also tried <a href=""https://github.com/chiuki/espresso-samples/tree/master/idling-resource-intent-service"" rel=""nofollow noreferrer"">idling-resource-intent-service</a>  As I am using <code>IntentService</code> and <code>BroadcastReceiver</code>.<br>
As There is issue in <code>Espresso</code> <a href=""https://issuetracker.google.com/issues/65568629"" rel=""nofollow noreferrer""> Espresso.onIdle</a> &amp; <a href=""https://issuetracker.google.com/issues/65576174"" rel=""nofollow noreferrer"">Espresso IdlingResourceRegistry.sync</a> which is already reported and will fix in next release. I use <code>IdlingRegistry</code> for registering. but still I am getting <code>AppNotIdleException</code><br>
<strong>Log Cat</strong></p>

<pre><code>android.support.test.espresso.AppNotIdleException: Looped for 35 iterations over 60 SECONDS. The following Idle Conditions failed ASYNC_TASKS_HAVE_IDLED.
at dalvik.system.VMStack.getThreadStackTrace(Native Method)
at java.lang.Thread.getStackTrace(Thread.java:1538)
at android.support.test.espresso.base.DefaultFailureHandler.getUserFriendlyError(DefaultFailureHandler.java:90)
at android.support.test.espresso.base.DefaultFailureHandler.handle(DefaultFailureHandler.java:52)
at android.support.test.espresso.ViewInteraction.waitForAndHandleInteractionResults(ViewInteraction.java:312)
at android.support.test.espresso.ViewInteraction.check(ViewInteraction.java:291)
at com.company.project.InstrumentedDeepLinkTest.setDeepLinkUri(InstrumentedDeepLinkTest.java:107)
at java.lang.reflect.Method.invoke(Native Method)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
at android.support.test.rule.ActivityTestRule$ActivityStatement.evaluate(ActivityTestRule.java:433)
at org.junit.rules.RunRules.evaluate(RunRules.java:20)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
at org.junit.runners.Suite.runChild(Suite.java:128)
at org.junit.runners.Suite.runChild(Suite.java:27)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
at org.junit.runner.JUnitCore.run(JUnitCore.java:115)
at android.support.test.internal.runner.TestExecutor.execute(TestExecutor.java:58)
at android.support.test.runner.AndroidJUnitRunner.onStart(AndroidJUnitRunner.java:375)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:2075) 
</code></pre>

<p>I disabled already animations from <code>developer Options</code></p>

<p>After Analyzing which <code>AsyncTask</code> is keeping my <code>App</code> busy, I got the <code>thread pool</code> having many <code>AsyncTask</code> related to <code>sun.misc.Unsafe.park(Unsafe.java:299)</code>.<br>
<strong>Thread Pool</strong></p>

<pre><code>AsyncTask #9: WAITING
02-21 16:16:39.955 1611-1670/com.myCompany.MyProject W/System.err:  java.lang.Object.wait(Native Method)
02-21 16:16:39.955 1611-1670/com.myCompany.MyProject W/System.err:  java.lang.Thread.parkFor$(Thread.java:1220)
02-21 16:16:39.955 1611-1670/com.myCompany.MyProject W/System.err:  sun.misc.Unsafe.park(Unsafe.java:299)
02-21 16:16:39.955 1611-1670/com.myCompany.MyProject W/System.err:  java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)
02-21 16:16:39.955 1611-1670/com.myCompany.MyProject W/System.err:  java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2013)
02-21 16:16:39.955 1611-1670/com.myCompany.MyProject W/System.err:  java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:410)
02-21 16:16:39.955 1611-1670/com.myCompany.MyProject W/System.err:  java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1036)
02-21 16:16:39.955 1611-1670/com.myCompany.MyProject W/System.err:  java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1098)
02-21 16:16:39.955 1611-1670/com.myCompany.MyProject W/System.err:  java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)
02-21 16:16:39.955 1611-1670/com.myCompany.MyProject W/System.err:  java.lang.Thread.run(Thread.java:818)
</code></pre>
",3026578,,3026578,,2018-02-22 12:38:51,2019-01-17 22:42:07,Espresso Test Fail due to App not Idle Exception: The following Idle Conditions failed ASYNC_TASKS_HAVE_IDLED,<android><unit-testing><android-espresso><android-instrumentation>,1,2,1,,
Android,39982859,1,,,2016,,1,1584,"<p>Is it possible to link platforms\android-XX\arch-arm\usr\lib*.a versions of libraries when using NDK Cmake build system with Android Studio? I'm using LLVM toolchain and Android NDK 13.</p>

<p>I have tried modifications on sample app, changing file: <a href=""https://github.com/googlesamples/android-ndk/blob/master-cmake/hello-jni/app/src/main/cpp/CMakeLists.txt"" rel=""nofollow"">https://github.com/googlesamples/android-ndk/blob/master-cmake/hello-jni/app/src/main/cpp/CMakeLists.txt</a></p>

<p>With following modification (adding libm.a):</p>

<pre><code>target_link_libraries(hello-jni libm.a android log)
</code></pre>

<p>Builds successfully, but readelf -d reveals that libm.so is still linked:</p>

<pre><code> 0x00000001 (NEEDED)                     Shared library: [libandroid.so]
 0x00000001 (NEEDED)                     Shared library: [liblog.so]
 0x00000001 (NEEDED)                     Shared library: [libm.so]
 0x00000001 (NEEDED)                     Shared library: [libdl.so]
 0x00000001 (NEEDED)                     Shared library: [libc.so]
</code></pre>

<p>When adding also libc.a it gets worse, building fails:</p>

<pre><code>Error:error: relocation overflow in R_ARM_THM_JUMP11
Error:error: linker command failed with exit code 1 (use -v to see invocation)
</code></pre>

<p>BTW, sometimes I see only last error without any explanation (for example, when misspelling library name). Should I set -v flag somehwere to see more details? How to do it?</p>
",6725342,,,,,2016-10-12 17:05:55,Linking static libraries libm.a or libc.a with NDK cmake,<android><c++><android-ndk><cmake><clang>,1,4,1,,
Android,43440909,1,,,2017,,1,476,"<p>I use <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/barcode-reader"" rel=""nofollow noreferrer"">android vision sample</a> for scanning PDF417 barcode on South Africa driver license. 
For decoding information, I need to pass the byte array to another library. 
But I can get only get barcode.rawValue that is String.</p>

<p>Tring to get butes[] from string by barcode.rawValue.getBytes() returnes array this is not working with decode librery.</p>

<p>Need analog of Pdf417MobiScanData.getBarcodeRawData().getAllData()</p>

<p>Thank you.</p>
",7875525,,,,,2017-04-16 19:25:32,Get byte array with Android Vision scanning pdf417 barcode,<android><android-vision>,1,0,1,,
Android,34017544,1,34018457,,2015,,1,3741,"<p>I have problems to get the example apps for Google Fit running provided by Google. </p>

<p>I figured out so far, that the <code>resultCode</code> I get in <code>onActivityResult</code> is <code>0</code> after I selected an <code>Account</code>.</p>

<p>The example app I use at the moment is <code>BasicRecordingApi</code>, which can be found <a href=""https://github.com/googlesamples/android-fit/tree/master/BasicRecordingApi"" rel=""nofollow"">here</a>.
But I've tried the others too.</p>

<p>I created an API key for the app and I enabled Google Fit API already.</p>

<p>Nothing helps.</p>

<p>Any ideas?</p>
",4548007,,2396432,,2015-12-01 10:20:18,2016-12-09 4:51:11,Android Google Fit example is not working,<android><google-fit><google-fit-sdk>,1,0,1,,
Android,35211950,1,35214915,,2016,,1,2187,"<p>I want to test the Intent I'm sending from Activity A to Activity B.
There are samples for that, <a href=""https://github.com/googlesamples/android-testing/blob/master/ui/espresso/IntentsBasicSample/app/src/androidTest/java/com/example/android/testing/espresso/BasicSample/DialerActivityTest.java"" rel=""nofollow"">android-testing</a> and <a href=""http://developer.android.com/reference/android/support/test/espresso/intent/Intents.html"" rel=""nofollow"">espresso.intent.Intents</a>.</p>

<p>Unfortunately, I couldn't get it into work :(
I want to test following method in my first Activity.</p>

<pre><code>private void searchForDropOff()
    {
        this.startActivityForResult(PoiActivity.newIntent(this, PlacesAPIRequest.PARAM_SEARCH_TYPE_DESTINATION,
                        this.mBooking.getPickUp() != null ? this.getPickUp().getSafeLatLng() : this.mReferenceLatLng),
                        PlacesAPIRequest.PARAM_SEARCH_TYPE_DESTINATION);
    }
</code></pre>

<p>So, according to my references this is my test code:</p>

<pre><code>@RunWith(AndroidJUnit4.class)
public class FirstActivityTest
{
    @Rule
    public final IntentsTestRule&lt;FirstActivityTest&gt; mRule = new IntentsTestRule&lt;&gt;(FirstActivityTest.class);

    @Before
    public void stubAllExternalIntents()
    {
        // By default Espresso Intents does not stub any Intents. Stubbing needs to be setup before
        // every test run. In this case all external Intents will be blocked.
        intending(not(isInternal())).respondWith(new Instrumentation.ActivityResult(Activity.RESULT_OK, null));
    }

    @Test
    public void click_drop_off_box()
    {
        // Click drop-off box, POI activity displays
        onView(withId(R.id.booking_drop_off_layout)).perform(click());

        // Verify that an intent to the dialer was sent with the package.
        // Think of Intents intended API as the equivalent to Mockito's verify.
        intended(allOf(
                hasExtra(PoiActivity.EXTRA_SEARCH_TYPE, PlacesAPIRequest.PARAM_SEARCH_TYPE_DESTINATION),
                toPackage(""com.XXX.passenger.poi.PoiActivity"")));
    }
}
</code></pre>

<p>What I'm getting in Log:</p>

<pre><code>android.support.test.espresso.base.DefaultFailureHandler$AssertionFailedWithCauseError: Wanted to match 1 intents. Actually matched 0 intents.

IntentMatcher: (has extras: has bundle with: key: is ""addressType"" value: is &lt;2&gt; and resolvesTo: com.xxx.passenger.poi.PoiActivity)

Matched intents:[]

Recorded intents:
-Intent { cmp=com.xxx.passenger/com.xxx.passenger.poi.PoiActivity (has extras) } handling packages:[[com.xxx.passenger]], extras:[Bundle[{referencePoint=lat/lng: (1.3650683,103.8313499), addressType=2}]])
</code></pre>

<p>I'm confused a lot :( any idea would be appreciated. Thanks.</p>
",513413,,,,,2016-02-05 1:39:32,How to test Intent based on Espresso in Android?,<android><android-intent><android-espresso>,1,0,1,,
Android,45586828,1,45586963,,2017,,1,1842,"<p>I have the following dependencies in my <code>build.gradle</code> file</p>

<pre><code> testCompile 'junit:junit:4.12'
testCompile 'org.mockito:mockito-core:1.9.5'
</code></pre>

<p>And my test class <code>EmailValidatorTest</code> has the following code</p>

<pre><code>  @Test
public void emailValidator_simpleEmail_returnsTrue(){

   assertThat(EmailValidator.isValidEmail(""name@ex.com""),is(true))
}
</code></pre>

<p>But i get the error as <code>Cannot resolve symbol assertThat</code>. I get only <code>assert</code> object .I'm currently working on a sample from <code>Android Developers</code> i,e : <code>https://github.com/googlesamples/android-testing/tree/master/unit/BasicSample</code>.</p>
",7785152,,3395198,,2017-08-09 9:57:29,2017-08-09 11:09:52,Cannot resolve symbol assertThat,<android><android-testing>,1,2,1,,
Android,33686656,1,,,2015,,1,682,"<p>I'm trying to modify the universal music player app: <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""nofollow"">https://github.com/googlesamples/android-UniversalMusicPlayer</a> </p>

<p>Since I'm trying to build this for AOSP 6.0, I have no Google Play Services or any other Google Apps on my device, and so cannot use any non-android api's or api's that depend on Google Libraries.</p>

<p>The ""Music provider"" class, seems to visit this url:</p>

<p><a href=""http://storage.googleapis.com/automotive-media/music.json"" rel=""nofollow"">http://storage.googleapis.com/automotive-media/music.json</a></p>

<p>As mentioned in this line:</p>

<pre><code>private static final String CATALOG_URL =
    ""http://storage.googleapis.com/automotive-media/music.json"";
</code></pre>

<p>This file contains a list of tracks that are hosted by Google online. It seems the app can stream these files, but for some reason it does not detect the music already on my device. Why is that ? How do I get the app to list the music tracks that are already on my device ?</p>
",2990509,,,,,2016-12-08 16:35:58,How to get the universal music player to detect on device music?,<android>,1,0,1,,
Android,47880718,1,,,2017,,1,42,"<p>I connected to a bluetooth LE device with below instructions and samples:
<a href=""https://developer.android.com/reference/android/bluetooth/BluetoothGatt.html#getService(java.util.UUID)"" rel=""nofollow noreferrer"">https://developer.android.com/reference/android/bluetooth/BluetoothGatt.html#getService(java.util.UUID)</a></p>

<p><a href=""https://github.com/googlesamples/android-BluetoothLeGatt"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-BluetoothLeGatt</a></p>

<p>but i have no idea how i can send data (hexa code) to ble device,
can anyone help me?
does below code send data to device :</p>

<pre><code>BluetoothGattDescriptor descriptor = characteristic.getDescriptor(
UUID.fromString(SampleGattAttributes.CLIENT_CHARACTERISTIC_CONFIG));
int hexaCode =Integer.parseInt(""7c"",16);
descriptor.setValue( 
ByteBuffer.allocate(4).putInt(hexaCode).array());
mBluetoothGatt.writeDescriptor(descriptor);
</code></pre>
",4650625,,,,,2017-12-19 10:29:26,how transferring data to connected bluetooth LE device,<java><android><bluetooth><hex><bluetooth-lowenergy>,1,0,,,
Android,46543877,1,,,2017,,1,67,"<p>I want to play 5 songs together without any miss sync. I've taken reference from the below link with use of NDK:
<a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk</a></p>

<p>I'm creating 5 instance for player and playing songs but on some devices songs are not played in sync when I just fire a play.</p>

<p>I would like to know what is the best way to achieve this so I can play multiple songs in sync.</p>

<p>Let me inform you the device having good configuration like 2gb+ RAM will play sounds in perfectly But in device having RAM of 1GB will not work always.</p>

<p>I've tried with MediaPlayer and Soundpool but not helps me. NDK implementation is far better.</p>

<p>Looking for best work around for this...</p>

<p>Thanks in advance</p>
",4007027,,-1,,2019-04-09 19:36:06,2017-10-03 11:57:55,How to play multiple songs together in sync?,<android><audio><android-ndk><audio-player><opensl><android-music-player>,1,0,,,
Android,47544132,1,,,2017,,1,345,"<p>My app uses SyncAdapters to sync data in the background. On a device running OS 8.0 and setup for Android for Work managed profile, calling addAccountExplicitly throws a SecurityException and fails to add the account properly.</p>

<p>Here is the callstack:</p>

<pre><code>11-28 17:28:00.182 7291-7291/com.example.android.basicsyncadapter E/CreateSyncAccount: Failed
   java.lang.SecurityException: com.google.android.gm from uid 10074 not allowed to perform GET_ACCOUNTS
      at android.os.Parcel.readException(Parcel.java:1942)
      at android.os.Parcel.readException(Parcel.java:1888)
      at android.accounts.IAccountManager$Stub$Proxy.addAccountExplicitly(IAccountManager.java:1205)
      at android.accounts.AccountManager.addAccountExplicitly(AccountManager.java:875)
      at com.example.android.basicsyncadapter.SyncUtils.CreateSyncAccount(SyncUtils.java:58)
      at com.example.android.basicsyncadapter.EntryListFragment.onAttach(EntryListFragment.java:148)
</code></pre>

<p>I have reproduced the failure using two GitHub projects running 8.0 on a Pixel:
fingerprint=google/marlin/marlin:8.0.0/OPR3.170623.013/4397526:user/release-keys</p>

<p>GitHub apps:</p>

<ol>
<li><a href=""https://github.com/googlesamples/android-testdpc"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-testdpc</a></li>
<li><a href=""https://github.com/googlesamples/android-BasicSyncAdapter"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-BasicSyncAdapter</a></li>
</ol>

<p>Here are the steps to reproduce throwing the above exception:</p>

<ol>
<li>Factory reset the device and wait for the out-of-box screen to appear.</li>
<li>Install the application android-testdpc. Complete setting up the device for Android for Work managed profile.</li>
<li>Do not change any policies and do not restart the device.</li>
<li>Install the application android-BasicSyncAdapter and launch it.</li>
<li>Logcat will capture</li>
</ol>

<blockquote>
  <p>I am_crash: [7489,0,com.example.android.basicsyncadapter,950582854,java.lang.SecurityException,com.google.android.gm from uid 10075 not allowed to perform GET_ACCOUNTS,Parcel.java,1942]</p>
</blockquote>

<p>Additional Notes:</p>

<ul>
<li>I am seeing the SecurityException being thrown on devices with Android 8.0 only.</li>
<li>Restarting the device before launching android-BasicSyncAdapter does not cause the SecurityException to be thrown. Currently proposed work around for users.</li>
</ul>

<p>I am trying to figure out how to successfully call addAccountExplicitly without having to first restart the device.</p>
",9023227,,,,,2018-02-15 20:04:55,addAccountExplicitly throws SecurityException because com.google.android.gm is not allowed to perform GET_ACCOUNTS,<android><android-syncadapter><android-securityexception>,1,2,,,
Android,47551921,1,,,2017,,1,556,"<p>I have created a library (check <a href=""https://github.com/VishalKumar2016/react-native-camera2-android"" rel=""nofollow noreferrer"">this</a> for more information) for Android for Android Camera2 functionality in Android all is working good, but in the aspect ratio issue with full screen camera.</p>

<p>Please Check below image how it looks in preview and the real picture (Only preview has the issue not the real picture after capturing)</p>

<p>Captured image horizontal:</p>

<p><img src=""https://i.stack.imgur.com/uS7qc.jpg"" alt=""enter image description here""></p>

<p>Preview image horizontal:</p>

<p><img src=""https://i.stack.imgur.com/4f7VV.jpg"" alt=""enter image description here""></p>

<p>Captured image vertical:</p>

<p><img src=""https://i.stack.imgur.com/nCm1A.jpg"" alt=""enter image description here""></p>

<p>Preview image vertical:</p>

<p><img src=""https://i.stack.imgur.com/6m6wk.jpg"" alt=""enter image description here""></p>

<p>Google sample of Camera2 API have similar issue and resolved <a href=""https://github.com/googlesamples/android-Camera2Basic/pull/83/commits/1d4c404393f177fc2b87fc24edc30af3840c2a59"" rel=""nofollow noreferrer"">here</a>.</p>

<p>But same code not working in my react native library code. May be I am using one code for image and video both and add additional code for video capture.</p>
",7321021,,8225828,,2017-11-29 17:23:55,2017-12-06 15:10:02,React Native android camera2 aspect ratio issue,<android><react-native><android-camera2>,1,1,,,
Android,47621046,1,,,2017,,1,151,"<p>I am writing an Android application that uses the camera.</p>

<p>I took the sample code <a href=""https://github.com/googlesamples/android-Camera2Basic/"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic/</a> provided by Google. However, I observed that calling the <code>close()</code> method of the <a href=""https://developer.android.com/reference/android/hardware/camera2/CameraDevice.html#close()"" rel=""nofollow noreferrer""><code>CameraDevice</code></a> takes too long (almost one second on my Samsung Galaxy S8).</p>

<p>This method is called from <code>onPause()</code>, thus the application hangs a little while when the camera fragment is closed.</p>

<pre><code>@Override
public void onPause() {
    closeCamera();
    stopBackgroundThread();
    super.onPause();
}

private void closeCamera() {
    try {
        mCameraOpenCloseLock.acquire();
        if (null != mCaptureSession) {
            mCaptureSession.close();
            mCaptureSession = null;
        }
        if (null != mCameraDevice) {
            mCameraDevice.close(); // This call takes 1 second!
            mCameraDevice = null;
        }
        if (null != mImageReader) {
            mImageReader.close();
            mImageReader = null;
        }
    } catch (InterruptedException e) {
        throw new RuntimeException(""Interrupted while trying to lock camera closing."", e);
    } finally {
        mCameraOpenCloseLock.release();
    }
}
</code></pre>

<p>How can I avoid the application to become unresponsive when the <code>closeCamera()</code> method is being called?</p>

<p>I tried to call it from another thread than the UI thread but the application crashes in some cases.</p>
",741920,,,,,2018-03-29 17:23:09,Closing the Android CameraDevice is slow and hangs the application,<android><android-camera2>,1,1,,,
Android,47002893,1,47003431,,2017,,1,56,"<p>Whenever I clone a Google sample repository from Github, the <strong>Android project sidebar is completely empty</strong> (No app folder and an empty Gradle folder). I usually encounter this problem when Android Studio asks me to provide the Gradle Home path when importing. I would highly appreaciate any help regarding solving this problem.</p>

<p><a href=""https://i.stack.imgur.com/Cfe8g.png"" rel=""nofollow noreferrer"">Android studio 3.0 project with an empty Android folder view</a></p>

<p>E.g. cloning <a href=""https://github.com/googlesamples/android-vision"" rel=""nofollow noreferrer"">Android vision API Samples</a></p>
",8852373,,,,,2017-10-29 17:57:51,Empty Android folder when cloning Google samples,<android><android-studio>,1,0,,,
Android,46831355,1,,,2017,,1,452,"<p>As it took me some time to find the solution for this error, I post my problem and solution here in the hope that I find it next time faster:</p>

<blockquote>
  <p>Error:(39, 0) Gradle DSL method not found: 'minSdkVersion()'</p>
</blockquote>

<p><strong>What I tried to do:</strong></p>

<ul>
<li><p>I followed the <a href=""https://github.com/googlesamples/android-testing-templates/tree/master/AndroidTestingBlueprint"" rel=""nofollow noreferrer"">Android Test Blueprint</a>'s sample to define the library versions in the top level / rootProject'S build.gradle file:</p>

<p>ext {
  minSdkVersion 16
}</p></li>
<li><p>And wanted to use it in the app's/module's build.gradle file:</p>

<p>minSdkVersion rootProject.ext.minSdkVersion</p></li>
</ul>
",5815054,,,,,2017-10-19 13:42:44,Gradle: DSL method not found: minSdkVersion / targetSdkVersion / compileSdkVersion / buildToolsVersion,<android><gradle><dsl><android-gradle-2.2>,1,0,,,
Android,38305431,1,,,2016,,1,1654,"<p>How can I get <strong>latitude &amp; longitude</strong> from <strong>Google Place API of android</strong>? My code looks like below..</p>

<pre><code>AutocompleteFilter mAutocompleteFilter = new AutocompleteFilter.Builder().setTypeFilter(AutocompleteFilter.TYPE_FILTER_CITIES).build();

PendingResult&lt;AutocompletePredictionBuffer&gt; results =
                    Places.GeoDataApi
                            .getAutocompletePredictions(mGoogleApiClient, constraint.toString(),
                                    mBounds, mAutocompleteFilter);
</code></pre>

<p>I also facing trouble getting results more than <strong>5 results</strong>. I'm using <a href=""https://github.com/googlesamples/android-play-places/tree/master/PlaceCompleteFragment"" rel=""nofollow"">this</a> link for the references. Any help would be grateful.</p>
",1934452,,,,,2018-04-19 10:01:19,Google Place API get latitude & longitude of places,<android><autocomplete><google-places-api>,1,2,,,
Android,29071154,1,,,2015,,1,300,"<p>I want to have Reveal Effect with in my app. I come to know about it for how it can be implemented. I got the information from the <a href=""http://developer.android.com/training/material/animations.html#Reveal"" rel=""nofollow"">Andoid Developer Blog</a>.</p>

<p>But when i have updated that with in my code, it is not showing any effect.</p>

<p>I have also try with <a href=""https://github.com/googlesamples/android-RevealEffectBasic"" rel=""nofollow"">Demo given by Google</a> to demostrate Reveal effect. But it also not showing the effect. If there any permission i need to add or whats wrong i am doing?</p>

<p>My animator is as below:</p>

<pre><code>View button = rootView.findViewById(R.id.button);
    final View shape = rootView.findViewById(R.id.circle);
    shape.setClipToOutline(false);
    shape.setVisibility(View.INVISIBLE);
    // Set a listener to reveal the view when clicked.
    button.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {

            if(isShowing==false){
                // previously invisible view

                // get the center for the clipping circle
                int cx = (shape.getLeft() + shape.getRight()) / 2;
                int cy = (shape.getTop() + shape.getBottom()) / 2;

                // get the final radius for the clipping circle
                int finalRadius = Math.max(shape.getWidth(), shape.getHeight());

                // create the animator for this view (the start radius is zero)
                Animator anim =
                        ViewAnimationUtils.createCircularReveal(shape, cx, cy, 0, finalRadius);

                // make the view visible and start the animation
                shape.setVisibility(View.VISIBLE);
                anim.setDuration(4000);
                anim.start();
            }else{

                // get the center for the clipping circle
                int cx = (shape.getLeft() + shape.getRight()) / 2;
                int cy = (shape.getTop() + shape.getBottom()) / 2;

                // get the initial radius for the clipping circle
                int initialRadius = shape.getWidth();

                // create the animation (the final radius is zero)
                Animator anim =
                        ViewAnimationUtils.createCircularReveal(shape, cx, cy, initialRadius, 0);

                // make the view invisible when the animation is done
                anim.addListener(new AnimatorListenerAdapter() {
                    @Override
                    public void onAnimationEnd(Animator animation) {
                        super.onAnimationEnd(animation);
                        shape.setVisibility(View.INVISIBLE);
                    }
                });

                anim.setDuration(4000);
                // start the animation
                anim.start();
            }

            isShowing = !isShowing;

    }
    });
</code></pre>

<p>Please let me know how to achieve this effect.</p>
",881635,,,,,2015-07-01 8:49:18,Why Reveal effect not working as per Developer blog,<android><android-layout><material-design><viewanimator><circularreveal>,1,9,,,
Android,30444150,1,31858505,,2015,,1,705,"<p>The sample code in google place picker uses cardstream lib. Is this a open source lib and if so where do i find the documentation/guide for using it ?</p>

<p>github URL: <a href=""https://github.com/googlesamples/android-play-places/tree/master/PlacePicker"" rel=""nofollow"">https://github.com/googlesamples/android-play-places/tree/master/PlacePicker</a></p>
",2080970,,,,,2015-08-06 14:31:27,Use of cardstream in google place picker sample code,<google-places-api>,1,0,,,
Android,38814600,1,,,2016,,1,286,"<p>I'm working with the <a href=""https://developer.android.com/training/location/geofencing.html"" rel=""nofollow"">Google's Creating and Monitoring Geofences</a>
and I have done everything exactly like it (In fact I just downloaded and ran the example code <a href=""https://github.com/googlesamples/android-Geofencing"" rel=""nofollow"">from here)</a></p>

<p>I've configured everything like said the in tutorial.</p>

<p>After I perform this:</p>

<pre><code>LocationServices.GeofencingApi.addGeofences(googleApiClient,
                    getGeofencingRequest(),
                    getGeofencingPendingIntent())
                    .setResultCallback(this);
</code></pre>

<p>My onResult():</p>

<pre><code>@Override
public void onResult(@NonNull Status status) {
    if (status.isSuccess()) {
        L.log(this.getClass(), ""Called... success"");

    } else {
        L.log(this.getClass(), ""Called... FAILURE: "" + status.getStatusMessage() + "" code: "" + status.getStatusCode());

    }
}
</code></pre>

<p>Prints to Log that it has been successful.</p>

<p>Yet - When I inject coordinates to the emulator, the IntentService never seem to be triggered.</p>

<p>There is no exception thrown or anything, not even the constructor of the IntentService is called.</p>

<p>I wonder if this has something to do with the emulator or maybe the rules which I inject the coordinates are wrong ?
Because I also downloaded Google's sample and couldn't get it to trigger either</p>
",4497575,,,,,2016-09-10 19:47:28,Geofencing API: adding successful but not triggered,<android><android-studio><android-geofence>,1,0,,,
Android,38832797,1,39107586,,2016,,1,1839,"<p>I'm making a jni Function in android to generate file checkSum using BoringSSL.</p>

<p>So I built boringssl to shared Library for use Prebuilt Library in Android studio.</p>

<p>The build output like this.
<a href=""https://i.stack.imgur.com/x8UZ8.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/x8UZ8.png"" alt=""enter image description here""></a></p>

<p>I copied the *.so file to my project src/main/jniLibs/lib 
and BoringSSL include folder to src/main/jni</p>

<p>I referenced this project and apply to my projects.</p>

<p><a href=""https://github.com/googlesamples/android-ndk/tree/master/hello-libs"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk/tree/master/hello-libs</a></p>

<p>My <strong>build.gradle</strong> file like this.
I'm using gradle-experimental:0.7.0( and Window10, Android Studio 2.1.2 )</p>

<pre><code>apply plugin: 'com.android.model.application'

model {
    repositories {
        libs(PrebuiltLibraries) {
            boringssl {
                headers.srcDir ""src/main/jni/include/openssl""

                binaries.withType(SharedLibraryBinary) {
                    sharedLibraryFile = file(""src/main/jniLibs/lib/libcrypto.so"")
                    sharedLibraryFile = file(""src/main/jniLibs/lib/libssl.so"")
                }
            }
        }
    }
    android {
        compileSdkVersion = 24
        buildToolsVersion = '24.0.1'

        defaultConfig {
            applicationId = 'yein.a'
            minSdkVersion.apiLevel = 19
            targetSdkVersion.apiLevel = 24
            versionCode = 1
            versionName = '1.0'
        }
        ndk {
            moduleName = 'hello-libs'
            ldLibs.addAll(['android', 'log'])
        }
        sources {
            main {
                jni {
                    dependencies {
                        library 'boringssl' linkage 'shared'
                    }
                }
                jniLibs{
                    source{
                        srcDir ""src/main/jniLibs/lib""
                    }
                }
            }
        }
        productFlavors{
            create(""arm""){
                ndk.abiFilters.add(""armeabi-v7a"")
            }
        }
        buildTypes {
            release {
                minifyEnabled false
                proguardFiles.add(file('proguard-android.txt'))
            }
        }
    }
}

dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    compile 'com.android.support:appcompat-v7:24.1.1'
}
</code></pre>

<p>This is my project structure.</p>

<p><a href=""https://i.stack.imgur.com/jJvLo.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/jJvLo.png"" alt=""enter image description here""></a></p>

<p>I think I properly apply the example projects, because it is not occurred gradle sync error. </p>

<p>And when I use MD5 function Android Studio auto complete function name like this.
<a href=""https://i.stack.imgur.com/RZfUb.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/RZfUb.png"" alt=""enter image description here""></a></p>

<p>But I click run it occurred error like this...
<a href=""https://i.stack.imgur.com/lAmH7.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/lAmH7.png"" alt=""enter image description here""></a></p>

<p>I searched a lot project in google,github, and of course stackoverflow previous answers but I still not solve my problem.</p>

<p>I tried change gradle version but other gradle version occurred error in auto generated jni function except gradle-experimental:0.7.0.</p>

<p>Could anyone point me in the right direction or even a solution?</p>

<p>Thanks for read my Question.</p>
",6059256,,,,,2016-08-24 14:28:50,Using Prebuilt library in Android Studio,<android><gradle><android-ndk><java-native-interface><boringssl>,1,7,,,
Android,38809845,1,,,2016,,1,1010,"<p>I am a beginner in android, and tried a demo code Bluetoothchat in <a href=""https://developer.android.com/samples/BluetoothChat/index.html"" rel=""nofollow"">https://developer.android.com/samples/BluetoothChat/index.html</a>. It doesn't work well on my phone(Nexus 5, android 6.0.1). the full package is on github. <a href=""https://github.com/googlesamples/android-BluetoothChat"" rel=""nofollow"">https://github.com/googlesamples/android-BluetoothChat</a>. I didn't change anything in the demo. Android studio 2.1.2</p>

<p>It failed to discover other Bluetooth devices(an ipad and a blackberry). The visibility of the devices were on. If I use the default Bluetooth's discovery function on the nexus 5, the two devices were showed on the list.</p>

<p>I have also tried some other demos about Bluetooth discovery app. They did not work on my phone either. I know the basic idea about how to find a device, but couldn't find why it didn't work.</p>

<p>The relative code in Bluetoothchat is here:</p>

<p>basic setup</p>

<pre><code>    mNewDevicesArrayAdapter = new ArrayAdapter&lt;String&gt;(this, R.layout.device_name);
    // Find and set up the ListView for newly discovered devices
    ListView newDevicesListView = (ListView) findViewById(R.id.new_devices);
    newDevicesListView.setAdapter(mNewDevicesArrayAdapter);
    newDevicesListView.setOnItemClickListener(mDeviceClickListener);

    // Register for broadcasts when a device is discovered
    IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
    this.registerReceiver(mReceiver, filter);

    // Register for broadcasts when discovery has finished
    filter = new IntentFilter(BluetoothAdapter.ACTION_DISCOVERY_FINISHED);
    this.registerReceiver(mReceiver, filter);

    // Get the local Bluetooth adapter
    mBtAdapter = BluetoothAdapter.getDefaultAdapter();
</code></pre>

<p>click the scanButton to scan devices</p>

<pre><code>    // Initialize the button to perform device discovery
    Button scanButton = (Button) findViewById(R.id.button_scan);
    scanButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            doDiscovery();
            v.setVisibility(View.GONE);
        }
    });

    // Initialize array adapters. 
    // one for newly discovered devices
</code></pre>

<p>discovery part</p>

<pre><code>/**
 * Start device discover with the BluetoothAdapter
 */
private void doDiscovery() {
    Log.d(TAG, ""doDiscovery()"");

    // Indicate scanning in the title
    setProgressBarIndeterminateVisibility(true);
    setTitle(R.string.scanning);

    // Turn on sub-title for new devices
    findViewById(R.id.title_new_devices).setVisibility(View.VISIBLE);

    // If we're already discovering, stop it
    if (mBtAdapter.isDiscovering()) {
        mBtAdapter.cancelDiscovery();
    }

    // Request discover from BluetoothAdapter
    mBtAdapter.startDiscovery();
}
</code></pre>

<p>Broadcast receiver</p>

<pre><code>/**
 * The BroadcastReceiver that listens for discovered devices and changes the title when
 * discovery is finished
 */
private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();

        // When discovery finds a device
        if (BluetoothDevice.ACTION_FOUND.equals(action)) {
            // Get the BluetoothDevice object from the Intent
            BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
            // If it's already paired, skip it, because it's been listed already
            if (device.getBondState() != BluetoothDevice.BOND_BONDED) {
                mNewDevicesArrayAdapter.add(device.getName() + ""\n"" + device.getAddress());
            }
            // When discovery is finished, change the Activity title
        } else if (BluetoothAdapter.ACTION_DISCOVERY_FINISHED.equals(action)) {
            setProgressBarIndeterminateVisibility(false);
            setTitle(R.string.select_device);
            if (mNewDevicesArrayAdapter.getCount() == 0) {
                String noDevices = getResources().getText(R.string.none_found).toString();
                mNewDevicesArrayAdapter.add(noDevices);
            }
        }
    }
};
</code></pre>

<p>destroy part</p>

<pre><code>@Override
protected void onDestroy() {
    super.onDestroy();

    // Make sure we're not doing discovery anymore
    if (mBtAdapter != null) {
        mBtAdapter.cancelDiscovery();
    }

    // Unregister broadcast listeners
    this.unregisterReceiver(mReceiver);
}
</code></pre>

<p>Could someone help me? Thanks in advance!</p>
",6686875,,6686875,,2016-08-07 13:50:44,2019-02-20 17:32:23,Android Bluetooth app can't discover other devices,<android><bluetooth>,1,2,,,
Android,48172376,1,48173636,,2018,,1,48,"<p>I'm writing a <code>PrinterService</code> to control a proprietary printer and I try to use <code>PDFRenderer</code> to convert the PDF file sent by the <code>PrinterManager</code> to a bitmap to be sent to the printer.</p>

<p>I started from this <a href=""https://github.com/googlesamples/android-PdfRendererBasic"" rel=""nofollow noreferrer"">example</a> to use PDFRenderer.</p>

<p>I'm sure about the PDF file I receive but <code>mCurrentPage.render(bitmap, null, null, PdfRenderer.Page.RENDER_MODE_FOR_PRINT);</code> desesperately fill up an empty bitmap.</p>

<p>So I was wondering if <code>PDFRenderer</code> could need some context not available in a service.</p>
",3004821,,,,,2018-01-09 20:24:01,Can we use PDFRenderer in a service?,<android><pdf>,1,3,,,
Android,37462464,1,42082187,,2016,,1,235,"<p>Fingerprint API preview for Android N is found <a href=""https://developer.android.com/preview/api-overview.html"" rel=""nofollow"">here</a> with Sample App <a href=""https://github.com/googlesamples/android-FingerprintDialog/"" rel=""nofollow"">Sample App</a> .As of this writing, createKey() in this method specify key_name,i don't know about key_name,Please anyone tell about key_name</p>

<pre><code>    /** Alias for our key in the Android Key Store */
    private static final String KEY_NAME = ""my_key"";


     public void createKey() {
    // The enrolling flow for fingerprint. This is where you ask the user to set up fingerprint
    // for your flow. Use of keys is necessary if you need to know if the set of
    // enrolled fingerprints has changed.

     try {
        mKeyStore.load(null);
        // Set the alias of the entry in Android KeyStore where the key will appear
        // and the constrains (purposes) in the constructor of the Builder

        mKeyGenerator.init(new KeyGenParameterSpec.Builder(KEY_NAME,
                KeyProperties.PURPOSE_ENCRYPT |
                        KeyProperties.PURPOSE_DECRYPT)
                .setBlockModes(KeyProperties.BLOCK_MODE_CBC)
                        // Require the user to authenticate with a fingerprint to authorize every use
                        // of the key
                .setUserAuthenticationRequired(true)
                .setEncryptionPaddings(KeyProperties.ENCRYPTION_PADDING_PKCS7)
                .build());
        mKeyGenerator.generateKey();
    } catch (NoSuchAlgorithmException | InvalidAlgorithmParameterException
            | CertificateException | IOException e) {
        throw new RuntimeException(e);
    }
}
</code></pre>

<p>this my part of code,here  what is KEY_NAME and key_name get from where</p>
",6285198,,,,,2017-02-07 5:11:12,how to get Key_name for fingerprint scanner?,<android>,1,0,,,
Android,30582324,1,30582361,,2015,,1,665,"<p>I got build error like this after i download and imported the example
<a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""nofollow"">https://github.com/googlesamples/android-UniversalMusicPlayer</a></p>

<pre><code>Error:A problem occurred configuring project ':mobile'.
Could not resolve all dependencies for configuration ':mobile:_debugCompile'.
Could not find com.google.android.support:wearable:1.2.0.
     Searched in the following locations:

https ://jcenter.bintray.com/com/google/android/support/wearable/1.2.0/wearable-1.2.0.pom  
https ://jcenter.bintray.com/com/google/android/support/wearable/1.2.0/wearable-1.2.0.jar
         file:/Users/Jieyi/Downloads/android-UniversalMusicPlayer-master/mobile/libs/wearable-1.2.0.jar
         file:/Users/Jieyi/Downloads/android-UniversalMusicPlayer-master/mobile/libs/wearable.jar
         file:/Users/Jieyi/Library/Android/sdk/extras/android/m2repository/com/google/android/support/wearable/1.2.0/wearable-1.2.0.pom
         file:/Users/Jieyi/Library/Android/sdk/extras/android/m2repository/com/google/android/support/wearable/1.2.0/wearable-1.2.0.jar
         file:/Users/Jieyi/Library/Android/sdk/extras/google/m2repository/com/google/android/support/wearable/1.2.0/wearable-1.2.0.pom
         file:/Users/Jieyi/Library/Android/sdk/extras/google/m2repository/com/google/android/support/wearable/1.2.0/wearable-1.2.0.jar
     Required by:
         android-UniversalMusicPlayer-master:mobile:unspecified
</code></pre>
",3512832,,1064310,,2015-06-01 20:54:26,2015-06-01 20:54:26,Google example universal music player build error,<java><android><android-studio><wear-os>,1,0,,,
Android,46774604,1,,,2017,,1,108,"<p>In android many image loading libraries (like <a href=""http://square.github.io/picasso/2.x/picasso/"" rel=""nofollow noreferrer"">Picasso</a> -- which uses 2% of the storage for disk cache, Glide) use disk cache in addition to in memory lru cache. I can understand why this might be useful for images downloaded from the network -- if the in memory cache is full, read it from disk rather than fetching them remotely -- thus avoiding network latency etc. However, if we are just reading local images on the android device itself -- do we gain anything by using a separate disk cache with the serialized bitmap data -- since the data will have to be read from the disk anyways ? Probably makes sense if your app needs a thumbnail and subsample the original image once and store it in cache ? Are there any studies showing perf gains. I have seen use of disk cache in <a href=""https://github.com/googlesamples/android-DisplayingBitmaps"" rel=""nofollow noreferrer"">googles samples</a> and other <a href=""https://github.com/chrisbanes/Android-BitmapCache"" rel=""nofollow noreferrer"">bitmap cache</a> libraries.</p>
",1034442,,,,,2017-10-16 17:47:23,DiskLRUCache for Bitmaps (and others) in Android,<android><bitmap><android-lru-cache><imageresizer-diskcache><diskcache>,1,1,,,
Android,49213525,1,49214549,,2018,,1,238,"<p>I have activity with bottom bar, that switches two fragments <code>galleryFrament</code> and <code>profilefragment</code>, that are injected into <code>MainActivity</code>: </p>

<pre><code>class MainActivity : DaggerAppCompatActivity(), MainContract.View {

@Inject
lateinit var galleryFragment: GalleryFragment

@Inject
lateinit var profileFragment: ProfileFragment
</code></pre>

<p>I switch between them in this way:</p>

<pre><code>val transaction = fragmentManager.beginTransaction()
transaction.replace(frameId, fragment)
transaction.commit()
</code></pre>

<p>Module that provides <code>MainActivity</code>, with Scope <code>@ActivityScoped</code>:</p>

<pre><code>  @Module
  abstract class ActivityBindingModule {

    @ActivityScoped
    @ContributesAndroidInjector(modules = arrayOf(MainModule::class, GalleryModule::class, ProfileModule::class))
    internal abstract fun mainActivity(): MainActivity
</code></pre>

<p>Module that provides <code>GalleryFragment</code>:</p>

<pre><code>  @Module
internal abstract class GalleryModule {

    @FragmentScoped
    @ContributesAndroidInjector
    abstract fun galleryFragment(): GalleryFragment

    @ActivityScoped
    @Binds
    abstract fun galleryPresenter(galleryPresenter: GalleryPresenter): GalleryContract.Presenter


    @Module
    companion object {
        @ActivityScoped
        @Provides
        @JvmStatic
        fun galleryAdapter(context: Context): GalleryAdapter {
            return GalleryAdapter(context);
        }
    }
}
</code></pre>

<p>And, finaly <code>AppComponent</code>:</p>

<pre><code>@Singleton
@Component(modules = arrayOf(ImagesRepositoryModule::class,
        ApplicationModule::class,
        ActivityBindingModule::class,
        AndroidSupportInjectionModule::class,
        EventsModule::class))
interface AppComponent : AndroidInjector&lt;MyApplication&gt; {
</code></pre>

<p><code>GalleryFragment</code> is provided with <code>@FragmentScoped</code> annotation from <code>GaleryModule</code>. I took aproach with annotatins <code>@FragmentScoped</code> and <code>@ActivityScoped</code> from google blueprints samples posted here: <a href=""https://github.com/googlesamples/android-architecture][google-archutecture"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture][google-archutecture</a></p>

<p><strong>The probem is:</strong> When I switch fragments, the new instance of <code>GalleryFrament</code> is created (<code>onCreate()</code> called every time), but I want to use previously created instance of it. 
As I understand dagger scopes, <code>GalleryFragment</code> should be <code>@ActivityScoped</code>(to keep it alive as long as activity lives), but if I set it, <code>@ContributesAndroidInjector</code> produces Subcomponent with the same scope as its parent, and that is illegal. </p>
",1433537,,,,,2018-03-10 22:30:23,Android Dagger 2 keep fragment alive as long as activity,<android><dagger-2><dagger-android>,1,0,,,
Android,49212540,1,49213923,,2018,,1,222,"<p>I have been struggling to correctly render any geometry using OpenGLES 1.0, 2.0, or 3.0 techniques. My testing device is a Samsung Galaxy S7 Edge (running Android 7.0). I have implemented numerous guides for both OpenGLES and EGL such as:</p>

<p><a href=""https://www.khronos.org/registry/EGL/sdk/docs/man/html/"" rel=""nofollow noreferrer"">https://www.khronos.org/registry/EGL/sdk/docs/man/html/</a></p>

<p><a href=""https://www.khronos.org/assets/uploads/books/openglr_es_20_programming_guide_sample.pdf"" rel=""nofollow noreferrer"">https://www.khronos.org/assets/uploads/books/openglr_es_20_programming_guide_sample.pdf</a></p>

<p><a href=""http://www.ikerhurtado.com/egl-use-android-native-opengles-applications"" rel=""nofollow noreferrer"">http://www.ikerhurtado.com/egl-use-android-native-opengles-applications</a></p>

<p>The code was initially adapted from the ""native-activity"" example:</p>

<p><a href=""https://github.com/googlesamples/android-ndk/tree/master/native-activity"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk/tree/master/native-activity</a></p>

<hr>

<p>Android Manifest: (mostly from native-activity example)</p>

<pre><code>...
&lt;!-- Tell the system this app requires OpenGL ES 3.0. --&gt;
&lt;uses-feature android:glEsVersion=""0x00030000"" android:required=""true"" /&gt;
...
</code></pre>

<p>CMAKE: (mostly from native-activity example)</p>

<pre><code>...

add_library(
    native-activity
    SHARED
    main.cpp)

target_include_directories(
    native-activity
    PRIVATE
    ${ANDROID_NDK}/sources/android/native_app_glue)

# add lib dependencies
target_link_libraries(
    native-activity
    android
    native_app_glue
    EGL
    GLESv3
    log)

...
</code></pre>

<p>main.cpp: (mostly from native-activity example, cropped for relevance)</p>

<pre><code>...

#include &lt;EGL/egl.h&gt;
#include &lt;EGL/eglext.h&gt;
#include &lt;GLES3/gl3.h&gt;
#include &lt;GLES3/gl3ext.h&gt;
#include &lt;android_native_app_glue.h&gt;

...

/*
 *Test GLES 1.0, should draw a white triangle on red background
 */
class TestGLES10 {
public:
    GLuint program;

    void create() {

        char vssource[] =
                ""attribute vec4 vertexPosition; \n""
                ""void main(){                       \n""
                ""   gl_Position = vertexPosition;   \n""
                ""}                                  \n"";

        char fssource[] =
                ""precision mediump float; \n""
                ""void main(){ \n""
                ""   gl_FragColor = vec4(1.0); ""
                ""}                                  \n"";

        auto compile = [](const char *source, GLenum type){
            GLuint shader = glCreateShader(type);
            glShaderSource(shader, 1, &amp;source, nullptr);
            glCompileShader(shader);
            return shader;
        };

        GLuint vs = compile(string(vssource).c_str(), GL_VERTEX_SHADER);
        GLuint fs = compile(string(fssource).c_str(), GL_FRAGMENT_SHADER);

        program = glCreateProgram();
        glAttachShader(program, vs);
        glAttachShader(program, fs);

        glBindAttribLocation(program, 0, ""vertexPosition"");

        glLinkProgram(program);

        glDisable(GL_DEPTH_TEST);
    }

    void update() {

        glClearColor(1,0,0,1);
        glClear(GL_COLOR_BUFFER_BIT);

        glUseProgram(program);

        float positions[]{
                0.0f,  0.1f,
                -0.1f, -0.1f,
                0.1f, -0.1f
        };

        glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, positions);
        glEnableVertexAttribArray(0);

        glDrawArrays(GL_TRIANGLES, 0, 3);
    }
};

/*
 *Test GLES 3.0, should draw a white triangle on blue background
 */
class TestGLES30 {
public:
    GLuint vbo, vao, program;

    void create() {

        char vssource[] =
            ""#version 300 es\n""
            ""layout(location=0) in vec4 vertexPosition; \n""
            ""void main(){                       \n""
            ""   gl_Position = vertexPosition;   \n""
            ""}                                  \n"";

        char fssource[] =
            ""#version 300 es\n""
            ""precision mediump float; \n""
            ""out vec4 fragment; \n""
            ""void main(){ \n""
            ""   fragment = vec4(1.0); ""
            ""}                                  \n"";

        auto compile = [](const char *source, GLenum type){
            GLuint shader = glCreateShader(type);
            glShaderSource(shader, 1, &amp;source, nullptr);
            glCompileShader(shader);
            return shader;
        };

        GLuint vs = compile(string(vssource).c_str(), GL_VERTEX_SHADER);
        GLuint fs = compile(string(fssource).c_str(), GL_FRAGMENT_SHADER);

        program = glCreateProgram();
        glAttachShader(program, vs);
        glAttachShader(program, fs);
        glLinkProgram(program);

        float positions[]{
             0.0f,  0.5f,
            -0.5f, -0.5f,
             0.5f, -0.5f
        };

        glGenBuffers(1, &amp;vbo);
        glBindBuffer(GL_ARRAY_BUFFER, vbo);
        glBufferData(GL_ARRAY_BUFFER, 2*4, positions, GL_STATIC_DRAW);

        glGenVertexArrays(1, &amp;vao);
        glBindVertexArray(vao);

        glEnableVertexAttribArray(0);
        glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 2*4, 0);

        glBindBuffer(GL_ARRAY_BUFFER, 0);
        glBindVertexArray(0);
    }

    void update() {

        glClearColor(0,0,1,1);
        glClear(GL_COLOR_BUFFER_BIT);

        glUseProgram(program);

        glBindVertexArray(vao);
        glDrawArrays(GL_TRIANGLES, 0, 3);
        glBindVertexArray(0);
    }
};

...

void android_main(android_app* appInterface) {

    appInterface-&gt;onAppCmd = commandRelay;
    appInterface-&gt;onInputEvent = inputRelay;

    while(appInterface-&gt;window == nullptr){
        pollEvents(appInterface);
    }

    EGLDisplay display;
    EGLSurface surface;
    EGLContext context;
    EGLint majorVersion, minorVersion;
    EGLConfig config;
    EGLint width, height;
    EGLint nativeVisualID;
    EGLint configCount;

    display = eglGetDisplay(EGL_DEFAULT_DISPLAY);
    assert(display != EGL_NO_DISPLAY);

    eglInitialize(display, &amp;majorVersion, &amp;minorVersion);

    //https://www.khronos.org/registry/EGL/sdk/docs/man/html/eglChooseConfig.xhtml
    const EGLint displayAttrib[] = {
        EGL_RENDERABLE_TYPE, EGL_OPENGL_ES2_BIT,//egl 1.3 req
        EGL_NATIVE_RENDERABLE, EGL_TRUE,
        EGL_SURFACE_TYPE, EGL_WINDOW_BIT,
        EGL_BLUE_SIZE, 8,
        EGL_GREEN_SIZE, 8,
        EGL_RED_SIZE, 8,
        EGL_NONE
    };

    //retreive configs
    eglChooseConfig(display, displayAttrib, 0, 0, &amp;configCount);
    std::unique_ptr&lt;EGLConfig[]&gt; supported(new EGLConfig[configCount]);
    eglChooseConfig(display, displayAttrib, supported.get(), configCount, &amp;configCount);

    EGLint i = 0, v;
    for (; i &lt; configCount; i++) {

        auto get = [&amp;](EGLint attrib){
            eglGetConfigAttrib(display, supported[i], attrib, &amp;v);
            return v;
        };
        if (Math2::equal(8,
            get(EGL_RED_SIZE),
            get(EGL_GREEN_SIZE),
            get(EGL_BLUE_SIZE),
            get(EGL_DEPTH_SIZE))) {//expands to 8 == get(EGL_RED_SIZE) == ...

            config = supported[i];
            break;
        }
    }
    if (i == configCount) {//default to first
        config = supported[0];
    }

    const EGLint surfaceAttrib[] = {
        EGL_RENDER_BUFFER, EGL_BACK_BUFFER,// render to the back buffer, egl 1.2 req
        EGL_NONE
    };

    eglGetConfigAttrib(display, config, EGL_NATIVE_VISUAL_ID, &amp;nativeVisualID);
    surface = eglCreateWindowSurface(display, config, appInterface-&gt;window, surfaceAttrib);

    const EGLint contextAttrib[] = {
        EGL_CONTEXT_CLIENT_VERSION, 2,// request a context using Open GL ES 2.0
        EGL_NONE
    };

    context = eglCreateContext(display, config, EGL_NO_CONTEXT, contextAttrib);
    assert(context != EGL_NO_CONTEXT);

    //sets initial viewport and scissor dimensions to draw surface size
    eglMakeCurrent(display, surface, surface, context);

    eglQuerySurface(display, surface, EGL_WIDTH, &amp;width);
    eglQuerySurface(display, surface, EGL_HEIGHT, &amp;height);

    //this call was mentioned, but missing from the example (removing has same effect)
    ANativeWindow_setBuffersGeometry(appInterface-&gt;window, width, height, nativeVisualID);


    TestGLES10 test;
    test.create();

    while (true){
        test.update();
        eglSwapBuffers(display, surface);
    }
}
</code></pre>

<hr>

<p>Results:</p>

<p>Logged Info:</p>

<pre><code>Vendor : Qualcomm
Renderer : Adreno (TM) 530
Version : OpenGL ES 3.2 V@145.0 (GIT@I86b60582e4)
EGL version : 1.4
Window dimensions : 1080, 1920
</code></pre>

<p>Additionally, the device has resolution scaling set to 1080x1920.</p>

<p>Test 1.0: <a href=""https://i.imgur.com/dmofGYw.png"" rel=""nofollow noreferrer"">https://i.imgur.com/dmofGYw.png</a>
Test 3.0: <a href=""https://i.imgur.com/uoghOZc.png"" rel=""nofollow noreferrer"">https://i.imgur.com/uoghOZc.png</a></p>

<p>According to:
<a href=""https://www.khronos.org/registry/EGL/sdk/docs/man/html/eglMakeCurrent.xhtml"" rel=""nofollow noreferrer"">https://www.khronos.org/registry/EGL/sdk/docs/man/html/eglMakeCurrent.xhtml</a>
the glViewPort should have been initialized to the surface size (1080x1920), so I am at a loss for how the white rectangle could occur.</p>

<p>The shader code for both tests compile without errors from Adreno.</p>

<hr>

<p><strong>Why wont it render geometry correctly?</strong></p>

<p>According to :
<a href=""https://www.khronos.org/registry/EGL/sdk/docs/man/html/eglCreateContext.xhtml"" rel=""nofollow noreferrer"">https://www.khronos.org/registry/EGL/sdk/docs/man/html/eglCreateContext.xhtml</a>
there is no way to specifically request a 3.0 or higher context, <strong>why does the created context have version 3.2 when I can only request 2.0?</strong></p>
",3537499,,3537499,,2018-03-10 19:39:45,2018-03-10 20:52:24,Android NDK OpenGLES not rendering triangles,<c++><opengl-es><android-ndk>,1,0,,,
Android,31987928,1,32661407,,2015,,1,262,"<p>I am converting the starter Android sample Camera2Video example: <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Video</a></p>

<p>When running the example by itself the rotation works well, and the controls are always visible. However when I embed the same code inside a Cordova plugin, the controls dissapear when rotated.</p>

<p>Here is the layout xml:</p>

<pre><code>&lt;RelativeLayout xmlns:android=""http://schemas.android.com/apk/res/android""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""&gt;

    &lt;com.example.android.camera2video.AutoFitTextureView
        android:id=""@+id/texture""
        android:layout_width=""wrap_content""
        android:layout_height=""wrap_content""
        android:layout_alignParentStart=""true""
        android:layout_alignParentTop=""true"" /&gt;

    &lt;FrameLayout
        android:layout_width=""match_parent""
        android:layout_height=""wrap_content""
        android:layout_alignParentBottom=""true""
        android:layout_alignParentStart=""true""
        android:layout_below=""@id/texture""
        android:background=""#4285f4""&gt;

        &lt;ImageButton
            android:id=""@+id/video""
            style=""@android:style/Widget.Material.Light.Button.Borderless""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_gravity=""center""
            android:contentDescription=""Record""
            android:padding=""20dp""
            android:src=""@drawable/record"" /&gt;

        &lt;ImageButton
            android:id=""@+id/info""
            android:contentDescription=""Info""
            style=""@android:style/Widget.Material.Light.Button.Borderless""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_gravity=""center_vertical|right""
            android:padding=""20dp""
            android:src=""@drawable/gallery"" /&gt;

    &lt;/FrameLayout&gt;

&lt;/RelativeLayout&gt;
</code></pre>

<p>And here is the layout-land xml file</p>

<pre><code>&lt;RelativeLayout xmlns:android=""http://schemas.android.com/apk/res/android""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""&gt;

    &lt;com.example.android.camera2video.AutoFitTextureView
        android:id=""@+id/texture""
        android:layout_width=""wrap_content""
        android:layout_height=""wrap_content""
        android:layout_alignParentBottom=""true""
        android:layout_alignParentStart=""true""
        android:layout_alignParentTop=""true"" /&gt;

    &lt;FrameLayout
        android:layout_width=""match_parent""
        android:layout_height=""wrap_content""
        android:layout_alignParentBottom=""true""
        android:layout_alignParentEnd=""true""
        android:layout_alignParentTop=""true""
        android:layout_below=""@id/texture""
        android:layout_toRightOf=""@id/texture""
        android:background=""#4285f4""
        android:orientation=""horizontal""&gt;

        &lt;ImageButton
            android:id=""@+id/video""
            style=""@android:style/Widget.Material.Light.Button.Borderless""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_gravity=""center""
            android:contentDescription=""Record""
            android:padding=""20dp""
            android:src=""@drawable/record"" /&gt;

        &lt;ImageButton
            android:id=""@+id/info""
            style=""@android:style/Widget.Material.Light.Button.Borderless""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_gravity=""center_horizontal|bottom""
            android:contentDescription=""Info""
            android:padding=""20dp""
            android:src=""@drawable/gallery"" /&gt;

    &lt;/FrameLayout&gt;

&lt;/RelativeLayout&gt;
</code></pre>

<p>Also there is code to detect the rotation.</p>

<p>I'm sure it's a simple fix, I just can't figure it out!</p>

<p>My full plugin code: <a href=""https://github.com/kmturley/cordova-plugin-media-custom"" rel=""nofollow"">https://github.com/kmturley/cordova-plugin-media-custom</a></p>
",2068766,,,,,2015-09-18 21:36:25,Android layout xml rotation orientation,<java><android><xml><cordova><layout>,1,0,,,
Android,32105132,1,,,2015,,1,1246,"<p>I'm testing the Barcode API from <a href=""https://github.com/googlesamples/android-vision"" rel=""nofollow"">android-vision</a> repo (multi-tracker app) . But I can only scan the QR Codes, I would like to scan also 1D barcodes like EAN 13. How can i do this work well ??</p>

<p>Ps.: Also, I have tried to filter only scan EAN 13, but also does not works well.</p>

<p>Thanks,
   Marcelo Alves</p>
",2578504,,,,,2015-12-22 16:39:09,Android Google Play Service Barcode scanner does not works on 1D (EAN13) barcodes,<android><google-play-services><google-vision>,1,1,,,
Android,28257607,1,,,2015,,1,645,"<p>I am using a fragment pager adapter for two tabs, based almost identically on the code from the <a href=""https://github.com/googlesamples/android-SlidingTabsBasic"" rel=""nofollow"">Sliding Tabs Basic sdk sample</a>. All was working fine until I tried to swap out the action bar for the tool bar. I had to switch up my theme to light, and now I've noticed that the tabs were using a transparent default colour. I want my tabs to be the same colour as the tool bar, but in setting the colour, they are obscuring the sliding tab strip indicator completely. What is the correct way to push the SlidingTabStrip to the front?</p>

<ul>
<li>I've tried setting the background resource of the tab programmatically rather than via the <code>selectableItemBackground</code> theme property. The background still obscures the indicators.</li>
<li>I've tried to <code>bringToFront()</code> or <code>bringChildToFront()</code> the SlidingTabStrip in multiple places, (it is created in the constructor of the SlidingTabLayout). I've tried it after the for loop in <code>SlidingTabLayout.populateTabStrip()</code> which seems sensible as this is where the tab views are created.</li>
</ul>

<p>I wonder why no-one else has had this issue ?!</p>
",1866373,,,,,2015-01-31 23:27:56,SlidingTabStrip indicator underneath SlidingTabLayout,<android><android-tabs><android-sliding>,1,0,,,
Android,51884303,1,51886545,,2018,,1,123,"<p>I am looking at a <code>Kotlin</code> sample app by Google called <a href=""https://github.com/googlesamples/android-sunflower"" rel=""nofollow noreferrer"">Sunflower</a> that I am using to understand how <code>Kotlin</code> / <code>Android Jetpack</code> works.</p>

<p>In <code>PlantAdapter</code> is the following code:</p>

<pre><code>/**
 * Adapter for the [RecyclerView] in [PlantListFragment].
 */
class PlantAdapter : ListAdapter&lt;Plant, PlantAdapter.ViewHolder&gt;(PlantDiffCallback()) {

    override fun onBindViewHolder(holder: ViewHolder, position: Int) {
        val plant = getItem(position)
        holder.apply {
            bind(createOnClickListener(plant.plantId), plant)
            itemView.tag = plant
        }
    }

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {
        return ViewHolder(ListItemPlantBinding.inflate(
                LayoutInflater.from(parent.context), parent, false))
    }

    private fun createOnClickListener(plantId: String): View.OnClickListener {
        return View.OnClickListener {
            val direction = PlantListFragmentDirections.ActionPlantListFragmentToPlantDetailFragment(plantId)
            it.findNavController().navigate(direction)
        }
    }

    class ViewHolder(
        private val binding: ListItemPlantBinding
    ) : RecyclerView.ViewHolder(binding.root) {

        fun bind(listener: View.OnClickListener, item: Plant) {
            binding.apply {
                clickListener = listener
                plant = item
                executePendingBindings()
            }
        }
    }
}
</code></pre>

<p>What I am confused about is where it gets <code>PlantListFragmentDirections</code> and <code>ListItemPlantBinding</code>? When I jump to the definition of these classes, they are in the <code>build</code> folder where it is autogenerated. When I look at the imports </p>

<ul>
<li><code>import
com.google.samples.apps.sunflower.PlantListFragmentDirections</code></li>
<li><code>import
com.google.samples.apps.sunflower.databinding.ListItemPlantBinding</code></li>
</ul>

<p>They are not in the project structure. How does this work?</p>
",1270257,,1270257,,2018-08-16 19:48:32,2018-08-16 23:37:45,Adapter referencing generated classes (android-sunflower),<android><kotlin><android-jetpack>,1,0,,,
Android,51892029,1,,,2018,,1,122,"<p>I am using video camera2 API for video recording in app. I am following <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a> this demo. </p>

<p>After recording a video is preview is inverted 180 degrees. How can manage this in both cases front and back camera?  </p>
",5209766,,5209766,,2018-08-21 6:27:01,2018-08-21 7:09:40,Video inverts 180 after recording in front camera 2 api,<android><android-camera2>,1,1,,,
Android,33617074,1,33621066,,2015,,1,1196,"<p>Does anyone know the syntax for defining flavor dimensions and variant filters using the experimental Gradle plugin? (This would include the syntax for assigning a flavor to a particular dimension inside each flavor's <code>create()</code> block.)</p>

<p>The <a href=""http://tools.android.com/tech-docs/new-build-system/gradle-experimental"" rel=""nofollow"">experimental plugin user guide</a> doesn't address any of this and I couldn't find any examples in the <a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow"">code samples</a>. I'm using plugin version 0.2.1 (<code>com.android.tools.build:gradle-experimental:0.2.1</code>). The syntax for the regular plugin clearly doesn't work at all.</p>

<p>Here's the original script, which defines product flavors for Google Play and for Amazon AppStore:</p>

<pre><code>apply plugin: 'com.android.model.application'

model {
    android {
        compileSdkVersion = 23
        buildToolsVersion = '23.0.1'

        defaultConfig.with {
            ... // normal stuff
        }
    }
    android.aaptOptions {
        noCompress = 'dict'
    }
    android.ndk {
        ... // normal stuff
    }
    android.compileOptions {
        sourceCompatibility = JavaVersion.VERSION_1_7
        targetCompatibility = JavaVersion.VERSION_1_7
    }
    android.buildTypes {
        release {
            minifyEnabled = true
            proguardFiles += file('proguard-rules.pro')
        }
    }
    android.productFlavors {
        create(""google"") {
        }
        create(""amazon"") {
        }
    }
}

dependencies {
    compile fileTree(include: ['*.jar'], dir: 'libs')
    compile 'com.android.support:support-v4:23.1.0'
    compile 'com.android.support:support-annotations:23.1.0'
}
</code></pre>

<p>Since this app uses native code, I want to add a dimension for different hardware platforms. Also, since the Amazon AppStore and Google Play have different models for supporting different hardware, I want to use variant filters to treat hardware platforms differently for the different markets.</p>

<p>I've <strike>stumbled about blindly in the dark</strike> tried a number of things to define flavor dimensions; <strong>these all generate errors</strong> when compiling the Gradle script.</p>

<p>I haven't tried creating variant filters yet, since I'm stuck at step 1, but absent guidance from someone ""in the know"", I expect equal (lack of) success.</p>

<p><strong>Attempt 1:</strong></p>

<pre><code>apply plugin: 'com.android.model.application'

model {
    android {
        ...

        defaultConfig.with {
            ...
            flavorDimensions = [""abi"", ""market""]
        }
    }
    ...
}
...
</code></pre>

<p>Error:</p>

<blockquote>
  <p>No such property: flavorDimensions for class: com.android.build.gradle.managed.ProductFlavor</p>
</blockquote>

<p><strong>Attempt 2:</strong></p>

<pre><code>apply plugin: 'com.android.model.application'

model {
    android {
        ...

        defaultConfig.with {
            ...
        }
        flavorDimensions = [""abi"", ""market""]
    }
    ...
}
...
</code></pre>

<p>Error:</p>

<blockquote>
  <p>No such property: flavorDimensions for class: com.android.build.gradle.managed.AndroidConfig</p>
</blockquote>

<p><strong>Attempt 3:</strong></p>

<pre><code>apply plugin: 'com.android.model.application'

model {
    android {
        ... // as in original script
    }
    android.flavorDimensions {
        create(""abi"") {}
        create(""market"") {}
    }
}
...
</code></pre>

<p>Error:</p>

<blockquote>
  <p>A problem occurred configuring project ':app'.  </p>
  
  <blockquote>
    <p>The following model rules are unbound: 
        model.android.flavorDimensions<br>
          Mutable:<br>
            - android.flavorDimensions (java.lang.Object)</p>
  </blockquote>
</blockquote>

<p><strong>Attempt 4:</strong></p>

<pre><code>apply plugin: 'com.android.model.application'

model {
    android {
        ...
    }
    android.flavorDimensions = [""abi"", ""market""]
}
</code></pre>

<p>Error:</p>

<blockquote>
  <p>No such property: flavorDimensions for class: org.gradle.model.dsl.internal.NonTransformedModelDslBacking</p>
</blockquote>
",535871,,,,,2015-11-10 19:25:13,Flavor dimensions and variant filters for experimental plugin?,<android><android-ndk><android-gradle><android-productflavors><gradle-experimental>,1,0,,,
Android,43362896,1,43397458,,2017,,1,423,"<p>I'm quite new to Android Things and Bluetooth LE Gatt. I have tried the <a href=""https://github.com/androidthings/sample-bluetooth-le-gattserver"" rel=""nofollow noreferrer"">Bluetooth LE GATT server sample</a> provided by Google. I run the Bluetooth LE GATT server sample on Raspberry Pi 3 and the <a href=""https://github.com/googlesamples/android-BluetoothLeGatt"" rel=""nofollow noreferrer"">Android BluetoothLeGatt client sample</a> on my phone. I have edit some codes in SampleGattAttributes.java and 
BluetoothLeService.java. </p>

<p>SampleGattAttributes.java</p>

<pre><code>public class SampleGattAttributes {
    private static HashMap&lt;String, String&gt; attributes = new HashMap();
    public static String CURRENT_TIME = ""00002a2b-0000-1000-8000-00805f9b34fb"";
    public static String CLIENT_CONFIG = ""00002902-0000-1000-8000-00805f9b34fb"";

    static {
        // Sample Services.
        attributes.put(""00001805-0000-1000-8000-00805f9b34fb"", ""TIME SERVICE"");

        // Sample Characteristics.
        attributes.put(CURRENT_TIME, ""CURRENT TIME"");}
</code></pre>

<p>BluetoothLeService.java</p>

<pre><code>/*
 * Copyright (C) 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the ""License"");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.example.android.bluetoothlegatt;

import android.app.Service;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothGatt;
import android.bluetooth.BluetoothGattCallback;
import android.bluetooth.BluetoothGattCharacteristic;
import android.bluetooth.BluetoothGattDescriptor;
import android.bluetooth.BluetoothGattService;
import android.bluetooth.BluetoothManager;
import android.bluetooth.BluetoothProfile;
import android.content.Context;
import android.content.Intent;
import android.os.Binder;
import android.os.IBinder;
import android.util.Log;

import java.util.List;
import java.util.UUID;

/**
 * Service for managing connection and data communication with a GATT server hosted on a
 * given Bluetooth LE device.
 */
public class BluetoothLeService extends Service {
    private final static String TAG = BluetoothLeService.class.getSimpleName();

    private BluetoothManager mBluetoothManager;
    private BluetoothAdapter mBluetoothAdapter;
    private String mBluetoothDeviceAddress;
    private BluetoothGatt mBluetoothGatt;
    private int mConnectionState = STATE_DISCONNECTED;

    private static final int STATE_DISCONNECTED = 0;
    private static final int STATE_CONNECTING = 1;
    private static final int STATE_CONNECTED = 2;

    public final static String ACTION_GATT_CONNECTED = ""com.example.bluetooth.le.ACTION_GATT_CONNECTED"";
    public final static String ACTION_GATT_DISCONNECTED = ""com.example.bluetooth.le.ACTION_GATT_DISCONNECTED"";
    public final static String ACTION_GATT_SERVICES_DISCOVERED = ""com.example.bluetooth.le.ACTION_GATT_SERVICES_DISCOVERED"";
    public final static String ACTION_DATA_AVAILABLE = ""com.example.bluetooth.le.ACTION_DATA_AVAILABLE"";
    public final static String EXTRA_DATA = ""com.example.bluetooth.le.EXTRA_DATA"";

    public final static UUID UUID_CURRENT_TIME = UUID.fromString(SampleGattAttributes.CURRENT_TIME);

    // Implements callback methods for GATT events that the app cares about.  For example,
    // connection change and services discovered.
    private final BluetoothGattCallback mGattCallback = new BluetoothGattCallback() {
        @Override
        public void onConnectionStateChange(BluetoothGatt gatt, int status, int newState) {
            String intentAction;
            if (newState == BluetoothProfile.STATE_CONNECTED) {
                intentAction = ACTION_GATT_CONNECTED;
                mConnectionState = STATE_CONNECTED;
                broadcastUpdate(intentAction);
                Log.i(TAG, ""Connected to GATT server."");
                // Attempts to discover services after successful connection.
                Log.i(TAG, ""Attempting to start service discovery:"" +
                        mBluetoothGatt.discoverServices());

            } else if (newState == BluetoothProfile.STATE_DISCONNECTED) {
                intentAction = ACTION_GATT_DISCONNECTED;
                mConnectionState = STATE_DISCONNECTED;
                Log.i(TAG, ""Disconnected from GATT server."");
                broadcastUpdate(intentAction);
            }
        }

        @Override
        public void onServicesDiscovered(BluetoothGatt gatt, int status) {
            if (status == BluetoothGatt.GATT_SUCCESS) {
                broadcastUpdate(ACTION_GATT_SERVICES_DISCOVERED);
            } else {
                Log.w(TAG, ""onServicesDiscovered received: "" + status);
            }
        }

        @Override
        public void onCharacteristicRead(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic, int status) {
            if (status == BluetoothGatt.GATT_SUCCESS) {
                broadcastUpdate(ACTION_DATA_AVAILABLE, characteristic);
            }
        }

        @Override
        public void onCharacteristicChanged(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic) {
            broadcastUpdate(ACTION_DATA_AVAILABLE, characteristic);
        }
    };

    private void broadcastUpdate(final String action) {
        final Intent intent = new Intent(action);
        sendBroadcast(intent);
    }

    private void broadcastUpdate(final String action, final BluetoothGattCharacteristic characteristic) {
        final Intent intent = new Intent(action);

        // This is special handling for the Heart Rate Measurement profile.  Data parsing is
        // carried out as per profile specifications:
        // http://developer.bluetooth.org/gatt/characteristics/Pages/CharacteristicViewer.aspx?u=org.bluetooth.characteristic.heart_rate_measurement.xml
        if (UUID_CURRENT_TIME.equals(characteristic.getUuid())) {
            int flag = characteristic.getProperties();
            int format = -1;
            if ((flag &amp; 0x01) != 0) {
                format = BluetoothGattCharacteristic.FORMAT_UINT16;
                Log.d(TAG, ""Heart rate format UINT16."");
            } else {
                format = BluetoothGattCharacteristic.FORMAT_UINT8;
                Log.d(TAG, ""Heart rate format UINT8."");
            }
            final int heartRate = characteristic.getIntValue(format, 1);
            Log.d(TAG, String.format(""Received heart rate: %d"", heartRate));
            intent.putExtra(EXTRA_DATA, String.valueOf(heartRate));
        } else {
            // For all other profiles, writes the data formatted in HEX.
            final byte[] data = characteristic.getValue();
            if (data != null &amp;&amp; data.length &gt; 0) {
                final StringBuilder stringBuilder = new StringBuilder(data.length);
                for(byte byteChar : data)
                    stringBuilder.append(String.format(""%02X "", byteChar));
                intent.putExtra(EXTRA_DATA, new String(data) + ""\n"" + stringBuilder.toString());
            }
        }
        sendBroadcast(intent);
    }

    public class LocalBinder extends Binder {
        BluetoothLeService getService() {
            return BluetoothLeService.this;
        }
    }

    @Override
    public IBinder onBind(Intent intent) {
        return mBinder;
    }

    @Override
    public boolean onUnbind(Intent intent) {
        // After using a given device, you should make sure that BluetoothGatt.close() is called
        // such that resources are cleaned up properly.  In this particular example, close() is
        // invoked when the UI is disconnected from the Service.
        close();
        return super.onUnbind(intent);
    }

    private final IBinder mBinder = new LocalBinder();

    /**
     * Initializes a reference to the local Bluetooth adapter.
     *
     * @return Return true if the initialization is successful.
     */
    public boolean initialize() {
        // For API level 18 and above, get a reference to BluetoothAdapter through
        // BluetoothManager.
        if (mBluetoothManager == null) {
            mBluetoothManager = (BluetoothManager) getSystemService(Context.BLUETOOTH_SERVICE);
            if (mBluetoothManager == null) {
                Log.e(TAG, ""Unable to initialize BluetoothManager."");
                return false;
            }
        }

        mBluetoothAdapter = mBluetoothManager.getAdapter();
        if (mBluetoothAdapter == null) {
            Log.e(TAG, ""Unable to obtain a BluetoothAdapter."");
            return false;
        }

        return true;
    }

    /**
     * Connects to the GATT server hosted on the Bluetooth LE device.
     *
     * @param address The device address of the destination device.
     *
     * @return Return true if the connection is initiated successfully. The connection result
     *         is reported asynchronously through the
     *         {@code BluetoothGattCallback#onConnectionStateChange(android.bluetooth.BluetoothGatt, int, int)}
     *         callback.
     */
    public boolean connect(final String address) {
        if (mBluetoothAdapter == null || address == null) {
            Log.w(TAG, ""BluetoothAdapter not initialized or unspecified address."");
            return false;
        }

        // Previously connected device.  Try to reconnect.
        if (mBluetoothDeviceAddress != null &amp;&amp; address.equals(mBluetoothDeviceAddress) &amp;&amp; mBluetoothGatt != null) {
            Log.d(TAG, ""Trying to use an existing mBluetoothGatt for connection."");
            if (mBluetoothGatt.connect()) {
                mConnectionState = STATE_CONNECTING;
                return true;
            } else {
                return false;
            }
        }

        final BluetoothDevice device = mBluetoothAdapter.getRemoteDevice(address);
        if (device == null) {
            Log.w(TAG, ""Device not found.  Unable to connect."");
            return false;
        }

        // We want to directly connect to the device, so we are setting the autoConnect parameter to false.
        mBluetoothGatt = device.connectGatt(this, false, mGattCallback);
        Log.d(TAG, ""Trying to create a new connection."");
        mBluetoothDeviceAddress = address;
        mConnectionState = STATE_CONNECTING;
        return true;
    }

    /**
     * Disconnects an existing connection or cancel a pending connection. The disconnection result
     * is reported asynchronously through the
     * {@code BluetoothGattCallback#onConnectionStateChange(android.bluetooth.BluetoothGatt, int, int)}
     * callback.
     */
    public void disconnect() {
        if (mBluetoothAdapter == null || mBluetoothGatt == null) {
            Log.w(TAG, ""BluetoothAdapter not initialized"");
            return;
        }
        mBluetoothGatt.disconnect();
    }

    /**
     * After using a given BLE device, the app must call this method to ensure resources are
     * released properly.
     */
    public void close() {
        if (mBluetoothGatt == null) {
            return;
        }
        mBluetoothGatt.close();
        mBluetoothGatt = null;
    }

    /**
     * Request a read on a given {@code BluetoothGattCharacteristic}. The read result is reported
     * asynchronously through the {@code BluetoothGattCallback#onCharacteristicRead(android.bluetooth.BluetoothGatt, android.bluetooth.BluetoothGattCharacteristic, int)}
     * callback.
     *
     * @param characteristic The characteristic to read from.
     */
    public void readCharacteristic(BluetoothGattCharacteristic characteristic) {
        if (mBluetoothAdapter == null || mBluetoothGatt == null) {
            Log.w(TAG, ""BluetoothAdapter not initialized"");
            return;
        }
        mBluetoothGatt.readCharacteristic(characteristic);
    }

    /**
     * Enables or disables notification on a give characteristic.
     *
     * @param characteristic Characteristic to act on.
     * @param enabled If true, enable notification.  False otherwise.
     */
    public void setCharacteristicNotification(BluetoothGattCharacteristic characteristic,
                                              boolean enabled) {
        if (mBluetoothAdapter == null || mBluetoothGatt == null) {
            Log.w(TAG, ""BluetoothAdapter not initialized"");
            return;
        }
        mBluetoothGatt.setCharacteristicNotification(characteristic, enabled);

        // This is specific to Heart Rate Measurement.
        if (UUID_CURRENT_TIME.equals(characteristic.getUuid())) {
            BluetoothGattDescriptor descriptor = characteristic.getDescriptor(UUID.fromString(SampleGattAttributes.CLIENT_CONFIG));
            descriptor.setValue(BluetoothGattDescriptor.ENABLE_NOTIFICATION_VALUE);
            mBluetoothGatt.writeDescriptor(descriptor);
        }
    }

    /**
     * Retrieves a list of supported GATT services on the connected device. This should be
     * invoked only after {@code BluetoothGatt#discoverServices()} completes successfully.
     *
     * @return A {@code List} of supported services.
     */
    public List&lt;BluetoothGattService&gt; getSupportedGattServices() {
        if (mBluetoothGatt == null) return null;

        return mBluetoothGatt.getServices();
    }
}
</code></pre>

<p>When I click the Current Time, it shows 7 at data field. May I know where the number 7 comes from and why there is no notification when I change the time. </p>
",5551028,,656408,,2017-04-13 0:42:03,2017-04-13 16:33:32,Bluetooth LE GATT issue,<android><bluetooth><android-things>,1,5,,,
Android,43052236,1,43080639,,2017,,1,212,"<p>I need to show camera preview in live wallpaper. 
I've already made for android &lt; M versions. But can't understand how it working with new API. Oldest Camera is deprecated now </p>

<p>In google example they put it in xml and in TextureView but how I can change that for my needs, I can't understand.</p>

<p>Anyway Thanks! </p>

<p>Google example
<a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a></p>

<p>Below my code.</p>

<p>Start wallpaper</p>

<pre><code>Intent intent = new Intent(WallpaperManager.ACTION_CHANGE_LIVE_WALLPAPER);
intent.putExtra(WallpaperManager.EXTRA_LIVE_WALLPAPER_COMPONENT, new ComponentName(this, TransparentWallpaperService.class));
startActivity(intent);
</code></pre>

<p>TransparentWallpaperService</p>

<pre><code>public class TransparentWallpaperService extends WallpaperService {

@Override
public Engine onCreateEngine() {
    return new GlowEngine();
}

private class GlowEngine extends Engine {

    private final Handler handler = new Handler();

    private final Runnable viewRunner = new Runnable() {

        @Override
        public void run() {

            drawView();

        }

    };

    private boolean visible = true;
    private CameraView view;

    public GlowEngine() {
        super();
        view = new CameraView(getBaseContext(), getSurfaceHolder());
        handler.post(viewRunner);
    }

    @Override
    public void onVisibilityChanged(boolean visible) {
        this.visible = visible;
        if (visible) {
            handler.post(viewRunner);
        }
        else {
            handler.removeCallbacks(viewRunner);
        }
    }

    @Override
    public void onSurfaceDestroyed(SurfaceHolder holder) {
        super.onSurfaceDestroyed(holder);
        this.visible = false;
        handler.removeCallbacks(viewRunner);
    }

    private void drawView() {
        view.surfaceChanged(getSurfaceHolder(), OPAQUE, view.getWidth(), view.getHeight());
        handler.removeCallbacks(viewRunner);
        if (visible) {
            handler.postDelayed(viewRunner, 4000);
        }
    }
}
}
</code></pre>

<p>CameraView class</p>

<pre><code>public class CameraView extends SurfaceView implements SurfaceHolder.Callback {

private SurfaceHolder holder;

private Camera camera;

public CameraView(Context context) {

    super(context);

    camera = getCameraInstance();

}

public CameraView(Context context, SurfaceHolder holder) {

    this(context);
    this.holder = holder;

    holder.addCallback(this);
    if (Build.VERSION.SDK_INT &lt;= Build.VERSION_CODES.GINGERBREAD_MR1) {
        holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

}

@Override
public void surfaceCreated(SurfaceHolder surfaceHolder) {

    if(camera == null) {
        camera = getCameraInstance();
    }

    if(camera != null) {
        // The Surface has been created, now tell the camera where to draw the preview.
        try {
            camera.setPreviewDisplay(surfaceHolder);
            camera.startPreview();
        }
        catch (IOException e) {
            Log.e(""CameraView"", ""Error setting camera preview: "" + e.getMessage());
        }
    }

}

@Override
public void surfaceChanged(SurfaceHolder surfaceHolder, int format, int width, int height) {

    boolean portrait = true;

    if (width &gt; 0 &amp;&amp; height &gt;0 &amp;&amp; width &lt; height){
        portrait =true;
    } else if (width &gt; 0 &amp;&amp; height &gt;0 &amp;&amp; width &gt; height){
        portrait = false;
    }

    Camera.Parameters parameters;
    if (camera == null) {
        camera = getCameraInstance();
    }
    if (camera != null){
        parameters = camera.getParameters();
        Camera.Size size = parameters.getPictureSize();
        size = parameters.getPreviewSize();
        parameters.setPreviewSize(size.width, size.height);
        if (portrait) {
            camera.setDisplayOrientation(90);
        } else {
            camera.setDisplayOrientation(180);
        }
        try {
            camera.setParameters(parameters);
            camera.setPreviewDisplay(holder);
            camera.startPreview();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}

@Override
public void surfaceDestroyed(SurfaceHolder surfaceHolder) {
    if(camera != null) {
        try {
            camera.stopPreview();
            camera.release();
        }
        catch (Exception e) {
            Log.e(""CameraView"", ""Error stopping camera preview: "" + e.getMessage());
        }
    }

}

private Camera getCameraInstance() {

    Context context = getContext();
    Camera camera = null;
    if (context.getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA)) {
        try {
            camera = Camera.open();
        }
        catch (Exception e) {
            Log.e(""CameraView"", ""Error getting camera instance: "" + e.getMessage());
        }
    }
    else {
        Log.i(""CameraView"", ""No camera found!"");
    }
    return camera;
}
}
</code></pre>
",5339746,,,,,2017-03-28 21:55:02,Show camera2 preview in wallpaperservice,<java><android><android-studio><camera><camera2>,1,0,,,
Android,43632379,1,,,2017,,1,467,"<p>I have used picture which has text in black colour and white background  </p>

<p><strong>Vision API is unable to read the text in that image, it reads first two line but rest all its not reading.</strong></p>

<p>Please let me know whats wrong. Is it problem with Api or from my code. </p>

<p>I used this  <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/ocr-reader"" rel=""nofollow noreferrer"" title=""Sample"">sample code</a> </p>
",1829753,,1829753,,2017-05-04 6:51:45,2017-10-23 15:04:01,Android vision api OCR example is not detecting all text,<android><android-vision>,1,0,,,
Android,46984467,1,48350486,,2017,,1,164,"<ol>
<li>In the previous library as we were getting Inventory object, how can we get it from billing library version 1.0?</li>
<li>How can we get developer payload, which we are getting in Purchase object?</li>
</ol>

<p>For reference :</p>

<pre><code>public void onQueryInventoryFinished(IabResult result, Inventory inventory) {
            Log.d(TAG, ""Query inventory finished."");
}
</code></pre>

<p>Note : I am referencing from the library code - <a href=""https://github.com/googlesamples/android-play-billing"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-billing</a></p>
",1964609,,,,,2018-01-19 22:31:36,Deprecated Inventory object from google play billing library 1.0?,<android><android-billing><play-billing-library>,1,0,,,
Android,47248029,1,,,2017,,1,499,"<p>I am facing some weird memory leak using camera2 api. Tested with <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a> adding empty activity to launch the camera activity and close it then launch again, I get following trace:</p>

<blockquote>
  <p>11-12 12:52:19.506 16069-16078/com.example.android.camera2basic E/StrictMode: A resource was acquired at attached stack trace but never released. See java.io.Closeable for information on avoiding resource leaks.
                                                                                java.lang.Throwable: Explicit termination method 'release' not called
                                                                                    at dalvik.system.CloseGuard.open(CloseGuard.java:180)
                                                                                    at android.view.Surface.setNativeObjectLocked(Surface.java:511)
                                                                                    at android.view.Surface.(Surface.java:179)
                                                                                    at com.example.android.camera2basic.Camera2BasicFragment.createCameraPreviewSession(Camera2BasicFragment.java:684)
                                                                                    at com.example.android.camera2basic.Camera2BasicFragment.access$400(Camera2BasicFragment.java:74)
                                                                                    at com.example.android.camera2basic.Camera2BasicFragment$2.onOpened(Camera2BasicFragment.java:194)
                                                                                    at android.hardware.camera2.impl.CameraDeviceImpl$1.run(CameraDeviceImpl.java:134)
                                                                                    at android.os.Handler.handleCallback(Handler.java:751)
                                                                                    at android.os.Handler.dispatchMessage(Handler.java:95)
                                                                                    at android.os.Looper.loop(Looper.java:154)
                                                                                    at android.os.HandlerThread.run(HandlerThread.java:61)
  11-12 12:52:19.506 16069-16078/com.example.android.camera2basic W/System.err: StrictMode VmPolicy violation with POLICY_DEATH; shutting down.</p>
</blockquote>

<p>I use</p>

<pre><code>StrictMode.setVmPolicy(new StrictMode.VmPolicy.Builder()
    .detectAll()
    .penaltyLog()
    .penaltyDeath()
    .build());
</code></pre>

<p>Running on LG Nexus 5X, OS 7.1.2</p>

<p>Any ideas if this is something to worry about?</p>

<p>Thanks.</p>
",1238164,,,,,2017-11-14 1:30:12,Memory leak with Android camera2 API,<java><android><memory-leaks>,1,3,,,
Android,47479274,1,,,2017,,1,94,"<p>Im working with the <code>ActivityRecognitionClient</code> class to get the data of the Users activity whether he walks, runs or on bicycle etc</p>

<p>The thing is that working with <code>PendingIntent</code>, so Im able to start the <code>PendingIntent</code>, and in the function <code>onHandleIntent</code> I even can extract logs of the values of the users activity.</p>

<p>The Problem is that I can't extract the values to the <code>MainActivity</code>.</p>

<p>Although I saw a solution <a href=""https://github.com/googlesamples/android-play-location/tree/master/ActivityRecognition"" rel=""nofollow noreferrer"">here</a>.</p>

<p>He uses <code>SharedPreferences</code> to pass the data, and in the <code>MainActivity</code> he implements <a href=""https://developer.android.com/reference/android/content/SharedPreferences.OnSharedPreferenceChangeListener.html"" rel=""nofollow noreferrer"">SharedPreferences.OnSharedPreferenceChangeListener</a>. so whenever the <code>SharedPreference</code> is edited in the <code>IntentService</code> <strong>or in any other class</strong>, the <code>MainActivity</code> gets a callback.</p>

<p>I don't think that this is the best solution but I didn't found any other solution.</p>

<p>But what I don't understand is why there is no any callback to the <code>PendingIntent.getService()</code> function apart from <code>OnSuccessListener</code> and <code>OnFailureListener</code>.</p>

<p>What I've done until now is in <a href=""https://gist.github.com/asafbaibekov/66de024050524a4e943c65fff93c517c"" rel=""nofollow noreferrer"">this gist</a> </p>

<p>Thanks for helpers!</p>
",3023098,,3023098,,2017-11-28 22:21:36,2017-11-28 22:21:36,Android - get ActivityRecognition service values back to MainActivity,<java><android><intentservice><activity-recognition>,1,0,,,
Android,48020271,1,,,2017,,1,42,"<p>I face a problem when using a google ble demo on VIVO X7 and X9 android phones.
Here is the demo link: <a href=""https://github.com/googlesamples/android-BluetoothLeGatt"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-BluetoothLeGatt</a>
The bluetoothadapter scans ble devices for 4 minutes and then stops automatically.
This problem only occurs on above 2 android phones. The ble scanning lasts longer on other android phone. There is no related info I can find on Google. Does anyone get the reason on that? Many thanks</p>
",9152458,,9152458,,2017-12-29 9:30:46,2018-11-26 10:19:17,BLE development on VIVO smartphones?,<android><bluetooth-lowenergy>,1,2,,,
Android,42345734,1,,,2017,,1,1715,"<p>Androids 6.0 Fingerprint API cannot detect my fingerprint scanner on Samsung S5.</p>

<ul>
<li>Screen lock is secured with fingerprints</li>
<li>I've 2 Fingerprints registered in fingerprint manager</li>
<li>My S5 is updated to android 6.0</li>
<li>The fingerprint scanner is working fine, I use it to unlock my phone</li>
<li>I cannot find anything to do with fingerprints in the Security Settings (Was told to allow Apps to have access to fingerprint here, but its not on it)</li>
</ul>

<p>In App Info of each app, is says Permissions: No Permissions Requested however in each of the sample app's ive tried it meantions they do request permission...However I haven't seen the request pop up</p>

<p>I've tried the google fingerprint scanner authentication <a href=""https://github.com/googlesamples/android-FingerprintDialog"" rel=""nofollow noreferrer"">Sample App</a> and I've also tried <a href=""https://github.com/JessicaThornsby/FingerprintAuthentication"" rel=""nofollow noreferrer"">this app </a></p>

<p>Any idea's on what could to be the problem?</p>
",4832523,,4832523,,2017-02-20 15:12:41,2017-02-22 12:57:54,Fingerprint scanner not detected when using Android 6.0 Fingerprint API on Samsung S5,<android><android-studio><android-6.0-marshmallow><fingerprint><android-fingerprint-api>,1,1,,,
Android,42268602,1,,,2017,,1,79,"<p>I am working on a geofence app for Android. With the help of the <a href=""https://github.com/googlesamples/android-play-location"" rel=""nofollow noreferrer"">example</a> from google and refactoring from <code>IntentService</code> to <code>BroadcastReceiver</code> as described <a href=""https://stackoverflow.com/questions/19505614/android-geofence-eventually-stop-getting-transition-intents/19521823#19521823"">here</a> I now have an app that works as expected if app is in background. What I did not manage is how I can update my App e.g. a Model if the app is killed? My <code>GeofenceReceiver</code> is triggered/called while the app is killed, but my <code>BroadcastReceiver</code> message is not received in my <code>MainActivity</code>.</p>

<p>In my <code>GeofenceReceiver</code> I do something like this if I get a geofence-transition:</p>

<p>1:</p>

<pre><code>Intent notificationIntent = new Intent(context, MainActivity.class);
    notificationIntent.putStringArrayListExtra(Constants.TRIGGERING_GEOFENCE_IDS_KEY, triggeringIDs);

    TaskStackBuilder stackBuilder = TaskStackBuilder.create(context);
    stackBuilder.addParentStack(MainActivity.class);
    stackBuilder.addNextIntent(notificationIntent);

    PendingIntent resultPendingIntent = stackBuilder.getPendingIntent(0, PendingIntent.FLAG_UPDATE_CURRENT);

    NotificationCompat.Builder builder = new NotificationCompat.Builder(context);
    builder.setSmallIcon(R.mipmap.ic_launcher)
            .setLargeIcon(BitmapFactory.decodeResource(context.getResources(), R.mipmap.ic_launcher))
            .setColor(Color.RED)
            .setContentTitle(notificationDetails)
            .setContentText(context.getString(R.string.geofence_transition_notification_text))
            .setPriority(NotificationCompat.PRIORITY_HIGH)
            .setContentIntent(resultPendingIntent);
    builder.setAutoCancel(true);

    NotificationManager mNotificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
    mNotificationManager.notify(0, builder.build());
</code></pre>

<p>2: </p>

<pre><code>Intent broadcastIntent = new Intent(ACTION);
        broadcastIntent.putExtra(""resultCode"", Activity.RESULT_OK);
        broadcastIntent.putExtra(Constants.BUNDLE_KEY, bundle);
        LocalBroadcastManager.getInstance(context).sendBroadcast(broadcastIntent);
</code></pre>

<p>As I already said the broadcast is received in my <code>MainActivity</code>, if the app is in background. If I kill the App the broadcast is not received in my <code>MainActivity</code>. I checked that with terminal and logcat.</p>

<p>Any ideas?</p>
",6029834,,-1,,2017-05-23 12:17:05,2017-02-16 9:40:07,How to update closed/killed app from IntentReceiver?,<android><broadcastreceiver><updates><android-geofence>,1,2,,,
Android,42258489,1,42289088,,2017,,1,755,"<p>I am implementing SafetyNet API based on <a href=""https://github.com/googlesamples/android-play-safetynet"" rel=""nofollow noreferrer"">Google SafetyNet sample</a> and <a href=""https://github.com/scottyab/safetynethelper"" rel=""nofollow noreferrer"">SafetyNet Helper</a></p>

<p>Here is my working code. First part is processing code I used at <a href=""https://github.com/googlesamples/android-play-safetynet/blob/master/android/SafetyNetSample/Application/src/main/java/com/example/android/safetynetsample/SafetyNetSampleFragment.java"" rel=""nofollow noreferrer"">SafetyNetSampleFragment</a>:</p>

<pre><code>import android.support.annotation.NonNull;
import android.support.annotation.Nullable;
import android.support.v4.app.FragmentActivity;
import android.util.Base64;
import android.util.Log;

import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.api.GoogleApiClient;
import com.google.android.gms.common.api.ResultCallback;
import com.google.android.gms.common.api.Status;
import com.google.android.gms.safetynet.SafetyNet;
import com.google.android.gms.safetynet.SafetyNetApi;

import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.security.SecureRandom;
import java.util.Random;


public class SafetyNetVerifier implements GoogleApiClient.OnConnectionFailedListener {

    private final Random mRandom = new SecureRandom();
    private String mResult;
    private GoogleApiClient mGoogleApiClient;

    private FragmentActivity activity;

    public SafetyNetVerifier(FragmentActivity activity) {
        this.activity = activity;
        buildGoogleApiClient();
        sendSafetyNetRequest();
    }

    private byte[] getRequestNonce(String data) {
        ByteArrayOutputStream byteStream = new ByteArrayOutputStream();
        byte[] bytes = new byte[24];
        mRandom.nextBytes(bytes);
        try {
            byteStream.write(bytes);
            byteStream.write(data.getBytes());
        } catch (IOException e) {
            return null;
        }

        return byteStream.toByteArray();
    }

    protected synchronized void buildGoogleApiClient() {
        mGoogleApiClient = new GoogleApiClient.Builder(activity)
                .addApi(SafetyNet.API)
                .enableAutoManage(activity, this)
                .build();
    }

    private void sendSafetyNetRequest() {
        Log.e(""hqthao"", ""Sending SafetyNet API request."");

        String nonceData = ""Safety Net Sample: "" + System.currentTimeMillis();
        byte[] nonce = getRequestNonce(nonceData);

        SafetyNet.SafetyNetApi.attest(mGoogleApiClient, nonce)
                .setResultCallback(new ResultCallback&lt;SafetyNetApi.AttestationResult&gt;() {

                    @Override
                    public void onResult(SafetyNetApi.AttestationResult result) {
                        Status status = result.getStatus();
                        if (status.isSuccess()) {
                            mResult = result.getJwsResult();
                            Log.e(""hqthao"", ""Success! SafetyNet result:\n"" + mResult + ""\n"");
                            SafetyNetResponse response = parseJsonWebSignature(mResult);
                            Log.e(""hqthao"", response.toString());
                        }
                    }
                });
    }

    @Nullable
    private SafetyNetResponse parseJsonWebSignature(String jwsResult) {
        if (jwsResult == null) {
            return null;
        }
        //the JWT (JSON WEB TOKEN) is just a 3 base64 encoded parts concatenated by a . character
        final String[] jwtParts = jwsResult.split(""\\."");

        if (jwtParts.length == 3) {
            //we're only really interested in the body/payload
            String decodedPayload = new String(Base64.decode(jwtParts[1], Base64.DEFAULT));

            return SafetyNetResponse.parse(decodedPayload);
        } else {
            return null;
        }
    }

    @Override
    public void onConnectionFailed(@NonNull ConnectionResult connectionResult) {
        Log.e(""hqthao"", ""Error connecting to Google Play Services."" + connectionResult.getErrorMessage());
    }

}
</code></pre>

<p>Here is the model <code>SafetyNetResponse</code> I copied from <a href=""https://github.com/scottyab/safetynethelper/blob/master/safetynetlib/src/main/java/com/scottyab/safetynet/SafetyNetResponse.java"" rel=""nofollow noreferrer"">SafetyNetResponse</a>:</p>

<pre><code>import android.support.annotation.NonNull;
import android.support.annotation.Nullable;
import android.util.Log;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import java.util.Arrays;

public class SafetyNetResponse {

    private static final String TAG = SafetyNetResponse.class.getSimpleName();
    private String nonce;
    private long timestampMs;
    private String apkPackageName;
    private String[] apkCertificateDigestSha256;
    private String apkDigestSha256;
    private boolean ctsProfileMatch;
    private boolean basicIntegrity;

    //forces the parse()
    private SafetyNetResponse() {
    }

    /**
     * @return BASE64 encoded
     */
    public String getNonce() {
        return nonce;
    }

    public long getTimestampMs() {
        return timestampMs;
    }

    /**
     * @return com.package.name.of.requesting.app
     */
    public String getApkPackageName() {
        return apkPackageName;
    }

    /**
     * SHA-256 hash of the certificate used to sign requesting app
     *
     * @return BASE64 encoded
     */
    public String[] getApkCertificateDigestSha256() {
        return apkCertificateDigestSha256;
    }

    /**
     * SHA-256 hash of the app's APK
     *
     * @return BASE64 encoded
     */
    public String getApkDigestSha256() {
        return apkDigestSha256;
    }


    /**
     * If the value of ""ctsProfileMatch"" is true, then the profile of the device running your app matches the profile of a device that has passed Android compatibility testing.
     *
     * @return
     */
    public boolean isCtsProfileMatch() {
        return ctsProfileMatch;
    }

    /**
     * If the value of ""basicIntegrity"" is true, then the device running your app likely wasn't tampered with, but the device has not necessarily passed Android compatibility testing.
     *
     * @return
     */
    public boolean isBasicIntegrity() {
        return basicIntegrity;
    }

    /**
     * Parse the JSON string into populated SafetyNetResponse object
     *
     * @param decodedJWTPayload JSON String (always a json string according to JWT spec)
     * @return populated SafetyNetResponse
     */
    @Nullable
    public static SafetyNetResponse parse(@NonNull String decodedJWTPayload) {

        Log.d(TAG, ""decodedJWTPayload json:"" + decodedJWTPayload);

        SafetyNetResponse response = new SafetyNetResponse();
        try {
            JSONObject root = new JSONObject(decodedJWTPayload);
            if (root.has(""nonce"")) {
                response.nonce = root.getString(""nonce"");
            }

            if (root.has(""apkCertificateDigestSha256"")) {
                JSONArray jsonArray = root.getJSONArray(""apkCertificateDigestSha256"");
                if (jsonArray != null) {
                    String[] certDigests = new String[jsonArray.length()];
                    for (int i = 0; i &lt; jsonArray.length(); i++) {
                        certDigests[i] = jsonArray.getString(i);
                    }
                    response.apkCertificateDigestSha256 = certDigests;
                }
            }

            if (root.has(""apkDigestSha256"")) {
                response.apkDigestSha256 = root.getString(""apkDigestSha256"");
            }

            if (root.has(""apkPackageName"")) {
                response.apkPackageName = root.getString(""apkPackageName"");
            }

            if (root.has(""basicIntegrity"")) {
                response.basicIntegrity = root.getBoolean(""basicIntegrity"");
            }

            if (root.has(""ctsProfileMatch"")) {
                response.ctsProfileMatch = root.getBoolean(""ctsProfileMatch"");
            }

            if (root.has(""timestampMs"")) {
                response.timestampMs = root.getLong(""timestampMs"");
            }

            return response;
        } catch (JSONException e) {
            Log.e(TAG, ""problem parsing decodedJWTPayload:"" + e.getMessage(), e);
        }
        return null;
    }


    @Override
    public String toString() {
        return ""SafetyNetResponse{"" +
                ""nonce='"" + nonce + '\'' +
                "", timestampMs="" + timestampMs +
                "", apkPackageName='"" + apkPackageName + '\'' +
                "", apkCertificateDigestSha256="" + Arrays.toString(apkCertificateDigestSha256) +
                "", apkDigestSha256='"" + apkDigestSha256 + '\'' +
                "", ctsProfileMatch="" + ctsProfileMatch +
                "", basicIntegrity="" + basicIntegrity +
                '}';
    }
}
</code></pre>

<p>We can easily call above workable code by calling this line of code inside activity:</p>

<pre><code>    new SafetyNetVerifier(this);
</code></pre>

<p>The result is:</p>

<pre><code>SafetyNetResponse{
 nonce='Xc4dSnAjAqf9KWDZokwK2TdBw9Td+ZILU2FmZXR5IE5ldCBTYW1wbGU6IDE0ODcxODQyMjYwNjc=', 
timestampMs=1487184225994, 
apkPackageName='null', 
apkCertificateDigestSha256=[], 
apkDigestSha256='null', 
ctsProfileMatch=false, 
basicIntegrity=false
}
</code></pre>

<p>As timestamp parsed correctly. I think I have get successfully safetynet response. But I don't know why <code>apkPackageName</code> always null and other fields as I have shown are empty. Please help me.</p>
",1493868,,296427,,2017-03-29 13:37:28,2017-03-29 13:37:28,SafetyNet: package name always return null,<android><google-play-services><safetynet>,1,1,,,
Android,44487347,1,44487594,,2017,,1,36,"<p>I have created a bluetooth chat,I want to make changes as such that I want to perform an action if the </p>

<p><code>if(messageRecieved.equals(""message required""){
 //Action
}</code>
I do not know which statement is the above mentioned messageRecieved
ref-:<a href=""https://github.com/googlesamples/android-BluetoothChat/tree/master/Application/src/main/java/com/example/android/bluetoothchat"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-BluetoothChat/tree/master/Application/src/main/java/com/example/android/bluetoothchat</a></p>
",,user7320356,,user7320356,2017-06-11 19:07:06,2017-06-11 19:07:06,Start an if statement according to the message RECEIVED-Bluetooth,<android><bluetooth><android-bluetooth>,1,4,,,
Android,45051996,1,45059954,,2017,,1,779,"<p>I'm trying to use a <a href=""https://developer.android.com/reference/java/security/Signature.html"" rel=""nofollow noreferrer"">Signature</a> object for signing AND verifying data using fingerprint authentication. It works fine for signing, but when it comes to verifying I get this error : </p>

<blockquote>
  <p>java.lang.IllegalArgumentException: Crypto primitive not backed by
  AndroidKeyStore provider: Signature object:
  SHA256withECDSA, spi:
  com.android.org.conscrypt.OpenSSLSignature$SHA256ECDSA@cf4a416</p>
</blockquote>

<p>The exception is thrown not while generating the key (this part is fine) but when calling <code>fingerprintManager.authenticate(cryptoObject, ...)</code></p>

<p>Basically this is how I generate a <code>CryptoObject</code> instance : </p>

<pre><code>KeyPairGenerator signatureKeyGenerator = KeyPairGenerator.getInstance(KeyProperties.KEY_ALGORITHM_EC, ""AndroidKeyStore"");
signatureKeyGenerator.initialize(new KeyGenParameterSpec.Builder(keyName, KeyProperties.PURPOSE_SIGN)
        .setDigests(KeyProperties.DIGEST_SHA256)
        .setAlgorithmParameterSpec(new ECGenParameterSpec(""secp256r1""))
        .setUserAuthenticationRequired(true)
        .build());

KeyPair signatureKey = signatureKeyGenerator.generateKeyPair();

Signature signature = Signature.getInstance(""SHA256withECDSA"");

switch (MODE) {
    case KeyProperties.PURPOSE_SIGN:
        signature.initSign(signatureKey.getPrivate());
        break;
    case KeyProperties.PURPOSE_VERIFY:
        KeyFactory factory = KeyFactory.getInstance(signatureKey.getPublic().getAlgorithm());
        X509EncodedKeySpec spec = new X509EncodedKeySpec(signatureKey.getPublic().getEncoded());
        PublicKey unrestrictedPublicKey = factory.generatePublic(spec);
        signature.initVerify(unrestrictedPublicKey);
        break;
}

CryptoObject cryptoObject new CryptoObject(signature);
</code></pre>

<p>I tried to add <code>| KeyProperties.PURPOSE_VERIFY</code> to <code>KeyGenParameterSpec.Builder</code> but it didn't work either and anyway that's how they do it in the official Google repo : <a href=""https://github.com/googlesamples/android-AsymmetricFingerprintDialog"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-AsymmetricFingerprintDialog</a> (weird...)</p>

<p>Finally I tried to look into Android source code to see why the exception is thrown : <strong><a href=""https://android.googlesource.com/platform/frameworks/base/+/ae6cb7a/keystore/java/android/security/keystore/AndroidKeyStoreProvider.java"" rel=""nofollow noreferrer"">AndroidKeyStoreProvider.java</a></strong></p>

<pre><code>Object spi = ((Signature) cryptoPrimitive).getCurrentSpi();
if (spi == null) {
    throw new IllegalStateException(""Crypto primitive not initialized"");
} else if (!(spi instanceof KeyStoreCryptoOperation)) {
    throw new IllegalArgumentException(
            ""Crypto primitive not backed by AndroidKeyStore provider: "" + cryptoPrimitive
            + "", spi: "" + spi);
}
</code></pre>

<p>But I can't even find the <code>getCurrentSpi()</code> method...</p>

<p>Any help would be greatly appreciated !</p>
",5552022,,,,,2017-07-12 14:27:56,Android Fingerprint Authentication with Signature,<android><authentication><keystore><signature><fingerprint>,1,0,,,
Android,53445426,1,,,2018,,1,100,"<p>Using Android sceneform I am developing an application, I know that currently we don't have an option to record a video with rendered 3d Objects but is there any option to record a camera data's just like we are doing normal camera video recording (<a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow noreferrer"">Google Android video record sample</a>)?</p>
",9713119,,,,,2018-12-19 18:39:50,How to record video using Camera2 API in SceneForm,<android><android-camera2><sceneform>,1,0,,,
Android,54847411,1,54847523,,2019,,1,55,"<p>I am exploring Google's Sunflower sample <code>Jetpack</code> app (<a href=""https://github.com/googlesamples/android-sunflower"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-sunflower</a>). The NavGraph is defined in a navigation xml file that has a single <code>Activity</code> and numerous <code>Fragment</code>s.  The main <code>Activity</code> layout has an <code>AppBar</code> which is shared by all the fragments.  I would like to add another <code>Fragment</code> to the NavGraph that displays an image in Fullscreen mode.  The Android documentation shows the following code to enable Fullscreen mode:</p>

<pre><code> private fun hideSystemUI() {
            window.decorView.systemUiVisibility = (View.SYSTEM_UI_FLAG_IMMERSIVE
            or View.SYSTEM_UI_FLAG_LAYOUT_STABLE
            or View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION
            or View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN
            or View.SYSTEM_UI_FLAG_HIDE_NAVIGATION
            or View.SYSTEM_UI_FLAG_FULLSCREEN)
}
</code></pre>

<p>I call <code>hideSystemUI</code> in the new <code>Fragment</code>'s <code>onResume()</code>, and it is not working. The <code>Fragment</code> still shows the main <code>AppBar</code> and navigation that were set up in <code>MainActivity</code>. I've tried a variety of other solutions from S.O. threads, but most seem to be based on the standard <code>Activity/Fragment</code> pattern that I've had success with in my pre-Jetpack apps.  The new layout contains a <code>FrameLayout</code> with an <code>ImageView</code>. My new Fragment looks like this:</p>

<pre><code>class FullScreenFragment: Fragment() {
    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,
                              savedInstanceState: Bundle?): View? {
        super.onCreateView(inflater, container, savedInstanceState)
        val binding = DataBindingUtil.inflate&lt;FragmentFullscreenBinding&gt;(
                inflater, R.layout.fragment_fullscreen, container, false)
        return binding.root
    }

    override fun onResume() {
        super.onResume()
        hideSystemUI()
    }

    private fun hideSystemUI() {
                    activity!!.window.decorView.systemUiVisibility = (View.SYSTEM_UI_FLAG_IMMERSIVE
                                    or View.SYSTEM_UI_FLAG_LAYOUT_STABLE
                or View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION
                or View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN
                                    or View.SYSTEM_UI_FLAG_HIDE_NAVIGATION
                or View.SYSTEM_UI_FLAG_FULLSCREEN)
    }
}
</code></pre>

<p>Is there a way to enable Fullscreen mode for one fragment?  I haven't changed Google's code at all, except to add the new <code>Fragment</code> to the NavGraph, but I can post additional code here if necessary.  I'm thinking that this may have to be managed through <code>MainActivity</code>, but I'm not sure. Thanks in advance!</p>
",5277309,,,,,2019-02-24 0:11:30,Android NavigationUI Fragment in Fullscreen Mode,<android><android-fragments><android-fragmentactivity><android-jetpack>,1,0,,,
Android,54879581,1,,,2019,,1,91,"<p>Everytime fragment instance is created and reloading when you press back.</p>

<p>How to overcome this issue?</p>

<p>Inability of having proper backstack in nav controller is a huge productivity issue. Hope it's a missing feature or a work-around made on purpose... IMO this is a must-have and has to be introduced sooner rather than later (however: <a href=""https://issuetracker.google.com/issues/109856764"" rel=""nofollow noreferrer"">https://issuetracker.google.com/issues/109856764</a> says <em>We won't be allowing customization of the transaction type (such as hiding/showing, etc) for the foreseeable future.</em>) :(</p>

<p><a href=""https://github.com/googlesamples/android-architecture-components/issues/419"" rel=""nofollow noreferrer"">Nav-Framework is nice, however, it create fragment's view every time</a></p>

<p>Does anyone has solution?</p>

<p>My code is to navigate using Navigation </p>

<pre><code>object NavigationHelper : Navigational {


override fun moveDownWithPop(view: View,id: Int,popStackId: Int) {
    Navigation.findNavController(view).navigate(id,
            null,
            NavOptions.Builder()
                    .setPopUpTo(popStackId,
                            true).build()
    )
}

override fun moveDownWithDataPop(view: View,id: Int,popStackId: Int,bundle : Bundle) {
    Navigation.findNavController(view).navigate(id,
            bundle,
            NavOptions.Builder()
                    .setPopUpTo(popStackId,
                            true).build()
    )
}

override fun moveUp(view: View) {
    Navigation.findNavController(view).navigateUp()
}

override fun moveDown(view: View,id: Int) {
    Navigation.findNavController(view).navigate(id)
}

override fun moveDown(view: View,id: Int,args : Bundle) {
    Navigation.findNavController(view).navigate(id,args)
}

fun navigateGraph(graphId : Int,context : Context){
    var finalHost: NavHostFragment?  = NavHostFragment.create(graphId)
    (context as MainActivity).supportFragmentManager.beginTransaction()
            .replace(com.admision.R.id.content,finalHost!!)
            .setPrimaryNavigationFragment(finalHost) // this is the equivalent to app:defaultNavHost=""true""
            .commit()
}
}
</code></pre>

<p>i found some blog <a href=""https://proandroiddev.com/why-i-will-not-use-architecture-navigation-component-97d2ad596b36"" rel=""nofollow noreferrer"">Why I Will Not Use Architecture Navigation Component</a></p>
",1136023,,,,,2019-03-12 6:31:47,Architecture Navigation Component : onCreateView gets called every time,<android><androidx><fragment-backstack><android-navigation-component>,1,0,,,
Android,45139577,1,45148366,,2017,,1,642,"<p>My project structure contains a base feature module, an installed app module (with free and paid flavors) and an instant app module(only one flavor - free). It seems like the package name for the instant app is coming from the base feature module's manifest.</p>

<p>Why does not the applicationId field in build.gradle of instant app overwrite the package field in the manifest as it does for the installed app?</p>

<p>The same behaviour is also observed in the <a href=""https://github.com/googlesamples/android-instant-apps/tree/master/hello"" rel=""nofollow noreferrer"">hello instant app sample.</a></p>
",1262089,,,,,2017-07-17 18:07:19,How to set the package/applicationId for android instant app?,<android><android-instant-apps>,1,0,,,
Android,53638074,1,53638529,,2018,,1,25,"<p>I have a RecyclerView which could contain any number of items.  I need to be able to get a single row from that list so i can check its contents or click/long click on that row.</p>

<p>I am struggling greatly to figure out how to do this as unlike ListView's ""onData"" there is no built in functionality to scroll through the RecyclerView to find the row.  It appears that with RecyclerView if the view is not actually ON SCREEN you can not verify that rows UI.</p>

<p>In the examples I have seen they are using the number of items in the list to scroll to each row. However I do not know in advance how many rows my list has as the number is not fixed.</p>

<p>This solution looked very promising, but that assumes you know the items in your list to pass into the espresso objects which is not applicable to me.</p>

<p><a href=""https://medium.com/@_rpiel/recyclerview-and-espresso-a-complicated-story-3f6f4179652e"" rel=""nofollow noreferrer"">https://medium.com/@_rpiel/recyclerview-and-espresso-a-complicated-story-3f6f4179652e</a></p>

<p>This example also assumes it knows which rows are off screen
<a href=""https://github.com/googlesamples/android-testing/blob/master/ui/espresso/RecyclerViewSample/app/src/androidTest/java/com/example/android/testing/espresso/RecyclerViewSample/RecyclerViewSampleTest.java"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-testing/blob/master/ui/espresso/RecyclerViewSample/app/src/androidTest/java/com/example/android/testing/espresso/RecyclerViewSample/RecyclerViewSampleTest.java</a></p>

<p>Likewise this example knows which row to move to
<a href=""http://blog.forkingcode.com/2016/06/espresso-and-recyclerview.html"" rel=""nofollow noreferrer"">http://blog.forkingcode.com/2016/06/espresso-and-recyclerview.html</a></p>

<p>I need to do something like</p>

<pre><code>onView(withId(R.id.recyclerView)).perform(findRowWhichHasText(""name1"");
</code></pre>

<p>where ""findRowWhichHasText"" does something like</p>

<ul>
<li>find the number of items in the list</li>
<li>scroll to each one in turn (scrollToPosition(i) )</li>
<li><p>check if that row has the item I want. Something like  </p>

<pre><code>StringUtils.equals(viewHolder.nameView.getText().toString(), assetName);
</code></pre></li>
</ul>
",2663916,,6296561,,2019-02-09 22:01:56,2019-02-09 22:01:56,Espresso finding row in RecyclerView that could be off screen,<android><android-recyclerview><android-espresso>,1,0,,,
Android,46273499,1,,,2017,,1,585,"<p>I am using the Raspberry Pi 3 model B as a bluetooth peripheral. 
The Pi is running a GATT server and advertising it as well.</p>

<p>I can connect to it from the LightBlue iOS app and can read and write values.</p>

<p>I am having trouble connecting to the Pi over BLE from an Android App.
I have tried using 2 apps from the play store - BLE Scanner and Bluetooth LE Scanner.
BluetoothLeGatt is another app I have tried using. It is available as an example BLE project on Android Studio. The pi appears in the scan results and once I press connect, the app tries to connect but is possibly refused connection by the pi. The program control goes to the GattCallback function with the state changed to 'disconnected' and the service discovery never happens.
The logs look like this:</p>

<pre><code>D/BluetoothGatt: connect() - device: B8:27:EB:A4:E7:75, auto: false
D/BluetoothGatt: registerApp()
D/BluetoothGatt: registerApp() - UUID=0c46767a-1ddc-4d91-83fe-490f9d3a5ad7
D/BluetoothGatt: onClientRegistered() - status=0 clientIf=6
D/BluetoothLeService: Trying to create a new connection.
D/BluetoothGatt: onClientConnectionState() - status=133 clientIf=6 device=B8:27:EB:A4:E7:75
I/BluetoothLeService: Disconnected from GATT server.
</code></pre>

<p>The same app is able to connect to a virtual peripheral simulated using the LightBlue iOS app or the DropBeacon iOS app.</p>

<p>This makes me think, some configuration on the pi is preventing it from accepting a connection from Android.</p>

<p>src code: <a href=""https://github.com/googlesamples/android-BluetoothLeGatt"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-BluetoothLeGatt</a></p>

<p>Any suggestion to make this work?
Thanks</p>
",5473324,,5473324,,2017-09-18 7:30:51,2017-12-14 11:48:21,Trouble Connecting Android App to Raspberry Pi 3 over BLE,<android><bluetooth><bluetooth-lowenergy><raspberry-pi3><android-ble>,1,0,,,
Android,36440019,1,,,2016,,1,199,"<p>I can't find information about face detection on preview in android.hardware.Camera2, would anybody help me with a complete example?</p>

<p>I saw some questions with camera2 examples in github but I can't understand them.</p>

<p>I used Camera2 sample from Google: <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Basic</a>.</p>

<p>I set face recognition mode to FULL.</p>

<pre><code>mPreviewRequestBuilder.set(CaptureRequest.STATISTICS_FACE_DETECT_MODE, CameraMetadata.STATISTICS_FACE_DETECT_MODE_FULL);
</code></pre>

<p>Also I checked <code>STATISTICS_INFO_MAX_FACE_COUNT</code> and <code>STATISTICS_INFO_AVAILABLE_FACE_DETECT_MODES</code>:</p>

<pre><code>int max_count = characteristics.get(
CameraCharacteristics.STATISTICS_INFO_MAX_FACE_COUNT);
int modes [] = characteristics.get(
CameraCharacteristics.STATISTICS_INFO_AVAILABLE_FACE_DETECT_MODES); 
 Output: maxCount : 5 , modes : [0, 2]
</code></pre>

<p>My CaptureCallback:</p>

<pre><code>private CameraCaptureSession.CaptureCallback mCaptureCallback = new CameraCaptureSession.CaptureCallback() {

private void process(CaptureResult result) {
            Integer mode = result.get(CaptureResult.STATISTICS_FACE_DETECT_MODE);
            Face [] faces = result.get(CaptureResult.STATISTICS_FACES);
            if(faces != null &amp;&amp; mode != null)
                Log.e(""tag"", ""faces : "" + faces.length + "" , mode : "" + mode ); 
}

@Override
public void onCaptureProgressed(CameraCaptureSession session, CaptureRequest request,
                                CaptureResult partialResult) {
    process(partialResult);
}

@Override
public void onCaptureCompleted(CameraCaptureSession session, CaptureRequest request,
                               TotalCaptureResult result) {
    process(result);
}     `
</code></pre>

<p>Output: faces : 0 , mode : 2</p>

<pre><code>public static final int STATISTICS_FACE_DETECT_MODE_FULL = 2; 
</code></pre>

<p>Faces length is constantly 0. Looks like it doesn't recognise a face properly or I missed something.</p>

<p>I know approach with FaceDetector. I just wanted to check how it works with new camera2 Face.</p>

<p>I need to detect face on preview of camera2!</p>
",6072423,,6083675,,2016-04-06 2:07:34,2018-10-17 17:52:49,I can't detect face with camera2,<java><android><camera2>,1,0,,,
Android,50423546,1,50675491,,2018,,1,168,"<h2>Background</h2>

<p>For some time, as a user, I've noticed that on some apps I can perform common operations on partial texts, as such:</p>

<p><a href=""https://i.stack.imgur.com/u3LCU.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/u3LCU.png"" alt=""enter image description here""></a></p>

<p>This is called ""smart text selection"" (video <a href=""https://youtu.be/Y2VF8tmLFHw?t=4831"" rel=""nofollow noreferrer""><strong>here</strong></a>), and it has being around from Android O, as shown <a href=""https://www.androidpolice.com/2017/05/17/android-o-feature-spotlight-smart-text-selection-automatically-highlights-right-words-double-tap/"" rel=""nofollow noreferrer""><strong>here</strong></a>.</p>

<h2>The problem</h2>

<p>Recently Google has shown how to make your app show the actions within itself (meaning inside its TextView). This is called ""Smart-Linkify"" and the video about it can be found <a href=""https://youtu.be/x-FcOX6ErdI?t=1887"" rel=""nofollow noreferrer""><strong>here</strong></a>. It shows there how to show the actions:</p>

<p><a href=""https://i.stack.imgur.com/jxXBQ.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/jxXBQ.png"" alt=""enter image description here""></a></p>

<p>What I can't find is how to do the opposite. Meaning how to offer my own actions to other apps.</p>

<p>For example, I could make a dialer app that can handle phone numbers by either dialing them or search the phone number.</p>

<h2>What I've found</h2>

<ol>
<li><p>In the past, I've asked about a very similar thing, of Android M, <a href=""https://stackoverflow.com/q/30518089/878126""><strong>here</strong></a>. There is also a nice tutorial about it, <a href=""https://medium.com/google-developers/custom-text-selection-actions-with-action-process-text-191f792d2999"" rel=""nofollow noreferrer""><strong>here</strong></a>. However, this is about a general text, without a type of when to trigger, meaning it will always be shown.</p></li>
<li><p>I've found very few mentions about this feature. The only sample I've found is  <a href=""https://github.com/googlesamples/android-TextLinkify"" rel=""nofollow noreferrer""><strong>here</strong></a>, but I can't build it for some reason, and it's not even about providing the actions. It's about how to show the actions.</p></li>
<li><p>I've found a Github repository of the Android dialer, <a href=""https://github.com/geniusgithub/AndroidDialer"" rel=""nofollow noreferrer""><strong>here</strong></a>. It also offers an action of ""call"" for phone numbers. After playing around with the manifest, I've found that this part is responsible for offering this action:</p>

<pre><code>  &lt;intent-filter &gt;
      &lt;action android:name=""android.intent.action.VIEW"" /&gt;
      &lt;action android:name=""android.intent.action.DIAL"" /&gt;
      &lt;category android:name=""android.intent.category.DEFAULT"" /&gt;
      &lt;category android:name=""android.intent.category.BROWSABLE"" /&gt;
      &lt;data android:scheme=""tel"" /&gt;
  &lt;/intent-filter&gt;
</code></pre>

<p>If I remove this part, I don't see the action of ""call"" for this app anymore (till I re-add it).</p>

<p>Sadly, if I change the ""DIAL"" action to ""SEARCH"", it doesn't show up.</p>

<p>The good news are that I can see the action if I add this part to a new project.</p></li>
</ol>

<h2>The questions</h2>

<ol>
<li>This is from Android O and above, right? What would happen on Android M or N, when I implement this feature? </li>
<li>How can I offer my own app actions to other apps? So far I've found how to do a general text handling, and dialing. But how can I provide others, such as search of phone number? </li>
<li>Can I customize the text that's shown for the actions? I've noticed that if I change the label for the ""PROCESS_TEXT"" action, it does change, but I can't see how to do it for other actions.</li>
<li>Can I customize what will trigger the action? For example a specific regular expression to match ? I've found only phone numbers so far. What are the various things I can use for this filtering?</li>
</ol>
",878126,,878126,,2018-06-03 14:55:28,2018-06-04 7:35:46,"How to offer actions of my app to other apps, via Smart-Linkify (AKA ""smart text selection"")?",<android><android-8.0-oreo><smart-linkify><smart-text-selection>,1,0,,,
Android,36530342,1,36530652,,2016,,1,807,"<p>I trying to do some ndk developing using Android Studio 2.0 with Gradle, I downloaded SDK and NDK, and set the paths in settings. But when I trying to play with google's NDK examples, the editor can't find ndk c/c++ header files(like ""jni.h"" etc.). Although I can compile the project.</p>

<p>I'm on Windows 10 platform, using Android Studio 2.0, I'm using the example from ""<a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow"">https://github.com/googlesamples/android-ndk</a>""</p>

<p>I have done NDK development using Android Studio before on Mac, and things work fine.</p>

<p>Anyone know what's happening?</p>
",4185853,,,,,2016-04-10 13:53:33,"android studio ndk develop, editor can't find ndk headers",<c++><android-studio><gradle><android-ndk><header>,1,0,,,
Android,27738431,1,,,2015,,1,278,"<p>I have been trying the Android MDM sample <a href=""https://github.com/googlesamples/android-BasicManagedProfile"" rel=""nofollow"">https://github.com/googlesamples/android-BasicManagedProfile</a> and there are couple of questions that I am not clear on,  </p>

<ol>
<li><p>Why is there a separate managed and unmanaged version for the profile-owner app? I am not sure how to design the application flow, like in my app assume I provide two functionalities, one is to browse some SharePoint sites and save files to disk and the second is to provision/manage apps which is controlled by the admin (from an admin console).<br>
Because there are two versions of my application once user enables the profile, user can click on any of the icons. If user clicks on the unmanaged version then I am not able to perform any app-provisioning related tasks and have to ask the user to launch the managed version to continue.
In the managed version if user wants to access any of his data, then I have to use the file-provider to access app's data which was downloaded via unmanaged version.<br>
So am not sure if the new API's requires the user to be forced to use the managed version only?</p></li>
<li><p>Is there a way to launch the managed version of the app from the unmanaged version of the same application which is a profile owner and vice-versa? </p></li>
</ol>
",987105,,,,,2015-02-05 6:15:50,Android L - EMM/MDM - Launching Managed app from Unmanaged app,<android><android-5.0-lollipop>,1,0,,,
Android,50709880,1,50877431,,2018,,1,286,"<p>I'm trying to integrate <a href=""https://developer.android.com/topic/libraries/architecture/navigation/navigation-implementing"" rel=""nofollow noreferrer"">these libraries</a> into my Android project to make a navigation controller. 
When I add in these two lines to my build.gradle - </p>

<p><code>implementation 'android.arch.navigation:navigation-fragment:1.0.0-alpha01'
 implementation 'android.arch.navigation:navigation-ui:1.0.0-alpha01'</code></p>

<p>It syncs ok, but in build I get this error:</p>

<p>ERROR: In  NavArgument, unable to find attribute type. </p>

<p>I was able to build <a href=""https://github.com/googlesamples/android-architecture-components"" rel=""nofollow noreferrer"">Google's sample project</a> that uses the relevant libraries without problems. </p>

<p>My project has:</p>

<ul>
<li>androidSupportLibrary 27.1.1</li>
<li>projectTargetVersion 27</li>
<li>projectCompileSdkVersion android-P</li>
<li>projectBuildToolsVersion 27.0.2</li>
<li>gradleVersion 3.0.1 </li>
<li>gradlePlugin 4.4</li>
</ul>

<p>I've already tried upgrading all these versions^, doing a clean build, restarting Android Studio, etc. </p>

<p>I also get some Java compiler errors.</p>

<p>Any thoughts on why this might happen?</p>
",8698088,,,,,2018-06-15 14:17:51,"ERROR: In <declare-styleable> NavArgument, unable to find attribute type",<java><android><android-gradle>,1,0,,,
Android,55083734,1,,,2019,,1,47,"<p>I want to add another lib into <a href=""https://github.com/googlesamples/android-ndk/issues/364"" rel=""nofollow noreferrer"">android-ndk hello-libs</a> example.</p>

<p>In <code>CMakeLists.txt</code>, I add:</p>

<pre><code># this is from the hello-libs sample code
add_library(lib_gperf SHARED IMPORTED)
set_target_properties(lib_gperf PROPERTIES IMPORTED_LOCATION
        ${distribution_DIR}/gperf/lib/${ANDROID_ABI}/libgperf.so)

########## I add this after the sample code:  ###########
add_library(lib_py SHARED IMPORTED)
set_target_properties(lib_py PROPERTIES IMPORTED_LOCATION
        ${distribution_DIR}/gperf/lib/${ANDROID_ABI}/libpython.so)
</code></pre>

<p>And this:</p>

<pre><code>target_link_libraries(
        hello-libs
        android
        lib_gperf

        #### this line ######
        lib_py

        log)
</code></pre>

<p>And copy <code>libpython.so</code> in the directory where <code>libgperf.so</code> located:</p>

<p><a href=""https://i.stack.imgur.com/sNxim.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/sNxim.png"" alt=""""></a></p>

<p>Also copy the python headers into the include directory:</p>

<p><a href=""https://i.stack.imgur.com/bEa0h.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/bEa0h.png"" alt=""enter image description here""></a></p>

<p>When I click the run button:</p>

<pre><code>java.lang.UnsatisfiedLinkError: dlopen failed: library ""/Users/finn/Downloads/hello-libs/app/src/main/cpp/../../../../distribution/gperf/lib/arm64-v8a/libpython.so"" not found
        at java.lang.Runtime.loadLibrary0(Runtime.java:1016)
        at java.lang.System.loadLibrary(System.java:1657)
        at com.example.hellolibs.MainActivity.&lt;clinit&gt;(MainActivity.java:36)
        at java.lang.Class.newInstance(Native Method)
        at android.app.Instrumentation.newActivity(Instrumentation.java:1174)
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2747)
        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2931)
        at android.app.ActivityThread.-wrap11(Unknown Source:0)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1620)
        at android.os.Handler.dispatchMessage(Handler.java:105)
        at android.os.Looper.loop(Looper.java:173)
        at android.app.ActivityThread.main(ActivityThread.java:6698)
        at java.lang.reflect.Method.invoke(Native Method)
        at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:240)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:782)
</code></pre>

<p>The path exists in my computer, but why the apk use my computer path, but not the android device path?</p>

<p>And I use the Android device file explorer, the lib is in the directory:</p>

<p><a href=""https://i.stack.imgur.com/aqQqq.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/aqQqq.png"" alt=""enter image description here""></a></p>

<p>Then how can I make the apk use the right path? </p>

<p>Or I miss something to add?</p>
",2322187,,8034839,,2019-03-11 5:02:17,2019-03-11 5:02:17,"java.lang.UnsatisfiedLinkError: dlopen failed: library ""/Users/..."" not found",<android><android-ndk><java-native-interface><shared-libraries>,1,0,,,
Android,55196032,1,,,2019,,1,61,"<p>I am trying to use WorkManager to populate the Room Database while creating the database. I am using dagger to initialize the database and its Dao's.
While seeding the database, it gives the following error.</p>

<pre><code>Could not instantiate *.*.*.SeedDatabaseWorker
    java.lang.NoSuchMethodException: &lt;init&gt; [class android.content.Context, class androidx.work.WorkerParameters]
        at java.lang.Class.getConstructor0(Class.java:2204)
        at java.lang.Class.getDeclaredConstructor(Class.java:2050)
        at androidx.work.WorkerFactory.createWorkerWithDefaultFallback(WorkerFactory.java:91)
        at androidx.work.impl.WorkerWrapper.runWorker(WorkerWrapper.java:233)
        at androidx.work.impl.WorkerWrapper.run(WorkerWrapper.java:127)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)
        at java.lang.Thread.run(Thread.java:761)
2019-03-16 16:22:29.135 18035-18051/*.* E/WM-WorkerWrapper: Could not create Worker *.*.*.SeedDatabaseWorker
</code></pre>

<p>Here's how i have setup the application.</p>

<p><strong>AppModule.Kt</strong></p>

<pre><code>@Provides
@Singleton
fun provideAppDatabase(context: Context): AppDatabase {
    return Room.databaseBuilder(
        context,
        AppDatabase::class.java,
        ""garden.db""
    )
        .addCallback(object : RoomDatabase.Callback() {
            override fun onCreate(db: SupportSQLiteDatabase) {
                super.onCreate(db)
                val request = OneTimeWorkRequestBuilder&lt;SeedDatabaseWorker&gt;().build()
                WorkManager.getInstance().enqueue(request)
            }
        })
        .build()
}

@Provides
@Singleton
fun providePlantDao(db: AppDatabase): PlantDao =
    db.plantDao()
</code></pre>

<p><strong>PlantDao</strong></p>

<pre><code>@Dao
interface PlantDao {
    @Query(""SELECT * FROM plants ORDER BY name"")
    fun getPlants(): LiveData&lt;List&lt;Plant&gt;&gt;
    @Insert(onConflict = OnConflictStrategy.REPLACE)
    fun insertAll(plants: List&lt;Plant&gt;)
}
</code></pre>

<p><strong>AppDatabase.kt</strong></p>

<pre><code>@Database(
        entities = [
            Plant::class
        ],
        version = 1,
        exportSchema = false
)
abstract class AppDatabase : RoomDatabase() {

    abstract fun plantDao(): PlantDao
}
</code></pre>

<p><strong>SeedDatabaseWorker.kt</strong></p>

<pre><code>class SeedDatabaseWorker @Inject constructor(
        context: Context,
        workerParameters: WorkerParameters
): CoroutineWorker(context, workerParameters) {


    private val TAG by lazy { SeedDatabaseWorker::class.java.simpleName }
    @Inject
    lateinit var database: AppDatabase
    override val coroutineContext = Dispatchers.IO

    override suspend fun doWork(): Result = coroutineScope {

        try {
            applicationContext.assets.open(""plants.json"").use { inputStream -&gt;
                JsonReader(inputStream.reader()).use { jsonReader -&gt;
                    val plantType = object : TypeToken&lt;List&lt;Plant&gt;&gt;() {}.type
                    val plantList: List&lt;Plant&gt; = Gson().fromJson(jsonReader, plantType)

                    database.plantDao().insertAll(plantList)

                    Result.success()
                }
            }
        } catch (ex: Exception) {
            Log.e(TAG, ""Error seeding database"", ex)
            Result.failure()
        }
    }
}
</code></pre>

<p>Can anyone help me to populate database using WorkManager?
Note: I am trying this <a href=""https://github.com/googlesamples/android-sunflower"" rel=""nofollow noreferrer"">google sample</a></p>
",6824931,,,,,2019-03-20 15:48:02,Pre-Populate Room Database using WorkManager and Dagger,<android><android-room><dagger><android-workmanager>,1,2,,,
Android,55764251,1,,,2019,,1,25,"<p>Trying to solve this problem about 4 days, help, please. 
I'm creating an app with rest API (retrofit), try to implement LiveDataCallAdapter from  Google samples
<a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample</a>, but retrofit doesn't call adapter method adapt for getting a response from the server. 
I'm edited only NetworkBoundResourse (for working without DB)
Trying to put breakpoints, after I start repo (login), LiveDataCallAdapter fun adapt (where  call.enequeue don't want start) debugging don't call</p>

<p>Here is my piece of code, thx</p>

<p>Providing my service instance</p>

<pre><code>@Singleton
   @Provides
   fun provideRetrofit(): BrizSmartTVService {
       return Retrofit.Builder()
           .baseUrl(baseUrl)
           .addConverterFactory(GsonConverterFactory.create())
           .addCallAdapterFactory(LiveDataCallAdapterFactory())
           .build()
           .create(BrizSmartTVService::class.java)
   }
</code></pre>

<p>There is my LiveDataCallAdapterFactory and LiveDataCallAdapter</p>

<pre><code>class LiveDataCallAdapterFactory : Factory() {
    override fun get(
        returnType: Type,
        annotations: Array&lt;Annotation&gt;,
        retrofit: Retrofit
    ): CallAdapter&lt;*, *&gt;? {
        if (getRawType(returnType) != LiveData::class.java) {
            return null
        }
        val observableType = getParameterUpperBound(0, returnType as ParameterizedType)
        val rawObservableType = getRawType(observableType)
        if (rawObservableType != ApiResponse::class.java) {
            throw IllegalArgumentException(""type must be a resource"")
        }
        if (observableType !is ParameterizedType) {
            throw IllegalArgumentException(""resource must be parameterized"")
        }
        val bodyType = getParameterUpperBound(0, observableType)
        return LiveDataCallAdapter&lt;Any&gt;(bodyType)
    }
}
</code></pre>

<pre><code>
class LiveDataCallAdapter&lt;R&gt;(private val responseType: Type) :
    CallAdapter&lt;R, LiveData&lt;ApiResponse&lt;R&gt;&gt;&gt; {

    override fun responseType() = responseType

    override fun adapt(call: Call&lt;R&gt;): LiveData&lt;ApiResponse&lt;R&gt;&gt; {
        return object : LiveData&lt;ApiResponse&lt;R&gt;&gt;() {
            private var started = AtomicBoolean(false)
            override fun onActive() {
                super.onActive()
                if (started.compareAndSet(false, true)) {
                    Log.d(""TAG"", "": onActive Started "");
                    call.enqueue(object : Callback&lt;R&gt; {
                        override fun onResponse(call: Call&lt;R&gt;, response: Response&lt;R&gt;) {
                            Log.d(""TAG"", "":    $response"");
                            postValue(ApiResponse.create(response))
                        }

                        override fun onFailure(call: Call&lt;R&gt;, throwable: Throwable) {
                            Log.d(""TAG"", "":    ${throwable.localizedMessage}"");
                            postValue(ApiResponse.create(throwable))
                        }
                    })
                }
            }
        }
    }
}
</code></pre>

<p>There is my NetworkBoundResourse (work only with Network)</p>

<pre><code>
abstract class NetworkBoundResource&lt;RequestType&gt; {

    private val result = MediatorLiveData&lt;Resource&lt;RequestType&gt;&gt;()

    init {
        setValue(Resource.loading(null))
        fetchFromNetwork()
    }

    @MainThread
    private fun setValue(newValue: Resource&lt;RequestType&gt;) {
        if (result.value != newValue) {
            result.value = newValue
        }
    }

    private fun fetchFromNetwork() {
        val apiResponse = createCall()
        result.addSource(apiResponse) { response -&gt;
            result.removeSource(apiResponse)

            when (response) {
                is ApiSuccessResponse -&gt; {
                    setValue(Resource.success(processResponse(response)))
                }

                is ApiErrorResponse -&gt; {
                    onFetchFailed()
                    setValue(Resource.error(response.errorMessage, null))

                }
            }
        }
    }

    protected fun onFetchFailed() {
    }

    fun asLiveData() = result as LiveData&lt;Resource&lt;RequestType&gt;&gt;

    @WorkerThread
    protected open fun processResponse(response: ApiSuccessResponse&lt;RequestType&gt;) = response.body

    @MainThread
    protected abstract fun createCall(): LiveData&lt;ApiResponse&lt;RequestType&gt;&gt;
}
</code></pre>

<p>My Repo class </p>

<pre><code>
@Singleton
class AuthApiRepo @Inject constructor(
    val apiService: BrizSmartTVService
) {

    fun authLoginPass(login: String, password: String): LiveData&lt;Resource&lt;AuthResponse&gt;&gt; {
        return object : NetworkBoundResource&lt;AuthResponse&gt;() {

            override fun createCall(): LiveData&lt;ApiResponse&lt;AuthResponse&gt;&gt; {
                val authLogPassBody = AuthLogPassBody(login,password,""password"")
                Log.d(""TAG"", "":   $authLogPassBody"");
                return apiService.authLoginPass(authLogPassBody)
            }

        }.asLiveData()
    }
}
</code></pre>

<p>And my AuthResponse Class </p>

<pre><code>
class AuthResponse {
    @SerializedName(""token_type"")
    var tokenType: String? = null
    @SerializedName(""access_token"")
    var accessToken: String? = null
    @SerializedName(""refresh_token"")
    var refreshToken: String? = null
    @SerializedName(""user_id"")
    var userId: String? = null
    @SerializedName(""expires_in"")
    var expiresIn: Long = 0
    @SerializedName(""portal_url"")
    var portalUrl: String? = null
}
</code></pre>

<p>My ViewModel class from where i start calling </p>

<pre><code>
class AuthViewModel @Inject constructor(private val authApiRepo: AuthApiRepo) : ViewModel() {

    private var _isSigned = MutableLiveData&lt;Boolean&gt;()
    val isSigned: LiveData&lt;Boolean&gt;
        get() = _isSigned


    fun signIn(login: String, password: String) {
        authApiRepo.authLoginPass(login, password)
        val authRespons =  authApiRepo.authLoginPass(login, password)
        Log.d(""TAG"", "":   "" +   authRespons.value.toString());
        //here will by always data null and status LOADING
    }

    override fun onCleared() {
        super.onCleared()
    }
}
</code></pre>
",8501795,,11181035,,2019-04-19 17:45:12,2019-04-20 18:29:04,Retrofit LiveDataCallAdapter doesn't call function adapt (call),<android><kotlin><retrofit><android-livedata>,1,2,,,
Android,39464909,1,39471016,,2016,,1,1065,"<p>I am using directory selection as described in this <a href=""https://github.com/googlesamples/android-DirectorySelection"" rel=""nofollow"">Google Sample</a>. It does provide file name and mime type of the children of the selected directory. I can get Document ID of the file too, if I use <code>COLUMN_DOCUMENT_ID</code> on the Cursor Query. 
I am interested in the file URI of the children instead. When I use <code>ACTION_OPEN_DOCUMENT</code> instead of <code>ACTION_OPEN_DOCUMENT_TREE</code>, I get the child uri easily which is just obtained from adding a <code>%2Fchildfile.extention</code> (%2F is just a forward slash). So I tried to get child file uri using the following code - </p>

<pre><code>uri = Uri.parse(docUri.toString()+""%2F""+fileName);
</code></pre>

<p>I got the file name, however when I run exists() method on it (By converting it into DocumentFile), it returns false. That means, either I don't have the permission of the file or it's not the correct way to get children uri.  </p>

<p>Am I missing something here or is there any other way I can select a folder and get file uri of all of it's children easily.</p>

<p>PS: I am currently checking it in Marshamallow.</p>
",1079901,,,,,2016-09-13 13:12:14,Get File Uri from Document Id in Storage Access Framework,<android><android-5.0-lollipop><android-6.0-marshmallow><android-file><storage-access-framework>,1,0,,,
Android,44905858,1,,,2017,,1,474,"<p>I'm trying to work with Camera2 API on emulator but unfortunately i encountered a problem while implementing it. </p>

<p>I'm using the <strong>Camera2Basic</strong> provided by google from this <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">link</a> and i tried it on real device and it works fine.</p>

<p><strong>Real devices are :</strong> Huawei P9 Lite API 24 , Samsung Galaxy S5 API 23.</p>

<p><strong>Genymotion Emulators are :</strong> Google Nexus 4,5,6 API 21,22,24 , Samsung Galaxy S6,S7 API 23,25</p>

<p>The problem now is when launching the App on emulator it shows the camera (i'm working with a webcam) but when i click on the button picture normally it shows on a toast that the picture is saved in a certain path. But it doesn't , that means that the picture wasn't taken , it only do that on real devices.</p>

<p>I've noticed while building the project the logcat shows this :</p>

<pre><code>07-04 07:56:06.252 1694-1694/? E/memtrack: Couldn't load memtrack module (No 
such file or directory)
07-04 07:56:06.252 1694-1694/? E/android.os.Debug: failed to load memtrack 
module: -2
07-04 07:56:07.360 1709-1709/? E/memtrack: Couldn't load memtrack module (No 
such file or directory)
07-04 07:56:07.360 1709-1709/? E/android.os.Debug: failed to load memtrack 
module: -2
07-04 07:56:34.492 1723-1723/? E/memtrack: Couldn't load memtrack module (No 
such file or directory)
07-04 07:56:34.492 1723-1723/? E/android.os.Debug: failed to load memtrack 
module: -2
07-04 07:56:35.220 1816-1816/? E/cutils-trace: Error opening trace file: 
Permission denied (13)
07-04 07:56:37.443 1863-1863/? E/memtrack: Couldn't load memtrack module (No 
such file or directory)
07-04 07:56:37.444 1863-1863/? E/android.os.Debug: failed to load memtrack 
module: -2
07-04 07:56:38.734 1872-1909/com.example.android.camera2basic E/libEGL: 
load_driver(/system/lib/egl/libGLES_emulation.so): dlopen failed: library 
""/system/lib/egl/libGLES_emulation.so"" not found
07-04 07:56:39.621 1872-1909/com.example.android.camera2basic 
E/EGL_emulation: tid 1909: eglSurfaceAttrib(1174): error 0x3009 
(EGL_BAD_MATCH)
07-04 07:56:40.775 635-727/system_process E/TaskPersister: File error 
accessing recents directory (directory doesn't exist?).
07-04 07:56:44.003 1935-1981/com.android.packageinstaller E/libEGL: 
load_driver(/system/lib/egl/libGLES_emulation.so): dlopen failed: library 
""/system/lib/egl/libGLES_emulation.so"" not found
07-04 07:56:44.597 1935-1981/com.android.packageinstaller E/EGL_emulation: 
tid 1981: eglSurfaceAttrib(1174): error 0x3009 (EGL_BAD_MATCH)
</code></pre>

<p>But when i click on the button <strong>picture</strong> it shows nothing on the logcat. This is the <strong>AndroidManifest.xml</strong> file :</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;

&lt;manifest xmlns:android=""http://schemas.android.com/apk/res/android""
package=""com.example.android.camera2basic""&gt;

&lt;uses-permission android:name=""android.permission.CAMERA"" /&gt;

&lt;uses-feature android:name=""android.hardware.camera"" /&gt;
&lt;uses-feature android:name=""android.hardware.camera.autofocus"" /&gt;
&lt;uses-permission android:name=""android.permission.READ_EXTERNAL_STORAGE"" /&gt;
&lt;uses-permission android:name=""android.permission.WRITE_EXTERNAL_STORAGE"" /&gt;

&lt;application android:allowBackup=""true""
    android:label=""@string/app_name""
    android:icon=""@drawable/ic_launcher""
    android:theme=""@style/MaterialTheme""&gt;

    &lt;activity android:name="".CameraActivity""
              android:label=""@string/app_name""&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=""android.intent.action.MAIN"" /&gt;
            &lt;category android:name=""android.intent.category.LAUNCHER"" /&gt;
        &lt;/intent-filter&gt;
    &lt;/activity&gt;
&lt;/application&gt;
</code></pre>

<p></p>

<p>i saw many questions with the ""Couldn't load memtrack module (No 
such file or directory)"" but i couldn't realy relate to them. Can anyone help ? Thank you in advance.</p>

<p><strong>P.S :</strong> to make the Camera2 API work on emulator is a must for my project that's why i'm asking this. Thank you for understanding</p>
",3816569,,3816569,,2017-07-04 12:59:36,2018-08-15 11:58:52,Camera2 API doesn't work on emualtor,<android><android-emulator><android-camera>,1,0,,,
Android,49417910,1,49418792,,2018,,1,41,"<p>I started with Googles <a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationUpdatesPendingIntent"" rel=""nofollow noreferrer"">LocationUpdatesPendingIntent</a> example.
I've moved the location stuff from the Main Activity to the onBoot broadcast receiver as I need location updates to start straight away when the device boots. This works perfectly and provides a notification in the status bar.</p>

<p>But how do I go about turning the location updates on and off from an Activity?</p>

<p>This is for polling vehicle locations.</p>

<p>This is my BroadcastReceiver:</p>

<pre><code>public class StartupComplete1 extends BroadcastReceiver {

private static final long UPDATE_INTERVAL = 10000; // Every 10 seconds.
private static final long FASTEST_UPDATE_INTERVAL = 5000; // Every 5 seconds
private static final long MAX_WAIT_TIME = UPDATE_INTERVAL * 2; // Every 20 seconds.
private LocationRequest mLocationRequest;
private FusedLocationProviderClient mFusedLocationClient;

@Override
public void onReceive(Context context, Intent intent) {

    if (intent.getAction().equalsIgnoreCase(Intent.ACTION_BOOT_COMPLETED)) {

        mFusedLocationClient = LocationServices.getFusedLocationProviderClient(context);
        createLocationRequest();

        try {
            mFusedLocationClient.requestLocationUpdates(mLocationRequest, getPendingIntent(context));
        } catch (SecurityException e) {
            Toast.makeText(context, ""Error - Cant start location updates"", Toast.LENGTH_LONG).show();
            e.printStackTrace();
        }
    }
}

private PendingIntent getPendingIntent(Context context) {
    Intent intent = new Intent(context, LocationUpdatesBroadcastReceiver.class);
    intent.setAction(LocationUpdatesBroadcastReceiver.ACTION_PROCESS_UPDATES);
    return PendingIntent.getBroadcast(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
}

private void createLocationRequest() {
    mLocationRequest = new LocationRequest();
    mLocationRequest.setInterval(UPDATE_INTERVAL);
    mLocationRequest.setFastestInterval(FASTEST_UPDATE_INTERVAL);
    mLocationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);
    mLocationRequest.setMaxWaitTime(MAX_WAIT_TIME);
}
</code></pre>
",1306140,,,,,2018-03-22 0:45:50,Location Updates on Boot - turn on and off in activity,<android><location>,1,0,,,
Android,41518374,1,,,2017,,1,458,"<p>I am learning camera 2 API using google sample code <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">android-Camera2Basic</a> in that i have changed the width and height of <code>AutoFitTextureView</code> to 200 dp and when i capture the picture then i seeing that picture has more focused area than the preview size.</p>

<p>So How can i get the image as in the preview?  </p>
",1007302,,,,,2017-03-22 9:13:52,How can i get the image as in the preview size of TextureView in camera 2,<android><android-camera2>,1,1,,,
Android,49588393,1,49606378,,2018,,1,93,"<p>I am using Google Play Developer API v2 to <strong>programmatically upload my beta apks</strong> on the playstore and it's working fine :-)</p>

<p>Now, I would like to <strong>programmatically</strong> 'promote' the beta apks from the 'beta' track to the 'production' track (so I do not need to do it manually on Google Dev Console anymore. My app suite is composed of 10 apps.. this takes time) </p>

<p>I am trying, but I do not clearly understand how I am suppose to do without reuploading the apks.<br>
What I want to achieve is modifying the previously uploaded apks and just change the <a href=""https://developers.google.com/resources/api-libraries/documentation/androidpublisher/v2/java/latest/com/google/api/services/androidpublisher/model/Track.html"" rel=""nofollow noreferrer"">Track</a>, from 'beta' to 'production'.</p>

<p>Below is the code I wrote, which does:</p>

<ul>
<li>Find all tracks</li>
<li>Locate the 'beta' track</li>
<li>find the corresponding apk</li>
<li>Change (<strong><em>but not the right way</em></strong>) the apk track from 'beta' to 'production'</li>
<li>commit changes -> exception below:</li>
</ul>

<blockquote>
<pre><code>SEVERE: Exception was thrown while updating listing
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
{
  ""code"" : 403,
  ""errors"" : [ {
    ""domain"" : ""androidpublisher"",
    ""message"" : ""Testing-track (alpha/beta) APK with version code 1522428584 appears in another track"",
    ""reason"" : ""testingTrackApkInMultipleTracks""
  } ],
  ""message"" : ""Testing-track (alpha/beta) APK with version code 1522428584 appears in another track""
}
  at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
  at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:113)
  at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:40)
  at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$1.interceptResponse(AbstractGoogleClientRequest.java:321)
  at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1065)
  at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:419)
  at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:352)
  at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:469)
  at com.elementique.tools.publish.elementique.ElementiquePromoteBetaApkToProduction.main(ElementiquePromoteBetaApkToProduction.java:74)
</code></pre>
</blockquote>

<p>According to the exception, the code I wrote does not modify an existing apk, but, instead, try to create a new one with the very same id as the existing beta track.<br>
I do understand this is wrong, but can't figure out how to do it right..</p>

<p>Here is the code: can someone explain me how to do it the right way?</p>

<p>Thanks.</p>

<pre><code>package com.elementique.tools.publish.elementique;

import com.elementique.tools.publish.AndroidPublisherHelper;
import com.google.api.services.androidpublisher.AndroidPublisher;
import com.google.api.services.androidpublisher.AndroidPublisher.Edits;
import com.google.api.services.androidpublisher.model.*;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;

import java.io.IOException;
import java.security.GeneralSecurityException;
import java.util.ArrayList;
import java.util.List;

public class ElementiquePromoteBetaApkToProduction {

    private static final Log log = LogFactory.getLog(ElementiquePromoteBetaApkToProduction.class);

    private static final String PACKAGE_NAME = ""com.elementique.home"";

    public static final String TRACK_BETA = ""beta"";
    public static final String TRACK_PRODUCTION = ""production"";

    public static void main(String[] args) {
        try {
            // Create the API androidPublisher service.
            final AndroidPublisher androidPublisher = AndroidPublisherHelper.init(""Elementique"", null);
            final Edits edits = androidPublisher.edits();

            // Create a new edit to make changes.
            Edits.Insert insertEdit = edits.insert(PACKAGE_NAME, null);
            AppEdit insertAppEdit = insertEdit.execute();

            // search for 'beta' apk(s) in the 'beta' track..
            // first list all tracks..
            TracksListResponse trackListResponse = edits.tracks().list(PACKAGE_NAME, insertAppEdit.getId()).execute();
            for (Track track : trackListResponse.getTracks()) {
                // filter for beta track..
                if (TRACK_BETA.equals(track.getTrack())) {
                    // beta track found...
                    System.out.println(""Beta Track found!\n"" + track.toPrettyString());
                    // in my case, I am supposed to have exactly one 'beta' apk
                    List&lt;Integer&gt; betaApkVersionCodes = track.getVersionCodes();
                    if (betaApkVersionCodes.size() == 1) {
                        // one apk: OK, that's the 'beta' apk I want to promote to 'production'
                        Integer betaApkVersionCode = betaApkVersionCodes.get(0);

                        // now search for the given apk among all existing apks (is it the good way to proceed..??)
                        ApksListResponse apksListResponse = edits.apks().list(PACKAGE_NAME, insertAppEdit.getId()).execute();
                        for (Apk apk : apksListResponse.getApks()) {
                            // is it our 'beta' apk?
                            if (betaApkVersionCode.equals(apk.getVersionCode())) {
                                System.out.println(""Beta apk found!\n"" + apk.toPrettyString());
                                // OK, we got it.
                                // now trying to change the 'track' of this apk from 'beta' to 'production'
                                // and this is not the way to proceed...
                                List&lt;Integer&gt; apkVersionCodes = new ArrayList&lt;&gt;();
                                apkVersionCodes.add(apk.getVersionCode());
                                Edits.Tracks.Update updateTrackRequest =
                                        edits.tracks().update(
                                                PACKAGE_NAME,
                                                insertAppEdit.getId(),
                                                TRACK_PRODUCTION,
                                                new Track().setVersionCodes(apkVersionCodes));
                                Track updatedTrack = updateTrackRequest.execute();
                                log.info(String.format(""Track %s has been updated."", updatedTrack.getTrack()));

                                // Commit changes for edit.
                                Edits.Commit commitRequest = edits.commit(PACKAGE_NAME, insertAppEdit.getId());
                                AppEdit commitAppEdit = commitRequest.execute();
                                log.info(PACKAGE_NAME + "" beta apk moved to production ("" + commitAppEdit.getId());
                                System.exit(0);
                            }
                        }
                    }
                }
            }
        } catch (IOException | GeneralSecurityException ex) {
            log.error(""Exception was thrown while updating listing"", ex);
        }
    }
}
</code></pre>

<p>(Don't tell me about parenthesis hell, I just wrote this code like that to make a simple test ;-)</p>

<p>Notes:</p>

<ul>
<li>Original Google Smaple project is <a href=""https://github.com/googlesamples/android-play-publisher-api/tree/master/v2/java/src/com/google/play/developerapi/samples"" rel=""nofollow noreferrer"">here</a> and 'Google Play Developer API V2' maven artifact <a href=""https://mvnrepository.com/artifact/com.google.apis/google-api-services-androidpublisher"" rel=""nofollow noreferrer"">here</a></li>
<li>Some additional info: javadoc <a href=""https://developers.google.com/resources/api-libraries/documentation/androidpublisher/v2/java/latest/index.html?com/google/api/services/androidpublisher/AndroidPublisher.html"" rel=""nofollow noreferrer"">here</a> and some additional (non java) info <a href=""https://developers.google.com/android-publisher/api-ref/"" rel=""nofollow noreferrer"">here</a><br></li>
</ul>
",660350,,660350,,2018-04-01 9:26:23,2018-04-02 12:43:07,Promoting 'beta' apk to 'production' programmatically,<android><google-play-developer-api>,1,1,,,
Android,39954501,1,39954735,,2016,,1,281,"<p>I follow this <a href=""https://github.com/googlesamples/android-play-places/tree/master/PlaceCompleteAdapter"" rel=""nofollow"">example</a> to make places aotu complete adapter. In example whole place-services library is imported and its seems to be excessive.
I imported</p>

<pre><code>  compile 'com.google.android.gms:play-services-location:9.6.1'
  compile 'com.google.android.gms:play-services-maps:9.6.1'
</code></pre>

<p>However <code>com.google.android.gms.location.places.AutocompleteFilter</code> is not present in any of the above.</p>
",1551603,,,,,2016-10-10 9:02:01,What is minimal dependency import for location.places?,<android><google-play-services>,1,0,,,
Android,41732005,1,41732163,,2017,,1,818,"<p>I'm trying to modify Google's <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">camera2Basic</a> example code. I removed the <code>&lt;FrameLayout/&gt;</code> containing the ""Picture"" and ""Info"" button in an attempt to make the <code>&lt;TextureView/&gt;</code> full screen. However, the preview does not fill the entire screen, there remains a black bar below it. I believe this has something to do with the <code>AutoFitTextureView</code> that it ships with but since they haven't provided any documentation on how it works I am unable to make modifications to it.</p>
",896112,,,,,2017-01-19 1:13:56,Full screen preview camera2Basic Example Project,<android><android-layout><android-camera2>,1,0,,,
Android,51393867,1,,,2018,,1,639,"<p>I'm trying to use AndroidViewModel rather than the regular ViewModel, because AndroidViewModel contains an application reference that I need for binding services.</p>

<p>My question is, how do I supply the application parameter to my ViewModelFactory?</p>

<p>At the moment I'm casting it from the ApplicationContext that the ViewModelFactory injector util already has available to it, but I've read that's dangerous because a cast of ApplicationContext <a href=""https://stackoverflow.com/questions/5018545/getapplication-vs-getapplicationcontext"">may not always return the application</a>.</p>

<p>I'm just learning Android, following along the <a href=""https://github.com/googlesamples/android-sunflower"" rel=""nofollow noreferrer"">Sunflower example</a>, so the answer is probably very simple. I just don't know it . . . yet. (Hoping you can help).</p>

<p>Here is how I am doing it currently, which as you may notice is closely based on how Google does it in the Sunflower example:</p>

<p><strong>Fragment using the AndroidViewModel</strong></p>

<pre><code>class GalleryFragment : Fragment() {

private lateinit var viewModel: GalleryViewModel
private var memoList: List&lt;Memo&gt; = emptyList()

override fun onCreateView(
        inflater: LayoutInflater,
        container: ViewGroup?,
        savedInstanceState: Bundle?
): View? {
    val view = inflater.inflate(R.layout.gallery_fragment, container, false)
    val context = context ?: return view
    val factory = InjectorUtils.provideGalleryViewModelFactory(context)
    viewModel = ViewModelProviders.of(this, factory).get(GalleryViewModel::class.java)
    ... 
</code></pre>

<p><strong>Injector Util</strong></p>

<pre><code>object InjectorUtils {

fun provideMemoViewModelFactory(context: Context, memoId: Long): MemoViewModelFactory {
    val application = context.applicationContext as Application //this could be dangerous
    val repository = getMemoRepository(context)
    return MemoViewModelFactory(application, repository, memoId)
   }
}
</code></pre>

<p><strong>ViewModelFactory</strong></p>

<pre><code>class MemoViewModelFactory(
    private val application: Application,
    private val memoRepository: MemoRepository,
    private val memoId: Long
 ) : ViewModelProvider.NewInstanceFactory() {

@Suppress(""UNCHECKED_CAST"")
override fun &lt;T : ViewModel&gt; create(modelClass: Class&lt;T&gt;): T {
    return MemoViewModel( application, memoRepository, memoId) as T
  }
}
</code></pre>

<p><strong>ViewModel</strong></p>

<pre><code>class MemoViewModel(
    application: Application,
    memoRepository: MemoRepository,
    private val memoId: Long
) : AndroidViewModel(application) {
...
</code></pre>

<p>My concern is inside the InjectorUtil, where I obtain a reference to the application by casting the applicationContext. If I proceed down that path am I heading for trouble down the line? Is there somewhere else I should be adding the application reference, where I can access it directly rather than through a cast of applicationContext?</p>

<p>thanks</p>

<p>John</p>
",3947344,,,,,2018-07-18 13:22:09,What is the correct way to create a ViewModelFactory for an AndroidViewModel,<android><dependency-injection><kotlin><android-viewmodel>,1,0,,,
Android,51387282,1,,,2018,,1,303,"<p>I'm using the <a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive_v2/shared-module/src/main/java/com/example/billingmodule/billing/BillingManager.java"" rel=""nofollow noreferrer"">Billing Manager</a> provided in googlesamples to handle in app purchases in my android app. Everything seems to work until I click buy and am greeted with the error message:</p>

<p>The Transaction could not be completed.</p>

<p>From the logs I can see that I am getting a response code 6 (""Fatal error during the API action"") back from the server. Additionally I can see two suspicious errors during the purchasing process:</p>

<pre><code>E/DatabaseUtils: Writing exception to parcel
java.lang.SecurityException: Permission Denial: get/set setting for user asks to run as user -2 but is calling from user 0; this requires android.permission.INTERACT_ACROSS_USERS_FULL
    at com.android.server.am.ActivityManagerService.handleIncomingUser(ActivityManagerService.java:15168)
    at android.app.ActivityManager.handleIncomingUser(ActivityManager.java:2492)
    at com.android.providers.settings.SettingsProvider.call(SettingsProvider.java:688)
    at android.content.ContentProvider$Transport.call(ContentProvider.java:325)
    at android.content.ContentProviderNative.onTransact(ContentProviderNative.java:275)
    at android.os.Binder.execTransact(Binder.java:404)
    at dalvik.system.NativeStart.run(Native Method)

E/Parcel: Class not found when unmarshalling: com.google.android.finsky.billing.common.PurchaseParams
java.lang.ClassNotFoundException: com.google.android.finsky.billing.common.PurchaseParams
    at java.lang.Class.classForName(Native Method)
    at java.lang.Class.forName(Class.java:251)
    at java.lang.Class.forName(Class.java:216)
    at android.os.Parcel.readParcelableCreator(Parcel.java:2140)
    at android.os.Parcel.readParcelable(Parcel.java:2104)
    at android.os.Parcel.readValue(Parcel.java:2020)
    at android.os.Parcel.readArrayMapInternal(Parcel.java:2321)
    at android.os.Bundle.unparcel(Bundle.java:249)
    at android.os.Bundle.getString(Bundle.java:1118)
    at android.content.Intent.getStringExtra(Intent.java:5151)
    at com.android.server.am.ActivityStackSupervisor.startActivityLocked(ActivityStackSupervisor.java:1468)
    at com.android.server.am.ActivityStackSupervisor.startActivityMayWait(ActivityStackSupervisor.java:1063)
    at com.android.server.am.ActivityManagerService.startActivityInPackage(ActivityManagerService.java:4385)
    at com.android.server.am.PendingIntentRecord.sendInner(PendingIntentRecord.java:254)
    at com.android.server.am.ActivityManagerService.startActivityIntentSender(ActivityManagerService.java:4266)
    at android.app.ActivityManagerNative.onTransact(ActivityManagerNative.java:260)
    at com.android.server.am.ActivityManagerService.onTransact(ActivityManagerService.java:2712)
    at android.os.Binder.execTransact(Binder.java:404)
    at dalvik.system.NativeStart.run(Native Method)
 Caused by: java.lang.NoClassDefFoundError: com/google/android/finsky/billing/common/PurchaseParams
    at java.lang.Class.classForName(Native Method)
    at java.lang.Class.forName(Class.java:251)
    at java.lang.Class.forName(Class.java:216)
    at android.os.Parcel.readParcelableCreator(Parcel.java:2140)
    at android.os.Parcel.readParcelable(Parcel.java:2104)
    at android.os.Parcel.readValue(Parcel.java:2020)
    at android.os.Parcel.readArrayMapInternal(Parcel.java:2321)
    at android.os.Bundle.unparcel(Bundle.java:249)
    at android.os.Bundle.getString(Bundle.java:1118)
    at android.content.Intent.getStringExtra(Intent.java:5151)
    at com.android.server.am.ActivityStackSupervisor.startActivityLocked(ActivityStackSupervisor.java:1468)
    at com.android.server.am.ActivityStackSupervisor.startActivityMayWait(ActivityStackSupervisor.java:1063)
    at com.android.server.am.ActivityManagerService.startActivityInPackage(ActivityManagerService.java:4385)
    at com.android.server.am.PendingIntentRecord.sendInner(PendingIntentRecord.java:254)
    at com.android.server.am.ActivityManagerService.startActivityIntentSender(ActivityManagerService.java:4266)
    at android.app.ActivityManagerNative.onTransact(ActivityManagerNative.java:260)
    at com.android.server.am.ActivityManagerService.onTransact(ActivityManagerService.java:2712)
    at android.os.Binder.execTransact(Binder.java:404)
    at dalvik.system.NativeStart.run(Native Method)
 Caused by: java.lang.ClassNotFoundException: Didn't find class ""com.google.android.finsky.billing.common.PurchaseParams"" on path: DexPathList[[directory "".""],nativeLibraryDirectories=[/vendor/lib, /system/lib]]
    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:67)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:497)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:457)
    at java.lang.Class.classForName(Native Method)
    at java.lang.Class.forName(Class.java:251)
    at java.lang.Class.forName(Class.java:216)
    at android.os.Parcel.readParcelableCreator(Parcel.java:2140)
    at android.os.Parcel.readParcelable(Parcel.java:2104)
    at android.os.Parcel.readValue(Parcel.java:2020)
    at android.os.Parcel.readArrayMapInternal(Parcel.java:2321)
    at android.os.Bundle.unparcel(Bundle.java:249)
    at android.os.Bundle.getString(Bundle.java:1118)
    at android.content.Intent.getStringExtra(Intent.java:5151)
    at com.android.server.am.ActivityStackSupervisor.startActivityLocked(ActivityStackSupervisor.java:1468)
    at com.android.server.am.ActivityStackSupervisor.startActivityMayWait(ActivityStackSupervisor.java:1063)
    at com.android.server.am.ActivityManagerService.startActivityInPackage(ActivityManagerService.java:4385)
    at com.android.server.am.PendingIntentRecord.sendInner(PendingIntentRecord.java:254)
    at com.android.server.am.ActivityManagerService.startActivityIntentSender(ActivityManagerService.java:4266)
    at android.app.ActivityManagerNative.onTransact(ActivityManagerNative.java:260)
    at com.android.server.am.ActivityManagerService.onTransact(ActivityManagerService.java:2712)
    at android.os.Binder.execTransact(Binder.java:404)
    at dalvik.system.NativeStart.run(Native Method)
</code></pre>

<p>However I am not sure that there is a connection between the errors and the failing of the purchase.
Any idea where I went wrong?</p>
",6767268,,,,,2018-07-18 11:04:46,Android In App billing fails with repsonse code 6,<android><in-app-purchase><google-play-services><in-app-billing>,1,0,,,
Android,41982214,1,41982309,,2017,,1,587,"<p>I'm currently working with <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">android-Camera2Basic</a>, this sample is designed to take pictures with back camera, and it work's fine but when I changed this <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java#L501"" rel=""nofollow noreferrer"">line</a> to this : </p>

<pre><code>if (facing != null &amp;&amp; facing != CameraCharacteristics.LENS_FACING_FRONT)
</code></pre>

<p>the preview is showing the facing camera as expected but it does't take pictures when I click picture button.</p>

<p>Why is this happening did I need to change something else ?  </p>
",6325994,,,,,2017-02-01 14:33:57,Android Camera2 : can't take picture with front camera,<android><android-camera>,1,0,,,
Android,33391042,1,33391235,,2015,,1,940,"<p>I have to give the user an option to capture video in my app but I not want the preview appear (or take a space) when the video is not recording.</p>

<p>Therefore I build a floating preview using <code>FragmentTransaction</code> based on <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow"">camera2video</a> google example.</p>

<p>my class variables are:</p>

<pre><code>FragmentTransaction fm = null;
Camera2VideoFragment camera2VideoFragment;
</code></pre>

<p>And I create an instance and initialize the camera in <code>OnCreate</code> method:</p>

<pre><code>camera2VideoFragment = Camera2VideoFragment.newInstance();
if (null == savedInstanceState) {
    fm = getFragmentManager().beginTransaction()
            .replace(R.id.container, camera2VideoFragment);
}
</code></pre>

<p>I want to visibile and hide the preview(fragment) using the menu methods (onOptionsItemSelected):</p>

<pre><code>case R.id.action_captureScreen:
    item.setChecked(!item.isChecked());
    if (item.isChecked())
    {
        fm.commit(); // show the preview - working
        // camera2VideoFragment.captureVideo();  // start capture video
    }
    else
    {
        //camera2VideoFragment.captureVideo();  // stop the video and save to file
        fm.detach(camera2VideoFragment);        // hide the preview - NOT WORKING
    }
</code></pre>

<p>I also tried <code>fm.hide(camera2VideoFragment)</code> but it's not works too.</p>

<p>So, the question is how can I hide\show the preview ?
Thanks!</p>
",1281081,,,,,2015-10-28 12:34:38,How to cancel FragmentTransaction commit,<android><fragment><fragmenttransaction>,1,0,,,
Android,51496306,1,,,2018,,1,94,"<p>I'm implementing the repository pattern to my project in Android but my main problem is how to control the data the users remove from the web.</p>

<p>Let's take the <a href=""https://github.com/googlesamples/android-architecture-components"" rel=""nofollow noreferrer"">Github Browser Sample</a> example.</p>

<p><a href=""https://i.stack.imgur.com/YiPoq.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/YiPoq.png"" alt=""Github Browser proccess""></a></p>

<p>Possibles solutions:</p>

<ul>
<li>Remove all the Repos and insert the new list everytime I fetch for that user.</li>
<li>Remove all the Repos and insert the new list everytime I fetch for that user if the last fetch was 3 min or more ago</li>
<li>Remove all the Repos table when the app start (so it will show the 
real data when the app close and open again).</li>
<li>Implement something like force update (Swipe and refresh) and remove all the Repos and insert them again.</li>
</ul>

<p>What do you think about how to solve this problem?</p>

<p>Cheers!!</p>
",2338932,,,,,2018-07-24 10:35:30,(Android Repository Pattern) Update phone database data with deleted items from web,<android><repository-pattern><android-room><android-architecture-components>,1,0,,,
Android,51498296,1,,,2018,,1,83,"<p>I did one music(streaming) application by using exoplayer. But this application need to support android auto too. For this I follow the android developer site.
<a href=""https://developer.android.com/training/auto/audio/"" rel=""nofollow noreferrer"">https://developer.android.com/training/auto/audio/</a></p>

<p>In this they given one sample application.</p>

<p><a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-UniversalMusicPlayer</a></p>

<p>For this sample, I configured <strong>media-browser-simulator.apk</strong> in my emulator. So this sample(UAMP) application working fine in emulator.</p>

<p><a href=""https://i.stack.imgur.com/ZwXTa.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/ZwXTa.png"" alt=""enter image description here""></a></p>

<p>But when run this application in my device not working for auto, For this in my device(Marshmallow) i have installed android auto, In this android auto not showing this sample(UAMP) application.</p>

<p><a href=""https://i.stack.imgur.com/kqnXt.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/kqnXt.png"" alt=""enter image description here""></a></p>

<p>So my questions are </p>

<p>1) Why this sample application not showing in my device. it is working in emulator.</p>

<p>2) Which procedure is correct emulator or device?</p>

<p>3) This sample application is developed by using kotlin, But need any java sample application.</p>

<p>So please guide me how to do this. Thanks to all for your support</p>
",1717339,,1726308,,2018-12-04 14:25:51,2018-12-06 20:50:08,"Android Auto Music app is not showing in ""Android auto"" app",<android><media-player><auto>,1,3,,,
Android,42009948,1,42010274,,2017,,1,1064,"<p>I am working with Android API 25 and need to make permissions requests in the app. </p>

<p>There are a ton of code samples on how to make a request as well as how to show the rationale. <a href=""https://github.com/googlesamples/android-RuntimePermissions/blob/master/Application/src/main/java/com/example/android/system/runtimepermissions/MainActivity.java"" rel=""nofollow noreferrer"">This link here</a> shows a simple methodology as do these: <a href=""https://stackoverflow.com/questions/36385161/android-m-request-multiple-permission-at-a-single-time"">Android M Request Multiple permission at a single time</a> , <a href=""https://stackoverflow.com/questions/31502650/android-m-request-permission-non-activity"">Android M request permission non activity</a> </p>

<p>The problem I am having is I am requesting multiple permissions at once (Location, Write storage access, and Contacts) and the ActivityCompatApi23.shouldShowRequestPermissionRationale source code only takes in a String for a single permission and not an array for multiple permissions. (source: android.support.v4.app.ActivityCompat)</p>

<p>So in my code, I can do this:</p>

<pre><code>     ActivityCompat.requestPermissions(activity, permissionsStringArray, 123);
</code></pre>

<p>And try to request multiple at once, but I can't then show the explanation for the ones needed if they return true from:</p>

<pre><code>     ActivityCompat.shouldShowRequestPermissionRationale(activity,
                    currentPerm.getPermissionManifestName()
</code></pre>

<p>Does anyone have any recommendations on how I can show a dialog that includes multiple rationales in it as opposed to one at a time? </p>
",7507065,,-1,,2017-05-23 12:32:08,2017-02-02 19:02:04,How do I show permissions rationale for multiple permissions request?,<android><android-alertdialog><android-permissions><android-dialog>,1,1,,,
Android,42119670,1,42138738,,2017,,1,259,"<p>I've implemented an OpenSLES buffered queue following the example here: <a href=""https://github.com/googlesamples/android-ndk/blob/master/native-audio/app/src/main/cpp/native-audio-jni.c"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk/blob/master/native-audio/app/src/main/cpp/native-audio-jni.c</a></p>

<p>However when I enqueue my sound and it's (implicitly) played, I can hear a glitch at the beginning of the sound:</p>

<pre><code>(*bqPlayerBufferQueue)-&gt;Enqueue(bqPlayerBufferQueue, nextBuffer, nextSize);
</code></pre>

<p>This glitch is not present on the (file) sample. </p>

<p>If I enqueue twice the sample, I can hear twice this glitch.</p>

<p>The sample was encoded using Audacity into a mono .wav of 44kHz</p>
",1902536,,,,,2017-02-09 14:03:04,Sound glitch on Android OpenSLES buffered queue,<android-ndk><opensl>,1,0,,,
Android,31323889,1,31327836,,2015,,1,107,"<p>I'm using this project <a href=""https://github.com/googlesamples/android-RecyclerView"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-RecyclerView</a> as a starting point to learn about RecyclerView, and implementing the answer by MLProgrammer-Cim <a href=""https://stackoverflow.com/questions/24885223/why-doesnt-recyclerview-have-onitemclicklistener-and-how-recyclerview-is-dif"">here</a></p>

<p>I'm trying to set the value of 2 strings when a button is pressed. 
I'm also trying to change the value of the strings depending on the position of the button clicked.</p>

<p>On first click the position is read, but the strings values are not set. On second click, the position is read and strings values are set, according to the position of the button clicked as intended.</p>

<p>What am I doing wrong which is not allowing the values of the string to be set on the first click? Thanks</p>

<pre><code>public class CustomAdapter extends     RecyclerView.Adapter&lt;CustomAdapter.ViewHolder&gt; {
private static final String TAG = ""CustomAdapter"";
...
// String textBoton1;
// String textBoton2;



public static class ViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener {
    private final TextView textView;
    private final TextView textView1;
    private final ImageView imageOne;
    private final Button imageIcon;
    public MyViewHolderClicks mListener;
    private Context context;
    String textBoton1;
    String textBoton2;

    public ViewHolder(View myv, MyViewHolderClicks listener) {
        super(myv);
        mListener = listener;
        textView = (TextView) myv.findViewById(R.id.textView);
        textView1 = (TextView) myv.findViewById(R.id.textView1);
        imageOne = (ImageView) myv.findViewById(R.id.image1);
        imageIcon = (Button) myv.findViewById(R.id.button_for_cardview);
        imageIcon.setOnClickListener(this);
        myv.setOnClickListener(this);


    }
    @Override
    public void onClick(View v) {
       int position = getLayoutPosition();
        if (v instanceof Button){
            mListener.onTomato((Button) v, getLayoutPosition());
            Log.d(TAG, ""Tomato Button onClick position Clicked"" + getLayoutPosition()+ ""  ""+ textBoton1+ textBoton2);
            switch (v.getId()) {

               case R.id.button_for_cardview:
                    if (position == 0) {

                        GlobalVariables.getInstance().setRightAnswer1(""this is right "");///outanother global in here
                        textBoton1 = ""String text boton one position "" + getLayoutPosition();
                        textBoton2 = "" String text boton two position "" + getLayoutPosition();

                    }if (position == 1) {

                        GlobalVariables.getInstance().setRightAnswer2(""this is wrong "");
                        textBoton1 = ""String text boton one position ""+ getLayoutPosition();
                        textBoton2 = ""String text boton two position ""+ getLayoutPosition();

               }


           }


        } else {
            mListener.onPotato(v, getLayoutPosition());
            Log.d(TAG, ""Potato View onClick position Clicked"" + getLayoutPosition() + ""  "" + positionClicked + textBoton1 + textBoton2);
        }
    }

    public interface MyViewHolderClicks {
        public void onPotato(View v, int position);

        public void onTomato(Button v, int position);

        public void onTomato(Button v);


    }


    public TextView getTextView() {
        return textView;
    }
    public TextView getTextView1() {
        return textView1;
    }
    public ImageView getImageView() {
        return imageOne;
    }

    public Button getImageView1() {
        return imageIcon;
    }
}

List&lt;Question&gt; questions;
CustomAdapter(List&lt;Question&gt; questions) {
    this.questions = questions;

}


public CustomAdapter(String[] dataSet) {
    mDataSet = dataSet;

}


@Override
public void onBindViewHolder(ViewHolder viewHolder, final int position) {
    Log.d(TAG, ""Element "" + position + "" set."");


    viewHolder.getTextView().setText(questions.get(position).english);
    viewHolder.getTextView1().setText(questions.get(position).spanish);
    viewHolder.getImageView().setImageResource(questions.get(position).drawableId);
    viewHolder.getImageView1().setBackgroundResource(questions.get(position).iconId);




}

@Override
public int getItemCount() {

    return GlobalVariables.getInstance().getPreguntasCorrectas();

}
@Override
public CustomAdapter.ViewHolder onCreateViewHolder(ViewGroup viewGroup, int viewType) {
    //int positionClicked =0;//set this to something like position = getLayoutPosition();

    View v = LayoutInflater.from(viewGroup.getContext())
            .inflate(R.layout.text_row_item, viewGroup, false);
    CustomAdapter.ViewHolder vh = new ViewHolder(v, new CustomAdapter.ViewHolder.MyViewHolderClicks(){
        String textBoton1;
        String textBoton2;
        public void onPotato(View myv, int position) {
            Log.d(TAG,""Potato View""+ "" position"" + position + textBoton1 +textBoton2); 
           // switch (position) {

              //  case 0:
                    if (position == 0) {

                        GlobalVariables.getInstance().setRightAnswer1(""this is right ONCREATE VIEWHOLDER"");///outanother global in here
                        textBoton1 = ""String text boton one from OnCreateViewHolder position ""+ position;
                        textBoton2 = ""String text boton two from OnCreateViewHolder position ""+ position;

                    }
              //  case 1:

                    if (position == 1) {
                        GlobalVariables.getInstance().setRightAnswer2(""this is wrong ONCREATE VIEWHOLDER"");
                        textBoton1 = ""String text boton one from OnCreateViewHolder position ""+ position;
                        textBoton2 = ""String text boton two from OnCreateViewHolder position ""+ position;

                    }

            }

      //  }


         public void onTomato(Button imageIcon,int position) {
             Log.d(TAG, ""Tomato Button OnCreateViewHolder"" + "" position "" + position + textBoton1 + textBoton2);
             switch (imageIcon.getId()) {

                 case R.id.button_for_cardview:

                     if (position == 0) {

                         GlobalVariables.getInstance().setRightAnswer1(""this is right"");                             textBoton1 = ""String text boton one from OnCreateViewHolder position "" + position;
                         textBoton2 = ""String text boton one from OnCreateViewHolder position "" + position;

                     }

                     if (position == 1) {
                         GlobalVariables.getInstance().setRightAnswer2(""this is wrong"");
                         textBoton1 = ""String text boton two from OnCreateViewHolder position "" + position;
                         textBoton2 = ""String text boton two from OnCreateViewHolder position "" + position;

                     }

             }
         }

        @Override
        public void onTomato(Button v) {

        }
    });

    return vh;
}

}
</code></pre>

<p>text_row_item.xml</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;FrameLayout xmlns:android=""http://schemas.android.com/apk/res/android""
android:layout_width=""match_parent""
android:layout_height=""wrap_content""
android:layout_marginLeft=""@dimen/margin_medium""
android:layout_marginRight=""@dimen/margin_medium""
android:gravity=""center_vertical""

&gt;
&lt;!--android:clickable=""true""--&gt;
&lt;!--android:focusable=""true""--&gt;
&lt;!--android:focusableInTouchMode=""true""--&gt;
&lt;android.support.v7.widget.CardView
    xmlns:card_view=""http://schemas.android.com/apk/res-auto""
    android:layout_width=""match_parent""
    android:layout_height=""wrap_content""
    android:id=""@+id/cv""
    card_view:cardCornerRadius=""8dp""
    card_view:cardElevation=""3dp""&gt;
    &lt;!--android:focusableInTouchMode=""false""--&gt;
    &lt;!--android:focusable=""false""--&gt;
    &lt;RelativeLayout
        android:layout_width=""wrap_content""
        android:layout_height=""match_parent""
        android:padding=""16dp""
        android:focusable=""false""
    android:focusableInTouchMode=""false"" &gt;

            &lt;ImageView
                android:layout_width=""wrap_content""
                android:layout_height=""wrap_content""
                android:id=""@+id/image1""
                android:layout_alignParentTop=""true""
                android:background=""@drawable/as18_boy_point_that_chair""
                /&gt;

            &lt;TextView
                android:layout_width=""wrap_content""
                android:layout_height=""wrap_content""
                android:id=""@+id/textView""
                android:text=""Sample text for align""
                android:layout_toRightOf=""@+id/image1""
                android:textSize=""30sp""
                /&gt;

            &lt;TextView
                android:layout_width=""wrap_content""
                android:layout_height=""wrap_content""
                android:id=""@+id/textView1""
                android:text=""Sample text for align""
                android:layout_below=""@+id/textView""
                /&gt;

            &lt;com.MyApp.app.ButtonPlus
            android:id=""@+id/button_for_cardview""
            style=""@style/fafont""
            android:layout_width=""60dp""
            android:layout_height=""60dp""
            android:textColor=""#ffffff""
            android:text=""@string/icon_mic""
            android:textSize=""25dp""
            android:layout_toRightOf=""@+id/textView""
            android:background=""@drawable/speaker_circle""
            android:visibility=""visible""
            /&gt;

        &lt;/RelativeLayout&gt;
        &lt;!--android:onClick=""speechClicked""--&gt;
&lt;/android.support.v7.widget.CardView&gt;
&lt;ListView
    android:id=""@+id/lvVoiceReturn""
    android:layout_width=""wrap_content""
    android:layout_height=""50dp""
    android:layout_marginLeft=""80dp""
    android:textColor=""#ff33b5e5""
    android:layout_marginTop=""20dp""
    android:visibility=""invisible""
    android:ems=""10"" &gt;
&lt;/ListView&gt;
</code></pre>

<p></p>

<p>logcat output 1st click</p>

<pre><code>07-10 00:26:06.803  29652-29652/? D/CustomAdapter Tomato Button OnCreateViewHolder position 0nullnull
07-10 00:26:06.803  29652-29652/? D/CustomAdapter Tomato Button onClick position Clicked0  nullnull
</code></pre>

<p>logcat output 2nd click</p>

<pre><code>07-10 00:26:24.353  29652-29652/? D/CustomAdapter Tomato Button OnCreateViewHolder position 0String text boton one from OnCreateViewHolder position 0String text boton one from OnCreateViewHolder position 0
07-10 00:26:24.353  29652-29652/? D/CustomAdapter Tomato Button onClick position Clicked0  String text boton one position 0 String text boton two position 0
</code></pre>
",3246849,,-1,,2017-05-23 12:21:46,2015-07-09 20:43:28,Android RecyclerView requires 2 clicks to set strings,<android><android-recyclerview><recycler-adapter>,1,1,,,
Android,31506508,1,31506657,,2015,,1,299,"<p>I just cloned the project at <a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow"">GoogleSamples</a> then cd to the native-activity dir. I typed:</p>

<pre><code>&gt; gradle clean build 
</code></pre>

<p>And I am getting this:</p>

<pre><code>Starting process 'command '/Library/Java/JavaVirtualMachines/jdk1.8.0_31.jdk/Contents/Home/bin/java''. Working directory: /Users/johndifool/Develop/android/native-activity/app Command: /Library/Java/JavaVirtualMachines/jdk1.8.0_31.jdk/Contents/Home/bin/java -Xmx1024M -Dfile.encoding=UTF-8 -Duser.country=US -Duser.language=en -Duser.variant -cp /Users/johndifool/Develop/android/sdk/build-tools/22.0.1/lib/dx.jar com.android.dx.command.Main --dex --verbose --output /Users/johndifool/Develop/android/native-activity/app/build/intermediates/dex/arm7/debug /Users/johndifool/Develop/android/native-activity/app/build/intermediates/classes/arm7/debug
Successfully started process 'command '/Library/Java/JavaVirtualMachines/jdk1.8.0_31.jdk/Contents/Home/bin/java''
processing /Users/johndifool/Develop/android/native-activity/app/build/intermediates/classes/arm7/debug/./com/example/native_activity/BuildConfig.class...
processing /Users/johndifool/Develop/android/native-activity/app/build/intermediates/classes/arm7/debug/./com/example/native_activity/R$attr.class...
processing /Users/johndifool/Develop/android/native-activity/app/build/intermediates/classes/arm7/debug/./com/example/native_activity/R$string.class...
processing /Users/johndifool/Develop/android/native-activity/app/build/intermediates/classes/arm7/debug/./com/example/native_activity/R.class...


UNEXPECTED TOP-LEVEL EXCEPTION:
com.android.dx.cf.iface.ParseException: bad class file magic (cafebabe) or version (0034.0000)
  at com.android.dx.cf.direct.DirectClassFile.parse0(DirectClassFile.java:472)
  at com.android.dx.cf.direct.DirectClassFile.parse(DirectClassFile.java:406)
  at com.android.dx.cf.direct.DirectClassFile.parseToInterfacesIfNecessary(DirectClassFile.java:388)
  at com.android.dx.cf.direct.DirectClassFile.getMagic(DirectClassFile.java:251)
  at com.android.dx.command.dexer.Main.processClass(Main.java:704)
  at com.android.dx.command.dexer.Main.processFileBytes(Main.java:673)
  at com.android.dx.command.dexer.Main.access$300(Main.java:83)
  at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:602)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:170)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:144)
  at com.android.dx.command.dexer.Main.processOne(Main.java:632)
  at com.android.dx.command.dexer.Main.processAllFiles(Main.java:510)
  at com.android.dx.command.dexer.Main.runMonoDex(Main.java:280)
  at com.android.dx.command.dexer.Main.run(Main.java:246)
  at com.android.dx.command.dexer.Main.main(Main.java:215)
  at com.android.dx.command.Main.main(Main.java:106)
...while parsing com/example/native_activity/BuildConfig.class


UNEXPECTED TOP-LEVEL EXCEPTION:
com.android.dx.cf.iface.ParseException: bad class file magic (cafebabe) or version (0034.0000)
  at com.android.dx.cf.direct.DirectClassFile.parse0(DirectClassFile.java:472)
  at com.android.dx.cf.direct.DirectClassFile.parse(DirectClassFile.java:406)
  at com.android.dx.cf.direct.DirectClassFile.parseToInterfacesIfNecessary(DirectClassFile.java:388)
  at com.android.dx.cf.direct.DirectClassFile.getMagic(DirectClassFile.java:251)
  at com.android.dx.command.dexer.Main.processClass(Main.java:704)
  at com.android.dx.command.dexer.Main.processFileBytes(Main.java:673)
  at com.android.dx.command.dexer.Main.access$300(Main.java:83)
  at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:602)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:170)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:144)
  at com.android.dx.command.dexer.Main.processOne(Main.java:632)
  at com.android.dx.command.dexer.Main.processAllFiles(Main.java:510)
  at com.android.dx.command.dexer.Main.runMonoDex(Main.java:280)
  at com.android.dx.command.dexer.Main.run(Main.java:246)
  at com.android.dx.command.dexer.Main.main(Main.java:215)
  at com.android.dx.command.Main.main(Main.java:106)
...while parsing com/example/native_activity/R$attr.class


UNEXPECTED TOP-LEVEL EXCEPTION:
com.android.dx.cf.iface.ParseException: bad class file magic (cafebabe) or version (0034.0000)
  at com.android.dx.cf.direct.DirectClassFile.parse0(DirectClassFile.java:472)
  at com.android.dx.cf.direct.DirectClassFile.parse(DirectClassFile.java:406)
  at com.android.dx.cf.direct.DirectClassFile.parseToInterfacesIfNecessary(DirectClassFile.java:388)
  at com.android.dx.cf.direct.DirectClassFile.getMagic(DirectClassFile.java:251)
  at com.android.dx.command.dexer.Main.processClass(Main.java:704)
  at com.android.dx.command.dexer.Main.processFileBytes(Main.java:673)
  at com.android.dx.command.dexer.Main.access$300(Main.java:83)
  at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:602)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:170)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:144)
  at com.android.dx.command.dexer.Main.processOne(Main.java:632)
  at com.android.dx.command.dexer.Main.processAllFiles(Main.java:510)
  at com.android.dx.command.dexer.Main.runMonoDex(Main.java:280)
  at com.android.dx.command.dexer.Main.run(Main.java:246)
  at com.android.dx.command.dexer.Main.main(Main.java:215)
  at com.android.dx.command.Main.main(Main.java:106)
...while parsing com/example/native_activity/R$string.class


UNEXPECTED TOP-LEVEL EXCEPTION:
com.android.dx.cf.iface.ParseException: bad class file magic (cafebabe) or version (0034.0000)
  at com.android.dx.cf.direct.DirectClassFile.parse0(DirectClassFile.java:472)
  at com.android.dx.cf.direct.DirectClassFile.parse(DirectClassFile.java:406)
  at com.android.dx.cf.direct.DirectClassFile.parseToInterfacesIfNecessary(DirectClassFile.java:388)
  at com.android.dx.cf.direct.DirectClassFile.getMagic(DirectClassFile.java:251)
  at com.android.dx.command.dexer.Main.processClass(Main.java:704)
  at com.android.dx.command.dexer.Main.processFileBytes(Main.java:673)
  at com.android.dx.command.dexer.Main.access$300(Main.java:83)
  at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:602)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:170)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:144)
  at com.android.dx.command.dexer.Main.processOne(Main.java:632)
  at com.android.dx.command.dexer.Main.processAllFiles(Main.java:510)
  at com.android.dx.command.dexer.Main.runMonoDex(Main.java:280)
  at com.android.dx.command.dexer.Main.run(Main.java:246)
  at com.android.dx.command.dexer.Main.main(Main.java:215)
  at com.android.dx.command.Main.main(Main.java:106)
...while parsing com/example/native_activity/R.class

4 errors; aborting

:app:dexArm7Debug FAILED
:app:dexArm7Debug (Thread[main,5,main]) completed. Took 0.219 secs.

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':app:dexArm7Debug'.
&gt; com.android.ide.common.process.ProcessException: org.gradle.process.internal.ExecException: Process 'command '/Library/Java/JavaVirtualMachines/jdk1.8.0_31.jdk/Contents/Home/bin/java'' finished with non-zero exit value 1

* Try:
Run with --stacktrace option to get the stack trace. Run with --debug option to get more log output.

BUILD FAILED

Total time: 22.245 secs
Stopped 0 compiler daemon(s).
</code></pre>

<p>I have no idea what's going on here. I updated to latest gradle 2.5 which supports 'model' in app script per the project requires.</p>
",666818,,,,,2015-07-19 22:36:10,UNEXPECTED TOP-LEVEL EXCEPTION when building NDK Samples,<android><android-ndk>,1,0,,,
Android,31450919,1,,,2015,,1,3044,"<p><strong>Bluetooth LE</strong> introduced with <code>Android 4.3</code>, therefore i am using two Android devices and my both devices <code>supports</code> API Version <strong>4.4.2</strong></p>

<p>Even, I already paired both the devices, but still not showing device in a List, see below screenshot</p>

<p><img src=""https://i.stack.imgur.com/0BOZp.jpg"" alt=""enter image description here""></p>

<p>I have tried with both the ways:</p>

<pre><code>&lt;uses-feature android:name=""android.hardware.bluetooth_le"" android:required=""true""/&gt;
</code></pre>

<p><strong>and</strong></p>

<pre><code>&lt;uses-feature android:name=""android.hardware.bluetooth_le"" android:required=""false""/&gt;
</code></pre>

<p><strong>Log says:</strong></p>

<pre><code>07-16 17:26:15.146    3857-3857/com.example.android.bluetoothlegatt D/dalvikvm Late-enabling CheckJNI
07-16 17:26:15.146    3857-3857/com.example.android.bluetoothlegatt D/dalvikvm Try to disable coredump for pid 3857
07-16 17:26:15.146    3857-3857/com.example.android.bluetoothlegatt D/dalvikvm Process 3857 nice name: com.example.android.bluetoothlegatt
07-16 17:26:15.146    3857-3857/com.example.android.bluetoothlegatt D/dalvikvm Extra Options: not specified
07-16 17:26:15.246    3857-3857/com.example.android.bluetoothlegatt D/BluetoothAdapter startLeScan(): null
07-16 17:26:15.276    3857-3869/com.example.android.bluetoothlegatt D/BluetoothAdapter onClientRegistered() - status=0 clientIf=5
07-16 17:26:15.296    3857-3857/com.example.android.bluetoothlegatt E/IMGSRV :0: PVRDRMOpen: TP3, ret = 50
07-16 17:26:15.306    3857-3857/com.example.android.bluetoothlegatt E/IMGSRV :0: PVRDRMOpen: TP3, ret = 53
07-16 17:26:15.306    3857-3857/com.example.android.bluetoothlegatt E/IMGSRV :0: PVRDRMOpen: TP3, ret = 54
07-16 17:26:15.306    3857-3857/com.example.android.bluetoothlegatt E/IMGSRV :0: PVRDRMOpen: TP3, ret = 54
07-16 17:26:15.306    3857-3857/com.example.android.bluetoothlegatt E/IMGSRV :0: PVRDRMOpen: TP3, ret = 54
07-16 17:26:15.306    3857-3857/com.example.android.bluetoothlegatt E/IMGSRV :0: PVRDRMOpen: TP3, ret = 56
07-16 17:26:15.346    3857-3857/com.example.android.bluetoothlegatt D/OpenGLRenderer Enabling debug mode 0
07-16 17:26:25.246    3857-3857/com.example.android.bluetoothlegatt D/BluetoothAdapter stopLeScan()
</code></pre>

<p>Code:</p>

<p><strong>BluetoothLeService.java:-</strong></p>

<pre><code>public class BluetoothLeService extends Service {
    .......
    public final static UUID UUID_HEART_RATE_MEASUREMENT =
            UUID.fromString(SampleGattAttributes.HEART_RATE_MEASUREMENT);

    private final BluetoothGattCallback mGattCallback = new BluetoothGattCallback() {
        @Override
        public void onConnectionStateChange(BluetoothGatt gatt, int status, int newState) {
            String intentAction;
            if (newState == BluetoothProfile.STATE_CONNECTED) {
                intentAction = ACTION_GATT_CONNECTED;
                mConnectionState = STATE_CONNECTED;
                broadcastUpdate(intentAction);
                Log.i(TAG, ""Connected to GATT server."");
                // Attempts to discover services after successful connection.
                Log.i(TAG, ""Attempting to start service discovery:"" +
                        mBluetoothGatt.discoverServices());

            } else if (newState == BluetoothProfile.STATE_DISCONNECTED) {
                intentAction = ACTION_GATT_DISCONNECTED;
                mConnectionState = STATE_DISCONNECTED;
                Log.i(TAG, ""Disconnected from GATT server."");
                broadcastUpdate(intentAction);
            }
        }

        @Override
        public void onServicesDiscovered(BluetoothGatt gatt, int status) {
            if (status == BluetoothGatt.GATT_SUCCESS) {
                broadcastUpdate(ACTION_GATT_SERVICES_DISCOVERED);
            } else {
                Log.w(TAG, ""onServicesDiscovered received: "" + status);
            }
        }

        @Override
        public void onCharacteristicRead(BluetoothGatt gatt,
                                         BluetoothGattCharacteristic characteristic,
                                         int status) {
            if (status == BluetoothGatt.GATT_SUCCESS) {
                broadcastUpdate(ACTION_DATA_AVAILABLE, characteristic);
            }
        }

        @Override
        public void onCharacteristicChanged(BluetoothGatt gatt,
                                            BluetoothGattCharacteristic characteristic) {
            broadcastUpdate(ACTION_DATA_AVAILABLE, characteristic);
        }
    };

    private void broadcastUpdate(final String action) {
        final Intent intent = new Intent(action);
        sendBroadcast(intent);
    }

    private void broadcastUpdate(final String action,
                                 final BluetoothGattCharacteristic characteristic) {
        final Intent intent = new Intent(action);

        if (UUID_HEART_RATE_MEASUREMENT.equals(characteristic.getUuid())) {
            int flag = characteristic.getProperties();
            int format = -1;
            if ((flag &amp; 0x01) != 0) {
                format = BluetoothGattCharacteristic.FORMAT_UINT16;
                Log.d(TAG, ""Heart rate format UINT16."");
            } else {
                format = BluetoothGattCharacteristic.FORMAT_UINT8;
                Log.d(TAG, ""Heart rate format UINT8."");
            }
            final int heartRate = characteristic.getIntValue(format, 1);
            Log.d(TAG, String.format(""Received heart rate: %d"", heartRate));
            intent.putExtra(EXTRA_DATA, String.valueOf(heartRate));
        } else {
            // For all other profiles, writes the data formatted in HEX.
            final byte[] data = characteristic.getValue();
            if (data != null &amp;&amp; data.length &gt; 0) {
                final StringBuilder stringBuilder = new StringBuilder(data.length);
                for(byte byteChar : data)
                    stringBuilder.append(String.format(""%02X "", byteChar));
                intent.putExtra(EXTRA_DATA, new String(data) + ""\n"" + stringBuilder.toString());
            }
        }
        sendBroadcast(intent);
    }

    public class LocalBinder extends Binder {
        BluetoothLeService getService() {
            return BluetoothLeService.this;
        }
    }

    @Override
    public IBinder onBind(Intent intent) {
        return mBinder;
    }

    @Override
    public boolean onUnbind(Intent intent) {
        close();
        return super.onUnbind(intent);
    }

    private final IBinder mBinder = new LocalBinder();

    public boolean initialize() {
        if (mBluetoothManager == null) {
            mBluetoothManager = (BluetoothManager) getSystemService(Context.BLUETOOTH_SERVICE);
            if (mBluetoothManager == null) {
                Log.e(TAG, ""Unable to initialize BluetoothManager."");
                return false;
            }
        }

        mBluetoothAdapter = mBluetoothManager.getAdapter();
        if (mBluetoothAdapter == null) {
            Log.e(TAG, ""Unable to obtain a BluetoothAdapter."");
            return false;
        }

        return true;
    }

    public boolean connect(final String address) {
        if (mBluetoothAdapter == null || address == null) {
            Log.w(TAG, ""BluetoothAdapter not initialized or unspecified address."");
            return false;
        }

        // Previously connected device.  Try to reconnect.
        if (mBluetoothDeviceAddress != null &amp;&amp; address.equals(mBluetoothDeviceAddress)
                &amp;&amp; mBluetoothGatt != null) {
            Log.d(TAG, ""Trying to use an existing mBluetoothGatt for connection."");
            if (mBluetoothGatt.connect()) {
                mConnectionState = STATE_CONNECTING;
                return true;
            } else {
                return false;
            }
        }

        final BluetoothDevice device = mBluetoothAdapter.getRemoteDevice(address);
        if (device == null) {
            Log.w(TAG, ""Device not found.  Unable to connect."");
            return false;
        }
        // We want to directly connect to the device, so we are setting the autoConnect
        // parameter to false.
        mBluetoothGatt = device.connectGatt(this, false, mGattCallback);
        Log.d(TAG, ""Trying to create a new connection."");
        mBluetoothDeviceAddress = address;
        mConnectionState = STATE_CONNECTING;
        return true;
    }

   public void disconnect() {
        if (mBluetoothAdapter == null || mBluetoothGatt == null) {
            Log.w(TAG, ""BluetoothAdapter not initialized"");
            return;
        }
        mBluetoothGatt.disconnect();
    }

    public void close() {
        if (mBluetoothGatt == null) {
            return;
        }
        mBluetoothGatt.close();
        mBluetoothGatt = null;
    }

    public void readCharacteristic(BluetoothGattCharacteristic characteristic) {
        if (mBluetoothAdapter == null || mBluetoothGatt == null) {
            Log.w(TAG, ""BluetoothAdapter not initialized"");
            return;
        }
        mBluetoothGatt.readCharacteristic(characteristic);
    }

    public void setCharacteristicNotification(BluetoothGattCharacteristic characteristic,
                                              boolean enabled) {
        if (mBluetoothAdapter == null || mBluetoothGatt == null) {
            Log.w(TAG, ""BluetoothAdapter not initialized"");
            return;
        }
        mBluetoothGatt.setCharacteristicNotification(characteristic, enabled);

        // This is specific to Heart Rate Measurement.
        if (UUID_HEART_RATE_MEASUREMENT.equals(characteristic.getUuid())) {
            BluetoothGattDescriptor descriptor = characteristic.getDescriptor(
                    UUID.fromString(SampleGattAttributes.CLIENT_CHARACTERISTIC_CONFIG));
            descriptor.setValue(BluetoothGattDescriptor.ENABLE_NOTIFICATION_VALUE);
            mBluetoothGatt.writeDescriptor(descriptor);
        }
    }

    public List&lt;BluetoothGattService&gt; getSupportedGattServices() {
        if (mBluetoothGatt == null) return null;

        return mBluetoothGatt.getServices();
    }
}
</code></pre>

<p><strong>DeviceScanActivity.java:</strong></p>

<pre><code>public class DeviceScanActivity extends ListActivity {
    ......

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getActionBar().setTitle(R.string.title_devices);
        mHandler = new Handler();


        if (!getPackageManager().hasSystemFeature(PackageManager.FEATURE_BLUETOOTH_LE)) {
            Toast.makeText(this, R.string.ble_not_supported, Toast.LENGTH_SHORT).show();
            finish();
        }

        final BluetoothManager bluetoothManager =
                (BluetoothManager) getSystemService(Context.BLUETOOTH_SERVICE);
        mBluetoothAdapter = bluetoothManager.getAdapter();

        if (mBluetoothAdapter == null) {
            Toast.makeText(this, R.string.error_bluetooth_not_supported, Toast.LENGTH_SHORT).show();
            finish();
            return;
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        if (!mScanning) {
            menu.findItem(R.id.menu_stop).setVisible(false);
            menu.findItem(R.id.menu_scan).setVisible(true);
            menu.findItem(R.id.menu_refresh).setActionView(null);
        } else {
            menu.findItem(R.id.menu_stop).setVisible(true);
            menu.findItem(R.id.menu_scan).setVisible(false);
            menu.findItem(R.id.menu_refresh).setActionView(
                    R.layout.actionbar_indeterminate_progress);
        }
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case R.id.menu_scan:
                mLeDeviceListAdapter.clear();
                scanLeDevice(true);
                break;
            case R.id.menu_stop:
                scanLeDevice(false);
                break;
        }
        return true;
    }

    @Override
    protected void onResume() {
        super.onResume();
        if (!mBluetoothAdapter.isEnabled()) {
            if (!mBluetoothAdapter.isEnabled()) {
                Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
                startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
            }
        }

        // Initializes list view adapter.
        mLeDeviceListAdapter = new LeDeviceListAdapter();
        setListAdapter(mLeDeviceListAdapter);
        scanLeDevice(true);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == REQUEST_ENABLE_BT &amp;&amp; resultCode == Activity.RESULT_CANCELED) {
            finish();
            return;
        }
        super.onActivityResult(requestCode, resultCode, data);
    }

    @Override
    protected void onPause() {
        super.onPause();
        scanLeDevice(false);
        mLeDeviceListAdapter.clear();
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        ....
        startActivity(intent);
    }

    private void scanLeDevice(final boolean enable) {
        if (enable) {
            mHandler.postDelayed(new Runnable() {
                @Override
                public void run() {
                    mScanning = false;
                    mBluetoothAdapter.stopLeScan(mLeScanCallback);
                    invalidateOptionsMenu();
                }
            }, SCAN_PERIOD);

            mScanning = true;
            mBluetoothAdapter.startLeScan(mLeScanCallback);
        } else {
            mScanning = false;
            mBluetoothAdapter.stopLeScan(mLeScanCallback);
        }
        invalidateOptionsMenu();
    }

    private class LeDeviceListAdapter extends BaseAdapter {
        private ArrayList&lt;BluetoothDevice&gt; mLeDevices;
        private LayoutInflater mInflator;

        public LeDeviceListAdapter() {
            super();
            mLeDevices = new ArrayList&lt;BluetoothDevice&gt;();
            mInflator = DeviceScanActivity.this.getLayoutInflater();
        }

        public void addDevice(BluetoothDevice device) {
            if(!mLeDevices.contains(device)) {
                mLeDevices.add(device);
            }
        }

        public BluetoothDevice getDevice(int position) {
            return mLeDevices.get(position);
        }

        public void clear() {
            mLeDevices.clear();
        }

        @Override
        public int getCount() {
            return mLeDevices.size();
        }

        @Override
        public Object getItem(int i) {
            return mLeDevices.get(i);
        }

        @Override
        public long getItemId(int i) {
            return i;
        }

        @Override
        public View getView(int i, View view, ViewGroup viewGroup) {
            ViewHolder viewHolder;
            // General ListView optimization code.
            if (view == null) {
                view = mInflator.inflate(R.layout.listitem_device, null);
                viewHolder = new ViewHolder();
                viewHolder.deviceAddress = (TextView) view.findViewById(R.id.device_address);
                viewHolder.deviceName = (TextView) view.findViewById(R.id.device_name);
                view.setTag(viewHolder);
            } else {
                viewHolder = (ViewHolder) view.getTag();
            }

            BluetoothDevice device = mLeDevices.get(i);
            final String deviceName = device.getName();
            if (deviceName != null &amp;&amp; deviceName.length() &gt; 0)
                viewHolder.deviceName.setText(deviceName);
            else
                viewHolder.deviceName.setText(R.string.unknown_device);
            viewHolder.deviceAddress.setText(device.getAddress());

            return view;
        }
    }

    // Device scan callback.
    private BluetoothAdapter.LeScanCallback mLeScanCallback =
            new BluetoothAdapter.LeScanCallback() {

        @Override
        public void onLeScan(final BluetoothDevice device, int rssi, byte[] scanRecord) {
            runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    mLeDeviceListAdapter.addDevice(device);
                    mLeDeviceListAdapter.notifyDataSetChanged();
                }
            });
        }
    };
.....
}
</code></pre>

<p><strong>DeviceControlActivity.java:</strong></p>

<pre><code>    public class DeviceControlActivity extends Activity {
    ........

    private final ServiceConnection mServiceConnection = new ServiceConnection() {

        @Override
        public void onServiceConnected(ComponentName componentName, IBinder service) {
            mBluetoothLeService = ((BluetoothLeService.LocalBinder) service).getService();
            if (!mBluetoothLeService.initialize()) {
                Log.e(TAG, ""Unable to initialize Bluetooth"");
                finish();
            }

            mBluetoothLeService.connect(mDeviceAddress);
        }

        @Override
        public void onServiceDisconnected(ComponentName componentName) {
            mBluetoothLeService = null;
        }
    };

   private final BroadcastReceiver mGattUpdateReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            final String action = intent.getAction();
            if (BluetoothLeService.ACTION_GATT_CONNECTED.equals(action)) {
                mConnected = true;
                updateConnectionState(R.string.connected);
                invalidateOptionsMenu();
            } else if (BluetoothLeService.ACTION_GATT_DISCONNECTED.equals(action)) {
                mConnected = false;
                updateConnectionState(R.string.disconnected);
                invalidateOptionsMenu();
                clearUI();
            } else if (BluetoothLeService.ACTION_GATT_SERVICES_DISCOVERED.equals(action)) {
                // Show all the supported services and characteristics on the user interface.
                displayGattServices(mBluetoothLeService.getSupportedGattServices());
            } else if (BluetoothLeService.ACTION_DATA_AVAILABLE.equals(action)) {
                displayData(intent.getStringExtra(BluetoothLeService.EXTRA_DATA));
            }
        }
    };

    private final ExpandableListView.OnChildClickListener servicesListClickListner =
            new ExpandableListView.OnChildClickListener() {
                @Override
                public boolean onChildClick(ExpandableListView parent, View v, int groupPosition,
                                            int childPosition, long id) {
                    if (mGattCharacteristics != null) {
                        final BluetoothGattCharacteristic characteristic =
                                mGattCharacteristics.get(groupPosition).get(childPosition);
                        final int charaProp = characteristic.getProperties();
                        if ((charaProp | BluetoothGattCharacteristic.PROPERTY_READ) &gt; 0) {
                            // If there is an active notification on a characteristic, clear
                            // it first so it doesn't update the data field on the user interface.
                            if (mNotifyCharacteristic != null) {
                                mBluetoothLeService.setCharacteristicNotification(
                                        mNotifyCharacteristic, false);
                                mNotifyCharacteristic = null;
                            }
                            mBluetoothLeService.readCharacteristic(characteristic);
                        }
                        if ((charaProp | BluetoothGattCharacteristic.PROPERTY_NOTIFY) &gt; 0) {
                            mNotifyCharacteristic = characteristic;
                            mBluetoothLeService.setCharacteristicNotification(
                                    characteristic, true);
                        }
                        return true;
                    }
                    return false;
                }
    };

    private void clearUI() {
        mGattServicesList.setAdapter((SimpleExpandableListAdapter) null);
        mDataField.setText(R.string.no_data);
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.gatt_services_characteristics);

        final Intent intent = getIntent();
        mDeviceName = intent.getStringExtra(EXTRAS_DEVICE_NAME);
        mDeviceAddress = intent.getStringExtra(EXTRAS_DEVICE_ADDRESS);

        ((TextView) findViewById(R.id.device_address)).setText(mDeviceAddress);
        mGattServicesList = (ExpandableListView) findViewById(R.id.gatt_services_list);
        mGattServicesList.setOnChildClickListener(servicesListClickListner);
        mConnectionState = (TextView) findViewById(R.id.connection_state);
        mDataField = (TextView) findViewById(R.id.data_value);

        getActionBar().setTitle(mDeviceName);
        getActionBar().setDisplayHomeAsUpEnabled(true);
        Intent gattServiceIntent = new Intent(this, BluetoothLeService.class);
        bindService(gattServiceIntent, mServiceConnection, BIND_AUTO_CREATE);
    }

    @Override
    protected void onResume() {
        super.onResume();
        registerReceiver(mGattUpdateReceiver, makeGattUpdateIntentFilter());
        if (mBluetoothLeService != null) {
            final boolean result = mBluetoothLeService.connect(mDeviceAddress);
            Log.d(TAG, ""Connect request result="" + result);
        }
    }

    @Override
    protected void onPause() {
        super.onPause();
        unregisterReceiver(mGattUpdateReceiver);
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        unbindService(mServiceConnection);
        mBluetoothLeService = null;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.gatt_services, menu);
        if (mConnected) {
            menu.findItem(R.id.menu_connect).setVisible(false);
            menu.findItem(R.id.menu_disconnect).setVisible(true);
        } else {
            menu.findItem(R.id.menu_connect).setVisible(true);
            menu.findItem(R.id.menu_disconnect).setVisible(false);
        }
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch(item.getItemId()) {
            case R.id.menu_connect:
                mBluetoothLeService.connect(mDeviceAddress);
                return true;
            case R.id.menu_disconnect:
                mBluetoothLeService.disconnect();
                return true;
            case android.R.id.home:
                onBackPressed();
                return true;
        }
        return super.onOptionsItemSelected(item);
    }

    private void updateConnectionState(final int resourceId) {
        runOnUiThread(new Runnable() {
            @Override
            public void run() {
                mConnectionState.setText(resourceId);
            }
        });
    }

    private void displayData(String data) {
        if (data != null) {
            mDataField.setText(data);
        }
    }

    private void displayGattServices(List&lt;BluetoothGattService&gt; gattServices) {
        if (gattServices == null) return;
        String uuid = null;
        String unknownServiceString = getResources().getString(R.string.unknown_service);
        String unknownCharaString = getResources().getString(R.string.unknown_characteristic);
        ArrayList&lt;HashMap&lt;String, String&gt;&gt; gattServiceData = new ArrayList&lt;HashMap&lt;String, String&gt;&gt;();
        ArrayList&lt;ArrayList&lt;HashMap&lt;String, String&gt;&gt;&gt; gattCharacteristicData
                = new ArrayList&lt;ArrayList&lt;HashMap&lt;String, String&gt;&gt;&gt;();
        mGattCharacteristics = new ArrayList&lt;ArrayList&lt;BluetoothGattCharacteristic&gt;&gt;();

        // Loops through available GATT Services.
        for (BluetoothGattService gattService : gattServices) {
            HashMap&lt;String, String&gt; currentServiceData = new HashMap&lt;String, String&gt;();
            uuid = gattService.getUuid().toString();
            currentServiceData.put(
                    LIST_NAME, SampleGattAttributes.lookup(uuid, unknownServiceString));
            currentServiceData.put(LIST_UUID, uuid);
            gattServiceData.add(currentServiceData);

            ArrayList&lt;HashMap&lt;String, String&gt;&gt; gattCharacteristicGroupData =
                    new ArrayList&lt;HashMap&lt;String, String&gt;&gt;();
            List&lt;BluetoothGattCharacteristic&gt; gattCharacteristics =
                    gattService.getCharacteristics();
            ArrayList&lt;BluetoothGattCharacteristic&gt; charas =
                    new ArrayList&lt;BluetoothGattCharacteristic&gt;();

            // Loops through available Characteristics.
            for (BluetoothGattCharacteristic gattCharacteristic : gattCharacteristics) {
                charas.add(gattCharacteristic);
                HashMap&lt;String, String&gt; currentCharaData = new HashMap&lt;String, String&gt;();
                uuid = gattCharacteristic.getUuid().toString();
                currentCharaData.put(
                        LIST_NAME, SampleGattAttributes.lookup(uuid, unknownCharaString));
                currentCharaData.put(LIST_UUID, uuid);
                gattCharacteristicGroupData.add(currentCharaData);
            }
            mGattCharacteristics.add(charas);
            gattCharacteristicData.add(gattCharacteristicGroupData);
        }

        SimpleExpandableListAdapter gattServiceAdapter = new SimpleExpandableListAdapter(
                this,
                gattServiceData,
                android.R.layout.simple_expandable_list_item_2,
                new String[] {LIST_NAME, LIST_UUID},
                new int[] { android.R.id.text1, android.R.id.text2 },
                gattCharacteristicData,
                android.R.layout.simple_expandable_list_item_2,
                new String[] {LIST_NAME, LIST_UUID},
                new int[] { android.R.id.text1, android.R.id.text2 }
        );
        mGattServicesList.setAdapter(gattServiceAdapter);
    }

    private static IntentFilter makeGattUpdateIntentFilter() {
        final IntentFilter intentFilter = new IntentFilter();
        intentFilter.addAction(BluetoothLeService.ACTION_GATT_CONNECTED);
        intentFilter.addAction(BluetoothLeService.ACTION_GATT_DISCONNECTED);
        intentFilter.addAction(BluetoothLeService.ACTION_GATT_SERVICES_DISCOVERED);
        intentFilter.addAction(BluetoothLeService.ACTION_DATA_AVAILABLE);
        return intentFilter;
    }
}
</code></pre>

<p>I am using <code>Google's</code> official <a href=""https://github.com/googlesamples/android-BluetoothLeGatt"" rel=""nofollow noreferrer"">BluetoothLeGatt</a> example</p>
",4675078,,4675078,,2015-07-16 12:23:22,2016-04-28 4:23:13,BluetoothLE BluetoothAdapter startLeScan(): null,<android><bluetooth><bluetooth-lowenergy>,1,1,,,
Android,47451783,1,47711258,,2017,,1,293,"<p>I checkout <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">Camera2Basic</a> (google sample)</p>

<p>and I just changed this method in the class <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"" rel=""nofollow noreferrer"">Camera2BasicFragment</a> in order to take a photo with front camera :</p>

<pre><code>  private void setUpCameraOutputs(int width, int height) {
        Activity activity = getActivity();
        CameraManager manager = (CameraManager) activity.getSystemService(Context.CAMERA_SERVICE);
        try {
//            for (String cameraId : manager.getCameraIdList()) {

            mCameraId = ""1"";
                CameraCharacteristics characteristics
                        = manager.getCameraCharacteristics(mCameraId);

                // We don't use a front facing camera in this sample.
                Integer facing = characteristics.get(CameraCharacteristics.LENS_FACING);
//                if (facing != null &amp;&amp; facing == CameraCharacteristics.LENS_FACING_FRONT) {
//                    continue;
//                }

                StreamConfigurationMap map = characteristics.get(
                        CameraCharacteristics.SCALER_STREAM_CONFIGURATION_MAP);
//                if (map == null) {
//                    continue;
//                }

                // For still image captures, we use the largest available size.
                Size largest = Collections.max(
                        Arrays.asList(map.getOutputSizes(ImageFormat.JPEG)),
                        new CompareSizesByArea());
                mImageReader = ImageReader.newInstance(largest.getWidth(), largest.getHeight(),
                        ImageFormat.JPEG, /*maxImages*/2);
                mImageReader.setOnImageAvailableListener(
                        mOnImageAvailableListener, mBackgroundHandler);

                // Find out if we need to swap dimension to get the preview size relative to sensor
                // coordinate.
                int displayRotation = activity.getWindowManager().getDefaultDisplay().getRotation();
                //noinspection ConstantConditions
                mSensorOrientation = characteristics.get(CameraCharacteristics.SENSOR_ORIENTATION);
                boolean swappedDimensions = false;
                switch (displayRotation) {
                    case Surface.ROTATION_0:
                    case Surface.ROTATION_180:
                        if (mSensorOrientation == 90 || mSensorOrientation == 270) {
                            swappedDimensions = true;
                        }
                        break;
                    case Surface.ROTATION_90:
                    case Surface.ROTATION_270:
                        if (mSensorOrientation == 0 || mSensorOrientation == 180) {
                            swappedDimensions = true;
                        }
                        break;
                    default:
                        Log.e(TAG, ""Display rotation is invalid: "" + displayRotation);
                }

                Point displaySize = new Point();
                activity.getWindowManager().getDefaultDisplay().getSize(displaySize);
                int rotatedPreviewWidth = width;
                int rotatedPreviewHeight = height;
                int maxPreviewWidth = displaySize.x;
                int maxPreviewHeight = displaySize.y;

                if (swappedDimensions) {
                    rotatedPreviewWidth = height;
                    rotatedPreviewHeight = width;
                    maxPreviewWidth = displaySize.y;
                    maxPreviewHeight = displaySize.x;
                }

                if (maxPreviewWidth &gt; MAX_PREVIEW_WIDTH) {
                    maxPreviewWidth = MAX_PREVIEW_WIDTH;
                }

                if (maxPreviewHeight &gt; MAX_PREVIEW_HEIGHT) {
                    maxPreviewHeight = MAX_PREVIEW_HEIGHT;
                }

                // Danger, W.R.! Attempting to use too large a preview size could  exceed the camera
                // bus' bandwidth limitation, resulting in gorgeous previews but the storage of
                // garbage capture data.
                mPreviewSize = chooseOptimalSize(map.getOutputSizes(SurfaceTexture.class),
                        rotatedPreviewWidth, rotatedPreviewHeight, maxPreviewWidth,
                        maxPreviewHeight, largest);

                // We fit the aspect ratio of TextureView to the size of preview we picked.
                int orientation = getResources().getConfiguration().orientation;
                if (orientation == Configuration.ORIENTATION_LANDSCAPE) {
                    mTextureView.setAspectRatio(
                            mPreviewSize.getWidth(), mPreviewSize.getHeight());
                } else {
                    mTextureView.setAspectRatio(
                            mPreviewSize.getHeight(), mPreviewSize.getWidth());
                }

                // Check if the flash is supported.
                Boolean available = characteristics.get(CameraCharacteristics.FLASH_INFO_AVAILABLE);
                mFlashSupported = available == null ? false : available;

//            }
        } catch (CameraAccessException e) {
            e.printStackTrace();
        } catch (NullPointerException e) {
            // Currently an NPE is thrown when the Camera2API is used but not supported on the
            // device this code runs.
            ErrorDialog.newInstance(getString(R.string.camera_error))
                    .show(getChildFragmentManager(), FRAGMENT_DIALOG);
        }
    }
</code></pre>

<p>The front preview is displayed but I could not take photo. </p>

<p><a href=""https://i.stack.imgur.com/fwJhA.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/fwJhA.jpg"" alt=""enter image description here""></a></p>

<p>And each time I trigger the button Picture, this log is displayed : </p>

<blockquote>
  <p>11-23 10:08:44.774 15690-16475/com.example.android.camera2basic
  W/LegacyRequestMapper: convertRequestToMetadata - Ignoring
  android.lens.focusDistance false, only 0.0f is supported 11-23
  10:08:44.829 15690-16475/com.example.android.camera2basic
  W/LegacyRequestMapper: convertRequestMetadata - control.awbRegions
  setting is not supported, ignoring value 11-23 10:08:44.832
  15690-16475/com.example.android.camera2basic W/LegacyRequestMapper:
  Only received metering rectangles with weight 0. 11-23 10:08:44.833
  15690-16475/com.example.android.camera2basic W/LegacyMetadataMapper:
  convertAfModeToLegacy - ignoring unsupported mode 4, defaulting to
  fixed</p>
</blockquote>

<p>Does anyone has an idea how to fix this problem ? </p>
",4792517,,4792517,,2017-11-23 11:03:03,2018-02-16 14:58:42,Could not take photo with front camera 2,<android><android-camera><android-camera2><front-camera>,1,0,,,
Android,31064433,1,31064496,,2015,,1,535,"<p>I've forked a version of this</p>

<p><a href=""https://github.com/googlesamples/android-topeka"" rel=""nofollow"">https://github.com/googlesamples/android-topeka</a></p>

<p>a few days ago. </p>

<p>I'm making changes to it in Android Studio. Now changes have been committed to the original project at</p>

<p><a href=""https://github.com/googlesamples/android-topeka"" rel=""nofollow"">https://github.com/googlesamples/android-topeka</a></p>

<p>I want to merge my changes I've been making locally with that version. But at the same time I want to keep my version private? </p>

<p>How can I COMPARE  my changes locally with the master? </p>
",1334828,,1334828,,2015-06-26 3:37:22,2015-06-26 3:39:38,How to keep forked version of github sycned,<github><android-studio><version-control><fork>,1,2,,,
Android,48198374,1,,,2018,,1,301,"<p>From <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">Camera2Basic</a> example, I modified the code to make the program continuously takes still photo every 2 seconds. It runs fine but after a while it enters the same statecallback condition and does not take picture anymore:</p>

<pre><code>case STATE_WAITING_PRECAPTURE: {
                // CONTROL_AE_STATE can be null on some devices
                Integer aeState = result.get(CaptureResult.CONTROL_AE_STATE);
                if (aeState == null ||
                        aeState == CaptureResult.CONTROL_AE_STATE_PRECAPTURE ||
                        aeState == CaptureRequest.CONTROL_AE_STATE_FLASH_REQUIRED) {
                    mState = STATE_WAITING_NON_PRECAPTURE;
                }
                else
                {
                    Log.e(TAG,""aeState = "" + aeState);
                }
                break;
            }
</code></pre>

<p>The log keeps printing aeState = 2, which is CONTROL_AE_STATE_CONVERGED. My question is why the code does nothing when the AE is converged? Why not change state to STATE_WAITING_NON_PRECAPTURE? </p>

<p>I mean why not doing this instead?</p>

<pre><code>case STATE_WAITING_PRECAPTURE: {
            // CONTROL_AE_STATE can be null on some devices
            Integer aeState = result.get(CaptureResult.CONTROL_AE_STATE);
            if (aeState == null ||
                    aeState == CaptureResult.CONTROL_AE_STATE_CONVERGED ||
                    aeState == CaptureResult.CONTROL_AE_STATE_PRECAPTURE ||
                    aeState == CaptureRequest.CONTROL_AE_STATE_FLASH_REQUIRED) {
                mState = STATE_WAITING_NON_PRECAPTURE;
            }
            else
            {
                Log.e(TAG,""aeState = "" + aeState);
            }
            break;
        }
</code></pre>

<p>ps: Where should I call takePicture() if I want to take photo every 2 seconds? Currently I call it in the CaptureCallback, but look like there some race condition because the CaptureCallback is in the background thread.</p>

<p>Thanks.</p>
",1726452,,1726452,,2018-01-11 8:18:33,2018-01-11 8:18:33,Continuously take still photo with android Camera2,<android><android-camera><android-camera2>,1,1,,,
Android,48524083,1,,,2018,,1,452,"<p>I have a problem with android camera2. I started from <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">camera2Basic</a> and changed it so that preview and capture takes manual pictures. So I changed <code>CameraDevice.TEMPLATE_PREVIEW</code> and <code>CameraDevice.TEMPLATE_STILL_CAPTURE</code> both to <code>CameraDevice.TEMPLATE_MANUAL</code>.</p>

<p>And I removed the preview callback, because without autofocus there is no need for it. So here is how I take a picture:</p>

<pre><code>final CameraCaptureSession.CaptureCallback captureCallback
                = new CameraCaptureSession.CaptureCallback() {

            @Override
            public void onCaptureCompleted(@NonNull CameraCaptureSession session,
                                           @NonNull CaptureRequest request,
                                           @NonNull TotalCaptureResult result) {
                showToast(""Saved"");
                unlockFocus();
            }
        };

mCaptureSession.stopRepeating();
mCaptureSession.abortCaptures();
mCaptureSession.capture(mCaptureRequest, captureCallback, null);
</code></pre>

<p>And in <code>unlockFocus</code>:</p>

<pre><code>mCaptureSession.capture(mPreviewRequest, null, mBackgroundHandler);
mCaptureSession.setRepeatingRequest(mPreviewRequest, mPreviewCaptureCallback,
                mBackgroundHandler);
</code></pre>

<p>But it works for 5 pictures every time, and then it never goes in <code>onCaptureCompleted</code> in the callback and I can't figure out why. </p>

<p>Can someone help me with this ? </p>

<p><em>EDIT:</em></p>

<p><code>captureCallback</code>'s <code>onCaptureFailed</code> says that the image has been taken but the capture failed with <code>reason == 0</code> (Error in the framework but I don't know where, and how it could even work for 5 first captures) and the sequence id always go up by two when taking a picture. </p>

<p>So it means that the error occur whenever <code>seqid &gt; 10</code>, is there a link ?</p>
",9013967,,9013967,,2018-01-31 8:29:28,2018-01-31 10:16:31,Camera2 API Working Only for First 5 Pictures,<java><android><android-camera2>,1,3,,2018-01-31 10:18:14,
Android,48608334,1,,,2018,,1,264,"<p>I am trying to develop android face recognition app. Starting from <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker"" rel=""nofollow noreferrer"">Google Vision API FaceTracker example</a> - <strong>how can I get camera preview FPS value</strong>? </p>

<p>I understand that I can set requested FPS on <code>CameraSource.Builder()</code> with <code>setRequestedFps()</code>, but I want <strong>actual</strong> FPS value updated every second or every new frame. Is it possible to get or calculate it?</p>
",2568647,,2649012,,2018-02-04 15:17:24,2018-02-04 16:02:44,Google Vision API CameraSourcePreview FPS,<android><android-camera><frame-rate><face-recognition><google-vision>,1,0,,,
Android,43134675,1,43134808,,2017,,1,527,"<p>I'm trying to follow the same example as in <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-dagger"" rel=""nofollow noreferrer"">here</a> by creating a Repository pattern with DI.
The problem is that I get the following error:</p>

<blockquote>
  <p>""Error:(16, 20) error: @mvp.model.di.scope.Local
  mvp.model.repository.local.GameLocalDataSource cannot be provided
  without an @Provides-annotated method. @mvp.model.di.scope.Local
  mvp.model.repository.local.GameLocalDataSource is injected at
  mvp.model.repository.GameRepository.(gameLocalDataSource, )
  mvp.model.repository.GameRepository is provided at
  mvp.model.di.component.RepositoryComponent.getGameRepository()""</p>
</blockquote>

<p>Here's the code related to the app:</p>

<pre><code>public class GameApplication extends Application {
private RepositoryComponent repositoryComponent;

@Override
public void onCreate() {
    super.onCreate();
    if (LeakCanary.isInAnalyzerProcess(this)) {
        // This process is dedicated to LeakCanary for heap analysis.
        // You should not init your app in this process.
        return;
    }
    LeakCanary.install(this);
    // Normal app init code...
    repositoryComponent = DaggerRepositoryComponent.builder()
            .applicationModule(new ApplicationModule((getApplicationContext())))
            .build();
}

public RepositoryComponent getRepositoryComponent() {
    return repositoryComponent;
}
}
</code></pre>

<p>This is my <code>RepositoryComponent</code>:</p>

<pre><code>@Singleton
@Component(modules = {RepositoryModule.class, ApplicationModule.class})
public interface RepositoryComponent {
    GameRepository getGameRepository();
}
</code></pre>

<p>Here's the <code>RepositoryModule</code>:</p>

<pre><code>    @Module
public class RepositoryModule {
    @Singleton
    @Provides
    @Local
    GameDataSource provideLocalDataSource(Context context) {
        return new GameLocalDataSource(context);
    }

    @Singleton
    @Provides
    @Remote
    GameDataSource provideRemoteDataSource() {
        return new GameRemoteDataSource();
    }
}
</code></pre>

<p>And finally, the <code>ApplicationModule</code>:</p>

<pre><code>    @Module
public final class ApplicationModule {
    private Context context;

    public ApplicationModule(Context context) {
        this.context = context;
    }

    @Provides
    Context providesContext() {
        return context;
    }
}
</code></pre>

<p>Here's most of my <code>GameRepository</code> class:</p>

<pre><code>@Singleton
public class GameRepository implements GameDataSource {
    private GameDataSource remoteDataSource;
    private GameDataSource localDataSource;

    @Inject
    public GameRepository(@Local GameLocalDataSource gameLocalDataSource, @Remote GameRemoteDataSource gameRemoteDataSource) {
        remoteDataSource = gameRemoteDataSource;
        localDataSource = gameLocalDataSource;
    }
</code></pre>

<p>Also, as in the mentioned example, I created a couple of scopes, <code>@Local</code> and <code>@Remote</code> since my two data sources have the same type and Dagger needs to differentiate them.</p>

<pre><code>@Qualifier
@Documented
@Retention(RetentionPolicy.RUNTIME)
public @interface Local {

}
</code></pre>

<p>The rest of the code I have related to dagger, is just the <code>@Inject</code> in the constructors where I want to inject my dependencies.
Also, the <code>DaggerRepositoryComponent</code> is never generated in the <code>GameApplication</code> class.</p>

<p>Thanks a lot for the help in advance!</p>
",257948,,1083957,,2017-10-24 1:08:47,2017-10-24 1:08:47,Dagger 2 LocalDataSource cannot be provided without @Provides annotated method,<java><android><dependency-injection><dagger-2><dagger>,1,1,,,
Android,44181562,1,,,2017,,1,667,"<p>Want to design an app that registers the user with password field as fingerprint, got a <a href=""https://github.com/googlesamples/android-FingerprintDialog"" rel=""nofollow noreferrer"">google sample code from github</a>, It asks the user to add the fingerprint in <strong><em>Settings</em></strong> as many as we want and it authenticates the user from the existing fingerprints by calling the authenticate() of the FingerprintManager</p>

<p>How could I register a new fingerprint from app and get it stored in sqlite or in cloud?</p>

<p>Is there any external Bluetooth Biometric sensor and SDK support for android?</p>
",2459623,,2459623,,2017-05-25 14:34:23,2017-05-25 14:34:23,[Android]Registering fingerprints in application,<android><android-fingerprint-api>,1,3,,,
Android,48241802,1,,,2018,,1,224,"<p>Im trying to implement Dagger 2 in my Android app, and got stuck it this problem:
The ActivityModels I use are created with an implementation of ViewModelProvider.Factory (as the <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample"" rel=""nofollow noreferrer"">example here</a>). I attach the model to the activity by injecting the factory and calling:</p>

<pre><code>viewModel = ViewModelProviders.of(this, viewModelFactory).get(MyActivityViewModel.class);
</code></pre>

<p>In another part of the app Im trying to use a Command class to make changes to the model, so I injected MyActivityViewModel directly to it.</p>

<pre><code>@Inject
public SearchCommand(MyActivityViewModel viewModel) {
    super(viewModel);
}
</code></pre>

<p>The problem: The injected ViewModel is a new instance of the view model, different than the one instantiated in the Activity. Whatever I try I dont manage to solve that Any ideas?</p>
",2919354,,2649012,,2018-01-13 16:52:33,2018-06-05 4:05:58,Dagger 2 - two instances of the same View model are created,<android><viewmodel><dagger-2><dagger.android>,1,2,,,
Android,34627394,1,34646908,,2016,,1,1750,"<p>I'm currently using Android Studio 2.0 preview 4. I have followed the guide from <a href=""http://tools.android.com/tech-docs/new-build-system/gradle-experimental"" rel=""nofollow noreferrer"">tools.android.com</a> and tested <a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow noreferrer"">NDK samples</a> from github. The samples worked without a hitch, but when I implemented it on the SIPdroid project, it throws this error when I rebuild the project: </p>

<blockquote>
  <p>Error:(78, 1) A problem occurred configuring project ':app'.
  Exception thrown while executing model rule: model.android
  Cannot set readonly property: minSdkVersion for class: com.android.build.gradle.managed.ProductFlavor_Impl</p>
</blockquote>

<p>when I try to use gradle project sync it gives this error:</p>

<blockquote>
  <p>Error:Unable to load class 'com.android.build.gradle.managed.ProductFlavor_Impl'.
  Possible causes for this unexpected error include:<ul><li>You are using JDK version 'java version ""1.7.0_79""'. Some versions of JDK 1.7 (e.g. 1.7.0_10) may cause class loading errors in Gradle.
  Please update to a newer version (e.g. 1.7.0_67).
  Open JDK Settings</li><li>Gradle's dependency cache may be corrupt (this sometimes occurs after a network connection timeout.)
  Re-download dependencies and sync project (requires network)</li><li>The state of a Gradle build process (daemon) may be corrupt. Stopping all Gradle daemons may solve this problem.
  Stop Gradle build processes (requires restart)</li><li>Your project may be using a third-party plugin which is not compatible with the other plugins in the project or the version of Gradle requested by the project.</li></ul>In the case of corrupt Gradle processes, you can also try closing the IDE and then killing all Java processes.</p>
</blockquote>

<p>Android project structure now looks like this. previously the jni folder is separated from the java folder. 
<a href=""https://i.stack.imgur.com/D0fYx.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/D0fYx.png"" alt=""enter image description here""></a></p>

<p>Here's my config:</p>

<p>SIPdroid/app/build.gradle</p>

<pre><code>apply plugin: 'com.android.model.application'

model {
    android {
        compileSdkVersion = 23
        buildToolsVersion = ""23.0.2""

        defaultConfig.with {
            applicationId = ""com.test.sipdroid""
            minSdkVersion = 15
            targetSdkVersion = 23
            versionCode = 1
            versionName = ""1.0""
        }
    }

    compileOptions.with {
        sourceCompatibility = JavaVersion.VERSION_1_7
        targetCompatibility = JavaVersion.VERSION_1_7
    }

    /*
     * native build settings
     */
    android.ndk {
        moduleName = ""SIPdroid""
        /*
         * Other ndk flags configurable here are
         * cppFlags.add(""-fno-rtti"")
         * cppFlags.add(""-fno-exceptions"")
         * ldLibs.addAll([""android"", ""log""])
         * stl       = ""system""
         */
    }

    android.sources {
        main.java {
            source {
                srcDir 'src'
            }
        }
        main.jni {
            source {
                srcDirs = []
            }
        }
        main.jniLibs {
            source {
                srcDirs = ['src/main/libs']
            }
        }
    }

    android.buildTypes {
        release {
            minifyEnabled = false
            proguardFiles.add(file('proguard-rules.txt'))
        }
    }

    android.productFlavors {
        // for detailed abiFilter descriptions, refer to ""Supported ABIs"" @
        // https://developer.android.com/ndk/guides/abis.html#sa
        create(""arm"") {
            ndk.abiFilters.add(""armeabi"")
        }
        create(""arm7"") {
            ndk.abiFilters.add(""armeabi-v7a"")
        }
        create(""arm8"") {
            ndk.abiFilters.add(""arm64-v8a"")
        }
        create(""x86"") {
            ndk.abiFilters.add(""x86"")
        }
        create(""x86-64"") {
            ndk.abiFilters.add(""x86_64"")
        }
        create(""mips"") {
            ndk.abiFilters.add(""mips"")
        }
        create(""mips-64"") {
            ndk.abiFilters.add(""mips64"")
        }
        // To include all cpu architectures, leaves abiFilters empty
        create(""all"")
    }
}

dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    testCompile 'junit:junit:4.12'
    compile 'com.android.support:appcompat-v7:23.1.1'
    compile 'com.android.support:design:23.1.1'
}
</code></pre>

<p>SIPdroid/build.gradle</p>

<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.

buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle-experimental:0.4.0'
//        classpath 'com.android.tools.build:gradle:1.3.1'

        // NOTE: Do not place your application dependencies here; they belong
        // in the individual module build.gradle files
    }
}

allprojects {
    repositories {
        jcenter()
    }
}
</code></pre>

<p>SIPdroid/gradle-wrapper.properties</p>

<pre><code>#Mon Jan 04 16:06:26 PHT 2016
distributionBase=GRADLE_USER_HOME
distributionPath=wrapper/dists
zipStoreBase=GRADLE_USER_HOME
zipStorePath=wrapper/dists
distributionUrl=https\://services.gradle.org/distributions/gradle-2.8-all.zip
</code></pre>

<p>SIPdroid/local.properties</p>

<pre><code>ndk.dir=/path/Android/sdk/ndk-bundle
sdk.dir=/path/Android/sdk
</code></pre>
",2497859,,2497859,,2016-01-06 7:38:20,2016-01-07 4:11:56,SIPdroid Android Studio ndk integration error,<android><android-studio><gradle><android-ndk><sipdroid>,1,0,,,
Android,34070557,1,,,2015,,1,997,"<p>I downloaded an Android camera2 <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">demo</a>, it ran well. </p>

<p>Now I want to get the intrinsic matrix of the camera by querying the <a href=""http://developer.android.com/reference/android/hardware/camera2/CameraCharacteristics.html#LENS_INTRINSIC_CALIBRATION"" rel=""nofollow"">CameraCharacteristics</a>.</p>

<p>My code is </p>

<pre><code>private void setUpCameraOutputs(int width, int height) {
    Activity activity = getActivity();
    CameraManager manager = (CameraManager) activity.getSystemService(Context.CAMERA_SERVICE);
    try {
        for (String cameraId : manager.getCameraIdList()) {
            CameraCharacteristics characteristics
                    = manager.getCameraCharacteristics(cameraId);
            float[] intrinsic = new float[5];
            intrinsic = characteristics.get(CameraCharacteristics.LENS_INTRINSIC_CALIBRATION);
    //...... leave out the following part
        }
    }
</code></pre>

<p>The intrinsic is expected to be a 5-element array but <code>intrinsic = characteristics.get(CameraCharacteristics.LENS_INTRINSIC_CALIBRATION)</code> returns null.</p>
",4158590,,2546444,,2015-12-03 16:34:11,2015-12-03 19:09:13,Android camera2 Lens intrinsic calibration,<java><android><android-camera><android-hardware><android-camera2>,1,3,,,
Android,48382642,1,,,2018,,1,90,"<p>I'm starting to develop Android Wear watchfaces using <a href=""https://github.com/googlesamples/android-WatchFace"" rel=""nofollow noreferrer"">Google's Sample app</a> as a reference. I am running in to an issue where I do <em>not</em> want color tinting on my complications. Specifically, the google assistant complication. However, no matter what I do, the google assistant complication will appear with some type of color tinting.</p>

<p>When looking through Google's code, I can only find a single reference to color tinting the complication:</p>

<pre><code>    private void setComplicationsActiveAndAmbientColors(int primaryComplicationColor) {
        int complicationId;
        ComplicationDrawable complicationDrawable;

        for (int i = 0; i &lt; COMPLICATION_IDS.length; i++) {
            complicationId = COMPLICATION_IDS[i];
            complicationDrawable = mComplicationDrawableSparseArray.get(complicationId);

            if (complicationId == BACKGROUND_COMPLICATION_ID) {
                // It helps for the background color to be black in case the image used for the
                // watch face's background takes some time to load.
                complicationDrawable.setBackgroundColorActive(Color.BLACK);
            } else {
                // Active mode colors.
                complicationDrawable.setBorderColorActive(primaryComplicationColor);
                complicationDrawable.setRangedValuePrimaryColorActive(primaryComplicationColor);

                // Ambient mode colors.
                Log.d(""TAG Type"", ""Failed at complication "" + i);
                complicationDrawable.setIconColorActive(Color.WHITE);
                complicationDrawable.setBorderColorAmbient(Color.WHITE);
                complicationDrawable.setRangedValuePrimaryColorAmbient(Color.WHITE);
            }
        }
    }
</code></pre>

<p>When I comment out </p>

<pre><code>complicationDrawable.setIconColorActive(Color.WHITE);
</code></pre>

<p>The color is still tinted white. If I were to uncomment and change the value to something like Color.BLUE, the icon will appear blue.</p>

<p><a href=""https://i.stack.imgur.com/R2cVc.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/R2cVc.png"" alt=""Watchface with Google Assistant color tinting""></a></p>

<p>I know it is possible to disable complication tinting because one of my Fossil watchfaces displays the Google Assistant logo the way I wish. </p>

<p><a href=""https://i.stack.imgur.com/ujYPX.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/ujYPX.png"" alt=""enter image description here""></a></p>

<p>Does anyone know how I can disable color tinting for my complications?</p>
",1568480,,,,,2018-01-25 18:38:24,Prevent Android Wear Complication Tinting,<java><android><wear-os><android-wear-complication>,1,1,,,
Android,29556406,1,,,2015,,1,199,"<p>I'm trying this sample: <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a></p>

<p>When I change to Front Camera, the Camera is scaled. When I stop and resume the application, it can work perfect.</p>

<p>I'm using Nexus 7 2013 OS 5.0.2</p>

<p>I change to Front Camera by comment this code:</p>

<pre><code>// We don't use a front facing camera in this sample.
if (characteristics.get(CameraCharacteristics.LENS_FACING)
        == CameraCharacteristics.LENS_FACING_FRONT) {

//                    continue;
//                }
</code></pre>

<p><img src=""https://i.stack.imgur.com/oJXuh.png"" alt=""enter image description here""></p>
",1735499,,192373,,2015-04-10 12:36:12,2015-04-23 21:44:21,Camera2 is scaled on Front Camera of Nexus 7 2013,<android><camera>,1,0,,,
Android,41680922,1,,,2017,,1,115,"<p>I am trying to set up a viewPager with two fragments. I am using the v4 support library for the FragmentPagerAdapter as in the sample Android Activity in Android Studio, this is how it looks:</p>

<pre><code>public class SectionsPagerAdapter extends FragmentPagerAdapter {

    SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {

        switch (position){
            case 0:
                return FirstFragment.newInstance();
            case 1:
                return CameraFragment.newInstance();
            default:
                return null;
        }
    }

    @Override
    public int getCount() {
        // Show 2 total pages.
        return 2;
    }

}
</code></pre>

<p>My issue comes because I try to implement the Google <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">Camera2</a> example as my camera fragment. These Fragments are native Fragments, while the PagerAdapter expects support.v4.Fragments.</p>

<p>I have tried to use the v13 FragmentPagerAdapter, but this cannot use the v4.FragmentManager, and it doesn't have its own FragmentManager.</p>

<p>I also tried converting the CameraFragment to a v4 Fragment, but there is some code in there that doesn't compile to the v4 support library. </p>

<p>How do I solve this?</p>
",3052244,,,,,2017-04-25 13:32:58,Camera2 in FragmentPagerAdapter,<android><android-fragments><camera><android-viewpager>,1,2,,,
Android,31734248,1,,,2015,,1,230,"<p>In the <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""nofollow"">Android Universal Music Player</a>, there is an icon which is displayed for a list. However, that icon is not shown. The <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer/blob/b729def3679cac2d66136e8fdc9237d01bfb485c/mobile/src/main/java/com/example/android/uamp/MusicService.java#L344"" rel=""nofollow"">original source code</a>, set the icon as follow: </p>

<pre><code>        if (MEDIA_ID_ROOT.equals(parentMediaId)) {
            LogHelper.d(TAG, ""OnLoadChildren.ROOT"");
            mediaItems.add(new MediaBrowser.MediaItem(
                    new MediaDescription.Builder()
                        .setMediaId(MEDIA_ID_MUSICS_BY_GENRE)
                        .setTitle(getString(R.string.browse_genres))
                        .setIconUri(Uri.parse(""android.resource://"" +
                                ""com.example.android.uamp/drawable/ic_by_genre""))
                        .setSubtitle(getString(R.string.browse_genre_subtitle))
                        .build(), MediaBrowser.MediaItem.FLAG_BROWSABLE
            ));
}
</code></pre>

<p>I thought there might be issue with the way the uri is handled, so I changed it to the following: </p>

<pre><code> .setIconUri(Uri.parse(""android.resource://"" +
                                getPackageName() + ""/"" + R.drawable.ic_by_genre))
</code></pre>

<p>The icon exist in the resource file, however it is not displayed and instead of icon it is simply blank. </p>

<p>Did anybody face similar issue when they tried this sample project? and how to fix it?</p>
",4576720,,4576720,,2015-07-30 21:27:45,2015-07-30 21:54:45,Android Universal Music Player ic_by_genre is not displayed,<java><android><android-layout><android-resources>,1,1,,,
Android,41713056,1,,,2017,,1,375,"<p>I want to make live filter in camera like Snapchat app. This app based on <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker"" rel=""nofollow noreferrer"">Google Vision Face Tracker</a>. </p>

<p>I have these following code in FaceGraphic.java:</p>

<pre><code>package com.google.android.gms.samples.vision.face.facetracker;

import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;

import com.google.android.gms.samples.vision.face.facetracker.ui.camera.GraphicOverlay;
import com.google.android.gms.vision.face.Face;
import com.google.android.gms.vision.face.Landmark;

/**
 * Graphic instance for rendering face position, orientation, and landmarks within an associated
* graphic overlay view.
*/
class FaceGraphic extends GraphicOverlay.Graphic {
    private static final float FACE_POSITION_RADIUS = 10.0f;
    private static final float ID_TEXT_SIZE = 40.0f;
    private static final float ID_Y_OFFSET = 50.0f;
    private static final float ID_X_OFFSET = -50.0f;
    private static final float BOX_STROKE_WIDTH = 5.0f;

    private static final int COLOR_CHOICES[] = {
        Color.BLUE,
        Color.CYAN,
        Color.GREEN,
        Color.MAGENTA,
        Color.RED,
        Color.WHITE,
        Color.YELLOW
    };
    private static int mCurrentColorIndex = 0;

    private Paint mFacePositionPaint;
    private Paint mIdPaint;
    private Paint mBoxPaint;

    private volatile Face mFace;
    private int mFaceId;
    private float mFaceHappiness;

    private Bitmap bitmap;
    private Bitmap sunglasses;

    FaceGraphic(GraphicOverlay overlay) {
        super(overlay);

        mCurrentColorIndex = (mCurrentColorIndex + 1) % COLOR_CHOICES.length;
        final int selectedColor = COLOR_CHOICES[mCurrentColorIndex];

        mFacePositionPaint = new Paint();
        mFacePositionPaint.setColor(selectedColor);

        mIdPaint = new Paint();
        mIdPaint.setColor(selectedColor);
        mIdPaint.setTextSize(ID_TEXT_SIZE);

        mBoxPaint = new Paint();
        mBoxPaint.setColor(selectedColor);
        mBoxPaint.setStyle(Paint.Style.STROKE);
        mBoxPaint.setStrokeWidth(BOX_STROKE_WIDTH);

        bitmap = BitmapFactory.decodeResource(getOverlay().getContext().getResources(), R.drawable.sunglasses);
        sunglasses = bitmap;

    }

    void setId(int id) {
        mFaceId = id;
    }


    /**
     * Updates the face instance from the detection of the most recent frame.  Invalidates the
     * relevant portions of the overlay to trigger a redraw.
     */
    void updateFace(Face face) {
        mFace = face;

        sunglasses = Bitmap.createScaledBitmap(bitmap, (int) scaleX(face.getWidth()),
                (int) scaleY(((bitmap.getHeight() * face.getWidth()) / bitmap.getWidth())), false);

        postInvalidate();
    }

    /**
     * Draws the face annotations for position on the supplied canvas.
     */
    @Override
    public void draw(Canvas canvas) {
        Face face = mFace;

        if (face == null) {
            return;
        }

        float x = translateX(face.getPosition().x + face.getWidth() / 2);
        float y = translateY(face.getPosition().y + face.getHeight() / 2);

        // Draws a bounding box around the face.
        float xOffset = scaleX(face.getWidth() / 2.0f);
        float yOffset = scaleY(face.getHeight() / 2.0f);
        float left = x - xOffset;
        float top = y - yOffset;
        float right = x + xOffset;
        float bottom = y + yOffset;
        canvas.drawRect(left, top, right, bottom, mBoxPaint);

        //Get the left eye to place the sunglasses over the eyes
        float eyeY = top + sunglasses.getHeight() / 2;
        for(Landmark l : face.getLandmarks()){
            if(l.getType() == Landmark.LEFT_EYE){
                eyeY = l.getPosition().y + sunglasses.getHeight() / 2;
            }
        }
        canvas.drawBitmap(sunglasses, left, eyeY, new Paint());

    }
}
</code></pre>

<p>I create function to take a photo in <a href=""https://gist.github.com/elraghifary/ae7f4ef221f2e0a7c2571889a8b1a07d"" rel=""nofollow noreferrer"">FaceTrackerActivity.java</a>:</p>

<pre><code>findViewById(R.id.capture).setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            mCameraSource.takePicture(null, new CameraSource.PictureCallback() {

                @Override
                public void onPictureTaken(byte[] bytes) {
                    Log.d(TAG, ""onPictureTaken - jpeg"");
                    capturePic(bytes);
                }

                private void capturePic(byte[] bytes) {
                    try {
                        String mainpath = getExternalStorageDirectory() + separator + ""MaskIt"" + separator + ""images"" + separator;
                        File basePath = new File(mainpath);
                        if (!basePath.exists())
                            Log.d(""CAPTURE_BASE_PATH"", basePath.mkdirs() ? ""Success"": ""Failed"");
                        File captureFile = new File(mainpath + ""photo_"" + getPhotoTime() + "".jpg"");
                        if (!captureFile.exists())
                            Log.d(""CAPTURE_FILE_PATH"", captureFile.createNewFile() ? ""Success"": ""Failed"");
                        FileOutputStream stream = new FileOutputStream(captureFile);
                        stream.write(bytes);
                        stream.flush();
                        stream.close();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }

                private String getPhotoTime(){
                    SimpleDateFormat sdf=new SimpleDateFormat(""ddMMyy_hhmmss"");
                    return sdf.format(new Date());
                }
            });
        }
    });
</code></pre>

<p>First, open app and give permission to access camera, and app will detect faces and draw bitmap (sunglasses) to them. I create button ""Take a picture"" with id <em>capture</em>.</p>

<p>This is my main.xml:
    </p>

<pre><code>&lt;LinearLayout
    xmlns:android=""http://schemas.android.com/apk/res/android""
    xmlns:app=""http://schemas.android.com/apk/res-auto""
    xmlns:tools=""http://schemas.android.com/tools""
    android:id=""@+id/topLayout""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""
    android:keepScreenOn=""true""
    android:weightSum=""1""
    android:orientation=""vertical""&gt;

  &lt;LinearLayout
      android:orientation=""horizontal""
      android:layout_width=""match_parent""
      android:layout_height=""64dp""&gt;

    &lt;Button
        android:text=""Sunglasses""
        android:layout_width=""wrap_content""
        android:layout_height=""wrap_content""
        android:id=""@+id/sun""
        android:layout_weight=""1""
        tools:ignore=""HardcodedText"" /&gt;

    &lt;Button
        android:text=""Helmet""
        android:layout_width=""wrap_content""
        android:layout_height=""wrap_content""
        android:id=""@+id/helm""
        android:layout_weight=""1""
        tools:ignore=""HardcodedText"" /&gt;

    &lt;Button
        android:text=""Mustache""
        android:layout_width=""wrap_content""
        android:layout_height=""wrap_content""
        android:id=""@+id/must""
        android:layout_weight=""1""
        tools:ignore=""HardcodedText"" /&gt;
  &lt;/LinearLayout&gt;
&lt;com.google.android.gms.samples.vision.face.facetracker.ui.camera.CameraSourcePreview
      android:id=""@+id/preview""
      android:layout_width=""match_parent""
      android:layout_height=""0dp""
      android:layout_weight=""0.99""
      android:weightSum=""1""&gt;
    &lt;com.google.android.gms.samples.vision.face.facetracker.ui.camera.GraphicOverlay
        android:id=""@+id/faceOverlay""
        android:layout_width=""match_parent""
        android:layout_height=""match_parent""
        android:layout_weight=""0.79"" /&gt;

&lt;/com.google.android.gms.samples.vision.face.facetracker.ui.camera.CameraSourcePreview&gt;

  &lt;Button
      android:id=""@+id/capture""
      android:layout_width=""match_parent""
      android:layout_height=""wrap_content""
      android:text=""Take a Picture""
      tools:ignore=""HardcodedText"" /&gt;
    &lt;/LinearLayout&gt;
</code></pre>

<p>How can I get bitmap that I draw in FaceGraphic? If I take a photo, I only get the default photo without bitmap. I want to take photo with user faces and bitmap and save into gallery. Sorry, I hope you understand my question. Thank you.</p>
",4670082,,1000551,,2017-01-18 21:02:36,2017-01-18 21:02:36,Take photo with bitmap in android camera,<android><bitmap><android-bitmap><google-vision>,1,0,,,
Android,29848140,1,29861971,,2015,,1,1138,"<p>I' ve downloaded the google's sample project in the subject from this link:
<a href=""https://github.com/googlesamples/android-XYZTouristAttractions"" rel=""nofollow"">https://github.com/googlesamples/android-XYZTouristAttractions</a></p>

<p>When trying to build this project i get this error (sorry for long trace):</p>

<pre><code>Information:Gradle tasks [:Application:assembleDebug]
:Application:preBuild UP-TO-DATE
:Application:preDebugBuild UP-TO-DATE
:Application:compileDebugNdk UP-TO-DATE
:Application:checkDebugManifest
:Application:preReleaseBuild UP-TO-DATE
:Shared:compileLint
:Shared:copyReleaseLint UP-TO-DATE
:Shared:preBuild UP-TO-DATE
:Shared:preReleaseBuild UP-TO-DATE
:Shared:checkReleaseManifest
:Shared:preDebugAndroidTestBuild UP-TO-DATE
:Shared:preDebugBuild UP-TO-DATE
:Shared:prepareComAndroidSupportSupportV42100Library UP-TO-DATE
:Shared:prepareComGoogleAndroidGmsPlayServicesBase6587Library UP-TO-DATE
:Shared:prepareComGoogleAndroidGmsPlayServicesLocation6587Library UP-TO-DATE
:Shared:prepareComGoogleAndroidGmsPlayServicesMaps6587Library UP-TO-DATE
:Shared:prepareComGoogleAndroidGmsPlayServicesWearable6587Library UP-TO-DATE
:Shared:prepareComGoogleMapsAndroidAndroidMapsUtils032Library UP-TO-DATE
:Shared:prepareReleaseDependencies
:Shared:compileReleaseAidl UP-TO-DATE
:Shared:compileReleaseRenderscript UP-TO-DATE
:Shared:generateReleaseBuildConfig UP-TO-DATE
:Shared:generateReleaseAssets UP-TO-DATE
:Shared:mergeReleaseAssets UP-TO-DATE
:Shared:generateReleaseResValues UP-TO-DATE
:Shared:generateReleaseResources UP-TO-DATE
:Shared:mergeReleaseResources UP-TO-DATE
:Shared:processReleaseManifest UP-TO-DATE
:Shared:processReleaseResources UP-TO-DATE
:Shared:generateReleaseSources UP-TO-DATE
:Shared:compileReleaseJava UP-TO-DATE
:Shared:extractReleaseAnnotations UP-TO-DATE
:Shared:mergeReleaseProguardFiles UP-TO-DATE
:Shared:processReleaseJavaRes UP-TO-DATE
:Shared:packageReleaseJar UP-TO-DATE
:Shared:compileReleaseNdk UP-TO-DATE
:Shared:packageReleaseJniLibs UP-TO-DATE
:Shared:packageReleaseLocalJar UP-TO-DATE
:Shared:packageReleaseRenderscript UP-TO-DATE
:Shared:packageReleaseResources UP-TO-DATE
:Shared:bundleRelease UP-TO-DATE
:Application:prepareAndroidXYZTouristAttractionsMasterSharedUnspecifiedLibrary UP-TO-DATE
:Application:prepareComAndroidSupportAppcompatV72200Library UP-TO-DATE
:Application:prepareComAndroidSupportRecyclerviewV72100Library UP-TO-DATE
:Application:prepareComAndroidSupportSupportV132100Library UP-TO-DATE
:Application:prepareComAndroidSupportSupportV42200Library UP-TO-DATE
:Application:prepareComGoogleAndroidGmsPlayServicesBase700Library UP-TO-DATE
:Application:prepareComGoogleAndroidGmsPlayServicesLocation700Library UP-TO-DATE
:Application:prepareComGoogleAndroidGmsPlayServicesMaps700Library UP-TO-DATE
:Application:prepareComGoogleAndroidGmsPlayServicesWearable700Library UP-TO-DATE
:Application:prepareComGoogleMapsAndroidAndroidMapsUtils032Library UP-TO-DATE
:Application:prepareDebugDependencies
:Application:compileDebugAidl UP-TO-DATE
:Application:compileDebugRenderscript UP-TO-DATE
:Application:generateDebugBuildConfig UP-TO-DATE
:Application:generateDebugAssets UP-TO-DATE
:Application:mergeDebugAssets UP-TO-DATE
:Application:generateDebugResValues UP-TO-DATE
:Wearable:preBuild UP-TO-DATE
:Wearable:preReleaseBuild UP-TO-DATE
:Wearable:compileReleaseNdk UP-TO-DATE
:Wearable:checkReleaseManifest
:Wearable:preDebugBuild UP-TO-DATE
:Wearable:prepareAndroidXYZTouristAttractionsMasterSharedUnspecifiedLibrary UP-TO-DATE
:Wearable:prepareComAndroidSupportRecyclerviewV72100Library UP-TO-DATE
:Wearable:prepareComAndroidSupportSupportV132103Library UP-TO-DATE
:Wearable:prepareComAndroidSupportSupportV42103Library UP-TO-DATE
:Wearable:prepareComGoogleAndroidGmsPlayServicesBase6587Library UP-TO-DATE
:Wearable:prepareComGoogleAndroidGmsPlayServicesLocation6587Library UP-TO-DATE
:Wearable:prepareComGoogleAndroidGmsPlayServicesMaps6587Library UP-TO-DATE
:Wearable:prepareComGoogleAndroidGmsPlayServicesWearable6587Library UP-TO-DATE
:Wearable:prepareComGoogleAndroidSupportWearable110Library UP-TO-DATE
:Wearable:prepareComGoogleMapsAndroidAndroidMapsUtils032Library UP-TO-DATE
:Wearable:prepareReleaseDependencies
:Wearable:compileReleaseAidl UP-TO-DATE
:Wearable:compileReleaseRenderscript UP-TO-DATE
:Wearable:generateReleaseBuildConfig UP-TO-DATE
:Wearable:generateReleaseAssets UP-TO-DATE
:Wearable:mergeReleaseAssets UP-TO-DATE
:Wearable:generateReleaseResValues UP-TO-DATE
:Wearable:generateReleaseResources UP-TO-DATE
:Wearable:mergeReleaseResources
AAPT out(1092500865) : No Delegate set : lost message:Done
AAPT out(1092500865) : No Delegate set : lost message:Done
AAPT out(682745170) : No Delegate set : lost message:Done
AAPT out(682745170) : No Delegate set : lost message:Done
AAPT out(1867061693) : No Delegate set : lost message:Done
AAPT out(1867061693) : No Delegate set : lost message:Done
AAPT out(682745170) : No Delegate set : lost message:Done
AAPT out(682745170) : No Delegate set : lost message:Crunching C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.support\wearable\1.1.0\res\drawable-xhdpi-v4\generic_confirmation_00189.png
AAPT out(682745170) : No Delegate set : lost message:Done
AAPT out(1867061693) : No Delegate set : lost message:Done
AAPT out(682745170) : No Delegate set : lost message:Crunching C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.support\wearable\1.1.0\res\drawable-xhdpi-v4\generic_confirmation_00170.png
AAPT out(1867061693) : No Delegate set : lost message:Crunching C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.support\wearable\1.1.0\res\drawable-xhdpi-v4\generic_confirmation_00173.png
AAPT out(1867061693) : No Delegate set : lost message:Done
AAPT out(1867061693) : No Delegate set : lost message:Crunching C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.support\wearable\1.1.0\res\drawable-xhdpi-v4\generic_confirmation_00166.png
AAPT out(1867061693) : No Delegate set : lost message:Done
AAPT out(1867061693) : No Delegate set : lost message:Crunching C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.support\wearable\1.1.0\res\drawable-xhdpi-v4\generic_confirmation_00167.png
AAPT out(1867061693) : No Delegate set : lost message:Crunching single PNG file: C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.support\wearable\1.1.0\res\drawable-xhdpi-v4\generic_confirmation_00167.pnghdpi\common_signin_btn_icon_disabled_dark.9.png ERROR: Unable to open PNG file
AAPT err(682745170): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.gms\play-services-base\6.5.87\res\drawable-xhdpi\ic_plusone_standard_off_client.png ERROR: Unable to open PNG file
AAPT err(50760915): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.support\wearable\1.1.0\res\drawable-hdpi-v4\generic_confirmation_00167.png ERROR: Unable to open PNG file
AAPT err(50760915): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.support\wearable\1.1.0\res\drawable-hdpi-v4\generic_confirmation_00165.png ERROR: Unable to open PNG file
AAPT err(50760915): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.gms\play-services-base\6.5.87\res\drawable-xhdpi\common_signin_btn_text_disabled_light.9.png ERROR: Unable to open PNG file
AAPT err(50760915): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.gms\play-services-base\6.5.87\res\drawable-mdpi\common_signin_btn_text_normal_dark.9.png ERROR: Unable to open PNG file
AAPT err(1144179795): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.support\wearable\1.1.0\res\drawable-mdpi-v4\generic_confirmation_00164.png ERROR: Unable to open PNG file
AAPT err(1144179795): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.support\wearable\1.1.0\res\drawable-mdpi-v4\generic_confirmation_00166.png ERROR: Unable to open PNG file
AAPT err(1144179795): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.gms\play-services-base\6.5.87\res\drawable-mdpi\common_signin_btn_text_focus_dark.9.png ERROR: Unable to open PNG file
AAPT err(1144179795): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.support\wearable\1.1.0\res\drawable-mdpi-v4\generic_confirmation_00189.png ERROR: Unable to open PNG file
AAPT err(682745170): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.gms\play-services-base\6.5.87\res\drawable-mdpi\common_signin_btn_text_pressed_light.9.png ERROR: Unable to open PNG file
AAPT err(1092500865): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.maps.android\android-maps-utils\0.3.2\res\drawable-xhdpi-v4\bubble_mask.9.png: libpng warning: iCCP: Not recognizing known sRGB profile that has been edited
AAPT err(682745170): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.gms\play-services-base\6.5.87\res\drawable-xhdpi\common_signin_btn_text_normal_light.9.png ERROR: Unable to open PNG file
AAPT err(682745170): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.gms\play-services-base\6.5.87\res\drawable-hdpi\common_signin_btn_text_focus_dark.9.png ERROR: Unable to open PNG file
AAPT err(682745170): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.gms\play-services-base\6.5.87\res\drawable-xxhdpi\ic_plusone_standard_off_client.png ERROR: Unable to open PNG file
AAPT err(682745170): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.gms\play-services-base\6.5.87\res\drawable-mdpi\ic_plusone_standard_off_client.png ERROR: Unable to open PNG file
AAPT err(682745170): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.gms\play-services-base\6.5.87\res\drawable-xxhdpi\ic_plusone_tall_off_client.png ERROR: Unable to open PNG file
AAPT err(682745170): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.gms\play-services-base\6.5.87\res\drawable-xhdpi\common_signin_btn_icon_focus_dark.9.png ERROR: Unable to open PNG file
:Wearable:mergeReleaseResources FAILED
Error:Execution failed for task ':Wearable:mergeReleaseResources'.

Crunching Cruncher common_signin_btn_text_disabled_focus_light.9.png failed, see logs
Information:BUILD FAILED
Information:Total time: 17.486 secs
Information:1 error
Information:0 warnings
Information:See complete output in console
</code></pre>

<p>Note: i had to cut the trace, due to space problems, the complete trace can be found here: <a href=""https://github.com/googlesamples/android-XYZTouristAttractions/issues/1"" rel=""nofollow"">https://github.com/googlesamples/android-XYZTouristAttractions/issues/1</a></p>

<p>I have windows 8 with AS 1.2 and:</p>

<pre><code>SDK build tools 22.0.1
SDK platform 22 and 4.4.W2 (api 20)
</code></pre>

<p>I've tried to redownload the whole project, and install build tools 21.1.2 and now the error is the same but with another file in that directory.</p>
",2280212,,,,,2015-04-25 6:45:12,android-XYZTouristAttractions google's example: error while trying to compile,<android>,1,1,,,
Android,39131973,1,,,2016,,1,104,"<p>I created a <code>SampleMediaRouteProvider</code>  as given in <a href=""https://github.com/googlesamples/android-MediaRouter"" rel=""nofollow"">https://github.com/googlesamples/android-MediaRouter</a>. In this sample there is also a <code>MediaRouter</code> that discovers all <code>MediaRouteProviders</code> in the network. 
This <code>SampleMediaRouteProvider</code> is visible in the same device to other apps but its not visible to apps on other device in the same network.  </p>

<p>Can you please help me to get <code>MediaRouteProvider</code> visible in wifi network. 
Iam looking to create a <code>MediaRenderer</code> on a Android device that I could use to cast audio from other Android devices. </p>
",5402174,,1841827,,2016-08-24 21:47:44,2017-01-25 20:01:11,MediaRouterProvider not visible in the network,<android><casting><upnp><mediarouter>,1,0,,,
Android,49167514,1,,,2018,,1,121,"<p>I need to store user credentials in <code>Android keystore</code>, not in preference. I can store them in it, but it persists till application is on. Once application is killed I am not able to get them as <code>SecretKey</code> or <code>PrivateKey</code> is lost. Is there any way to get stored values Or keys even after restarting app?.</p>

<p>I have checked multiple samples for this, but none of them helped me to solve my issue. Here are links. <a href=""https://github.com/afollestad/android-secure-storage"" rel=""nofollow noreferrer"">https://github.com/afollestad/android-secure-storage</a>
<a href=""https://github.com/googlesamples/android-BasicAndroidKeyStore/"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-BasicAndroidKeyStore/</a>
<a href=""https://github.com/nelenkov/android-keystore"" rel=""nofollow noreferrer"">https://github.com/nelenkov/android-keystore</a></p>

<p><a href=""https://codeload.github.com/nelenkov/android-keystore/zip/master"" rel=""nofollow noreferrer"">https://codeload.github.com/nelenkov/android-keystore/zip/master</a> </p>
",3355728,,,,,2018-07-26 16:50:44,Store user credentials in Android keystore/keychain,<android><keystore><keychain><key-storage>,1,0,,,
Android,49696008,1,,,2018,,1,729,"<p>How to switch this example here to use gcc?:
<a href=""https://github.com/googlesamples/android-ndk/tree/master/other-builds/ndkbuild/hello-libs"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk/tree/master/other-builds/ndkbuild/hello-libs</a></p>

<p>Is there a way to set this over the gradle files?</p>

<p>Thx</p>
",4293275,,,,,2018-10-17 6:21:56,How to switch android-ndk example to use gcc instead of clang?,<gcc><gradle><android-ndk><clang>,1,3,,,
Android,40849143,1,40849410,,2016,,1,212,"<p>I want to clone next project:
<a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">android-architecture</a></p>

<p>In github I got the <a href=""https://github.com/googlesamples/android-architecture.git"" rel=""nofollow noreferrer"">HTTPS link</a> to clone project.<br>
In Android Studio: File - New - Project from Version Control - Github.<br>
But when I cloned the project, I see next in Project window:</p>

<p><a href=""https://i.stack.imgur.com/ETfnZ.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/ETfnZ.png"" alt=""enter image description here""></a></p>

<p>And no project files.<br></p>

<p>Moreover - files are not present in Explorer:<br><br>
<a href=""https://i.stack.imgur.com/j64KQ.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/j64KQ.png"" alt=""enter image description here""></a></p>

<p><strong>What am I doing wrong?</strong></p>

<p>PS. When I press ""Download ZIP"" in github - everything is ok.<br>
PPS. Tried to clone via terminal (not Studio) - result is the same.</p>
",4342778,,4342778,,2016-11-28 16:46:00,2016-11-28 16:46:00,Cannot clone project from github,<git><android-studio><github>,1,0,,,
Android,49024906,1,,,2018,,1,36,"<p>I am trying to run the following two Google Sample projects:</p>

<p>1) Sample BLE Gatt Server <a href=""https://github.com/androidthings/sample-bluetooth-le-gattserver"" rel=""nofollow noreferrer"">https://github.com/androidthings/sample-bluetooth-le-gattserver</a></p>

<p>2) Sample BLE Gatt Client <a href=""https://github.com/googlesamples/android-BluetoothLeGatt"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-BluetoothLeGatt</a></p>

<p>I am using 2 phones:</p>

<p>1) <strong>Samsung Galaxy S5</strong></p>

<p>2) <strong>Motorola G4 Plus</strong></p>

<p>After adding small snippets of code for providing BLE and Coarse Location Access permissions, the projects worked with the Samsung Galaxy S5 hosting the server i.e. github project 1 and the Moto G4 Plus running the BLE Gatt client.</p>

<p>However, on reversing the roles, that is <code>Samsung Galaxy S5</code> running the client and the <code>Moto G4 Plus</code> hosting the server, I am not able to achieve successful connection.</p>

<p>I tried running the client on another phone (a Moto G5) and that failed too.</p>

<p>It seems the <code>Moto G4 Plus</code> is not able to connect successfully.</p>

<p>Can anyone please suggest why this could be happening? Are there any special permissions I need to take care of?</p>

<p>ADDITIONAL INFORMATION:
After attempting to debug the app, I found that on the problematic device i.e. the Moto G4 Plus, after connectGatt is called, BluetoothGattCallback is called but onConnectionStateChange() is not called.</p>
",2839691,,2839691,,2018-02-28 10:15:46,2018-03-01 6:00:34,Android device unable to connect with BleGattServer,<android><bluetooth-lowenergy><bluetooth-gatt>,1,0,,,
Android,49029004,1,49042294,,2018,,1,158,"<p>I using this code to test google fit : <a href=""https://github.com/googlesamples/android-fit/blob/master/BasicSensorsApi/app/src/main/java/com/google/android/gms/fit/samples/basicsensorsapi/MainActivity.java"" rel=""nofollow noreferrer"">android-fit</a>.
This code is working and not occur any exception    , but it can't call into function [onDataPoint] when it register Fitness Data </p>

<pre><code>    private OnDataPointListener mListener;
    ]
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);          
        setContentView(R.layout.activity_main);         

        if (hasRuntimePermissions()) {
            findFitnessDataSourcesWrapper();
        } else {
            requestRuntimePermissions();
        }
    }


    private void findFitnessDataSourcesWrapper() {
        if (hasOAuthPermission()) {
            findFitnessDataSources();
        } else {
            requestOAuthPermission();
        }
    }


    private FitnessOptions getFitnessSignInOptions() {
        return FitnessOptions.builder().addDataType(DataType.TYPE_LOCATION_SAMPLE).build();
    }


    private boolean hasOAuthPermission() {
        FitnessOptions fitnessOptions = getFitnessSignInOptions();
        return GoogleSignIn.hasPermissions(GoogleSignIn.getLastSignedInAccount(this), fitnessOptions);
    }


    private void requestOAuthPermission() {
        FitnessOptions fitnessOptions = getFitnessSignInOptions();
        GoogleSignIn.requestPermissions(
                this,
                REQUEST_OAUTH_REQUEST_CODE,
                GoogleSignIn.getLastSignedInAccount(this),
                fitnessOptions);
    }


    @Override
    protected void onResume() {
        super.onResume();


        findFitnessDataSourcesWrapper();
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode == Activity.RESULT_OK) {
            if (requestCode == REQUEST_OAUTH_REQUEST_CODE) {
                findFitnessDataSources();
            }
        }
    }

    private void findFitnessDataSources() {

        Fitness.getSensorsClient(this, GoogleSignIn.getLastSignedInAccount(this))
                .findDataSources(
                        new DataSourcesRequest.Builder()
                                .setDataTypes(DataType.TYPE_LOCATION_SAMPLE)
                                //.setDataSourceTypes(DataSource.TYPE_RAW)
                                .build())
                .addOnSuccessListener(
                        new OnSuccessListener&lt;List&lt;DataSource&gt;&gt;() {
                            @Override
                            public void onSuccess(List&lt;DataSource&gt; dataSources) {
                                for (DataSource dataSource : dataSources) {
                                    Log.i(TAG, ""Data source found: "" + dataSource.toString());
                                    Log.i(TAG, ""Data Source type: "" + dataSource.getDataType().getName());

                                    if (dataSource.getDataType().equals(DataType.TYPE_LOCATION_SAMPLE)
                                            &amp;&amp; mListener == null) {
                                        Log.i(TAG, ""Data source for LOCATION_SAMPLE found!  Registering."");
                                        registerFitnessDataListener(dataSource, DataType.TYPE_LOCATION_SAMPLE);
                                    }
                                }
                            }
                        })
                .addOnFailureListener(
                        new OnFailureListener() {
                            @Override
                            public void onFailure(@NonNull Exception e) {
                                Log.e(TAG, ""failed"", e);
                            }
                        });

    }


    private void registerFitnessDataListener(DataSource dataSource, DataType dataType) {

        mListener =
                new OnDataPointListener() {
                    @Override
                    public void onDataPoint(DataPoint dataPoint) {
                        Log.i(TAG, ""onDataPoint"");
                        for (Field field : dataPoint.getDataType().getFields()) {
                            Value val = dataPoint.getValue(field);
                            Log.i(TAG, ""Detected DataPoint field: "" + field.getName());
                            Log.i(TAG, ""Detected DataPoint value: "" + val);

                        }
                    }
                };

        Fitness.getSensorsClient(this, GoogleSignIn.getLastSignedInAccount(this))
                .add(
                        new SensorRequest.Builder()
                                .setDataSource(dataSource) 
                                .setDataType(dataType) 
                                .setSamplingRate(10, TimeUnit.SECONDS)
                                .build(),
                        mListener)
                .addOnCompleteListener(
                        new OnCompleteListener&lt;Void&gt;() {
                            @Override
                            public void onComplete(@NonNull Task&lt;Void&gt; task) {
                                if (task.isSuccessful()) {
                                    Log.i(TAG, ""Listener registered!"");
                                } else {
                                    Log.e(TAG, ""Listener not registered."", task.getException());
                                }
                            }
                        });

    }
}
</code></pre>

<p>This is Result of Logcat outputed:</p>

<pre><code>02-28 18:36:41.973 22519-22519/vnit.com.testrealm I/BasicSensorsApi: Data source found: DataSource{raw:Application{com.google.android.gms::null}:Device{SHARP:SH-08E:daa952d0::1:2}:live_location:DataType{com.google.location.sample[latitude(f), longitude(f), accuracy(f), altitude(f)]}}
02-28 18:36:41.973 22519-22519/vnit.com.testrealm I/BasicSensorsApi: Data Source type: com.google.location.sample
02-28 18:36:41.973 22519-22519/vnit.com.testrealm I/BasicSensorsApi: Data source for LOCATION_SAMPLE found!  Registering.
02-28 18:36:42.013 22519-22519/vnit.com.testrealm I/BasicSensorsApi: Data source found: DataSource{raw:Application{com.google.android.gms::null}:Device{SHARP:SH-08E:daa952d0::1:2}:live_location:DataType{com.google.location.sample[latitude(f), longitude(f), accuracy(f), altitude(f)]}}
02-28 18:36:42.013 22519-22519/vnit.com.testrealm I/BasicSensorsApi: Data Source type: com.google.location.sample
02-28 18:36:42.243 22519-22519/vnit.com.testrealm I/BasicSensorsApi: Listener registered!
</code></pre>

<p>Log display message [Listener registered!] but Why [onDataPoint] of google fit not call?</p>

<p>I had try remove <code>.setDataSourceTypes(DataSource.TYPE_RAW)</code>, but it still not go to  [onDataPoint]</p>
",1497597,,1497597,,2018-03-01 3:44:06,2018-05-07 10:58:45,Why [onDataPoint] of google fit not call?,<android><google-fit>,1,2,,,
Android,31751885,1,31754445,,2015,,1,2239,"<p>I am trying to use the <a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow"">android ndk samples</a> (such as Teapot or san-angeles) with Android Studio 1.3 preview and the new <a href=""http://tools.android.com/tech-docs/new-build-system/gradle-experimental"" rel=""nofollow"">experimental NDK plugin</a>.  When I run, I get the following errors:</p>

<pre><code>E:\code\android-ndk-samples-preview\Teapot\app\src\main\jni\cpufeatures\cpu-features.h
sys/cdefs.h: No such file or directory

E:\code\android-ndk-samples-preview\Teapot\app\src\main\jni\native_app_glue\android_native_app_glue.c
jni.h: No such file or directory

E:\code\android-ndk-samples-preview\Teapot\app\src\main\jni\ndk_helper\gl3stub.c
EGL/egl.h: No such file or directory

Error:Execution failed for task ':app:compileArmeabi-v7aDebugArm7TeapotNativeActivitySharedLibraryTeapotNativeActivityMainC'.
 Multiple build operations failed.
      C compiler failed while compiling cpu-features.c.
      C compiler failed while compiling android_native_app_glue.c.
      C compiler failed while compiling gl3stub.c.
</code></pre>

<p>I was able to run fine yesterday, before I upgraded Android Studio from AI-141.1962279 (I think) to AI-141.2117773.  How can I get this working?  Could these errors stem from the backslash preceding cdefs.h and egl.h?</p>

<p>My local.settings contains:</p>

<pre><code>sdk.dir=E\:\\Android\\sdk
ndk.dir=E\:\\Android\\ndk
</code></pre>

<p>My system:</p>

<pre><code>Windows 8.1 64 bit
Android Studio 1.3
Build tools 22.0.1
Gradle 2.5
NDK r10e extracted to E:\Android\sdk\ndk-bundle
Device: Project Tango Tablet with Schur core
</code></pre>
",3549440,,3549440,,2015-07-31 19:41:07,2015-07-31 20:12:09,NDK samples with Android Studio 1.3 preview: can't find headers,<android><android-ndk>,1,2,,,
Android,34169251,1,34169844,,2015,,1,749,"<p>Why hardcode instead of doing something like in this <a href=""https://stackoverflow.com/questions/5088474/how-can-i-get-the-uuid-of-my-android-phone-in-an-application"">SO post</a>? And what is supposed to be the difference between the secure and insecure uuid?
<br> Heres a <a href=""https://github.com/googlesamples/android-BluetoothChat/blob/master/Application/src/main/java/com/example/android/bluetoothchat/BluetoothChatService.java#L49-L53"" rel=""nofollow noreferrer"">link</a> to the BluetoothService class in which the code below resides.</p>

<pre><code>// Unique UUID for this application
    private static final UUID MY_UUID_SECURE =
            UUID.fromString(""fa87c0d0-afac-11de-8a39-0800200c9a66"");
    private static final UUID MY_UUID_INSECURE =
            UUID.fromString(""8ce255c0-200a-11e0-ac64-0800200c9a66"");
</code></pre>
",4885784,,-1,,2017-05-23 12:07:33,2017-11-13 8:57:33,Why is a hardcoded UUID used in the Android Sample BluetoothChat application?,<android><bluetooth><uuid>,1,0,,,
Android,42548247,1,,,2017,,1,514,"<p>I want to create an app to register a new fingerprint and add more fingerprint and authenticate in same app, but i am able to authenticate only one with the hardware supported fingerprint only.</p>

<p>So my requirement is:</p>

<ol>
<li>Register fingerprint as an image scanner through app and send them to db or server.</li>
<li>Authenticate scanned fingerprint in same app through db or server where fingerprint was saved.</li>
</ol>

<p>with the help of <a href=""https://github.com/googlesamples/android-FingerprintDialog"" rel=""nofollow noreferrer"">google sample code</a> i can scan system's scanned fingerprint.</p>
",,user5421769,,,,2017-08-03 4:24:26,How can I create multiple fingerprint scan and register in db?,<android><fingerprint><android-fingerprint-api>,1,0,,,
Android,52269697,1,,,2018,,1,61,"<p>How to use <a href=""https://developer.android.com/reference/android/arch/paging/PageKeyedDataSource.html#loadInitial(android.arch.paging.PageKeyedDataSource.LoadInitialParams%3CKey%3E,%20android.arch.paging.PageKeyedDataSource.LoadInitialCallback%3CKey,%20Value%3E)"" rel=""nofollow noreferrer"">loadInitial</a> in the paging library?</p>

<p>I am wondering If I could use a blocking call in <code>loadInitial()</code> to get the response from API. By doing this, I can make sure the returned pagedList contains the first page. Is it the correct way to use this method?</p>

<pre><code>pagedListAdapter.submitList(list)
</code></pre>

<p><a href=""https://github.com/googlesamples/android-architecture-components/blob/7f861fd45d158e6277a3c35163c7f663e135b2cf/PagingWithNetworkSample/app/src/main/java/com/android/example/paging/pagingwithnetwork/reddit/repository/inMemory/byPage/PageKeyedSubredditDataSource.kt#L110"" rel=""nofollow noreferrer"">In Google's example</a>, they are using loadInitial() in a blocking way. Is it considering a good practice?</p>
",475242,,475242,,2018-09-11 6:20:04,2018-09-11 6:20:04,Can loadInitial() be blocking when loading data from API,<android><android-paging>,1,1,,,
Android,32970996,1,,,2015,,1,936,"<p>Hello I have a really difficult question. <strong>I got the nexus 6 and I want to have the preview stream in RAW fromat</strong> (ImageFormate.RAW_SENSOR) <strong>at the camera2 API</strong>. <em>Is this even possible</em>?</p>

<p>I use the android-Camera2Raw (<a href=""https://github.com/googlesamples/android-Camera2Raw"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Raw</a>)  </p>
",3612630,,,,,2015-10-09 3:51:05,"how to become the preview stream in RAW Format (Camera2 API , ImageFormate.RAW_SENSOR)?",<android><preview><camera2>,1,0,,,
Android,35244472,1,,,2016,,1,289,"<p>I want to use the demo application <a href=""https://github.com/googlesamples/android-testdpc"" rel=""nofollow noreferrer"">TestDPC</a> released by Google to create a Work Profile with my own device policy controller so I added some code to this app in order to connect to GCM service to receive cloud messages to start some actions on my device.<br/>
To connect to GCM I used some example code that I tested separately and it works, the only thing I added is a boot listener (<em>ReceiverStarter</em>) in order to activate GCM listener everytime the user reboot his device.<br/>
The strange thing is that when I install my app on device (Samsung Note 4 with Android 5.1.1 API 22) without create a managed profile the GCM client works properly.<br/>
If with the app early installed I create a work profile and the app itslef take control over the new profile the same code for GCM doesn't work anymore.
I can see (using notifications) that in this case my dpc app can register to GCM and fetch GCM ID and I can read it in my console but the listener (<em>MyGcmListenerService</em>) doesn't receive any cloud messages as if the listener is not up and running, I cannot see any errors and/or logs in my console.<br/>
Maybe I need some more permissions?<br/>
Here my manifest</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
</code></pre>

<p></p>

<pre><code>&lt;uses-permission android:name=""android.permission.GET_ACCOUNTS"" /&gt;
&lt;uses-permission android:name=""android.permission.MANAGE_ACCOUNTS"" /&gt;
&lt;uses-permission android:name=""android.permission.PACKAGE_USAGE_STATS"" /&gt;
&lt;uses-permission android:name=""android.permission.ACCESS_WIFI_STATE"" /&gt;
&lt;uses-permission android:name=""android.permission.CHANGE_WIFI_STATE"" /&gt;
&lt;uses-permission android:name=""android.permission.INTERNET"" /&gt;
&lt;uses-permission android:name=""android.permission.WAKE_LOCK"" /&gt;
&lt;uses-permission android:name=""android.permission.RECEIVE_BOOT_COMPLETED"" /&gt;
&lt;uses-permission android:name=""com.google.android.c2dm.permission.RECEIVE"" /&gt;

&lt;permission android:name=""com.xxx.emmagent.permission.C2D_MESSAGE"" android:protectionLevel=""signature"" /&gt;
&lt;uses-permission android:name=""com.xxx.emmagent.permission.C2D_MESSAGE"" /&gt;

&lt;application
        android:allowBackup=""true""
        android:icon=""@drawable/ic_launcher""
        android:theme=""@style/AppTheme""
        android:label=""@string/app_name""&gt;

    &lt;activity
        android:name="".LaunchActivity""&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=""android.intent.action.MAIN""/&gt;
            &lt;category android:name=""android.intent.category.LAUNCHER""/&gt;
        &lt;/intent-filter&gt;
    &lt;/activity&gt;

    &lt;activity
        android:name="".gcm.MainActivity""
        android:label=""@string/app_name""
        android:theme=""@style/SetupTheme""/&gt;

    &lt;activity
            android:name="".PolicyManagementActivity""
            android:label=""@string/app_name""
            android:windowSoftInputMode=""adjustPan""/&gt;

    &lt;activity
            android:name="".AddAccountActivity""
            android:label=""@string/app_name""
            android:theme=""@style/SetupTheme""/&gt;

    &lt;activity
            android:name="".EnableProfileActivity""
            android:label=""@string/app_name""
            android:theme=""@style/SetupTheme""/&gt;

    &lt;activity
            android:name="".EnableDeviceOwnerActivity""
            android:label=""@string/app_name""
            android:theme=""@style/SetupTheme""/&gt;

    &lt;activity
            android:name="".cosu.EnableCosuActivity""
            android:label=""@string/app_name""
            android:theme=""@style/SetupTheme""/&gt;

    &lt;activity
            android:name="".syncauth.SetupSyncAuthManagement""
            android:label=""@string/app_name""
            android:theme=""@style/SetupTheme""/&gt;

    &lt;activity
            android:name="".syncauth.FinishSyncAuthDeviceOwnerActivity""
            android:label=""@string/app_name""
            android:theme=""@style/SetupTheme""/&gt;

    &lt;activity
            android:name="".syncauth.FinishSyncAuthProfileOwnerActivity""
            android:label=""@string/app_name""
            android:theme=""@style/SetupTheme""/&gt;

    &lt;activity
            android:name="".policy.locktask.KioskModeActivity""
            android:label=""@string/kiosk_mode""
            android:launchMode=""singleInstance""
            android:lockTaskMode=""if_whitelisted""
            android:enabled=""false""&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=""android.intent.action.MAIN""/&gt;
            &lt;category android:name=""android.intent.category.HOME""/&gt;
            &lt;category android:name=""android.intent.category.DEFAULT""/&gt;
        &lt;/intent-filter&gt;
    &lt;/activity&gt;

    &lt;receiver
            android:name="".DeviceAdminReceiver""
            android:description=""@string/app_name""
            android:label=""@string/app_name""
            android:permission=""android.permission.BIND_DEVICE_ADMIN""&gt;
        &lt;meta-data
                android:name=""android.app.device_admin""
                android:resource=""@xml/device_admin_receiver""/&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=""android.app.action.DEVICE_ADMIN_ENABLED""/&gt;
            &lt;action android:name=""android.app.action.PROFILE_PROVISIONING_COMPLETE""/&gt;
        &lt;/intent-filter&gt;
    &lt;/receiver&gt;

    &lt;provider
            android:authorities=""com.xxx.emmagent.fileprovider""
            android:name=""android.support.v4.content.FileProvider""
            android:grantUriPermissions=""true""
            android:exported=""false""&gt;
        &lt;meta-data
                android:name=""android.support.FILE_PROVIDER_PATHS""
                android:resource=""@xml/filepaths"" /&gt;
    &lt;/provider&gt;


    &lt;!-- GCM messagging --&gt;
    &lt;!-- [START gcm_receiver] --&gt;
    &lt;receiver
        android:name=""com.google.android.gms.gcm.GcmReceiver""
        android:exported=""true""
        android:permission=""com.google.android.c2dm.permission.SEND"" &gt;
        &lt;intent-filter&gt;
            &lt;action android:name=""com.google.android.c2dm.intent.RECEIVE"" /&gt;
            &lt;category android:name=""com.xxx.emmagent"" /&gt;
        &lt;/intent-filter&gt;
    &lt;/receiver&gt;
    &lt;!-- [END gcm_receiver] --&gt;

    &lt;!-- [START gcm_listener] --&gt;
    &lt;service
        android:name="".gcm.MyGcmListenerService""
        android:exported=""true"" &gt;
        &lt;intent-filter&gt;
            &lt;action android:name=""com.google.android.c2dm.intent.RECEIVE"" /&gt;
        &lt;/intent-filter&gt;
    &lt;/service&gt;
    &lt;!-- [END gcm_listener] --&gt;
    &lt;!-- [START instanceId_listener] --&gt;
    &lt;service
        android:name="".gcm.MyInstanceIDListenerService""
        android:exported=""false""&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=""com.google.android.gms.iid.InstanceID""/&gt;
        &lt;/intent-filter&gt;
    &lt;/service&gt;
    &lt;!-- [END instanceId_listener] --&gt;
    &lt;service
        android:name="".gcm.RegistrationIntentService""
        android:exported=""false""&gt;
    &lt;/service&gt;

    &lt;receiver android:name="".gcm.ReceiverStarter"" android:enabled=""true"" android:exported=""false""&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=""android.intent.action.BOOT_COMPLETED""/&gt;
        &lt;/intent-filter&gt;
    &lt;/receiver&gt;

&lt;/application&gt;
</code></pre>

<p></p>

<p>I don't think it depends by code, as I said the same app and the same code without a work profile works well.<br/>
Any ideas?<br/>
Thanks in advance</p>

<p><strong>EDIT</strong>: <a href=""https://stackoverflow.com/questions/28643226/gcm-wake-up-is-not-happening-inside-the-managed-profile-in-android-5-0-lollipop"">here</a> the same problem</p>
",5892337,,-1,,2017-05-23 12:09:44,2016-03-11 6:50:14,How configure GCM for an Android Device Policy Controller (DPC),<android><google-cloud-messaging><android-5.1.1-lollipop><android-managed-profile>,1,3,,,
Android,35660883,1,,,2016,,1,716,"<p>I'm using the Universal Android Media Player sample as the basis of another app. For the love of me I cannot figure out how to update the MusicProvider the MusicService uses (ie. change the songs in the queue).
This is to be done when the user clicks on a random item - the service will be provided with a new list to play from.</p>

<p>Any ideas? - the original source is located here: <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""nofollow"">https://github.com/googlesamples/android-UniversalMusicPlayer</a> </p>

<p>I've already created the new MusicProvider, how do I get that to the service is what I'm asking.</p>
",5987752,,1000551,,2017-10-03 13:59:30,2017-10-03 13:59:30,Universal Android Media Player - UAMP,<android><media-player><playback>,1,0,,,
Android,52788958,1,52790082,,2018,,1,157,"<p>I'm adopting MVVM to my Android apps recently. In order to solve the problems underlying with the lifecycle of an app, Google had released LiveData. </p>

<p>The usage of LiveData has different scenarios, as pointed out in the <a href=""https://medium.com/androiddevelopers/livedata-with-snackbar-navigation-and-other-events-the-singleliveevent-case-ac2622673150"" rel=""nofollow noreferrer"">medium article wrote by Jose Alcrreca</a>, you can use SingleLiveEvent or something like the event wrapper pattern.</p>

<p>I want to make sure the <a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java"" rel=""nofollow noreferrer""><strong>SingleLiveEvent</strong></a>, or the <a href=""https://gist.github.com/JoseAlcerreca/5b661f1800e1e654f07cc54fe87441af#file-event-kt"" rel=""nofollow noreferrer""><strong>event wrapper pattern</strong></a>, which one would be the best practice to use with LiveData in Android MVVM architecture. And I found the <a href=""https://github.com/google/iosched"" rel=""nofollow noreferrer"">Google I/O app</a> of this year(2018) have no usages of <strong>SingleLiveEvent</strong>, it uses <strong>event wrapper pattern</strong> instead.</p>

<p>Previously I have opened an <a href=""https://github.com/googlesamples/android-architecture/issues/593"" rel=""nofollow noreferrer"">issue</a> on the project <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">android-architecture</a>, at first I'm seeking an official reply, but it seems to have no comments at all. As a result, I would like to hear the advice from the developers who already use these stuff and have reflections on it. </p>

<p>Please share your precious experiences, thank you in advance.</p>
",4414208,,,,,2018-10-13 6:15:22,Does event wrapper pattern replace the use of SingleLiveEvent?,<android><android-livedata><android-architecture-lifecycle><android-architecture>,1,0,,,
Android,53141233,1,,,2018,,1,76,"<p>A ViewPager preloads fragments.</p>

<p>But with a pageWidth=0.5 (2 fragments per screen), I think it loads too much views before the current position...</p>

<p><img src=""https://i.imgur.com/a7NJ4qC.jpg"" alt=""fff"">
I have <code>pageLimit=1</code> and <code>pageWidth=0.5</code>.<br>
It should be ok to preload LEFT1 and LEFT2, but why LEFT3 ?<br>
LEFT3 is not on the next left screen...</p>

<p>I tried to understand ViewPager.java from support v4:<br>
<a href=""https://android.googlesource.com/platform/frameworks/support/+/support-library-27.1.1/core-ui/src/main/java/android/support/v4/view/ViewPager.java#1155"" rel=""nofollow noreferrer"">https://android.googlesource.com/platform/frameworks/support/+/support-library-27.1.1/core-ui/src/main/java/android/support/v4/view/ViewPager.java#1155</a></p>

<p>line 1155, it says</p>

<blockquote>
  <p>// Fill 3x the available width or up to the number of offscreen<br>
  // pages requested to either side, whichever is larger.
  But for multiple fragments per screen, it loads more before than current and after the current position.</p>
</blockquote>

<p>With the Google sample project <a href=""https://github.com/googlesamples/android-SlidingTabsBasic/"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-SlidingTabsBasic/</a><br>
adding</p>

<pre><code>protected void onCreate(Bundle savedInstanceState) {
   [...]
   mViewPager.setCurrentItem(25);

@Override
public float getPageWidth(int position) {
     // 2 fragments per screen
     return .5f;
}
@Override
public int getCount() {
    // 50 fragments
    return 50;
}
public Fragment getItem(int position) {
    [...]
    Log.d(""debugpageviewer"", ""position=""+position);
}
</code></pre>

<p>And it loads 7 fragments (3 before current position). The smaller the pageWidth, the more fragments are loaded before.</p>

<p>So, is this a bug or did I miss something ?</p>
",4159664,,,,,2018-11-04 15:03:10,Android ViewPager preloading too much fragments,<android><android-viewpager>,1,0,,,
Android,50053555,1,50145474,,2018,,1,260,"<p>I'm implementing an MVP app in which the Views are fragments loaded in Activities. Each Activity had 1 fragment to display. I have to change my implementation and add the TabLayout which will now display the fragments. I've tried different ways of passing the fragment to the adapter but all makes my app crash and I can't understand the error. My last try, I'm passing an arraylist of fragments(1 for now) to the adapter. At the base, I'm following <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp/"" rel=""nofollow noreferrer"">google samples MVP todo app</a>, but I need to implement this tab layout. Please, this is for my major project, I looked everywhere and this is my last resort.</p>

<pre><code>public class HomeActivity extends AppCompatActivity implements NavigationView.OnNavigationItemSelectedListener {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_home);

        Toolbar mHomeToolbar = (Toolbar) findViewById(R.id.toolbar);    // Set to the corresponding Toolbar in the UI.
        setSupportActionBar(mHomeToolbar);

        mDrawerLayout = (DrawerLayout) findViewById(R.id.drawer_layout);    // Set to the corresponding Drawer Layout in the UI.

        ActionBarDrawerToggle mToggle = new ActionBarDrawerToggle(this, mDrawerLayout, mHomeToolbar, R.string.navigation_drawer_open, R.string.navigation_drawer_close);
        mDrawerLayout.addDrawerListener(mToggle);   // Set mToggle as Drawer's toggle button and listen to actions.
        mToggle.syncState();

        NavigationView mDrawerNavigationView = (NavigationView) findViewById(R.id.nav_view);    // Set the corresponding Navigation View in the UI.

        mDrawerNavigationView.setNavigationItemSelectedListener(this);  // Add listener on Navigation's items.

        HomeFragment homeFragment = (HomeFragment) getSupportFragmentManager().findFragmentById(R.id.Quests_Frame); // Set to corresponding Fragment View in the UI.

        if (homeFragment == null) {
            homeFragment = HomeFragment.newInstance();
            FragmentLoader.loadFragmentInActivity(getSupportFragmentManager(), homeFragment, R.id.Quests_Frame);    // Display fragment in Activity.
        }

        repo = QuestsRepository.getInstance(QuestsDataSource.getINSTANCE());
        mHomePresenter = new HomePresenter(repo , homeFragment);

        TabLayout tabLayout = (TabLayout) findViewById(R.id.tab_layout);
        ViewPager viewPager = (ViewPager) findViewById(R.id.pager);
        TabPagerAdapter adapter = new TabPagerAdapter(getSupportFragmentManager());
        adapter.addFragment(homeFragment);
        viewPager.setAdapter(adapter);

    }
</code></pre>

<p>The adapter class:</p>

<pre><code>public class TabPagerAdapter extends FragmentPagerAdapter {

    private final List&lt;Fragment&gt; mFragmentList = new ArrayList&lt;&gt;();
    private final int tabCount = 3;

    public TabPagerAdapter(FragmentManager fragmentManager) {
        super(fragmentManager);
    }

    @Override
    public Fragment getItem(int position) {
        switch (position) {
            case 0:
                mFragmentList.get(position);
            default:
                return null;
        }
    }

    public void addFragment(Fragment fragment) {
        mFragmentList.add(fragment);
    }

    @Override
    public int getCount() {
        return tabCount;
    }
}
</code></pre>
",7905229,,,,,2018-05-03 0:56:08,Android TabLayout Fragment with MVP,<android-fragments><mvp><android-tablelayout>,1,0,,,
Android,35664198,1,35708297,,2016,,1,1337,"<p>I am new to Instrumentation Testing on Android and was learning from the sample at <a href=""https://github.com/googlesamples/android-testing/tree/master/runner/AndroidJunitRunnerSample"" rel=""nofollow"">https://github.com/googlesamples/android-testing/tree/master/runner/AndroidJunitRunnerSample</a> to use AndroidJUnit4.</p>

<p>That code works perfectly.</p>

<p>Trying to implement the same login on my project, however, I get the following exception:</p>

<pre><code>Running tests
Test running started
java.lang.Exception: No runnable methods
at org.junit.runners.BlockJUnit4ClassRunner.validateInstanceMethods(BlockJUnit4ClassRunner.java:191)
at org.junit.runners.BlockJUnit4ClassRunner.collectInitializationErrors(BlockJUnit4ClassRunner.java:128)
at org.junit.runners.ParentRunner.validate(ParentRunner.java:416)
at org.junit.runners.ParentRunner.&lt;init&gt;(ParentRunner.java:84)
at org.junit.runners.BlockJUnit4ClassRunner.&lt;init&gt;(BlockJUnit4ClassRunner.java:65)
at android.support.test.internal.runner.junit4.AndroidJUnit4ClassRunner.&lt;init&gt;(AndroidJUnit4ClassRunner.java:38)
at android.support.test.runner.AndroidJUnit4.&lt;init&gt;(AndroidJUnit4.java:36)
at java.lang.reflect.Constructor.newInstance(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:288)
at android.support.test.internal.runner.junit4.AndroidAnnotatedBuilder.buildAndroidRunner(AndroidAnnotatedBuilder.java:57)
at android.support.test.internal.runner.junit4.AndroidAnnotatedBuilder.runnerForClass(AndroidAnnotatedBuilder.java:45)
at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)
at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:26)
at org.junit.runner.Computer.getRunner(Computer.java:40)
at org.junit.runner.Computer$1.runnerForClass(Computer.java:31)
at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)
at org.junit.runners.model.RunnerBuilder.runners(RunnerBuilder.java:101)
at org.junit.runners.model.RunnerBuilder.runners(RunnerBuilder.java:87)
at org.junit.runners.Suite.&lt;init&gt;(Suite.java:81)
at org.junit.runner.Computer.getSuite(Computer.java:28)
at android.support.test.internal.runner.TestRequestBuilder.classes(TestRequestBuilder.java:791)
at android.support.test.internal.runner.TestRequestBuilder.build(TestRequestBuilder.java:754)
at android.support.test.runner.AndroidJUnitRunner.buildRequest(AndroidJUnitRunner.java:341)
at android.support.test.runner.AndroidJUnitRunner.onStart(AndroidJUnitRunner.java:238)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1853)
</code></pre>

<p>My AndroidTestSuite looks like:</p>

<pre><code>import org.junit.runner.RunWith;
import org.junit.runners.Suite;

@RunWith(Suite.class)
@Suite.SuiteClasses({InstrumentationTestSuite.class})
public class AndroidTestSuite {}
</code></pre>

<p>And my InstrumentationTestSuite looks like:</p>

<pre><code>import org.junit.runner.RunWith;
import org.junit.runners.Suite;

@RunWith(Suite.class)
@Suite.SuiteClasses({LoginInstrumentationTest.class})
public class InstrumentationTestSuite {}
</code></pre>

<p>My LoginInstrumentationTest is </p>

<pre><code>@RunWith(AndroidJUnit4.class)
@LargeTest
public class LoginInstrumentationTest {

    @Rule
    public ActivityTestRule&lt;LoginActivity&gt; mActivityRule = new ActivityTestRule&lt;&gt;(
        LoginActivity.class);

    @Test
    public void attemptToLogin() {
        login(""filipebarretto@xxxxxxxxxx.com"", ""12345678"");
    }

    private void login(String email, String password) {

        // Enter user email
        onView(withId(R.id.email)).perform(typeText(email),
            closeSoftKeyboard());

        // Enter user password
        onView(withId(R.id.password)).perform(typeText(password),
            closeSoftKeyboard());

        // Click on the login button
        onView(withId(R.id.email_sign_in_button)).perform(click());

        // Testing
        onView(withId(R.id.email)).check(matches(withText(email)));

    }
}
</code></pre>

<p>From what I search, usually the error I'm getting is due to a missing <code>@Test</code> before my method.</p>

<p>The difference I noticed between my code and the one I'm learning from is the gradle version, which I use 1.5.0 and they use 2.0.0-beta2.</p>

<p>I also found that my Instrumentation.java that is called during the test has several ""Cannot resolve symbol"" error with I can't find the reason, since I use the same dependencies as the sample code.</p>

<p>Any one know what could be the reason of the <code>No runnable methods</code> exception and how to solve it?</p>
",3071350,,,,,2016-02-29 19:47:26,No runnable methods on Android JUnit4 Instrumentation Tests,<java><android><testing><junit4><android-instrumentation>,1,2,,,
Android,41363429,1,41363521,,2016,,1,481,"<p>I'm learning Android MVP architecture given <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp/"" rel=""nofollow noreferrer"">here</a>. Based on the example I created my own simple app that just displays list with <code>recyclerview</code> with pull to refresh functionality.  </p>

<p>When list is pulled I want first to clear the recyclerview and then reload the data again from the repository (with fake latency delay). But, when I clear the data inside RecyclerViewAdpater, all data inside repository are also being cleared and there is nothing to show. I just can't understand the reason. </p>

<p>Here's my activity that creates both Presenter and View (that is Fragment):</p>

<pre><code>    protected void onCreate(Bundle savedInstanceState) {

            mainFragment = MainFragment.newInstance();

            FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
            transaction.add(R.id.contentFrame, mainFragment);
            transaction.commit();

            new MainPresenter(new MainDataRepository(), mainFragment);
    }
</code></pre>

<p>Here's my Fragment (MainFragment) - <strong>ATTENTION:</strong> updateList(null) - This is where it clears all data, including inside Repository:</p>

<pre><code>    public MainFragment() {
    }

    public static MainFragment newInstance() {
        return new MainFragment();
    }

    @Nullable
    @Override
    public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        //....

        swipeRefreshLayout.setOnRefreshListener(new SwipeRefreshLayout.OnRefreshListener() {
            @Override
            public void onRefresh() {
                recyclerAdapter.updateList(null); // **This is where it clears all data, including inside Repository**

                Handler handler = new Handler();
                handler.postDelayed(new Runnable() {
                    @Override
                    public void run() {
                        mPresenter.loadList(); // to reload the list
                    }
                }, 1500);
            }
        });

        //...
    }

    @Override
    public void onResume() {
        super.onResume();

        Handler handler = new Handler();
        handler.postDelayed(new Runnable() {
            @Override
            public void run() {
                mPresenter.loadList();
            }
        }, 3000);
    }

    @Override
    public void setPresenter(MainContractor.Presenter presenter) {
        mPresenter = presenter;
    }

    @Override
    public void showList(List&lt;String&gt; mainDataList) {
        if(recyclerAdapter == null) {
            recyclerAdapter = new RecyclerAdapter(mainDataList);
            recyclerView.setLayoutManager(new LinearLayoutManager(getActivity()));
            recyclerView.setAdapter(recyclerAdapter);
        }else{
            recyclerAdapter.updateList(mainDataList);
        }
    }
</code></pre>

<p>Here's my presenter (MainPresenter):</p>

<pre><code>    public MainPresenter(MainDataRepository mainDataRepository, MainContractor.View view){
        mMainDataRepository = mainDataRepository;
        mMainContractorView = view;

        view.setPresenter(this);
    }

    @Override
    public void loadList() {
        ArrayList&lt;String&gt; strings = mMainDataRepository.getList();

        mMainContractorView.showList(strings);
    }
</code></pre>

<p>Here's my repository (MainDataRepository):</p>

<pre><code>private ArrayList&lt;String&gt; repositoryList;

    public MainDataRepository() {
        createList();
    }

    private void createList() {
        if(repositoryList == null){
            repositoryList = new ArrayList&lt;&gt;();
        }

        for (int i = 1; i &lt;= 10; i++) {
            repositoryList.add(""Item "" + i);
        }
    }

    public ArrayList&lt;String&gt; getList(){
        return repositoryList;
    }
</code></pre>

<p>And the last one, This is how I am updating recyclerview inside RecyclerAdapter:</p>

<pre><code>public class RecyclerAdapter extends RecyclerView.Adapter&lt;RecyclerAdapter.MyViewHolder&gt; {

    private List&lt;String&gt; stringsList;

    public RecyclerAdapter(List&lt;String&gt; stringsList) {
        this.stringsList = stringsList;
    }

    public void updateList(List&lt;String&gt; newStrings){
            if(newStrings != null){
                stringsList = newStrings;
            }else{
                stringsList.clear();
            }
            notifyDataSetChanged();
        }

       //....
}
</code></pre>

<p>Why updateList mehod inside RecyclerAdapter also clears the data inside repository that is <code>ArrayList&lt;String&gt; repositoryList</code>?</p>
",5985958,,5985958,,2016-12-28 13:57:17,2016-12-28 14:04:05,Android MVP architecture - communication between repository and view,<android><design-patterns><mvp>,1,1,,,
Android,36051791,1,,,2016,,1,1129,"<p>Im using <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Basic</a>.</p>

<p>I set face recognition mode to FULL.</p>

<pre><code>mPreviewRequestBuilder.set(CaptureRequest.STATISTICS_FACE_DETECT_MODE,
</code></pre>

<p><code>CameraMetadata.STATISTICS_FACE_DETECT_MODE_FULL);</code></p>

<p>My CaptureCallback:</p>

<pre><code>private CameraCaptureSession.CaptureCallback mCaptureCallback
= new CameraCaptureSession.CaptureCallback() {

private void process(CaptureResult result) {
            Integer mode = result.get(CaptureResult.STATISTICS_FACE_DETECT_MODE);
            Face [] faces = result.get(CaptureResult.STATISTICS_FACES);
            if(faces != null &amp;&amp; mode != null)
                Log.e(""tag"", ""faces : "" + faces.length + "" , mode : "" + mode ); 
}

@Override
public void onCaptureProgressed(CameraCaptureSession session, CaptureRequest request,
                                CaptureResult partialResult) {
    process(partialResult);
}

@Override
public void onCaptureCompleted(CameraCaptureSession session, CaptureRequest request,
                               TotalCaptureResult result) {
    process(result);
}
</code></pre>

<p><code>Output: faces : 0 , mode : 2</code></p>

<p>Faces length is constantly 0. Looks like it doesn't recognise a face properly or I missed something. </p>
",3424397,,759866,,2016-06-23 23:47:07,2016-06-23 23:47:07,Face detection with android.hardware.Camera2,<android><android-5.1.1-lollipop><android-camera2>,1,0,,,
Android,46134466,1,,,2017,,1,105,"<p>I am working on android in purchase project. I used <a href=""https://github.com/googlesamples/android-play-billing/"" rel=""nofollow noreferrer"">this</a> sample code as reference.</p>

<p>But when execute in app purchase it return null point exception.</p>

<p>This is my code.</p>

<p>launchPurchaseFlow</p>

<pre><code> mHelper.launchPurchaseFlow(this, SKU_GAS, 10001,
   mPurchaseFinishedListener, ""bGoa+V7g/yqDXvKRqq+JTFn4uQZbPiQJo4pf9RzJ"");
</code></pre>

<p>PurchaseFinish Listener</p>

<pre><code> IabHelper.OnIabPurchaseFinishedListener mPurchaseFinishedListener
            = new IabHelper.OnIabPurchaseFinishedListener() {
        public void onIabPurchaseFinished(IabResult result, Purchase purchase)
        {
            if (result.isFailure()) {
                Log.d(TAG, ""Error purchasing: "" + result);


            }

            Log.d(TAG, ""Error purchasing END""+purchase.getSku());
}
</code></pre>

<p>Error shows following line in above code</p>

<pre><code>Log.d(TAG, ""Error purchasing END""+purchase.getSku());
</code></pre>

<p>I added this for testing and identify <code>sku</code>. But <code>purchase</code> object also null in here.</p>

<p>Error</p>

<blockquote>
  <p>.util.Purchase.getSku()' on a null object reference</p>
</blockquote>
",5051423,,5051423,,2017-09-09 19:47:21,2017-09-09 21:21:08,Android In-app purchase NullPointerException Purchase.getSku(),<java><android><in-app-purchase><in-app-billing>,1,1,,,
Android,54073476,1,,,2019,,1,45,"<p>First and foremost, I'm testing this app using my Google Pixel XL (1st gen 32 GB version, runnning Android 9 API Level 28)</p>

<p>Basically, I'm trying to make a camera application based on Android Camera 2 API <strong>(I just downloaded the sample code from <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a>)</strong>. and I'm stuck because I'm trying to save the picture taken by the camera into ""Pictures"" folder inside ""<code>/storage/emulated/0/</code>"". </p>

<p>However, for some reason even though it seems like I'm able to do this, the folder and the picture file are not there when I checked them with ES File Explorer.  </p>

<p>I've tried 3 methods so far: </p>

<p><strong>Attempt #1:</strong></p>

<pre><code>    mFile = new File(getActivity().getExternalFilesDir(Environment.DIRECTORY_PICTURES), ""newPicture.jpg"");
    if(Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState())){

        mFile = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), ""picture.jpg"");
        mFile.mkdirs();
    }
</code></pre>

<p><strong>Attempt #2:</strong></p>

<pre><code>    File filePath = new File(Environment.getExternalStorageDirectory().getPath(),""randomFolder"");
    if(!filePath.exists()){
        filePath.mkdirs();
    }
    String fullPathName = filePath.getAbsolutePath() + ""/"" + ""newPicture.jpg"";
    mFile = new File(fullPathName);
</code></pre>

<p><strong>Attempt #3:</strong></p>

<pre><code>    mFile = new File(fullPathName);
    File filePath = new File(Environment.getExternalStorageDirectory() + ""/Pictures/"");
    if (!filePath.exists()){
        filePath.mkdirs();
    }
    mFile = new File(filePath,""newPicture.jpg"");
</code></pre>

<p>mFile is the File path where ""newPicture"" will be saved to, basically it's supposed to be saved to ""/storage/emulated/0/Pictures/newPicture.jpg""</p>

<p>Now, I've tried to use getExternalFilesDir() method so the picture will be saved into <code>/storage/emulated/0/Android/data/com.***.***[the package name]/files/Pictures/newPicture.jpg</code>"" and in this case, IT TOTALLY WORKS! However I REALLY want to save the picture to <code>/storage/emulated/0</code> directory because I want user to be able to access the data easily later on. </p>

<p>In order to illustrate this better, I've recorded the application running and then took a picture and saved it in a gif, uploaded it to imgur right here: 
<a href=""https://imgur.com/Szpc1HR"" rel=""nofollow noreferrer"">https://imgur.com/Szpc1HR</a></p>

<p>See that? The picture seems to be saved into ""/storage/emulated/0/Pictures/newPicture.jpg"" successfully but then when I went to ES File Explorer to check the picture, the folder ""Pictures"" was not created, nada. </p>

<p>I'm literally on my wits end right here haha, does anyone know a solution to this problem? Any advice will be greatly appreciated</p>

<p>P.S. Almost forgot to say, I've already added the permission in <code>AndroidManifest.xml</code>:</p>

<pre><code>&lt;uses-permission android:name=""android.permission.CAMERA"" /&gt;
&lt;uses-permission android:name=""android.permission.WRITE_EXTERNAL_STORAGE""/&gt;

&lt;uses-feature android:name=""android.hardware.camera"" /&gt;
&lt;uses-feature android:name=""android.hardware.camera.autofocus"" /&gt;
</code></pre>
",7640725,,7640725,,2019-01-07 11:40:47,2019-01-07 11:57:58,Cannot create directory and save picture taken by camera in storage/emulated/0,<android><camera><storage><external>,1,2,,,
Android,37075088,1,,,2016,,1,122,"<p>I am using the <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">Camera2Basic example</a> by Google to test an application in Android Studio. I am getting this error when I run the project:</p>

<blockquote>
  <p>Error:Execution failed for task ':Application:transformClassesWithDexForDebug'.
  com.android.build.api.transform.TransformException: java.lang.RuntimeException: com.android.ide.common.process.ProcessException: java.util.concurrent.ExecutionException: com.android.ide.common.process.ProcessException: org.gradle.process.internal.ExecException: Process 'command 'C:\Program Files\Java\jdk1.7.0_55\bin\java.exe'' finished with non-zero exit value 1</p>
</blockquote>

<pre><code>buildscript {
    repositories {
        jcenter()
    }

    dependencies {
        classpath 'com.android.tools.build:gradle:2.0.0'
    }
}

apply plugin: 'com.android.application'

repositories {
    jcenter()
}

dependencies {
    compile ""com.android.support:support-v4:23.3.0""
    compile ""com.android.support:support-v13:23.3.0""
    compile ""com.android.support:cardview-v7:23.3.0""
    compile 'com.android.support:appcompat-v7:23.0.0'
}

// The sample build uses multiple directories to
// keep boilerplate and common code separate from
// the main sample code.
List&lt;String&gt; dirs = [
    'main',     // main sample code; look here for the interesting stuff.
    'common',   // components that are reused by multiple samples
    'template'] // boilerplate code that is generated by the sample template process

android {
    compileSdkVersion 23
    buildToolsVersion ""24.0.0 rc3""

    defaultConfig {
        minSdkVersion 21
        targetSdkVersion 23
    }

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_7
        targetCompatibility JavaVersion.VERSION_1_7
    }

    sourceSets {
        main {
            dirs.each { dir -&gt;
                java.srcDirs ""src/${dir}/java""
                res.srcDirs ""src/${dir}/res""
            }
        }
        androidTest.setRoot('tests')
        androidTest.java.srcDirs = ['tests/src']

    }

}
</code></pre>

<p><strong>What I did</strong></p>

<p>1) I added <code>multiDexEnabled true</code> in defaultConfig.</p>

<p>2) Also tried by adding <code>compile 'com.android.support:multidex:1.0.0'</code> in dependencies.</p>
",3067928,,6083675,,2016-05-12 17:29:19,2016-05-12 17:29:19,Camera2Basic : Application:transformClassesWithDexForDebug,<java><android><android-camera2>,1,0,,,
Android,54448798,1,54448919,,2019,,1,21,"<p>I imported a project from GitHub of Universal Music Player - Google Sample.
I can't find where the Versions of dependencies are defined in here. </p>

<p><a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-UniversalMusicPlayer</a></p>

<p>This is where I imported the project from</p>

<p>dependencies {
    implementation project(':media')</p>

<pre><code>implementation ""org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlin_version""

implementation ""androidx.appcompat:appcompat:$androidx_app_compat_version""
implementation ""androidx.legacy:legacy-support-v4:$androidx_version""
implementation ""androidx.recyclerview:recyclerview:$androidx_version""

implementation ""androidx.constraintlayout:constraintlayout:$constraint_layout_version""
implementation ""androidx.lifecycle:lifecycle-extensions:$arch_lifecycle_version""

// Glide dependencies
implementation ""com.github.bumptech.glide:glide:$glide_version""
kapt ""com.github.bumptech.glide:compiler:$glide_version""
</code></pre>

<p>}</p>

<p>I was expecting def version name, but can't seem to figure out where it is in the Google sample code. </p>
",10966474,,,,,2019-01-30 20:20:17,Where are the dependency Versions defined in build gradle (app) of Android Studio?,<android><android-studio>,1,0,,,
Android,54493736,1,,,2019,,1,143,"<p>What is the difference between creating an object of RoomDatabase to use inside the callback like what is in this example of <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/BasicSample/app/src/main/java/com/example/android/persistence/db/AppDatabase.java"" rel=""nofollow noreferrer"">BasicSample</a> at line 83, and 88,</p>

<p>And,</p>

<p>Using the member variable of RoomDatabase inside the callback like what is in this example of <a href=""https://github.com/googlecodelabs/android-room-with-a-view/blob/master/app/src/main/java/com/example/android/roomwordssample/WordRoomDatabase.java"" rel=""nofollow noreferrer"">android-room-with-a-view</a> at line 71?</p>

<p>I am not asking for opinion, I am asking if there is a difference or benefits  between the two examples?</p>

<p>I don't know why there is no answer</p>
",10013678,,7976274,,2019-02-04 8:28:12,2019-02-13 5:58:10,Creating an instance of Room Database inside the callback or use the member variable of that database,<java><android><callback><android-room>,1,0,,,
Android,54640389,1,,,2019,,1,37,"<p>I am trying to create a protected context using opengl on android.</p>

<p>I am basing my code off of:
<a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk</a></p>

<p>Using the native activity as my base.</p>

<p>I have changed the EGL parameters to the following:</p>

<pre><code>EGLint context_attribs[] = {
        EGL_CONTEXT_CLIENT_VERSION, 3,
        0x32C0, EGL_TRUE,
        EGL_NONE,
};
EGLint surface_attribs[] = {
        0x32C0, EGL_TRUE,
        EGL_NONE,
};
</code></pre>

<p>And things seem to work on most devices, but a few devices are giving strange behavior (phone crashes, or not displaying at all, even though they claim to support protected contexts). A good example is the s9 qualcomm edition runs fine, until anything appears on the screen (overlay, navbar slide down, or sliding the samsung side-bar) which will result in a phone reboot. </p>

<p>Is there something I may have missed with setting up the protected contexts?</p>

<p>According to the khronos docs: 
<a href=""https://www.khronos.org/registry/EGL/extensions/EXT/EGL_EXT_protected_content.txt"" rel=""nofollow noreferrer"">https://www.khronos.org/registry/EGL/extensions/EXT/EGL_EXT_protected_content.txt</a></p>

<p>0x32c0 is the correct number for protected content.</p>

<p>--------------EDIT--------------</p>

<p>I swapped 0x32c0 over to EGL_PROTECTED_CONTENT_EXT, and checked the extensions, and EGL_EXT_protected_content does exist. There are two devices I am working with that are having problems with this specifically (Samsung Galaxy s9+ qualcomm and Samsung Galaxy Tab S2). The S2 claims it supports the protected context, but then after using it, I get EGL_BAD_ALLOC. On the S9, everything runs fine, no errors, but the device will consistently crash on me after using it for a little.</p>
",7313789,,7313789,,2019-02-15 18:51:19,2019-02-15 18:51:19,android ndk opengl creating protected context,<android><opengl-es><android-ndk><egl>,1,0,,,
Android,51216376,1,51220755,,2018,,1,489,"<p>I am trying to build an app that is based on [todo-mvp-dagger] and retrofit. After creating the initial classes, modules, room db (first time using) and rebuilding the project, I am receiving an error: cannot find symbol variable DaggerAppComponent</p>

<p>Following <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">todo-mvp-dagger</a> app from Google Android Architecture sample.<br>
The [todo-mvp-dagger] app is building fine but mine is not. <br>What am I missing?<br><br>
Here is my <a href=""https://github.com/abhi007tyagi/MVP-Dagger2-Retrofit-Room"" rel=""nofollow noreferrer"">project repository</a>.</p>

<p><a href=""https://i.stack.imgur.com/YJAgo.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/YJAgo.png"" alt=""enter image description here""></a></p>

<p><strong>Code is minimized now</strong> <br><br></p>

<p><strong>UPDATE</strong><br>
I updated the Dagger version and now I am getting following errors<br></p>

<ol>
<li><code>error: cannot find symbol variable DaggerAppComponent</code></li>
<li><code>/Users/abhinavtyagi/Documents/workspace/workspace_android/Research/UdacityCourseViewer/app/build/generated/source/apt/debug/com/tyagiabhinav/udacitycourseviewer/di/DaggerApplicationComponent.java:
uses unchecked or unsafe operations.
Recompile with -Xlint:unchecked for details.</code></li>
</ol>

<p>/Users/abhinavtyagi/Documents/workspace/workspace_android/Research/UdacityCourseViewer/app/build/generated/source/apt/debug/com/tyagiabhinav/udacitycourseviewer/di/DaggerApplicationComponent.java:
uses unchecked or unsafe operations.
Recompile with -Xlint:unchecked for details.</p>
",734298,,734298,,2018-07-07 6:19:14,2018-07-07 6:54:41,Room Retrofit Dagger2 MVP: Error: cannot find symbol variable DaggerAppComponent,<android><dependency-injection><retrofit><dagger-2><android-room>,1,10,,,
Android,51252795,1,,,2018,,1,132,"<p>I'm trying to mess around with the Google Fit API.  I have a WearOS emulator connected to my actual device (Samsung Galaxy).  When I run the application, I am pretty sure I should be getting a screen to pop up asking for permissions, but I am getting no such screen.  I went through the process of getting the token in the Google API console.</p>

<pre><code>public class GoalsListActivity extends WearableActivity {

    public static final String TAG = ""BasicRecordingApi"";
    private static final int REQUEST_OAUTH_REQUEST_CODE = 1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.goals_screen_layout);

        accessGoogleFit();

        // Enables Always-on
        setAmbientEnabled();
    }




    /**
     * Check if the user has permissions to talk to Fitness APIs; otherwise authetnciate the user and request required permissions
     */

    private void accessGoogleFit() {

        FitnessOptions fitnessOptions = getFitnessSignInOptions();

        if (!hasOAuthPermission()) {
            GoogleSignIn.requestPermissions(this, REQUEST_OAUTH_REQUEST_CODE, GoogleSignIn.getLastSignedInAccount(this), fitnessOptions);
        } else {
            subscribeToRecordingApi();
        }
    }

    /**
     * Create a FitnessOptions instance, declaring the Fit API data types and access required by the app
     *
     * @return FitnessOptions object
     */


    private FitnessOptions getFitnessSignInOptions() {
        FitnessOptions fitnessOptions = FitnessOptions.builder()
                .addDataType(DataType.TYPE_STEP_COUNT_DELTA, FitnessOptions.ACCESS_READ)
                .addDataType(DataType.AGGREGATE_STEP_COUNT_DELTA, FitnessOptions.ACCESS_READ)
                .build();
        return fitnessOptions;
    }


    /**
     * Check if user's account has OAuth permission to Fit API
     *
     * @return true if user has OAuth permission
     */


    private boolean hasOAuthPermission() {
        FitnessOptions fitnessOptions = getFitnessSignInOptions();

        //Check if the user has previously granted the necessary data access, and if not, inititate the authroization flow
        boolean hasAuthO = GoogleSignIn.hasPermissions(GoogleSignIn.getLastSignedInAccount(this), fitnessOptions);
        return hasAuthO;
    }

    //If the user does not have necessary data access, inititate the authorization flow
    private void requestOAuthPermission() {
        FitnessOptions fitnessOptions = getFitnessSignInOptions();
        GoogleSignIn.requestPermissions(
                this, //our activity
                REQUEST_OAUTH_REQUEST_CODE,
                GoogleSignIn.getLastSignedInAccount(this),
                fitnessOptions);

    }

    /**
     * SUBSCRIBE TO FITNESS DATA
     * To record data from the sensors, we need to first create a subscription.
     * To create a subscription, invoke the Recording API.  As soon as the subscription is active, fitness data will start recording
     */


    private void subscribeToRecordingApi() {

        Fitness.getRecordingClient(this, GoogleSignIn.getLastSignedInAccount(this))
                .subscribe(DataType.TYPE_ACTIVITY_SAMPLES)
                .addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {
                    @Override
                    public void onSuccess(Void aVoid) {

                        Log.i(TAG, ""Successfully subscribed!"");
                    }
                })
                .addOnFailureListener(new OnFailureListener() {
                    @Override
                    public void onFailure(@NonNull Exception e) {
                        Log.i(TAG, ""There was a problem subscribing"");
                    }
                });
    }

    /**
     * Get a list of all active subscriptions
     */

    private void getAllActiveSubscriptions() {
        Fitness.getRecordingClient(this, GoogleSignIn.getLastSignedInAccount(this))
                .listSubscriptions(DataType.TYPE_ACTIVITY_SAMPLES)
                .addOnSuccessListener(new OnSuccessListener&lt;List&lt;Subscription&gt;&gt;() {
                    @Override
                    public void onSuccess(List&lt;Subscription&gt; subscriptions) {
                        for (Subscription sc : subscriptions) {
                            DataType dt = sc.getDataType();
                            Log.i(TAG, ""Active subscription for data type: "" + dt.getName());
                        }
                    }
                });
    }


    /**
     * UNSUBSCRIBE - STOP COLLECTING SENSOR DATA IN THE APP
     * Cancels the ACTIVITY_SAMPLE subscription on that {@link DataType}
     */


    public void stopRecording() {

        final String dataTypeStr = DataType.TYPE_ACTIVITY_SAMPLES.toString();
        Log.i(TAG, ""Unsubscribing from data type: "" + dataTypeStr);

        //Invoke the Recording API to unsubscribe from the data type and specify a callback that will check the result
        Fitness.getRecordingClient(this, GoogleSignIn.getLastSignedInAccount(this))
                .unsubscribe(DataType.TYPE_ACTIVITY_SAMPLES)
                .addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {
                    @Override
                    public void onSuccess(Void aVoid) {
                        Log.i(""TAG"", ""Successfully unsubscribed for data type: "" + dataTypeStr);
                    }
                })
                .addOnFailureListener(new OnFailureListener() {
                    @Override
                    public void onFailure(@NonNull Exception e) {
                        //The subscription was not removed
                        Log.i(TAG, ""Failed to unsubscribe for data type: "" + dataTypeStr);
                    }
                });
    }


}
</code></pre>

<p>The code basically came from <a href=""https://github.com/googlesamples/android-fit/blob/master/BasicRecordingApi/app/src/main/java/com/google/android/gms/fit/samples/basicrecordingapi/MainActivity.java"" rel=""nofollow noreferrer"">enter link description here</a>, which is Google's own example code.  I have the API key.  For some reason I just can't get it to work.  Thank you.  </p>
",9599554,,,,,2018-09-13 12:39:52,Can't get Google Fit OAuth 2.0 linked to WearOS App,<android><wear-os><google-fit>,1,0,,,
Android,52173040,1,52176365,,2018,,1,653,"<pre><code>@Test
fun sendResultToUI() {

    val foo = MutableLiveData&lt;Resource&lt;User&gt;&gt;()
    val bar = MutableLiveData&lt;Resource&lt;User&gt;&gt;()
    `when`(userRepository.loadUser(""foo"")).thenReturn(foo)
    `when`(userRepository.loadUser(""bar"")).thenReturn(bar)
    val observer = mock&lt;Observer&lt;Resource&lt;User&gt;&gt;&gt;()
    userViewModel.user.observeForever(observer) //Create foo and bar, observe user live data

    userViewModel.setLogin(""foo"")
    verify(observer, never()).onChanged(any()) //Make sure that setting login to foo did not touch vm.user?

    /*val fooUser = TestUtil.createUser(""foo"")
    val fooValue = Resource.success(fooUser)
    foo.value = fooValue
    verify(observer).onChanged(fooValue)
    reset(observer)

    val barUser = TestUtil.createUser(""bar"")
    val barValue = Resource.success(barUser)
    bar.value = barValue
    userViewModel.setLogin(""bar"")
    verify(observer).onChanged(barValue)*/
}
</code></pre>

<p>Can anyone please explain wtf this line: <code>verify(observer, never()).onChanged(any())</code> is doing in Google's <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample"" rel=""nofollow noreferrer"">GithubBrowser</a> sample? I just don't understand it, calling <code>setLogin()</code> <em>fires</em> the observer so how the hell can we verify that <code>onChanged()</code> was never called when we specifically triggered it on the previous line!?</p>
",1866373,,,,,2018-09-05 2:49:53,Android Architecture sample unit testing live data,<android><kotlin><android-testing><android-architecture-components><android-livedata>,1,0,,,
Android,30106336,1,30107908,,2015,,2,1236,"<p>The <a href=""http://developer.android.com/reference/android/media/projection/package-summary.html"" rel=""nofollow noreferrer"">Media Projection</a> package is new Lollipop, and allows an app to capture the device's screen in realtime for streaming to video. I was hoping this could also be used to capture a single still screenshot, but so far I have not been successful. Of course, the first frame of a captured video could work, but I'm aiming for a perfect, lossless screenshot matching the pixel resolution of the device. A still from a captured video cannot provide that.</p>

<p>I've tried a lot of things, but the closest I came to a solution was to first launch an <a href=""https://stackoverflow.com/questions/2176922/how-to-create-transparent-activity-in-android/2700683#2700683"">invisible activity</a>. This activity then follows the <a href=""https://github.com/googlesamples/android-ScreenCapture"" rel=""nofollow noreferrer"">API example</a> for starting screen capture, which can include asking the user's permission. Once screen capture is enabled, the screen image is live in a SurfaceView. However, I cannot find a way to capture a bitmap from the SurfaceView. There are lots of <a href=""https://stackoverflow.com/questions/12724237/taking-screen-shot-of-a-surfaceview-in-android"">questions</a> and <a href=""https://stackoverflow.com/questions/25091703/how-to-create-and-save-a-screenshot-from-a-surfaceview"">discussions</a> about this, but no solutions seem to work, and there is some evidence that it is <a href=""https://groups.google.com/d/msg/android-platform/xHIActZZ9PA/Ur4E0BuEKvEJ"" rel=""nofollow noreferrer"">impossible</a>.</p>

<p>Any ideas?</p>
",369833,,-1,,2017-05-23 12:02:11,2015-05-07 17:28:19,How to capture a screenshot programmatically with Lollipop,<android><android-mediaprojection>,1,6,3,,
Android,43300273,1,,,2017,,2,205,"<p>I've tried to use Nearby Connections, but I keep getting the dialog ""Google Play Services"" has crashed. The logcat shows a stack trace like this:</p>

<pre><code>04-08 20:01:32.309 8904-11589/? E/AndroidRuntime: FATAL EXCEPTION: highpool[3]
                                                  Process: com.google.android.gms.nearby.connection, PID: 8904
                                                  java.lang.NullPointerException: Attempt to read from field 'java.lang.Object pu.a' on a null object reference
                                                      at vsb.e(:com.google.android.gms:244)
                                                      at vsr.run(:com.google.android.gms:344)
                                                      at lmq.run(:com.google.android.gms:450)
                                                      at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)
                                                      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)
                                                      at lra.run(:com.google.android.gms:17)
                                                      at java.lang.Thread.run(Thread.java:818)
</code></pre>

<p>Where the specific random letters can change.</p>

<p>After further investigation, it seems to occur when a device is attempting to discover advertising devices and the timeout it specifies ends.</p>

<p>I went to report the issue and found someone already had:</p>

<p><a href=""https://code.google.com/p/android/issues/detail?can=1&amp;start=0&amp;num=100&amp;q=nearby%20connections%20nullpointerexception&amp;colspec=ID%20Status%20Priority%20Owner%20Summary%20Stars%20Reporter%20Opened&amp;groupby=&amp;sort=&amp;id=316748"" rel=""nofollow noreferrer"">https://code.google.com/p/android/issues/detail?can=1&amp;start=0&amp;num=100&amp;q=nearby%20connections%20nullpointerexception&amp;colspec=ID%20Status%20Priority%20Owner%20Summary%20Stars%20Reporter%20Opened&amp;groupby=&amp;sort=&amp;id=316748</a></p>

<p>Very few apps seem to use Nearby Connections; I know of none. The official documentation isn't great. Heck, <code>Nearby.Connections.startAdvertising()</code> still wants a <code>AppMetadata</code> parameter, which Google has deprecated.</p>

<p>The official code example, <a href=""https://github.com/googlesamples/android-nearby"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-nearby</a> , is obsolete and non-functional.</p>

<p>So my question is: how can I work around these issues? Is there a modern, <em>working</em> example of Nearby Connections anywhere? Or is the Nearby Connections API itself simply unused and completely broken?</p>
",967131,,,,,2017-07-06 8:19:32,Nearby Connections NullPointerException,<android><google-nearby>,1,4,2,,
Android,39034348,1,39045922,,2016,,2,563,"<p>I'm trying to code a proof of concept, with <strong>Xamarin android</strong>.
A sort of EMM tool, i.e. an application which will be on charge to install other application and manage the device.
So <strong>Android Marshmallow</strong> is a good start with android for work features.</p>

<p>My app is <strong>Device Owner</strong> therefore it should have no problem to <strong>silently install</strong> other applications. It can download an apk from a website without a problem. But when I try to install it, it throws an ""<strong>Files still open</strong>"" exception despite of calling all <code>Close()</code> methods.</p>

<p>I have taken my code from the example of the excellent android-testdpc sample on github  <a href=""https://github.com/googlesamples/android-testdpc/tree/master/app/src/main/java/com/afwsamples/testdpc/cosu"" rel=""nofollow"">here</a></p>

<p>I have changed it for it work in c# with Xamarin.</p>

<p>Here is my code :</p>

<pre><code>    public static bool InstallPackage(Context context, Handler handler, InputStream input, String packageName)
    {
        try
        {
            PackageInstaller packageInstaller = context.PackageManager.PackageInstaller;
            PackageInstaller.SessionParams param = new PackageInstaller.SessionParams(PackageInstallMode.FullInstall);
            param.SetAppPackageName(packageName);
            // set params
            int sessionId = packageInstaller.CreateSession(param);
            PackageInstaller.Session session = packageInstaller.OpenSession(sessionId);
            using (System.IO.Stream output = session.OpenWrite(""COSU"", 0, -1))
            {
                byte[] buffer = new byte[65536];
                int c;
                while ((c = input.Read(buffer)) != -1)
                {
                    output.Write(buffer, 0, c);
                }
                session.Fsync(output);
                input.Close();
                output.Close();
            }
            session.Commit(createIntentSender(context, sessionId)); // this line throws exception 'Files stil open'
            return true;
        }
        catch (Exception ex)
        {
            Log.Error(TAG, ""Error installing package: "" + packageName, ex);
            handler.SendMessage(handler.ObtainMessage(Common.MSG_INSTALL_FAIL,
                    packageName));
            return false;
        }
    }
</code></pre>

<p>I'm stuck with this for the moment. if I have the time I will try to install android studio and test my code in java to see if the problem come from Xamarin.</p>

<p>If someone got any clue for my problem I will really appreciate the help</p>
",6733826,,,,,2016-08-19 18:48:53,"Xamarin.Android PackageInstaller Session.commit ""Files still open"" Exception on apk silent install",<c#><android><xamarin><xamarin.android><android-install-apk>,1,0,2,,
Android,31756883,1,32000958,,2015,,2,687,"<p>Not sure how many people here are familiar with the <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""nofollow noreferrer"">Android Universal Music Player</a> but I am having issue with displaying an album in the <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer/blob/b729def3679cac2d66136e8fdc9237d01bfb485c/mobile/src/main/java/com/example/android/uamp/ui/MediaItemViewHolder.java#L75"" rel=""nofollow noreferrer"">MediaItemViewHolder.java</a> file.</p>

<p>So here is a basic structure after my modifications: </p>

<pre><code>// image view for the album cover
holder.mImageView = (ImageView) convertView.findViewById(R.id.play_eq);

// get the album art url
String artUrl = description.getIconUri().toString();
Bitmap art;
AlbumArtCache cache = AlbumArtCache.getInstance();
art = cache.getIconImage(artUrl);
....
if (cachedState == null || cachedState != state) {
    switch (state) {
    case STATE_PLAYABLE:
         // display the album cover
         holder.mImageView.setImageBitmap(art);
         break;
....
</code></pre>

<p>This correctly displays the album cover. However, <strong>it is initially blank</strong>. Once the user clicks on an item, the image is displayed. </p>

<p><strong>Screenshot #1</strong> : Once the app is loaded and user did not click on any item: </p>

<p><a href=""https://i.stack.imgur.com/9oObH.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/9oObH.png"" alt=""enter image description here""></a></p>

<p><strong>Screenshot #2</strong> : Once the user click on the item to play the song</p>

<p><a href=""https://i.stack.imgur.com/6ZtlI.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/6ZtlI.png"" alt=""enter image description here""></a></p>

<p>I am not really sure what is causing the album to be initially blank. Looking at the <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer/blob/b729def3679cac2d66136e8fdc9237d01bfb485c/mobile/src/main/java/com/example/android/uamp/AlbumArtCache.java#L75"" rel=""nofollow noreferrer"">AlbumArtCache.java</a> I can't see any restrictions about OnClickListener that can cause this. </p>

<p>Any suggestions how to resolve this issue?</p>
",4576720,,,,,2015-08-14 1:24:58,Android universal music player add album cover in the MediaItemViewHolder,<java><android><android-imageview><android-bitmap>,1,0,2,,
Android,50031467,1,,,2018,,2,251,"<p>I have a class called <code>CosuUtils</code> that follows <a href=""https://github.com/googlesamples/android-testdpc/blob/master/app/src/main/java/com/afwsamples/testdpc/cosu/CosuUtils.java"" rel=""nofollow noreferrer"">this</a> class pretty closely. I am programmatically updating an application that is a device owner. This works fine in Android 6 but I'm getting the following error when trying to update in Android 7. </p>

<p><code>PackageInstaller: Commit of session 1108510423 failed: /data/app/vmdl1108510423.tmp/COSU specified package com.mypackage inconsistent with com.mypackage.full</code></p>

<p>In <code>CosuUtils</code> I set the package name as such </p>

<pre><code>public static boolean installPackage(Context context, InputStream in, String packageName) throws IOException {
    PackageInstaller packageInstaller = context.getPackageManager().getPackageInstaller();
    PackageInstaller.SessionParams params = new PackageInstaller.SessionParams(PackageInstaller.SessionParams.MODE_FULL_INSTALL);
    params.setAppPackageName(packageName);
</code></pre>

<p>I was passing <code>com.mypackage</code> to <code>installPackage</code> which as mentioned earlier works fine on Android 6. This doesn't work in Android 7 unless I use <code>com.mypackage.full</code>. The issue is this breaks the ability for users who have upgraded to Android 7 to update to the latest version of the app. What changed between Android 6 and 7 that caused it to break and is there a work around for it?</p>
",9301093,,,,,2018-04-26 15:51:46,PackageInstaller error when pragmatically updating app,<android><android-7.0-nougat><device-owner><cosu><packageinstaller>,1,0,2,,
Android,36713033,1,,,2016,,2,494,"<p>Android's <code>Content Provider</code> <a href=""http://developer.android.com/guide/topics/manifest/provider-element.html#auth"" rel=""nofollow"">must have</a>:</p>

<blockquote>
  <p>At least one authority must be specified.</p>
</blockquote>

<p>So for example in Google's samples <a href=""https://github.com/googlesamples/android-BasicSyncAdapter/blob/master/Application/src/main/AndroidManifest.xml"" rel=""nofollow"">android-BasicSyncAdapter AndroidManifest.xml</a> there is</p>

<pre><code>&lt;provider
    android:name="".provider.FeedProvider""
    android:authorities=""com.example.android.basicsyncadapter""
    android:exported=""false"" /&gt;
</code></pre>

<p>Then to implement this CP one need to define the same String inside the CP like in <a href=""https://github.com/googlesamples/android-BasicSyncAdapter/blob/8210761ee67e06210d14ce913b2d82618cee0bb7/Application/src/main/java/com/example/android/basicsyncadapter/provider/FeedProvider.java"" rel=""nofollow"">android-BasicSyncAdapter FeedProvider.java</a> <code>CONTENT_AUTHORITY</code></p>

<pre><code>public static final String CONTENT_AUTHORITY = ""com.example.android.basicsyncadapter"";
</code></pre>

<p>As we have to define this String twice, isn't this basically breaking the DRY rule - if I change it in one place, I have to remember to change it somewhere else as well.</p>
",2401535,,,,,2016-05-01 18:56:55,Does Android Content Provider authority definition break the DRY rule?,<android><android-contentprovider><dry>,1,1,2,,
Android,36739298,1,,,2016,,2,592,"<p>I am trying to record video from <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow"">android camera2 sample</a></p>

<p>All works fine but when I play the video after recording (from the sd card), the video starts freezing and you can hear just the audio at the background and when the audio stops, the video start playing without the audio and the time of the video jumps from seconds to minites (03:24)</p>

<pre><code>private void setUpMediaRecorder() throws IOException {
    mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.SURFACE);
    mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);

    mMediaRecorder.setOutputFile(getVideoFile().getAbsolutePath());
    mMediaRecorder.setVideoEncodingBitRate(10000000);
    mMediaRecorder.setVideoFrameRate(30);
    //mMediaRecorder.setMaxDuration(60000); // Set max duration 60 sec.
    mMediaRecorder.setVideoSize(mVideoSize.getWidth(), mVideoSize.getHeight());
    mMediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264);
    mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);


    int rotation = getWindowManager().getDefaultDisplay().getRotation();
    int orientation = ORIENTATIONS.get(rotation);

    if (mCameraType == 1) {
        if (orientation == 90) {
            mMediaRecorder.setOrientationHint(270);
        } else if (orientation == 270) {
            mMediaRecorder.setOrientationHint(90);
        }
    }
    else {
        mMediaRecorder.setOrientationHint(orientation);
    }
    mMediaRecorder.prepare();
}
</code></pre>

<p>Figure out that it works without those lines:</p>

<pre><code>mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);
</code></pre>

<p>How can I make it works with sound?</p>

<p>The stupid solution is to restart the device.
Is someone know why is that happening? </p>

<p>Thanks for helping</p>
",5904387,,5904387,,2016-06-13 10:16:48,2017-04-05 1:38:17,Android camera2 delay between the video to the sound,<android><android-mediarecorder><camera2>,1,2,2,,
Android,47874391,1,,,2017,,2,596,"<p>I've noticed an odd behavior when injecting ViewModels into my activities/fragments (following the example at <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample"" rel=""nofollow noreferrer"">GithubBrowserSample</a>).</p>

<p><strong>Trial 1</strong> At first I was just lazily seeing what happens when I use</p>

<pre><code>@Inject MainViewModel viewModel;
</code></pre>

<p>Obviously, I got a new instance of MainViewModel for every activity and when rotated.</p>

<p><strong>Trial 2</strong>
I then updated to using ""the right way"" of injecting the <code>ViewModelProvider.Factory</code> and grabbing the view model in <code>onCreate</code>:</p>

<pre><code>@Inject ViewModelProvider.Factory viewModelProviderFactory;
private MainViewModel viewModel;

@Override
public void onCreate(Bundle savedInstanceState) {
    viewModel = ViewModelProviders.of(this, viewModelProviderFactory)
            .get(MainViewModel::class);
}
</code></pre>

<p>This snippet works like a charm. Printing the viewModel will show that I get a new instance for each new activity instance triggered from a startActivity call but re-using when rotated. This got me thinking... Maybe I can just inject the MainViewModel.</p>

<p><strong>Trial 3</strong> I updated my MainActivityModule to include the following:</p>

<pre><code>@Provides @ActivityScope
public MainViewModel provideMainViewModel(MainActivity activity,
        ViewModelProvider.Factory factory) {
    return ViewModelProviders.of(activity, factory).get(MainViewModel::class);
}
</code></pre>

<p>This resulted in a new instance of MainViewModel even on screen rotations (same as trial 1). I verified that the provided ViewModelProvider.Factory instance is the same every time that provideMainViewModel is called. I also tried removing the @ActivityScope which caused even stranger behavior especially when trying to include the same instance of MainViewModel in both MainActivity and MainFragment1. The fragment got the same instance of MainViewModel as before the rotation, but the activity got a brand new one, even though both calls to provideMainViewModel were called with the same instance of MainActivity and the factory.</p>

<p><strong>Question</strong> Can anyone explain this? Is there no way for me to inject the ViewModel directly into my activity/fragment?</p>

<p><strong>UPDATE</strong></p>

<p>This is really baffling me so I've updated to include a full sample of the issue <a href=""https://github.com/yperess/android-architecture-components"" rel=""nofollow noreferrer"">HERE</a>. Note that I've had to update AppInjector's <code>FragmentLifecycleCallback</code> to inject the fragment during <code>onFragmentPreCreated</code>. This was done due to the lifecycle of a fragment, the current implementation seen in <code>SearchFragment</code> using <code>SearchViewModel</code> will get the instance of the view model during <code>onActivityCreated</code> which may be called more than once on the same fragment. In such a case, the same view model will be returned from <code>ViewModelProviders</code> and multiple observers will be registered. Instead Fragments should be injected before <code>onCreate</code> and any LiveData observers should be registered at that point.</p>

<p>When run and rotated, you'll see the following logs:</p>

<pre><code>12-19 22:48:28.538 7116-7116/com.android.example.github D/MainActivityProvidersMo: provideMainViewModel for com.android.example.github.MainActivity@78c5d27 using com.android.example.github.viewmodel.GithubViewModelFactory@6d6c140: com.android.example.github.MainViewModel@fd1f879
12-19 22:48:28.611 7116-7116/com.android.example.github D/MainActivity: viewModel: com.android.example.github.MainViewModel@fd1f879
12-19 22:48:28.615 7116-7116/com.android.example.github D/dagger.android.support: An injector for com.android.example.github.ui.search.SearchFragment was found in com.android.example.github.MainActivity
12-19 22:48:28.616 7116-7116/com.android.example.github D/SearchFragment: mainViewModel: com.android.example.github.MainViewModel@fd1f879
12-19 22:48:28.760 7116-7116/com.android.example.github D/SearchFragment: results live data has observers? false


12-19 22:48:40.579 7116-7116/com.android.example.github D/MainActivityProvidersMo: provideMainViewModel for com.android.example.github.MainActivity@d1f344f using com.android.example.github.viewmodel.GithubViewModelFactory@6d6c140: com.android.example.github.MainViewModel@c5387dc
12-19 22:48:40.581 7116-7116/com.android.example.github D/dagger.android.support: An injector for com.android.example.github.ui.search.SearchFragment was found in com.android.example.github.MainActivity
12-19 22:48:40.583 7116-7116/com.android.example.github D/SearchFragment: mainViewModel: com.android.example.github.MainViewModel@c5387dc
12-19 22:48:40.625 7116-7116/com.android.example.github D/MainActivity: viewModel: com.android.example.github.MainViewModel@c5387dc
12-19 22:48:40.715 7116-7116/com.android.example.github D/SearchFragment: results live data has observers? false
</code></pre>
",3456952,,3456952,,2017-12-20 4:00:36,2018-01-13 16:45:47,Dagger 2 inject ViewModel odd behavior (ViewModel not re-used on screen rotation),<android><mvvm><android-lifecycle><dagger-2>,1,0,1,,
Android,28685027,1,28789178,,2015,,2,4714,"<p>Still not understanding if this is possible without root or not.I think that if it is possible to record the screen on video, this is also possible, have anyone done it yet?</p>

<p><a href=""https://github.com/googlesamples/android-ScreenCapture"" rel=""nofollow"">Been learning some code from this project, but still nothing</a></p>
",2129008,,,,,2015-03-01 1:46:05,Can Media Projection api take a screenshot from my home screen on lollipop?,<android><screenshot><android-5.0-lollipop>,1,0,1,,
Android,37816319,1,37858843,,2016,,2,54,"<p>I try to receive Text via Bluetooth (BT) using Android. I can view the Text using a pre-existing Bluetooth logger from the Google Play store, but with my own code it does not work correct.</p>

<p>In general I use the default BT code from the Android documentation and <a href=""https://github.com/googlesamples/android-BluetoothChat"" rel=""nofollow"">samples</a>. I log the received Text. I expect my text to be something like:
<code>-0.01, -0.03, 1.04</code>, but I only receive parts of it. Here is a part of the logs:</p>

<pre><code>06-14 17:25:01.925 28217-28412/[...]: I read the following: 0.01, -0.
06-14 17:25:01.977 28217-28412/[...]: I read the following: 
06-14 17:25:02.039 28217-28412/[...]: I read the following: -
06-14 17:25:02.051 28217-28412/[...]: I read the following: 0.01, -0.
06-14 17:25:02.101 28217-28412/[...]: I read the following: 
06-14 17:25:02.174 28217-28412/[...]: I read the following: -
</code></pre>

<p>This is the code I use to read from BT:</p>

<pre><code>    public void run() {
        byte[] buffer = new byte[1024];  // buffer store for the stream
        int bytes; // bytes returned from read()

        // Keep listening to the InputStream until an exception occurs
        while (true) {
            try {
                // Read from the InputStream
                bytes = mmInStream.read(buffer);
                String readMessage = new String(buffer, 0, bytes);
                Log.e(Constants.TAG, ""I read the following: ""+readMessage);
            } catch (IOException e) {
                break;
            }
        }
    }
</code></pre>

<p>Not sure if it's relevant, but I am using an HC-06 BT module connected to an Arduino sending data with <code>9600</code> Baud. I can give you the code for this as well.</p>

<p>I tried two different Android phones with the same result. Wiko Fever and Moto G2.</p>
",1548788,,3956566,,2016-06-14 15:41:27,2016-06-16 12:10:59,Android ReceiveReceive Text via Bluetooth,<android><logging><arduino><android-bluetooth>,1,0,1,,
Android,27876937,1,,,2015,,2,508,"<p>I imported WatchFace sample <a href=""https://github.com/googlesamples/android-WatchFace"" rel=""nofollow"">https://github.com/googlesamples/android-WatchFace</a>
however I cannot run phone app neither install watch faces to the emulator.
That sample project's phone app doesn't have default activity, but when I'm trying to start any of it's activities, it gives Null exception on ComponentName</p>

<pre><code>Caused by: java.lang.NullPointerException
        at com.example.android.wearable.watchface.DigitalWatchFaceCompanionConfigActivity.onCreate(DigitalWatchFaceCompanionConfigActivity.java:77)
        at android.app.Activity.performCreate(Activity.java:5231)
        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1087)
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2169)    
</code></pre>

<p>row 77 is the last one in the onCreate method:</p>

<pre><code>@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_digital_watch_face_config);

    mPeerId = getIntent().getStringExtra(WatchFaceCompanion.EXTRA_PEER_ID);
    mGoogleApiClient = new GoogleApiClient.Builder(this)
            .addConnectionCallbacks(this)
            .addOnConnectionFailedListener(this)
            .addApi(Wearable.API)
            .build();

    ComponentName name = getIntent().getParcelableExtra(
            WatchFaceCompanion.EXTRA_WATCH_FACE_COMPONENT);
    TextView label = (TextView)findViewById(R.id.label);
    label.setText(label.getText() + "" ("" + name.getClassName() + "")"");
}
</code></pre>

<p>I set wearable app to not running any activity so it should install watch faces to the emulator. However is does not install anything.</p>

<p>I hope this is not a totally broken sample and I am just doing something very wrong, just can figure out what?
 Simple ""hello world"" app works OK and install with no issues when running on the same machine.</p>
",4439998,,1672895,,2015-01-10 14:36:49,2015-01-19 21:42:52,WatchFace sample - how to run,<android><nullpointerexception><sample>,1,0,1,,
Android,46275819,1,,,2017,,2,283,"<p>im very confused with NDK and with OpenSL 
Im trying to add OpenSL to my project. And have some problems. When i create ndk project- i dont have file Android.mk
but i have CMakeList</p>

<p>in tutorials everywhere talks about android.mk where need write one string for implement OpenSL to project.</p>

<p>here my build.graddle(module) file</p>

<pre><code>android {
    compileSdkVersion 26
    buildToolsVersion ""26.0.1""

    defaultConfig {
        minSdkVersion 15
        targetSdkVersion 26
        versionCode 1
        versionName ""1.0""
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
    externalNativeBuild {
        cmake {
            path 'CMakeLists.txt'
        }
    }

    sourceSets {
        main {
            jniLibs.srcDirs 'imported-lib/src/', 'more-imported-libs/src/'
        }
    }
}

dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    compile 'com.android.support:appcompat-v7:26.+'
}
</code></pre>

<p>CMakeList.txt</p>

<pre><code>cmake_minimum_required(VERSION 3.4.1)
add_library( # Specifies the name of the library.
             native-lib

             # Sets the library as a shared library.
             SHARED

             # Provides a relative path to your source file(s).
             src/main/cpp/native-lib.cpp )

             # Specifies a path to native header files.
             include_directories(src/main/cpp/include/)

             # Include libraries needed for native-audio-jni lib
             target_link_libraries(native-audio-jni
                                   android
                                   log
                                   OpenSLES)
</code></pre>

<p>and a simple test for ndk </p>

<pre><code>#include &lt;jni.h&gt;
#include &lt;string&gt;

extern ""C""
JNIEXPORT jstring JNICALL
Java_ndk_test_stringFromJNI(
        JNIEnv *env,
        jobject /* this */) {
    std::string hello = ""Hello from C++"";
    return env-&gt;NewStringUTF(hello.c_str());
}
</code></pre>

<p>calling function stringFromJNI is ok i see this line in logs. 
But main question what im doing wrong. How to implement OpenSL without Android.mk</p>

<p>In google.devandroid section its tell 
add <code>LOCAL_LDLIBS += -lOpenSLES</code> to Android.mk
in every tutorial all tells about android.mk. But i dont have this file. Can any help me ? 
in example of goo<a href=""https://github.com/googlesamples/android-ndk/tree/master/native-audio/app/src/main/cpp"" rel=""nofollow noreferrer"">link to example</a></p>
",562592,,,,,2017-09-29 13:23:26,Add OpenSL to android,<java><android><android-ndk><opensl>,1,2,1,,
Android,39281557,1,39352506,,2016,,2,1355,"<p>I am detecting text using a pipeline just like the <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/ocr-reader"" rel=""nofollow"">Google CodeLabs sample code</a>.  How do I get the preview Frame that the CameraSource sends to the TextRecognizer?</p>
",3561610,,,,,2016-09-06 15:15:27,Get Frame when detecting text using a pipeline in Android Mobile Vision,<android><android-vision>,1,0,1,,
Android,40533276,1,,,2016,,2,1167,"<p>I was working on taking a photo from my camera, and everything seems good, I'm using <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">Camera2Basic</a> sample, this code only offre the back camera so i added a button to switch between 2 cameras like this :</p>

<p>Boolean facingCamera = true; // initialization</p>

<pre><code>onClick() {
    facingCamera = !facingCamera;
    closeCamera();
    openCamera(mTextureView.getWidth(), mTextureView.getHeight()); 
}
</code></pre>

<p>And i changed method setUpCameraOutputs code like this :</p>

<pre><code>if (facing != null &amp;&amp; facing == CameraCharacteristics.LENS_FACING_FRONT ) {
    continue;
}
</code></pre>

<p><strong>To</strong></p>

<pre><code>if (facing != null &amp;&amp; facing == CameraCharacteristics.LENS_FACING_FRONT &amp;&amp; !facingCamera 
|| facing != null &amp;&amp; facing == CameraCharacteristics.LENS_FACING_BACK &amp;&amp; facingCamera ) {
    continue;
}
</code></pre>

<p>This work fine for Nexus 4 but for my LG-D802 is not working fine ( onConfigureFailed is called each time I try to change the camera )</p>

<p>How to fix this properly so it work fine on all devices?</p>
",6325994,,,,,2018-08-11 16:01:19,Android: Camera2 switching between back and front camera,<android><android-camera><android-camera2>,1,0,1,,
Android,50782496,1,,,2018,,2,411,"<p>I have a class in my app with executors for disk/network operations, like <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/AppExecutors.kt"" rel=""nofollow noreferrer"">this</a>. Is it possible to tell Room to use one of those to execute live queries?</p>
",3998718,,,,,2018-06-10 20:07:26,How to specify which thread(s) room live queries to run on?,<android><android-room><android-architecture-components>,1,3,1,,
Android,38274943,1,38798556,,2016,,2,7468,"<p>I am currently trying to build a static library of some source c++ files requiring boost. I have been following the <a href=""https://github.com/googlesamples/android-ndk/tree/master/hello-libs"" rel=""nofollow"">hello-libs</a> example and have successfully linked the boost static file dependencies as is done in the sample example.Now said that, during while building the module I get these erros :</p>

<blockquote>
  <p>Error:error: undefined reference to 'std::basic_string, std::allocator >::basic_string(char const*, std::allocator const&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::runtime_error::runtime_error(std::string const&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::_Rb_tree_decrement(std::_Rb_tree_node_base*)'</p>
  
  <p>Error:error: undefined reference to 'std::string::_Rep::_S_empty_rep_storage'</p>
  
  <p>Error:error: undefined reference to 'std::basic_string, std::allocator >::~basic_string()'</p>
  
  <p>Error:error: undefined reference to 'std::string::_Rep::_M_dispose(std::allocator const&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::runtime_error::runtime_error(std::string const&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::string::_Rep::_M_destroy(std::allocator const&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::basic_string, std::allocator >::basic_string(std::string const&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::_Rb_tree_increment(std::_Rb_tree_node_base*)'</p>
  
  <p>Error:error: undefined reference to 'std::string::_Rep::_S_empty_rep_storage'</p>
  
  <p>Error:error: undefined reference to 'std::string::_Rep::_M_destroy(std::allocator const&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::basic_string, std::allocator >::basic_string(std::string const&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::string::_Rep::_M_destroy(std::allocator const&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::_Rb_tree_increment(std::_Rb_tree_node_base const*)'</p>
  
  <p>Error:error: undefined reference to 'std::_Rb_tree_rebalance_for_erase(std::_Rb_tree_node_base*, std::_Rb_tree_node_base&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::string::_Rep::_S_empty_rep_storage'</p>
  
  <p>Error:error: undefined reference to 'std::string::_Rep::_S_empty_rep_storage'</p>
  
  <p>Error:error: undefined reference to 'std::basic_string, std::allocator >::basic_string(char const*, std::allocator const&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::basic_string, std::allocator >::basic_string(std::string const&amp;)'</p>
  
  <p>Error:error: linker command failed with exit code 1 (use -v to see invocation)</p>
  
  <p>Error:error: undefined reference to 'std::basic_string, std::allocator >::basic_string(char const*, std::allocator const&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::string::_Rep::_M_destroy(std::allocator const&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::_Rb_tree_rebalance_for_erase(std::_Rb_tree_node_base*, std::_Rb_tree_node_base&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::string::_Rep::_M_dispose(std::allocator const&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::basic_string, std::allocator >::basic_string(char const*, std::allocator const&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::_Rb_tree_insert_and_rebalance(bool, std::_Rb_tree_node_base*, std::_Rb_tree_node_base*, std::_Rb_tree_node_base&amp;)'</p>
  
  <p>Error:Execution failed for task ':dummy:linkDummyArmeabiDebugSharedLibrary'.</p>
  
  <p>A build operation failed.
        Linker failed while linking libdummy.so.
    See the complete log at: file:///home/cran-cg/Downloads/Hello-libs-boost/name/build/tmp/linkDummyArmeabiDebugSharedLibrary/output.txt</p>
</blockquote>

<p>I had been trying to resolve this and had come upon many solutions on stackoverflow itself, suggesting that I should amend my linker path and include libc++.so library </p>

<pre><code>ndk{
        moduleName = 'p2psp'
        stl = ""c++_shared""
       // ldLibs.addAll('-L'+ file(""/home/cran-cg/Android/Sdk/ndk-bundle/sources/cxx-stl/llvm-libc++/libs/armeabi"").absolutePath)
        ldLibs.addAll(['android', 'log','atomic'])/*""${NDK_ROOT}/sources/cxx-stl/gnu-libstdc++/4.9/libs/armeabi"",'gnustl_static'*/
        toolchain = ""clang""
        cppFlags.add(""-std=c++11"")
        cppFlags.add('-frtti')
        cppFlags.add('-fexceptions')
        cppFlags.addAll('-I' + file(""/home/cran-cg/Android/Sdk/ndk-bundle/sources/cxx-stl/llvm-libc++/libcxx/include"").absolutePath ,'-DANDROID', ' -DANDROID_NDK', '-DAWS_CUSTOM_MEMORY_MANAGEMENT', '-fPIC', '-fexceptions')
        //cppFlags.add(""-I${lib_distribution_root}/boost/include"".toString())
        //cppFlags.add(""-I${file(""src/main/jni/inc"")}"".toString())

        abiFilters.addAll(['armeabi'])//, 'armeabi-v7a', 'x86'])
    }
</code></pre>

<p>And I am confused of what should be done. Please suggest me ways as to how can I resolve this issue. Thanks :))</p>
",3254749,,3254749,,2016-07-08 22:07:41,2016-08-05 22:29:34,Android NDK linker Error:error: undefined reference to std::basic_string,<c++11><android-ndk><android-gradle><build.gradle><ndk-build>,1,0,1,,
Android,48774255,1,48972468,,2018,,2,353,"<p><a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-dagger/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp"" rel=""nofollow noreferrer"">Google Repo Link</a>. All of the boilerplate code is taken from there.</p>

<p>I just can't figure out how to add my own dependencies to this architecture.
I want to do the following things:</p>

<ol>
<li>I need to use one of the presenters in a non-fragment class.</li>
<li>I need to add a network module, which provides a simple OkHttp client.</li>
</ol>

<p>I understand dagger in general, but dagger-android confuses me in many parts..</p>

<p><strong>ToDoApplication:</strong></p>

<pre><code>public class ToDoApplication extends DaggerApplication {
    @Inject
    TasksRepository tasksRepository;

    @Inject
    AsyncTask asyncTask;

    @Override
    protected AndroidInjector&lt;? extends DaggerApplication&gt; applicationInjector() {
        return DaggerAppComponent.builder().application(this).build();
    }
}
</code></pre>

<p><strong>AppComponent:</strong></p>

<pre><code>@Singleton
@Component(modules = {TasksRepositoryModule.class,
        ApplicationModule.class,
        ActivityBindingModule.class,
        AndroidSupportInjectionModule.class})
public interface AppComponent extends AndroidInjector&lt;ToDoApplication&gt; {

    TasksRepository getTasksRepository();
    AsyncTask getAsyncTask();

    @Component.Builder
    interface Builder {

        @BindsInstance
        AppComponent.Builder application(Application application);

        AppComponent build();
    }
}
</code></pre>

<p><strong>ApplicationModule:</strong></p>

<pre><code>@Module
public abstract class ApplicationModule {
    //expose Application as an injectable context
    @Binds
    abstract Context bindContext(Application application);
}
</code></pre>

<p><strong>ActivityBindingModule:</strong></p>

<pre><code>@Module
public abstract class ActivityBindingModule {
    @ActivityScoped
    @ContributesAndroidInjector(modules = TasksModule.class)
    abstract TasksActivity tasksActivity();

    @ActivityScoped
    @ContributesAndroidInjector(modules = AddEditTaskModule.class)
    abstract AddEditTaskActivity addEditTaskActivity();

    @ActivityScoped
    @ContributesAndroidInjector(modules = StatisticsModule.class)
    abstract StatisticsActivity statisticsActivity();

    @ActivityScoped
    @ContributesAndroidInjector(modules = TaskDetailPresenterModule.class)
    abstract TaskDetailActivity taskDetailActivity();
}
</code></pre>

<hr>

<p><strong>ExampleModule:</strong></p>

<pre><code>@Module
public abstract class TasksModule {
    @FragmentScoped
    @ContributesAndroidInjector
    abstract TasksFragment tasksFragment();

    @ActivityScoped
    @Binds abstract TasksContract.Presenter taskPresenter(TasksPresenter presenter);
}
</code></pre>

<p><strong>ExampleActivity:</strong></p>

<pre><code>public class TasksActivity extends DaggerAppCompatActivity {
 @Inject
    TasksPresenter mTasksPresenter;
    @Inject
    Lazy&lt;TasksFragment&gt; taskFragmentProvider;

...
</code></pre>

<p><strong>Example Fragment:</strong></p>

<pre><code>@ActivityScoped
public class TasksFragment extends DaggerFragment implements TasksContract.View {

    @Inject
    TasksContract.Presenter mPresenter;

...
</code></pre>

<p><strong>Example Presenter:</strong></p>

<pre><code>@ActivityScoped
final class TasksPresenter implements TasksContract.Presenter {

    @Inject
    TasksPresenter(TasksRepository tasksRepository) {
        mTasksRepository = tasksRepository;
    }

...
</code></pre>

<hr>

<p>The code above is all correctly working. Now my problem:</p>

<ol>
<li><p>I have an <code>AsyncTask</code>, which needs a presenter to post something in it's <code>onPostExecute</code> method. I injected the presenter, but I get the error that the presenter is not initialized.</p></li>
<li><p>I added the following <code>NetworkModule</code> to the module array in <code>@Component</code> and simply injected it in the <code>AsyncTask</code>, but it's not working (error: ... not initialized). What else would I have to add?</p></li>
</ol>

<p><strong>NetworkModule:</strong></p>

<pre><code>@Module
class NetworkModule {

    @Provides
    @Singleton
    fun provideOkHttp(): OkHttpClient {
        return OkHttpClient()
    }
}
</code></pre>

<p><strong>AsyncTask</strong></p>

<pre><code>private class MyAsyncTask extends AsyncTask&lt;String, Integer, Long&gt; {

     @Inject 
     TasksPresenter presenter;
     @Inject
     OkHttpClient client;

     protected Long doInBackground(String... params) {
         client.doSomething();
         ...
     }


     protected void onPostExecute(Long result) {
         ...
         presenter.doSomething();
     }
 }
</code></pre>

<p>All of my code is correctly working without dagger so you don't have to worry about it. :)</p>

<p>I hope somebody can help me. If you have further questions feel free to ask!</p>
",7295614,,7295614,,2018-02-15 16:22:09,2018-02-25 10:29:15,How to extend the Google android architecture dagger sample?,<java><android><dagger-2><dagger-android>,1,4,1,,
Android,43765499,1,43766165,,2017,,2,645,"<p>Anybody knows how can I handle exceptions coming from native method calls?</p>

<p>I'm running the <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/barcode-reader"" rel=""nofollow noreferrer"">Barcode Reader example from Google Vision API</a>, it works very well reading some 2d - pdf417 codes, but in some cases it crashes with a native exception attempting to use <code>NewStringUTF</code> like this:</p>

<pre><code>    art/runtime/java_vm_ext.cc:410] JNI DETECTED ERROR IN APPLICATION: input is not valid Modified UTF-8: illegal start byte 0x90
    art/runtime/java_vm_ext.cc:410]     in call to NewStringUTF
    art/runtime/java_vm_ext.cc:410]     from com.google.android.gms.vision.barcode.internal.NativeBarcode[] com.google.android.gms.vision.barcode.internal.NativeBarcodeDetector.recognizeNative(int, int, byte[], com.google.android.gms.vision.barcode.internal.NativeOptions)
    art/runtime/java_vm_ext.cc:410] ""Thread-4533"" prio=5 tid=19 Runnable
    art/runtime/java_vm_ext.cc:410]   | group=""main"" sCount=0 dsCount=0 obj=0x12c8e0a0 self=0x7f849f4200
    art/runtime/java_vm_ext.cc:410]   | sysTid=9051 nice=0 cgrp=default sched=0/0 handle=0x7f7b7bf440
    art/runtime/java_vm_ext.cc:410]   | state=R schedstat=( 1663092757 5060164 94 ) utm=165 stm=1 core=2 HZ=100
    art/runtime/java_vm_ext.cc:410]   | stack=0x7f7b6bd000-0x7f7b6bf000 stackSize=1037KB
    art/runtime/java_vm_ext.cc:410]   | held mutexes= ""mutator lock""(shared held)
    art/runtime/java_vm_ext.cc:410]   native: #00 pc 00000000004897a8  /system/lib64/libart.so (_ZN3art15DumpNativeStackERNSt3__113basic_ostreamIcNS0_11char_traitsIcEEEEiP12BacktraceMapPKcPNS_9ArtMethodEPv+200)
    art/runtime/java_vm_ext.cc:410]   native: #01 pc 0000000000458644  /system/lib64/libart.so (_ZNK3art6Thread4DumpERNSt3__113basic_ostreamIcNS1_11char_traitsIcEEEEP12BacktraceMap+224)
    art/runtime/java_vm_ext.cc:410]   native: #02 pc 000000000030c9e4  /system/lib64/libart.so (_ZN3art9JavaVMExt8JniAbortEPKcS2_+1004)
    art/runtime/java_vm_ext.cc:410]   native: #03 pc 000000000030d29c  /system/lib64/libart.so (_ZN3art9JavaVMExt9JniAbortVEPKcS2_St9__va_list+116)
    art/runtime/java_vm_ext.cc:410]   native: #04 pc 0000000000141f9c  /system/lib64/libart.so (_ZN3art11ScopedCheck6AbortFEPKcz+144)
    art/runtime/java_vm_ext.cc:410]   native: #05 pc 000000000014a1d0  /system/lib64/libart.so (_ZN3art11ScopedCheck5CheckERNS_18ScopedObjectAccessEbPKcPNS_12JniValueTypeE.constprop.116+11084)
    art/runtime/java_vm_ext.cc:410]   native: #06 pc 0000000000153418  /system/lib64/libart.so (_ZN3art8CheckJNI12NewStringUTFEP7_JNIEnvPKc+468)
    art/runtime/java_vm_ext.cc:410]   native: #07 pc 0000000000005774  /data/data/com.google.android.gms/files/com.google.android.gms.vision/barcode/libs/arm64-v8a/libbarhopper.so (_ZN9barhopper9JniObject14SetStringFieldEPKcRKNSt3__112basic_stringIcNS3_11char_traitsIcEENS3_9allocatorIcEEEE+168)
    art/runtime/java_vm_ext.cc:410]   native: #08 pc 00000000000036f8  /data/data/com.google.android.gms/files/com.google.android.gms.vision/barcode/libs/arm64-v8a/libbarhopper.so (???)
    art/runtime/java_vm_ext.cc:410]   native: #09 pc 0000000000004c8c  /data/data/com.google.android.gms/files/com.google.android.gms.vision/barcode/libs/arm64-v8a/libbarhopper.so (Java_com_google_android_gms_vision_barcode_internal_NativeBarcodeDetector_recognizeNative+84)
</code></pre>

<p>I would like to handle the crash in order to catch it and give some feedback to the user.</p>
",1623501,,,,,2017-05-03 17:08:10,Google Vision API: Handle native crash,<android><google-play-services><google-vision><android-vision>,1,0,1,,
Android,53193247,1,53341010,,2018,,2,1575,"<p>I am trying to write Android Instrumented test using Espresso. When I run the test I get this error</p>

<blockquote>
  <p>java.lang.IllegalStateException: No instrumentation registered! Must run under a registering instrumentation.</p>
</blockquote>

<p>I can't understand what this error means.</p>

<p>I will briefly explain what I am doing in my test. I followed the <a href=""https://github.com/googlesamples/android-testing"" rel=""nofollow noreferrer"">samples</a> given by google and <a href=""https://github.com/LearnShareKnowledge/EspressoTestingUi"" rel=""nofollow noreferrer"">EspressoTesting Tutorial</a></p>

<pre><code>@SmallTest
@RunWith(AndroidJUnit4.class)
public class ActivityInputTest {

   @Rule
   public ActivityTestRule&lt;ActivityInput&gt; aiRule = new ActivityTestRule&lt;&gt;(ActivityInput.class);


   @Before
   public void setUp(){}
}
</code></pre>

<p>When I run the test the error occurs at annotation <code>@Rule</code>. Can I get some explanation why this happens or what is the issue behind this? I am not interested in working code but more on the actual problem behind the issue.</p>
",1965914,,1043380,,2018-11-08 16:48:19,2018-11-16 15:37:09,Android Instrumentation Testing: No instrumentation registered Error,<java><android><android-studio><android-espresso>,1,0,1,,
Android,54402542,1,,,2019,,2,96,"<p>I have followed Android Architecture Blueprints Dagger2 for dependency injection : <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-dagger"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture/tree/todo-mvp-dagger</a></p>

<p>Now I want to inject Adapter to my Fragment class : </p>

<pre><code>@ActivityScoped
class MainFragment @Inject
constructor(): DaggerFragment() {

    @Inject lateinit var adapter : ArtistAdapter 
}
</code></pre>

<p>And I have following in the module class : </p>

<pre><code>@Module
abstract class MainModule {
    @FragmentScoped
    @ContributesAndroidInjector
    internal abstract fun mainFragment(): MainFragment

    @Module
    companion object {
        @Provides
        @ActivityScoped
        @JvmStatic internal fun provideArtistAdapter() = ArtistAdapter()
    }
}
</code></pre>

<p>But for some reason it fails to display data in RecyclerView. When I don't use injection and simply use <code>val adapter = ArtistAdapter()</code>, it works.</p>

<p>What am I missing in injection using Dagger2?</p>

<p>Addenda :</p>

<p><code>mainFragment</code> is implementing a callback as a click listener:</p>

<pre><code>interface ArtistClickCallback {
    fun onClick(artist: LastFmArtist, poster : ImageView)
}
</code></pre>

<p>And :</p>

<pre><code>class MainFragment : DaggerFragment(), ArtistClickCallback
</code></pre>

<p>And here is fragment module :</p>

<pre><code>@Module
class MainFragmentModule {

    @Provides
    fun provideArtistAdapter(mainFragment: MainFragment) = ArtistAdapter(mainFragment)

}
</code></pre>

<p>But I get following exception when I remove @Inject from Fragment constructor:</p>

<pre><code>error: [Dagger/MissingBinding] com.sample.android.lastfm.ui.main.MainFragment cannot be provided without an @Inject constructor or an @Provides-annotated method. This type supports members injection but cannot be implicitly provided.
public abstract interface AppComponent extends dagger.android.AndroidInjector&lt;com.sample.android.lastfm.LastFmApp&gt; {
                ^
  A binding with matching key exists in component: com.sample.android.lastfm.ui.main.MainModule_MainFragment$app_debug.MainFragmentSubcomponent
      com.sample.android.lastfm.ui.main.MainFragment is injected at
          com.sample.android.lastfm.ui.main.MainActivity.mainFragment
      com.sample.android.lastfm.ui.main.MainActivity is injected at
          dagger.android.AndroidInjector.inject(T) [com.sample.android.lastfm.di.AppComponent  com.sample.android.lastfm.di.ActivityBindingModule_MainActivity$app_debug.MainActivitySubcomponent]
</code></pre>
",1315447,,1315447,,2019-02-20 11:50:59,2019-02-20 11:50:59,Inject Adapter to Fragment using Dagger2,<android><kotlin><recycler-adapter><dagger-2>,1,4,1,,
Android,54489418,1,54490336,,2019,,2,111,"<p>The <a href=""https://github.com/googlesamples/android-sunflower"" rel=""nofollow noreferrer"">sunflower example app by Google</a> uses a private Class with a companion object to implement a Singleton pattern of their repository instead of simply implementing the repository as an (inherently Singleton) Object. </p>

<p>This is the first time I've seen a Singleton implemented this way in Kotlin instead of implementing it as an Object. In what context(s) should this private constructor implementation be used instead of the more common Object implementation?</p>

<pre><code>class GardenPlantingRepository private constructor(
  private val gardenPlantingDao: GardenPlantingDao
) {
  suspend fun createGardenPlanting(plantId: String) {
    withContext(IO) {
      val gardenPlanting = GardenPlanting(plantId)
      gardenPlantingDao.insertGardenPlanting(gardenPlanting)
    }
  }

  suspend fun removeGardenPlanting(gardenPlanting: GardenPlanting) {
    withContext(IO) {
      gardenPlantingDao.deleteGardenPlanting(gardenPlanting)
    }
  }

  fun getGardenPlantingForPlant(plantId: String) =

    gardenPlantingDao.getGardenPlantingForPlant(plantId)

  fun getGardenPlantings() = gardenPlantingDao.getGardenPlantings()

  fun getPlantAndGardenPlantings() = gardenPlantingDao.getPlantAndGardenPlantings()

  companion object {
    // For Singleton instantiation
    @Volatile private var instance: GardenPlantingRepository? = null

    fun getInstance(gardenPlantingDao: GardenPlantingDao) =
      instance ?: synchronized(this) {
        instance ?: GardenPlantingRepository(gardenPlantingDao).also { instance = it }
      }
  }
}
</code></pre>
",490375,,,,,2019-02-02 5:41:44,Kotlin Singletons: Object vs a Class with private constructor,<kotlin><singleton>,1,0,1,,
Android,54608165,1,,,2019,,2,303,"<p>I'm trying to run the barcode-reader example ( <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/barcode-reader"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vision/tree/master/visionSamples/barcode-reader</a> ) as it is on my Nokia 2.1 running Android 8.1.0 and Google Play Services 15.0.90. The camera starts but no barcode is detected and in the logcat I get (continuously while the camera is working) the following error:</p>

<p><code>2019-02-09 18:17:04.990 3364-3497/com.google.android.gms.samples.vision.barcodereader E/BarcodeNativeHandle: Error Loading module com.google.android.gms.dynamite.DynamiteModule$LoadingException: No acceptable module found. Local version is 0 and remote version is 0. at com.google.android.gms.dynamite.DynamiteModule.load(Unknown Source:8) at com.google.android.gms.internal.vision.zzl.zzp(Unknown Source:39) at com.google.android.gms.internal.vision.zzl.isOperational(Unknown Source:0) at com.google.android.gms.vision.barcode.BarcodeDetector.isOperational(Unknown Source:2) at com.google.android.gms.vision.Detector.receiveFrame(Unknown Source:16) at com.google.android.gms.samples.vision.barcodereader.ui.camera.CameraSource$FrameProcessingRunnable.run(CameraSource.java:1205) at java.lang.Thread.run(Thread.java:764)</code></p>

<p>What can I do to be able to run it?</p>

<p>Thanks!</p>
",618437,,484073,,2019-03-01 6:53:43,2019-03-01 6:54:11,Barcode scanning is not working with vision API,<android><barcode-scanner><android-vision><firebase-mlkit>,1,1,1,,
Android,48039177,1,48132487,,2017,,2,599,"<p>I am developing an android app with BLE API from android. My app needs to connect to a BLE device, and remain connected as long as it is in range and turned on. I need to read data from it, and write data to it. </p>

<p>I am trying to follow the MVP architecture pattern, not strictly since activities are the starting point. But anyway, I wanted to know where should I put the interaction with Bluetooth? I am searching for answers for the following questions. I have searched StackOverflow, but couldn't find what I was looking for.</p>

<ol>
<li>Should it be in a service bounded to the UI just like in <a href=""https://github.com/googlesamples/android-BluetoothLeGatt"" rel=""nofollow noreferrer"">googlesample ble app</a> ? But, I think that would break the whole mvp architecture.   </li>
<li>Should it be a bounded service at all ? If no, what would be the best way to implement the service? In my mind, if it's not bounded to the view, and there is a callback from the background service to display something on the UI, there is a possibility of undefined behavior.</li>
<li>Who should initiate the Bluetooth interaction ? The application class or some activity ?</li>
</ol>

<p>I am looking for mainly architectural guidance, and best way to go about developing this app.  </p>
",2736367,,,user9048861,2017-12-31 1:19:37,2018-01-06 22:20:16,Android app architecture with BLE,<android><architecture><bluetooth-lowenergy>,1,5,,,
Android,41623247,1,,,2017,,2,3377,"<p>I'm trying to implement things from this example - <a href=""https://github.com/googlesamples/android-testing/tree/master/ui/espresso/BasicSample"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-testing/tree/master/ui/espresso/BasicSample</a> - into my app.</p>

<p>When I try to execute the simple Espresso test, this happens:</p>

<blockquote>
  <p>""/Applications/Android Studio 2.2.3.app/Contents/jre/jdk/Contents/Home/bin/java"" (...)</p>
  
  <p>Process finished with exit code 1
  Class not found: ""com.faces_shop.app.MainActivityTest""Empty test suite.</p>
</blockquote>

<p>(copy-pasted from Android Studio)</p>

<p>The test:</p>

<pre><code>package com.faces_shop.app;

import android.support.test.filters.LargeTest;
import android.support.test.rule.ActivityTestRule;
import android.support.test.runner.AndroidJUnit4;

import org.junit.Rule;
import org.junit.Test;
import org.junit.runner.RunWith;

import static android.support.test.espresso.Espresso.onView;
import static android.support.test.espresso.action.ViewActions.closeSoftKeyboard;
import static android.support.test.espresso.action.ViewActions.typeText;
import static android.support.test.espresso.assertion.ViewAssertions.matches;
import static android.support.test.espresso.matcher.ViewMatchers.withId;
import static android.support.test.espresso.matcher.ViewMatchers.withText;

/**
 * Created by AnonymizedForReview on 2017-01-12.
 */
@RunWith(AndroidJUnit4.class)
@LargeTest
public class MainActivityTest {

    public static final String STRING_TO_BE_TYPED = ""Espresso"";

    @Rule
    public ActivityTestRule&lt;MainActivity&gt; mActivityRule = new ActivityTestRule&lt;&gt;(
            MainActivity.class);

    @Test
    public void changeText_sameActivity() {
        // Type text and then press the button.
        onView(withId(R.id.editFilter))
                .perform(typeText(STRING_TO_BE_TYPED), closeSoftKeyboard());
//        onView(withId(R.id.changeTextBt)).perform(click());

        // Check that the text was changed.
        onView(withId(R.id.editFilter)).check(matches(withText(STRING_TO_BE_TYPED)));
    }


}
</code></pre>

<p>The app's build.gradle:</p>

<pre><code>apply plugin: 'com.android.application'

android {
//    productFlavors {
//        /* https://android-developers.googleblog.com/2015/12/leveraging-product-flavors-in-android.html */
//        mock {
//            applicationIdSuffix = "".mock""
//        }
//        prod
//    }
    compileSdkVersion 25
    buildToolsVersion ""25.0.0""
    defaultConfig {
        applicationId ""com.faces_shop.app""
        minSdkVersion 16
        targetSdkVersion 25
        versionCode 1
        versionName ""1.0""
        testInstrumentationRunner ""android.support.test.runner.AndroidJUnitRunner""
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
}

dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    compile project(':FacesApi')

//    androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2', {
//        exclude group: 'com.android.support', module: 'support-annotations'
//    })
    // Testing-only dependencies
    // Force usage of support annotations in the test app, since it is internally used by the runner module.
    androidTestCompile 'com.android.support:support-annotations:' + rootProject.supportLibVersion;
    androidTestCompile 'com.android.support.test:runner:' + rootProject.runnerVersion;
    androidTestCompile 'com.android.support.test:rules:' + rootProject.rulesVersion;
    androidTestCompile 'com.android.support.test.espresso:espresso-core:' + rootProject.espressoVersion;

    compile 'com.android.support:appcompat-v7:25.0.1'
    compile 'com.android.support:recyclerview-v7:25.0.1'
    testCompile 'junit:junit:4.12'
}
</code></pre>

<p>The top-level build.gradle:</p>

<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.

buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:2.2.3'

        // NOTE: Do not place your application dependencies here; they belong
        // in the individual module build.gradle files
    }
}

allprojects {
    repositories {
        jcenter()
    }
}

ext {
    buildToolsVersion = ""24.0.1""
    supportLibVersion = ""25.0.1""
    runnerVersion = ""0.5""
    rulesVersion = ""0.5""
    espressoVersion = ""2.2.2""
}
</code></pre>

<p><strong>What am I doing wrong?</strong></p>

<p><strong>Why is the test class not seen?</strong></p>

<p>It is in this path in androidTest : .../Examples/DynamicList/FacesApp/src/androidTest/java/com/faces_shop/app/MainActivityTest.java</p>
",170451,,170451,,2017-01-12 21:29:10,2018-06-28 11:11:01,Android Espresso test: Class not found: ...Empty test suite,<android><android-studio><gradle><android-gradle><android-espresso>,1,1,,,
Android,41627671,1,43554730,,2017,,2,701,"<p>I am using <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">camera2Basic example</a> and I fixed exposure time, iso, white balance and etc. </p>

<pre><code>mPreviewBuilder.set(CaptureRequest.CONTROL_AF_MODE,CaptureRequest.CONTROL_AF_MODE_CONTINUOUS_PICTURE);

//mPreviewBuilder.set(CaptureRequest.LENS_FOCUS_DISTANCE, DEFAULT_FOCUS_DISTANCE);

mPreviewBuilder.set(CaptureRequest.CONTROL_AE_MODE, CameraMetadata.CONTROL_AE_MODE_OFF);

mPreviewBuilder.set(CaptureRequest.NOISE_REDUCTION_MODE, CameraMetadata.NOISE_REDUCTION_MODE_FAST);
mPreviewBuilder.set(CaptureRequest.EDGE_MODE, CameraMetadata.EDGE_MODE_FAST);
mPreviewBuilder.set(CaptureRequest.CONTROL_AE_PRECAPTURE_TRIGGER, CaptureRequest.CONTROL_AE_PRECAPTURE_TRIGGER_CANCEL);

mPreviewBuilder.set(CaptureRequest.CONTROL_AWB_MODE, wbMode);
mPreviewBuilder.set(CaptureRequest.CONTROL_AWB_LOCK, wbLock);

mPreviewBuilder.set(CaptureRequest.SENSOR_SENSITIVITY, isoValue);
mPreviewBuilder.set(CaptureRequest.SENSOR_EXPOSURE_TIME, exposureValue);
</code></pre>

<p>I am taking several <code>photos</code> by rotating my phone for stitching.
While taking photos the <code>preview looks</code> fine, but captured results are totally different in terms of brightness</p>

<p>When I checked the images exif data, they have same exposure time and iso (not on Nexus)</p>

<p>I don't know what I am missing.
Any suggestion why it is happening? Thank you</p>
",5344661,,5344661,,2017-01-13 5:45:50,2017-04-22 2:56:34,Camera2 api preview is not same with capture,<android><android-camera2>,1,2,,,
Android,46601474,1,,,2017,,2,429,"<p>I tried to follow the example of the google(<a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/di/ViewModelModule.java"" rel=""nofollow noreferrer"">ViewModelModule</a>). And I saw it can bind to different ViewModel type to the generic one.</p>

<pre><code>@Module
abstract class ViewModelModule {
    @Binds
    @IntoMap
    @ViewModelKey(UserViewModel.class)
    abstract ViewModel bindUserViewModel(UserViewModel userViewModel);

    @Binds
    @IntoMap
    @ViewModelKey(SearchViewModel.class)
    abstract ViewModel bindSearchViewModel(SearchViewModel searchViewModel);

    @Binds
    @IntoMap
    @ViewModelKey(RepoViewModel.class)
    abstract ViewModel bindRepoViewModel(RepoViewModel repoViewModel);

    @Binds
    abstract ViewModelProvider.Factory bindViewModelFactory(GithubViewModelFactory factory);
}
</code></pre>

<p>What I want to do is to bind multi ViewModelProvider.Factory to the generic one.</p>

<pre><code>@Module
abstract class ViewModelModule {


  @Binds
  @IntoMap
  @ViewModelFactoryKey(FeedEntryListViewModelFactory.class)
  abstract ViewModelProvider.Factory bindViewModelFactory(FeedEntryListViewModelFactory factory);

}
</code></pre>

<p>ViewModelFactoryKey.java</p>

<pre><code>@Documented
@Target({ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
@MapKey
@interface ViewModelFactoryKey {
  Class&lt;? extends ViewModelProvider.Factory &gt; value();
}
</code></pre>

<p>FeedActivity.java</p>

<pre><code>public class FeedActivity extends DaggerAppCompatActivity {


  @Inject
  ViewModelProvider.Factory viewModelFactory;

  FeedEntryListViewModel viewModel;


  @SuppressLint(""StaticFieldLeak"")
  @Override
  protected void onCreate(Bundle savedInstanceState) {
    ...
  }
}
</code></pre>

<p>However, it throws the following error.</p>

<pre><code>Error:(21, 8) error: [dagger.android.AndroidInjector.inject(T)] android.arch.lifecycle.ViewModelProvider.Factory cannot be provided without an @Provides- or @Produces-annotated method.
android.arch.lifecycle.ViewModelProvider.Factory is injected at
com.cn29.aac.ui.feedentry.FeedActivity.viewModelFactory
com.cn29.aac.ui.feedentry.FeedActivity is injected at
dagger.android.AndroidInjector.inject(arg0)
</code></pre>

<p>I am new to Dagger2. If it is not used properly, please feel free to comment. Thank you.</p>
",2877822,,1083957,,2017-10-06 10:36:41,2017-10-06 10:36:41,How to bind into map with multi ViewModelFactory using Dagger2,<java><android><dagger-2><dagger.android><android-architecture-components>,1,2,,,
Android,41652621,1,41653733,,2017,,2,753,"<p>I took the android native activity sample from Android Studio and replaced the app glue implementation by my own implementation of native activity.</p>

<p>So here is my Cmake file which almost the same as in the sample:</p>

<pre><code>cmake_minimum_required(VERSION 3.4.1)

#my implementation
add_library(android-impl STATIC
            C:/android_libs/native-impl/Activity.cpp
            )

# now build app's shared lib
set(CMAKE_CXX_FLAGS ""${CMAKE_CXX_FLAGS} -std=gnu++11"")

add_library(my-app SHARED
            main.cpp
            )

#add include directories

target_include_directories(my-app PRIVATE
                           C:/android_libs/native-impl/)

# add lib dependencies
target_link_libraries(my-app
                      android
                      android-impl
                      EGL
                      GLESv1_CM
                      log)
</code></pre>

<p>And I also specified in the Android manifest file the name of my shared lib like this:</p>

<pre><code>    &lt;!-- Tell NativeActivity the name of our .so --&gt;
    &lt;meta-data android:name=""android.app.lib_name""
        android:value=""my-app"" /&gt;
</code></pre>

<p>It all compiles, but when I run on my device it instantly throws an error:</p>

<pre><code>Caused by: java.lang.IllegalArgumentException: Unable to load native library: /data/app/com.nativetest.myapp-1/lib/arm/libmy-app.so

java.lang.RuntimeException: Unable to start activity ComponentInfo{com.nativetest.myapp/android.app.NativeActivity}: java.lang.IllegalArgumentException: Unable to load native library: /data/app/com.nativetest.myapp-2/lib/arm/libmy-app.so
</code></pre>

<p>I don't understand because I have copied the same Cmake file from the sample provided for native activity and just replaced app glue with my implementation, and used different name for my shared library.</p>

<p>Here are the files from the sample that I used:
<a href=""https://github.com/googlesamples/android-ndk/blob/master/native-activity/app/src/main/cpp/CMakeLists.txt"" rel=""nofollow noreferrer"">Cmakelist.txt</a>
<a href=""https://github.com/googlesamples/android-ndk/blob/master/native-activity/app/src/main/AndroidManifest.xml"" rel=""nofollow noreferrer"">AndroidManifest.xml</a></p>

<p>Is there something else that I need to modify ?</p>
",3134405,,3134405,,2017-01-14 17:34:19,2017-01-14 18:54:08,Trouble building shared lib with CMake using Android NDK,<android><android-studio><android-ndk><cmake>,1,6,,,
Android,33907279,1,33907417,,2015,,2,1067,"<p>When I run the quick-start sample from: <a href=""https://github.com/googlesamples/android-credentials/"" rel=""nofollow"">https://github.com/googlesamples/android-credentials/</a></p>

<p>On a Nexus 6 running Marshmallow, the credentials are saved successfully.</p>

<p>However, on a Samsung Note 5 with Lollipop (5.1.1) I get:</p>

<pre><code>11-25 14:45:27.581 11428-11428/com.google.example.credentialsbasic D/MainActivity: Save Failed:Status{statusCode=No eligible accounts on this device for the credentials API., resolution=null}
</code></pre>

<p>According to Google Smart Lock for Password is on by default, and I cannot find the setting for it in Samsung settings. Does this mean that Samsung phones don't support Smart Lock for Passwords? Is this a feature that will really only work on Nexuses?</p>

<p>I cannot find any documentation on this in terms of device support or the error message I provided.</p>
",1481500,,5001016,,2016-01-16 22:47:47,2016-01-16 22:47:47,"Smart Lock for Passwords not working on certain phones, error message ""No eligible accounts on this device""",<android><google-play-services><google-smartlockpasswords>,1,0,,,
Android,37908660,1,,,2016,,2,1691,"<p>I have a similar question to <a href=""https://stackoverflow.com/questions/32654087/how-turn-on-flashlight-using-barcode-detection-in-google-play-services"">this question</a> and <a href=""https://stackoverflow.com/questions/35811411/accessing-autofocus-flash-with-google-vision-barcode-reader"">this question</a>, neither of which have an accepted solution.</p>

<p>I'm basically using the Google Vision barcode API but there appears no obvious way to control the flashlight.</p>

<p><a href=""https://stackoverflow.com/a/32659445/1617737"">This answer</a> suggests using <a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java"" rel=""nofollow noreferrer"">this code</a>, but (having tried and failed) I'm not sure how to integrate it into my app.</p>

<p>Here is the code for my activity, which basically starts the camera/barcode scanner and also uses a menu item from my <code>BaseActivity</code> which I want to use to be able to toggle the flashlight:</p>

<pre><code>import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.util.SparseArray;
import android.view.Menu;
import android.view.MenuItem;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import com.google.android.gms.common.api.CommonStatusCodes;
import com.google.android.gms.vision.Detector;
import com.google.android.gms.vision.barcode.Barcode;
import com.google.android.gms.vision.barcode.BarcodeDetector;
import java.io.IOException;

public class ScanQRCodeAutoActivity extends BaseActivity {

    private static final String LOG_TAG = ScanQRCodeAutoActivity.class.getSimpleName();

    private static final int CAMERA_SOURCE_PREVIEW_WIDTH = -1;
    private static final int CAMERA_SOURCE_PREVIEW_HEIGHT = 480;
    public static final String QR_CODE_VALUE = ""QR_CODE_VALUE"";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_scan_qr_code_auto);

        super.initFlash(savedInstanceState);

        final SurfaceView cameraSurfaceView = (SurfaceView)findViewById(R.id.cameraSurfaceView);

        BarcodeDetector.Builder barcodeDetectorBuilder = new BarcodeDetector.Builder(this);
        barcodeDetectorBuilder.setBarcodeFormats(Barcode.QR_CODE);
        BarcodeDetector barcodeDetector = barcodeDetectorBuilder.build();
        barcodeDetector.setProcessor(new Detector.Processor&lt;Barcode&gt;() {
            @Override
            public void release() {
            }

            @Override
            public void receiveDetections(Detector.Detections&lt;Barcode&gt; detections) {

                final SparseArray&lt;Barcode&gt; barcodes = detections.getDetectedItems();

                if (barcodes.size() != 0) {

                    Intent data = new Intent();
                    data.putExtra(QR_CODE_VALUE, barcodes.valueAt(0).displayValue);
                    setResult(CommonStatusCodes.SUCCESS, data);
                    finish();

                }

            }
        });

        CameraSource.Builder cameraSourceBuilder = new CameraSource.Builder(this, barcodeDetector);
        //cameraSourceBuilder.setAutoFocusEnabled(true);
        //cameraSourceBuilder.setFacing(CameraSource.CAMERA_FACING_BACK);
        if (CAMERA_SOURCE_PREVIEW_WIDTH != -1 &amp;&amp; CAMERA_SOURCE_PREVIEW_HEIGHT != -1) {
            cameraSourceBuilder.setRequestedPreviewSize(CAMERA_SOURCE_PREVIEW_WIDTH, CAMERA_SOURCE_PREVIEW_HEIGHT);
        }

        final CameraSource cameraSource = cameraSourceBuilder.build();

        cameraSurfaceView.getHolder().addCallback(new SurfaceHolder.Callback() {
            @Override
            public void surfaceCreated(SurfaceHolder holder) {

                try {
                    cameraSource.start(cameraSurfaceView.getHolder());

                }
                catch (SecurityException se) {
                    Log.e(LOG_TAG, ""Could not start camera source."", se);
                }
                catch (IOException ioe) {
                    Log.e(LOG_TAG, ""Couldn't start camera source."", ioe);
                }

            }

            @Override
            public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
            }

            @Override
            public void surfaceDestroyed(SurfaceHolder holder) {

                cameraSource.stop();

            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);

        MenuItem flashItem = menu.findItem(R.id.action_flash);
        flashItem.setVisible(true);

        return true;
    }

    @Override
    protected void toggleFlash() {

        super.toggleFlash();

        // HELP!!

        invalidateOptionsMenu();
        if (isFlashOn()) {
            Utilities.makeToast(this, ""Flash turned on"");
        }
        else {
            Utilities.makeToast(this, ""Flash turned off"");
        }

    }
}
</code></pre>
",1617737,,-1,,2017-05-23 12:08:43,2016-12-01 11:05:51,How to use flashlight/torch with Google Vision barcode reader API?,<android><google-play-services><barcode-scanner><flashlight><google-vision>,1,3,,,
Android,43532713,1,,,2017,,2,133,"<p>I'm trying to run <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker"" rel=""nofollow noreferrer"">Google Vision FaceTracker</a> but I have an error on one line of code in <code>CameraSourcePreview</code>. </p>

<p><strong>This is the error</strong> - 
Call requires permission which may be rejected by user: code should explicitly check to see if permission is available (with <code>checkPermission</code>) or explicitly handle a potential <code>SecurityException</code></p>

<p>And this is the function-</p>

<pre><code>private void startIfReady() throws IOException {
    if (mStartRequested &amp;&amp; mSurfaceAvailable) {

        mCameraSource.start(mSurfaceView.getHolder()); //Error

        //...other code

        mStartRequested = false;
    }
}
</code></pre>
",7868376,,,,,2017-04-21 10:30:57,Google's VisionAPI example FaceTracker Camera permission,<android><android-camera><google-vision>,1,6,,,
Android,54878343,1,54884316,,2019,,2,246,"<p>I have a use case where I want to create Youtube like animation using MotionLayout. There is a sample for this animation in <a href=""https://github.com/googlesamples/android-ConstraintLayoutExamples/tree/master/motionlayout"" rel=""nofollow noreferrer"">this</a> repo.
But the problem is that in this example they use static height for starting constraint like this which is <code>320dp</code>:</p>

<pre><code>&lt;MotionScene...&gt;

    &lt;Transition..&gt;

        &lt;OnSwipe... /&gt;

        &lt;ConstraintSet android:id=""@id/start""&gt;

            &lt;Constraint
                android:id=""@id/top_image_container""
                android:layout_width=""0dp""
                android:layout_height=""320dp""
                motion:layout_constraintTop_toTopOf=""parent""
                motion:layout_constraintStart_toStartOf=""parent""
                motion:layout_constraintEnd_toEndOf=""parent""  /&gt;

      &lt;/ConstraintSet&gt;
  &lt;/Transition&gt;
&lt;/MotionScene&gt;
</code></pre>

<p>But my requirement to set constraint using aspect ratio. For static aspect ratio, I can set using <code>app:layout_constraintDimensionRatio=""w,16:9""</code> in Constraint like this.</p>

<pre><code>&lt;Constraint
    android:id=""@id/top_image_container""
    android:layout_width=""0dp""
    android:layout_height=""0dp""
    motion:layout_constraintTop_toTopOf=""w,16:9""
    motion:layout_constraintTop_toTopOf=""parent""
    motion:layout_constraintStart_toStartOf=""parent""
    motion:layout_constraintEnd_toEndOf=""parent""  /&gt;
</code></pre>

<p>But every video has a different aspect ratio which I am getting from API.So I want to set different aspect ratio depending upon the video. I am not able to find a way to set this programmatically in the <code>ConstraintSet</code></p>

<p>I tried a workaround to set <code>android:layout_height=""wrap_content""</code> and change the view aspect ratio programmatically. But it did not work and the animation was not working properly.</p>

<p>Any solution or suggestion would be appreciated.</p>
",5301119,,6296561,,2019-02-26 5:48:56,2019-02-26 11:17:41,Programmatically change ConstraintSet attribute in motion scene of MotionLayout,<android><android-layout><android-constraintlayout><android-motionlayout>,1,0,,,
Android,45203918,1,47489640,,2017,,2,659,"<p>I'm new to Android NDK, and I was reading <a href=""https://developer.android.com/training/articles/perf-jni.html#native_libraries"" rel=""nofollow noreferrer"">these tips</a> on the Android Developer site. It recommends using <code>JNI_OnLoad</code> to register your native methods, but doesn't give much detail on how to do that. </p>

<p>Searching <a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow noreferrer"">Google's NDK sample repo on GitHub</a> only turned up one usage of <code>JNI_OnLoad</code>, and it doesn't call <code>RegisterNatives</code>. Searching the web didn't turn up much on how to do this either. </p>

<p>I feel like I'm missing something. This is supposed to be the correct way to do it, according to Google, but their own examples use the ""discovery"" method naming approach instead. </p>

<p>Is this perhaps an old way of doing it, that's not really done anymore?</p>
",1475706,,1475706,,2017-11-28 17:02:36,2017-12-19 23:51:01,Is JNI_OnLoad normally used for Android NDK?,<android><android-ndk><java-native-interface>,1,0,,,
Android,35699359,1,,,2016,,2,337,"<p>I am testing Nearby Messages API using the Google NearbyBackgroundBeacons sample,</p>

<p><a href=""https://github.com/googlesamples/android-"" rel=""nofollow"">https://github.com/googlesamples/android-</a>
nearby/tree/master/messages/NearbyBackgroundBeacons</p>

<p>As documented in the README, i created an API key and placed the same in AndroidManifest.xml. My Estimote Beacon is configured for EddyStone-UID. It is registered using Google Proximity API and status is ACTIVE.</p>

<p>When i run the NearbyBackgroundBeacons demo on Samsung Galaxy S4, API 19, Android 4.4.4, play services 8.4.89, i see this following error </p>

<blockquote>
  <p>02-29 07:08:55.363
  18073-18073/com.google.android.gms.nearby.messages.samples.nearbybackgroundbeacons
  E/MainActivityFragment: Could not resolve error. Status:
  Status{statusCode=unknown status code: 2801, resolution=null}</p>
</blockquote>

<p>when calling </p>

<pre><code>Nearby.Messages.subscribe(GoogleApiClient, PendingIntent, SubscribeOptions)
</code></pre>
",77887,,,,,2016-06-29 9:32:32,NearbyBackgroundBeacons demo returns unknown status code 2801 on subscribe,<android><google-api><google-play-services><bluetooth-lowenergy><google-nearby>,1,3,,,
Android,55237055,1,55246405,,2019,,2,65,"<p>I am following <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample"" rel=""nofollow noreferrer"">GithubBrowserSample</a>. The only change I have made is not to use <code>NavHostFragment</code>. I am adding fragment at runtime but the code is not compiling and there is no such helpful error log</p>

<p><strong>Application</strong></p>

<pre><code>open class SCApp : Application(), HasActivityInjector, HasServiceInjector {

    @Inject
    protected lateinit var dispatchingAndroidInjector: DispatchingAndroidInjector&lt;Activity&gt;

    @Inject
    protected lateinit var dispatchingServiceInjector: DispatchingAndroidInjector&lt;Service&gt;

    override fun onCreate() {
        super.onCreate()

        AppInjector.init(this)
    }

    override fun activityInjector() = dispatchingAndroidInjector

    override fun serviceInjector() = dispatchingServiceInjector
}
</code></pre>

<p><strong>Activity</strong></p>

<pre><code>class IncomingLeadActivity : AppCompatActivity(), HasSupportFragmentInjector {

    lateinit var binding: ActivityIncomingLeadBinding

    private lateinit var incomingLeadViewModel: IncomingLeadViewModel

    @Inject
    lateinit var viewModelFactory: ViewModelProvider.Factory

    @Inject
    lateinit var dispatchingAndroidInjector: DispatchingAndroidInjector&lt;Fragment&gt;

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)

        binding = DataBindingUtil.setContentView(this, R.layout.activity_incoming_lead)
        incomingLeadViewModel = ViewModelProviders.of(this, viewModelFactory).get(IncomingLeadViewModel::class.java)

        binding.viewModel = incomingLeadViewModel
        binding.setLifecycleOwner(this)

        supportFragmentManager
            .beginTransaction()
            .replace(android.R.id.content, LeadReceiverFragment.newInstance(), """")
            .commit()
    }

    override fun supportFragmentInjector() = dispatchingAndroidInjector
}
</code></pre>

<p><strong>Fragment</strong></p>

<pre><code>class LeadReceiverFragment : Fragment(), Injectable {

    lateinit var binding: LeadReceiverFragmentBinding

    @Inject
    lateinit var viewModelFactory: ViewModelProvider.Factory

    private lateinit var leadReceiverViewModel: LeadReceiverViewModel

    companion object {
        fun newInstance() = LeadReceiverFragment()
    }

    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {
        binding = DataBindingUtil.inflate(
            inflater,
            R.layout.lead_receiver_fragment,
            container,
            false
        )
        return binding.root
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        leadReceiverViewModel = ViewModelProviders.of(this, viewModelFactory).get(LeadReceiverViewModel::class.java)
        binding.setLifecycleOwner(viewLifecycleOwner)

        binding.viewModel = leadReceiverViewModel
    }
}
</code></pre>

<p><strong>Error</strong></p>

<pre><code>* Exception is:
org.gradle.api.tasks.TaskExecutionException: Execution failed for task ':app:kaptDebugKotlin'.
        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:110)
        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:77)
        at org.gradle.api.internal.tasks.execution.OutputDirectoryCreatingTaskExecuter.execute(OutputDirectoryCreatingTaskExecuter.java:51)
        at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:59)
        at org.gradle.api.internal.tasks.execution.ResolveTaskOutputCachingStateExecuter.execute(ResolveTaskOutputCachingStateExecuter.java:54)
        at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:59)
        at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:101)
        at org.gradle.api.internal.tasks.execution.FinalizeInputFilePropertiesTaskExecuter.execute(FinalizeInputFilePropertiesTaskExecuter.java:44)
        at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:91)
        at org.gradle.api.internal.tasks.execution.ResolveTaskArtifactStateTaskExecuter.execute(ResolveTaskArtifactStateTaskExecuter.java:62)
        at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:59)
        at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:54)
        at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)
        at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:34)
        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.run(EventFiringTaskExecuter.java:51)
        at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:300)
        at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:292)
        at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:174)
        at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)
        at org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)
        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:46)
        at org.gradle.execution.taskgraph.LocalTaskInfoExecutor.execute(LocalTaskInfoExecutor.java:42)
        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareWorkItemExecutor.execute(DefaultTaskExecutionGraph.java:277)
        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareWorkItemExecutor.execute(DefaultTaskExecutionGraph.java:262)
        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker$1.execute(DefaultTaskPlanExecutor.java:135)
        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker$1.execute(DefaultTaskPlanExecutor.java:130)
        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker.execute(DefaultTaskPlanExecutor.java:200)
        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker.executeWithWork(DefaultTaskPlanExecutor.java:191)
        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker.run(DefaultTaskPlanExecutor.java:130)
        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)
        at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
Caused by: org.gradle.api.GradleException: Internal compiler error. See log for more details
        at org.jetbrains.kotlin.gradle.tasks.TasksUtilsKt.throwGradleExceptionIfError(tasksUtils.kt:15)
        at org.jetbrains.kotlin.compilerRunner.GradleKotlinCompilerWork.run(GradleKotlinCompilerWork.kt:135)
        at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.runCompilerAsync(GradleKotlinCompilerRunner.kt:152)
        at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.runCompilerAsync(GradleKotlinCompilerRunner.kt:147)
        at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.runJvmCompilerAsync(GradleKotlinCompilerRunner.kt:87)
        at org.jetbrains.kotlin.gradle.internal.KaptWithKotlincTask.compile(KaptWithKotlincTask.kt:72)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:73)
        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.doExecute(StandardTaskAction.java:46)
        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:39)
        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:26)
        at org.gradle.api.internal.AbstractTask$TaskActionWrapper.execute(AbstractTask.java:801)
        at org.gradle.api.internal.AbstractTask$TaskActionWrapper.execute(AbstractTask.java:768)
        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$1.run(ExecuteActionsTaskExecuter.java:131)
        at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:300)
        at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:292)
        at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:174)
        at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)
        at org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)
        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:120)
        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:99)
        ... 31 more
</code></pre>

<p><strong>Detailed Log</strong></p>

<pre><code>            ^
e: java.lang.IllegalStateException: failed to analyze: java.lang.reflect.InvocationTargetException
        at org.jetbrains.kotlin.analyzer.AnalysisResult.throwIfError(AnalysisResult.kt:56)
        at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModules$cli(KotlinToJVMBytecodeCompiler.kt:128)
        at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:159)
        at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:57)
        at org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.java:96)
        at org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.java:52)
        at org.jetbrains.kotlin.cli.common.CLITool.exec(CLITool.kt:93)
        at org.jetbrains.kotlin.daemon.CompileServiceImpl$compile$1$1$2.invoke(CompileServiceImpl.kt:442)
        at org.jetbrains.kotlin.daemon.CompileServiceImpl$compile$1$1$2.invoke(CompileServiceImpl.kt:102)
        at org.jetbrains.kotlin.daemon.CompileServiceImpl$doCompile$$inlined$ifAlive$lambda$2.invoke(CompileServiceImpl.kt:1013)
        at org.jetbrains.kotlin.daemon.CompileServiceImpl$doCompile$$inlined$ifAlive$lambda$2.invoke(CompileServiceImpl.kt:102)
        at org.jetbrains.kotlin.daemon.common.DummyProfiler.withMeasure(PerfUtils.kt:137)
        at org.jetbrains.kotlin.daemon.CompileServiceImpl.checkedCompile(CompileServiceImpl.kt:1055)
        at org.jetbrains.kotlin.daemon.CompileServiceImpl.doCompile(CompileServiceImpl.kt:1012)
        at org.jetbrains.kotlin.daemon.CompileServiceImpl.compile(CompileServiceImpl.kt:441)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:564)
        at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:359)
        at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
        at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
        at java.base/java.security.AccessController.doPrivileged(Native Method)
        at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
        at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:562)
        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:796)
        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:677)
        at java.base/java.security.AccessController.doPrivileged(Native Method)
        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:676)
        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1135)
        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
        at java.base/java.lang.Thread.run(Thread.java:844)
Caused by: java.lang.reflect.InvocationTargetException
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:564)
        at org.jetbrains.kotlin.kapt3.base.AnnotationProcessingKt.doAnnotationProcessing(annotationProcessing.kt:55)
        at org.jetbrains.kotlin.kapt3.base.AnnotationProcessingKt.doAnnotationProcessing$default(annotationProcessing.kt:31)
        at org.jetbrains.kotlin.kapt3.AbstractKapt3Extension.runAnnotationProcessing(Kapt3Extension.kt:223)
        at org.jetbrains.kotlin.kapt3.AbstractKapt3Extension.analysisCompleted(Kapt3Extension.kt:187)
        at org.jetbrains.kotlin.kapt3.ClasspathBasedKapt3Extension.analysisCompleted(Kapt3Extension.kt:98)
        at org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM$analyzeFilesWithJavaIntegration$2.invoke(TopDownAnalyzerFacadeForJVM.kt:96)
        at org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration(TopDownAnalyzerFacadeForJVM.kt:106)
        at org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration$default(TopDownAnalyzerFacadeForJVM.kt:82)
        at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler$analyze$1.invoke(KotlinToJVMBytecodeCompiler.kt:384)
        at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler$analyze$1.invoke(KotlinToJVMBytecodeCompiler.kt:70)
        at org.jetbrains.kotlin.cli.common.messages.AnalyzerWithCompilerReport.analyzeAndReport(AnalyzerWithCompilerReport.kt:107)
        at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.analyze(KotlinToJVMBytecodeCompiler.kt:375)
        at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModules$cli(KotlinToJVMBytecodeCompiler.kt:123)
        ... 30 more
Caused by: com.sun.tools.javac.processing.AnnotationProcessingError: java.lang.ExceptionInInitializerError
        at jdk.compiler/com.sun.tools.javac.processing.JavacProcessingEnvironment.callProcessor(JavacProcessingEnvironment.java:976)
        at jdk.compiler/com.sun.tools.javac.processing.JavacProcessingEnvironment.discoverAndRunProcs(JavacProcessingEnvironment.java:881)
        at jdk.compiler/com.sun.tools.javac.processing.JavacProcessingEnvironment.access$2100(JavacProcessingEnvironment.java:110)
        at jdk.compiler/com.sun.tools.javac.processing.JavacProcessingEnvironment$Round.run(JavacProcessingEnvironment.java:1202)
        at jdk.compiler/com.sun.tools.javac.processing.JavacProcessingEnvironment.doProcessing(JavacProcessingEnvironment.java:1311)
        at jdk.compiler/com.sun.tools.javac.main.JavaCompiler.processAnnotations(JavaCompiler.java:1250)
        at jdk.compiler/com.sun.tools.javac.main.JavaCompiler.processAnnotations(JavaCompiler.java:1149)
        ... 47 more
Caused by: java.lang.ExceptionInInitializerError
        at android.databinding.annotationprocessor.ProcessExpressions$IntermediateV2.appendTo(ProcessExpressions.java:326)
        at android.databinding.annotationprocessor.ProcessExpressions.onHandleStep(ProcessExpressions.java:117)
        at android.databinding.annotationprocessor.ProcessDataBinding$ProcessingStep.runStep(ProcessDataBinding.java:212)
        at android.databinding.annotationprocessor.ProcessDataBinding$ProcessingStep.access$000(ProcessDataBinding.java:197)
        at android.databinding.annotationprocessor.ProcessDataBinding.doProcess(ProcessDataBinding.java:98)
        at android.databinding.annotationprocessor.ProcessDataBinding.process(ProcessDataBinding.java:73)
        at org.jetbrains.kotlin.kapt3.base.ProcessorWrapper.process(annotationProcessing.kt:106)
        at jdk.compiler/com.sun.tools.javac.processing.JavacProcessingEnvironment.callProcessor(JavacProcessingEnvironment.java:964)
        ... 53 more
Caused by: java.lang.RuntimeException: Cannot create the xml marshaller
        at android.databinding.tool.store.ResourceBundle$LayoutFileBundle.&lt;clinit&gt;(ResourceBundle.java:730)
        ... 61 more
Caused by: javax.xml.bind.JAXBException: Implementation of JAXB-API has not been found on module path or classpath.
 - with linked exception:
[java.lang.ClassNotFoundException: com.sun.xml.internal.bind.v2.ContextFactory]
        at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:278)
        at javax.xml.bind.ContextFinder.find(ContextFinder.java:421)
        at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:721)
        at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:662)
        at android.databinding.tool.store.ResourceBundle$LayoutFileBundle.&lt;clinit&gt;(ResourceBundle.java:725)
        ... 61 more
Caused by: java.lang.ClassNotFoundException: com.sun.xml.internal.bind.v2.ContextFactory
        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:582)
        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:190)
        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:499)
        at javax.xml.bind.ServiceLoaderUtil.nullSafeLoadClass(ServiceLoaderUtil.java:122)
        at javax.xml.bind.ServiceLoaderUtil.safeLoadClass(ServiceLoaderUtil.java:155)
        at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:276)
        ... 65 more


FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':app:kaptDebugKotlin'.
</code></pre>
",3134462,,2413303,,2019-03-19 9:28:13,2019-03-19 17:02:32,Databinding fails with JAXB class not found exception during compilation (using kapt),<kotlin><dagger-2><android-databinding><androidx><kapt>,1,4,,,
Android,44948245,1,44949641,,2017,,2,3809,"<p>I try to use new simplified Location APIs on Android (introduced in GPS 11.0). I wrote a Service that implements location APIs. But it only triggers and send location for a few seconds (only 2 times).</p>

<pre><code>public class LocationService extends Service {
public static final String TAG = makeLogTag(""LocationService"");

private static final float LOCATION_TRACKING_MIN_DISTANCE = 15f;
private static final float ACCEPTED_ACCURACY = 50f;

private final IBinder mBinder = new LocalBinder();

// fused location api
private FusedLocationProviderClient mFusedLocationClient;
private LocationRequest mLocationRequest;
private LocationCallback mLocationCallback;

@Override
public void onCreate() {
    super.onCreate();
    Log.i(TAG, ""onCreate"");
    mFusedLocationClient = LocationServices.getFusedLocationProviderClient(this);
    createLocationCallback();
    createLocationRequest();
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    Log.i(TAG, ""onStartCommand"");
    if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {
        stopSelf();
        return START_NOT_STICKY;
    }

    getLastKnownLocation();
    startPeriodicLocationUpdate();

    return START_STICKY;
}

@Override
public void onDestroy() {
    super.onDestroy();
    stopPeriodicLocationUpdate();
    Log.i(TAG, ""onDestroy - Estou sendo destruido "");
}

@Nullable
@Override
public IBinder onBind(Intent intent) {
    return mBinder;
}

private void getLastKnownLocation() {
    if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {
        return;
    }
    mFusedLocationClient.getLastLocation()
            .addOnCompleteListener(task -&gt; {
                if (task.isSuccessful() &amp;&amp; task.getResult() != null) {
                    Location lastLocation = task.getResult();
                    storeLocation(lastLocation);
                }
            });
}

private void createLocationRequest() {
    mLocationRequest = new LocationRequest()
            .setInterval(TimeUnit.SECONDS.toMillis(Params.getAgentLocationTrackingUpdateInterval()))
            .setFastestInterval(TimeUnit.SECONDS.toMillis(Params.getAgentLocationTrackingUpdateInterval()))
            .setExpirationDuration(TimeUnit.SECONDS.toMillis(10))
            .setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);
}

private void createLocationCallback() {
    mLocationCallback = new LocationCallback() {
        @Override
        public void onLocationResult(LocationResult locationResult) {
            super.onLocationResult(locationResult);
            Location location = locationResult.getLastLocation();
            if (location != null) {
                storeLocation(location);
            }

            Log.i(TAG, ""locationResult start"");
            for (Location location1 : locationResult.getLocations()) {
                Log.i(TAG, ""locationResult location "" + location1.getLatitude() + "" "" + location1.getLongitude() + "" "" + location1.getAccuracy() + "" "" + location1.getProvider());
            }
            Log.i(TAG, ""locationResult stop"");
        }
    };
}

private void startPeriodicLocationUpdate() {
    if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {
        return;
    }

    Log.i(TAG, ""periodic update"");
    mFusedLocationClient.requestLocationUpdates(mLocationRequest, mLocationCallback, Looper.myLooper());
}

private void stopPeriodicLocationUpdate() {
    mFusedLocationClient.removeLocationUpdates(mLocationCallback)
            .addOnCompleteListener(task -&gt; LOGI(TAG, ""removed location updates!""));
}

private void storeLocation(Location location) {
    Log.i(TAG, ""periodic location "" + location.getLatitude() + "" "" + location.getLongitude() + "" "" + location.getAccuracy() + "" "" + location.getProvider());
    if (location.getAccuracy() &lt;= ACCEPTED_ACCURACY) {
        Log.i(TAG, ""storeLocation: "" + ""saved!"");
        AgentLocationVo agentLocation = new AgentLocationVo();
        agentLocation.setDate(DateHelper.getDate(location.getTime()));
        agentLocation.setLatitude(location.getLatitude());
        agentLocation.setLongitude(location.getLongitude());
        agentLocation.setAccuracy(location.getAccuracy());
        agentLocation.setSyncState(SyncState.NOTUPLOADED);
        if (!AgentLocationDao.isAgentLocationExist(agentLocation))
            AgentLocationDao.insert(agentLocation);
    }
}

@Override
public void onTaskRemoved(Intent rootIntent) {
    Log.i(TAG, ""onTaskRemoved: "");
    stopSelf();
    JobDispatcher.stopSendLocationJob(getApplicationContext()); // TODO: 04/07/17 not the best place for it
}

public static void start(Context context) {
    context.startService(new Intent(context, LocationService.class));
}

public static void stop(Context context) {
    context.stopService(new Intent(context, LocationService.class));
}

/**
 * Class used for the client Binder.  Because we know this service always
 * runs in the same process as its clients, we don't need to deal with IPC.
 */
public class LocalBinder extends Binder {
    public LocationService getService() {
        // Return this instance of LocationService so clients can call public methods
        return LocationService.this;
    }
}
</code></pre>

<p>}</p>

<p>Here are the resource that I used to create the service:
<a href=""https://android-developers.googleblog.com/2017/06/reduce-friction-with-new-location-apis.html"" rel=""nofollow noreferrer"">https://android-developers.googleblog.com/2017/06/reduce-friction-with-new-location-apis.html</a></p>

<p><a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationUpdates/app/src/main/java/com/google/android/gms/location/sample/locationupdates/MainActivity.java"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-location/blob/master/LocationUpdates/app/src/main/java/com/google/android/gms/location/sample/locationupdates/MainActivity.java</a></p>

<p><a href=""https://blog.stylingandroid.com/locationservices/"" rel=""nofollow noreferrer"">https://blog.stylingandroid.com/locationservices/</a></p>

<p>I have even tried using version of method with Pending intent, but get the same result. Even when app is in foreground.</p>
",1635488,,,,,2017-07-06 12:59:38,FusedLocationProviderClient not sending location updates,<android><service><location><google-play-services>,1,2,,,
Android,50735291,1,,,2018,,2,538,"<p>I am developing an app which have the functionality of Screen sharing with other app.</p>

<p>I have used Media projection API for this. I have used MediaMuxer for combining Audio and Video for screen sharing.</p>

<p>I know that Media Projection APIs are used to screen recording but all I want to share the screen while recording.</p>

<p>For this, I have modify the writeSampleData of MediaMuxer class to send bytes via socket to other device over network.</p>

<p>Below is the code for that:</p>

<pre><code>OutputStream outStream;
</code></pre>

<p>outStream = ScreenRecordingActivity.getInstance().socket.getOutputStream();</p>

<pre><code>void writeSampleData(final int trackIndex, final ByteBuffer byteBuf, final MediaCodec.BufferInfo bufferInfo) {
    if (mStatredCount &gt; 0) {
        mMediaMuxer.writeSampleData(trackIndex, byteBuf, bufferInfo);

        if (bufferInfo.size != 0) {

            byteBuf.position(bufferInfo.offset);
            byteBuf.limit(bufferInfo.offset + bufferInfo.size);

            if (outStream != null) {

                try {

                    byte[] bytes = new byte[byteBuf.remaining()];
                    byteBuf.get(bytes);

                    //Send the data
                    outStream.write(bytes);
                    outStream.flush();

                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }
}
</code></pre>

<p>The bytes are successfully transfer via socket and I am also able to receive these bytes at receiver end.</p>

<p>Below is the code for receiving bytes at receiver end:</p>

<pre><code>private class SocketThread implements Runnable {
    @Override
    public void run() {

        Socket socket;
        try {
            serverSocket = new ServerSocket(SERVER_PORT);
        } catch (IOException e) {
            e.printStackTrace();
        }

        if (null != serverSocket) {
            while (!Thread.currentThread().isInterrupted()) {
                try {
                    socket = serverSocket.accept();
                    CommunicationThread commThread = new CommunicationThread(socket);
                    new Thread(commThread).start();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }


    class CommunicationThread implements Runnable {

        InputStream in;
        DataInputStream dis;

        public CommunicationThread(Socket clientSocket) {


            updateMessage(""Server Started..."");
        }

        public void run() {           

            while (!Thread.currentThread().isInterrupted()) {

                try {                       

                    byte[] data = new byte[512];               

                } catch (Exception e) {                    

                    e.printStackTrace();

                    try {
                        fos.close();
                    } catch (Exception e1) {

                        e1.printStackTrace();
                    }
                }
            }
        }
    }
}
</code></pre>

<p>I followed following links for Screen Sharing:</p>

<p><a href=""https://github.com/googlesamples/android-ScreenCapture"" rel=""nofollow noreferrer"">Screen capture</a></p>

<p><a href=""https://github.com/chinmoyp/screenrecorder"" rel=""nofollow noreferrer"">screenrecorder</a></p>

<p><a href=""https://stackoverflow.com/questions/32513379/how-to-record-screen-and-take-screenshots-using-android-api"">Screen recording with mediaProjection</a></p>

<p>I used some code from above examples and make app.</p>

<p>All I want to know is how to handle the bytes at receiver end. How to format these bytes to play live streaming from Sender Side.</p>

<p>Am I following the correct approach for sending and receiving bytes data?</p>

<p>Does MediaProjection Allows to streaming Screen while recording between applications?</p>

<p>Any help will be deeply appreciated.</p>
",7456015,,2649012,,2018-06-07 9:41:19,2018-06-07 20:35:19,Screen Sharing between Devices using Media Projection API,<android><mediacodec><mediamuxer><android-mediaprojection>,1,0,,,
Android,51523053,1,51523428,,2018,,2,71,"<p>My requirement is to scan the finger and based on the finger I've to navigate user to the particular page in android</p>

<p><strong>Explanation</strong></p>

<p>While registering user will give different fingerprints for different functionalities</p>

<p><em>Ex:</em> </p>

<ol>
<li><p>For navigating to login page user may use left index finger</p></li>
<li><p>For navigating to About us page user may use right index finger</p></li>
</ol>

<p>for each fingerprint I've to redirect to the different pages based on the user wish. For this I've checked these <a href=""https://github.com/googlesamples/android-FingerprintDialog/issues/20"" rel=""nofollow noreferrer"">link1</a>, <a href=""https://stackoverflow.com/questions/44520343/android-how-to-get-unique-key-from-finger-print-authentication"">link2</a> and many more but I'm unable to achieve it. Can any one give suggestion...</p>
",3142611,,2649012,,2018-07-25 15:56:24,2018-07-30 14:56:18,How to know which finger is scanned for bio-metric?,<android><biometrics><android-fingerprint-api>,1,6,,,
Android,47529737,1,,,2017,,2,3017,"<p><strong>What I want to do &amp; the problem</strong> </p>

<p>I updated my Android Studio and Android Gradle Plugin to 3.0.1 and my Gradle Wrapper to 4.1 and can build &amp; deploy my Android Gradle project in release variant on a device via IDE.</p>

<ul>
<li><p>However, the following 'Gradle Sync' warning messages are shown:</p>

<blockquote>
  <p>Warning:Module 'library' has variant 'release' selected, but the modules ['integration-test'] depend on variant 'debug'</p>
</blockquote></li>
<li><p><strong>The problem here is, that there is no 'release' variant for the <em>integration-test</em> module which uses the 'com.android.test'
plugin</strong>.</p></li>
<li><p>If I simply try to add a release build type (<code>buildTypes { release {} }</code>) to the :integration-test module I receive:</p>

<blockquote>
  <p>Error:VariantInputs initialized with no merged manifest report on: DEFAULT</p>
</blockquote></li>
</ul>

<p><strong>Details about the project (simplified)</strong></p>

<p>The project consists of:</p>

<ul>
<li>a <strong>:library module</strong></li>
<li>an <strong>:app module</strong> which builds the app's apk and uses the :library module</li>
<li>an <strong>:integration-test module</strong> which:

<ul>
<li>uses the <strong>""com.android.test"" plugin</strong></li>
<li>dependents on the :app module via targetProjectPath ':app' &amp;  targetVariant 'debug'</li>
<li>and contains instrumented tests on the :app functions</li>
<li>only contains a 'main' folder (the test plugin does not support others)</li>
</ul></li>
<li>This project is build after the <a href=""https://github.com/googlesamples/android-testing-templates/tree/master/AndroidTestingBlueprint"" rel=""nofollow noreferrer"">Android Test Blueprint</a> as the goal is here that the :app module does not know anything about the integration-test module's existence.</li>
</ul>

<p>settings.gradle</p>

<pre><code>include :library
include :app
include :integration-test
</code></pre>

<p>app/build.gradle</p>

<pre><code>apply plugin: 'com.android.application'

android {
compileSdkVersion rootProject.ext.compileSdkVersion
buildToolsVersion rootProject.ext.buildToolsVersion

publishNonDefault true

defaultConfig {
    minSdkVersion rootProject.ext.minSdkVersion
    targetSdkVersion rootProject.ext.targetSdkVersion

    applicationId ""xxxxx""

    testInstrumentationRunner rootProject.ext.testInstrumentationRunner

    multiDexEnabled true
    vectorDrawables.useSupportLibrary = true
}

signingConfigs {
    release {
        keyAlias 'xxxx'
    }
}

buildTypes {
    debug {
        testCoverageEnabled = true
    }
    release {
        minifyEnabled false
        proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        signingConfig signingConfigs.release
    }
}

// This is needed by the integration-test module (i.e. com.android.test : integration test)
// in order for targetVariant to work without a flavor
publishNonDefault true

testOptions {
    unitTests {
        // Required so that logging methods do not throw not mocked exceptions in junit tests.
        returnDefaultValues = true
    }
}

compileOptions {
    sourceCompatibility rootProject.ext.sourceCompatibility
    targetCompatibility rootProject.ext.targetCompatibility
}
}

dependencies {
// Local dependencies
compile project(':library')
// i cleaned up all the other dependencies as they wouldn't help here
}
</code></pre>

<p><strong>Question</strong></p>

<p>Did anyone get an <strong>(integration-)test module using the com.android.test plugin</strong> to run with <strong>Android Gradle Plugin 3.0.1</strong> without getting the ""no release variant"" error? If so, how can I avoid this error or how can I add such a release variant to a android test plugin based module (if this makes sense at all)?</p>
",5815054,,5815054,,2017-12-04 9:10:04,2018-08-24 21:19:52,Avoid 'Variant Selection Conflicts' warning when using android test plugin without release variant,<android><android-studio><android-testing><android-gradle-3.0><gradle-android-test-plugi>,1,9,,,
Android,31640783,1,,,2015,,2,2254,"<p>I am building an android application that shows autocomplete feature and fetches autocomplete predictions in google maps using - GeoDataApi.getAutocompletePredictions. I followed this tutorial - <a href=""https://github.com/googlesamples/android-play-places/blob/master/PlaceComplete/Application/src/main/java/com/example/google/playservices/placecomplete/PlaceAutocompleteAdapter.java"" rel=""nofollow"">https://github.com/googlesamples/android-play-places/blob/master/PlaceComplete/Application/src/main/java/com/example/google/playservices/placecomplete/PlaceAutocompleteAdapter.java</a> </p>

<p>But somehow this is not working fine for me.</p>

<p>My class is this - </p>

<pre><code>public class GooglePlacesAutoCompleteAdapter extends ArrayAdapter implements Filterable {

    private ArrayList&lt;PlaceAutocomplete&gt; mResultList;
    GoogleApiClient mGoogleApiClient;
    private LatLngBounds mBounds;
    private AutocompleteFilter mPlaceFilter;
    int radius = 500;

    public GooglePlacesAutoCompleteAdapter(Context context, int textViewResourceId, GoogleApiClient googleApiClient,
                                           Location lastLocation, AutocompleteFilter filter) {
        super(context, textViewResourceId);
        LatLng currentLatLng = new LatLng(lastLocation.getLatitude(), lastLocation.getLongitude());
        mBounds = Utility.boundsWithCenterAndLatLngDistance(currentLatLng, 500, 500);
        mGoogleApiClient = googleApiClient;
        mPlaceFilter = filter;
    }

    @Override
    public int getCount() {
        return mResultList.size();
    }

    @Override
    public PlaceAutocomplete getItem(int index) {
        return mResultList.get(index);
    }

    @Override
    public android.widget.Filter getFilter() {
        Filter filter = new Filter() {
            @Override
            public FilterResults performFiltering(CharSequence constraint) {
                FilterResults filterResults = new FilterResults();
                if (constraint != null &amp;&amp; constraint.length() &gt; 3 &amp;&amp; constraint.length()%3 == 1) {
                    // Retrieve the autocomplete results.
                    mResultList = autocomplete(constraint.toString());

                    // Assign the data to the FilterResults
                    filterResults.values = mResultList;
                    filterResults.count = mResultList.size();
                }
                return filterResults;
            }

            @Override
            public void publishResults(CharSequence constraint, FilterResults results) {
                if (results != null &amp;&amp; results.count &gt; 0) {
                    notifyDataSetChanged();
                } else {
                    notifyDataSetInvalidated();
                }
            }
        };
        return filter;
    }


    public ArrayList&lt;PlaceAutocomplete&gt; autocomplete(String input) {

        if (mGoogleApiClient.isConnected()) {

            // Submit the query to the autocomplete API and retrieve a PendingResult that will
            // contain the results when the query completes.
            PendingResult results = Places.GeoDataApi.getAutocompletePredictions(mGoogleApiClient, input.toString(),
                    mBounds, mPlaceFilter);

            // This method should have been called off the main UI thread. Block and wait for at most 60s
            // for a result from the API.

            AutocompletePredictionBuffer autocompletePredictions = (AutocompletePredictionBuffer)results.await(60, TimeUnit.SECONDS);

            // Confirm that the query completed successfully, otherwise return null
            final Status status = autocompletePredictions.getStatus();
            if (!status.isSuccess()) {
                //Toast.makeText(getContext(), ""Error contacting API: "" + status.toString(),Toast.LENGTH_SHORT).show();
                //Log.e(TAG, ""Error getting autocomplete prediction API call: "" + status.toString());
                autocompletePredictions.release();
                return null;
            }

            // Copy the results into our own data structure, because we can't hold onto the buffer.
            // AutocompletePrediction objects encapsulate the API response (place ID and description).

            Iterator&lt;AutocompletePrediction&gt; iterator = autocompletePredictions.iterator();
            ArrayList resultList = new ArrayList&lt;&gt;(autocompletePredictions.getCount());
            while (iterator.hasNext()) {
                AutocompletePrediction prediction = iterator.next();
                // Get the details of this prediction and copy it into a new PlaceAutocomplete object.
                resultList.add(new PlaceAutocomplete(prediction.getPlaceId(), prediction.getDescription()));
            }

            // Release the buffer now that all data has been copied.
            autocompletePredictions.release();

            return resultList;
        }
        //Log.e(TAG, ""Google API client is not connected for autocomplete query."");
        return null;

    }

    class PlaceAutocomplete {
        public CharSequence placeId;
        public CharSequence description;

        PlaceAutocomplete(CharSequence placeId, CharSequence description) {
            this.placeId = placeId;
            this.description = description;
        }

        @Override
        public String toString() {
            return description.toString();
        }
    }
}
</code></pre>

<p>The line on which GeoDataApi.getAutocompletePredictions is called, goes into an internal classes called - Filter.java, Log.java, handler.java and then Looper.java and loops there indefinetly on line 121 of Looper.java (I am sure studio sdk will show the code for Looper.java). </p>

<p><strong>It is not even throwing an error, or going to the next line, it just does not work. Plus, I am not able to see the stack trace of an error.</strong></p>

<p>This is the code snippet which is calling this -</p>

<pre><code>if (mLastLocation != null) {
           GooglePlacesAutoCompleteAdapter placesAdapter = new GooglePlacesAutoCompleteAdapter(this, R.layout.item_list, mGoogleApiClient, mLastLocation, null);
            autoCompView.setAdapter(placesAdapter);
            autoCompView.setOnItemClickListener(this);
        }
</code></pre>

<p>Can someone please tell me what I am doing wrong here? Please any help will be greatly appreciated. I need to get this working as soon as I could.</p>

<p>PS - I am passing mPlaceFilter as null here.</p>
",5012866,,5012866,,2015-07-27 14:23:52,2017-03-28 14:31:07,GeoDataApi.getAutocompletePredictions not working,<google-maps><google-maps-android-api-2><google-places-api>,1,0,,,
Android,31579686,1,31678438,,2015,,2,532,"<p>Application : FingerPrint Scanner Support</p>

<p>Source : GIT HUB : <a href=""https://github.com/googlesamples/android-FingerprintDialog/"" rel=""nofollow"">Android FingerPrint Dialog</a></p>

<p>Issue : Nullpointer exception</p>

<p>File Name : <strong>MainAcitivty.java</strong></p>

<p>PATH:  <a href=""https://github.com/googlesamples/android-FingerprintDialog/blob/master/Application/src/main/java/com/example/android/fingerprintdialog/MainActivity.java"" rel=""nofollow"">https://github.com/googlesamples/android-FingerprintDialog/blob/master/Application/src/main/java/com/example/android/fingerprintdialog/MainActivity.java</a></p>

<p>Method : </p>

<pre><code>   private boolean initCipher() {
        try {
            mKeyStore.load(null);
            SecretKey key = (SecretKey) mKeyStore.getKey(KEY_NAME, null);  
            mCipher.init(Cipher.ENCRYPT_MODE, key);
            return true;
        } catch (KeyPermanentlyInvalidatedException e) {
            return false;
        } catch (KeyStoreException | CertificateException | UnrecoverableKeyException | IOException
                | NoSuchAlgorithmException | InvalidKeyException e) {
            throw new RuntimeException(""Failed to init Cipher"", e);
        }
    }
</code></pre>

<p>Getting <code>Nullpointer Exception</code> in this method.</p>

<p>Is it due to <code>keystore</code> or <code>Cipher</code> initialization ? </p>
",966347,,1426891,,2015-07-23 6:33:37,2015-07-28 13:56:28,Android M fingerprint Scanner Support example getting Nullpointer exception,<android><nullpointerexception><keystore><secret-key>,1,0,,,
Android,39075163,1,,,2016,,2,770,"<p>I'm analysing the ocr-reader sample project: <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/ocr-reader"" rel=""nofollow"">https://github.com/googlesamples/android-vision/tree/master/visionSamples/ocr-reader</a></p>

<p>The goal would be to replace my custom ""text to image"" implementation for Android (with OpenCV and Tesseract) with Android Vision. </p>

<p>I could not find any way to apply advanced configuration for the OCR processor. For example, in my application, only a predefined set of symbols is allowed. For that, I'm using the following code in my App:</p>

<pre><code>api.SetVariable(""tessedit_char_whitelist"", ""ABJOKEA1234"");
</code></pre>

<p>This helps to avoid the confusion between 0 and O for example.</p>

<p>Is there a way to do this with android-vision? I don't see any options while building the TextRecognizer:</p>

<pre><code>TextRecognizer textRecognizer = new TextRecognizer.Builder(context).build();
</code></pre>

<p>In a general matter, does Google plan to extend the configurability of the library? For example:</p>

<ul>
<li>Cropping of the source image </li>
<li>Providing a custom OCR training file</li>
</ul>

<p>Or is it supposed to remain a straightforward library, with just common features? </p>

<p>Thanks for your help! </p>
",4070636,,,,,2016-10-25 13:58:16,Set OCR whitelist in the TextRecognizer,<android-vision>,1,0,,,
Android,44249483,1,,,2017,,2,622,"<p>As of now, when Android Vision detects a QR-code, the array ""Barcode.cornerPoints"" (which contains the code's corner points) is populated in a seemingly random order. I need is to determine which 3 out of the 4 corner points that contains ""orientation squares"".</p>

<p>The current approach I am using is very unsatisfying:</p>

<ol>
<li><p>For every detected QR-code, I am forced to create a bitmap and attempt to find the QR-code again with another library (Zxing) that always returns the corner points in a consistent order with respect to rotation.</p></li>
<li><p>If Zxing finds the QR-code (which sadly doesn't happen about four times out of five), I need to cross-check and match the Zxing-corners with Android Vision corners.</p></li>
</ol>

<p>What I would like is to get the array ""Barcode.cornerPoints"" populated with respect to orientation.</p>

<p>For example and clarification:</p>

<pre><code>cornerPoints[0] = //First corner-point with an orientation square
cornerPoints[1] = //Second corner-point with an orientation square
cornerPoints[2] = //Third corner-point with an orientation square
cornerPoints[3] = //The corner-point that does not contain a orientation square
</code></pre>

<p><a href=""https://i.stack.imgur.com/bg4jK.jpg"" rel=""nofollow noreferrer"">> Like in this picture &lt;</a></p>

<p>I have been trying to find a clever workaround to this issue for quire a while now but I can't come up with any good solution, and it does not appear as Google has open source'd the code used when population the qrCorners array so i can't extend it...</p>

<p>Any help out there? I am not the only one who has been looking for a solution to this issue:</p>

<p><a href=""https://github.com/googlesamples/android-vision/issues/103"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vision/issues/103</a></p>
",8082968,,8082968,,2017-06-01 7:17:08,2017-06-06 8:39:46,Orientation corners of a QR-code,<android><image-processing><mobile><android-vision>,1,2,,,
Android,53051745,1,53052560,,2018,,2,259,"<p>I'm working on an Android app that uses some 3rd party native libraries. We need to add some functionality to these libraries. So I wrote a set of C++ classes with the code that I need and also cross-compile openssl, as we are using openssl crypto functions.</p>

<p>I made a demo app to test my code and everything is working fine. </p>

<p>Now I need to send this code to the people that are developing the 3rd party libraries, and they will add our code and wrap all the native code in a JAR for us to use it in our app.</p>

<p>I used this example <a href=""https://github.com/googlesamples/android-ndk/tree/master/hello-libs"" rel=""nofollow noreferrer"">NDK hello libs</a> as a base. As I want to send my code as a shared library (.so file), I did this in the 'CMakeList.txt':</p>

<pre><code>cmake_minimum_required(VERSION 3.4.1)

set(distribution_DIR ${CMAKE_SOURCE_DIR}/../distribution)

add_library(lib_crypto STATIC IMPORTED)
set_target_properties(lib_crypto PROPERTIES IMPORTED_LOCATION
    ${distribution_DIR}/openssl/lib/${ANDROID_ABI}/libcrypto.a)

set(CMAKE_CXX_FLAGS ""${CMAKE_CXX_FLAGS} -std=gnu++11"")

### This code just calls my my-lib ###
add_library(native-lib SHARED
        src/main/cpp/native-lib.cpp)

### This is the lib I want to build ###
add_library(my-lib SHARED
         src/main/cpp/*****.cpp
         # more files...
         )

target_include_directories(my-lib PRIVATE ${distribution_DIR}/openssl/include)

target_link_libraries(
                native-lib
                my-lib
                )

target_link_libraries(
                neclic
                lib_crypto
                )
</code></pre>

<p>I built the APK and took 'my-lib.so' from it. Then I made a new project using this lib (and including the .h headers) and everything is working as expected.</p>

<p>My questions is:
Is there a better way of doing this? May I expect any problem when I send this library to be integrated with the original code? For example, do they need to use the same NDK version? Or 'my-lib.so' can be used in any android app if the arch is supported?</p>

<p>Thanks!</p>
",10575618,,,,,2018-10-29 19:32:41,Android NDK - Build shared library from source code,<android><c++><cmake><android-ndk><.so>,1,1,,,
Android,30047918,1,30105684,,2015,,2,861,"<p>We have three BuildVariants: <code>release</code>, <code>debug</code> and <code>develop</code>. The first are the defaults from <code>AndroidStudio</code>. The last is for our internal testing. Here are the configs: (There is nothing different than <code>Signing Config</code>)
<img src=""https://i.stack.imgur.com/8Ow73.png"" alt=""enter image description here"">
<img src=""https://i.stack.imgur.com/NEir6.png"" alt=""enter image description here""></p>

<p>We have imports the following in our <code>build.gradle</code>:</p>

<pre><code>dependencies {
    // App dependencies
    compile 'com.android.support:support-annotations:22.0.0'
    compile 'com.google.guava:guava:18.0'
    // Testing-only dependencies
    androidTestCompile 'com.android.support.test:runner:0.2'
    androidTestCompile 'com.android.support.test:rules:0.2'
    androidTestCompile 'com.android.support.test.espresso:espresso-core:2.1'
}
</code></pre>

<p>Now we've created the <code>androidTest/</code> folder (where the Espresso-Tests are located). I've looked at the example from the <a href=""https://github.com/googlesamples/android-testing/tree/master/espresso/BasicSample"" rel=""nofollow noreferrer"">Android-Testing Samples in GitHub.</a> </p>

<p>But AndoridStudio says always ""Cannot find Symbole"" for AndroidJUnit4.class:
<img src=""https://i.stack.imgur.com/MuY8Y.png"" alt=""enter image description here""></p>

<p>(And now, after a lot of explanation - sorry for that :D)
I found the issue. Our Build Variants was set on <code>Android Instrumented Tests</code> (which is ok) but the App-Module was on the <code>develop</code> <code>BuildVariant</code>. When we have changed it to <code>debug</code> all was fine.</p>

<p>Now I'm not sure if this a bug or is this normal?! Because we have no different - instead of the Singing Config (but I've tested it, it isn't the problem) - on the BuildVariants. And when it's normal, why?!</p>

<p><strong>Edit:</strong></p>

<p>I've created a AOSP-Ticket too: <a href=""https://code.google.com/p/android/issues/detail?id=172029"" rel=""nofollow noreferrer"">https://code.google.com/p/android/issues/detail?id=172029</a></p>
",1231245,,1231245,,2015-05-05 11:22:27,2015-05-07 15:35:44,Android Testing Support Library not found with Espresso and different BuildVariants,<android><android-testing><android-espresso>,1,0,,,
Android,39585232,1,,,2016,,2,158,"<p>I've tried the sample project from Google-Trivial Drive</p>

<p>it works well now I'm trying to refactor it</p>

<p>see the comment in the link below</p>

<p><a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample/MainActivity.java#L198"" rel=""nofollow"">https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample/MainActivity.java#L198</a></p>

<p>it says, ""We register the receiver here instead of as a  in the Manifest"" also ""registering this listener in an Activity is a bad idea""</p>

<p>so what should I do actually?</p>
",4652534,,,,,2016-09-20 5:29:44,Android in app purchase where to register receiver,<java><android><in-app-purchase><in-app-billing>,1,0,,,
Android,30952459,1,30956693,,2015,,2,3526,"<p>I try reuse <a href=""https://github.com/googlesamples/android-MediaEffects/"" rel=""nofollow noreferrer"">Android Media Effects samples</a> and want to be able to change texture data with new bitmap from camera or gallery pick. No solution so far </p>

<p>This is the initial load texture from the sample : <a href=""https://github.com/googlesamples/android-MediaEffects/blob/master/Application/src/main/java/com/example/android/mediaeffects/MediaEffectsFragment.java"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-MediaEffects/blob/master/Application/src/main/java/com/example/android/mediaeffects/MediaEffectsFragment.java</a></p>

<pre><code>    private void loadTextures() {
        // Generate textures
        GLES20.glGenTextures(2, mTextures, 0);

        // Load input bitmap
        Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.puppy);
        mImageWidth = bitmap.getWidth();
        mImageHeight = bitmap.getHeight();
        mTexRenderer.updateTextureSize(mImageWidth, mImageHeight);

        // Upload to texture
        GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, mTextures[0]);
        GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, bitmap, 0);

        // Set texture parameters
        GLToolbox.initTexParams();
    }
</code></pre>

<p>and this is my trouble function :</p>

<pre><code>public void changeBackground(Uri bitmapUri) {

  Log.d(TAG, ""changeBackground : "" + bitmapUri.getPath());

  Bitmap bitmap = BitmapFactory.decodeFile(bitmapUri.getPath());
  mImageWidth = bitmap.getWidth();
  mImageHeight = bitmap.getHeight();
  mTexRenderer.updateTextureSize(mImageWidth, mImageHeight);

  GLUtils.texSubImage2D(GLES20.GL_TEXTURE_2D, 0, 0, 0, bitmap);

  theBackground.requestRender(); //my GLSurfaceView
  bitmap.recycle();
}
</code></pre>

<p>I tried several ways :</p>

<ul>
<li><p>using texSubImage2D only -> texture not updated</p></li>
<li><p>delete and recreate textures with new bitmap -> black texture</p></li>
</ul>

<p>note: the bitmap dimension is fixed, at 1080 x 1080</p>

<p>How to change/modify/replace texture data with new bitmap ?</p>

<p><strong>UPDATE:</strong></p>

<p>I think the problem more relate to this question : <a href=""https://stackoverflow.com/questions/18584232/setting-texture-on-3d-object-using-image-from-photo-gallery-opengl-es-2-0"">Setting texture on 3D object using image from photo gallery</a>. i call changeBackground() after grabbing the image from gallery intent and then crop it (another intent). </p>

<p>Now, how to effectively change texture data with bitmap from gallery intent? anyone have a clue?</p>

<p><strong>SOLVED</strong></p>

<p>I solved the problem by defering texture load process to onSurfaceChange() function. Simply use a flag to indicate the file to load and onSurfaceChange check the flag again.</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""false"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-html lang-html prettyprint-override""><code>private Uri mFileToLoad = null;

public void changeBackground(Uri bitmapUri) {
   Log.d(TAG, ""changeBackground : "" + bitmapUri.getPath());
   mFileToLoad = bitmapUri;
   theBackground.requestRender();
}</code></pre>
</div>
</div>
</p>

<p>and my onSurfaceChange()</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""false"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-html lang-html prettyprint-override""><code>    public void onSurfaceChanged(GL10 gl, int width, int height) {
        Log.d(TAG, ""onSurfaceChanged w:"" + width + "" h:"" + height);
        if (mFileToLoad!=null) {
            GLES20.glDeleteTextures(mTextures.length, mTextures, 0);
            GLES20.glGenTextures(mTextures.length, mTextures, 0);

            Bitmap bitmap = BitmapFactory.decodeFile(mFileToLoad.getPath());
            mImageWidth = bitmap.getWidth();
            mImageHeight = bitmap.getHeight();
            mTexRenderer.updateTextureSize(mImageWidth, mImageHeight);

            // Upload to texture
            GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, mTextures[0]);
            GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, bitmap, 0);

            // Set texture parameters
            GLToolbox.initTexParams();

            mFileToLoad = null;
            bitmap.recycle();
        }

        if (mTexRenderer != null) {
            mTexRenderer.updateViewSize(width, height);
        }
    }</code></pre>
</div>
</div>
</p>

<p>So far it works. </p>
",4772917,,-1,,2017-05-23 12:22:56,2016-03-17 9:53:03,Android: How to change OpenGLES texture data / bitmap from gallery / camera,<java><android><opengl-es><effects>,1,2,,,
Android,44749473,1,44769286,,2017,,2,1126,"<p>I'm trying to draw a rectangle  on a camera2 preview using the basic Camera2 from this link : 
<a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a></p>

<p>and i followed the answer from this question on the forum :</p>

<p><a href=""https://stackoverflow.com/questions/44208122/android-camera2-api-textureview-overlay-for-drawing-on-camera-preview"">android Camera2 API + TextureView overlay for drawing on camera preview</a></p>

<p>but i can't get it to work. I'll be very grateful if you can help me figure out how to solve my problem. Here is the class used to draw the rectangle : <strong>Rectangle.java</strong></p>

<pre><code>package com.example.android.camera2basic;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Rect;
import android.view.View;

public class Rectangle extends View {
Paint paint = new Paint();

public Rectangle(Context context) {
    super(context);
}


@Override
public void onDraw(Canvas canvas) {
    paint.setColor(Color.GREEN);
    paint.setStyle(Paint.Style.FILL);
    Rect rect = new Rect(20, 56, 200, 112);
    canvas.drawRect(rect, paint );
}
}
</code></pre>

<p>xml file of the camera <strong>activity_camera.xml</strong> :</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;

&lt;FrameLayout xmlns:android=""http://schemas.android.com/apk/res/android""
xmlns:tools=""http://schemas.android.com/tools""
android:id=""@+id/container""
android:layout_width=""match_parent""
android:layout_height=""match_parent""
android:background=""#000""
tools:context=""com.example.android.camera2basic.CameraActivity""&gt;

&lt;LinearLayout
android:id=""@+id/surface""
android:layout_width=""match_parent""
android:layout_height=""match_parent""
android:orientation=""vertical"" /&gt;

&lt;/FrameLayout&gt;
</code></pre>

<p>and this is the method used in  the class where i added the rectangle to camera preview <strong>Camera2BasicFragment.java</strong> :</p>

<pre><code>  @Override
  public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {

    View view = inflater.inflate(R.layout.fragment_camera2_basic, container, 
    false);
    LinearLayout linearLayout = (LinearLayout) 
    view.findViewById(R.id.surface);
    linearLayout.addView(new Rectangle(getActivity()));
    return view;
    }
</code></pre>

<p>and finaly the error appeared after the application crushed at launching :</p>

<pre><code>java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.android.camera2basic/com.example.android.camera2basic.CameraActivity}: java.lang.NullPointerException: Attempt to invoke virtual method 'void android.widget.LinearLayout.addView(android.view.View)' on a null object reference
                                                                                  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2793)
                                                                                  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2864)
                                                                                  at android.app.ActivityThread.-wrap12(ActivityThread.java)
                                                                                  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1567)
                                                                                  at android.os.Handler.dispatchMessage(Handler.java:105)
                                                                                  at android.os.Looper.loop(Looper.java:156)
                                                                                  at android.app.ActivityThread.main(ActivityThread.java:6523)
                                                                                  at java.lang.reflect.Method.invoke(Native Method)
                                                                                  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:941)
                                                                                  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:831)
                                                                               Caused by: java.lang.NullPointerException: Attempt to invoke virtual method 'void android.widget.LinearLayout.addView(android.view.View)' on a null object reference
                                                                                  at com.example.android.camera2basic.Camera2BasicFragment.onCreateView(Camera2BasicFragment.java:431)
                                                                                  at android.app.Fragment.performCreateView(Fragment.java:2361)
                                                                                  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1000)
                                                                                  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1178)
                                                                                  at android.app.BackStackRecord.run(BackStackRecord.java:815)
                                                                                  at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1585)
                                                                                  at android.app.FragmentController.execPendingActions(FragmentController.java:371)
                                                                                  at android.app.Activity.performStart(Activity.java:6929)
                                                                                  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2756)
                                                                                  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2864)
                                                                                  at android.app.ActivityThread.-wrap12(ActivityThread.java)
                                                                                  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1567)
                                                                                  at android.os.Handler.dispatchMessage(Handler.java:105)
                                                                                  at android.os.Looper.loop(Looper.java:156)
                                                                                  at android.app.ActivityThread.main(ActivityThread.java:6523)
                                                                                  at java.lang.reflect.Method.invoke(Native Method)
</code></pre>
",3816569,,2308683,,2017-06-26 23:48:04,2017-06-26 23:48:39,Draw rectangle over camera2 preview android,<android><nullpointerexception><android-camera>,1,2,,,
Android,54319444,1,,,2019,,2,362,"<p>I am trying to create a viewmodel module like in this <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/viewmodel/GithubViewModelFactory.kt"" rel=""nofollow noreferrer"">example</a> but I am having this error </p>

<blockquote>
  <p>error: java.util.Map,javax.inject.Provider> cannot be provided without an @Provides-annotated method.</p>
</blockquote>

<p>I followed all the example, here are my codes</p>

<p>ViewModelFactory class</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>@Singleton
public class ViewModelFactory implements ViewModelProvider.Factory {

    private final Map&lt;Class&lt;? extends ViewModel&gt;, Provider&lt;ViewModel&gt;&gt; mCreators;

    @Inject
    ViewModelFactory(Map&lt;Class&lt;? extends ViewModel&gt;, Provider&lt;ViewModel&gt;&gt; creators) {
        mCreators = creators;
    }

    @NonNull
    @Override
    public &lt;T extends ViewModel&gt; T create(@NonNull Class&lt;T&gt; modelClass) {
        Provider&lt;? extends ViewModel&gt; creator = mCreators.get(modelClass);
        if (creator == null) {
            for (Map.Entry&lt;Class&lt;? extends ViewModel&gt;, Provider&lt;ViewModel&gt;&gt; entry : mCreators
                    .entrySet()) {
                if (modelClass.isAssignableFrom(entry.getKey())) {
                    creator = entry.getValue();
                    break;
                }
            }
        }
        if (creator == null) {
            throw new IllegalArgumentException(""unknown model class "" + modelClass);
        }
        try {
            return (T) creator.get();
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }
}</code></pre>
</div>
</div>
</p>

<p>ViewModelModule class</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>@Module
public abstract class ViewModelModule {

    @Binds
    abstract ViewModelProvider.Factory bindViewModelFactory(ViewModelFactory factory);

}</code></pre>
</div>
</div>
</p>

<p>and this is the component</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>@Singleton
@Component(modules = {AppModule.class, ViewModelModule.class})
public interface MainComponent {


    void inject(Sdk sdk);

    void injectTestActivity(TestActivity testActivity);


}</code></pre>
</div>
</div>
</p>

<p>ps: this implementation in android library not in the application project</p>
",4312282,,4312282,,2019-01-23 3:46:08,2019-01-24 15:07:12,<android.arch.lifecycle.ViewModel>> cannot be provided without an @Provides-annotated method,<java><android><dependency-injection><viewmodel><dagger-2>,1,4,,,
Android,36715739,1,,,2016,,2,1541,"<p>I am trying to capture and save the image from camera using this project <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker"" rel=""nofollow"">https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker</a></p>

<p>The code to capture image is in face track activity java file</p>

<pre><code>final CameraSource.ShutterCallback shutterCallback = new CameraSource.ShutterCallback() {
            @Override
            public void onShutter() {
                Log.d(TAG, ""onShutter"");
                Toast.makeText(view.getContext(),""sd"",Toast.LENGTH_SHORT).show();
            }
        };
        CameraSource.PictureCallback myPictureCallback_JPG = new CameraSource.PictureCallback(){
            @Override
            public void onPictureTaken(byte[] arg0) {
            Bitmap bitmapPicture = BitmapFactory.decodeByteArray(arg0, 0, arg0.length);

            //save file
            String path = Environment.DIRECTORY_DCIM.toString();
            //Toast.makeText(getApplicationContext(),path,Toast.LENGTH_SHORT).show();
            OutputStream fOut = null;
            File file = new File(path, ""FitnessGirl""+"".jpg""); // the File to save to
            try{
                fOut = new FileOutputStream(file);
                bitmapPicture.compress(Bitmap.CompressFormat.JPEG, 85, fOut); // saving the Bitmap to a file compressed as a JPEG with 85% compression rate
                MediaStore.Images.Media.insertImage(getContentResolver(),file.getAbsolutePath(),file.getName(),file.getName());
                fOut.flush();
                fOut.close(); // do not forget to close the stream

            }catch (FileNotFoundException exception){

            }catch (IOException e){

            }
            //save file
            }};

        mCameraSource.takePicture(shutterCallback, myPictureCallback_JPG);
</code></pre>

<p>above code is not working, can anyone help?</p>
",5524420,,2606144,,2016-06-08 10:32:04,2016-06-08 10:32:04,camerasource takepicture is not working,<java><android><android-camera>,1,2,,,
Android,35757052,1,35757934,,2016,,2,3762,"<p>I'm using Google Vision API's sample to make barcode reader in a webview of existing project.
<a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/barcode-reader"" rel=""nofollow"">https://github.com/googlesamples/android-vision/tree/master/visionSamples/barcode-reader</a></p>

<p>this is my error message:</p>

<blockquote>
  <p>Error:(36, 13) Failed to resolve: com.google.android.support:design:23.0.1</p>
</blockquote>

<p>This is build.gradle file:
<div class=""snippet"" data-lang=""js"" data-hide=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-html lang-html prettyprint-override""><code>apply plugin: 'com.android.application'

android {
    compileSdkVersion 23
    buildToolsVersion ""21.1.2""

    defaultConfig {
        applicationId ""com.example.harry""
        minSdkVersion 15
        targetSdkVersion 23
        versionCode 1
        versionName ""1.0""
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }

    packagingOptions {
        exclude 'META-INF/DEPENDENCIES'
        exclude 'META-INF/LICENSE'
        exclude 'META-INF/LICENSE.txt'
        exclude 'META-INF/license.txt'
        exclude 'META-INF/NOTICE'
        exclude 'META-INF/NOTICE.txt'
        exclude 'META-INF/notice.txt'
        exclude 'META-INF/ASL2.0'
    }
}

dependencies {
    compile fileTree(include: ['*.jar'], dir: 'libs')
    compile 'com.android.support:support-v4:23.0.1'
    compile 'com.google.android.gms:play-services:8.1.0'
    compile 'com.google.android.support:design:23.0.1'
    compile files('libs/android-support-v4.jar')
    compile files('libs/httpclient-4.3.6.jar')
    compile files('libs/commons-codec-1.3.jar')
    compile files('libs/httpclient-4.1-beta1.jar')
    compile files('libs/apache-mime4j-0.6.jar')
    compile files('libs/httpclient-4.1.jar')
    compile files('libs/httpcore-4.1.jar')
    compile project(':..:ExpandableButtonMenu:library')

}</code></pre>
</div>
</div>
</p>

<p>when I created BarcodeCaptureActivity.java,
I get tons of errors...
BarcodeCaptureActivity.java:
<div class=""snippet"" data-lang=""js"" data-hide=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-html lang-html prettyprint-override""><code>package com.example.harry;

import android.Manifest;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.IntentFilter;
import android.content.pm.PackageManager;
import android.hardware.Camera;
import android.os.Build;
import android.os.Bundle;
import android.support.annotation.NonNull;
import android.support.v4.app.ActivityCompat;
import android.support.v7.app.ActionBarActivity;
import android.util.Log;
import android.view.GestureDetector;
import android.view.MotionEvent;
import android.view.ScaleGestureDetector;
import android.view.View;
import android.widget.Toast;


import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.GoogleApiAvailability;
import com.google.android.gms.common.api.CommonStatusCodes;
import com.google.android.gms.samples.vision.barcodereader.ui.camera.CameraSource;
import com.google.android.gms.samples.vision.barcodereader.ui.camera.CameraSourcePreview;

import com.google.android.gms.samples.vision.barcodereader.ui.camera.GraphicOverlay;
import com.google.android.gms.vision.MultiProcessor;
import com.google.android.gms.vision.barcode.Barcode;
import com.google.android.gms.vision.barcode.BarcodeDetector;

import java.io.IOException;

public class BarcodeCaptureActivity extends ActionBarActivity {

    private static final String TAG = ""Barcode-reader"";

    // intent request code to handle updating play services if needed.
    private static final int RC_HANDLE_GMS = 9001;

    // permission request codes need to be &lt; 256
    private static final int RC_HANDLE_CAMERA_PERM = 2;

    // constants used to pass extra data in the intent
    public static final String AutoFocus = ""AutoFocus"";
    public static final String UseFlash = ""UseFlash"";
    public static final String BarcodeObject = ""Barcode"";

    private CameraSource mCameraSource;
    private CameraSourcePreview mPreview;
    private GraphicOverlay&lt;BarcodeGraphic&gt; mGraphicOverlay;

    // helper objects for detecting taps and pinches.
    private ScaleGestureDetector scaleGestureDetector;
    private GestureDetector gestureDetector;

    /**
     * Initializes the UI and creates the detector pipeline.
     */
    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.barcode_capture);

        mPreview = (CameraSourcePreview) findViewById(R.id.preview);
        mGraphicOverlay = (GraphicOverlay&lt;BarcodeGraphic&gt;) findViewById(R.id.graphicOverlay);

        // read parameters from the intent used to launch the activity.
        boolean autoFocus = getIntent().getBooleanExtra(AutoFocus, false);
        boolean useFlash = getIntent().getBooleanExtra(UseFlash, false);

        // Check for the camera permission before accessing the camera.  If the
        // permission is not granted yet, request permission.
        int rc = ActivityCompat.checkSelfPermission(this, Manifest.permission.CAMERA);
        if (rc == PackageManager.PERMISSION_GRANTED) {
            createCameraSource(autoFocus, useFlash);
        } else {
            requestCameraPermission();
        }

        gestureDetector = new GestureDetector(this, new CaptureGestureListener());
        scaleGestureDetector = new ScaleGestureDetector(this, new ScaleListener());

        Snackbar.make(mGraphicOverlay, ""Tap to capture. Pinch/Stretch to zoom"",
                Snackbar.LENGTH_LONG)
                .show();
    }

    /**
     * Handles the requesting of the camera permission.  This includes
     * showing a ""Snackbar"" message of why the permission is needed then
     * sending the request.
     */
    private void requestCameraPermission() {
        Log.w(TAG, ""Camera permission is not granted. Requesting permission"");

        final String[] permissions = new String[]{Manifest.permission.CAMERA};

        if (!ActivityCompat.shouldShowRequestPermissionRationale(this,
                Manifest.permission.CAMERA)) {
            ActivityCompat.requestPermissions(this, permissions, RC_HANDLE_CAMERA_PERM);
            return;
        }

        final Activity thisActivity = this;

        View.OnClickListener listener = new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                ActivityCompat.requestPermissions(thisActivity, permissions,
                        RC_HANDLE_CAMERA_PERM);
            }
        };

        Snackbar.make(mGraphicOverlay, R.string.permission_camera_rationale,
                Snackbar.LENGTH_INDEFINITE)
                .setAction(R.string.ok, listener)
                .show();
    }

    @Override
    public boolean onTouchEvent(MotionEvent e) {
        boolean b = scaleGestureDetector.onTouchEvent(e);

        boolean c = gestureDetector.onTouchEvent(e);

        return b || c || super.onTouchEvent(e);
    }

    /**
     * Creates and starts the camera.  Note that this uses a higher resolution in comparison
     * to other detection examples to enable the barcode detector to detect small barcodes
     * at long distances.
     *
     * Suppressing InlinedApi since there is a check that the minimum version is met before using
     * the constant.
     */
    @SuppressLint(""InlinedApi"")
    private void createCameraSource(boolean autoFocus, boolean useFlash) {
        Context context = getApplicationContext();

        // A barcode detector is created to track barcodes.  An associated multi-processor instance
        // is set to receive the barcode detection results, track the barcodes, and maintain
        // graphics for each barcode on screen.  The factory is used by the multi-processor to
        // create a separate tracker instance for each barcode.
        BarcodeDetector barcodeDetector = new BarcodeDetector.Builder(context).build();
        BarcodeTrackerFactory barcodeFactory = new BarcodeTrackerFactory(mGraphicOverlay);
        barcodeDetector.setProcessor(
                new MultiProcessor.Builder&lt;&gt;(barcodeFactory).build());

        if (!barcodeDetector.isOperational()) {
            // Note: The first time that an app using the barcode or face API is installed on a
            // device, GMS will download a native libraries to the device in order to do detection.
            // Usually this completes before the app is run for the first time.  But if that
            // download has not yet completed, then the above call will not detect any barcodes
            // and/or faces.
            //
            // isOperational() can be used to check if the required native libraries are currently
            // available.  The detectors will automatically become operational once the library
            // downloads complete on device.
            Log.w(TAG, ""Detector dependencies are not yet available."");

            // Check for low storage.  If there is low storage, the native library will not be
            // downloaded, so detection will not become operational.
            IntentFilter lowstorageFilter = new IntentFilter(Intent.ACTION_DEVICE_STORAGE_LOW);
            boolean hasLowStorage = registerReceiver(null, lowstorageFilter) != null;

            if (hasLowStorage) {
                Toast.makeText(this, R.string.low_storage_error, Toast.LENGTH_LONG).show();
                Log.w(TAG, getString(R.string.low_storage_error));
            }
        }

        // Creates and starts the camera.  Note that this uses a higher resolution in comparison
        // to other detection examples to enable the barcode detector to detect small barcodes
        // at long distances.
        CameraSource.Builder builder = new CameraSource.Builder(getApplicationContext(), barcodeDetector)
                .setFacing(CameraSource.CAMERA_FACING_BACK)
                .setRequestedPreviewSize(1600, 1024)
                .setRequestedFps(15.0f);

        // make sure that auto focus is an available option
        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
            builder = builder.setFocusMode(
                    autoFocus ? Camera.Parameters.FOCUS_MODE_CONTINUOUS_PICTURE : null);
        }

        mCameraSource = builder
                .setFlashMode(useFlash ? Camera.Parameters.FLASH_MODE_TORCH : null)
                .build();
    }

    /**
     * Restarts the camera.
     */
    @Override
    protected void onResume() {
        super.onResume();
        startCameraSource();
    }

    /**
     * Stops the camera.
     */
    @Override
    protected void onPause() {
        super.onPause();
        if (mPreview != null) {
            mPreview.stop();
        }
    }

    /**
     * Releases the resources associated with the camera source, the associated detectors, and the
     * rest of the processing pipeline.
     */
    @Override
    protected void onDestroy() {
        super.onDestroy();
        if (mPreview != null) {
            mPreview.release();
        }
    }

    /**
     * Callback for the result from requesting permissions. This method
     * is invoked for every call on {@link #requestPermissions(String[], int)}.
     * &lt;p&gt;
     * &lt;strong&gt;Note:&lt;/strong&gt; It is possible that the permissions request interaction
     * with the user is interrupted. In this case you will receive empty permissions
     * and results arrays which should be treated as a cancellation.
     * &lt;/p&gt;
     *
     * @param requestCode  The request code passed in {@link #requestPermissions(String[], int)}.
     * @param permissions  The requested permissions. Never null.
     * @param grantResults The grant results for the corresponding permissions
     *                     which is either {@link PackageManager#PERMISSION_GRANTED}
     *                     or {@link PackageManager#PERMISSION_DENIED}. Never null.
     * @see #requestPermissions(String[], int)
     */
    @Override
    public void onRequestPermissionsResult(int requestCode,
                                           @NonNull String[] permissions,
                                           @NonNull int[] grantResults) {
        if (requestCode != RC_HANDLE_CAMERA_PERM) {
            Log.d(TAG, ""Got unexpected permission result: "" + requestCode);
            super.onRequestPermissionsResult(requestCode, permissions, grantResults);
            return;
        }

        if (grantResults.length != 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {
            Log.d(TAG, ""Camera permission granted - initialize the camera source"");
            // we have permission, so create the camerasource
            boolean autoFocus = getIntent().getBooleanExtra(AutoFocus,false);
            boolean useFlash = getIntent().getBooleanExtra(UseFlash, false);
            createCameraSource(autoFocus, useFlash);
            return;
        }

        Log.e(TAG, ""Permission not granted: results len = "" + grantResults.length +
                "" Result code = "" + (grantResults.length &gt; 0 ? grantResults[0] : ""(empty)""));

        DialogInterface.OnClickListener listener = new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                finish();
            }
        };

        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle(""Multitracker sample"")
                .setMessage(R.string.no_camera_permission)
                .setPositiveButton(R.string.ok, listener)
                .show();
    }

    /**
     * Starts or restarts the camera source, if it exists.  If the camera source doesn't exist yet
     * (e.g., because onResume was called before the camera source was created), this will be called
     * again when the camera source is created.
     */
    private void startCameraSource() throws SecurityException {
        // check that the device has play services available.
        int code = GoogleApiAvailability.getInstance().isGooglePlayServicesAvailable(
                getApplicationContext());
        if (code != ConnectionResult.SUCCESS) {
            Dialog dlg =
                    GoogleApiAvailability.getInstance().getErrorDialog(this, code, RC_HANDLE_GMS);
            dlg.show();
        }

        if (mCameraSource != null) {
            try {
                mPreview.start(mCameraSource, mGraphicOverlay);
            } catch (IOException e) {
                Log.e(TAG, ""Unable to start camera source."", e);
                mCameraSource.release();
                mCameraSource = null;
            }
        }
    }

    /**
     * onTap is called to capture the oldest barcode currently detected and
     * return it to the caller.
     *
     * @param rawX - the raw position of the tap
     * @param rawY - the raw position of the tap.
     * @return true if the activity is ending.
     */
    private boolean onTap(float rawX, float rawY) {

        //TODO: use the tap position to select the barcode.
        BarcodeGraphic graphic = mGraphicOverlay.getFirstGraphic();
        Barcode barcode = null;
        if (graphic != null) {
            barcode = graphic.getBarcode();
            if (barcode != null) {
                Intent data = new Intent();
                data.putExtra(BarcodeObject, barcode);
                setResult(CommonStatusCodes.SUCCESS, data);
                finish();
            }
            else {
                Log.d(TAG, ""barcode data is null"");
            }
        }
        else {
            Log.d(TAG,""no barcode detected"");
        }
        return barcode != null;
    }

    private class CaptureGestureListener extends GestureDetector.SimpleOnGestureListener {

        @Override
        public boolean onSingleTapConfirmed(MotionEvent e) {

            return onTap(e.getRawX(), e.getRawY()) || super.onSingleTapConfirmed(e);
        }
    }

    private class ScaleListener implements ScaleGestureDetector.OnScaleGestureListener {

        /**
         * Responds to scaling events for a gesture in progress.
         * Reported by pointer motion.
         *
         * @param detector The detector reporting the event - use this to
         *                 retrieve extended info about event state.
         * @return Whether or not the detector should consider this event
         * as handled. If an event was not handled, the detector
         * will continue to accumulate movement until an event is
         * handled. This can be useful if an application, for example,
         * only wants to update scaling factors if the change is
         * greater than 0.01.
         */
        @Override
        public boolean onScale(ScaleGestureDetector detector) {
            return false;
        }

        /**
         * Responds to the beginning of a scaling gesture. Reported by
         * new pointers going down.
         *
         * @param detector The detector reporting the event - use this to
         *                 retrieve extended info about event state.
         * @return Whether or not the detector should continue recognizing
         * this gesture. For example, if a gesture is beginning
         * with a focal point outside of a region where it makes
         * sense, onScaleBegin() may return false to ignore the
         * rest of the gesture.
         */
        @Override
        public boolean onScaleBegin(ScaleGestureDetector detector) {
            return true;
        }

        /**
         * Responds to the end of a scale gesture. Reported by existing
         * pointers going up.
         * &lt;p/&gt;
         * Once a scale has ended, {@link ScaleGestureDetector#getFocusX()}
         * and {@link ScaleGestureDetector#getFocusY()} will return focal point
         * of the pointers remaining on the screen.
         *
         * @param detector The detector reporting the event - use this to
         *                 retrieve extended info about event state.
         */
        @Override
        public void onScaleEnd(ScaleGestureDetector detector) {
            mCameraSource.doZoom(detector.getScaleFactor());
        }
    }
}
}</code></pre>
</div>
</div>
</p>

<p>why can't android studio recognize import in java?</p>

<p>I'm stuck here for 2 days...
please help me!!!!</p>
",6009679,,6009679,,2016-03-02 20:39:29,2016-03-03 20:47:32,Gradle error when using Google's latest API,<java><android><android-studio><android-gradle><google-vision>,1,4,,,
Android,32988308,1,,,2015,,2,745,"<p>I want to use Vision API in android to detect the face and the landmarks over the face.
I followed the Vision API sample :</p>

<p><a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/photo-demo/"" rel=""nofollow"">https://github.com/googlesamples/android-vision/tree/master/visionSamples/photo-demo/</a></p>

<p>My issues are:</p>

<p>1) I cannot understand the details of this object while debugging:</p>

<pre><code>FaceDetector detector = new FaceDetector.Builder(context)
    .setTrackingEnabled(false)
    .setLandmarkType(FaceDetector.ALL_LANDMARKS)
    .setProminentFaceOnly(true)
    .build();
</code></pre>

<p><a href=""http://i.stack.imgur.com/MPOuH.png"" rel=""nofollow"">image that shows the details of 'detector'</a></p>

<p>Cannot understand 'zzbbc','zzbbd'...etc</p>

<p>2)</p>

<pre><code>Frame frame = new Frame.Builder().setBitmap(bitmap).build();
SparseArray&lt;Face&gt; faces = detector.detect(frame);`
</code></pre>

<p>Here the size of faces is returned as zero.</p>

<p>There is no exception thrown, I can see the image but the rectangle and dots cannot be seen.</p>

<p>Can anyone please help me out with this issue?</p>
",4477690,,3374591,,2015-10-07 9:37:30,2015-10-07 21:02:52,Cannot understand the details of FaceDetector object while debugging using Vision API Android,<android><google-api><google-play-services><face-detection><android-vision>,1,0,,,
Android,37124544,1,37147778,,2016,,2,208,"<p>I have a few tests that have multiple annotations:</p>

<pre><code>@Test
@LargeTest
@FlakyTest
</code></pre>

<p>I found a way to run only @LargeTest from <a href=""https://github.com/googlesamples/android-testing-templates/tree/master/AndroidTestingBlueprint"" rel=""nofollow"">here</a>.</p>

<blockquote>
  <p>./gradlew app:connectedAndroidTest
  -Pandroid.testInstrumentationRunnerArguments.size=large</p>
</blockquote>

<p>Is there a way to run all Instrumentation Tests except those annotated as @FlakyTest?</p>
",4731895,,,,,2016-05-10 19:54:29,Gradle JUnit android run all but @FlakyTest,<android><gradle><junit><android-espresso>,1,0,,,
Android,46435424,1,46452324,,2017,,3,1813,"<p>I'm trying to use dagger 2 on my Android application to inject the new ViewModel from arch android library. </p>

<p>From what I see on this sample <a href=""https://github.com/googlesamples/android-architecture-components/tree/e33782ba54ebe87f7e21e03542230695bc893818/GithubBrowserSample"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components/tree/e33782ba54ebe87f7e21e03542230695bc893818/GithubBrowserSample</a> I need to use this: </p>

<pre><code>@MustBeDocumented
@Target(AnnotationTarget.FUNCTION, AnnotationTarget.CONSTRUCTOR, AnnotationTarget.PROPERTY_GETTER, AnnotationTarget.PROPERTY_SETTER)
@Retention(AnnotationRetention.RUNTIME)
@MapKey
internal annotation class ViewModelKey(val value: KClass&lt;out ViewModel&gt;)

@Module
abstract class ViewModelModule {
    @Binds
    @IntoMap
    @ViewModelKey(LoginViewModel::class)
    internal abstract fun bindLoginViewModel(viewModel: LoginViewModel): LoginViewModel

    @Binds
    @IntoMap
    @ViewModelKey(MainMenuViewModel::class)
    internal abstract fun bindSearchViewModel(viewModel: MainMenuViewModel): MainMenuViewModel

    @Binds
    internal abstract fun bindViewModelFactory(factory: ViewModelFactory): ViewModelProvider.Factory
}

@ApplicationScope
@Component(modules = arrayOf(ApplicationModule::class, NetworkModule::class, ViewModelModule::class))
interface ApplicationComponent {
    fun plusActivityComponent(activityModule: ActivityModule): ActivityComponent
    fun inject(application: LISAApplication)

}
</code></pre>

<p>And my factory is: </p>

<pre><code>@ApplicationScope
class ViewModelFactory @Inject constructor(private val creators: Map&lt;Class&lt;out ViewModel&gt;, @JvmSuppressWildcards Provider&lt;ViewModel&gt;&gt;) : ViewModelProvider.Factory {

    @Suppress(""UNCHECKED_CAST"")
    override fun &lt;T : ViewModel&gt; create(modelClass: Class&lt;T&gt;): T {
        var creator: Provider&lt;out ViewModel&gt;? = creators[modelClass]
        if (creator == null) {
            for ((key, value) in creators) {
                if (modelClass.isAssignableFrom(key)) {
                    creator = value
                    break
                }
            }
        }
        if (creator == null) {
            throw IllegalArgumentException(""unknown model class "" + modelClass)
        }
        try {
            return creator.get() as T
        } catch (e: Exception) {
            throw RuntimeException(e)
        }

    }
}
</code></pre>

<p>But the project doesn't compile :( I have this error (Map&lt;...> cannot be provided without an @Provides-annotated method.): </p>

<pre><code>Using Kotlin incremental compilation
:mobile:transformDataBindingWithDataBindingMergeArtifactsForDebug UP-TO-DATE
:mobile:kaptDebugKotlin
e: /Users/jaumard/LISAProjects/LISA/mobile/build/tmp/kapt3/stubs/debug/com/mylisabox/lisa/dagger/components/ApplicationComponent.java:6: error: [com.mylisabox.lisa.dagger.components.ActivityComponent.inject(com.mylisabox.lisa.common.BaseActivity)] java.util.Map&lt;java.lang.Class&lt;? extends android.arch.lifecycle.ViewModel&gt;,javax.inject.Provider&lt;android.arch.lifecycle.ViewModel&gt;&gt; cannot be provided without an @Provides-annotated method.
e: 

e: public abstract interface ApplicationComponent {
e:                 ^
e:       java.util.Map&lt;java.lang.Class&lt;? extends android.arch.lifecycle.ViewModel&gt;,javax.inject.Provider&lt;android.arch.lifecycle.ViewModel&gt;&gt; is injected at
e:           com.mylisabox.lisa.dagger.ViewModelFactory.&lt;init&gt;(creators)
e:       com.mylisabox.lisa.dagger.ViewModelFactory is injected at
e:           com.mylisabox.lisa.common.BaseActivity.factory
e:       com.mylisabox.lisa.common.BaseActivity is injected at
e:           com.mylisabox.lisa.dagger.components.ActivityComponent.inject(activity)
e: /Users/jaumard/LISAProjects/LISA/mobile/build/tmp/kapt3/stubs/debug/com/mylisabox/lisa/dagger/components/ActivityComponent.java:4: error: com.mylisabox.lisa.dagger.components.ActivityComponent scoped with @com.mylisabox.network.dagger.annotations.ActivityScope may not reference bindings with different scopes:
e: 
</code></pre>

<p>Any idea on how fix this ? </p>
",541867,,541867,,2017-09-28 8:29:55,2017-09-28 8:29:55,Kotlin dagger 2 Android ViewModel injection error,<android><kotlin><viewmodel><dagger-2><kotlin-interop>,1,4,3,,
Android,46696170,1,,,2017,,3,2594,"<p>Looking through the samples I seen 2 approaches to MVVM using Android Architecture Components.</p>

<p>First  approach:</p>

<ol>
<li><code>ViewModel</code> provides <code>LiveData</code></li>
<li><code>Activity</code> subscribes to <code>LiveData</code></li>
<li>When observer called <code>Activity</code> is setting data to <code>ViewModel</code> <code>ObservableField</code>.</li>
<li>Whole <code>ViewModel</code> is passed to binding.</li>
<li><p>In <code>xml</code> you just set <code>ObservableField</code> as value</p>

<pre><code>&lt;ProgressBar
    android:layout_width=""wrap_content""
    android:layout_height=""wrap_content""
    android:layout_gravity=""center""
    app:visibleGone=""@{viewmodel.listLoading}""/&gt;

&lt;android.support.v4.widget.SwipeRefreshLayout
    android:id=""@+id/swiperefresh""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""
    app:refreshing=""@{viewmodel.listRefreshing}""
    app:onRefreshListener=""@{() -&gt; viewmodel.refreshList()}""
    app:visibleGone=""@{!viewmodel.listLoading}""&gt;
</code></pre></li>
</ol>

<p><strong>Pros:</strong> I don't need to pass state (for example ""loading""), as I update <code>listLoading</code> <code>ObservableField</code> in <code>ViewModel</code> as this:</p>

<pre><code>val listLoading = ObservableBoolean(false)
/** other observable fields go here **/

val list: MutableLiveData&lt;List&lt;Item&gt;&gt; = MutableLiveData()

  fun loadList() {
        listLoading.set(true)
        repo.getList { items -&gt;
            list.value = items
            listLoading.set(false)
        }
    }
</code></pre>

<p><strong>Cons:</strong> Are there any cons in this approach?</p>

<p>Second approach:</p>

<ol>
<li><code>ViewModel</code> provides <code>LiveData</code></li>
<li><code>Activity</code> subscribes to <code>LiveData</code></li>
<li>When observer called <code>Activity</code> is passed to binding</li>
<li>Only needed object (pojo) is passed to binding</li>
</ol>

<p><strong>Pros:</strong> Any pros of this approach?</p>

<p><strong>Cons:</strong> State should be returned from <code>ViewModel</code>. In this <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample"" rel=""nofollow noreferrer"">sample from Google</a> data is wrapped in <code>Resource</code> object.</p>

<p>First approach is used in <a href=""https://github.com/googlesamples/android-architecture/tree/dev-todo-mvvm-live-kotlin/"" rel=""nofollow noreferrer"">another sample app from Google</a></p>

<p>I would like to know what are pros and cons of both patterns from developers with more experience working with Android Data Binding and Android Arch Components.</p>
",4260554,,4260554,,2017-10-11 20:59:14,2017-10-11 21:29:27,Best practices and patterns in ViewModel + Data Binding. Is ObservableField in ViewModel OK?,<android><design-patterns><android-databinding><android-architecture-components><android-mvvm>,1,1,2,,
Android,43098757,1,43180267,,2017,,3,977,"<p>I am trying to get location update in background with the batched version of Fused Location Provider Api. </p>

<p>I am doing this by following Google guidelines by requesting a location updates with a callback on a broadcast <a href=""https://developers.google.com/android/reference/com/google/android/gms/location/FusedLocationProviderApi.html#requestLocationUpdates(com.google.android.gms.common.api.GoogleApiClient,%20com.google.android.gms.location.LocationRequest,%20android.app.PendingIntent)"" rel=""nofollow noreferrer"">PendingIntent</a>.</p>

<p>For the location request I used <a href=""https://developers.google.com/android/reference/com/google/android/gms/location/LocationRequest.html#setMaxWaitTime(long)"" rel=""nofollow noreferrer"">setMaxWaitTime</a> to get the location update results in batched as specific by Google API documentation.</p>

<p>My problem is that my broadcast receiver didnt get the location in batch and still get one location at a time from location service.</p>

<p>I also tried a new <a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationUpdatesPendingIntent"" rel=""nofollow noreferrer"">PendingIntent location update sample project</a> from google but the location update still return only one location at a time.</p>

<p>For information I tested on a Nexus 5X device as it has a <a href=""https://source.android.com/devices/sensors/batching.html"" rel=""nofollow noreferrer"">batching sensor hardware</a>.</p>

<p>Am I missing something ?</p>

<p>Here is an example of the code :</p>

<p>Build and connected Google Api Client</p>

<pre><code>private static final long UPDATE_INTERVAL = 60000; // Every 60 seconds.
private static final long FASTEST_UPDATE_INTERVAL = 30000; // Every 30 seconds
private static final long MAX_WAIT_TIME = 60000 * 5; // Batch every 5 minutes.

public void buildGoogleApiClient() {
    mGoogleApiClient = new GoogleApiClient.Builder(context)
            .addConnectionCallbacks(this)
            .addOnConnectionFailedListener(this)
            .addApi(LocationServices.API)
            .build();

    mLocationRequest = new LocationRequest();
    mLocationRequest.setInterval(UPDATE_INTERVAL);
    mLocationRequest.setFastestInterval(FASTEST_UPDATE_INTERVAL);
    mLocationRequest.setPriority(LocationRequest.PRIORITY_BALANCED_POWER_ACCURACY);
    mLocationRequest.setMaxWaitTime(MAX_WAIT_TIME);

    mGoogleApiClient.connect();
}

@Override
public void onConnected(Bundle connectionHint) {
    try {
        // Create a pending intent to listening on location service when the update become available
        Intent mIntent = new Intent(context, LocationReceiver.class);
        mPendingIntent = PendingIntent.getBroadcast(context, 42, mIntent, PendingIntent.FLAG_CANCEL_CURRENT);
        // Permission check before launching location services
        if (ContextCompat.checkSelfPermission(context,
                Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {
            return;
        }
        LocationServices.FusedLocationApi.requestLocationUpdates(mGoogleApiClient, mLocationRequest, mPendingIntent);
    } catch (Exception e) {
        e.printStackTrace();
    }
}
</code></pre>

<p>BroadcastReceiver class</p>

<pre><code>public class LocationReceiver extends BroadcastReceiver {

@Override
public void onReceive(final Context context, Intent intent) {
    try {

        // Check if intent has location result
        if (LocationResult.hasResult(intent)) {
            // Get our location from the LocationResult
            LocationResult locationResult = LocationResult.extractResult(intent);
            if (locationResult != null) {

                List&lt;Location&gt; locations = locationResult.getLocations();

                for (Location location : locations) {
                    SimpleDateFormat formatter = new SimpleDateFormat(""dd/MM/yyyy HH:mm:ss"", Locale.FRANCE);
                    String dateString = formatter.format(new java.util.Date(location.getTime()));

                    Log.d(TAG, ""LOCATION: lat:"" + location.getLatitude() + "" long:"" + location.getLongitude() +
                            "" radius:"" + location.getAccuracy() + "" date:"" + dateString);
                }

            } else {
                Log.d(TAG, ""Location is null"");
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
}
</code></pre>

<p>}</p>

<p>Thanks for any help.</p>
",3041015,,3041015,,2017-03-30 11:43:33,2017-04-03 8:51:53,Android how to get location update in batch,<android><geolocation><location><google-play-services><fusedlocationproviderapi>,1,0,2,,
Android,34881551,1,,,2016,,3,1754,"<p>Implemented <a href=""https://github.com/googlesamples/android-nearby"" rel=""nofollow"">this sample</a> on mobile &amp; tablet everything is perfect ! But whit Android TV ADT-1 v5.0.2 build LRX22G these eloquent message shows up.</p>

<pre><code>GmsClient: unable to connect to service: com.google.android.gms.nearby.messages.service.NearbyMessagesService.START

D/NearbyMessagesClient: Failed to emit client lifecycle event ACTIVITY_STOPPED due to GmsClient being disconnected

NearbyMessagesClient: Failed to emit client lifecycle event CLIENT_DISCONNECTED due to GmsClient being disconnected
</code></pre>

<p>The callback :</p>

<pre><code>@Override public void onConnectionFailed(@NonNull ConnectionResult connectionResult) 
</code></pre>

<p>Outputs :</p>

<pre><code>ConnectionResult{statusCode=INTERNAL_ERROR, resolution=null, message=null}
</code></pre>

<p>Like I said, everything works in the mobile module. I doubled checked API_KEY, gradle dependencies, Manifest meta, nope, I even created a listing for the APK and created a Game on Google Play Console, nothing.</p>

<p>Any ideas ? Thanks !</p>
",704439,,1018109,,2016-04-18 17:11:04,2016-04-18 17:11:04,"ConnectionResult{statusCode=INTERNAL_ERROR, resolution=null, message=null}",<android><google-api-client><android-tv><google-nearby>,1,0,2,,
Android,55520315,1,,,2019,,3,72,"<p>I'm using the new <code>LocationSettingsRequest</code> system to request high accuracy locations. If my device is set to power saving mode for example, would prompt a system dialog to update the location accuracy. This works in most cases but in some devices the following happens:</p>

<ol>
<li>If the device is set to power saving mode, the system dialog asks for gps permission and changes to gps only if confirmed.</li>
<li>If the device is set to gps only, the system asks for wifi and google services to improve location and changes to power saving mode location if confirmed.</li>
</ol>

<p>Here is how I set the <code>LocationSettingsRequest</code>:</p>

<pre><code>val builder = LocationSettingsRequest.Builder()
    .addLocationRequest(createLocationRequest(LocationRequest.PRIORITY_BALANCED_POWER_ACCURACY))
    .addLocationRequest(createLocationRequest(LocationRequest.PRIORITY_HIGH_ACCURACY))
    .setAlwaysShow(true)

settingsClient.checkLocationSettings(builder.build())
</code></pre>

<p>This triggers the Google Play Services system dialog to update the location accuracy settings. But for example on a Samsung Galaxy S6 running Android 7.0, the location is never updated to high accuracy.</p>

<p>The same happens when I try the Google Location example available <a href=""https://github.com/googlesamples/android-play-location"" rel=""nofollow noreferrer"">here</a>. In the <code>locationupdates</code> folder, check the <code>startLocationUpdates()</code> method where the settings resolution is called:</p>

<pre><code>private void startLocationUpdates() {
    // Begin by checking if the device has the necessary location settings.
    mSettingsClient.checkLocationSettings(mLocationSettingsRequest)
            .addOnSuccessListener(this, new OnSuccessListener&lt;LocationSettingsResponse&gt;() {
                @Override
                public void onSuccess(LocationSettingsResponse locationSettingsResponse) {
                    Log.i(TAG, ""All location settings are satisfied."");

                    //noinspection MissingPermission
                    mFusedLocationClient.requestLocationUpdates(mLocationRequest,
                            mLocationCallback, Looper.myLooper());

                    updateUI();
                }
            })
            .addOnFailureListener(this, new OnFailureListener() {
                @Override
                public void onFailure(@NonNull Exception e) {
                    int statusCode = ((ApiException) e).getStatusCode();
                    switch (statusCode) {
                        case LocationSettingsStatusCodes.RESOLUTION_REQUIRED:
                            Log.i(TAG, ""Location settings are not satisfied. Attempting to upgrade "" +
                                    ""location settings "");
                            try {
                                // Show the dialog by calling startResolutionForResult(), and check the
                                // result in onActivityResult().
                                ResolvableApiException rae = (ResolvableApiException) e;
                                rae.startResolutionForResult(MainActivity.this, REQUEST_CHECK_SETTINGS);
                            } catch (IntentSender.SendIntentException sie) {
                                Log.i(TAG, ""PendingIntent unable to execute request."");
                            }
                            break;
                        case LocationSettingsStatusCodes.SETTINGS_CHANGE_UNAVAILABLE:
                            String errorMessage = ""Location settings are inadequate, and cannot be "" +
                                    ""fixed here. Fix in Settings."";
                            Log.e(TAG, errorMessage);
                            Toast.makeText(MainActivity.this, errorMessage, Toast.LENGTH_LONG).show();
                            mRequestingLocationUpdates = false;
                    }

                    updateUI();
                }
            });
}
</code></pre>

<p>Running this sample app on this Samsung device causes the same problem. The <code>onActivityResult()</code> is called for the <code>Activity.RESULT_CANCELED</code> case.</p>

<p>Has anyone been through something similar? Any ideas on how to address the problem?</p>
",11312661,,,,,2019-04-15 10:39:58,Requesting high precision location with LocationSettingsRequest not updating location settings,<android><google-play-services><android-location>,1,5,2,,
Android,41773621,1,,,2017,,3,3176,"<p>I'm trying to use <a href=""https://developers.google.com/vision/barcodes-overview"" rel=""nofollow noreferrer"">Google Mobile Vision API</a> with the camera2 module and I'm having a lot of trouble.</p>

<p>I'm using Google's <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow noreferrer"">android-Camera2Video</a> example code as a base. I've modified it to include the following callback:</p>

<p><strong>Camera2VideoFragment.java</strong></p>

<pre><code>OnCameraImageAvailable mCameraImageCallback;

public interface OnCameraImageAvailable {
    void onCameraImageAvailable(Image image);
}


ImageReader.OnImageAvailableListener mImageAvailable = new ImageReader.OnImageAvailableListener() {
    @Override
    public void onImageAvailable(ImageReader reader) {

        Image image = reader.acquireLatestImage();
        if (image == null)
            return;

        mCameraImageCallback.onCameraImageAvailable(image);

        image.close();
    }
};
</code></pre>

<p>That way any fragment including <code>Camera2VideoFragment.java</code> can get access to its images.</p>

<p>Now, The Barcode API only accepts <code>Bitmap</code> images, but I'm unable to convert <code>YUV_420_888</code> to Bitmap. Instead, I changed the <code>imageReader</code>'s file format to <code>JPEG</code> and ran the following conversion code:</p>

<pre><code>    Image.Plane[] planes = image.getPlanes();
    ByteBuffer buffer = planes[0].getBuffer();
    buffer.rewind();
    byte[] data = new byte[buffer.capacity()];
    buffer.get(data);
    Bitmap bitmap = BitmapFactory.decodeByteArray(data, 0, data.length);
</code></pre>

<p>This worked but the framerate drop of feeding <code>JPEG</code> data to the <code>imageReader</code> was significant. I'm wondering if anyone has worked around this issue before.</p>
",5710376,,,,,2018-01-04 0:11:23,camera2 output to Bitmap,<java><android><bitmap><google-vision>,1,0,2,,
Android,30163964,1,30875643,,2015,,3,1164,"<p>I have been trying to get device owner, inspired by <a href=""https://github.com/googlesamples/android-DeviceOwner"" rel=""nofollow noreferrer"">google sample code</a></p>

<p>Using adb, I am able to get device owner on nexus 4,5,7,9 and micromax. However in LG G Pad (LG-V400) and LG G3 (LG G3 855) I get an error.</p>

<pre><code>java.lang.SecurityException: Neither user 2000 nor current process has android.permission.BIND_DEVICE_ADMIN.
</code></pre>

<p>I noticed that the device admin is enabled on these devices, but not the device owner. I was able to capture the bug report from the device found <a href=""https://drive.google.com/file/d/0B6pcRab4JKQJZ3pNc29vTjN1cFk/view?usp=sharing"" rel=""nofollow noreferrer"">here</a>.<img src=""https://i.stack.imgur.com/mRyFH.png"" alt=""enter image description here""></p>

<p>I have tried contacting LG but havent heard back anything.</p>

<p>Any help is greatly appreciated.</p>
",3916830,,,,,2015-07-13 14:47:22,Device owner issue using adb method with LG devices only,<android><adb><android-5.0-lollipop><device-owner>,1,0,1,,
Android,47051069,1,48248557,,2017,,3,317,"<p>I am playing with <a href=""https://developer.android.com/guide/topics/ui/look-and-feel/downloadable-fonts.html"" rel=""nofollow noreferrer"">Downloadable fonts api</a>. I downloaded the  <a href=""https://github.com/googlesamples/android-DownloadableFonts"" rel=""nofollow noreferrer"">Google sample application</a> and also incorporated the code into my project. Both run successfully but some fonts consistently fail to download both from my app and from the sample app. </p>

<p>I use <code>FontsContractCompat.requestFont</code> and gets a callback to <code>onTypefaceRequestFailed(int reason)</code> with reason 1. The documentation says it means ""FAIL_REASON_FONT_NOT_FOUND"". 
I assume those fonts should exist because: 1) They appear in an xml file that comes with the sample app, 2) They appear in the <a href=""https://fonts.google.com/"" rel=""nofollow noreferrer"">online list of Google Fonts</a>, and 3) They return from the developer web api (<code>https://www.googleapis.com/webfonts/v1/webfonts?key=</code>)</p>

<p>Here is the list of failed fonts:<code>
 Angkor
 Archivo
 Asap Condensed
 Baloo Bhaijaan
 Baloo Tammudu
 Battambang
 Bayon
 Bellefair
 BioRhyme Expanded
 Bokor
 Cabin Condensed
 Chau Philomene One
 Chenla
 Content
 Dangrek
 Encode Sans
 Encode Sans Condensed
 Encode Sans Expanded
 Encode Sans Semi Condensed
 Encode Sans Semi Expanded
 Fasthand
 Faustina
 Freehand
 Hanuman
 Khmer
 Koulen
 Libre Barcode 128
 Libre Barcode 128 Text
 Libre Barcode 39
 Libre Barcode 39 Extended
 Libre Barcode 39 Extended Text
 Libre Barcode 39 Text
 Mada
 Manuale
 Metal
 Moul
 Moulpali
 Mukta
 Mukta Mahee
 Mukta Malar
 Nokora
 Open Sans Condensed
 Preahvihear
 Roboto Condensed
 Saira
 Saira Condensed
 Saira Extra Condensed
 Saira Semi Condensed
 Sedgwick Ave
 Sedgwick Ave Display
 Siemreap
 Suwannaphum
 Taprom
 Ubuntu Condensed
 Zilla Slab
 Zilla Slab Highlight</code></p>
",5346565,,2649012,,2017-11-01 10:04:47,2018-01-14 10:20:10,downloadable fonts - can't download some google fonts,<android><fonts><google-font-api><google-fonts>,1,3,1,,
Android,37642551,1,,,2016,,3,1850,"<p>I am trying to work on my Nexus 5x with android <code>Camera2 APIs</code> and I am using <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">googlesamples android-Camera2Basic</a></p>

<p>My problem is that the JPEG images have too low quality and their size is much smaller that regular images I am taking with my phone camera app.</p>

<p>According to google documents there should be a key <code>JPEG_QUALITY</code> both in CaptureRequest and in CaptureResult:</p>

<blockquote>
  <p>JPEG_QUALITY</p>
  
  <p>Added in API level 21</p>
  
  <p>Key JPEG_QUALITY</p>
  
  <p>Compression quality of the final JPEG image.</p>
  
  <p>85-95 is typical usage range.</p>
  
  <p>Range of valid values:</p>
  
  <p>1-100; larger is higher quality</p>
  
  <p>This key is available on all devices.</p>
</blockquote>

<p>However when I ask for the available keys, <code>JPEG_QUALITY</code> key is not available so I don't how to know what is my current <code>JPEG</code> compression quallity used and how I can change it. </p>

<p>The code I did inside:</p>

<pre><code>CameraCaptureSession.CaptureCallback CaptureCallback
                = new CameraCaptureSession.CaptureCallback() {

            @Override
            public void onCaptureCompleted(@NonNull CameraCaptureSession session,
                                           @NonNull CaptureRequest request,
                                           @NonNull TotalCaptureResult result) {


                //_TEST_DEBUG
                List&lt;CaptureRequest.Key&lt;?&gt;&gt; requestKeys = request.getKeys();
                List&lt;CaptureResult.Key&lt;?&gt;&gt; resultKeys = result.getKeys();
</code></pre>

<p>requestKeys &amp; resultKeys have many keys including <code>JPEG_ORIENTATION</code> but not the <code>JPEG_QUALITY</code> key.</p>

<p>Any idea what am I doing wrong? 
Why can't I find how to change <code>JPEG</code> compression quality?</p>

<p>Thanks,
Guy</p>
",6426789,,5709159,,2016-07-04 16:04:01,2016-07-04 16:04:01,Android Camera2 API JPEG_QUALITY not available,<android><android-camera2>,1,0,1,,
Android,29472129,1,51223759,,2015,,3,1621,"<p>I am trying to make an Android app about Geofencing. I have followed the tutorial on <a href=""https://developer.android.com/training/location/geofencing.html"" rel=""nofollow"">developers page</a> and <a href=""https://github.com/googlesamples/android-play-location/tree/master/Geofencing/app/src/main/java/com/google/android/gms/location/sample/geofencing"" rel=""nofollow"">the sample code</a>, however it doesn't work as expected. I could have maybe made some failures regarding the life cycle of an Android app since I combined Location Addresses and Geofencing.</p>

<p>My question is specifically why I don't get <code>onHandleIntent</code> called in the <code>IntentService</code> in the <code>GeofenceTransitionIntentService.java</code> class. Is there any error in the <code>getGeofencePending</code> function in <code>MainActivity.java</code>.
Here is the code:</p>

<pre><code>package com.example.geofence;

import java.text.DateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.Map;

import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.api.GoogleApiClient;
import com.google.android.gms.common.api.GoogleApiClient.Builder;
import com.google.android.gms.common.api.GoogleApiClient.ConnectionCallbacks;
import com.google.android.gms.common.api.GoogleApiClient.OnConnectionFailedListener;
import com.google.android.gms.common.api.ResultCallback;
import com.google.android.gms.common.api.Status;
import com.google.android.gms.internal.mr;
import com.google.android.gms.location.Geofence;
import com.google.android.gms.location.GeofencingRequest;
import com.google.android.gms.location.LocationListener;
import com.google.android.gms.location.LocationRequest;
import com.google.android.gms.location.LocationServices;
import com.google.android.gms.maps.model.LatLng;

import android.support.v7.app.ActionBarActivity;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.PendingIntent;
import android.content.Intent;
import android.content.SharedPreferences;
import android.location.Geocoder;
import android.location.Location;
import android.os.Bundle;
import android.os.Handler;
import android.os.ResultReceiver;

public class MainActivity extends Activity implements OnClickListener,
ConnectionCallbacks, OnConnectionFailedListener, LocationListener, ResultCallback &lt;Status&gt;{

    protected static final String TAG = ""creating-and-monitoring-geofences"";
    GoogleApiClient mGoogleApiClient;
    LocationRequest mLocationRequest;
    Boolean mRequestingLocationUpdates = true;
    Boolean mAddressRequested = true;
    String mAddressOutput = null;
    Location mCurrentLocation;
    protected Location mLastLocation;
    private AddressResultReceiver mResultReceiver;
    String mLastUpdateTime;
    TextView latitudeText, longitudeText, lastUpdateTimeText, locationAddress;
    private SharedPreferences mSharedPreferences;

    private Button mAddGeofencesButton, mRemoveGeofencesButton;
    protected ArrayList&lt;Geofence&gt; mGeofenceList = null;
    private PendingIntent mGeofencePendingIntent;
    private boolean mGeofencesAdded;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Toast.makeText(this, ""OnCreate"", Toast.LENGTH_SHORT).show();
        setContentView(R.layout.activity_main);
        mResultReceiver = new AddressResultReceiver(new Handler());
        latitudeText = (TextView) findViewById(R.id.latitudeText);
        longitudeText = (TextView) findViewById(R.id.longitudeText);
        lastUpdateTimeText = (TextView) findViewById(R.id.lastUpdateText);
        locationAddress = (TextView) findViewById(R.id.locationAddressText);

        mAddGeofencesButton = (Button) findViewById(R.id.add_geofence);
        mRemoveGeofencesButton = (Button) findViewById(R.id.remove_geofence);
        mGeofenceList = new ArrayList&lt;Geofence&gt;();
        mGeofencePendingIntent = null;
        mSharedPreferences = getSharedPreferences(Constants.SHARED_PREFERENCES_NAME,
                MODE_PRIVATE);
        mGeofencesAdded = mSharedPreferences.getBoolean(Constants.GEOFENCES_ADDED_KEY, false);

        mAddGeofencesButton.setOnClickListener(this);
        mRemoveGeofencesButton.setOnClickListener(this);

        setButtonsEnabledState();
        buildGoogleApiClient(); 
    }

    protected void startIntentService() {
        Intent intent = new Intent(this, FetchAddressIntentService.class);
        intent.putExtra(Constants.RECEIVER, mResultReceiver);
        intent.putExtra(Constants.LOCATION_DATA_EXTRA, mLastLocation);
        startService(intent);
    }
    /*  
    @Override
    protected void onSaveInstanceState(Bundle savedInstanceState) {
        savedInstanceState.putBoolean(REQUESTING_LOCATION_UPDATES_KEY,
                mRequestingLocationUpdates);
        savedInstanceState.putParcelable(LOCATION_KEY, mCurrentLocation);
        savedInstanceState.putString(LAST_UPDATED_TIME_STRING_KEY, mLastUpdateTime);
        super.onSaveInstanceState(savedInstanceState);
    }
    */

    @Override
    public void onClick(View v) {
        if(v==mAddGeofencesButton){
            addGeofencesButtonHandler(v);
        }
        if(v==mRemoveGeofencesButton){
            removeGeofencesButtonHandler(v);
        }

    }

    @Override
    protected void onPause() {
        super.onPause();
        stopLocationUpdates();
    }

    @Override
    public void onResume() {
        super.onResume();
        Toast.makeText(this, ""onResume"", Toast.LENGTH_SHORT).show();
        if (mGoogleApiClient.isConnected() &amp;&amp; !mRequestingLocationUpdates) {
            startLocationUpdates();
        }
    }

    protected synchronized void buildGoogleApiClient() {
        mGoogleApiClient = new GoogleApiClient.Builder(this)
        .addConnectionCallbacks(this)
        .addOnConnectionFailedListener(this)
        .addApi(LocationServices.API)
        .build();
        mGoogleApiClient.connect();

    }
    @Override
    public void onConnectionFailed(ConnectionResult result) {
        // TODO Auto-generated method stub
        Toast.makeText(this, ""onConnectionFailed"", Toast.LENGTH_SHORT).show();

    }
    @SuppressLint(""NewApi"")
    @Override
    public void onConnected(Bundle connectionHint) {
        Toast.makeText(this, ""onConnected"", Toast.LENGTH_SHORT).show();
        mLastLocation = LocationServices.FusedLocationApi.getLastLocation(
                mGoogleApiClient);
        if (mLastLocation != null) {
            String latitude = String.valueOf(mLastLocation.getLatitude());
            String longitude = String.valueOf(mLastLocation.getLongitude());
            latitudeText.setText(""latitude: "" + latitude);
            longitudeText.setText(""longitude: "" + longitude);
        }
        if(mRequestingLocationUpdates){
            createLocationRequest();
            startLocationUpdates();
        }
        if (mLastLocation != null) {
            // Determine whether a Geocoder is available.
            if (!Geocoder.isPresent()) {
                Toast.makeText(this, ""No geocoder available"",
                        Toast.LENGTH_SHORT).show();
                return;
            }

            if (mAddressRequested) {
                startIntentService();
            }
        }

    }
    @Override
    public void onConnectionSuspended(int cause) {
        // TODO Auto-generated method stub
        Toast.makeText(this, ""onConnectionSuspended"", Toast.LENGTH_SHORT).show();
    }

    protected void createLocationRequest() {
        mLocationRequest = new LocationRequest();
        mLocationRequest.setInterval(10000);
        mLocationRequest.setFastestInterval(5000);
        mLocationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);
    }

    protected void startLocationUpdates() {
        LocationServices.FusedLocationApi.requestLocationUpdates(
                mGoogleApiClient, mLocationRequest, this); //this refers to the interface LocationListener
    }

    protected void stopLocationUpdates() {
        LocationServices.FusedLocationApi.removeLocationUpdates(
                mGoogleApiClient, this);
    }   

    @Override
    public void onLocationChanged(Location location) {
        mCurrentLocation = location;
        mLastUpdateTime = DateFormat.getTimeInstance().format(new Date());
        updateUI();
    }   

    public void updateUI() {
        latitudeText.setText(String.valueOf(mCurrentLocation.getLatitude()));
        longitudeText.setText(String.valueOf(mCurrentLocation.getLongitude()));
        lastUpdateTimeText.setText(mLastUpdateTime);
        locationAddress.setText(mAddressOutput);
    }

    public void showToast(String text){
        Toast.makeText(this, text, Toast.LENGTH_SHORT).show();
    }


    class AddressResultReceiver extends ResultReceiver {
        public AddressResultReceiver(Handler handler) {
            super(handler);
        }

        @Override
        protected void onReceiveResult(int resultCode, Bundle resultData) {
            showToast(""onReceiveResult"");
            // Display the address string
            // or an error message sent from the intent service.
            mAddressOutput = resultData.getString(Constants.RESULT_DATA_KEY);
            //displayAddressOutput();
            System.out.println(mAddressOutput);
            Log.e(""RESULT!!!"", mAddressOutput);
            locationAddress.setText(mAddressOutput);

            // Show a toast message if an address was found.
            if (resultCode == Constants.SUCCESS_RESULT) {
                ;
            }
        }
    }

    /**
    * Adds geofences, which sets alerts to be notified when the device enters or exits one of the
    * specified geofences. Handles the success or failure results returned by addGeofences().
    */
   public void addGeofencesButtonHandler(View view) {
       if (!mGoogleApiClient.isConnected()) {
           Toast.makeText(this, getString(R.string.not_connected), Toast.LENGTH_SHORT).show();
           return;
       }

       try {
           LocationServices.GeofencingApi.addGeofences(
                   mGoogleApiClient,
                   // The GeofenceRequest object.
                   getGeofencingRequest(),
                   // A pending intent that that is reused when calling removeGeofences(). This
                   // pending intent is used to generate an intent when a matched geofence
                   // transition is observed.
                   getGeofencePendingIntent()
           ).setResultCallback(this); // Result processed in onResult().
       } catch (SecurityException securityException) {
           // Catch exception generated if the app does not use ACCESS_FINE_LOCATION permission.
           logSecurityException(securityException);
       }
   }

   /**
    * Removes geofences, which stops further notifications when the device enters or exits
    * previously registered geofences.
    */
   public void removeGeofencesButtonHandler(View view) {
       if (!mGoogleApiClient.isConnected()) {
           Toast.makeText(this, getString(R.string.not_connected), Toast.LENGTH_SHORT).show();
           return;
       }
       try {
           // Remove geofences.
           LocationServices.GeofencingApi.removeGeofences(
                   mGoogleApiClient,
                   // This is the same pending intent that was used in addGeofences().
                   getGeofencePendingIntent()
           ).setResultCallback(this); // Result processed in onResult().
       } catch (SecurityException securityException) {
           // Catch exception generated if the app does not use ACCESS_FINE_LOCATION permission.
           logSecurityException(securityException);
       }
   }

   private void logSecurityException(SecurityException securityException) {
       Log.e(TAG, ""Invalid location permission. "" +
               ""You need to use ACCESS_FINE_LOCATION with geofences"", securityException);
   }

    /**
     * Gets a PendingIntent to send with the request to add or remove Geofences. Location Services
     * issues the Intent inside this PendingIntent whenever a geofence transition occurs for the
     * current list of geofences.
     *
     * @return A PendingIntent for the IntentService that handles geofence transitions.
     */
    private PendingIntent getGeofencePendingIntent() {
        // Reuse the PendingIntent if we already have it.
        if (mGeofencePendingIntent != null) {
            Toast.makeText(this, ""mGeofencePendingIntent != null"", Toast.LENGTH_SHORT).show();
            return mGeofencePendingIntent;
        }
        Intent intent = new Intent(this, GeofenceTransitionsIntentService.class);
        // We use FLAG_UPDATE_CURRENT so that we get the same pending intent back when calling
        // addGeofences() and removeGeofences().
        Toast.makeText(this, ""mGeofencePendingIntent == null"", Toast.LENGTH_SHORT).show();
        mGeofencePendingIntent = PendingIntent.getService(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
        return mGeofencePendingIntent;
    }

    /**
     * Builds and returns a GeofencingRequest. Specifies the list of geofences to be monitored.
     * Also specifies how the geofence notifications are initially triggered.
     */
    private GeofencingRequest getGeofencingRequest() {     

        GeofencingRequest.Builder builder = new GeofencingRequest.Builder();

        // The INITIAL_TRIGGER_ENTER flag indicates that geofencing service should trigger a
        // GEOFENCE_TRANSITION_ENTER notification when the geofence is added and if the device
        // is already inside that geofence.
            builder.setInitialTrigger(GeofencingRequest.INITIAL_TRIGGER_ENTER);

        // Add the geofences to be monitored by geofencing service.
        builder.addGeofences(mGeofenceList);
        builder.addGeofence(new Geofence.Builder()
        .setRequestId(""CurrentLocation"")
        .setCircularRegion(mCurrentLocation.getLatitude(), mCurrentLocation.getLongitude(), 50)
        .setExpirationDuration(Geofence.NEVER_EXPIRE)
        .setTransitionTypes(Geofence.GEOFENCE_TRANSITION_ENTER | Geofence.GEOFENCE_TRANSITION_EXIT)
        .build());

        Toast.makeText(this, ""Geofence request added"",  Toast.LENGTH_SHORT).show();

        // Return a GeofencingRequest.
        return builder.build();
    }


    @Override
    public void onResult(Status status) {
        if (status.isSuccess()) {
            // Update state and save in shared preferences.
            mGeofencesAdded = !mGeofencesAdded;
            SharedPreferences.Editor editor = mSharedPreferences.edit();
            editor.putBoolean(Constants.GEOFENCES_ADDED_KEY, mGeofencesAdded);
            editor.commit();

            // Update the UI. Adding geofences enables the Remove Geofences button, and removing
            // geofences enables the Add Geofences button.
            setButtonsEnabledState();

            Toast.makeText(
                    this,
                    getString(mGeofencesAdded ? R.string.geofences_added :
                            R.string.geofences_removed),
                    Toast.LENGTH_SHORT
            ).show();
        } else {
            // Get the status code for the error and log it using a user-friendly message.
            String errorMessage = GeoFenceErrorMessages.getErrorString(this,
                    status.getStatusCode());
            Log.e(TAG, errorMessage);
        }
    }

     /**
     * Ensures that only one button is enabled at any time. The Add Geofences button is enabled
     * if the user hasn't yet added geofences. The Remove Geofences button is enabled if the
     * user has added geofences.
     */
    private void setButtonsEnabledState() {
        if (mGeofencesAdded) {
            mAddGeofencesButton.setEnabled(false);
            mRemoveGeofencesButton.setEnabled(true);
        } else {
            mAddGeofencesButton.setEnabled(true);
            mRemoveGeofencesButton.setEnabled(false);
        }
    }    
}
</code></pre>

<p>and the GeofenceTransitionIntentService class, that should deal with the triggering event</p>

<pre><code>package com.example.geofence;

import java.util.ArrayList;
import java.util.List;

import com.google.android.gms.location.Geofence;
import com.google.android.gms.location.GeofencingEvent;

import android.app.IntentService;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.graphics.BitmapFactory;
import android.graphics.Color;
import android.support.v4.app.NotificationCompat;
import android.support.v4.app.TaskStackBuilder;
import android.text.TextUtils;
import android.util.Log;
import android.widget.Toast;

public class GeofenceTransitionsIntentService extends IntentService{

    protected static final String TAG = ""geofence-transitions-service"";

    public GeofenceTransitionsIntentService(String name) {
        super(""name"");
    }

    @Override
    protected void onHandleIntent(Intent intent) {
        Toast.makeText(this, ""OnHandleIntent"", Toast.LENGTH_SHORT).show();
        Log.e(TAG, ""OnHandleIntent"");
        GeofencingEvent geofencingEvent = GeofencingEvent.fromIntent(intent);       
        if (geofencingEvent.hasError()) {
            String errorMessage = GeoFenceErrorMessages.getErrorString(this,
                    geofencingEvent.getErrorCode());
            Log.e(TAG, errorMessage);
            return;
        }
        Log.e(""DEBUG"", ""No geofencingEvent error"");

         // Get the transition type.
        int geofenceTransition = geofencingEvent.getGeofenceTransition();
        Log.e(""DEBUG"", ""getGeofenceTransition has been called"");
        // Test that the reported transition was of interest.
        if (geofenceTransition == Geofence.GEOFENCE_TRANSITION_ENTER ||
                geofenceTransition == Geofence.GEOFENCE_TRANSITION_EXIT) {
            Log.e(""DEBUG"", ""Geofence Transition enter or exit"");
            // Get the geofences that were triggered. A single event can trigger multiple geofences.
            List&lt;Geofence&gt; triggeringGeofences = geofencingEvent.getTriggeringGeofences();

            // Get the transition details as a String.
            String geofenceTransitionDetails = getGeofenceTransitionDetails(
                    this,
                    geofenceTransition,
                    triggeringGeofences
            );

            // Send notification and log the transition details.
            sendNotification(geofenceTransitionDetails);
            Log.i(TAG, geofenceTransitionDetails);
        } else {
            // Log the error.
            Log.e(TAG, getString(R.string.geofence_transition_invalid_type, geofenceTransition));
        }   
    }

    /**
     * Gets transition details and returns them as a formatted string.
     *
     * @param context               The app context.
     * @param geofenceTransition    The ID of the geofence transition.
     * @param triggeringGeofences   The geofence(s) triggered.
     * @return                      The transition details formatted as String.
     */
    private String getGeofenceTransitionDetails(
            Context context,
            int geofenceTransition,
            List&lt;Geofence&gt; triggeringGeofences) {
        Log.e(""DEBUG"", ""getGeofenceTransitionDetails"");
        String geofenceTransitionString = getTransitionString(geofenceTransition);

        // Get the Ids of each geofence that was triggered.
        ArrayList triggeringGeofencesIdsList = new ArrayList();
        for (Geofence geofence : triggeringGeofences) {
            triggeringGeofencesIdsList.add(geofence.getRequestId());
        }
        String triggeringGeofencesIdsString = TextUtils.join("", "",  triggeringGeofencesIdsList);

        return geofenceTransitionString + "": "" + triggeringGeofencesIdsString;
    }

    /**
     * Posts a notification in the notification bar when a transition is detected.
     * If the user clicks the notification, control goes to the MainActivity.
     */
    private void sendNotification(String notificationDetails) {
        // Create an explicit content Intent that starts the main Activity.
        Intent notificationIntent = new Intent(getApplicationContext(), MainActivity.class);
        Log.e(""DEBUG"", ""sendNotification"");
        // Construct a task stack.
        TaskStackBuilder stackBuilder = TaskStackBuilder.create(this);

        // Add the main Activity to the task stack as the parent.
        stackBuilder.addParentStack(MainActivity.class);

        // Push the content Intent onto the stack.
        stackBuilder.addNextIntent(notificationIntent);

        // Get a PendingIntent containing the entire back stack.
        PendingIntent notificationPendingIntent =
                stackBuilder.getPendingIntent(0, PendingIntent.FLAG_UPDATE_CURRENT);

        // Get a notification builder that's compatible with platform versions &gt;= 4
        NotificationCompat.Builder builder = new NotificationCompat.Builder(this);

        // Define the notification settings.
        builder.setSmallIcon(R.drawable.ic_launcher)
                // In a real app, you may want to use a library like Volley
                // to decode the Bitmap.
                .setLargeIcon(BitmapFactory.decodeResource(getResources(),
                        R.drawable.ic_launcher))
                .setColor(Color.RED)
                .setContentTitle(notificationDetails)
                .setContentText(getString(R.string.geofence_transition_notification_text))
                .setContentIntent(notificationPendingIntent);

        // Dismiss notification once the user touches it.
        builder.setAutoCancel(true);

        // Get an instance of the Notification manager
        NotificationManager mNotificationManager =
                (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);

        // Issue the notification
        mNotificationManager.notify(0, builder.build());
    }

    /**
     * Maps geofence transition types to their human-readable equivalents.
     *
     * @param transitionType    A transition type constant defined in Geofence
     * @return                  A String indicating the type of transition
     */
    private String getTransitionString(int transitionType) {
        Log.e(""DEBUG"", ""getTransitionString"");
        switch (transitionType) {
            case Geofence.GEOFENCE_TRANSITION_ENTER:
                return getString(R.string.geofence_transition_entered);
            case Geofence.GEOFENCE_TRANSITION_EXIT:
                return getString(R.string.geofence_transition_exited);
            default:
                return getString(R.string.unknown_geofence_transition);
        }
    }

}
</code></pre>

<p>The manifest:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;manifest xmlns:android=""http://schemas.android.com/apk/res/android""
    package=""com.example.geofence""
    android:versionCode=""1""
    android:versionName=""1.0"" &gt;

    &lt;uses-permission android:name=""android.permission.ACCESS_FINE_LOCATION""/&gt;
    &lt;uses-permission android:name=""android.permission.ACCESS_FINE_LOCATION""/&gt;
    &lt;uses-permission android:name=""android.permission.INTERNET"" /&gt;

    &lt;uses-sdk
        android:minSdkVersion=""9""
        android:targetSdkVersion=""21"" /&gt;

    &lt;application
        android:allowBackup=""true""
        android:icon=""@drawable/ic_launcher""
        android:label=""@string/app_name""
        android:theme=""@style/AppTheme"" &gt;
        &lt;meta-data android:name=""com.google.android.gms.version""
        android:value=""@integer/google_play_services_version"" /&gt;
        &lt;activity
            android:name="".MainActivity""
            android:label=""@string/app_name"" &gt;
            &lt;intent-filter&gt;
                &lt;action android:name=""android.intent.action.MAIN"" /&gt;

                &lt;category android:name=""android.intent.category.LAUNCHER"" /&gt;
            &lt;/intent-filter&gt;
        &lt;/activity&gt;
        &lt;service
            android:name="".FetchAddressIntentService""
            android:exported=""false""/&gt;
        &lt;service android:name="".GeofenceTransitionsIntentService""/&gt;
    &lt;/application&gt;

&lt;/manifest&gt;
</code></pre>
",2410994,,2410994,,2015-04-08 13:23:39,2018-07-07 13:36:11,IntentService doesn't get called in combination with PendingIntent,<android><android-pendingintent><android-geofence><android-intentservice>,1,4,1,,
Android,32310523,1,32312074,,2015,,3,4462,"<p>I have just updated my Android Studio setup to 1.3 (latest stable as of 31st of August 2015) and I need to use the latest NDK integration. My previous Android Studio version was 1.2.1 (stable as well).</p>

<p>Following <a href=""http://tools.android.com/tech-docs/new-build-system/gradle-experimental"" rel=""nofollow"">Google Migration to Gradle Experimental Guide</a> I managed to easily adapt my various gradle scripts.</p>

<p>However, Gradle Sync fails with the following error :</p>

<pre><code>Error:No such property: android for class: com.android.build.gradle.managed.ProductFlavor
</code></pre>

<p><strong>[Update 1 -> see below, error updated]</strong></p>

<p>When I attempt to <code>Make</code> the project, I obtain a little more detailed error :</p>

<pre><code>Error:(17, 1) A problem occurred configuring project ':app'.
&gt; Exception thrown while executing model rule: model.android
   &gt; No such property: android for class: com.android.build.gradle.managed.ProductFlavor
</code></pre>

<p>App refers to the main application code (with activities and other).</p>

<p>Using the feature <code>F4 &gt; Jumping to Source</code>, it opens my <code>build.gradle</code> script from my <code>app</code> project.</p>

<p>This is the content of the aforementioned script :</p>

<pre><code>apply plugin: 'com.android.model.application' // experimental

model {
    android {
        compileSdkVersion = 21
        buildToolsVersion = '22.0.1'

        defaultConfig.with {
            applicationId = ""company.com.myapplication""
            minSdkVersion.apiLevel = 10
            targetSdkVersion.apiLevel = 21
            versionCode = 1
            versionName = ""1.0""

            // NDK
            android.ndk {
                moduleName = ""MyAwesomeJNILib""
                cFlags ""-std=c99""
            }
        }
        android.buildTypes {
            release {
                minifyEnabled = false
                proguardFiles += file('proguard-rules.pro')
            }
        }
        android.productFlavors {
            // for detailed abiFilter descriptions, refer to ""Supported ABIs"" @
            // https://developer.android.com/ndk/guides/abis.html#sa
            create(""arm"") {
                ndk.abiFilters += ""armeabi""
            }
            create(""arm7"") {
                ndk.abiFilters += ""armeabi-v7a""
            }
            create(""arm8"") {
                ndk.abiFilters += ""arm64-v8a""
            }
            create(""x86"") {
                ndk.abiFilters += ""x86""
            }
            create(""x86-64"") {
                ndk.abiFilters += ""x86_64""
            }
            create(""mips"") {
                ndk.abiFilters += ""mips""
            }
            create(""mips-64"") {
                ndk.abiFilters += ""mips64""
            }
            // To include all cpu architectures, leaves abiFilters empty
            create(""all"")
        }

        packagingOptions {
            exclude 'LICENSE.txt'
        }
    }
}

dependencies {
    compile fileTree(include: ['*.jar'], dir: 'libs')
    compile 'com.android.support:appcompat-v7:22.2.0'
    compile 'com.google.code.gson:gson:2.3.1'
    compile 'com.squareup.okhttp:okhttp-android-support:2.4.0'
    compile project(':bluetoothmanager')
    compile 'joda-time:joda-time:2.8.1'
    // Units Testing
    //androidTestCompile 'junit:junit:4.12'
    compile 'junit:junit:4.12' // experimental
}
</code></pre>

<p>As you can see, there is nothing very fancy here.
But you might notice there is some unit testing setup : </p>

<pre><code>// Units Testing
//androidTestCompile 'junit:junit:4.12'
compile 'junit:junit:4.12' // experimental
</code></pre>

<p><code>androidTestCompile</code> could not be resolved while migrating to <strong>GradleExperimental</strong> so I modified following a solution I can no longer find (sorry) where I would simple put <code>compile</code> in stead of <code>androidTestCompile</code>.
This was the error : </p>

<pre><code>Error:(71, 0) Gradle DSL method not found: 'androidTestCompile()'
</code></pre>

<p>I tried to compare one of Google's NDK sample (<code>hello-jini</code> for example) as provided in the aforemention guide and <a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow"">available here</a>.</p>

<p>Except the <code>packagingOptions</code> I could not find any differences that would be responsible for my awry. I tried to remove <code>packagingOptions</code> but that did not make a single change at all.</p>

<p><strong>[UPDATE 1]</strong></p>

<p>You will notice that the more detailed error message states that it's in line #17 which is where I declare my <strong>native build settings</strong>.
I fixed the error which was <code>cFlags</code> must be changed to <code>CFlags</code> and I added the <code>=</code> as required by the new version of Gradle.
This did help, the error does not appear anymore but changed for : </p>

<pre><code>Error:No such property: android for class: com.android.build.gradle.managed.AndroidConfig
</code></pre>
",3535408,,2016562,,2015-10-05 20:52:23,2016-08-19 11:13:45,Issue when migrating to Gradle Experimental 2.5 : no such method AndroidConfig,<android><android-studio><gradle><android-ndk><gradle-experimental>,1,0,1,,
Android,44911596,1,,,2017,,3,308,"<p>The official documentation is incredibly unclear when it comes how youre supposed to be handling in-app billing.</p>

<p>For starters there are two versions of TrivialDrive:</p>

<p>github.com/googlesamples/android-play-billing</p>

<p>And then from the official docs:</p>

<p>developer.android.com/google/play/billing/billing_integrate.html </p>

<p>(here it says to import the IInAppBillingService.aidl file and use ServiceConnections / IInAppBillingService)</p>

<p>developer.android.com/training/play-billing-library/preparing-iab-app.html </p>

<p>(here it says to look at Trivial Drive v2, and also use compile 'com.android.billingclient:billing:dp-1' instead of importing the .aidl file, and to use BillingManager)</p>

<p>developer.android.com/training/in-app-billing/preparing-iab-app.html </p>

<p>(here it says to look at Trivial Drive, import the .aidl file, and use the IabHelper + associated listeners for everything instead)</p>

<p>Can anyone clarify why such a crucial part of the Android platform has different explanations for things all over the place? What's the intended / latest framework we need to be using? Which pieces are outdated? Which TrivialDrive should I be referencing?</p>
",8251758,,,,,2017-07-05 13:07:05,How do we implement in-app purchasing when the documentation is so inconsistent?,<android><in-app-purchase><google-play-services><in-app-billing><android-billing>,1,0,1,,
Android,41766196,1,,,2017,,3,665,"<p>Face Tracker app based on <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker"" rel=""nofollow noreferrer"">Google Vision Face Tracker</a>. By default, Face Tracker use rear/back camera, but I want to detect faces with front camera.</p>

<p>This is the code for CameraSourcePreview that google vision provide:</p>

<pre><code>package com.google.android.gms.samples.vision.face.facetracker.ui.camera;

import android.content.Context;
import android.content.res.Configuration;
import android.util.AttributeSet;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.ViewGroup;

import com.google.android.gms.common.images.Size;
import com.google.android.gms.vision.CameraSource;

import java.io.IOException;

public class CameraSourcePreview extends ViewGroup {
    private static final String TAG = ""CameraSourcePreview"";

    private Context mContext;
    private SurfaceView mSurfaceView;
    private boolean mStartRequested;
    private boolean mSurfaceAvailable;
    private CameraSource mCameraSource;

    private GraphicOverlay mOverlay;

    public CameraSourcePreview(Context context, AttributeSet attrs) {
        super(context, attrs);
        mContext = context;
        mStartRequested = false;
        mSurfaceAvailable = false;

        mSurfaceView = new SurfaceView(context);
        mSurfaceView.getHolder().addCallback(new SurfaceCallback());
        addView(mSurfaceView);
    }

    public void start(CameraSource cameraSource) throws IOException {
        if (cameraSource == null) {
            stop();
        }

        mCameraSource = cameraSource;

        if (mCameraSource != null) {
            mStartRequested = true;
            startIfReady();
        }
    }

    public void start(CameraSource cameraSource, GraphicOverlay overlay) throws IOException {
        mOverlay = overlay;
        start(cameraSource);
    }

    public void stop() {
        if (mCameraSource != null) {
            mCameraSource.stop();
        }
    }

    public void release() {
        if (mCameraSource != null) {
            mCameraSource.release();
            mCameraSource = null;
        }
    }

    private void startIfReady() throws IOException {
        if (mStartRequested &amp;&amp; mSurfaceAvailable) {
            mCameraSource.start(mSurfaceView.getHolder());
            if (mOverlay != null) {
                Size size = mCameraSource.getPreviewSize();
                int min = Math.min(size.getWidth(), size.getHeight());
                int max = Math.max(size.getWidth(), size.getHeight());
                if (isPortraitMode()) {
                    // Swap width and height sizes when in portrait, since it will be rotated by
                    // 90 degrees
                    mOverlay.setCameraInfo(min, max, mCameraSource.getCameraFacing());
                } else {
                    mOverlay.setCameraInfo(max, min, mCameraSource.getCameraFacing());
                }
                mOverlay.clear();
            }
            mStartRequested = false;
        }
    }

    private class SurfaceCallback implements SurfaceHolder.Callback {
        @Override
        public void surfaceCreated(SurfaceHolder surface) {
            mSurfaceAvailable = true;
            try {
                startIfReady();
            } catch (IOException e) {
                Log.e(TAG, ""Could not start camera source."", e);
            }
        }

        @Override
        public void surfaceDestroyed(SurfaceHolder surface) {
            mSurfaceAvailable = false;
        }

        @Override
        public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
        }
    }

    @Override
    protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
        int width = 640;
        int height = 480;
        if (mCameraSource != null) {
            Size size = mCameraSource.getPreviewSize();
            if (size != null) {
                width = size.getWidth();
                height = size.getHeight();
            }
        }

        // Swap width and height sizes when in portrait, since it will be rotated 90 degrees
        if (isPortraitMode()) {
            int tmp = width;
            width = height;
            height = tmp;
        }

        final int layoutWidth = right - left;
        final int layoutHeight = bottom - top;

        // Computes height and width for potentially doing fit width.
        int childWidth = layoutWidth;
        int childHeight = (int)(((float) layoutWidth / (float) width) * height);

        // If height is too tall using fit width, does fit height instead.
        if (childHeight &gt; layoutHeight) {
            childHeight = layoutHeight;
            childWidth = (int)(((float) layoutHeight / (float) height) * width);
        }

        for (int i = 0; i &lt; getChildCount(); ++i) {
            getChildAt(i).layout(0, 0, childWidth, childHeight);
        }

        try {
            startIfReady();
        } catch (IOException e) {
            Log.e(TAG, ""Could not start camera source."", e);
        }
    }

    private boolean isPortraitMode() {
        int orientation = mContext.getResources().getConfiguration().orientation;
        if (orientation == Configuration.ORIENTATION_LANDSCAPE) {
            return false;
        }
        if (orientation == Configuration.ORIENTATION_PORTRAIT) {
            return true;
        }

        Log.d(TAG, ""isPortraitMode returning false by default"");
        return false;
    }
}
</code></pre>

<p>I call camera source with this method:</p>

<pre><code>private void startCameraSource() {

        // check that the device has play services available.
        int code = GoogleApiAvailability.getInstance().isGooglePlayServicesAvailable(
                getApplicationContext());
        if (code != ConnectionResult.SUCCESS) {
            Dialog dlg =
                    GoogleApiAvailability.getInstance().getErrorDialog(this, code, RC_HANDLE_GMS);
            dlg.show();
        }

        if (mCameraSource != null) {
            try {
                mPreview.start(mCameraSource, mGraphicOverlay);
            } catch (IOException e) {
                Log.e(TAG, ""Unable to start camera source."", e);
                mCameraSource.release();
                mCameraSource = null;
            }
        }
    }
</code></pre>

<p>Face Tracker front camera still too dark compare with default phone camera app.</p>

<p>How to brighten front camera in face tracker google vision? Is it related with surface view?</p>

<pre><code>&lt;com.google.android.gms.samples.vision.face.facetracker.ui.camera.CameraSourcePreview
    android:id=""@+id/preview""
    android:layout_width=""match_parent""
    android:layout_height=""0dp""
    android:layout_weight=""1.00""
    android:weightSum=""1""&gt;

&lt;com.google.android.gms.samples.vision.face.facetracker.ui.camera.GraphicOverlay
    android:id=""@+id/faceOverlay""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""
    android:layout_weight=""0.79"" /&gt;

&lt;/com.google.android.gms.samples.vision.face.facetracker.ui.camera.CameraSourcePreview&gt;
</code></pre>
",4670082,,4670082,,2017-01-20 14:47:13,2018-07-08 7:13:28,Face Tracker CameraSource Android: How to brighten front camera quality?,<android><android-studio><camera><google-vision><front-camera>,1,0,1,,
Android,41221284,1,,,2016,,3,3425,"<p>I try to change the aspect ratio of the <a href=""https://developer.android.com/reference/android/hardware/camera2/package-summary.html"" rel=""nofollow noreferrer"">Camera2</a> preview but I fail :-(</p>

<p>For cropping I have to use the <a href=""https://developer.android.com/reference/android/hardware/camera2/CaptureRequest.html#SCALER_CROP_REGION"" rel=""nofollow noreferrer"">SCALER_CROP_REGION</a> but I don't get it working.</p>

<p>I used the <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow noreferrer"">android-Camera2Video</a> example from Google for my tests.</p>

<p>In the <a href=""https://github.com/googlesamples/android-Camera2Video/blob/master/Application/src/main/java/com/example/android/camera2video/Camera2VideoFragment.java#L416"" rel=""nofollow noreferrer"">openCamera</a> method I added the following line:</p>

<pre><code>mSensorSize = characteristics.get(CameraCharacteristics.SENSOR_INFO_ACTIVE_ARRAY_SIZE);
</code></pre>

<p>And in <a href=""https://github.com/googlesamples/android-Camera2Video/blob/master/Application/src/main/java/com/example/android/camera2video/Camera2VideoFragment.java#L486"" rel=""nofollow noreferrer"">startPreview</a> I added this:</p>

<pre><code>final int centerX = mSensorSize.width() / 2;
final int centerY = mSensorSize.height() / 2;
final int cropSize = Math.min(mSensorSize.width(), mSensorSize.height());
final Rect crop = new Rect(centerY - cropSize / 2,
                           centerX - cropSize / 2,
                           cropSize,
                           cropSize);
mPreviewBuilder.set(CaptureRequest.SCALER_CROP_REGION, crop);
</code></pre>

<p>I should get a preview with a 1:1 ratio but it is 3:4 :-(</p>

<p>What did I wrong?</p>
",1016472,,,,,2017-07-14 6:39:12,How to change aspect ratio of camera2 preview?,<android><android-camera2>,1,1,1,,
Android,50362528,1,50389268,,2018,,3,594,"<p>I am working with multi feature android application with instant app and wear app.Here i am able to <strong><em>successfully run my application</em></strong> but getting following error during <strong><em>building APK or rebuild projects</em></strong>. </p>

<pre><code>java.lang.IllegalStateException: Expected configuration ':module1:debugFeatureCompileClasspath' to contain exactly one file, however, it contains 2 files.
at org.gradle.api.internal.file.AbstractFileCollection.getSingleFile(AbstractFileCollection.java:62)
at com.android.build.gradle.tasks.MergeManifests.doFullTaskAction(MergeManifests.java:116)
at com.android.build.gradle.internal.tasks.IncrementalTask.taskAction(IncrementalTask.java:106)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:498)
at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:73)
</code></pre>

<p>My project has 3-4 module and one base module projects. 
I have already integrated all setup for multi feature instant app as per sample provide by google. <a href=""https://github.com/googlesamples/android-instant-apps/tree/master/multi-feature-module"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-instant-apps/tree/master/multi-feature-module</a></p>

<p>I have one module(<strong>apimodule</strong>) where i have added all libraries and API dependencies. Following is my project dependencies structure.</p>

<ol>
<li>AppModule</li>
</ol>

<p>Added all module as implementation</p>

<pre><code>implementation project(':base')
implementation project(':module1')
implementation project(':module2')
implementation project(':module3')
wearApp project(':wear')
</code></pre>

<ol start=""2"">
<li>BaseModule ( Also added <code>application project(':app')</code> )</li>
</ol>

<p>Added <code>baseFeature true</code> in gradle</p>

<pre><code>feature project(':module1')
feature project(':module2')
feature project(':module3')
api project(':apimodule')
</code></pre>

<p>3. apimodule </p>

<p>Added <code>baseFeature true</code> in gradle</p>

<p>Here is my one module1 gradle file. </p>

<pre><code>apply plugin: 'com.android.feature'

apply plugin: 'kotlin-android'

apply plugin: 'kotlin-android-extensions'

android {
    compileSdkVersion 26
    defaultConfig {
        minSdkVersion 23
        targetSdkVersion 26
        versionCode 1
        versionName ""1.0""
        testInstrumentationRunner ""android.support.test.runner.AndroidJUnitRunner""
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
}

dependencies {
    implementation fileTree(dir: 'libs', include: ['*.jar'])
    implementation""org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version""
    implementation project(':base')
    testImplementation 'junit:junit:4.12'
    androidTestImplementation 'com.android.support.test:runner:1.0.1'
    androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.1'

}
</code></pre>
",2553048,,2553048,,2018-05-17 3:57:53,2018-12-22 9:06:36,"IllegalStateException: Expected configuration ':module:debugFeatureCompileClasspath' to contain exactly one file, however, it contains 2 files",<android><kotlin><android-instant-apps><android-wear-2.0>,1,9,1,,
Android,49688616,1,49689440,,2018,,3,870,"<p>I'm new to android enterprise development world, and I have some misconception of how different pieces in the android enterprise ecosystem relate to one another. Let me explain. </p>

<p>The solution that I'm trying to achieve is being able to lock the device into kiosk mode both remotely, and also based on some business logic do it even when the user is offline. I started investigating EMM and particularly <a href=""https://developers.google.com/android/management/"" rel=""nofollow noreferrer"">Android Management API</a> to solve the problem. I was able to lock the device remotely into kiosk mode using the API. The steps that I take is following</p>

<ol>
<li>Factory reset the android device</li>
<li>Reach the screen where user needs to enter their credentials</li>
<li>Instead of real credentials I enter afw#setup</li>
<li>Device enters into work profile mode and android device policy is being installed</li>
<li>I create an enrollment token in the management API (the steps for that are described in the <a href=""https://developers.google.com/android/management/quickstart"" rel=""nofollow noreferrer"">quick start guide</a></li>
<li>I generate a QR code and scan it using the factory reset device as soon as I'm prompted</li>
<li>The device will be linked to the enterprise, and I'm successfully being able to control it and put the device into kiosk mode by creating special kiosk mode policy and patching the device to comply to that policy using a combination of <a href=""https://developers.google.com/android/management/reference/rest/v1/enterprises.policies/patch"" rel=""nofollow noreferrer"">patch policy</a> (to create a policy) and <a href=""https://developers.google.com/android/management/reference/rest/v1/enterprises.devices/patch"" rel=""nofollow noreferrer"">patch device</a> APIs.</li>
</ol>

<p>The next step was finding out a way to lock the device into kiosk mode even when user is offline. I assume that it's going to happen by creating an android enterprise custom DPC (device policy controller) application. I assumed that by reading the <a href=""https://developer.android.com/work/cosu.html#create-dpc"" rel=""nofollow noreferrer"">following</a> documentation, where one of the 3 ways of provisioning ""single purpose"" devices is creating a custom DPC application. Here's another quote from different <a href=""https://developers.google.com/android/work/dpc/build-dpc"" rel=""nofollow noreferrer"">url</a></p>

<blockquote>
  <p>As an EMM, you develop a DPC app that can be used by your customers in conjunction with your EMM console and server. Your customer deploys the DPC to the user devices that they manage. The DPC acts as the bridge between your EMM console (and server) and the device. An admin uses the EMM console to perform a range of tasks, including configuring device settings and apps.</p>
</blockquote>

<p>And here's where all of my confusions arise. 
First question that naturally arises - <strong>was the author of the previous quote referring to EMM management API when talking about EMM console and server?</strong> </p>

<p>Further, there are more questions that I couldn't find an answer to</p>

<p>In the <a href=""https://developers.google.com/android/work/dpc/build-dpc"" rel=""nofollow noreferrer"">guide</a> for creating a custom DPC there are no mentions about what role EMM API will play in custom DPC, and consequently there's no place I could find that describes <strong>how exactly the custom DPC is a bridge between the EMM console (presumably EMM API) and the device?</strong></p>

<p>Then, let's assume I've developed a custom DPC application and uploaded it to google play alpha channel. <strong>The <a href=""https://developers.google.com/android/work/prov-devices#set_up_device_owner_mode_afw_accts"" rel=""nofollow noreferrer"">documentation</a> states that during the setup process instead of entering afw#setup I should enter afw#DPC_NAME, and I have no idea how to generate that name?</strong> Is it the bundle ID of the DPC app? Or perhaps it's being set somewhere in google settings? For instance, google has developed the <a href=""https://github.com/googlesamples/android-testdpc"" rel=""nofollow noreferrer"">TestDPC</a> application to test enterprise solutions, and I was able to go through the steps I described above and enter afw#testdpc and successfully scanned the QR code in the git readme file and I saw that TestDPC was installed and device was launched into work profile mode. So, I assume somehow I need to register my own ""testdpc"" and enter afw#my_dpc instead.</p>

<p>Basically I have different pieces working stand alone and I want to form a broader picture in my mind to understand how to stitch those pieces together.</p>

<p>Thanks for your answers </p>

<p><strong>UPDATE 1:</strong></p>

<p>Today I found a way of turning custom DPC into device owner without going through NFC or other provisioning process. This is particularly useful for development purposes. Follow <a href=""http://florent-dupont.blogspot.am/2015/01/android-shell-command-dpm-device-policy.html"" rel=""nofollow noreferrer"">this link</a> for instructions.This is both huge time saver, and also, in my case, we still are waiting for google's approval, but finally we can start testing some stuff without the need of custom provisioning process.</p>
",737972,,737972,,2018-04-25 17:05:35,2018-04-25 17:05:35,How does designing custom android DPC app relate to Android management API?,<android><kiosk-mode><cosu><android-enterprise><android-management-api>,1,0,1,,
Android,34545676,1,34579698,,2015,,3,1065,"<p>I've been busy updating the <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""nofollow noreferrer"">universal Android Mediaplayer</a> to use the Compat libraries to get it working on Android versions lower than lollipop. </p>

<p>This was a process of replacing most classes by the compat variants of them. You can see the commit with all my changes <a href=""https://github.com/Marc1510/android-UniversalMusicPlayer/commit/3626d74a3013f17d779940a2235e9130b36ec637"" rel=""nofollow noreferrer"">here</a>.</p>

<p>The thing I don't like right now is that the 'browse' function has dissapeard on the Wear device. This function can be seen in the images below.</p>

<p><a href=""https://i.stack.imgur.com/SGwQO.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/SGwQO.png"" alt=""enter image description here""></a> <a href=""https://i.stack.imgur.com/KseZi.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/KseZi.png"" alt=""enter image description here""></a></p>

<p>I just made screenshots of this function with the latest version of the Universal Music Player. When I updated the most classes to their compat variants this function dissapeard. </p>

<p>I don't know if I forgot to update something, if the function should be activated somehow or any other reason why it doesn't work.</p>

<p>Is there any reason for this?</p>
",1887795,,,,,2016-03-03 22:49:19,Updating MediaBrowserService to MediaBrowserServiceCompat removes 'browse' function,<android><android-mediaplayer><android-support-library><appcompat><android-wear-notification>,1,0,1,,
Android,37597252,1,,,2016,,3,437,"<p>Google has launched a project on Github in order to demonstrate different architecture implementations.</p>

<p><a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp/"" rel=""nofollow noreferrer"">todo-mvp</a></p>

<p>In its' simple MVP implementation's model layer, which applies the Repository pattern, it simply contains one POJO(Task) and we already have a bloated model layer here.</p>

<p><a href=""https://i.stack.imgur.com/i8fEi.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/i8fEi.jpg"" width=""300""/></a></p>

<p>It's quite common to have dozens of POJOs in a <strong>REAL</strong> project. And it's easy to imagine how big the repository would grow. </p>

<p>Whenever I want to add or amend something, like adding a Owner(of a Task), I have to add so many lines of code in each one of the classes in the model layer. No need to mention that we have to write so many hard-coded SQL statements. </p>

<p>Is there a better way to avoid these things?</p>
",2290191,,2290191,,2016-06-02 16:37:58,2016-06-07 17:05:38,How should we deal with the growing Repository in a mvp project's model layer?,<android><repository-pattern><mvp>,1,1,,,
Android,46689217,1,49928687,,2017,,3,243,"<p>I have a little problem with designing DI architecture of my app. I am using Architecture Components ViewModels and I was inspired how to provide ViewModels via Dagger in their own GitHub <a href=""https://github.com/googlesamples/android-architecture-components/blob/388a10dd5a814ba6aaa9bf8dee8e7c1c5840b3a5/GithubBrowserSample/app/src/main/java/com/android/example/github/di/ViewModelModule.java"" rel=""nofollow noreferrer"">repository</a>   .. I want to create scoped component/module for example for product detail that would provide ViewModels/Repositories and other stuff dependent on that single product.. problem is that all ViewModels are provided from the same ViewModelModule as in given example. But ProductViewModel needs ProductRepository that is provided from scoped subcomponent ProductModule. And apparently thats not possible because Dagger throws error at build time that I need to provide ProductRepository with @Provides annotation. </p>

<p>Ok so I thought that I would provide ProductViewModel in my ProductModule but then it crashes at runtime, because provider of my ViewModel can't be found in this <a href=""https://github.com/googlesamples/android-architecture-components/blob/388a10dd5a814ba6aaa9bf8dee8e7c1c5840b3a5/GithubBrowserSample/app/src/main/java/com/android/example/github/viewmodel/GithubViewModelFactory.java#L33"" rel=""nofollow noreferrer"">method</a>  </p>

<p>Is it possible at all to have this architecture or do I need to redesign it to not use the same method as Google in their sample?</p>
",1478296,,,,,2018-04-19 19:20:06,Dagger 2 bindings delegation with subcomponents,<android><mvvm><dependency-injection><dagger-2>,1,12,,,
Android,48604251,1,,,2018,,3,2084,"<p>Google says that is not possible to observe a LiveData from a ViewModel:</p>

<blockquote>
  <p>[...] However ViewModel objects must never observe changes to
  lifecycle-aware observables, such as LiveData objects.[...]</p>
</blockquote>

<p>And I would handle the <code>repo.login()</code> result in the ViewModel and notify the UI thought the two <a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java"" rel=""nofollow noreferrer"">SingleLiveEvent</a>s, is it possible?</p>

<pre><code>class Repository {
    // .... //
    fun login(user:String, password:String): LiveData&lt;Status&gt; { /* ... */ }
}

class LoginViewModel : ViewModel() {

    @Inject
    lateinit var repo: Repository

    private var auth = MutableLiveData&lt;User&gt;()
    private var showErrorEvent = SingleLiveEvent&lt;String&gt;()
    private var showSuccessEvent = SingleLiveEvent&lt;String&gt;()

    // Called from UI
    fun performLogin(user:User){
        repo.login(user.name, user.password)
        // We can't observe the result here 
        // and update error/success events
    }

    // Called from UI
    fun getErrorEvent() = showErrorEvent

    // Called from UI
    fun getSuccessEvent() = showSuccessEvent

}
</code></pre>
",3550413,,,,,2018-02-07 20:13:28,Observing repository LiveData from ViewModel and notify UI,<android><mvvm><kotlin><android-architecture-components>,1,2,,,
Android,33472447,1,36019839,,2015,,3,2584,"<p>I am trying to implement fingerprint introduced in Android-6.0-marshmallow, but face an issue.<br>
The issue being that when I am try to run the sample code provided here </p>

<p><a href=""https://github.com/googlesamples/android-FingerprintDialog"" rel=""nofollow"">android-FingerprintDialog</a></p>

<p>it shows a ""Too many attempts"" error more than once.<br>
To reproduce the issue, the steps are</p>

<p>1 - Click on purchase button<br>
2 - Provide wrong touch id until the ""too many attempts"" error occur<br>
3 - Provide password<br>
4 - Again click on purchase button.  </p>

<p>Now it again shows the ""Too many attempts"" error and asks for a password (which is not the supposed behaviour)</p>

<p>Please tell me how to fix this issue. </p>
",2938319,,2649012,,2015-11-02 7:54:37,2016-03-15 18:59:08,Fingerprint: too many attempts issue,<android><fingerprint><android-6.0-marshmallow>,1,0,,,
Android,52454186,1,,,2018,,3,157,"<p>I have a problem when apply <a href=""https://developer.android.com/topic/libraries/architecture/paging/"" rel=""nofollow noreferrer"">Paging Library</a> to my project which is using (<a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-dagger/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/data/source"" rel=""nofollow noreferrer"">Repository Pattern</a>)</p>

<p>In my repository, I already have <code>UsersDataSource</code>, <code>UsersRepository</code>, <code>UserLocalDataSource</code>, <code>UserRemoteDataSource</code></p>

<p>To use <a href=""https://developer.android.com/topic/libraries/architecture/paging/"" rel=""nofollow noreferrer"">Paging Library</a>, I see we need to create class like <code>...DataSource extend ItemKeyedDataSource</code> and <code>...DataSourceFactory extend DataSource.Factory</code> (I am follow tutorial <a href=""https://medium.com/@Ahmed.AbdElmeged/android-paging-library-with-rxjava-and-rest-api-e5c229fd70ba"" rel=""nofollow noreferrer"">here</a> to learn <a href=""https://developer.android.com/topic/libraries/architecture/paging/"" rel=""nofollow noreferrer"">Paging library</a>).<br>
It <strong>conflict</strong> with my current repository class.</p>

<p>Is there any good way to apply <a href=""https://developer.android.com/topic/libraries/architecture/paging/"" rel=""nofollow noreferrer"">Paging Library</a> with <code>Repository</code> pattern.<br>
I just learn paging library. Any help or suggestion would be great appreciated.</p>
",5381331,,,,,2018-10-17 11:11:25,Repository pattern with paging library,<android><android-paging-library>,1,0,,,
Android,49590960,1,49592891,,2018,,3,2004,"<p>I was wondering, what are some common practice, to insert (or delete) single <code>List</code> item from <code>LiveData</code>?</p>

<p>Currently, here's what I plan to do.</p>

<p>I have the following <code>LiveData</code></p>

<pre><code>LiveData&lt;List&lt;Animal&gt;&gt; animalListLiveData;
</code></pre>

<p>This is how I plan to observe it.</p>

<pre><code>animalListLiveData.observe(this, animalList -&gt; {

    if (listView.getAdapter() == null) {
        // First time.

        ArrayAdapter&lt;String&gt; adapter = new ArrayAdapter&lt;&gt;(..., animalList);
        // Assign adapter to ListView
        listView.setAdapter(adapter);

    } else {
        // Update operation.

        DiffUtil.DiffResult diffResult = DiffUtil.calculateDiff(new MyDiffUtilCallback(animalList, oldAnimalList));
        diffResult.dispatchUpdatesTo(listView.getAdapter());
    }

    oldAnimalList.clear(); 
    oldAnimalList.addAll(animalList);
});
</code></pre>

<p>This is how I'm going to insert a single item into <code>LiveData</code></p>

<pre><code>animalListLiveData.getValue().add(newAnimal);
// Inform observer.
animalListLiveData.setValue(animalListLiveData.getValue())
</code></pre>

<p>I feel that my method is overkill for such a simple update operation. If the <code>List</code> is huge, <code>DiffUtil</code> needs to scan through the entire <code>List</code>.</p>

<p>Other developers have the same feeling as I do. <a href=""https://github.com/googlesamples/android-architecture-components/issues/135"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components/issues/135</a></p>

<p>No good solution suggested so far.</p>

<p>I was wondering, do you discover any good practice (pattern), to insert (or delete) single <code>List</code> item from <code>LiveData</code>?</p>
",72437,,,,,2018-03-31 22:07:19,Insert (or delete) single List item from LiveData,<android><android-architecture-components><android-livedata>,1,0,,,
Android,47469398,1,,,2017,,3,2820,"<p>I am now using the recent Android Architecture Components and in particular the ViewModel and LiveData.</p>

<p>I am in a case where the <a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java"" rel=""nofollow noreferrer"">SingleLiveEvent</a> suggested <a href=""https://medium.com/google-developers/viewmodels-and-livedata-patterns-antipatterns-21efaef74a54"" rel=""nofollow noreferrer"">here</a> is relevant, i.e. I am returning an error and I want to display an alert only once. Before emitting a value to the Activity, I need to map my error to a more appropriate object for the view. I am using a Transformation for this.</p>

<p>So in the end, I have a ViewModel that looks like:</p>

<pre><code>public LiveData&lt;ViewState&gt; getStateForView() {
    final LiveData&lt;NetworkState&gt; liveState = myRepository.getState();
    return Transformations.map(liveState, myMapper::map);
}
</code></pre>

<p>Where in my repository I am using a SingleLiveEvent:</p>

<pre><code>public LiveData&lt;NetworkState&gt; getState() {
    myNetworkState = new SingleLiveEvent&lt;&gt;();
    return myNetworkState;
}
</code></pre>

<p>This works fairly well but I notice that my event is not propagated all the time when orientation changes multiple times. When debugging, I have noticed that there is no symmetry between the observer registration and removal: </p>

<ul>
<li>at registration time the observer of my SingleLiveEvent is the anonymous Observer class in my SingleLiveEvent</li>
</ul>

<p><a href=""https://i.stack.imgur.com/nbqkd.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/nbqkd.png"" alt=""debug of registration""></a></p>

<ul>
<li>at removal time the observer to be removed from my SingleLiveEvent is a MediatorLiveData (which is actually observing the earlier anonymous class in my SingleLiveEvent)</li>
</ul>

<p><a href=""https://i.stack.imgur.com/K8SJp.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/K8SJp.png"" alt=""debug of removal""></a></p>

<p>What happens is that my initial observer is never removed from the observers of the SingleLiveEvent (so if orientation changes multiple times my SingleLiveEvent has multiple observers).</p>

<p>I cannot figure out why this is not the same observer at removal time. When reproducing it without a Transformation step, there is no such issue.</p>

<p>Does anyone have a hint about this behaviour? Are SingleLiveEvent (not part of the framework) and Transformations not supposed to work together?</p>
",1181162,,,,,2017-11-27 16:49:37,LiveData - Using SingleLiveEvent with Transformations,<android><mvvm><android-architecture-components><android-livedata>,1,1,,,
Android,31884355,1,31918816,,2015,,3,4220,"<p>This is darn strange. I have an <code>Activity</code> with a <code>ViewPager</code> that hosts a couple of of <code>Fragment</code>s, the first one has a <code>RadioButton</code> with the id  <code>android:id=""@+id/backjudgeRadionButton""</code>. </p>

<p>I have an Espresso test that looks like this: </p>

<pre><code>import android.test.ActivityInstrumentationTestCase2;

import model.GameSetup;
import ui.SetupActivity;
import weigl.fm.refwatch.R;

import static android.support.test.espresso.Espresso.onView;
import static android.support.test.espresso.action.ViewActions.click;
import static android.support.test.espresso.matcher.ViewMatchers.withText;

/**
 * Created by asco on 8/7/15.
 */
public class SetupActivityEspressoTest extends ActivityInstrumentationTestCase2&lt;SetupActivity&gt; {


    public SetupActivityEspressoTest() {
        super(SetupActivity.class);
    }


    @Override
    protected void setUp() throws Exception {
        super.setUp();
        getActivity();
    }

    public void testUserRoleIsSet() {


        onView(withId(R.id.backjudgeRadionButton)).perform(click());

        assertEquals(GameSetup.UserRole.backjudge, getActivity().getGameSetup().getUserRole());

    }

}
</code></pre>

<p><strong>When Espresso is imported in my <code>build.gradle</code> via</strong></p>

<pre><code>compile('com.android.support.test.espresso:espresso-core:2.2') {
    exclude module: 'support-annotations'
}

compile('com.android.support.test:runner:0.3') {
    exclude module: 'support-annotations'
}
compile('com.android.support.test.espresso:espresso-contrib:2.2') {
    exclude module: 'support-annotations'
}
</code></pre>

<p><strong>The test works fine.</strong> </p>

<p><strong>When I use the intended variant of importing dependencies for instrumentation tests:</strong> </p>

<pre><code>androidTestCompile('com.android.support.test.espresso:espresso-core:2.2') {
    exclude module: 'support-annotations'
}

androidTestCompile('com.android.support.test:runner:0.3') {
    exclude module: 'support-annotations'
}
androidTestCompile('com.android.support.test.espresso:espresso-contrib:2.2') {
    exclude module: 'support-annotations'
}
</code></pre>

<p><strong>with <code>androidTestCompile</code> instead of <code>compile</code> the test fails because the View with the provided id is not found:</strong> </p>

<pre><code>Running tests
Test running started
android.support.test.espresso.NoMatchingViewException: No views in hierarchy found matching: with string from resource id: &lt;2131230756&gt;

View Hierarchy:
+&gt;DecorView{id=-1, visibility=VISIBLE, width=280, height=280, has-focus=true, has-focusable=true, has-window-focus=true, is-clickable=false, is-enabled=true, is-focused=false, is-focusable=false, is-layout-requested=false, is-selected=false, root-is-layout-requested=false, has-input-connection=false, x=0.0, y=0.0, child-count=1}
|
+-&gt;LinearLayout{id=-1, visibility=VISIBLE, width=280, height=280, has-focus=true, has-focusable=true, has-window-focus=true, is-clickable=false, is-enabled=true, is-focused=false, is-focusable=false, is-layout-requested=false, is-selected=false, root-is-layout-requested=false, has-input-connection=false, x=0.0, y=0.0, child-count=2}
|
+--&gt;ViewStub{id=16909171, visibility=GONE, width=0, height=0, has-focus=false, has-focusable=false, has-window-focus=true, is-clickable=false, is-enabled=true, is-focused=false, is-focusable=false, is-layout-requested=true, is-selected=false, root-is-layout-requested=false, has-input-connection=false, x=0.0, y=0.0}
|
+--&gt;FrameLayout{id=16908290, res-name=content, visibility=VISIBLE, width=280, height=280, has-focus=true, has-focusable=true, has-window-focus=true, is-clickable=false, is-enabled=true, is-focused=false, is-focusable=false, is-layout-requested=false, is-selected=false, root-is-layout-requested=false, has-input-connection=false, x=0.0, y=0.0, child-count=1}
|
+---&gt;LinearLayout{id=-1, visibility=VISIBLE, width=280, height=280, has-focus=true, has-focusable=true, has-window-focus=true, is-clickable=false, is-enabled=true, is-focused=false, is-focusable=false, is-layout-requested=false, is-selected=false, root-is-layout-requested=false, has-input-connection=false, x=0.0, y=0.0, child-count=1}
|
+----&gt;ViewPager{id=2131558442, res-name=viewPager, visibility=VISIBLE, width=280, height=280, has-focus=true, has-focusable=true, has-window-focus=true, is-clickable=false, is-enabled=true, is-focused=true, is-focusable=true, is-layout-requested=false, is-selected=false, root-is-layout-requested=false, has-input-connection=false, x=0.0, y=0.0, child-count=0}
|
at dalvik.system.VMStack.getThreadStackTrace(Native Method)
at java.lang.Thread.getStackTrace(Thread.java:580)
at android.support.test.espresso.base.DefaultFailureHandler.getUserFriendlyError(DefaultFailureHandler.java:82)
at android.support.test.espresso.base.DefaultFailureHandler.handle(DefaultFailureHandler.java:53)
at android.support.test.espresso.ViewInteraction.runSynchronouslyOnUiThread(ViewInteraction.java:184)
at android.support.test.espresso.ViewInteraction.doPerform(ViewInteraction.java:115)
at android.support.test.espresso.ViewInteraction.perform(ViewInteraction.java:87)
at SetupActivityEspressoTest.testUserRoleIsSet(SetupActivityEspressoTest.java:30)
at java.lang.reflect.Method.invoke(Native Method)
at java.lang.reflect.Method.invoke(Method.java:372)
</code></pre>

<p>It seems like Espresso only checks the Views in the Activity's layout, not the ones provided by the ViewPager. </p>

<p>a. How comes my test works when using <code>compile</code> instead of <code>androidTestCompile</code>?</p>

<p>b. Is Espresso even supposed to find <code>View</code>s within <code>Fragments</code> inside a <code>ViewPager</code>?</p>

<p><strong>EDIT:</strong> 
This is the second variant of the espresso test that I tried, taken from <a href=""https://github.com/googlesamples/android-testing-templates"" rel=""nofollow"">the new Android testing template</a>: </p>

<pre><code>@RunWith(AndroidJUnit4.class)
@LargeTest
public class SetupActivityTest {


    @Rule
    public ActivityTestRule&lt;SetupActivity&gt; mActivityRule =
            new ActivityTestRule&lt;&gt;(SetupActivity.class);

    @Test
    public void findViewPerformActionAndCheckAssertion() {
        // Find Button and Click on it
        onView(withId(R.id.backjudgeRadionButton)).perform(click());

    }

}
</code></pre>

<p>It shows the same effect. </p>

<p>This is all happening inside a <code>wear</code> module if that matters. </p>

<p><strong>EDIT2:</strong> You can have a look at the whole project <a href=""https://github.com/asco33/RefWatch/tree/espresso2"" rel=""nofollow"">on GitHub</a>. </p>
",804967,,804967,,2015-08-10 7:35:25,2015-08-10 11:51:40,Espresso won't find View when included with androidTestCompile,<android><android-gradle><android-espresso>,1,8,,,
Android,51757164,1,51762972,,2018,,3,2313,"<p>I created live data which emits a single event as in this <a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java"" rel=""nofollow noreferrer"">example</a>.</p>

<p>My question is next: 
How to notify only last subscribed observer when the value in the LiveData changes?</p>

<p>What comes to my mind is to store observers in the linked list in SingleLiveData class and then to call <code>super.observe</code> only if a passed observer is the same as the last element of the list. </p>

<p>I'm not sure if this is the best approach. </p>

<p>I want to use this mechanism to propagate FAB click events from activity to the fragments which are shown inside of the ViewPager. Fragments are dynamically added to view pager adapter, so let's say that we know the order of the fragments.</p>
",3609514,,2978334,,2018-08-09 10:06:08,2018-08-09 10:06:08,How to create LiveData which emits a single event and notifies only last subscribed observer?,<android><android-architecture-components><android-jetpack><android-livedata>,1,6,,,
Android,29542859,1,,,2015,,3,2586,"<p>I'm trying to run the Google Place Code Sample, but I am not able to do it. </p>

<p>I am receiving error messages like:</p>

<blockquote>
  <p>Error getting autocomplete prediction API call: Status{statusCode=TIMEOUT, resolution=null}</p>
</blockquote>

<p>I added my Google Map V2 ApiKey to the Manifest, and signed the app with the right certificate, so it seems that the key could be here:</p>

<pre><code>    mGoogleApiClient = new GoogleApiClient.Builder(this)
            .enableAutoManage(this, 0 /* clientId */, this)
            .addConnectionCallbacks(this)
            .addApi(Places.GEO_DATA_API)
            .build(); 
</code></pre>

<p>I am not sure what is supposed to be in the <code>clientId</code> slot, and there is not too much info out there. Just other people with the same problem but without solution.</p>

<p>By the way if somebody wants to take a look to the complete code it is here:
<a href=""https://github.com/googlesamples/android-play-places/issues/3"" rel=""nofollow"">https://github.com/googlesamples/android-play-places/issues/3</a></p>
",3891283,,1677912,,2015-10-21 20:03:12,2015-10-21 20:13:03,Autocomplete Google Places sample,<android><autocomplete><google-places-api>,1,6,,,
Android,32193244,1,,,2015,,3,1679,"<p>I have Android Studio 1.3.2, NDK r10e, gradle experimental plugin 0.2.0.  I have  cloned the <a href=""https://github.com/googlesamples/android-ndk.git"" rel=""nofollow noreferrer"">ndk samples repo</a> and carefully followed instructions for the <a href=""http://tools.android.com/tech-docs/android-ndk-preview"" rel=""nofollow noreferrer"">NDK Preview</a>, including creating a Native configuration.</p>

<p>When I select LLDB as the debugger and debug the Teapot NDK sample app (breakpoint in TeapotNativeActivity.cpp, line 393), the app runs, but breakpoint isn't hit as it should when I rotate the teapot.  Using GDB for the debugger results in the app freezing on startup.  I then have to force quit the app and press stop in the debugger window.</p>

<p>In both cases, debug controls appear (greyed out), and the variables window says, ""Connecting"", but I never see the ""Waiting for Debugger"" dialog on my device.</p>

<p>Console output using LLDB:
<a href=""https://i.stack.imgur.com/WCeue.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/WCeue.png"" alt=""enter image description here""></a></p>

<p>Console output using GDB:
<a href=""https://i.stack.imgur.com/u9BwZ.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/u9BwZ.png"" alt=""enter image description here""></a></p>

<p>Now, when I do the same thing from Android Studio 1.4 Preview 3, I now get the ""Waiting for Debugger"" dialog, but it hangs there.  It looks like the debugger never connects.</p>

<p>Console output Android Studio 1.4:
<a href=""https://i.stack.imgur.com/dy2ly.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/dy2ly.png"" alt=""enter image description here""></a></p>

<p>Is it possible to debug with AS 1.3.2 or 1.4?  What do I need to do next to get it working?</p>
",3549440,,3549440,,2015-08-24 23:38:40,2015-08-28 21:32:08,Can't debug NDK samples with Android Studio 1.3.2 on Windows,<android><c++><debugging><android-studio><android-ndk>,1,2,,,
Android,32362072,1,,,2015,,3,707,"<p>I have been using the Google Geofencing Service on Android for quite some time now and I just found out that the geofence transitions are not triggered on all devices. I've always tested with my HTC Nexus 5 and HTC Desire 320. But now I can see that the same code does not work on an Asus Zenfone 2 nor a Samsung Galaxy Tab 4.</p>

<p>Has someone successfully tested the Google Geofencing Api on a device that is not from HTC? Even the <a href=""https://github.com/googlesamples/android-play-location/tree/master/Geofencing"" rel=""nofollow"">sample project</a> is not working on these devices...</p>

<p>Note: I will not post my code, it is the same as the <a href=""https://developer.android.com/training/location/geofencing.html"" rel=""nofollow"">example from the official documentation</a>.</p>
",1084822,,4483873,,2015-09-15 15:42:20,2015-11-10 23:40:47,Why is Google Geofencing API on Android not working on all devices,<android><google-api><location><google-play-services><android-geofence>,1,0,,,
Android,51067310,1,,,2018,,3,175,"<p>I'm building a music player for Android, using these two samples (<a href=""https://github.com/googlesamples/android-MediaBrowserService"" rel=""nofollow noreferrer"">Android MediaBrowserService Sample</a> and <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""nofollow noreferrer"">Universal Music Player</a>) as examples. 
I noticed both load media information on start-up and add it to the Media Browser. Both have the complete media list available at start-up.</p>

<p>But what if I want to add media to the player queue dynamically?</p>

<p>For example, I'm using <a href=""https://developer.spotify.com/documentation/web-api/reference"" rel=""nofollow noreferrer"">Spotify's Web API</a> to retrieve a list of tracks based on the user's query. Among other things, it returns a link to a 30s preview of the track. As far as I understood, I need to create a MediaMetadata object containing this track.</p>

<p>But then, how should I add this information to the MediaBrowserService? The desired behavior is that when the user clicks on the play button for one of the tracks in the list (RecyclerView), only that track is played. Also, I'm not using the browsing components to represent content hierarchy.</p>

<p>How can I implement this behavior? Which references should I read?</p>

<p>Thanks in advance.</p>
",8594312,,-1,,2019-04-09 19:36:06,2018-12-02 2:59:06,Adding media item to MediaBrowserService,<java><android><media-player><audio-player><mediabrowserservice><android-music-player>,1,3,,,
Android,52374888,1,,,2018,,3,228,"<p>I'm trying to display normal Full HD preview in landscape orientation (1920x1080) using <code>Camera2</code>, but camera returns 1440x1080 as the highest resolution.</p>

<p>With Legacy Camera (<code>android.hardware.camera</code>) there was no such issue for the same device. What am I doing wrong?</p>

<pre><code>CameraManager manager = (CameraManager) getSystemService(Context.CAMERA_SERVICE);
cameraId = manager.getCameraIdList()[0];
CameraCharacteristics characteristics = manager.getCameraCharacteristics(cameraId);
StreamConfigurationMap map = characteristics.get(CameraCharacteristics.SCALER_STREAM_CONFIGURATION_MAP);
assert map != null;
imageDimension = map.getOutputSizes(SurfaceTexture.class)[0];

for (Size size : map.getOutputSizes(SurfaceTexture.class)) {
    Log.i(TAG, ""imageDimension "" + size);
}
</code></pre>

<p>Output:</p>

<pre><code>imageDimension 1440x1080
imageDimension 1280x960
imageDimension 1280x720
imageDimension 864x480
imageDimension 640x640
imageDimension 832x486
imageDimension 800x480
imageDimension 720x480
imageDimension 768x432
imageDimension 640x480
</code></pre>

<p>Also it seems that to correctly display preview in landscape we need a lot of headache code like:</p>

<pre><code>private void configureTransform(int viewWidth, int viewHeight) {
        Activity activity = getActivity();
        if (null == mTextureView || null == mPreviewSize || null == activity) {
            return;
        }
        int rotation = activity.getWindowManager().getDefaultDisplay().getRotation();
        Matrix matrix = new Matrix();
        RectF viewRect = new RectF(0, 0, viewWidth, viewHeight);
        RectF bufferRect = new RectF(0, 0, mPreviewSize.getHeight(), mPreviewSize.getWidth());
        float centerX = viewRect.centerX();
        float centerY = viewRect.centerY();
        if (Surface.ROTATION_90 == rotation || Surface.ROTATION_270 == rotation) {
            bufferRect.offset(centerX - bufferRect.centerX(), centerY - bufferRect.centerY());
            matrix.setRectToRect(viewRect, bufferRect, Matrix.ScaleToFit.FILL);
            float scale = Math.max(
                    (float) viewHeight / mPreviewSize.getHeight(),
                    (float) viewWidth / mPreviewSize.getWidth());
            matrix.postScale(scale, scale, centerX, centerY);
            matrix.postRotate(90 * (rotation - 2), centerX, centerY);
        } else if (Surface.ROTATION_180 == rotation) {
            matrix.postRotate(180, centerX, centerY);
        }
        mTextureView.setTransform(matrix);
    }
</code></pre>

<p>From official sample <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java#L740"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java#L740</a></p>

<p>Isn't Camera2 supposed to make things easier than legacy camera? I'm not sure...</p>

<p>Though one good thing I see: we can set many surface targets, with legacy camera we could not use <code>setPreviewDisplay</code> and <code>setPreviewTexture</code> together, but Camera2 allows many outputs</p>

<p><strong>UPDATE</strong></p>

<p>OMG!</p>

<p>Next information shocked me:</p>

<p><a href=""https://i.stack.imgur.com/ZRjJ7.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/ZRjJ7.png"" alt=""enter image description here""></a></p>

<p>p.s. I have tested on Xiaomi device</p>

<p><a href=""https://stackoverflow.com/questions/31362202/android-camera2-output-sizes"">Android Camera2 Output sizes</a></p>

<p><a href=""https://github.com/googlesamples/android-Camera2Basic/issues/113"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic/issues/113</a></p>

<p><a href=""https://github.com/googlesamples/android-Camera2Basic/issues/123"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic/issues/123</a></p>
",9766649,,9766649,,2019-03-11 8:25:00,2019-03-31 16:05:48,Camera2 1440x1080 is maximum,<android><android-camera2>,1,1,,,
Android,45692889,1,,,2017,,3,633,"<p>Following the <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">Camera 2</a> sample I've created simple camera class to capture the images. When it's okay with capturing both flash/non-flash images on any device with Android &lt; 7.0, on mine Nexus 5X with Android 7.1 the same config fire the flash only once on the preview. Pre-sequences are the next:</p>

<ul>
<li>for the preview I'm using <a href=""https://developer.android.com/reference/android/hardware/camera2/CameraDevice.html#TEMPLATE_PREVIEW"" rel=""nofollow noreferrer"">CameraDevice.TEMPLATE_PREVIEW</a> with AE mode set to <a href=""https://developer.android.com/reference/android/hardware/camera2/CameraMetadata.html#CONTROL_AE_MODE_ON_ALWAYS_FLASH"" rel=""nofollow noreferrer"">CameraMetadata.CONTROL_AE_MODE_ON_ALWAYS_FLASH</a></li>
<li>the same I use for the capture still picture, but with <a href=""https://developer.android.com/reference/android/hardware/camera2/CameraDevice.html#TEMPLATE_STILL_CAPTURE"" rel=""nofollow noreferrer"">CameraDevice.TEMPLATE_STILL_CAPTURE</a></li>
</ul>

<p>If someone can help me with this case - I'll be really appreciated.</p>
",4614669,,4614669,,2017-08-15 12:36:52,2017-10-12 17:14:20,Android Camera 2 API problems with flash on Nougat 7.1,<android><flash><android-camera><android-7.0-nougat><android-camera2>,1,0,,,
Android,36755427,1,,,2016,,3,454,"<p>I have an Android NDK project which consists entirely of C/C++ code, and it basically processes images without using any external libraries.</p>

<p>I'm using Android Studio + Gradle NDK Experimental plugin (0.7.0-alpha1).</p>

<p>Now, I need to integrate ffmpeg as a native library to use it from the C/C++ code in order to decode a H.264 video frame.</p>

<p><strong>These are the questions I've found here regarding this issue:</strong></p>

<p><a href=""https://stackoverflow.com/questions/22079718/android-integrating-ffmpeg-and-android-ndk-r9c"">Android - Integrating ffmpeg and android-ndk-r9c</a></p>

<p><a href=""https://stackoverflow.com/questions/26247206/android-ndk-w-ffmpeg-library-error-running-project"">Android NDK w/ ffmpeg library - error running project</a></p>

<p><a href=""https://stackoverflow.com/questions/19576420/using-ffmpeg-native-libraries-with-android-ndk"">Using FFmpeg native libraries with Android-NDK</a></p>

<p><a href=""https://stackoverflow.com/questions/36426226/can-not-build-with-prebuilt-static-libraries-using-gradle-experimental"">Can not build with prebuilt static libraries using gradle-experimental</a></p>

<p><strong>Here is my build.gradle file:</strong></p>

<pre><code>apply plugin: 'com.android.model.application'

def ffmpeg_path = file(project(':ffmpeg').projectDir).absolutePath + ""/ffmpeg-android""

model {

    repositories {
        libs(PrebuiltLibraries) {
            libavcodec {
                headers.srcDir ""${ffmpeg_path}/include""
                binaries.withType(StaticLibraryBinary) {
                    staticLibraryFile = file(""${ffmpeg_path}/${targetPlatform.getName()}/lib/libavcodec.a"")
                }
            }
            libavutil {
                headers.srcDir ""${ffmpeg_path}/include""
                binaries.withType(StaticLibraryBinary) {
                    staticLibraryFile = file(""${ffmpeg_path}/${targetPlatform.getName()}/lib/libavutil.a"")
                }
            }
            libswresample {
                headers.srcDir ""${ffmpeg_path}/include""
                binaries.withType(StaticLibraryBinary) {
                    staticLibraryFile = file(""${ffmpeg_path}/${targetPlatform.getName()}/lib/libswresample.a"")
                }
            }
            libswscale {
                headers.srcDir ""${ffmpeg_path}/include""
                binaries.withType(StaticLibraryBinary) {
                    staticLibraryFile = file(""${ffmpeg_path}/${targetPlatform.getName()}/lib/libswscale.a"")
                }
            }
            libavformat {
                headers.srcDir ""${ffmpeg_path}/include""
                binaries.withType(StaticLibraryBinary) {
                    staticLibraryFile = file(""${ffmpeg_path}/${targetPlatform.getName()}/lib/libavformat.a"")
                }
            }
            libavdevice {
                headers.srcDir ""${ffmpeg_path}/include""
                binaries.withType(StaticLibraryBinary) {
                    staticLibraryFile = file(""${ffmpeg_path}/${targetPlatform.getName()}/lib/libavdevice.a"")
                }
            }
            libavfilter {
                headers.srcDir ""${ffmpeg_path}/include""
                binaries.withType(StaticLibraryBinary) {
                    staticLibraryFile = file(""${ffmpeg_path}/${targetPlatform.getName()}/lib/libavfilter.a"")
                }
            }
            libpostproc {
                headers.srcDir ""${ffmpeg_path}/include""
                binaries.withType(StaticLibraryBinary) {
                    staticLibraryFile = file(""${ffmpeg_path}/${targetPlatform.getName()}/lib/libpostproc.a"")
                }
            }
        }
    }

    android {
        compileSdkVersion = 23
        buildToolsVersion = ""23.0.2""

        defaultConfig.with {
            applicationId = ""com.example.hellojni""
            minSdkVersion.apiLevel = 4
            targetSdkVersion.apiLevel = 23
        }
    }

    /*
     * native build settings
     */
    android.ndk {
        moduleName = ""hello-jni""
        platformVersion = 9 //same as minSdkVersion.apiLevel for better compatibility
        stl    = ""c++_static""
        abiFilters.addAll([""armeabi"", ""armeabi-v7a"", ""x86""]) //filtering ABIs on the ones Google Play Games library is compatible with.
    }
    android.buildTypes {
        release {
            minifyEnabled = false
            proguardFiles.add(file('proguard-rules.txt'))
        }
    }

    android.sources {
        main {
            jni {
                dependencies {
                    library ""libavcodec"" linkage ""static""
                    library ""libavutil"" linkage ""static""
                    library ""libswresample"" linkage ""static""
                    library ""libswscale"" linkage ""static""
                    library ""libavformat"" linkage ""static""
                    library ""libavdevice"" linkage ""static""
                    library ""libavfilter"" linkage ""static""
                    library ""libpostproc"" linkage ""static""
                }
            }
        }
    }

}
</code></pre>

<p>I based on <a href=""https://github.com/googlesamples/android-ndk/tree/master/hello-thirdparty"" rel=""nofollow noreferrer"">this sample</a> from Google which integrates an external native library.</p>

<p>This is the ffmpeg project I compiled before importing it into mine:
<a href=""https://github.com/WritingMinds/ffmpeg-android"" rel=""nofollow noreferrer"">https://github.com/WritingMinds/ffmpeg-android</a></p>

<p>I've added all the .a and .h files and I'm able to import the headers in my C/C++ code, but when I try to compile it I get the following error:</p>

<pre><code>/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(utils.o):utils.c:function try_decode_frame: error: undefined reference to 'avpriv_h264_has_num_reorder_frames'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(utils.o):utils.c:function compute_pkt_fields: error: undefined reference to 'avpriv_h264_has_num_reorder_frames'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(utils.o):utils.c:function parse_packet: error: undefined reference to 'av_parser_parse2'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(utils.o):utils.c:function parse_packet: error: undefined reference to 'av_parser_close'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(utils.o):utils.c:function read_frame_internal: error: undefined reference to 'av_parser_init'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(utils.o):utils.c:function avformat_find_stream_info: error: undefined reference to 'av_parser_init'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(utils.o):utils.c:function avformat_find_stream_info: error: undefined reference to 'avcodec_pix_fmt_to_codec_tag'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(utils.o):utils.c:function avformat_find_stream_info: error: undefined reference to 'avpriv_get_raw_pix_fmt_tags'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(utils.o):utils.c:function ff_stream_add_bitstream_filter: error: undefined reference to 'av_bitstream_filter_init'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(utils.o):utils.c:function ff_stream_add_bitstream_filter: error: undefined reference to 'av_bitstream_filter_close'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(utils.o):utils.c:function av_apply_bitstream_filters: error: undefined reference to 'av_bitstream_filter_filter'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(aadec.o):aadec.c:function aa_read_packet: error: undefined reference to 'av_tea_init'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(aadec.o):aadec.c:function aa_read_packet: error: undefined reference to 'av_tea_crypt'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(aadec.o):aadec.c:function aa_read_header: error: undefined reference to 'av_tea_alloc'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(aadec.o):aadec.c:function aa_read_header: error: undefined reference to 'av_tea_init'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(aadec.o):aadec.c:function aa_read_header: error: undefined reference to 'av_tea_crypt'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(ac3dec.o):ac3dec.c:function ac3_eac3_probe.isra.0: error: undefined reference to 'avpriv_ac3_parse_header'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(adtsenc.o):adtsenc.c:function adts_write_header: error: undefined reference to 'avpriv_mpeg4audio_get_config'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(adtsenc.o):adtsenc.c:function adts_write_header: error: undefined reference to 'avpriv_copy_pce_data'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(asfcrypt.o):asfcrypt.c:function ff_asfcrypt_dec: error: undefined reference to 'av_rc4_alloc'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(asfcrypt.o):asfcrypt.c:function ff_asfcrypt_dec: error: undefined reference to 'av_rc4_init'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(asfcrypt.o):asfcrypt.c:function ff_asfcrypt_dec: error: undefined reference to 'av_rc4_crypt'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(asfcrypt.o):asfcrypt.c:function ff_asfcrypt_dec: error: undefined reference to 'av_rc4_init'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(asfcrypt.o):asfcrypt.c:function ff_asfcrypt_dec: error: undefined reference to 'av_rc4_crypt'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(matroska.o):matroska.c:function ff_mkv_stereo3d_conv: error: undefined reference to 'av_stereo3d_alloc'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(nut.o):nut.c:function ff_nut_add_sp: error: undefined reference to 'av_tree_node_alloc'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(nut.o):nut.c:function ff_nut_add_sp: error: undefined reference to 'av_tree_insert'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(nut.o):nut.c:function ff_nut_free_sp: error: undefined reference to 'av_tree_enumerate'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(nut.o):nut.c:function ff_nut_free_sp: error: undefined reference to 'av_tree_destroy'
Error:error: ld returned 1 exit status
Error:Execution failed for task ':app:linkHello-jniArmeabi-v7aDebugSharedLibrary'.
&gt; A build operation failed.
      Linker failed while linking libhello-jni.so.
  See the complete log at: file:///Users/marcos/Documents/Android/fdecoder/app/build/tmp/linkHello-jniArmeabi-v7aDebugSharedLibrary/output.txt
Information:BUILD FAILED
Information:Total time: 14.993 secs
Information:2 errors
Information:0 warnings
Information:See complete output in console
</code></pre>

<p>There's obviously something I'm not importing properly, but can't figure exactly what's missing.</p>
",3641308,,-1,,2017-05-23 12:08:17,2019-02-28 11:09:08,Unable to integrate ffmpeg as a native dependency for an Android NDK project,<android><android-studio><ffmpeg><android-ndk><gradle-experimental>,1,2,,,
Android,50869969,1,50870340,,2018,,3,172,"<p>Looking at the Android Architecture Blueprints ""todomvpdagger"" from here: <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture</a>.</p>

<p>I'm trying to understand the Dagger2 implementation and I can't seem to figure out how they are getting Dagger2 to provide the TasksRepository.</p>

<p>They have <code>@Provides</code> for ""provideTasksLocalDataSource"" and ""provideTasksRemoteDataSource"" but where is the one for the actual TaskRepository?</p>

<p>In the TodoApplication class they have this:</p>

<pre><code>@Inject
TasksRepository tasksRepository;
</code></pre>

<p>How can it inject this without an @Provides for it anywhere?</p>

<p>If I try to use this same approach in my own app I get this error: </p>

<blockquote>
  <p>cannot be provided without an @Provides- or @Produces-annotated method</p>
</blockquote>

<p>So I went looking everywhere in the Blueprints code but I can't see how they did it themselves. Is there some trick to it that allows them to not have an <code>@Provides</code>? It definitely builds so they've gotten around it somehow.</p>

<p>Someone has asked this same question on the actual github page but there are no answers at the time of writing. <a href=""https://github.com/googlesamples/android-architecture/issues/561"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture/issues/561</a>.</p>

<p>I'm on the latest commit which at the time of writing is ""082bd72d62472f9caadd2979046067fb928bbfef"".</p>
",3828004,,,,,2018-06-15 6:46:57,"Android Architecture Blueprints ""todomvpdagger"", where is @Provides for TasksRepository?",<java><android><kotlin><dagger-2><dagger.android>,1,0,,,
Android,37144657,1,37149446,,2016,,3,2561,"<p>My problem is when I switch between different flashmodes and then want to capture an image, my captureBuilder won't set the chosen flashmode. It only works when i close and reopen the camera.</p>

<p>I took the <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Basic</a> as a starting point.</p>

<p>my method:</p>

<pre><code>   private void captureStillPicture() {
  try {
     final Activity activity = (Activity) context;
     if (null == activity || null == mCameraDevice) {
        return;
     }
     // This is the CaptureRequest.Builder that we use to take a picture.
     CaptureRequest.Builder captureBuilder =
           mCameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_STILL_CAPTURE);
     captureBuilder.addTarget(mImageReader.getSurface());

     // Use the same AE and AF modes as the preview.
     captureBuilder.set(CaptureRequest.CONTROL_AF_MODE,
           CaptureRequest.CONTROL_AF_MODE_CONTINUOUS_PICTURE);
     setCurrentFlash(captureBuilder);

     // Orientation
     int rotation = activity.getWindowManager()
           .getDefaultDisplay()
           .getRotation();
     captureBuilder.set(CaptureRequest.JPEG_ORIENTATION, getOrientation(rotation));

     CameraCaptureSession.CaptureCallback captureCallback =
           new CameraCaptureSession.CaptureCallback() {

              @Override
              public void onCaptureCompleted(@NonNull CameraCaptureSession session,
                    @NonNull CaptureRequest request, @NonNull TotalCaptureResult result) {
                 super.onCaptureCompleted(session, request, result);
                 Toast.makeText(context, ""image captured"", Toast.LENGTH_SHORT)
                       .show();
                 unlockFocus();
              }
           };

              mCaptureSession.stopRepeating();
     mCaptureSession.capture(captureBuilder.build(), captureCallback, null);
  } catch (CameraAccessException e) {
     Log.e(this.getClass()
           .getSimpleName(), e.getMessage(), e);
  }
</code></pre>

<p>This is the setCurrentFlash method:</p>

<pre><code>   private void setCurrentFlash(CaptureRequest.Builder requestBuilder) {
  if (mFlashSupported) {
     switch (flashMode.name()) {
        case FLASH_AUTO:
           requestBuilder.set(CaptureRequest.CONTROL_AE_MODE,
                 CaptureRequest.CONTROL_AE_MODE_ON_AUTO_FLASH);
           break;
        case FLASH_ON:
           requestBuilder.set(CaptureRequest.CONTROL_AE_MODE,
                 CaptureRequest.CONTROL_AE_MODE_ON_ALWAYS_FLASH);
           break;
        case FLASH_OFF:
           requestBuilder.set(CaptureRequest.FLASH_MODE, CaptureRequest.FLASH_MODE_OFF);
           break;
        default:
           requestBuilder.set(CaptureRequest.CONTROL_AE_MODE,
                 CaptureRequest.CONTROL_AE_MODE_ON_AUTO_FLASH);
           break;
     }
  }
</code></pre>

<p>Any ideas why the builder is not setting the flash correctly before capturing?</p>

<p>***** <strong>EDIT</strong> *****</p>

<p>Solved issue by setting the flash to previewRequestBuilder when calling runPrecaptureSequence() like Eddy Talvala suggested</p>

<pre><code>   private void runPrecaptureSequence() {
  try {
     // This is how to tell the camera to trigger.
     setCurrentFlash(previewRequestBuilder);
     previewRequestBuilder.set(CaptureRequest.CONTROL_AE_PRECAPTURE_TRIGGER,
           CaptureRequest.CONTROL_AE_PRECAPTURE_TRIGGER_START);
     // Tell #mCaptureCallback to wait for the precapture sequence to be set.
     state = STATE_WAITING_PRECAPTURE;
     captureSession.capture(previewRequestBuilder.build(), mCaptureCallback, backgroundHandler);
  } catch (CameraAccessException e) {
     e.printStackTrace();
  }
</code></pre>
",1679732,,1679732,,2016-05-13 7:37:59,2016-05-13 7:37:59,Switch flash in Camera2 API,<android><android-camera><android-camera2><camera-flash>,1,0,,,
Android,54539912,1,,,2019,,3,64,"<p>I am working on Chat application in which you can share YouTube link I want to play YouTube video in My App like whats app does, I think they play video in PIP mode. </p>

<ol>
<li><p>How they play YouTube video in app by using Link</p></li>
<li><p>is it supported in bellow android Oreo ?</p></li>
</ol>

<p>I tried <a href=""https://github.com/googlesamples/android-PictureInPicture"" rel=""nofollow noreferrer"">this</a> example but it does not working below Android Oreo</p>
",8091613,,4420967,,2019-02-05 19:10:05,2019-02-05 20:56:34,Is Picture-in-Picture mode supports bellow Oreo,<android><youtube-api><picture-in-picture>,1,0,,,
Android,51203665,1,,,2018,,3,188,"<p>I was tinkering with <a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java"" rel=""nofollow noreferrer""><code>SingleLiveEvent</code></a>. Is it possible to use it with Room database? I tried using it and got a build error saying <code>Not sure how to convert a Cursor to this method's return type</code>. Are there any workarounds here? I have got an edge case where I would like to use it!</p>
",4050406,,4050406,,2018-07-06 5:45:22,2018-07-06 5:58:37,Is it possible to use SingleLiveEvent with Room in Android?,<android><android-room><android-livedata>,1,0,,,
Android,51801851,1,,,2018,,3,419,"<p>I've setup a project very similar to <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample"" rel=""nofollow noreferrer""><code>GithubBrowserSample</code></a>. So, the dagger setup is the same.</p>

<p>Consider there are <code>ActivityViewModel</code> and <code>FragmentViewModel</code>, which have non-zero arg constructor, so they are being acquired from <code>ViewModelProviders</code> via custom <code>ViewModelProvider.Factory</code>.</p>

<p>What I want is to instruct dagger to inject already created instance of <code>ActivityViewModel</code> in following code:</p>

<pre>
<code>
    class FragmentViewModel @Inject constructor(
        private val activityViewModel: ActivityViewModel
        private val foo: Foo
    ) : ViewModel() {
        ...
    }
</code>
</pre>

<p>With current declaration Dagger will create a <strong>new</strong> instance of <code>ActivityViewModel</code> regardless that there already exists one.</p>

<p>This happens, because there exists an <code>@Inject</code> annotated constructor for <code>ActivityViewModel</code>.</p>

<p>So, dagger is free to assume, that it is the correct way of providing an instance of <code>ActivityViewModel</code> to <code>FragmentViewModel</code>.</p>

<p>I know how to make things for ordinary Dagger, but I do not know how to do this for Dagger-Android, and this questions is specifically for Dagger-Android setup.</p>

<p>As a dirty solution I'm currently manually setting that instance:</p>

<pre>
<code>
    class MyFragment : Fragment {
      ...
      override fun onActivityCreated(savedInstanceState: Bundle?) {
        super.onActivityCreated(savedInstanceState)
        viewModel = ViewModelProviders.of(this, viewModelFactory).get(FragmentViewModel::class.java)
        viewModel.activityViewModel = ViewModelProviders.of(activity!!, viewModelFactory).get(ActivityViewModel::class.java)
      }
      ...
    }
</code>
</pre>

<p>What's the correct way of injecting parent's <code>ViewModel</code> into child's <code>ViewModel</code>? </p>
",1083957,,1083957,,2018-08-18 13:51:47,2019-04-07 19:19:41,Inject activity's ViewModel into fragment's ViewModel,<android><dagger-2><android-architecture-components><android-viewmodel><dagger-android>,1,13,,,
Android,51854567,1,,,2018,,3,682,"<p>In this sample app: 
<a href=""https://github.com/googlesamples/android-sunflower"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-sunflower</a> </p>

<p>The repository classes (PlantRepository.kt, GardenPlantingRepository.kt) are singletons and so is the injector utility object (InjectorUtils.kt). </p>

<p>Why are the repository classes singletons when the injector utility object is already one? </p>
",5179960,,,,,2018-11-20 10:52:53,Why are the repository classes singletons in this sample app?,<android><android-architecture-components><android-jetpack>,1,1,,,
Android,49834875,1,,,2018,,4,2021,"<p>I am currently working on a project regarding neural networks.
For this, I want to build an Android Application which should use tensorflow [lite] to solve some object detection / recognition problems.</p>

<p>As I want the code to be as portable as possible, I want to write most of the code in C++, thus using the C++ API of tensorflow lite over the Java API / wrapper.
So, I modified tensorflow/contrib/lite/BUILD and added the following to be able to create a shared tensorflow library.</p>

<pre><code>cc_binary(
name = ""libtensorflowLite.so"",

linkopts=[""-shared"", ""-Wl""],
linkshared=1,

copts = tflite_copts(),
deps = [
    "":framework"",
    ""//tensorflow/contrib/lite/kernels:builtin_ops"",
],

)
</code></pre>

<p>(Which is based on the answer to this issue: <a href=""https://github.com/tensorflow/tensorflow/issues/17826"" rel=""nofollow noreferrer"">https://github.com/tensorflow/tensorflow/issues/17826</a>)</p>

<p>Then I used</p>

<pre><code>bazel build //tensorflow/contrib/lite:libtensorflowLite.so --crosstool_top=//external:android/crosstool --cpu=arm64-v8a --host_crosstool_top=@bazel_tools//tools/cpp:toolchain --cxxopt=""-std=c++11""
</code></pre>

<p>to finally build it.</p>

<p>Afterwards I headed over to Android Studio and set up a basic project.
For adding the shared library to the project, I refered to this example: </p>

<p><a href=""https://github.com/googlesamples/android-ndk/tree/840858984e1bb8a7fab37c1b7c571efbe7d6eb75/hello-libs"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk/tree/840858984e1bb8a7fab37c1b7c571efbe7d6eb75/hello-libs</a></p>

<p>I also added the needed dependencies for flatbuffers.</p>

<p>The build / compilation process succeeds without any linker errors (well, at least after trying around for some hours..).</p>

<p>The APK is then successfully installed on an Android device, but immediately crashes after it starts. Logcat gives the following output:</p>

<pre><code>04-14 20:09:59.084 9623-9623/com.example.hellolibs E/AndroidRuntime: FATAL EXCEPTION: main
    Process: com.example.hellolibs, PID: 9623
    java.lang.UnsatisfiedLinkError: dlopen failed: library ""/home/User/tensorflowtest/app/src/main/cpp/../../../../distribution/tensorflow/lib/x86/libtensorflowLite.so"" not found
        at java.lang.Runtime.loadLibrary0(Runtime.java:1016)
        at java.lang.System.loadLibrary(System.java:1657)
        at com.example.hellolibs.MainActivity.&lt;clinit&gt;(MainActivity.java:36)
        at java.lang.Class.newInstance(Native Method)
        at android.app.Instrumentation.newActivity(Instrumentation.java:1174)
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2669)
        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2856)
        at android.app.ActivityThread.-wrap11(Unknown Source:0)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1589)
        at android.os.Handler.dispatchMessage(Handler.java:106)
        at android.os.Looper.loop(Looper.java:164)
        at android.app.ActivityThread.main(ActivityThread.java:6494)
        at java.lang.reflect.Method.invoke(Native Method)
        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:438)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:807)
</code></pre>

<p>I tried this on an android x86 emulator and on a real arm64-v8a android smartphone.</p>

<p>So for me this looks like on startup the application tries to load the tensorflowLite shared library, but is unable to find it. 
Opening the apk with a zip archive manager I can verify that the platform (arm, x86) dependent .so files are packed into the APK as expected (by adding the following to build.gradle: </p>

<pre><code>sourceSets {
        main {
            // let gradle pack the shared library into apk
            jniLibs.srcDirs = ['../distribution/tensorflow/lib']
        }
})
</code></pre>

<p>What I do not understand is why it looks for the library in the path where I placed it on my Ubuntu 17.10 PC.
So, I thought I had done a mistake trying to adapt the example about adding external libraries to an Android Studio Project I mentioned earlier.
That's why I downloaded the whole project and opened it in Android Studio and verified that the example works as expected. Afterwards I replaced the example libgperf.so by the libtensorflowLite.so and left everything else, especially the CMakeLists.txt, untouched.
But I get the exact same error again, therefore I suspect this to be a problem with the libtensorflowLite library itself and not the android project (although that's just my guess).</p>

<p>I am working on android studio 3.1.1, NDK Version 14 and API Level 24 (Android 7.0).
If anyone has an idea what could be wrong, any help would be highly appreciated.
I am also open for any other methods which allow me to use tensorflow lite with C++ for an android application.</p>

<p>Thanks a lot,</p>

<p>Martin</p>
",9646450,,,,,2019-03-06 21:24:56,Problems with using tensorflow lite C++ API in Android Studio Project,<android><c++><tensorflow><android-ndk><android-studio-3.0>,1,0,3,,
Android,53129932,1,53275304,,2018,,4,618,"<p>I want to get realtime frames from video. like camera is open and I am getting frames per seconds.</p>

<p>I have also gone through google example of video capturing app via camera2 API <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Video</a>
, But couldn't find any such method/way.</p>

<p>I know this is possible as video broadcasters and apps like snapchat who does realtime video processing must be doing something like this.</p>

<p>Also I require 30 frames/seconds.</p>
",1404257,,,,,2018-11-13 6:48:14,How to capture frame by frame images from Android video recording in real time,<java><android><kotlin><video-processing><video-capture>,1,5,3,,
Android,45593065,1,,,2017,,4,1374,"<p>I'm working on a call recorder app using MediaRecorder <strong>VOICE_CALL</strong> audio source, In some marshmallow devices it's crashing, then I changed source to <strong>MIC</strong> here incoming voice is not getting recorded. Due to this java limitation now I'm working on native android code to record voice call.
I'm managed to record the audio using <a href=""https://github.com/googlesamples/android-ndk/tree/master/native-audio"" rel=""nofollow noreferrer"">native-audio</a> recorder for call recorder. Problem is in native code also it's recording one side voice only,incoming voice is not getting recorded. Then I tried the <strong>voice communication</strong> preset configuration, its not recording. Below is the preset configuration code.</p>

<pre><code>const SLInterfaceID id[2] = { SL_IID_ANDROIDSIMPLEBUFFERQUEUE,SL_IID_ANDROIDCONFIGURATION};
const SLboolean req[2] = { SL_BOOLEAN_TRUE,SL_BOOLEAN_TRUE};

result = (*engineEngine)-&gt;CreateAudioRecorder(engineEngine, &amp;recorderObject, &amp;audioSrc,
                                              &amp;audioSnk, 2, id, req);

SLAndroidConfigurationItf inputConfig;
result = (*recorderObject)-&gt;GetInterface(recorderObject,
                                         SL_IID_ANDROIDCONFIGURATION,
                                         &amp;inputConfig);


if (SL_RESULT_SUCCESS == result) {
    SLuint32 presetValue =SL_ANDROID_RECORDING_PRESET_VOICE_COMMUNICATION ;
    (*inputConfig)-&gt;SetConfiguration(inputConfig,
                                     SL_ANDROID_KEY_RECORDING_PRESET,
                                     &amp;presetValue,
                                     sizeof(SLuint32));
    __android_log_print(ANDROID_LOG_DEBUG, ""LOG_TAG"", ""\n Native PCM Conf Success\n"");

} else{
    __android_log_print(ANDROID_LOG_DEBUG, ""LOG_TAG"", ""\n Native PCM Conf Error %d\n"",result);

}
</code></pre>

<p><strong>After adding preset configuration I'm getting system error when start recording the voice call :</strong> </p>

<blockquote>
  <p>E/AudioRecord: Could not get audio input for record source 7, sample
  rate 16000, format 0x1, channel mask 0x10, session 925, flags 0 </p>
  
  <p>E/libOpenSLES: android_audioRecorder_realize(0x559548c350) error
  creating AudioRecord object; status -22 </p>
  
  <p>W/libOpenSLES: Leaving Object::Realize (SL_RESULT_CONTENT_UNSUPPORTED)</p>
</blockquote>
",4491620,,5458344,,2018-07-17 15:20:51,2018-07-17 15:20:51,How to configure OpenSL to record voice call,<android><audio><android-ndk><opensl>,1,8,3,,
Android,42420540,1,42448872,,2017,,4,546,"<p>I'm using the BarcodeDetector from the Mobile Vision API on the Google Play Services (Version 10.2.0) for my app. I pretty much took the code from the smaple app they provide:
<a href=""https://github.com/googlesamples/android-vision"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vision</a></p>

<p>And the barcodes are only detected if they are in the middle/centre of the screen. Is there any way of increasing this to extend the whole screen/camera preview? Its a bit misleading for the user unless you add a rectangle in the centre leading them to place the barcode inside.</p>

<p>Any help on how to accomplish this is welcome!</p>
",1652657,,8511554,,2018-04-04 17:25:01,2018-04-04 17:25:01,Mobile Vision API BarcodeDetector only detects in centre of the screen,<android><barcode><android-vision><vision-api>,1,2,2,,
Android,46533989,1,,,2017,,4,497,"<p>Related to this question: <a href=""https://stackoverflow.com/questions/46513349/espresso-dagger2-set-viemodelprovider-factory-on-baseactivity"">Espresso, Dagger2 set ViemodelProvider.Factory on BaseActivity</a></p>

<p>I went through hell and back to get a ViewModelFactory.Provider on an Activity during my tests, in order to get espresso tests working regarding Android Architecture Components. I expected it to be simple, but I guess it's not...    </p>

<p>The example to get it working with fragments is straightforward:<br>
<a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/androidTest/java/com/android/example/github/ui/user/UserFragmentTest.java"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/androidTest/java/com/android/example/github/ui/user/UserFragmentTest.java</a></p>

<pre><code>@Before
public void init() {
    UserFragment fragment = UserFragment.create(""foo"");
    viewModel = mock(UserViewModel.class);
    when(viewModel.getUser()).thenReturn(userData);
    when(viewModel.getRepositories()).thenReturn(repoListData);
    navigationController = mock(NavigationController.class);
    fragmentBindingAdapters = mock(FragmentBindingAdapters.class);

    fragment.viewModelFactory = ViewModelUtil.createFor(viewModel);
    fragment.navigationController = navigationController;
    fragment.dataBindingComponent = () -&gt; fragmentBindingAdapters;

    activityRule.getActivity().setFragment(fragment);
}
</code></pre>

<p>However, this simply won't work with activities as I can't get the dependencies on the activity before its creation using an <code>ActivityTestRule</code>.<br>
I followed the same new dependency injection flow with Dagger2 as in the example above using the <code>HasActivityInjector</code> interface.  </p>

<p>I would appreciate your help! </p>
",917467,,,,,2017-11-13 10:14:15,Inject ViewModelFactory.Provider in activity for espresso testing,<android><dagger-2>,1,0,1,,
Android,46367880,1,46367938,,2017,,4,11434,"<p>There is this repo :</p>

<p><a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture</a></p>

<p>And there is this branch :</p>

<p><a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvvm-databinding/"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture/tree/todo-mvvm-databinding/</a></p>

<p>I have clone the project but i have only the master. What can i do to get this branch ?</p>
",2611161,,,,,2017-09-22 15:12:10,How to pull a specific branch from Github,<git><github><branch>,1,0,1,,
Android,54967251,1,54980053,,2019,,4,246,"<p>What are the steps necessary for me to integrate,</p>

<p><a href=""https://github.com/opencv/opencv"" rel=""nofollow noreferrer"">the latest version of OpenCV</a></p>

<p>into a pure C++(No Java Code) Android NDK project, such as Android NDK Google tutorial:</p>

<p><a href=""https://github.com/googlesamples/android-ndk/tree/master/endless-tunnel"" rel=""nofollow noreferrer"">Endless-Tunnel</a>
?</p>

<p><a href=""https://docs.opencv.org/2.4/doc/tutorials/introduction/android_binary_package/O4A_SDK.html"" rel=""nofollow noreferrer"">official documentation</a> for android integration refers to much older version :OpenCV-2.4 and folder structures are no longer the same. </p>

<p>I am using Android Studio on Linux. </p>

<p>All help is highly Appreciated.</p>
",10591628,,10591628,,2019-03-03 9:15:41,2019-03-10 16:24:21,How can I integrate OpenCV 4.0 into a pure C++ Android NDK project?,<android><c++><opencv><android-ndk>,1,0,1,,
Android,35048208,1,35603674,,2016,,4,3256,"<p>I'm having some issues setting up a capture request for high speed video. I intend to capture at 120 FPS on Nexus 6P. I set the minimum API to 23, since I don't plan to deploy this app to any other phone. </p>

<p>Where I'm not quite understanding is how to get my capture request to work. Right now, I'm doing my best to change up the code within Camera2Video sample in google's samples. <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow"">Link to sample from Google</a></p>

<p>Here is all of the relevant code:</p>

<pre><code>private void startPreview() {
    if (null == mCameraDevice || !mTextureView.isAvailable() || null == mPreviewSize) {
        return;
    }
    try {
        setUpMediaRecorder();
        SurfaceTexture texture = mTextureView.getSurfaceTexture();
        assert texture != null;
        texture.setDefaultBufferSize(mPreviewSize.getWidth(), mPreviewSize.getHeight());
        mPreviewBuilder = mCameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_RECORD);
        List&lt;Surface&gt; surfaces = new ArrayList&lt;Surface&gt;();

        Surface previewSurface = new Surface(texture);
        surfaces.add(previewSurface);
        mPreviewBuilder.addTarget(previewSurface);

        Surface recorderSurface = mMediaRecorder.getSurface();
        surfaces.add(recorderSurface);
        mPreviewBuilder.addTarget(recorderSurface);

        mCameraDevice.createConstrainedHighSpeedCaptureSession(surfaces, new CameraCaptureSession.StateCallback() {
        //mCameraDevice.createCaptureSession(surfaces, new CameraCaptureSession.StateCallback() {

            @Override
            public void onConfigured(CameraCaptureSession cameraCaptureSession) {
                //mPreviewSession = cameraCaptureSession;
                mPreviewSession2 = cameraCaptureSession;
                updatePreview();
            }

            @Override
            public void onConfigureFailed(CameraCaptureSession cameraCaptureSession) {
                Activity activity = getActivity();
                if (null != activity) {
                    Toast.makeText(activity, ""Failed"", Toast.LENGTH_SHORT).show();
                }
            }
        }, mBackgroundHandler);
    } catch (CameraAccessException e) {
        e.printStackTrace();
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
}


/**
 * Update the camera preview. {@link #startPreview()} needs to be called in advance.
 */
private void updatePreview() {
    if (null == mCameraDevice) {
        return;
    }
    try {
        setUpCaptureRequestBuilder(mPreviewBuilder);
        HandlerThread thread = new HandlerThread(""CameraPreview"");
        thread.start();
        mPreviewBuilder2 =  mPreviewSession2.createHighSpeedRequestList(mPreviewBuilder.build());
        //mPreviewBuilder2 =


        //mPreviewSession.setRepeatingRequest(mPreviewBuilder.build(), null, mBackgroundHandler);
        mPreviewSession.setRepeatingBurst(mPreviewBuilder2, null, mBackgroundHandler);
    } catch (CameraAccessException e) {
        e.printStackTrace();
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch(Exception e){
        e.printStackTrace();
    }
}

private void setUpCaptureRequestBuilder(CaptureRequest.Builder builder) {
    builder.set(CaptureRequest.CONTROL_MODE, CameraMetadata.CONTROL_MODE_AUTO);
    Range&lt;Integer&gt; fpsRange = Range.create(120, 120);
    builder.set(CaptureRequest.CONTROL_AE_TARGET_FPS_RANGE, fpsRange);

}
</code></pre>

<p>I have no problem getting the code to updatepreview. Unfortunately, from there I've hit a roadblock on how to give setRepeatingBurst my capture requests. I know the constructor is different from the sample's setRepeatingRequest. Therefore, I need to find a way to give setRepeatingBurst my surfaces, my CONTROL_MODE request and my TARGET_FPS_RANGE request. </p>

<pre><code>/**
 * Camera preview.
 */
private CaptureRequest.Builder mPreviewBuilder;
List&lt;CaptureRequest&gt; mPreviewBuilder2;

/**
 * A reference to the current {@link android.hardware.camera2.CameraCaptureSession} for
 * preview.
 */
private CameraCaptureSession mPreviewSession;
private CameraConstrainedHighSpeedCaptureSession mPreviewSession2;
</code></pre>

<p>Any help figuring out how to make this work correctly would be very helpful. I haven't found much on the net in order to help and there isn't any article in StackOverflow mentioning any of the highspeed capture functions. My largest issue here is trying to understand how createConstrainedHighSpeedCaptureSession gives a CameraConstrainedHighSpeedCaptureSession session. So that I can use the createHighSpeedRequestList.</p>
",1120115,,1120115,,2016-01-28 0:11:29,2016-12-15 5:57:49,High speed Capture request Android Marshmallow,<android><android-camera>,1,0,1,,
Android,45005130,1,,,2017,,4,2200,"<p>I am trying to implement sms retriever api to read OTP code message without having to add read_sms permission.</p>

<p>The help doc <a href=""https://developers.google.com/identity/sms-retriever/request"" rel=""nofollow noreferrer"">here</a>, ask user to generate hash code specific to app.</p>

<p>I have generated the code as required but still </p>

<p><code>&lt;action android:name=""com.google.android.gms.auth.api.phone.SMS_RETRIEVED""/&gt;</code></p>

<p>broadcast receiver is not firing up.</p>

<p>How can I debug this? </p>

<p>I am testing this by sending a SMS from one mobile to another and I am following the SMS requirement as specified in the document above.</p>

<p>Also, 
There are various methods mentioned to generated hash code. I have tried them all. Problem is each method generated different hash. </p>

<p>I have tried for both debug and release keystore.</p>

<p>Here are those various methods:</p>

<ol>
<li>linux command as describe here - <a href=""https://developers.google.com/identity/sms-retriever/verify#computing_your_apps_hash_string"" rel=""nofollow noreferrer"">help doc</a></li>
<li>sms_retriever_hash_v9 <a href=""https://github.com/googlesamples/android-credentials/blob/master/sms-verification/bin/sms_retriever_hash_v9.sh"" rel=""nofollow noreferrer"">file</a> as described <a href=""https://github.com/googlesamples/android-credentials/tree/master/sms-verification/android"" rel=""nofollow noreferrer"">here</a></li>
<li>By including <a href=""https://github.com/googlesamples/android-credentials/blob/master/sms-verification/android/app/src/main/java/com/google/samples/smartlock/sms_verify/AppSignatureHelper.java"" rel=""nofollow noreferrer"">AppSignatureHelper</a> from sample app.</li>
</ol>
",5700434,,,,,2017-07-13 18:45:11,SMS Retriever API - Generate 11 char hash code for app specific keystore file,<java><android><google-play-services>,1,18,1,,
Android,49940190,1,,,2018,,4,784,"<p>Im working to add instant app feature to an existing application but I cant manage to test the instant app via Internal Test or Alpha Test.</p>

<p>For testing purpose I created a completely new application on Google Play Console and compiled the <strong>hello-java</strong> sample in Git repository 
<a href=""https://github.com/googlesamples/android-instant-apps"" rel=""nofollow noreferrer"">Google samples:- android-instant-apps</a> , changing digital asset links.</p>

<p>I can correctly run the instant app via Android Studio on a real device.</p>

<p>On Google Play Console I uploaded an installed app APK in <strong>Internal Test</strong> and added a group of tester. It works correctly, I can see and download the installed app.</p>

<p>Then I uploaded an instant app APK in Internal Test but:</p>

<ul>
<li>test method dropdown is grayed out</li>
<li>when I open the URL provided by the Google Play Console: <a href=""https://play.google.com/apps/instantapptesting/_id_"" rel=""nofollow noreferrer"">https://play.google.com/apps/instantapptesting/<em>id</em></a> I get redirected to <a href=""https://play.google.com/apps/internaltest/_package_name_"" rel=""nofollow noreferrer"">https://play.google.com/apps/internaltest/_package_name_</a> and I see the message App not available for this account</li>
</ul>

<p>I tried the same process on Alpha channel but:</p>

<ul>
<li>test method dropdown is grayed out</li>
<li>when I open the URL provided by the Google Play Console: <a href=""https://play.google.com/apps/instantapptesting/_id_"" rel=""nofollow noreferrer"">https://play.google.com/apps/instantapptesting/<em>id</em></a> I get redirected to <a href=""https://play.google.com/apps/testing/_package_name_"" rel=""nofollow noreferrer"">https://play.google.com/apps/testing/_package_name_</a> and I see the page of the testing program</li>
<li>when I open Apps page on Google Play Store I dont see Try now button</li>
</ul>

<p>What am I missing?</p>

<p>Thank you</p>

<p>P.S.
The device Im testing on has Instant Apps enabled (I tried other Instant App already on Play Store)</p>
",1729650,,2638235,,2018-04-20 12:35:42,2018-04-20 12:35:42,Instant App not available for testing,<android><android-instant-apps>,1,0,1,,
Android,37014990,1,,,2016,,4,1045,"<p>Is the following situation poor design or am I overlooking something important?</p>

<p>Here is the code</p>

<pre><code>public class MainActivity extends AppCompatActivity  {

  

  @Override
  public void onCreate(Bundle savedInstanceState){
     
     buildGoogleApiClient();
  }

  /**
   * Builds a GoogleApiClient. Uses the addApi() method to request the LocationServices API.
   */
    protected synchronized void buildGoogleApiClient() {
        mGoogleApiClient = new GoogleApiClient.Builder(this)
                .addConnectionCallbacks(this)
                .addOnConnectionFailedListener(this)
                .addApi(LocationServices.API)
                .build();
    }
}
</code></pre>

<p>Why is <code>buildGoogleApiClient</code> <code>synchronized</code> when its ever only called from inside <code>onCreate</code>?</p>

<p>I know it cannot hurt, but that's hardly the point of the question. What I need to know is: <strong>Why is it necessary?</strong></p>

<p><strong>Edit</strong></p>

<p>source to full code: <a href=""https://github.com/googlesamples/android-play-location/blob/master/BasicLocationSample/app/src/main/java/com/google/android/gms/location/sample/basiclocationsample/MainActivity.java"" rel=""nofollow"">https://github.com/googlesamples/android-play-location/blob/master/BasicLocationSample/app/src/main/java/com/google/android/gms/location/sample/basiclocationsample/MainActivity.java</a></p>
",5641865,,5641865,,2016-05-04 0:03:16,2016-05-04 0:03:16,Synchronized method called by Android Activity onCreate method,<java><android><multithreading><android-activity>,1,3,1,,
Android,46567945,1,,,2017,,4,572,"<blockquote>
  <p><strong>TL;DR:</strong> I have successfully created and coupled (via a subscription) an activity to a media browser service. This media browser service can continue running and play music in the background. I'd like to be able to refresh the content at some stage, either when the app comes to the foreground again or during a SwipeRefreshLayout event.</p>
</blockquote>

<p>I have the following functionality I'd like to implement:</p>

<ol>
<li>Start a MediaBrowserServiceCompat service.</li>
<li>From an activity, connect to and subscribe to the media browser service.</li>
<li>Allow the service to continue running and playing music while the app is closed.</li>
<li><strong>At a later stage, or on a SwipeRefreshLayout event, reconnect and subscribe to the service to get fresh content.</strong></li>
</ol>

<p>The issue I am receiving is that within a MediaBrowserService (after a subscription has been created) you can only call sendResult() once from the onLoadChildren() method, so the next time you try to subscribe to the media browser service using the same root, you get the following exception when sendResult() is called for the second time:</p>

<pre><code>E/UncaughtException: java.lang.IllegalStateException: sendResult() called when either sendResult() or sendError() had already been called for: MEDIA_ID_ROOT
                                                    at android.support.v4.media.MediaBrowserServiceCompat$Result.sendResult(MediaBrowserServiceCompat.java:602)
                                                    at com.roostermornings.android.service.MediaService.loadChildrenImpl(MediaService.kt:422)
                                                    at com.roostermornings.android.service.MediaService.access$loadChildrenImpl(MediaService.kt:50)
                                                    at com.roostermornings.android.service.MediaService$onLoadChildren$1$onSyncFinished$playerEventListener$1.onPlayerStateChanged(MediaService.kt:376)
                                                    at com.google.android.exoplayer2.ExoPlayerImpl.handleEvent(ExoPlayerImpl.java:422)
                                                    at com.google.android.exoplayer2.ExoPlayerImpl$1.handleMessage(ExoPlayerImpl.java:103)
                                                    at android.os.Handler.dispatchMessage(Handler.java:102)
                                                    at android.os.Looper.loop(Looper.java:150)
                                                    at android.app.ActivityThread.main(ActivityThread.java:5665)
                                                    at java.lang.reflect.Method.invoke(Native Method)
                                                    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:822)
                                                    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:712)
</code></pre>

<p>I call the following methods to connect to and disconnect from the media browser (again, everything runs smoothly on first connection, but on the second connection I'm not sure how to refresh the content via a subscription):</p>

<pre><code>override fun onStart() {
        super.onStart()

        mMediaBrowser = MediaBrowserCompat(this, ComponentName(this, MediaService::class.java), connectionCallback, null)

        if (!mMediaBrowser.isConnected)
            mMediaBrowser.connect()
}

override fun onPause() {
        super.onPause()

        //Unsubscribe and unregister MediaControllerCompat callbacks
        MediaControllerCompat.getMediaController(this@DiscoverFragmentActivity)?.unregisterCallback(mediaControllerCallback)
        if (mMediaBrowser.isConnected) {
            mMediaBrowser.unsubscribe(mMediaBrowser.root, subscriptionCallback)
            mMediaBrowser.disconnect()
        }
}
</code></pre>

<p>I unsubscribe and disconnect in onPause() instead of onDestroy() so that the subscription is recreated even if the activity is kept on the back-stack.</p>

<p><strong>Actual method used for swipe refresh, in activity and service respectively:</strong></p>

<p>Activity</p>

<pre><code>if (mMediaBrowser.isConnected)
        mMediaController?.sendCommand(MediaService.Companion.CustomCommand.REFRESH.toString(), null, null)
</code></pre>

<p>Service</p>

<pre><code>inner class MediaPlaybackPreparer : MediaSessionConnector.PlaybackPreparer {

    ...

    override fun onCommand(command: String?, extras: Bundle?, cb: ResultReceiver?) {
        when(command) {
            // Refresh media browser content and send result to subscribers
            CustomCommand.REFRESH.toString() -&gt; {
                notifyChildrenChanged(MEDIA_ID_ROOT)
            }
        }
    }}
</code></pre>

<p><strong>Other research:</strong></p>

<p>I have referred to the Google Samples code on Github, as well as...</p>

<ul>
<li><a href=""https://github.com/googlesamples/android-MediaBrowserService"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-MediaBrowserService</a></li>
<li><a href=""https://github.com/moondroid/UniversalMusicPlayer"" rel=""nofollow noreferrer"">https://github.com/moondroid/UniversalMusicPlayer</a></li>
</ul>

<p>Neither of the above repos seem to handle the issue of <strong>refreshing</strong> content after the media browser service has been created and the activity has subscribed at least once - I'd like to avoid restarting the service so that the music can continue playing in the background.</p>

<p><strong>Possible related issues:</strong></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/43169875/mediabrowser-subscribe-doesnt-work-after-i-get-back-to-activity-1-from-activity"">MediaBrowser.subscribe doesn&#39;t work after I get back to activity 1 from activity 2 (6.0.1 Android)</a> --no effect on current issue</li>
</ul>
",2351499,,2351499,,2018-03-27 12:22:38,2018-03-27 12:22:38,Refreshing MediaBrowserService subcription content,<android><kotlin><android-mediasession><mediabrowserservice><mediabrowserservicecompat>,1,3,,,
Android,41834529,1,,,2017,,4,605,"<p>The <code>getBuyIntentExtraParams</code> method described by <a href=""https://developer.android.com/google/play/billing/billing_reference.html"" rel=""nofollow noreferrer"">the Android Billing Docs</a> doesn't seem to work properly in my project.</p>

<p>I see that there is an <a href=""https://github.com/googlesamples/android-play-billing/issues/3"" rel=""nofollow noreferrer"">open issue</a> on github that suggests grabbing <a href=""https://raw.githubusercontent.com/googlesamples/android-play-billing/master/TrivialDrive/app/src/main/aidl/com/android/vending/billing/IInAppBillingService.aidl"" rel=""nofollow noreferrer"">the AIDL file from the Trivial Drive Android example application</a>, but even after doing this I can't get the v6 API working (I get a <code>cannot find symbol</code> error).</p>

<p>My call is as follows:</p>

<pre><code>Bundle extraParams = new Bundle();
extraParams.putBoolean(""replaceSkusProration"", true);
String ownedSku = ""someSkuAlreadyOwnedByTheUser"";
ArrayList&lt;String&gt; replaceSkus = new ArrayList&lt;String&gt;();
replaceSkus.add(ownedSku);
extraParams.putStringArrayList(""skusToReplace"", replaceSkus);
Bundle buyIntentBundle = mService.getBuyIntentExtraParams(6, 
                         getPackageName(), sku, ""subs"", ""BigOlRandomString"", extraParams);
</code></pre>

<p>Everything else about billing seems to work fine... what am I missing here?</p>

<p>edit: I can definitely get API v5 working, as Android Studio is more than happy to let me use the <code>getBuyIntentToReplaceSkus</code> function.</p>
",543640,,543640,,2017-01-24 17:32:27,2017-08-30 17:01:56,getBuyIntentExtraParams does not exist? aka how do I use Version 6 in-app billing APIs?,<android><in-app-billing>,1,1,,,
Android,44467885,1,,,2017,,4,234,"<p>I have followed the sample here: <a href=""https://github.com/googlesamples/android-WearVerifyRemoteApp"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-WearVerifyRemoteApp</a>. I ran the app on Wear Emulator (Android 6.0.1). I reached the point where the app is not installed on phone and want to launch the app link on Google Play on the device:</p>

<pre><code>// Create Remote Intent to open Play Store listing of app on remote device.
            Intent intentAndroid =
                    new Intent(Intent.ACTION_VIEW)
                            .addCategory(Intent.CATEGORY_BROWSABLE)
                            .setData(Uri.parse(PLAY_STORE_APP_URI));

            RemoteIntent.startRemoteActivity(
                    getApplicationContext(),
                    intentAndroid,
                    mResultReceiver);
</code></pre>

<p>I attached the debugger and, yes, I reached this line, but nothing happens. Google Play is not launched on the phone. I am sure I am connected to the phone as other notifications from the phone (real device) appears on the emulator.</p>

<p><strong>Edit:</strong></p>

<p>Not clear why but connection from the phone to the emulator is really buggy. It's really frustrating and the issue was solved but disconnecting and reconnecting many times.</p>
",1149647,,1149647,,2017-06-20 11:40:20,2017-06-20 11:40:20,Android Wear - Launching Google Play on Phone,<android><wear-os>,1,2,,,
Android,44208122,1,44285588,,2017,,4,5103,"<p>So, I need to overlay the camera2 preview and draw a rectangle on the preview video image by layering a transparent overlay on top.  I started with a basic Camera2 code here: <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a></p>

<p>the above use TextureView for camera preview.</p>

<p>Next, I added the following class to project</p>

<pre><code>private class CustomView extends SurfaceView {

    private final Paint paint;
    private final SurfaceHolder mHolder;
    private final Context context;

    public CustomView(Camera2BasicFragment context) {
        super(context.getActivity().getBaseContext());
        mHolder = getHolder();
        mHolder.setFormat(PixelFormat.TRANSPARENT);
        this.context = context.getActivity().getBaseContext();
        paint = new Paint(Paint.ANTI_ALIAS_FLAG);
        paint.setColor(Color.WHITE);
        paint.setStyle(Paint.Style.STROKE);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            invalidate();
            if (mHolder.getSurface().isValid()) {
                final Canvas canvas = mHolder.lockCanvas();
                Log.d(""touch"", ""touchRecieved by camera"");
                if (canvas != null) {
                    Log.d(""touch"", ""touchRecieved CANVAS STILL Not Null"");
                    canvas.drawColor(Color.TRANSPARENT, PorterDuff.Mode.CLEAR);
                    canvas.drawColor(Color.TRANSPARENT);
                    canvas.drawCircle(event.getX(), event.getY(), 100, paint);
                    mHolder.unlockCanvasAndPost(canvas);
                    new Handler().postDelayed(new Runnable() {
                        @Override
                        public void run() {
                            Canvas canvas1 = mHolder.lockCanvas();
                            if(canvas1 !=null){
                                canvas1.drawColor(0, PorterDuff.Mode.CLEAR);
                                mHolder.unlockCanvasAndPost(canvas1);
                            }

                        }
                    }, 1000);

                }
                mHolder.unlockCanvasAndPost(canvas);


            }
        }


        return false;
    }
}
</code></pre>

<p>I need some help in making this work.. Obviously the new class is not used yet. I also  need to update the overlay xml to add a second transparent TextureView on top of the camera preview one. Here is my original layout:
Would be very appreciated if anyone can tell me how to make the new class work, and tell me what to add to the layout. </p>

<p>here is  fragment_camera2_basic.xml </p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;RelativeLayout xmlns:android=""http://schemas.android.com/apk/res/android""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""&gt;

    &lt;com.example.android.camera2basic.AutoFitTextureView
        android:id=""@+id/texture""
        android:layout_width=""wrap_content""
        android:layout_height=""wrap_content""
        android:layout_alignParentStart=""true""
        android:layout_alignParentTop=""true"" /&gt;

    &lt;FrameLayout
        android:id=""@+id/control""
        android:layout_width=""match_parent""
        android:layout_height=""112dp""
        android:layout_alignParentBottom=""true""
        android:layout_alignParentStart=""true""
        android:background=""@color/control_background""&gt;

        &lt;Button
            android:id=""@+id/picture""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_gravity=""center""
            android:text=""@string/picture"" /&gt;

        &lt;ImageButton
            android:id=""@+id/info""
            android:contentDescription=""@string/description_info""
            style=""@android:style/Widget.Material.Light.Button.Borderless""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_gravity=""center_vertical|right""
            android:padding=""20dp""
            android:src=""@drawable/ic_action_info"" /&gt;

    &lt;/FrameLayout&gt;

&lt;/RelativeLayout&gt;
</code></pre>

<p>and activity_camera.xml</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;&lt;!--

--&gt;
&lt;FrameLayout xmlns:android=""http://schemas.android.com/apk/res/android""
    xmlns:tools=""http://schemas.android.com/tools""
    android:id=""@+id/container""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""
    android:background=""#000""
    tools:context=""com.example.android.camera2basic.CameraActivity"" /&gt;
</code></pre>
",2970357,,2308683,,2017-06-25 19:00:38,2017-06-25 19:00:38,android Camera2 API + TextureView overlay for drawing on camera preview,<android><overlay><preview><camera2>,1,0,,,
Android,54508117,1,54508853,,2019,,4,138,"<p>Another ""which is better"" question, I know these are highly subjective.  My definition for better would be:</p>

<ol>
<li>Being used by the best dev teams</li>
<li>Best for unit testing</li>
<li>Most modular / easiest to build out a prod app</li>
<li>What Google recommends (this is where I'm most confused)</li>
</ol>

<p>All of the Android blueprints use package-by-feature:</p>

<p><a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture</a></p>

<pre><code>/tasks
/addedittask
/taskdetail
</code></pre>

<p>and all of the architecture components samples using package by layer:</p>

<p><a href=""https://github.com/googlesamples/android-architecture-components"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components</a></p>

<pre><code>/db
/model
/ui
/persistence
</code></pre>

<p>I'm confused because at the bottom of the Architecture Components site, it actually has links to the Android MVP and MVVM blueprint samples, which seems to me to be contradictory.  </p>
",914587,,,,,2019-02-05 20:14:00,Which is better for Android MVVM package by feature or package by layer?,<android><mvvm><android-architecture-components>,1,0,,,
Android,46119375,1,,,2017,,5,1251,"<p>I'm trying to add the new Architecture Components <code>ViewModel</code> to my application while injecting them with dagger. I based my code on what google showed <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample/app/src/main/java/com/android/example/github/di"" rel=""nofollow noreferrer"">here</a>. I'm trying to avoid having a <code>ViewModelFactory</code> for each <code>ViewModel</code> type, so I used the <code>ViewModelFactory</code> that receives <code>Map&lt;Class&lt;? extends ViewModel&gt;, Provider&lt;ViewModel&gt;&gt; creators</code>. It works for <code>ViewModels</code> that have dependencies with <code>@Singleton</code> scope. However, one of my <code>ViewModels</code> has a dependency that comes from the fragment. This is the module of that fragment:</p>

<pre><code>@Module
public abstract class DownloadIssueDialogFragmentModule {

    @Binds
    abstract DialogFragment dialogFragment(DownloadIssueDialogFragment dialogFragment);

    @Provides
    @FragmentScope
    static Issue provideIssue(DownloadIssueDialogFragment dialogFragment) {
        return dialogFragment.getIssue();
    }
}
</code></pre>

<p>And my <code>ViewModelModule</code>:</p>

<pre><code>@Module
public abstract class ViewModelModule {

    @Binds
    abstract ViewModelProvider.Factory bindViewModelFactory(ViewModelFactory factory);

    @Binds
    @IntoMap
    @ViewModelKey(DownloadIssueViewModel.class)
    abstract ViewModel bindDownloadIssueViewModel(DownloadIssueViewModel viewModel);

}
</code></pre>

<p>dagger says it can't provide <code>Issue</code>. It makes sense since <code>Map&lt;Class&lt;? extends ViewModel&gt;, Provider&lt;ViewModel&gt;&gt;</code> seems to be created at compile time. But I will only know the parameter during the scope of that fragment. How can I achieve this?</p>

<p>Thank you.</p>

<p><strong>EDIT:</strong></p>

<p>In the end I went with a different approach. Now I create a factory for each ViewModel and instead of injecting ViewModels, I inject the factory.</p>

<p>I created this library: <a href=""https://github.com/kakai248/AutoViewModelFactory"" rel=""nofollow noreferrer"">AutoViewModelFactory</a></p>

<p>To automatically generate the factories. It's the best solution I've found so far.</p>
",2283624,,2283624,,2017-09-21 11:38:15,2017-09-21 11:38:15,Architecture Components ViewModels inject with dagger with params that come from the Activity/Fragment,<android><mvvm><dagger-2><dagger><android-architecture-components>,1,2,4,,
Android,45358247,1,45420167,,2017,,5,664,"<p>I am writing an app which records video from the phone and uploads it to a server. Works fine on any device except Galaxy S7. On the Galaxy S7 recording produces a video file with audio only and either no video or one video frame. This is true in the temporary file created on the phone and not just the one uploaded to the server.
I am using the Camera2 API, and I have tried with the front and back cameras.</p>

<p>I have tried with my code, and these two example applications:
<a href=""https://developer.android.com/samples/Camera2Video/project.html"" rel=""noreferrer"">https://developer.android.com/samples/Camera2Video/project.html</a>
<a href=""https://github.com/googlesamples/android-Camera2Video/blob/master/Application/src/main/java/com/example/android/camera2video/Camera2VideoFragment.java"" rel=""noreferrer"">https://github.com/googlesamples/android-Camera2Video/blob/master/Application/src/main/java/com/example/android/camera2video/Camera2VideoFragment.java</a></p>

<p>The video file produced appears to be ok, here is the codec info:
Stream 0
Type: Video
Codec: H264 - MPEG-4 AVC (part 10) (avc1)
Language: English
Resolution: 960x720
Display resolution: 960x720
Frame rate: 29.055091</p>

<p>Stream 1
Type: Audio
Codec: MPEG AAC Audio (mp4a)
Language: English
Channels: Stereo
Sample rate: 16000 Hz</p>
",3561494,,,,,2017-08-06 16:14:37,Android camera2 api galaxy s7,<java><android><video><android-camera2>,1,1,3,,
Android,50615225,1,52530498,,2018,,5,1315,"<p>Which is the best way to update a single element when using the new paging library?</p>

<p>Let's say we have the <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/PagingWithNetworkSample"" rel=""noreferrer"">Paging with network</a> google sample using the <code>PageKeyedSubredditDataSource</code>. Imagine we want to make a change of a single element of <code>RedditPost</code>. So, we want to check if it is in the list and if so, update it. The update should not be as easy as calling invalidate() which will make a call to the first page (maybe the RedditPost is in the 5th page. We don't want to update all elements, just one).</p>
",5125212,,,,,2018-09-27 6:11:41,Best way to update a single element using Paging Library,<android><android-architecture-components><android-paging><android-livedata>,1,8,3,,
Android,31232008,1,,,2015,,5,4521,"<p>I use the <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a>, but try to modify it in a way that I could get access to each frame before it is drawn on the surfaceview.
I understood, I should add additional surface (ImageReader.getSurface()), and read the frame from it in this callback:</p>

<pre><code>private final ImageReader.OnImageAvailableListener mOnImageAvailableListener
            = new ImageReader.OnImageAvailableListener() {

        @Override
        public void onImageAvailable(ImageReader reader) {

           Log.d(""Img"", ""onImageAvailable"");
            mBackgroundHandler.post(new ImageSaver(reader.acquireNextImage(), mFile));
        }

    };
</code></pre>

<p>The problem is this callback gets called only when the image is capture by the user and not on eacg frame that is sent to preview screen from camera.</p>

<p>Here is what I tried to add:</p>

<pre><code>private void createCameraPreviewSession() {
        try {
            SurfaceTexture texture = mTextureView.getSurfaceTexture();
            assert texture != null;

            // We configure the size of default buffer to be the size of camera preview we want.
            texture.setDefaultBufferSize(mPreviewSize.getWidth(), mPreviewSize.getHeight());

            // This is the output Surface we need to start preview.
            Surface surface = new Surface(texture);

            // We set up a CaptureRequest.Builder with the output Surface.
            mPreviewRequestBuilder
                    = mCameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_PREVIEW);
            mPreviewRequestBuilder.addTarget(surface);

            // Here, we create a CameraCaptureSession for camera preview.
            mCameraDevice.createCaptureSession(Arrays.asList(surface, mImageReader.getSurface()),
                    new CameraCaptureSession.StateCallback() {

                        @Override
                        public void onConfigured(CameraCaptureSession cameraCaptureSession) {
                            // The camera is already closed
                            if (null == mCameraDevice) {
                                return;
                            }

                            // When the session is ready, we start displaying the preview.
                            mCaptureSession = cameraCaptureSession;
                            try {
                                // Auto focus should be continuous for camera preview.
                                mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AF_MODE,
                                        CaptureRequest.CONTROL_AF_MODE_CONTINUOUS_PICTURE);
                                // Flash is automatically enabled when necessary.
                                mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AE_MODE,
                                        CaptureRequest.CONTROL_AE_MODE_ON_AUTO_FLASH);

                                // Finally, we start displaying the camera preview.
                                mPreviewRequest = mPreviewRequestBuilder.build();
                                mCaptureSession.setRepeatingRequest(mPreviewRequest,
                                        mCaptureCallback, mBackgroundHandler);
                                //mPreviewRequestBuilder.addTarget(mImageReader.getSurface());
                            } catch (CameraAccessException e) {
                                e.printStackTrace();
                            }
                        }

                        @Override
                        public void onConfigureFailed(CameraCaptureSession cameraCaptureSession) {
                            showToast(""Failed"");
                        }
                    }, null
            );

            /**TODO added for capturing aeach frame*/
            // This is the CaptureRequest.Builder that we use to take a picture.
            final CaptureRequest.Builder captureBuilder =
                    mCameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_STILL_CAPTURE);
            captureBuilder.addTarget(mImageReader.getSurface());

            // Use the same AE and AF modes as the preview.
            captureBuilder.set(CaptureRequest.CONTROL_AF_MODE,
                    CaptureRequest.CONTROL_AF_MODE_CONTINUOUS_PICTURE);
            captureBuilder.set(CaptureRequest.CONTROL_AE_MODE,
                    CaptureRequest.CONTROL_AE_MODE_ON_AUTO_FLASH);

            /**end added for capture each frame*/


        } catch (CameraAccessException e) {
            e.printStackTrace();
        }
    }
</code></pre>
",2924714,,,,,2018-10-17 0:22:56,android camera2 process each frame and display its preview,<android><image-processing><android-camera><surfaceview>,1,1,2,,
Android,36472561,1,36482728,,2016,,5,721,"<p>I'm using NDK with the experimental gradle plugin, and initially I was able to debug my native code.</p>

<p>Then I saw this issue <a href=""https://github.com/googlesamples/android-ndk/issues/119"">https://github.com/googlesamples/android-ndk/issues/119</a> and this blog post <a href=""http://frogermcs.github.io/json-parsing-with-flatbuffers-in-android/"">http://frogermcs.github.io/json-parsing-with-flatbuffers-in-android/</a>.
This approach would be great, because I could use the stable gradle plugin for android specific code, and the experimental gradle plugin for the native code, witch would be great to use use databinding for example.
I was able to use this structure, but I lost the ability to debug native code.</p>

<p>I have created a sample project that illustrate my problem.
<a href=""https://github.com/4brunu/AndroidNDKDebug"">https://github.com/4brunu/AndroidNDKDebug</a></p>

<p>In there you can find two projects.
The first one ""hello-jni-one-gradle-plugin"", only use the experimental gradle plugin, and I'm able to debug the native code.
The second one ""hello-jni-two-gradle-plugins"", I use the stable gradle plugin for android specific code, and the experimental gradle plugin for the native code, and I'm unable to debug the native code.</p>

<p>Am I doing something wrong?
Could you help me enable native code debug in the second project please?</p>

<p>Thanks</p>
",976628,,,,,2016-04-07 17:00:56,Android NDK unable to debug native code with two gradle plugins,<android><debugging><android-ndk><java-native-interface><native>,1,0,2,,
Android,41892544,1,41893129,,2017,,5,3196,"<p>In converting a library project build from <code>Android.mk</code> to <code>CMakeLists.txt</code> following the Google <a href=""https://github.com/googlesamples/android-ndk/blob/master/hello-libs/app/src/main/cpp/CMakeLists.txt"" rel=""noreferrer"">hello-libs example</a> and I have encountered problems avoiding undefined references. I'm using an open source project called <a href=""http://dcmtk.org"" rel=""noreferrer"">DCMTK</a> and compiling DCMTK and <a href=""https://www.gnu.org/software/libiconv/"" rel=""noreferrer"">ICONV</a> to static libraries that I then link in. Building using the <code>Android.mk</code> works via <code>ndk-build</code> and building them with <code>gradle</code> and the following <code>CMakeLists.txt</code> works when I add each static library to the <code>target_link_libraries</code>. However, I wanted to use <code>add_library</code> to do the job and tried</p>

<pre><code>add_library( lib_dcmdata STATIC IMPORTED )
set_target_properties( lib_dcmdata
                           PROPERTIES
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmdata.a )
</code></pre>

<p>for each library and then adding them to target_link_libraries. This resulted in a ton of undefined references. I also tried set_target_properties by grouping the static libraries into one target, but this didn't work either.</p>

<p>Is the order of dependency linking different in some way or the way CMake handles these libraries different using the <code>add_library</code> <code>set_target_properties</code> method?</p>

<h3>CMakeLists.txt</h3>

<pre><code>cmake_minimum_required( VERSION 3.6 )
project( dicom-jni )

set( SOURCE_FILES
         dicom.cpp
         dicom.hpp )

add_library( lib_dcmtk STATIC IMPORTED )
set_target_properties( lib_dcmtk
                           PROPERTIES
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmrt.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmpstat.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmqrdb.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmwlm.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmdsig.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmnet.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmjpeg.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmjpls.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libcharls.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libijg16.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libijg12.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libijg8.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmimage.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmimgle.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libi2d.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmdata.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/liboflog.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libofstd.a )

add_library( lib_iconv STATIC IMPORTED )
set_target_properties( lib_iconv
                           PROPERTIES
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/iconv/${ANDROID_ABI}/lib/libiconv.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/iconv/${ANDROID_ABI}/lib/libcharset.a )

find_library( lib_jnigraphics jnigraphics )
find_library( lib_android-log log )

add_library( dicom-jni SHARED ${SOURCE_FILES} )

target_include_directories( dicom-jni PRIVATE
                                prebuilt_libs/dcmtk/${ANDROID_ABI}/include
                                prebuilt_libs/iconv/${ANDROID_ABI}/include
                                logger )

target_link_libraries( dicom-jni
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmrt.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmpstat.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmqrdb.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmwlm.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmdsig.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmnet.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmjpeg.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmjpls.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libcharls.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libijg16.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libijg12.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libijg8.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmimage.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmimgle.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libi2d.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmdata.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/liboflog.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libofstd.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/iconv/${ANDROID_ABI}/lib/libiconv.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/iconv/${ANDROID_ABI}/lib/libcharset.a
                           z
                           dl
                           stdc++
                           ${lib_jnigraphics}
                           ${lib_android-log} )
</code></pre>
",410867,,,,,2017-01-27 11:38:25,"Android, CMake and Static Linking",<android-ndk><cmake>,1,0,2,,
Android,32258675,1,32300841,,2015,,5,2913,"<p>I've been working on a project and got to make face detection working, with focus, <a href=""https://stackoverflow.com/questions/32051973/google-vision-api-samples-get-the-camerasource-to-focus"">thanks to SO</a>.</p>

<p>I am now taking pictures, but using the front camera on my Nexus 5 and a preview size of 1280x960, the play services seem to set the picture size to 320x240.</p>

<p>I checked, 1280x960 is supported on both preview and picture.</p>

<p>I tried changing the parameters using reflection (same as for the focus), but nothing changed.
Seems to be necessary to change that before starting the preview...</p>

<p>I've been trying to read and debug the obfuscated code, but I can't get why the library decides to go for this low resolution :-(</p>

<p>The code used is close to what's included in the sample, just added the possibility to take a picture using CameraSource.takePicture(...)</p>

<p>You can find the code in <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker"" rel=""nofollow noreferrer"">the samples repo</a></p>

<p>Code to reproduce the issue => <a href=""https://github.com/saiimons/android-vision/tree/take_picture_issue/visionSamples/FaceTracker"" rel=""nofollow noreferrer"">here</a></p>

<p>I changed the camera init with :</p>

<pre><code>mCameraSource = new CameraSource.Builder(context, detector)
    .setRequestedPreviewSize(1280, 960)
            .setFacing(CameraSource.CAMERA_FACING_FRONT)
            .setRequestedFps(30.0f)
            .build();
</code></pre>

<p>Added a button and connected a clik listener :</p>

<pre><code>findViewById(R.id.snap).setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            mCameraSource.takePicture(null, new CameraSource.PictureCallback() {
                @Override
                public void onPictureTaken(byte[] bytes) {
                    Bitmap bmp = BitmapFactory.decodeByteArray(bytes, 0, bytes.length);
                    Log.d(""BITMAP"", bmp.getWidth() + ""x"" + bmp.getHeight());
                }
            });
        }
    });
</code></pre>

<p>Log output :</p>

<pre><code>BITMAP 320x240
</code></pre>

<p>Thanks for the help !</p>
",5274454,,-1,,2017-05-23 11:59:44,2015-12-22 18:05:32,New vision API - Picture size,<android><camera><google-play-services><google-vision><android-vision>,1,3,2,,
Android,32108318,1,32110832,,2015,,5,1934,"<p>I am reading the code about Android Camera2 APIs from here:
<a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a></p>

<p>And it is confusing in this lines:
<a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java#L570-L574"" rel=""noreferrer"">https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java#L570-L574</a></p>

<p>that the previewRequest builder only add surface, which is the TextureView to show, as target. But the following line actually add both as the targets. As I understand, this should not fire the ""OnImageAvailable"" Lisenter during preview, no? So why this add the imagereader's surface here?</p>

<p>I tried to removed this imagereader's surface here but got error when I really want to capture an image.....</p>

<p>SOOO CONFUSING!!!</p>
",969986,,,,,2015-08-21 7:13:11,Android Camera2 Basics API,<android><android-camera>,1,1,1,,
Android,36180407,1,36235440,,2016,,5,4592,"<p>I'm doing some simple scanning + advertising testing on bluetooth LE feature for Android using this <a href=""https://github.com/googlesamples/android-BluetoothAdvertisements"" rel=""noreferrer"">sample-code</a></p>

<p>I'm testing it using a Samsung 6 and a Nexus 9, and for some reason if I leave the app running on the Samsung and restart the app on the Nexus, the next time the Samsung devices finds the other device, it has a different address.</p>

<p>In code:</p>

<p><a href=""https://i.stack.imgur.com/D3b8F.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/D3b8F.png"" alt=""enter image description here""></a></p>

<p>On the device:</p>

<p><a href=""https://i.stack.imgur.com/aFxw2.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/aFxw2.png"" alt=""enter image description here""></a></p>

<p>The funny thing it doesn't happen the other way around. (Samsung always has the same address when discovered from the Nexus 9)</p>

<ul>
<li>Is this a common behavior between devices?</li>
<li>Is there another way to identify a specific device besides it's mac address?</li>
</ul>
",219777,,,,,2016-03-26 12:45:13,Why the address of my BluetoothDevice changes every time I relaunch the app?,<android><bluetooth-lowenergy>,1,1,1,,
Android,50770478,1,,,2018,,5,734,"<p>What am I trying to do:</p>

<p><strong>Using google exoPlayer to play music, foreground and background.</strong></p>

<p>Break into details:</p>

<ol>
<li>The app launches, google exoPlayer playback control UI should be visible and starts to play immediately. </li>
<li>As soon as the player starts to play, we should see the notification (Using exoplayer's <code>PlayerNotificationManager</code> )</li>
<li>User exits the app either by pressig back button or swipe from recent task, the player service should keep running in froeground with notification.</li>
<li>User taps the notification, it should brings up the app.</li>
</ol>

<p><strong>What I have done:</strong>
I followed google IO18 on this link
<a href=""https://www.youtube.com/watch?v=svdq1BWl4r8&amp;t=1990s"" rel=""noreferrer"">https://www.youtube.com/watch?v=svdq1BWl4r8&amp;t=1990s</a></p>

<p>While I am following the above youtube link, especially the audio app part, I realize one thing, how do you pros add player control UI into this app?</p>

<p>e.g, the app is onDestory, user quits. Then user taps on the notification, back to the MainActivity, there is nothing there, it's an empty screen, quesiton is, <strong>how do you add play control ui in here?</strong></p>

<p>I have looked into <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""noreferrer"">https://github.com/googlesamples/android-UniversalMusicPlayer</a> tyring to figure out this. However, the Universal Android Music Player Sample is using a giant notification (Not PlayerNotificationManager see on IO18) and custom player ui (Not ExoPlayer out of box control UI) which is confusing me a lot.</p>

<p>Please, please, please help.
<strong>How to add player control ui in the following code.</strong>
<a href=""https://github.com/bizkitj/MediaSessionExoPlayer/tree/ExoPlayerGoogleIO2018"" rel=""noreferrer"">https://github.com/bizkitj/MediaSessionExoPlayer/tree/ExoPlayerGoogleIO2018</a></p>

<p>If you can , please not only show me how you do it, I also need to know why did you do it? Break into steps.</p>

<p>Version of ExoPlayer being used:</p>

<pre><code>implementation 'com.google.android.exoplayer:exoplayer-core:2.8.0' 
implementation 'com.google.android.exoplayer:exoplayer-ui:2.8.0'
implementation 'com.google.android.exoplayer:extension-mediasession:2.8.0'
</code></pre>

<p>Please be noted, I am tyring to buid things upon the googleIO18 demo app. This demo app is using exoPlayer's <code>PlayerNotificationManager</code> which is great to keep sync with <code>MediaSession</code>, I do not want to change this <code>PlayerNotificationManager</code>  to android <code>Notification.MediaStyle</code>.</p>

<p>Thank you.</p>
",8328523,,5810747,,2018-06-09 11:17:59,2018-08-27 19:25:09,how to add player control ui in google IO18 audio App demo,<exoplayer><exoplayer2.x>,1,3,1,,
Android,52381029,1,52396338,,2018,,5,733,"<p>Regarding <a href=""https://developer.android.com/training/articles/keystore"" rel=""noreferrer"">Android Keystore system</a> article,</p>

<blockquote>
  <p>Key material never enters the application process. When an application performs cryptographic operations using an Android Keystore key, behind the scenes plaintext, ciphertext, and messages to be signed or verified are fed to a system process which carries out the cryptographic operations. If the app's process is compromised, the attacker may be able to use the app's keys but cannot extract their key material (for example, to be used outside of the Android device)</p>
</blockquote>

<p>So, my question is why is in <a href=""https://github.com/googlesamples/android-BasicAndroidKeyStore/"" rel=""noreferrer"">BasicAndroidKeyStore</a>, developer able to <a href=""https://github.com/googlesamples/android-BasicAndroidKeyStore/blob/master/Application/src/main/java/com/example/android/basicandroidkeystore/BasicAndroidKeyStoreFragment.java#L211"" rel=""noreferrer"">get the KeyPair object</a> and then <a href=""https://github.com/googlesamples/android-BasicAndroidKeyStore/blob/master/Application/src/main/java/com/example/android/basicandroidkeystore/BasicAndroidKeyStoreFragment.java#L213"" rel=""noreferrer"">print its public/private keys</a>?</p>

<p>If developer can access the keys, how this system can be considered to be secured? It's not. If an attacker compromises the app process, he can easily retrieve the kays and use outside of the device. </p>
",1841194,,,,,2018-09-24 4:04:01,Can we extract public/private keys from the Android Keystore?,<android><android-keystore>,1,1,1,,
Android,51879224,1,,,2018,,5,1008,"<p>I've been following the sample from <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/NavigationBasicSample"" rel=""noreferrer"">NavigationBasicSample</a></p>

<p>but used newest library for navigation:</p>

<pre><code>implementation ""android.arch.navigation:navigation-fragment-ktx:1.0.0-alpha05""
implementation ""android.arch.navigation:navigation-ui-ktx:1.0.0-alpha05""
</code></pre>

<p>and androidx library:</p>

<pre><code>implementation 'androidx.core:core-ktx:1.0.0-rc01'
implementation ""org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version""
implementation 'androidx.appcompat:appcompat:1.0.0-rc01'
implementation 'androidx.constraintlayout:constraintlayout:1.1.2'
implementation 'com.google.android.material:material:1.0.0-rc01'
implementation 'androidx.legacy:legacy-support-v4:1.0.0-rc01'
implementation 'androidx.lifecycle:lifecycle-extensions:2.0.0-rc01'
</code></pre>

<p>and add to bundle.gradle</p>

<pre><code>androidExtensions {
        experimental = true
}
</code></pre>

<p>all works except animation. It is bug maybe or ?</p>

<p>this is my nav_graph:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;navigation xmlns:app=""http://schemas.android.com/apk/res-auto""
    xmlns:android=""http://schemas.android.com/apk/res/android""
    xmlns:tools=""http://schemas.android.com/tools""
    android:id=""@+id/nav_graph""
    app:startDestination=""@+id/categoryFragment""&gt;
    &lt;fragment
        android:id=""@+id/categoryFragment""
        android:name=""com.sample.CategoriesFragment""
        android:label=""Categories""
        tools:layout=""@layout/fragment_categories""&gt;
        &lt;action
            android:id=""@+id/action_categoryFragment_to_itemsFragment""
            app:destination=""@id/itemsFragment""
            app:popEnterAnim=""@anim/slide_in_left""
            app:popExitAnim=""@anim/slide_out_right""
            app:enterAnim=""@anim/slide_in_right""
            app:exitAnim=""@anim/slide_out_left"" /&gt;
    &lt;/fragment&gt;
    &lt;fragment
        android:id=""@+id/itemsFragment""
        android:name=""com.sample.ItemsFragment""
        android:label=""Items""
        tools:layout=""@layout/fragment_items"" &gt;

        &lt;argument android:name=""cat_id"" android:defaultValue=""-1"" /&gt;

    &lt;/fragment&gt;

&lt;/navigation&gt;
</code></pre>

<p>and my navhost fragment:</p>

<pre><code>&lt;fragment
        android:id=""@+id/fragment_nav_host""
        app:defaultNavHost=""true""
        android:name=""androidx.navigation.fragment.NavHostFragment""
        app:navGraph=""@navigation/nav_graph""
        android:layout_width=""match_parent""
        android:layout_height=""match_parent""
        app:layout_behavior=""@string/appbar_scrolling_view_behavior""
/&gt;
</code></pre>
",6368390,,4972317,,2018-08-16 21:33:57,2018-10-12 14:35:57,The Navigation Architecture Component animation,<android><kotlin><navigation>,1,3,,,
Android,45217815,1,45361818,,2017,,5,1359,"<p>This sample Repository has a method <code>public LiveData&lt;Resource&lt;List&lt;Repo&gt;&gt;&gt; loadRepos(String owner)</code></p>

<p><a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/repository/RepoRepository.java"" rel=""noreferrer"">https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/repository/RepoRepository.java</a> </p>

<p>My question is why add Android APIs (i.e. <code>android.arch.lifecycle.LiveData</code>) into a data layer? </p>

<p>Isn't it anti-Clean Architecture to mix framework APIs with your data/entities? </p>

<p>Also wouldn't it now  require using Robolectric to unit test <code>RepoRepository</code>?</p>
",5190902,,1000551,,2017-11-10 8:56:26,2017-11-10 8:56:26,Returning LiveData from repository,<android><android-lifecycle><android-architecture-components><android-livedata>,1,1,,,
Android,41705194,1,41781171,,2017,,5,1352,"<h1>My Guidelines</h1>

<p>If followed <a href=""https://developers.google.com/identity/sign-in/android/backend-auth"" rel=""noreferrer"">this</a> Google documentation about verifying Google-Account-Tokens on the server side, but I am kinda confused.</p>

<h1>My Problem</h1>

<pre><code>GoogleIdTokenVerifier googleIdTokenVerifier = new GoogleIdTokenVerifier.Builder(new NetHttpTransport(), new JacksonFactory())
                                .setAudience(Collections.singletonList(CLIENT_ID))
                                .build();
</code></pre>

<p>In this piece of code I figured out that the <code>transport</code> and <code>jsonFactory</code> arguments can be filled as <code>new NetHttpTransport()</code> and <code>new JacksonFactory()</code> <a href=""https://github.com/googlesamples/android-credentials/blob/master/credentials-quickstart/app/src/main/java/com/google/example/credentialsbasic/MockServer.java"" rel=""noreferrer"">here</a>. It also describes how to get <code>AudienceString</code>, but I couldn't figure out what it is for. I couldn't test it, but my question is if I can use it without <code>.setAudience()</code> or if I need it and what it is for.</p>
",6509751,,,,,2017-01-21 15:35:32,How to instantiate GoogleIdTokenVerifier properly / what does .setAudience() do?,<java><android><google-signin><google-authentication>,1,2,,,
Android,43774620,1,43774743,,2017,,5,2995,"<p>I am building an Android app and am fairly new to both MVVM and data binding concepts on Android.</p>

<p>I have read at a few places ( like <a href=""https://www.codevate.com/blog/13-better-android-software-development-mvvm-with-rxjava"" rel=""noreferrer"">here</a>) that both RxJava and Google's <a href=""https://developer.android.com/topic/libraries/data-binding/index.html"" rel=""noreferrer"">DataBinding library</a> can be used for implementing MVVM pattern.</p>

<p>I went through the official Android documentation for DataBinding and am going through <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvvm-databinding"" rel=""noreferrer"">a project</a> referenced by Google on Mvvm using DataBinding. However, I have no idea how RxJava works as of yet, which might be obvious from the question.</p>

<p>My question is, keeping in mind the long term goals of extending my app, is it worth investing effort in learning RxJava? Or does DataBinding suffice as a complete substitute for it? I don't know RxJava at all but by reading about it online gives me the impression that it can solve a wide range of problems. </p>

<p>I do not mind investing time in learning RxJava but is it worth the effort than simply using Google's DataBinding (which I have some sort of grasp on)?</p>
",974766,,,,,2017-09-23 17:16:27,MVVM on Android with DataBinding or RxJava?,<android><mvvm><data-binding><rx-java><android-databinding>,1,0,,,
Android,50173009,1,,,2018,,5,1115,"<p>I try to apply the MVVM pattern in my Android activity (I'm an Android noob).</p>

<p>I use Room with RxJava 2, e.g. this is a signature of a method in my repository:</p>

<pre><code>public Single&lt;MissionTask&gt; getMissionTaskByID(long id) {..}
</code></pre>

<p>In my <strong>ViewModel</strong> class I have a reference to the repository and code like this:</p>

<pre><code>private void doSomethingOnUserEvent() {
    ...
      missionTaskRepository.getMissionTaskByID(firstID).
          observeOn(AndroidSchedulers.mainThread()).
          subscribeOn(Schedulers.io()).
          subscribe(missionTask -&gt;
              {
                // do some work and update live data
              },
              t -&gt; {
                // handle error
              });
    ...
  }
</code></pre>

<p>So far so good, everything seems to work fine on the surface. Now - <code>subscribe</code> returns a <code>Disposable</code>.</p>

<p>My questions are:</p>

<ol>
<li>How should I handle the disposable (e.g. I can put it in a composite disposable and dispose the composite when the model is cleared)?</li>
<li>What will happen if I do not dispose it? Leak? Why? </li>
</ol>

<p>In some of the examples I've gone through there is no handling of the Disposable.</p>

<p><strong>Update:</strong> I've seen the usage of <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/BasicRxJavaSample/app/src/main/java/com/example/android/observability/ui/UserActivity.java"" rel=""noreferrer"">composite disposable</a> in <a href=""https://github.com/googlesamples/android-architecture-components"" rel=""noreferrer"">android-architecture-components</a>.</p>

<p>Thanks.</p>
",520359,,520359,,2018-05-04 10:53:40,2018-05-04 10:53:40,MVVM - handling Disposable-s in ViewModel with RxJava and Room,<android><mvvm><rx-java2><android-room><android-viewmodel>,1,2,,,
Android,41926591,1,,,2017,,6,2179,"<p>So I have played around all weekend with the camera2 api. Now I'm at a point where I begin to understand how things are wired together.
While testing the api to implement a video recording app I hit a wall though.</p>

<p>I started by changing the <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""noreferrer"">Android Camera2Video Sample</a> to my needs. What bugged me is that after each recording process the camera session is being recreated. Even worse, when a recording session is beeing started whats happening is that the preview session will be destroyed first and a recording session is created. After the recording session is done it gets destroyed and a new preview session is created.</p>

<p>The documentation clearly states: </p>

<blockquote>
  <p>Creating a session is an expensive operation and can take several hundred milliseconds... <a href=""https://developer.android.com/reference/android/hardware/camera2/CameraCaptureSession.html"" rel=""noreferrer"">CameraCaptureSession Documentation</a></p>
</blockquote>

<p>The result looks pretty ugly and the screen stutters when I hit record and stop. I wanted to improve this behavior so I fiddled around with the code.</p>

<p>What I do now is I create my one and only <code>CameraSession</code> where I add my preview surface (a <code>TextureView</code>) and also the Surface from a already created <code>MediaRecorder</code> by calling its <code>getSurface</code> method. This works fine for the first video but when I try to capture a second Video I get a <code>IllegalArgumentException: Bad argument passed to camera service</code>. I think this is because the surface of the <code>MediaRecorder</code> which I pass to the <code>CameraSession</code> upon it's creation is somehow destroyed or changed when I reset the <code>MediaRecorder</code> to prepare a new recording.</p>

<p>My question now is, is there any way around this problem? (<code>setInputSurface(Surface surface)</code>) might be but the api level is too high so I didn't test it.</p>

<p>Here is a quick overview over the relevant code pieces:</p>

<ol>
<li><p>setup the <code>MediaRecorder</code></p>

<pre><code>private void setUpMediaRecorder() throws IOException {
    if (mMediaRecorder == null) {
        mMediaRecorder = new MediaRecorder();
    }
    mMediaRecorder.setVideoEncodingBitRate(5000000);
    mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.SURFACE);
    mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
    mMediaRecorder.setVideoFrameRate(24);
    mMediaRecorder.setVideoSize(mVideoSize.getWidth(), mVideoSize.getHeight());
    mMediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264);
    mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);
    mMediaRecorder.setOrientationHint(SENSOR_ORIENTATION_DEFAULT_DEGREES);
    mNextVideoAbsolutePath = getVideoFilePath();
    mMediaRecorder.setOutputFile(mNextVideoAbsolutePath);
    mMediaRecorder.prepare();
}
</code></pre></li>
<li><p>create the all mighty recording session</p>

<pre><code>SurfaceTexture texture = mTextureView.getSurfaceTexture();
texture.setDefaultBufferSize(mPreviewSize.getWidth(), mPreviewSize.getHeight());

List&lt;Surface&gt; surfaces = new ArrayList&lt;&gt;();
// Set up Surface for the camera preview
mPreviewSurface = new Surface(texture);
surfaces.add(mPreviewSurface);

// Set up Surface for the MediaRecorder
mRecorderSurface = mMediaRecorder.getSurface();
surfaces.add(mRecorderSurface);

// create the capture session
mCameraDevice.createCaptureSession(surfaces, new CameraCaptureSession.StateCallback() {

    @Override
    public void onConfigured(@NonNull CameraCaptureSession cameraCaptureSession) {
        mCameraSession = cameraCaptureSession;

        // now that the session is created, start using it  for the preview
        showPreview();
    }

    @Override
    public void onConfigureFailed(@NonNull CameraCaptureSession cameraCaptureSession) {
        ....
            }
        }
    }, mBackgroundHandler);
} catch (CameraAccessException) {
    e.printStackTrace();
}

void showPreview() {
    mPreviewBuilder = mCameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_PREVIEW);
    mPreviewBuilder.set(CaptureRequest.CONTROL_MODE, CameraMetadata.CONTROL_MODE_AUTO);
    mPreviewBuilder.addTarget(mPreviewSurface);
    mCameraSession.setRepeatingRequest(mPreviewBuilder.build(), null, mBackgroundHandler);
}
</code></pre></li>
<li><p>start recording a video</p>

<pre><code>mVideoBuilder = mCameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_RECORD);
mVideoBuilder.set(CaptureRequest.CONTROL_AF_MODE, CaptureRequest.CONTROL_AF_MODE_CONTINUOUS_VIDEO);
mVideoBuilder.set(CaptureRequest.CONTROL_AE_MODE, CaptureRequest.CONTROL_AE_MODE_ON);
mVideoBuilder.addTarget(mPreviewSurface);
mVideoBuilder.addTarget(mRecorderSurface);
// set the request for the capture
mCameraSession.setRepeatingRequest(mVideoBuilder.build(), null, mBackgroundHandler);
// Start recording
mMediaRecorder.start();
</code></pre></li>
<li><p>stop recording</p>

<pre><code>mMediaRecorder.stop();
mMediaRecorder.reset();
showPreview();
setUpMediaRecorder(); // this is key to not get an error from the MediaRecorder
</code></pre></li>
</ol>

<p>All of this works perfect and the video recording starts and stops without any hiccups! It's awesome but when I go back to step 3 (after 4) I get the aforementioned <code>IllegalArgumentException: Bad argument passed to camera service</code>. I keep banging my head against the wall but I cannot find a way around this problem.</p>

<p>Any help is greatly appreciated!</p>

<p>Thanks!</p>
",1096141,,1096141,,2017-01-30 21:17:51,2017-05-16 21:38:44,How to reuse the Surface of MediaRecorder in the camera2 API on Android?,<android><video><mediarecorder><android-camera2>,1,1,4,,
Android,28734594,1,28737314,,2015,,6,8693,"<p>I've implemented <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"" rel=""noreferrer"">this</a> offical Google <code>Camera2</code> example with minor changes into my app to take pictures in a custom camera. I need to also provide the option for video recording, but I can't find an example- maybe because the <code>Camera2</code> API is relatively new. </p>

<p>Does anyone have examples/tutorials on how to either A) modify the above code to also allow video recording, or B) implement video recording in a new fragment, while using the <code>Camera2</code> API?</p>

<p>Thank you in advance!</p>
",3558874,,,,,2015-02-26 8:11:36,Camera2 video recording,<android><android-camera>,1,1,2,,
Android,48675221,1,,,2018,,6,833,"<p>I can't understand why this very simple activity produces memory leaks.</p>

<p>It follows the guidelines given here: <a href=""https://developer.android.com/training/location/receive-location-updates.html"" rel=""noreferrer"">https://developer.android.com/training/location/receive-location-updates.html</a> and the example code given here: <a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationUpdates"" rel=""noreferrer"">https://github.com/googlesamples/android-play-location/tree/master/LocationUpdates</a></p>

<p>I also noticed that the memory leak is solved if I don't override the onLocationResult method of the LocationCallback class.
But in this ways the LocationCallback is completely useless.</p>

<p>Thank you for your help!</p>

<pre><code>public class TestLeaks extends Activity {
    private FusedLocationProviderClient mFusedLocationClient;   // Access to Fused Loc. Provider API
    private LocationRequest mLocationRequest;         // Stores parameters for requests to F.L.P.Api
    private LocationCallback mLocationCallback;                      // Callback for Location events

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.test_leaks);

        mFusedLocationClient = LocationServices.getFusedLocationProviderClient(this);
        mLocationCallback = new LocationCallback() {
            @Override
            public void onLocationResult(LocationResult locationResult) {
                super.onLocationResult(locationResult);
                Location loc = locationResult.getLastLocation();
                ((TextView) findViewById(R.id.latitude)).setText(String.format(Locale.US, ""%.6f"", loc.getLatitude()));
                ((TextView) findViewById(R.id.longitude)).setText(String.format(Locale.US, ""%.6f"", loc.getLongitude()));
            }
        };

        mLocationRequest = new LocationRequest()
                .setInterval(5000)
                .setFastestInterval(2000)
                .setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);
    }

    @SuppressLint(""MissingPermission"")
    @Override
    public void onResume() {
        super.onResume();
        mFusedLocationClient.requestLocationUpdates(mLocationRequest, mLocationCallback, Looper.myLooper());
    }

    @Override
    protected void onPause() {
        super.onPause();
        mFusedLocationClient.removeLocationUpdates(mLocationCallback);
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        mLocationCallback = null;
    }
}
</code></pre>

<p>This is the output of LeakCanary about the detected memory leak:</p>

<pre><code>In it.myapp.app:1.0.4:10004.
* it.myapp.app.activities.TestLeaks has leaked:
* GC ROOT com.google.android.gms.internal.zzcfe.zzfus
* references com.google.android.gms.common.api.internal.zzci.zzful
* references com.google.android.gms.common.api.internal.zzck.zzfuk
* references it.myapp.app.activities.TestLeaks$1.this$0 (anonymous subclass of com.google.android.gms.location.LocationCallback)
* leaks it.myapp.app.activities.TestLeaks instance

* Retaining: 35 KB.
* Reference Key: 969b4256-81ff-4b01-b0d4-63e27e49b764
* Device: samsung samsung SM-G920F zerofltexx
* Android Version: 7.0 API: 24 LeakCanary: 1.5.4 74837f0
* Durations: watch=637463ms, gc=258ms, heap dump=2766ms, analysis=46757ms

* Details:
* Instance of com.google.android.gms.internal.zzcfe
|   static $classOverhead = byte[768]@317861889 (0x12f23001)
|   zzfus = com.google.android.gms.common.api.internal.zzci@318105032 (0x12f5e5c8)
|   mDescriptor = java.lang.String@317290744 (0x12e978f8)
|   mObject = 511599546432
|   mOwner = com.google.android.gms.internal.zzcfe@317359520 (0x12ea85a0)
|   shadow$_klass_ = com.google.android.gms.internal.zzcfe
|   shadow$_monitor_ = 0
* Instance of com.google.android.gms.common.api.internal.zzci
|   static $classOverhead = byte[648]@316776449 (0x12e1a001)
|   zzfuj = com.google.android.gms.common.api.internal.zzcj@317594368 (0x12ee1b00)
|   zzfuk = null
|   zzful = com.google.android.gms.common.api.internal.zzck@318185888 (0x12f721a0)
|   shadow$_klass_ = com.google.android.gms.common.api.internal.zzci
|   shadow$_monitor_ = 0
* Instance of com.google.android.gms.common.api.internal.zzck
|   static $classOverhead = byte[608]@316789761 (0x12e1d401)
|   zzfuk = it.myapp.app.activities.TestLeaks$1@318185648 (0x12f720b0)
|   zzfun = java.lang.String@317049344 (0x12e5ca00)
|   shadow$_klass_ = com.google.android.gms.common.api.internal.zzck
|   shadow$_monitor_ = 0
* Instance of it.myapp.app.activities.TestLeaks$1
|   static $classOverhead = byte[640]@316606465 (0x12df0801)
|   static serialVersionUID = -1641506329145588052
|   static $change = null
|   this$0 = it.myapp.app.activities.TestLeaks@317686496 (0x12ef82e0)
|   shadow$_klass_ = it.myapp.app.activities.TestLeaks$1
|   shadow$_monitor_ = -1897236332
* Instance of it.myapp.app.activities.TestLeaks
|   static $classOverhead = byte[4336]@316567553 (0x12de7001)
|   static serialVersionUID = 2740572635131010457
|   static $change = null
|   mFusedLocationClient = com.google.android.gms.location.FusedLocationProviderClient@317049680 (0x12e5cb50)
|   mLocationCallback = null
|   mLocationRequest = com.google.android.gms.location.LocationRequest@318159496 (0x12f6ba88)
|   mActionBar = null
|   mActionModeTypeStarting = 0
|   mActivityInfo = android.content.pm.ActivityInfo@317696896 (0x12efab80)
|   mActivityTransitionState = android.app.ActivityTransitionState@317736656 (0x12f046d0)
|   mAppLockCheckRunnable = android.app.Activity$1@318057504 (0x12f52c20)
|   mAppLockIsInMultiWindowMode = false
|   mApplication = it.myapp.app.CanaryLeak@315492064 (0x12ce06e0)
|   mCalled = true
|   mChangeCanvasToTranslucent = false
|   mChangingConfigurations = false
|   mComponent = android.content.ComponentName@318099536 (0x12f5d050)
|   mConfigChangeFlags = 0
|   mCurrentConfig = android.content.res.Configuration@317764560 (0x12f0b3d0)
|   mDecor = null
|   mDefaultKeyMode = 0
|   mDefaultKeySsb = null
|   mDestroyed = true
|   mDoReportFullyDrawn = false
|   mEatKeyUpEvent = false
|   mEmbeddedID = null
|   mEnableDefaultActionBarUp = false
|   mEnterTransitionListener = android.app.SharedElementCallback$1@1899179144 (0x71332c88)
|   mExitTransitionListener = android.app.SharedElementCallback$1@1899179144 (0x71332c88)
|   mFinished = true
|   mFlipfont = 0
|   mFragments = android.app.FragmentController@318057472 (0x12f52c00)
|   mHandler = android.os.Handler@317542688 (0x12ed5120)
|   mHasCurrentPermissionsRequest = false
|   mIdent = 165309401
|   mInstanceTracker = android.os.StrictMode$InstanceTracker@318057488 (0x12f52c10)
|   mInstrumentation = android.app.Instrumentation@315494968 (0x12ce1238)
|   mIntent = android.content.Intent@314929344 (0x12c570c0)
|   mLastNonConfigurationInstances = null
|   mMainThread = android.app.ActivityThread@315314736 (0x12cb5230)
|   mManagedCursors = java.util.ArrayList@318035832 (0x12f4d778)
|   mManagedDialogs = null
|   mMenuInflater = null
|   mParent = null
|   mPolicyManager = null
|   mReferrer = java.lang.String@314929856 (0x12c572c0)
|   mResultCode = 0
|   mResultData = null
|   mResumed = false
|   mScreenChangeListener = null
|   mSearchEvent = null
|   mSearchManager = null
|   mStartedActivity = false
|   mStopped = true
|   mTaskDescription = android.app.ActivityManager$TaskDescription@317542720 (0x12ed5140)
|   mTemporaryPause = false
|   mTitle = java.lang.String@315505152 (0x12ce3a00)
|   mTitleColor = 0
|   mTitleReady = true
|   mToken = android.os.BinderProxy@315387808 (0x12cc6fa0)
|   mTranslucentCallback = null
|   mUiThread = java.lang.Thread@2004343960 (0x7777dc98)
|   mVisibleBehind = false
|   mVisibleFromClient = true
|   mVisibleFromServer = true
|   mVoiceInteractor = null
|   mWindow = com.android.internal.policy.PhoneWindow@315451968 (0x12cd6a40)
|   mWindowAdded = true
|   mWindowManager = android.view.WindowManagerImpl@318034248 (0x12f4d148)
|   mInflater = com.android.internal.policy.PhoneLayoutInflater@316645632 (0x12dfa100)
|   mOverrideConfiguration = null
|   mResources = android.content.res.Resources@316047040 (0x12d67ec0)
|   mTheme = android.content.res.Resources$Theme@318057696 (0x12f52ce0)
|   mThemeResource = 2131820551
|   mBase = android.app.ContextImpl@316473008 (0x12dcfeb0)
|   shadow$_klass_ = it.myapp.app.activities.TestLeaks
|   shadow$_monitor_ = 1073742768
* Excluded Refs:
| Field: android.view.inputmethod.InputMethodManager.mNextServedView
| Field: android.view.inputmethod.InputMethodManager.mServedView
| Field: android.view.inputmethod.InputMethodManager.mServedInputConnection
| Field: android.view.textservice.SpellCheckerSession$1.this$0
| Field: com.samsung.android.content.clipboard.SemClipboardManager.mContext
| Field: com.samsung.android.emergencymode.SemEmergencyManager.mContext
| Field: android.view.Choreographer$FrameDisplayEventReceiver.mMessageQueue (always)
| Thread:FinalizerWatchdogDaemon (always)
| Thread:main (always)
| Thread:LeakCanary-Heap-Dump (always)
| Class:java.lang.ref.WeakReference (always)
| Class:java.lang.ref.SoftReference (always)
| Class:java.lang.ref.PhantomReference (always)
| Class:java.lang.ref.Finalizer (always)
| Class:java.lang.ref.FinalizerReference (always)
</code></pre>
",8073535,,,,,2018-10-10 4:09:29,Location Updates with FusedLocationProviderClient produces memory leaks,<android><memory-leaks><google-api-client><fusedlocationproviderclient><location-updates>,1,1,2,,
Android,35634085,1,35666374,,2016,,6,3225,"<p><strong>Problem</strong>: I've been using <a href=""https://github.com/googlesamples/android-play-publisher-api"" rel=""noreferrer"">Python Script Samples by Google</a> to upload the apk to Play Store and to get list of apps published via my account (<a href=""https://github.com/googlesamples/android-play-publisher-api/blob/master/v2/python/basic_list_apks_service_account.py"" rel=""noreferrer"">list_apks.py</a> and <code>upload_apk.py</code>). However recently it started breaking. I've tried to update the packages like <code>google-api-python-client</code>, <code>oath2client</code> etc by doing <code>pip install --update packagename</code> but it didn't help. </p>

<p><strong>Logs</strong>:</p>

<p>This if while listing apk's:</p>

<pre><code>Determining latest version for my.package.name...
error   25-Feb-2016 06:30:52    Traceback (most recent call last):
error   25-Feb-2016 06:30:52      File ""list_apks.py"", line 80, in &lt;module&gt;
error   25-Feb-2016 06:30:52        main()
error   25-Feb-2016 06:30:52      File ""list_apks.py"", line 46, in main
error   25-Feb-2016 06:30:52        credentials = client.SignedJwtAssertionCredentials(
error   25-Feb-2016 06:30:52    AttributeError: 'module' object has no attribute 'SignedJwtAssertionCredentials'
build   25-Feb-2016 06:30:52    Found latest APK version: 
build   25-Feb-2016 06:30:52    Generated new APK version: 1
</code></pre>

<p>This is when uploading apk:</p>

<pre><code>25-Feb-2016 06:33:30    Uploading APK...
25-Feb-2016 06:33:30    Traceback (most recent call last):
25-Feb-2016 06:33:30      File ""upload_apk.py"", line 115, in &lt;module&gt;
25-Feb-2016 06:33:30        main(sys.argv)
25-Feb-2016 06:33:30      File ""upload_apk.py"", line 62, in main
25-Feb-2016 06:33:30        credentials = client.SignedJwtAssertionCredentials(
25-Feb-2016 06:33:30    AttributeError: 'module' object has no attribute 'SignedJwtAssertionCredentials'
</code></pre>

<p><strong>Code sniplet</strong>:</p>

<pre><code>import argparse

from apiclient.discovery import build
import httplib2
from oauth2client import client


SERVICE_ACCOUNT_EMAIL = (
    'myaccountemail.com')

# Declare command-line flags.
argparser = argparse.ArgumentParser(add_help=False)
argparser.add_argument('package_name',
                       help='The package name. Example: com.android.sample')


def main():
  # Load the key in PKCS 12 format that you downloaded from the Google APIs
  # Console when you created your Service account.
  f = file('mykeyname.p12', 'rb')
  key = f.read()
  f.close()

  # HERE IS THE EXCEPTION 
  credentials = client.SignedJwtAssertionCredentials(
      SERVICE_ACCOUNT_EMAIL,
      key,
      scope='https://www.googleapis.com/auth/androidpublisher')
  http = httplib2.Http()
  http = credentials.authorize(http)
  ...
</code></pre>

<p>What else I can try? I would appreciate your help.</p>
",1306419,,1306419,,2016-02-29 1:22:35,2016-02-29 1:22:35,AttributeError: 'module' object has no attribute 'SignedJwtAssertionCredentials',<android><python><attributeerror><oauth2client><google-play-developer-api>,1,0,2,,
Android,47533726,1,,,2017,,6,422,"<p>I am new to android. I have been looking for ways to record a video using Camera2 api and MediaCodec but no luck. I saw a sample by Google(<a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""noreferrer"">https://github.com/googlesamples/android-Camera2Video</a>) using MediaRecorder. My question is how to replace this MediaRecorder with MediaCodec.</p>
",4968955,,,,,2018-08-30 19:28:45,How to use MediaCodec with Camera2?,<android>,1,0,1,,
Android,40548551,1,,,2016,,6,1120,"<p>I have app which uses Fingerprint and 4 digit pin (which can be set by user in application settings, this is not system pin/pattern/password) authorization.</p>

<p>With Fingerprint everything is fine, I have problem with pin.</p>

<p>What I'm trying to do is:</p>

<ol>
<li>Let user set pin from application settings</li>
<li>Generate Keypair in keystore for some alias protected by entered pin (so that private key can not be accessed without this pin)</li>
<li>Send public key to server for future signature verification</li>
<li>Get user token from server and store it in local storage</li>
</ol>

<p>Then during Authorization:</p>

<ol start=""5"">
<li>Request user to enter the pin</li>
<li>Retrieve private key by entered pin</li>
<li>Retrieve token from local storage</li>
<li>Sign token with private key from step 6</li>
<li>Send it to server with signed data</li>
<li>Verify signature on server and if it is valid, open session for user.</li>
</ol>

<p>My question is: <strong>How can I generate KeyPair protected by pin entered by user</strong></p>

<p>P.S. For <a href=""https://github.com/googlesamples/android-AsymmetricFingerprintDialog"" rel=""nofollow noreferrer"">fingerprint</a> this logic is handled by:</p>

<pre><code>KeyGenParameterSpec.Builder(KEY_NAME, KeyProperties.PURPOSE_SIGN).setUserAuthenticationRequired(true)
</code></pre>
",1372146,,1372146,,2016-11-13 16:54:35,2016-11-13 16:54:35,"How to generate KeyPair in android KeyStore, protected by custom password",<android><keystore><key-pair><android-fingerprint-api>,1,0,1,,
Android,45783523,1,45878920,,2017,,6,2067,"<p>I am using the following google sample project: <a href=""https://github.com/googlesamples/android-architecture-components"" rel=""noreferrer"">https://github.com/googlesamples/android-architecture-components</a> as a reference for my new project and having difficulties trying to add a second activity to the project.</p>

<p>Here is the error I get when compiling</p>

<pre class=""lang-none prettyprint-override""><code>Error:(22, 8) error: [dagger.android.AndroidInjector.inject(T)] com.apps.myapp.ui.common.MainActivity cannot be provided without an @Inject constructor or from an @Provides-annotated method. This type supports members injection but cannot be implicitly provided.
com.apps.myapp.ui.common.MainActivity is injected at
com.apps.myapp.ui.common.NavigationController.&lt;init&gt;(mainActivity)
com.apps.myapp.ui.common.NavigationController is injected at
com.apps.myapp.ui.addContacts.AddContactsFragment.navigationController
com.apps.myapp.ui.addContacts.AddContactsFragment is injected at
dagger.android.AndroidInjector.inject(arg0)
A binding with matching key exists in component: com.apps.myapp.di.ActivityModule_ContributeMainActivity.MainActivitySubcomponent
</code></pre>

<p>Here is my code</p>

<p>ActivityModule</p>



<pre class=""lang-java prettyprint-override""><code>@Module
public abstract class ActivityModule {

    @ContributesAndroidInjector(modules = FragmentBuildersModule.class)
    abstract MainActivity contributeMainActivity();

    @ContributesAndroidInjector(modules = FragmentBuildersModule.class)
    abstract ContactActivity contributeContactActivity();
} 
</code></pre>

<p>AppComponent</p>

<pre class=""lang-java prettyprint-override""><code>@Singleton
@Component(modules = {
        AndroidInjectionModule.class,
        AppModule.class,
        ActivityModule.class})
public interface AppComponent {
    @Component.Builder
    interface Builder {
        @BindsInstance Builder application(Application application);
        AppComponent build();
    }
    void inject(App app);
}
</code></pre>

<p>AppInjector</p>

<pre class=""lang-java prettyprint-override""><code>public class AppInjector {
    private AppInjector() {}
    public static void init(App app) {DaggerAppComponent.builder().application(app).build().inject(app);
                    app.registerActivityLifecycleCallbacks(new Application.ActivityLifecycleCallbacks() {
                    @Override
                    public void onActivityCreated(Activity activity, Bundle savedInstanceState) {
                        handleActivity(activity);
                    }

                    @Override
                    public void onActivityStarted(Activity activity) {

                    }

                    @Override
                    public void onActivityResumed(Activity activity) {

                    }

                    @Override
                    public void onActivityPaused(Activity activity) {

                    }

                    @Override
                    public void onActivityStopped(Activity activity) {

                    }

                    @Override
                    public void onActivitySaveInstanceState(Activity activity, Bundle outState) {

                    }

                    @Override
                    public void onActivityDestroyed(Activity activity) {

                    }
                });
    }

    private static void handleActivity(Activity activity) {
        if (activity instanceof HasSupportFragmentInjector) {
            AndroidInjection.inject(activity);
        }
        if (activity instanceof FragmentActivity) {
            ((FragmentActivity) activity).getSupportFragmentManager()
                    .registerFragmentLifecycleCallbacks(
                            new FragmentManager.FragmentLifecycleCallbacks() {
                                @Override
                                public void onFragmentCreated(FragmentManager fm, Fragment f,
                                        Bundle savedInstanceState) {
                                    if (f instanceof Injectable) {
                                        AndroidSupportInjection.inject(f);
                                    }
                                }
                            }, true);
        }
    }
}
</code></pre>

<p>AppModule</p>

<pre class=""lang-java prettyprint-override""><code>@Module(includes = ViewModelModule.class)
class AppModule {
    @Singleton @Provides
    BnderAPIService provideService() {
        return new Retrofit.Builder()
                .baseUrl(""serverurl"")
                .addConverterFactory(GsonConverterFactory.create())
                .addCallAdapterFactory(new LiveDataCallAdapterFactory())
                .build()
                .create(APIService.class);
    }

    @Singleton @Provides
    Db provideDb(Application app) {
        return Room.databaseBuilder(app, Db.class,""Db.db"").build();
    }

    @Singleton @Provides
    UserDao provideUserDao(Db db) {
        return db.userDao();
    }

    @Singleton @Provides
    ContactDao provideContactDao(Db db) {
        return db.contactDao();
    }
}
</code></pre>

<p>FragmentBuildersModule</p>

<pre class=""lang-java prettyprint-override""><code>@Module
public abstract class FragmentBuildersModule {

    @ContributesAndroidInjector
    abstract AddContactsFragment contributeAddUserFragment();

    @ContributesAndroidInjector
    abstract ContactsFragment contributeContactsFragment();

    @ContributesAndroidInjector
    abstract ChalkboardFragment contributeChalkboardFragment();
}
</code></pre>

<p>Injectable</p>

<pre class=""lang-java prettyprint-override""><code>public interface Injectable {
}
</code></pre>

<p>ViewModelKey</p>

<pre class=""lang-java prettyprint-override""><code>@Documented
@Target({ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
@MapKey
@interface ViewModelKey {
    Class&lt;? extends ViewModel&gt; value();
}
</code></pre>

<p>ViewModelModule</p>

<pre class=""lang-java prettyprint-override""><code>@Module
abstract class ViewModelModule {
    @Binds
    @IntoMap
    @ViewModelKey(AddContactsViewModel.class)
    abstract ViewModel bindAddContactsViewModel(AddContactsViewModel addContactsViewModel);

    @Binds
    @IntoMap
    @ViewModelKey(ContactsViewModel.class)
    abstract ViewModel bindContactsViewModel(ContactsViewModel contactsViewModel);

    @Binds
    @IntoMap
    @ViewModelKey(ChalkboardViewModel.class)
    abstract ViewModel bindChalkboardViewModel(ChalkboardViewModel chalkboardViewModel);

    @Binds
    abstract ViewModelProvider.Factory bindViewModelFactory(ViewModelFactory factory);
}
</code></pre>

<p>Application</p>

<pre class=""lang-java prettyprint-override""><code>public class App extends Application implements HasActivityInjector {

    @Inject
    DispatchingAndroidInjector&lt;Activity&gt; dispatchingAndroidInjector;
    @Override
    protected void attachBaseContext(Context base) {
        super.attachBaseContext(base);
        MultiDex.install(this);
    }
    @Override
    public void onCreate() {
        super.onCreate();
        if (BuildConfig.DEBUG) {

        }
        AppInjector.init(this);
    }

    @Override
    public DispatchingAndroidInjector&lt;Activity&gt; activityInjector() {
        return dispatchingAndroidInjector;
    }
}
</code></pre>

<p>NavigationController</p>

<pre class=""lang-java prettyprint-override""><code>public class NavigationController {
    private final int containerId;
    private final FragmentManager fragmentManager;
    @Inject
    public NavigationController(MainActivity mainActivity) {
        this.containerId = R.id.container;
        this.fragmentManager = mainActivity.getSupportFragmentManager();
    }

    public void navigateToUsers() {
        Log.i(""TAG"", ""Navigate to users"");
        String tag = ""users"";
        AddContactsFragment userFragment = AddContactsFragment.create();
        fragmentManager.beginTransaction()
                .replace(containerId, userFragment, tag)
                .addToBackStack(null)
                .commitAllowingStateLoss();
    }

    public void navigateToContacts() {
        Log.i(""TAG"", ""Navigate to contacts"");
        String tag = ""contacts"";
        ContactsFragment contactsFragment = ContactsFragment.create();
        fragmentManager.beginTransaction()
                .add(contactsFragment, tag)
                .addToBackStack(null)
                .commitAllowingStateLoss();
    }

    public void navigateToChalkboard() {
        Log.i(""TAG"", ""Navigate to chalkboard"");
        String tag = ""chalkboard"";
        ChalkboardFragment chalkboardFragment = ChalkboardFragment.create();
        fragmentManager.beginTransaction()
                .add(chalkboardFragment, tag)
                .addToBackStack(null)
                .commitAllowingStateLoss();
    }
}
</code></pre>

<p>MainActivity</p>

<pre class=""lang-java prettyprint-override""><code>public class MainActivity extends AppCompatActivity implements LifecycleRegistryOwner, HasSupportFragmentInjector {
    private final LifecycleRegistry lifecycleRegistry = new LifecycleRegistry(this);
    @Inject
    DispatchingAndroidInjector&lt;Fragment&gt; dispatchingAndroidInjector;
    @Inject
    NavigationController navigationController;
    private Toolbar toolbar;
    @Override
    public LifecycleRegistry getLifecycle() {
        return lifecycleRegistry;
    }

    @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ActivityMainBinding binding = DataBindingUtil.setContentView(this, R.layout.activity_main);
        binding.setHandler(this);
        binding.setManager(getSupportFragmentManager());
        toolbar = (Toolbar) findViewById(R.id.toolbar);
        setSupportActionBar(toolbar);
    }

    @Override
    public DispatchingAndroidInjector&lt;Fragment&gt; supportFragmentInjector() {
        return dispatchingAndroidInjector;
    }

    static class ViewPagerAdapter extends FragmentPagerAdapter {
        private final List&lt;Fragment&gt; mFragmentList = new ArrayList&lt;&gt;();
        private final List&lt;String&gt; mFragmentTitleList = new ArrayList&lt;&gt;();

        public ViewPagerAdapter(FragmentManager manager) {
            super(manager);
        }

        @Override
        public Fragment getItem(int position) {
            return mFragmentList.get(position);
        }

        @Override
        public int getCount() {
            return mFragmentList.size();
        }

        public void addFragment(Fragment fragment, String title) {
            mFragmentList.add(fragment);
            mFragmentTitleList.add(title);
        }

        @Override
        public CharSequence getPageTitle(int position) {
            return mFragmentTitleList.get(position);
        }
    }

    @BindingAdapter({""handler""})
    public static void bindViewPagerAdapter(final ViewPager view, final MainActivity activity) {
        final ViewPagerAdapter adapter = new ViewPagerAdapter(activity.getSupportFragmentManager());
        adapter.addFragment(new ChalkboardFragment(), ""Chalkboard"");
        adapter.addFragment(new ContactsFragment(), ""Contacts"");
        view.setAdapter(adapter);
    }

    @BindingAdapter({""pager""})
    public static void bindViewPagerTabs(final TabLayout view, final ViewPager pagerView) {
        view.setupWithViewPager(pagerView, true);
    }
}
</code></pre>

<p>ContactActivity</p>

<pre class=""lang-java prettyprint-override""><code>public class ContactActivity extends AppCompatActivity implements LifecycleRegistryOwner, HasSupportFragmentInjector {
    private final LifecycleRegistry lifecycleRegistry = new LifecycleRegistry(this);
    @Inject
    DispatchingAndroidInjector&lt;Fragment&gt; dispatchingAndroidInjector;
    @Override
    public LifecycleRegistry getLifecycle() {
        return lifecycleRegistry;
    }

    @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_contact);
        if (savedInstanceState == null) {

        }
    }

    @Override
    public DispatchingAndroidInjector&lt;Fragment&gt; supportFragmentInjector() {
        return dispatchingAndroidInjector;
    }
}
</code></pre>
",4433653,,182660,,2017-08-22 23:16:39,2018-10-19 2:51:49,MVVM Dagger2 A Binding With Matching Key Exists in Component,<android><mvvm><dagger-2><android-architecture-components><android-mvvm>,1,6,1,,
Android,29190072,1,29196883,,2015,,6,4110,"<p>I'm attempting to follow Google's <a href=""https://github.com/googlesamples/android-play-location/tree/master/ActivityRecognition/app/src/main/java/com/google/android/gms/location/sample/activityrecognition"" rel=""noreferrer"">Activity Recognition</a> example.</p>

<p>In the example they start the activity recognition when you click a button, however I'd like to just start it up when the app starts - so I tried putting it in the <code>onConnected</code> method. However, it ends up throwing a null pointer exception.</p>

<p>Here's how I'm calling it:</p>

<pre><code>@Override
public void onConnected(Bundle connectionHint) {
    Log.d(TAG, ""onConnected"");
    try {
        ActivityRecognition.ActivityRecognitionApi.requestActivityUpdates(
                mGoogleApiClient,
                UPDATE_INTERVAL_IN_MILLISECONDS,
                getActivityDetectionPendingIntent()
        ).setResultCallback(this);

    } catch (SecurityException securityException) {
        logSecurityException(securityException);
    }
}
</code></pre>

<p>And the error:</p>

<pre><code>03-21 20:28:57.939    2340-2340/getrewards.example.com.getrewards E/AndroidRuntime FATAL EXCEPTION: main
    Process: getrewards.example.com.getrewards, PID: 2340
    java.lang.NullPointerException: Appropriate Api was not requested.
            at com.google.android.gms.internal.jx.b(Unknown Source)
            at com.google.android.gms.common.api.c.a(Unknown Source)
            at com.google.android.gms.common.api.c.a(Unknown Source)
            at com.google.android.gms.common.api.c.b(Unknown Source)
            at com.google.android.gms.internal.nb.requestActivityUpdates(Unknown Source)
            at getrewards.example.com.getrewards.RewardsFragment.onConnected(RewardsFragment.java:274)
            at com.google.android.gms.internal.jm.f(Unknown Source)
            at com.google.android.gms.common.api.c.gJ(Unknown Source)
            at com.google.android.gms.common.api.c.d(Unknown Source)
            at com.google.android.gms.common.api.c$2.onConnected(Unknown Source)
            at com.google.android.gms.internal.jm.f(Unknown Source)
            at com.google.android.gms.internal.jm.dU(Unknown Source)
            at com.google.android.gms.internal.jl$h.b(Unknown Source)
            at com.google.android.gms.internal.jl$h.g(Unknown Source)
            at com.google.android.gms.internal.jl$b.hy(Unknown Source)
            at com.google.android.gms.internal.jl$a.handleMessage(Unknown Source)
            at android.os.Handler.dispatchMessage(Handler.java:102)
            at android.os.Looper.loop(Looper.java:135)
            at android.app.ActivityThread.main(ActivityThread.java:5221)
            at java.lang.reflect.Method.invoke(Native Method)
            at java.lang.reflect.Method.invoke(Method.java:372)
            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:899)
            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:694)
03-21 20:28:58.343    1235-1594/system_process E/ActivityManager Invalid thumbnail dimensions: 288x288
03-21 20:29:02.543    1235-1267/system_process E/InputDispatcher channel '39825fb6 getrewards.example.com.getrewards/getrewards.example.com.getrewards.RewardsActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
03-21 20:33:31.053    2374-2374/? E/memtrack Couldn't load memtrack module (No such file or directory)
03-21 20:33:31.053    2374-2374/? E/android.os.Debug failed to load memtrack module: -2
03-21 20:33:44.213    2403-2403/? E/memtrack Couldn't load memtrack module (No such file or directory)
03-21 20:33:44.213    2403-2403/? E/android.os.Debug failed to load memtrack module: -2
03-21 20:34:56.658    2479-2479/? E/memtrack Couldn't load memtrack module (No such file or directory)
03-21 20:34:56.659    2479-2479/? E/android.os.Debug failed to load memtrack module: -2
03-21 20:35:09.756    2501-2501/? E/memtrack Couldn't load memtrack module (No such file or directory)
03-21 20:35:09.756    2501-2501/? E/android.os.Debug failed to load memtrack module: -2
03-21 20:35:52.821    2563-2563/? E/memtrack Couldn't load memtrack module (No such file or directory)
03-21 20:35:52.821    2563-2563/? E/android.os.Debug failed to load memtrack module: -2
03-21 20:35:53.299    1235-1267/system_process E/InputDispatcher channel '21589154 getrewards.example.com.getrewards/getrewards.example.com.getrewards.RewardsActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
03-21 20:36:06.753    2586-2586/? E/memtrack Couldn't load memtrack module (No such file or directory)
03-21 20:36:06.753    2586-2586/? E/android.os.Debug failed to load memtrack module: -2
03-21 20:36:29.956    2634-2634/? E/memtrack Couldn't load memtrack module (No such file or directory)
03-21 20:36:29.956    2634-2634/? E/android.os.Debug failed to load memtrack module: -2
03-21 20:36:43.621    2657-2657/? E/memtrack Couldn't load memtrack module (No such file or directory)
03-21 20:36:43.621    2657-2657/? E/android.os.Debug failed to load memtrack module: -2
</code></pre>

<p>Any ideas what I need to do differently to avoid this error? Other location services work just fine - like geofencing or requesting activity updates.</p>
",2650407,,2650407,,2015-06-08 23:21:11,2015-06-08 23:21:11,Android ActivityRecognition java.lang.NullPointerException: Appropriate Api was not requested,<android><activity-recognition>,1,0,,,
Android,53494927,1,,,2018,,6,63,"<p>As per <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""noreferrer"">Uamp</a> sample when <code>onPlayFromMediaId</code> is called its <code>mediaId</code> is matched with list of <code>queueitems</code> already stored using <code>iterator</code> as below</p>

<pre><code>public static int getMusicIndexOnQueue(Iterable&lt;MediaSessionCompat.QueueItem&gt; queue,
         String mediaId) {
    int index = 0;
    for (MediaSessionCompat.QueueItem item : queue) {
        if (mediaId.equals(item.getDescription().getMediaId())) {
            return index;
        }
        index++;
    }
    return -1;
} 
</code></pre>

<p>this works great unless you have some thousand items in your list, its lags badly, is there any way I can get the index on queue in this scenario?</p>

<p>P.S.- This code is from v1 branch although v2 kotlin based branch has the same concept.</p>
",517247,,,,,2018-12-05 10:55:15,MediaBrowserCompat queue find item,<android><android-mediasession>,1,0,,,
Android,27139281,1,28645831,,2014,,7,3866,"<p>I am playing around with the <a href=""https://github.com/googlesamples/android-BasicManagedProfile"" rel=""noreferrer"">BasicManagedProfile</a> sample and want to install a custom app to only the managed profile.  I can easily go to the play store, download, and install an app and it will only appear in the apps of the work profile.</p>

<p>However, using the standard Intent way to install an apk from the device does not seem to work.</p>

<pre><code>    final Intent intent = new Intent(Intent.ACTION_INSTALL_PACKAGE);
    intent.setDataAndType(Uri.fromFile(new File(APK_LOC)), ""application/vnd.android.package-archive"");
    intent.putExtra(Intent.EXTRA_NOT_UNKNOWN_SOURCE, true);
    intent.putExtra(Intent.EXTRA_INSTALLER_PACKAGE_NAME, getPackageName());
    startActivityForResult(intent, REQUEST_INSTALL, null);
</code></pre>

<p>Like normal, if the ""Install from unknown sources"" security setting isn't enabled, a dialog will pop up that sends you to the Settings app to enable it.  However, in a managed profile app, this dialog <em>always pops up</em> regardless of whether or not that security setting is checked.  It seems the settings are not reflected in a managed profile (which makes sense because it's an entirely separate settings database).</p>

<p>I have tried opening the Settings app directly, but it's still the same.  It just goes to the standards Settings app and not a Managed Profile settings app.</p>

<p>Is there a way to change this security setting for a managed profile or install an app from the profile owner app? Since my app is the profile owner it seems this should be allowed.  It's easily possible for system applications, but third party apps will not work with the <code>DevicePolicyManager#enableSystemApp()</code> method.</p>

<p>EDIT:</p>

<p>I have also tried installing from a Manage Profile Gmail app.  Same thing.  It does not seem possible to install apps outside the Google Play store in a managed profile.</p>
",786718,,660921,,2015-01-07 13:17:33,2016-03-01 7:08:44,Installing app to managed profile,<android><android-5.0-lollipop><android-managed-profile>,1,0,5,,
Android,46666474,1,,,2017,,7,1804,"<p>I am currently working on an exiting Android application in order to create an Instant apps version.</p>

<p>My Android Studio is now split into several modules :</p>

<ul>
<li>the business object module (which is a library)</li>
<li>the base -feature- module</li>
<li>the moduleA -feature- module</li>
<li>the app module (which is a phone/tablet module)</li>
<li>the instant module (which is an instant apps module)</li>
</ul>

<p>My instant app module can be compiled and launched on a phone/tablet but each time it crashes due to Firebase issues. I have the following message into the logcat :</p>

<blockquote>
  <p>I/FirebaseInitProvider: FirebaseApp initialization unsuccessful</p>
</blockquote>

<p>According to the <a href=""https://developer.android.com/topic/instant-apps/guides/analytics.html"" rel=""noreferrer"">documentation</a> the Firebase library is compatible with Instant Apps, but I am pretty sure that I do not move the google-services.json file into the right place in my project...</p>

<p>Here what I have done :</p>

<ol>
<li><p>I defined the following classpath dependencies into the build.gradle file of the Android Studio project : classpath 'com.google.gms:google-services:3.1.1'</p></li>
<li><p>I put the google-services.json file into my module base (because the documentation asks for it)</p></li>
</ol>

<p>Now, if I try to apply the plugin (apply plugin: 'com.google.gms.google-services') into the build.gradle file of the base module, I cannot compile. I have the following message :</p>

<blockquote>
  <p>Error:Execution failed for task ':base:processGooglePlayProductionDebugFeatureGoogleServices'.</p>
  
  <p>> No matching client found for package name 'com.mycompany.myapp.base'</p>
</blockquote>

<p>In fact, the package name defined into the google-services.json file is the one use by the app (because according to the <a href=""https://codelabs.developers.google.com/codelabs/android-instant-apps/#4"" rel=""noreferrer"">documentation</a> the base library cannot have the same package name as the installed android app.</p>

<p>I also tried to apply the plugin into the build.gradle files of the installed app and into the instant apps module leaving the google-services.json file into the base module. The app compile but I have the log : ""FirebaseApp initialization unsuccessful"".</p>

<p>So I tried moving the google-services.json file into my instant app module but I still have the log : ""FirebaseApp initialization unsuccessful""</p>

<p>I also tried to force the initialization calling the static method initializeApp from the FirebaseApp class but the log persists.</p>

<p>I cannot find an example of implementation on the web. In fact, the <a href=""https://github.com/googlesamples/android-instant-apps"" rel=""noreferrer"">Google Sample repository</a> does not use a google-services.json file.</p>

<p>Thank you in advance for your help !</p>

<p><strong>Edit :</strong> Here the dependencies of my modules :</p>

<p>The dependencies of my base -feature- module :</p>

<pre><code>  implementation project(':businessobject')
  feature project(':moduleA')
  application project(':app')
</code></pre>

<p>The dependencies of my moduleA -feature- module :</p>

<pre><code>api project(':base')
api project(':businessobject')
</code></pre>

<p>The dependencies of my app module (which is a phone/tablet module) :</p>

<pre><code>implementation (project(':base'))
implementation (project(':businessobject'))
implementation (project(':moduleA'))
</code></pre>

<p>The dependencies of my instant module (which is an instant apps module) :</p>

<pre><code>implementation project(':base')
implementation project(':businessobject')
implementation project(':moduleA')
</code></pre>
",2762990,,2762990,,2017-10-10 15:38:26,2018-02-22 7:35:40,FirebaseApp initialization unsuccessful in Android Instant apps,<android><firebase><android-instant-apps><google-play-services>,1,3,3,,
Android,35709241,1,35728962,,2016,,7,6500,"<p>I do not have a background in imaging or graphics, so please bear with me :)</p>

<p>I am using <a href=""https://github.com/bytedeco/javacv"" rel=""nofollow noreferrer"">JavaCV</a> in one of my projects. In the <a href=""https://github.com/bytedeco/javacv/blob/master/samples/RecordActivity.java"" rel=""nofollow noreferrer"">examples</a>, a <code>Frame</code> is constructed which has a buffer of a <a href=""https://github.com/bytedeco/javacv/blob/master/src/main/java/org/bytedeco/javacv/Frame.java#L108"" rel=""nofollow noreferrer"">certain size</a>. </p>

<p>When using the <code>public void onPreviewFrame(byte[] data, Camera camera)</code> function in Android, copying this <code>data</code> byte array is no problem if you declare the <code>Frame</code> as <code>new Frame(frameWidth, frameHeight, Frame.DEPTH_UBYTE, 2);</code> where <code>frameWidth</code> and <code>frameHeight</code> are declared as </p>

<pre><code>Camera.Size previewSize = cameraParam.getPreviewSize();
int frameWidth = previewSize.width;
int frameHeight = previewSize.height;
</code></pre>

<p>Recently, Android added a method to capture your screen. Naturally, I wanted to grab those images and also covert them to <code>Frame</code>s. I modified <a href=""https://github.com/googlesamples/android-ScreenCapture"" rel=""nofollow noreferrer"">the example code from Google</a> to use the <a href=""https://developer.android.com/reference/android/media/ImageReader.html"" rel=""nofollow noreferrer"">ImageReader</a>. </p>

<p>This <code>ImageReader</code> is constructed as <code>ImageReader.newInstance(DISPLAY_WIDTH, DISPLAY_HEIGHT, PixelFormat.RGBA_8888, 2);</code>. So currently it uses the RGBA_8888 pixel format. I use the following code to copy the bytes to the <code>Frame</code>, which is instantiated as <code>new Frame(DISPLAY_WIDTH, DISPLAY_HEIGHT, Frame.DEPTH_UBYTE, 2);</code>:</p>

<pre><code>ByteBuffer buffer = mImage.getPlanes()[0].getBuffer();
byte[] bytes = new byte[buffer.remaining()];
buffer.get(bytes);
mImage.close();
((ByteBuffer) frame.image[0].position(0)).put(bytes);
</code></pre>

<p>But this gives me a <code>java.nio.BufferOverflowException</code>. I printed the sizes of both buffers and the Frame's buffer size is 691200 whereas the <code>bytes</code> array above is of size <code>1413056</code>. Figuring out how this latter number is constructed failed because <a href=""https://android.googlesource.com/platform/frameworks/base.git/+/master/media/java/android/media/ImageReader.java#847"" rel=""nofollow noreferrer"">I ran into this native call</a>. So clearly, this won't work out.</p>

<p>After quite a bit of digging I found out that the <a href=""http://developer.android.com/reference/android/graphics/ImageFormat.html#NV21"" rel=""nofollow noreferrer"">NV21 image format</a> is ""the default format for Camera preview images, when not otherwise set with setPreviewFormat(int)"", but the <a href=""http://developer.android.com/reference/android/media/ImageReader.html#newInstance%28int,%20int,%20int,%20int%29"" rel=""nofollow noreferrer"">ImageReader class does not support the NV21 format</a> (see the format parameter). So that's tough luck. In the documentation it also reads that 
""For the android.hardware.camera2 API, the YUV_420_888 format is recommended for YUV output instead.""</p>

<p>So I tried creating an ImageReader like this <code>ImageReader.newInstance(DISPLAY_WIDTH, DISPLAY_HEIGHT, ImageFormat.YUV_420_888, 2);</code>, but this gives me <code>java.lang.UnsupportedOperationException: The producer output buffer format 0x1 doesn't match the ImageReader's configured buffer format 0x23.</code> so that won't work either.</p>

<p>As a last resort, I tried to convert RGBA_8888 to YUV myself using e.g. <a href=""https://stackoverflow.com/questions/5960247/convert-bitmap-array-to-yuv-ycbcr-nv21"">this post</a>, but I fail to understand how I can obtain an <code>int[] rgba</code> as per the answer.</p>

<p>So, TL;DR <strong>how can I obtain  NV21 image data like you get in Android's <code>public void onPreviewFrame(byte[] data, Camera camera)</code> camera function to instantiate my <code>Frame</code> and work with it using Android's ImageReader (and Media Projection)?</strong> </p>

<h2>Edit (25-10-2016)</h2>

<p>I have created the following conversion runnable to go from RGBA to NV21 format:</p>

<pre><code>private class updateImage implements Runnable {

    private final Image mImage;

    public updateImage(Image image) {
        mImage = image;
    }

    @Override
    public void run() {

        int mWidth = mImage.getWidth();
        int mHeight = mImage.getHeight();

        // Four bytes per pixel: width * height * 4.
        byte[] rgbaBytes = new byte[mWidth * mHeight * 4];
        // put the data into the rgbaBytes array.
        mImage.getPlanes()[0].getBuffer().get(rgbaBytes);

        mImage.close(); // Access to the image is no longer needed, release it.

        // Create a yuv byte array: width * height * 1.5 ().
        byte[] yuv = new byte[mWidth * mHeight * 3 / 2];
        RGBtoNV21(yuv, rgbaBytes, mWidth, mHeight);
        ((ByteBuffer) yuvImage.image[0].position(0)).put(yuv);
    }

    void RGBtoNV21(byte[] yuv420sp, byte[] argb, int width, int height) {
        final int frameSize = width * height;

        int yIndex = 0;
        int uvIndex = frameSize;

        int A, R, G, B, Y, U, V;
        int index = 0;
        int rgbIndex = 0;

        for (int i = 0; i &lt; height; i++) {
            for (int j = 0; j &lt; width; j++) {

                R = argb[rgbIndex++];
                G = argb[rgbIndex++];
                B = argb[rgbIndex++];
                A = argb[rgbIndex++]; // Ignored right now.

                // RGB to YUV conversion according to
                // https://en.wikipedia.org/wiki/YUV#Y.E2.80.B2UV444_to_RGB888_conversion
                Y = ((66 * R + 129 * G + 25 * B + 128) &gt;&gt; 8) + 16;
                U = ((-38 * R - 74 * G + 112 * B + 128) &gt;&gt; 8) + 128;
                V = ((112 * R - 94 * G - 18 * B + 128) &gt;&gt; 8) + 128;

                // NV21 has a plane of Y and interleaved planes of VU each sampled by a factor
                // of 2 meaning for every 4 Y pixels there are 1 V and 1 U.
                // Note the sampling is every other pixel AND every other scanline.
                yuv420sp[yIndex++] = (byte) ((Y &lt; 0) ? 0 : ((Y &gt; 255) ? 255 : Y));
                if (i % 2 == 0 &amp;&amp; index % 2 == 0) {
                    yuv420sp[uvIndex++] = (byte) ((V &lt; 0) ? 0 : ((V &gt; 255) ? 255 : V));
                    yuv420sp[uvIndex++] = (byte) ((U &lt; 0) ? 0 : ((U &gt; 255) ? 255 : U));
                }
                index++;
            }
        }
    }
}
</code></pre>

<p>The <code>yuvImage</code> object is initialized as <code>yuvImage = new Frame(DISPLAY_WIDTH, DISPLAY_HEIGHT, Frame.DEPTH_UBYTE, 2);</code>, the <code>DISPLAY_WIDTH</code> and <code>DISPLAY_HEIGHT</code> are just two integers specifying the display size. 
This is the code where a background handler handles the onImageReady:</p>

<pre><code>private final ImageReader.OnImageAvailableListener mOnImageAvailableListener
            = new ImageReader.OnImageAvailableListener() {

        @Override
        public void onImageAvailable(ImageReader reader) {
            mBackgroundHandler.post(new updateImage(reader.acquireNextImage()));
        }

    };

...

mImageReader = ImageReader.newInstance(DISPLAY_WIDTH, DISPLAY_HEIGHT, PixelFormat.RGBA_8888, 2);
mImageReader.setOnImageAvailableListener(mOnImageAvailableListener, mBackgroundHandler);
</code></pre>

<p>The methods work and I at least don't get any errors, but the output image is malformed. What is going wrong in my conversion? An example image that is being created:</p>

<p><img src=""https://gyazo.com/5095490f2f461b2d6334da1c68c611e4.png"" alt=""example of malformed image""></p>

<h2>Edit (15-11-2016)</h2>

<p>I have modified the <code>RGBtoNV21</code> function to be the following:</p>

<pre><code>void RGBtoNV21(byte[] yuv420sp, int width, int height) {
    try {
        final int frameSize = width * height;

        int yIndex = 0;
        int uvIndex = frameSize;
        int pixelStride = mImage.getPlanes()[0].getPixelStride();
        int rowStride = mImage.getPlanes()[0].getRowStride();
        int rowPadding = rowStride - pixelStride * width;
        ByteBuffer buffer = mImage.getPlanes()[0].getBuffer();

        Bitmap bitmap = Bitmap.createBitmap(getResources().getDisplayMetrics(), width, height, Bitmap.Config.ARGB_8888);

        int A, R, G, B, Y, U, V;
        int offset = 0;

        for (int i = 0; i &lt; height; i++) {
            for (int j = 0; j &lt; width; j++) {

                // Useful link: https://stackoverflow.com/questions/26673127/android-imagereader-acquirelatestimage-returns-invalid-jpg

                R = (buffer.get(offset) &amp; 0xff) &lt;&lt; 16;     // R
                G = (buffer.get(offset + 1) &amp; 0xff) &lt;&lt; 8;  // G
                B = (buffer.get(offset + 2) &amp; 0xff);       // B
                A = (buffer.get(offset + 3) &amp; 0xff) &lt;&lt; 24; // A
                offset += pixelStride;

                int pixel = 0;
                pixel |= R;     // R
                pixel |= G;  // G
                pixel |= B;       // B
                pixel |= A; // A
                bitmap.setPixel(j, i, pixel);

                // RGB to YUV conversion according to
                // https://en.wikipedia.org/wiki/YUV#Y.E2.80.B2UV444_to_RGB888_conversion
//                        Y = ((66 * R + 129 * G + 25 * B + 128) &gt;&gt; 8) + 16;
//                        U = ((-38 * R - 74 * G + 112 * B + 128) &gt;&gt; 8) + 128;
//                        V = ((112 * R - 94 * G - 18 * B + 128) &gt;&gt; 8) + 128;

                Y = (int) Math.round(R *  .299000 + G *  .587000 + B *  .114000);
                U = (int) Math.round(R * -.168736 + G * -.331264 + B *  .500000 + 128);
                V = (int) Math.round(R *  .500000 + G * -.418688 + B * -.081312 + 128);

                // NV21 has a plane of Y and interleaved planes of VU each sampled by a factor
                // of 2 meaning for every 4 Y pixels there are 1 V and 1 U.
                // Note the sampling is every other pixel AND every other scanline.
                yuv420sp[yIndex++] = (byte) ((Y &lt; 0) ? 0 : ((Y &gt; 255) ? 255 : Y));
                if (i % 2 == 0 &amp;&amp; j % 2 == 0) {
                    yuv420sp[uvIndex++] = (byte) ((V &lt; 0) ? 0 : ((V &gt; 255) ? 255 : V));
                    yuv420sp[uvIndex++] = (byte) ((U &lt; 0) ? 0 : ((U &gt; 255) ? 255 : U));
                }
            }
            offset += rowPadding;
        }

        File file = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES).getAbsolutePath(), ""/Awesomebitmap.png"");
        FileOutputStream fos = new FileOutputStream(file);
        bitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);
    } catch (Exception e) {
        Timber.e(e, ""Converting image to NV21 went wrong."");
    }
}
</code></pre>

<p>Now the image is no longer malformed, but the chroma is off. </p>

<p><img src=""https://gyazo.com/0d9947a036c0924f4e09d55ea730e4b8.png"" alt=""Wrong color chroma""></p>

<p>The right side is the bitmap that is being created in that loop, the left side is the NV21 saved to an image. So the RGB pixels are processed correctly. Clearly the chroma is off, but the RGB to YUV conversion should be the same one as depicted by wikipedia. What could be wrong here?</p>
",1360853,,-1,,2017-05-23 12:10:04,2016-11-15 14:48:17,Android ImageReader get NV21 format?,<android><image><imaging><android-mediaprojection>,1,4,3,,
Android,37623264,1,,,2016,,7,1900,"<p>I have the standard com.google.android.gms.vision.Tracker <a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/FaceTracker/app/src/main/java/com/google/android/gms/samples/vision/face/facetracker/FaceTrackerActivity.java"" rel=""noreferrer"">example</a> successfully running on my android device and now i need to postprocess the image to find the iris of the current face which has been notified in the event methods of the Tracker.</p>

<p>So, how do i get the Bitmap frame which matches exactly the com.google.android.gms.vision.face.Face i received in the Tracker events?
This also means that the final bitmap should match the webcam resolution and not the screen resolution.</p>

<p>One bad alternative solution is to call takePicture every few ms on my CameraSource and process this picture separately using the FaceDetector. Although this works i have the problem that the video stream freezes during takepicture and i get lots of GC_FOR_ALLOC messages cause of the single bmp facedetector memory waste.</p>
",73594,,,,,2017-07-19 14:23:32,How to get the current frame (as a Bitmap) for android facedetector in a Tracker event?,<android><vision>,1,5,1,,
Android,31290783,1,31409016,,2015,,7,548,"<p>I implemented a sync task the same way as the <a href=""https://github.com/googlesamples/android-BasicSyncAdapter"" rel=""nofollow noreferrer"">BasicSyncAdapter example</a> except with a Google account like in this answer:</p>

<p><a href=""https://stackoverflow.com/a/2972918/2072569"">https://stackoverflow.com/a/2972918/2072569</a></p>

<p>It works on allmost all devices except for the Samsung SM-P600 (Galaxy Note 2014) with Android 4.4.2 and some other Samsung tablets.</p>

<p>My ContentProvider in the Manifest file has a label. This is the cause of this bug according to <a href=""https://stackoverflow.com/a/26264980/2072569"">this post</a> at some Android version of some Samsung tablets.</p>

<p><strong>Has Samsung blocked adding sync tasks to a Google account for some reason?</strong></p>

<p>The sync is added like this:</p>

<pre><code>removeAllSyncTasks();
ContentResolver.setIsSyncable(mAccount, CONTENT_AUTHORITY, 1);
ContentResolver.setSyncAutomatically(mAccount, CONTENT_AUTHORITY, true);
ContentResolver.addPeriodicSync(mAccount, CONTENT_AUTHORITY, Bundle.EMPTY, SYNC_FREQUENCY);
</code></pre>

<p>Manifest part:</p>

<pre><code>        &lt;service
            android:name="".data.sync.SyncService""
            android:exported=""true""
            android:process="":sync""&gt;
            &lt;intent-filter&gt;
                &lt;action android:name=""android.content.SyncAdapter""/&gt;
            &lt;/intent-filter&gt;
            &lt;meta-data android:name=""android.content.SyncAdapter""
                android:resource=""@xml/syncadapter"" /&gt;
        &lt;/service&gt;


        &lt;provider
            android:name="".data.provider.LevensContentProvider""
            android:authorities=""@string/authority""
            android:label=""@string/app_name_sync""
            android:exported=""false""
            android:syncable=""true"" /&gt;
</code></pre>

<p>Syncadapter xml:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;sync-adapter
    xmlns:android=""http://schemas.android.com/apk/res/android""
    android:contentAuthority=""@string/authority""
    android:accountType=""com.google""
    android:userVisible=""true""
    android:supportsUploading=""true""
    android:allowParallelSyncs=""false""
    android:isAlwaysSyncable=""true""/&gt; 
</code></pre>

<p>When I manually start the sync. The Syncservice is also not starting at the Samsung tablets (it works on all other devices).</p>
",199252,,-1,,2017-05-23 11:51:44,2015-07-16 7:20:23,Custom sync not working with Google Account (com.google) on some Samsung devices,<android><sync><samsung-mobile><android-syncadapter>,1,1,,,
Android,26689630,1,,,2014,,8,2392,"<p>The new Android Lollipop API provides a new pair of methods for getting and setting restrictions on other apps: <a href=""https://developer.android.com/reference/android/app/admin/DevicePolicyManager.html#getApplicationRestrictions(android.content.ComponentName,%20java.lang.String)"">DevicePolicyManager.getApplicationRestrictions</a> and <a href=""https://developer.android.com/reference/android/app/admin/DevicePolicyManager.html#setApplicationRestrictions(android.content.ComponentName,%20java.lang.String,%20android.os.Bundle)"">DevicePolicyManager.setApplicationRestrictions</a></p>

<p>There's an example of them being used in the <a href=""https://github.com/googlesamples/android-BasicManagedProfile"">BasicManagedProfile sample app</a> to set restrictions on the Chrome app by passing a set of key/value pairs that seem to correlate to the <a href=""http://www.chromium.org/administrators/policy-list-3"">Chrome's published policy list</a>. This works perfectly for me.</p>

<p>But I can't find any documentation on any other apps that can be restricted in this way. Does anyone know of any other apps that can be restricted with these methods, and the keys that can be set?</p>

<p><a href=""https://developer.android.com/reference/android/app/admin/DevicePolicyManager.html#getApplicationRestrictions(android.content.ComponentName,%20java.lang.String)"">DevicePolicyManager.getApplicationRestrictions</a> only seems to return the restrictions you've already set for that app, not a list of all available restrictions. I also tried using <a href=""http://developer.android.com/reference/android/content/RestrictionsManager.html#getManifestRestrictions(java.lang.String)"">RestrictionsManager.getManifestRestrictions</a> on Chrome but this returns an empty list, so I think this is something different.</p>
",2652471,,,,,2017-08-16 6:53:55,How to find an app's available restrictions for DevicePolicyManager.setApplicationRestrictions,<android><google-chrome><android-5.0-lollipop><device-policy-manager>,1,6,6,,
Android,36034766,1,36062362,,2016,,8,2523,"<p>I am trying to generate an Android application to use some extra *.so libraries (specifically 'libinterface.so'). Those libraries are generated externally, and included as a dependency inside a wrapper class called from Java side. The library is stored into 'src/main/jniLibs/armeabi-v7a'. The system includes all the .so file into the generated app.</p>

<p>Previously, I was using Eclipse for this purpose and I was able to use this library, but I have problems to do this with Android Studio.</p>

<p>The generated error is: </p>

<pre><code>/home/******/Libraries/android-sdk-linux/ndk-bundle/toolchains/aarch64-linux-android-4.9/prebuilt/linux-x86_64/bin/../lib/gcc/aarch64-linux-android/4.9/../../../../aarch64-linux-android/bin/ld: cannot find -linterface
</code></pre>

<p>As the error is thrown by the linker, it looks related with the library inclusion step. On Eclipse, I was using an 'Android.mk' file to include the new library, but I can't find the way to do this using Gradle.</p>

<pre><code>#Android.mk
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE := libinterface-prebuilt
LOCAL_SRC_FILES := prebuilt/libinterface.so
include $(PREBUILT_SHARED_LIBRARY)
</code></pre>

<p>I am trying to include the libraries with this gradle definition (Note: I have included the last JNI support and gradle-experimental <a href=""https://codelabs.developers.google.com/codelabs/android-studio-jni/index.html?index=..%2F..%2Findex#0"" rel=""nofollow"">using this tutorial</a>):</p>

<pre><code>...
android.buildTypes {
    release {
        minifyEnabled = false
        proguardFiles.add(file('proguard-android.txt'))
    }
}

android.ndk {
    moduleName = ""custom_wrapper_jni""
    cppFlags.add(""-I"" + file(""src/main/jni"").absolutePath)
    cppFlags.add(""-I"" + file(""../Integration/include"").absolutePath)  // &lt;- New library header include path 
    cppFlags.add(""-L"" + file(""src/main/jniLibs/armeabi-v7a"").absolutePath)  // &lt;- Path where the library is stored
    cppFlags.add(""-std=c++11"")
    stl = ""stlport_static"" // Which STL library to use: gnustl or stlport
    ldLibs.add(""log"")

    ldLibs.add(""interface"")    //&lt;- Library to be included
}
...
</code></pre>

<p>The library is compiled externally using CMake and makefile tools, and it is cross-compiled 'correctly' for Android platform (tested with Eclipse and ADT).</p>

<p>I have implemented the wrapper like this:</p>

<pre><code>// custom_wrapper_jni.h
#ifndef ANDROID_JNI_H
#define ANDROID_JNI_H

#include &lt;jni.h&gt;

extern ""C""
{
    JNIEXPORT jint JNICALL
    Java_com_example_goe_android_JniInterface_testFunction(JNIEnv *env,
                                                           jobject instance);
}
#endif
</code></pre>

<p>and</p>

<pre><code>// custom_wrapper_jni.cpp
#include &lt;custom_wrapper_jni.h&gt;

#include ""Interface.h""   // Header of the included library

Interface* mInterface = Interface::create();  // Generate the library class instance

JNIEXPORT jint JNICALL
Java_com_example_goe_android_JniInterface_testFunction(JNIEnv *env,
                                                    jobject instance)
{
    LOGI(""Test function called in wrapper!"");
    return mInterface-&gt;test();    // Use the instance
}
</code></pre>

<p>The header of the library looks like this:</p>

<pre><code>#ifndef INTERFACE_H__
#define INTERFACE_H__

#include &lt;string&gt;

class Interface
{
public:
    static Interface* create();
    virtual ~Interface(){}


    // Testing function
    virtual int test() = 0;

protected:
    Interface();
};
#endif // INTERFACE_H__
</code></pre>

<p>Thanks in advance.</p>

<h1>UPDATE:</h1>

<p>Following <a href=""https://github.com/googlesamples/android-ndk/tree/master/hello-thirdparty"" rel=""nofollow"">this example</a>, I have included some blocks into gradle script:</p>

<pre><code>def lib_path = file(""src/main/jniLibs"").absolutePath

model {

    repositories {
        libs(PrebuiltLibraries) {
            newlibs {
                headers.srcDir file(""../Integration/include"").absolutePath
                binaries.withType(SharedLibraryBinary) {
                    sharedLibraryFile = file(""${lib_path}/${targetPlatform.getName()}/libinterface.so"")
                    println ""Included libraries: "" + file(""${lib_path}/${targetPlatform.getName()}/libinterface.so"")
                }
            }
        }
    }

    android {
     ...
    }

    android.sources {
        main {
            jni {
                dependencies {
                    library ""newlibs"" linkage ""shared""
                }
            }
        }
    }
}
</code></pre>

<p>but is not working:</p>

<pre><code>Error: org.gradle.nativeplatform.toolchain.internal.CommandLineToolInvocationFailure: Linker failed while linking libcustom_wrapper_jni.so.
</code></pre>
",1407528,,1407528,,2016-03-17 7:29:10,2016-03-17 13:43:56,How to use extra *.so libraries on Android Studio and NDK,<android><android-studio><java-native-interface><shared-libraries><gradle-experimental>,1,7,2,,
Android,40144970,1,,,2016,,9,3229,"<p>I've been looking at the Google Android Architecture examples for MVP with Dagger 2:</p>

<p><a href=""https://github.com/googlesamples/android-architecture/blob/todo-mvp-dagger/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/tasks/TasksActivity.java"" rel=""noreferrer"">https://github.com/googlesamples/android-architecture/blob/todo-mvp-dagger/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/tasks/TasksActivity.java</a></p>

<p>But, the example is rather trivial - each Activity has only one Fragment, and the Dagger Component is built in the Activity, and used to inject the Activity with the Presenter for the Fragment.</p>

<p>I've tried building on that example, to add multiple fragments to an Activity and navigate between them. Since each fragment has its own presenter, I've moved the dagger component building into the Fragment. So now I have:</p>

<ul>
<li>FragmentCallback (an interface providing methods to load fragment1 and fragment2)</li>
<li>Activity (implements FragmentCallback)</li>
<li>Fragment1 (implements the view interface)</li>
<li>Fragment1Contract (defines view and presenter interfaces)</li>
<li>Fragment1Presenter (implements the presenter interface)</li>
<li>Fragment1Component (injects Fragment1)</li>
<li>Fragment1Module (provides the view and presenter)</li>
<li>Fragment2</li>
<li>Fragment2Contract (defines view and presenter interfaces)</li>
<li>Fragment2Presenter (implements the presenter interface)</li>
<li>Fragment2Component (injects Fragment2)</li>
<li>Fragment2Module (provides the view and presenter)</li>
</ul>

<p>The activity does very little, it just loads the first fragment and implements FragmentCallback which the view can use to switch to another fragment.</p>

<p>The first fragment has a button which loads the second fragment using the FragmentCallback - which the fragments get by casting the Activity via</p>

<pre><code>public void onAttach(Context context) {
    super.onAttach(context);
    callback = (FragmentCallback) context;
}
</code></pre>

<p>Am I on a sensible track here? While the code looks clean with MVP am I missing something w.r.t the dagger components and modules?</p>

<p>Thanks.</p>

<h1>Update</h1>

<p>I've improved my situation a bit by creating one Component and Module for the Activity. Each Fragment still builds the Dagger context, but I'm no longer injecting the view (fragment) in the presenter constructor - when the fragment builds the context, injects itself (so it has the presenter) it then calls <code>presenter.init(this)</code> so that the presenter now has the view. </p>

<p>This nicely reduces the number of classes, and the next step would be to try only building the component in the activity, and having the fragment use this to inject itself (without having to build a new component). </p>
",20242,,20242,,2016-10-21 23:47:29,2016-11-08 12:22:51,Android MVP with Dagger 2 - Activity with multiple fragments,<android><mvp><dagger-2>,1,7,2,,
Android,48406497,1,48410303,,2018,,10,1935,"<p>I bumped into an issue while trying to implement a touch to focus feature using the <a href=""https://developer.android.com/reference/android/hardware/camera2/package-summary.html"" rel=""noreferrer"">Android Camera2</a>. </p>

<p>The theory is easy:</p>

<ul>
<li>obtain the tap position in the preview surface</li>
<li>map it to the dimensions of the sensor or sensor crop area (in case of a zoom) making sure to invert the dimensions if needed</li>
<li>apply a change of basis to end up in the same basis as the sensor</li>
<li>make a <code>MeteringRectangle</code> out of the result and use it in a new <code>CaptureRequest</code></li>
</ul>

<p>There are a number of examples out there that show how to deal with the first and last point, but not a lot that deal with the second and third in an understandable way. The docs and examples are not really clear and it can be really confusing. </p>

<p>Here we go...</p>

<hr>

<p>The <code>CameraCharacteristics.SENSOR_ORIENTATION</code> is describe as</p>

<blockquote>
  <p>Clockwise angle through which the output image needs to be rotated to be upright on the device screen in its native orientation.</p>
</blockquote>

<p>Knowing that the sensor coordinate system is defined with (0,0) being the top-left pixel in the active pixel array, I read this as being the angle needed to rotate the image captured in the sensor coordinate system 
to the position that would make the image look upright in the native orientation. So if the sensor's top is facing the right side of a phone with a portrait native orientation, the <code>SENSOR_ORIENTATION</code> will be 90.
<a href=""https://i.stack.imgur.com/Nq9Wb.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/Nq9Wb.png"" alt=""Sensor Orientation""></a></p>

<hr>

<p><strong>The display orientation</strong> obtained via <code>mActivity.getWindowManager().getDefaultDisplay().getRotation();</code> is documented as:</p>

<blockquote>
  <p>Returns the rotation of the screen from its ""natural"" orientation. The returned value may be Surface.ROTATION_0 (no rotation), Surface.ROTATION_90, Surface.ROTATION_180, or Surface.ROTATION_270. For example, if a device has a naturally tall screen, and the user has turned it on its side to go into a landscape orientation, the value returned here may be either Surface.ROTATION_90 or Surface.ROTATION_270 depending on the direction it was turned. The angle is the rotation of the drawn graphics on the screen, which is the opposite direction of the physical rotation of the device. For example, if the device is rotated 90 degrees counter-clockwise, to compensate rendering will be rotated by 90 degrees clockwise and thus the returned value here will be Surface.ROTATION_90.</p>
</blockquote>

<p>I find that this definition is much clearer than the sensor orientation one, there is no place for interpretation. </p>

<hr>

<p>Now where things start to get ugly...</p>

<p>I decided to make use of the method provided in the <a href=""https://github.com/googlesamples/android-Camera2Raw"" rel=""noreferrer"">Camera2Raw</a> example to obtain the rotation from the sensor orientation to the device orientation. </p>

<pre><code>/**
 * Rotation need to transform from the camera sensor orientation to the device's current
 * orientation.
 *
 * @param c                 the {@link CameraCharacteristics} to query for the camera sensor
 *                          orientation.
 * @param deviceOrientation the current device orientation relative to the native device
 *                          orientation.
 * @return the total rotation from the sensor orientation to the current device orientation.
 */
private static int sensorToDeviceRotation(CameraCharacteristics c, int deviceOrientation) {
    int sensorOrientation = c.get(CameraCharacteristics.SENSOR_ORIENTATION);

    // Get device orientation in degrees
    deviceOrientation = ORIENTATIONS.get(deviceOrientation);

    // Reverse device orientation for front-facing cameras
    if (c.get(CameraCharacteristics.LENS_FACING) == CameraCharacteristics.LENS_FACING_FRONT) {
        deviceOrientation = -deviceOrientation;
    }

    // Calculate desired JPEG orientation relative to camera orientation to make
    // the image upright relative to the device orientation
    return (sensorOrientation + deviceOrientation + 360) % 360;
}
</code></pre>

<p>Here is a table of the different outputs for a back and front facing camera on a phone with a portrait native orientation.
<a href=""https://i.stack.imgur.com/7DxTE.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/7DxTE.png"" alt=""enter image description here""></a></p>

<p>The first thing I noticed is that if I consider the outputs as described (rotation from the camera sensor orientation to the device's current orientation), 
for it to make sense, I have to consider the output rotation to be <strong>counter-clockwise</strong> (unlike the sensor orientation and device orientation)!! 
For instance if we take the typical 90 sensor and 0 device orientation, the resut is 90 and if I'm not mistaken in my analysis, it can only be counter-clockwise.</p>

<p>Under the hypothesis that my understanding of the sensor and device orientations is correct (not certain about that), then something must be wrong with the results of the above tables, because if you look at the 90 sensor and the 90 device orientation case, it can't be 180 it should be 0. 
The next picture is a visual representation of my understanding of all of this for a 90 sensor orientation phone. <a href=""https://i.stack.imgur.com/JqNiQ.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/JqNiQ.png"" alt=""enter image description here""></a></p>

<p>I went ahead and implemented my basis changes in R<sup>2</sup> to get my tap point from the screen basis to the sensor basis and added the expected offsets. </p>

<p>I observed that if I switch the 180 and 0 calculations, then my touch to focus works perfectly. The correct observed values for the rotation from the sensor to the current device orientation actually correspond to the table for the front camera. </p>

<p>So my gut feeling is that the <code>sensorToDeviceRotation</code> is flawed and the return value should be:</p>

<pre><code>// Calculate desired JPEG orientation relative to camera orientation to make
// the image upright relative to the device orientation
return (sensorOrientation - deviceOrientation + 360) % 360;
</code></pre>

<p>It would actually be more logical in terms of what is computed...</p>

<p>Could someone confirm this? or have I misunderstood something somewhere?</p>

<p>Cheers</p>
",2414033,,192373,,2018-02-18 4:55:48,2018-02-18 4:55:48,Camera2 understanding the sensor and device orientations,<android><rotation><android-camera2>,1,0,8,,
Android,35354363,1,35404097,,2016,,10,1899,"<p>I made a video capture app with Camera2 API by following <a href=""https://github.com/googlesamples/android-Camera2Video"">this</a> guide, </p>

<p>Is there a provision to change brightness/contrast/exposure settings of the video programatically? I'm trying to capture some low-lit video footage, and I wish to increase the exposure.</p>

<p>The documentation <a href=""http://developer.android.com/reference/android/hardware/Camera.Parameters.html"">here</a> seems to apply only for still pictures.</p>

<p>Any such way for video capture, using <strong>Camera2</strong> API?</p>
",2499724,,,,,2016-02-15 7:55:01,Set brightness/contrast in video capture using Android Camera2,<android><video><video-capture><android-camera2>,1,0,4,,
Android,43159280,1,,,2017,,10,2007,"<p>I am using mobile vision API for scanning barcode. I am using <code>TextureView</code> to render camera on it. I read this github thread <a href=""https://github.com/googlesamples/android-vision/issues/15"" rel=""noreferrer"">https://github.com/googlesamples/android-vision/issues/15</a> it seems mobile vision is not compatible with <code>TextureView</code></p>

<p>I see that <code>CameraSource</code> is for <code>SurfaceView</code> which is not compatible with <code>TextureView</code>, as there is no method to preview frames on <code>TextureView</code>. <a href=""https://developers.google.com/android/reference/com/google/android/gms/vision/CameraSource.html#start(android.view.SurfaceHolder)"" rel=""noreferrer"">https://developers.google.com/android/reference/com/google/android/gms/vision/CameraSource.html#start(android.view.SurfaceHolder)</a></p>

<p>I tried to do using below approach and checked that <code>receiveDetections</code> is not being called. Does anyone have any idea how can I integrate mobile vision API with <code>TextureView</code> and <code>Camera</code>.</p>

<h2>MainActivity.java</h2>

<pre><code>@RuntimePermissions
public class ScanBarcodeActivity extends BaseActivity {

    private TextureView textureView;

    private BarcodeDetector barcodeDetector;

    private Camera camera;

    private String TAG = LogUtils.makeLogTag(ScanBarcodeActivity.class);

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ActivityScanBarcodeBinding activityScanBarcodeBinding = setContentView(this, R.layout.activity_scan_barcode);

        textureView = activityScanBarcodeBinding.textureView;

        barcodeDetector = new BarcodeDetector.Builder(this).build();

        ScanBarcodeActivityPermissionsDispatcher.requestCameraPermissionWithCheck(this);

    }

    @Override
    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {
        super.onRequestPermissionsResult(requestCode, permissions, grantResults);
        // NOTE: delegate the permission handling to generated method
        ScanBarcodeActivityPermissionsDispatcher.onRequestPermissionsResult(this, requestCode, grantResults);

        if(permissions[0].equals(Manifest.permission.CAMERA)) {
            if(grantResults[0] == PackageManager.PERMISSION_GRANTED) {
                initializeCamera();            }
        }
    }

    @NeedsPermission(Manifest.permission.CAMERA)
    void requestCameraPermission() {
        initializeCamera();
    }

    void initializeCamera() {
        textureView.setSurfaceTextureListener(new TextureView.SurfaceTextureListener() {
            @Override
            public void onSurfaceTextureAvailable(SurfaceTexture surface, int width, int height) {
                camera = Camera.open();

                /* Set Auto focus */
                Camera.Parameters parameters = camera.getParameters();
                List&lt;String&gt; focusModes = parameters.getSupportedFocusModes();
                if(focusModes.contains(Camera.Parameters.FOCUS_MODE_CONTINUOUS_PICTURE)){
                    parameters.setFocusMode(Camera.Parameters.FOCUS_MODE_CONTINUOUS_PICTURE);
                } else
                if(focusModes.contains(Camera.Parameters.FOCUS_MODE_AUTO)){
                    parameters.setFocusMode(Camera.Parameters.FOCUS_MODE_AUTO);
                }

                camera.setParameters(parameters);

                try {
                    camera.setPreviewTexture(surface);
                } catch (IOException io) {
                    LogUtils.LOGD(TAG, io.getMessage());
                }
                camera.startPreview();
            }

            @Override
            public void onSurfaceTextureSizeChanged(SurfaceTexture surface, int width, int height) {

            }

            @Override
            public boolean onSurfaceTextureDestroyed(SurfaceTexture surface) {
                try {
                    camera.stopPreview();
                    camera.release();
                } catch (Exception e) {
                    LogUtils.LOGD(TAG, e.getMessage());
                }
                return true;
            }

            @Override
            public void onSurfaceTextureUpdated(SurfaceTexture surface) {

            }
        });

        barcodeDetector.setProcessor(new Detector.Processor&lt;Barcode&gt;() {
            @Override
            public void release() {

            }

            @Override
            public void receiveDetections(Detector.Detections&lt;Barcode&gt; detections) {
                final SparseArray&lt;Barcode&gt; barcodes = detections.getDetectedItems();

                if (barcodes.size() != 0) {
                    LogUtils.LOGD(TAG, barcodes.valueAt(0).displayValue);
                }
            }
        });

    }

    @OnShowRationale(Manifest.permission.CAMERA)
    void showRationaleForCamera(final PermissionRequest request) {
        new AlertDialog.Builder(this)
                .setMessage(R.string.permission_camera_rationale)
                .setPositiveButton(R.string.button_allow, new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        request.proceed();
                    }
                })
                .setNegativeButton(R.string.button_deny, new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        request.cancel();
                    }
                })
                .show();
    }

    @OnPermissionDenied(Manifest.permission.CAMERA)
    void showPermissionDeniedForCamera() {
        Toast.makeText(this, R.string.permission_camera_denied, Toast.LENGTH_SHORT).show();
    }

    @OnNeverAskAgain(Manifest.permission.CAMERA)
    void showNeverAskAgainForCamera() {
        Toast.makeText(this, R.string.permission_camera_never_ask_again, Toast.LENGTH_SHORT).show();
    }

}
</code></pre>
",2455259,,2455259,,2017-04-01 16:56:57,2017-04-11 21:53:45,How to use mobile vision API with TextureView and Camera,<android><android-vision><google-vision><android-textureview>,1,0,3,,
Android,50177783,1,,,2018,,10,928,"<p>What backwards compatibility does</p>

<pre><code>NotificationManagerCompat notificationManager = NotificationManagerCompat.from(this);
</code></pre>

<p>provide that I don't get from the normal</p>

<pre><code> NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
</code></pre>

<p>They both have a <code>notify</code> method that worked on my tested devices (down to API level 19).</p>

<p>The Google sample here doesn't even use the <code>Compat</code> version once:</p>

<p><a href=""https://github.com/googlesamples/android-NotificationChannels/blob/master/Application/src/main/java/com/example/android/notificationchannels/NotificationHelper.java"" rel=""noreferrer"">https://github.com/googlesamples/android-NotificationChannels/blob/master/Application/src/main/java/com/example/android/notificationchannels/NotificationHelper.java</a></p>
",8281994,,,,,2018-11-02 19:37:42,NotificationManagerCompat vs NotificationManager,<android><push-notification><notifications><android-notifications>,1,0,3,,
Android,36004651,1,36487904,,2016,,10,802,"<p>OK, perhaps it is very simple, but I just can not figure it out right now.</p>

<p>I have imported google sample project <a href=""https://github.com/googlesamples/android-CardReader.git"" rel=""nofollow"">Card Reader</a> in Android Studio 1.5.1, it compiles at compileSdkVerison 23, it works on my Mobile.</p>

<p>Then I walked through the SDK while came to source code to <code>android.nfc.tech.BasicTagTechnology</code>, I found <code>TransceiveResult</code> inside <code>android.nfc.tech.BasicTagTechnology#transceive</code> couldn't not be resolved then I found the class <code>TransceiveResult</code> is missing in my <code>D:\Android\sdk\platforms\android-23\android.jar</code>, but presents in Android source code here <code>D:\Android\sdk\sources\android-23\android\nfc\TransceiveResult.java</code> then I realized it could be hidden from public, not exported, actually it is</p>

<pre><code>/**
 * Class used to pipe transceive result from the NFC service.
 *
 * @hide
 */

public final class TransceiveResult implements Parcelable
</code></pre>

<p>Then I have done some random things, after I have sync the project, clean and rebuild, invalidate caches / restarted, still not able to resolve <code>TransceiveResult</code> by the way, I am wondering since the symbol has been lost in SDK, how can the project compile smoothly?</p>

<p><strong>EDIT for I finally Aha</strong></p>

<p>We call <code>android.nfc.tech.BasicTagTechnology#transceive</code> in our code rather than <code>TransceiveResult</code>, in the compile-time we no need to resolve <code>TransceiveResult</code>, we only need to resolve <code>android.nfc.tech.BasicTagTechnology#transceive</code> which is referenced in our code, I was lost at that moment.</p>
",1356874,,1356874,,2016-04-11 11:28:21,2016-04-11 11:35:03,How can Android project compile when imported class is missing in SDK?,<android><android-studio><android-sdk-tools><android-build><android-studio-import>,1,7,1,,
Android,38901921,1,,,2016,,10,307,"<p>Everything builds correctly and runs in the emulator, but I cannot seem to get my IntentService to log anything. I'm sure there's something basic that I'm missing or overlooking, but I'm pretty new to Android/Java and have run out of ideas at this point.</p>

<pre><code>public class MainActivity extends AppCompatActivity implements GoogleApiClient.ConnectionCallbacks, GoogleApiClient.OnConnectionFailedListener {

private Geofence geofence;
private PendingIntent mGeofencePendingIntent;
private GoogleApiClient mGoogleApiClient;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    LatLng latLng = new LatLng(39.7492350, -104.9913250);

    geofence = new Geofence.Builder()
            .setRequestId(GEOFENCE_REQ_ID)
            .setCircularRegion(latLng.latitude, latLng.longitude, GEOFENCE_RADIUS_IN_METERS)
            .setExpirationDuration(GEOFENCE_EXPIRATION)
            .setTransitionTypes(Geofence.GEOFENCE_TRANSITION_ENTER | Geofence.GEOFENCE_TRANSITION_EXIT)
            .build();

    mGoogleApiClient = new GoogleApiClient.Builder(this)
            .addApi(LocationServices.API)
            .addConnectionCallbacks(this)
            .addOnConnectionFailedListener(this)
            .build();
    mGoogleApiClient.connect();
}

private boolean checkPermission() {
    Log.i(TAG, ""MainActivity.checkPermission()"");
    return (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED);
}

private GeofencingRequest getGeofencingRequest() {
    Log.i(TAG, ""MainActivity.getGeofencingRequest()"");
    GeofencingRequest.Builder builder = new GeofencingRequest.Builder();
    builder.setInitialTrigger(GeofencingRequest.INITIAL_TRIGGER_ENTER);
    builder.addGeofence(geofence);
    return builder.build();
}

private PendingIntent getGeofencePendingIntent() {
    Log.i(TAG, ""MainActivity.getGeofencePendingIntent()"");
    if (null != mGeofencePendingIntent) {
        return mGeofencePendingIntent;
    }

    Intent intent = new Intent(this, GeofenceTransitionsIntentService.class);
    return PendingIntent.getService(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
}

@Override
public void onConnected(Bundle connectionHint) {
    Log.i(TAG, ""MainActivity.onConnected()"");
    if (checkPermission()) {
        mGeofencePendingIntent = getGeofencePendingIntent();
        LocationServices.GeofencingApi.addGeofences(mGoogleApiClient, getGeofencingRequest(), mGeofencePendingIntent);
    } else {
        Log.i(TAG, ""Permission not granted"");
    }
}

@Override
public void onConnectionSuspended(int i) {
    Log.i(TAG, ""MainActivity.onConnectionSuspended()"");
    if (null != mGeofencePendingIntent) {
        LocationServices.GeofencingApi.removeGeofences(mGoogleApiClient, mGeofencePendingIntent);
    }
}

@Override
public void onConnectionFailed(ConnectionResult connectionResult) {
    Log.i(TAG, ""MainActivity.onConnectionFailed()"");
}}
</code></pre>

<p>Whenever I update that device lat/lng using the emulator or the android console, no intent is received by the following service:</p>

<pre><code>public class GeofenceTransitionsIntentService extends IntentService {

public GeofenceTransitionsIntentService() {
    super(GeofenceTransitionsIntentService.class.getSimpleName());
}

@Override
protected void onHandleIntent(Intent intent) {
    Log.i(TAG, ""GeofenceTransitionsIntentService.onHandleIntent()"");

    GeofencingEvent geofencingEvent = GeofencingEvent.fromIntent(intent);
    if (geofencingEvent.hasError()) {
        int errorCode = geofencingEvent.getErrorCode();
        Log.e(TAG, ""Location Services error: "" + errorCode);
    } else {
        Log.i(TAG, ""geofencingEvent was successful"");
    }
}}
</code></pre>

<p>Manifest:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
</code></pre>

<p></p>

<pre><code>&lt;uses-permission android:name=""android.permission.ACCESS_FINE_LOCATION"" /&gt;

&lt;application
    android:allowBackup=""true""
    android:icon=""@mipmap/ic_launcher""
    android:label=""@string/app_name""
    android:supportsRtl=""true""
    android:theme=""@style/AppTheme""&gt;
    &lt;activity android:name="".MainActivity""&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=""android.intent.action.MAIN"" /&gt;

            &lt;category android:name=""android.intent.category.LAUNCHER"" /&gt;
        &lt;/intent-filter&gt;
    &lt;/activity&gt;

    &lt;service android:name="".GeofenceTransitionsIntentService"" /&gt;
&lt;/application&gt;
</code></pre>

<p></p>

<p>I've been referencing the following resources: <a href=""https://developer.android.com/training/location/geofencing.html#HandleGeofenceTransitions"" rel=""noreferrer"">Android Documentation</a> and <a href=""https://github.com/googlesamples/android-Geofencing/tree/master/Application/src/main/java/com/example/android/wearable/geofencing"" rel=""noreferrer"">Google Sample</a>.</p>
",625675,,,,,2016-08-24 17:19:55,Intent not received from Android Geofence event,<java><android><android-intent><geofencing><android-geofence>,1,2,,,
Android,35489632,1,35509532,,2016,,11,6424,"<p>It seems I've found myself in the deep weeds of the Google Vision API for barcode scanning. Perhaps my mind is a bit fried after looking at all sorts of alternative libraries (ZBar, ZXing, and even some for-cost third party implementations), but I'm having some difficulty finding any information on where I can implement some sort of scan region limiting.</p>

<p>The use case is a pretty simple one: if I'm a user pointing my phone at a box with multiple barcodes of the same type (think shipping labels here), I want to explicitly point some little viewfinder or alignment straight-edge on the screen at exactly the thing I'm trying to capture, without having to worry about anything outside that area of interest giving me some scan results I don't want.</p>

<p>The above case is handled in most other Android libraries I've seen, taking in either a Rect with relative or absolute coordinates, and this is also a part of iOS' AVCapture metadata results system (it uses a relative CGRect, but really the same concept).</p>

<p>I've dug pretty deep into the sample app for the barcode-reader
<a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/barcode-reader"" rel=""noreferrer"">here</a>, but the implementation is a tad opaque to get anything but the high level implementation details down.</p>

<p>It seems an ugly patch to, on successful detection of a barcode anywhere within the camera's preview frame, to simple no-op on barcodes outside of an area of interest, since the device is still working hard to compute those frames.</p>

<p>Am I missing something very simple and obvious on this one? Any ideas on a way to implement this cleanly, otherwise?</p>

<p>Many thanks for your time in reading through this!</p>
",3543729,,,,,2016-02-19 16:00:46,Limit Detection Area in Vision API,<android><google-vision><android-vision>,1,0,5,,
Android,48169430,1,,,2018,,11,428,"<p>I am having trouble to find a proper solution to make view/viewmodel aware of network status, specially using RxJava.</p>

<p>I tried to follow <a href=""https://developer.android.com/topic/libraries/architecture/guide.html#addendum"" rel=""nofollow noreferrer"">Google's NetworkBoundResource</a> and <a href=""https://medium.com/@iammert/offline-app-with-rxjava-2-and-room-ccd0b5c18101"" rel=""nofollow noreferrer"">Iammert's networkBoundResouce</a> (also tried <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample"" rel=""nofollow noreferrer"">GithubBrowserSample</a>
but I just don't really understand the code or how it should be encapsulated.</p>

<p>I'm looking for how can I implement NetworkBoundResource with RxJava2 in a way that the data gets refreshed automatically with the Database.</p>

<p>I will show what I currently have:</p>

<p>A fragment with arch.lifecycle.ViewModel</p>

<pre><code>public class LoginViewModel extends ViewModel {

    static final int SCREEN_JUST_BUTTONS = 0;
    static final int SCREEN_LOGIN_INPUT = 1;
    static final int SCREEN_PASS_INPUT = 2;

    // using a PublishSubject because we are not interested in the last object that was emitted
    // before subscribing. Like this we avoid displaying the snackbar multiple times
    @NonNull
    private final PublishSubject&lt;Integer&gt; snackbarText;

    private int SCREEN = 0;

    private LoginUiModel loginUiModel;
    @NonNull
    private BaseSchedulerProvider schedulerProvider;
    @NonNull
    private UserRepository userRepository;

    @Inject
    LoginViewModel(@NonNull final BaseSchedulerProvider schedulerProvider, @NonNull final UserRepository userRepository) {
        this.schedulerProvider = schedulerProvider;
        this.userRepository = userRepository;
        snackbarText = PublishSubject.create();
        disposables = new CompositeDisposable();
        loginUiModel = new LoginUiModel();
    }

    int getScreen() {
        return SCREEN;
    }

    void setScreen(final int screen) {
        this.SCREEN = screen;
    }

    @NonNull
    Observable&lt;Integer&gt; getSnackbarText() {
        return snackbarText;
    }

    LoginUiModel getLoginUiModel() {
        return loginUiModel;
    }


    public Single&lt;User&gt; login(final String login, final String password) {
        return userRepository.login(login, password)
                             .subscribeOn(schedulerProvider.io())
                             .observeOn(schedulerProvider.ui())
                             .doOnError(this::handleErrorLogin);
    }

    private void handleErrorLogin(final Throwable t) {
        if (t instanceof HttpException) {
            showSnackbar(R.string.Login_invalid_input);
        } else if (t instanceof IOException) {
            showSnackbar(R.string.Common_no_connection);
        } else {
            showSnackbar(R.string.Common_error_loading);
        }
    }

    private void showSnackbar(@StringRes int textId) {
        snackbarText.onNext(textId);
    }

    void forgotPassword() {
        if (isValidEmail(loginUiModel.getEmail())) {
            showSnackbar(R.string.Login_password_sent);
        } else {
            showSnackbar(R.string.Login_invalid_login);
        }
        //TODO;
    }

    boolean isValidEmail(@Nullable final String text) {
        return text != null &amp;&amp; text.trim().length() &gt; 3 &amp;&amp; text.contains(""@"");
    }
}
</code></pre>

<p>and in my UserRepository:</p>

<pre><code>@Singleton
public class UserRepository {

    @NonNull
    private final UserDataSource userRemoteDataSource;

    @NonNull
    private final UserDataSource userLocalDataSource;

    @NonNull
    private final RxSharedPreferences preferences;

    @Inject
    UserRepository(@NonNull RxSharedPreferences rxSharedPreferences, @NonNull @Remote UserDataSource userRemoteDataSource, @NonNull @Local UserDataSource
            userLocalDataSource) {
        this.userRemoteDataSource = userRemoteDataSource;
        this.userLocalDataSource = userLocalDataSource;
        preferences = rxSharedPreferences;
    }

    @NonNull
    public Single&lt;User&gt; login(final String email, final String password) {
        return userRemoteDataSource
                .login(email, password) // busca do webservice
                .flatMap(userLocalDataSource::saveUser) // salva no banco local
                .flatMap(user -&gt; userLocalDataSource.login(user.getEmail(), user.getPassword())) // busca usurio no banco local como SSOT
                .doOnSuccess(this::saveUserId); // salva o ID do usurio nas preferncias.
    }

    public Single&lt;User&gt; saveUser(String email, String password, String name, String phone, String company) {
        User user = new User(0, name, email, password, phone, company);

        return saveUser(user);
    }

    private Single&lt;User&gt; saveUser(final User user) {
        return userRemoteDataSource.saveUser(user)
                                   .flatMap(userLocalDataSource::saveUser)
                                   .doOnSuccess(this::saveUserId); // salva o ID do usurio nas preferncias.
    }

    private void saveUserId(final User user) {
        preferences.getLong(Consts.KEY_USER_ID__long).set(user.getUserId());
    }

    public Flowable&lt;User&gt; getUserUsingSystemPreferences() {
        Preference&lt;Long&gt; userIdPref = preferences.getLong(Consts.KEY_USER_ID__long, -1L);
        if (userIdPref.get() &lt;= 0) {
            //nao deveria acontecer, mas se acontecer, reseta:
            userIdPref.delete();
            return Flowable.error(new RuntimeException(""Not logged in.""));
        } else if (!userIdPref.isSet()) {
            return Flowable.error(new RuntimeException(""Not logged in.""));
        } else {
            return userLocalDataSource.getUser(String.valueOf(userIdPref.get()));
            }
        }
    }
</code></pre>

<p>and my UserLocalDataSource:</p>

<pre><code>@Singleton
public class UserLocalDataSource implements UserDataSource {

    private final UserDao userDao;

    @Inject
    UserLocalDataSource(UserDao userDao) {
        this.userDao = get(userDao);
    }

    @NonNull
    @Override
    public Single&lt;User&gt; login(final String email, final String password) {
        return userDao.login(email, password);
    }

    @Override
    public Flowable&lt;User&gt; getUser(final String id) {
        return userDao.getUserById(Long.valueOf(id));
    }

    @Override
    public Single&lt;User&gt; saveUser(final User user) {
        return Single.create(e -&gt; {
            long id = userDao.insert(user);
            user.setUserId(id);
            e.onSuccess(user);
        });
    }

    @Override
    public Completable deleteUser(final String id) {
        return getUser(id).flatMapCompletable(user -&gt; Completable.create(e -&gt; {
            int numberOfDeletedRows = userDao.delete(user);
            if (numberOfDeletedRows &gt; 0) {
                e.onComplete();
            } else {
                e.onError(new Exception(""Tried to delete a non existing user""));
            }
        }));
    }
}
</code></pre>

<p>and the user remote data source:</p>

<pre><code>public class UserRemoteDataSource implements UserDataSource {

    private final ISApiService apiService;

    @Inject
    UserRemoteDataSource(ISApiService apiService) {
        this.apiService = get(apiService);
    }

    @NonNull
    @Override
    public Single&lt;User&gt; login(final String email, final String password) {
        return apiService.login(email, password);
    }

    @Override
    public Flowable&lt;User&gt; getUser(final String id) {
        throw new RuntimeException(""NO getUser endpoint"");
    }

    @Override
    public Single&lt;User&gt; saveUser(final User user) {
        Map&lt;String, String&gt; params = new HashMap&lt;&gt;();

        params.put(ISApiConsts.EMAIL, user.getEmail());
        params.put(ISApiConsts.NAME, user.getName());
        params.put(ISApiConsts.PASSWORD, user.getPassword());
        params.put(ISApiConsts.PHONE, user.getPhone());
        params.put(ISApiConsts.COMPANY, user.getCompany());

        return apiService.signUp(params);
    }

    @Override
    public Completable deleteUser(final String id) {
        //can't delete user.
        return Completable.complete();
    }
}
</code></pre>

<p>UserDao interface ( It is using Room)</p>

<pre><code>@Dao
public interface UserDao extends BaseDao&lt;User&gt; {

    @Query(""SELECT * FROM user WHERE user_id = :id"")
    Flowable&lt;User&gt; getUserById(long id);

    @Query(""SELECT * FROM user WHERE email = :login AND password = :password"")
    Single&lt;User&gt; login(String login, String password);

}
</code></pre>

<p>What I want to know exactly is: How can I encapsulate my domain while still get access to possible problems like network and show it to the user using RxJava in the MVVM pattern?</p>
",3291164,,3674262,,2018-02-09 18:01:42,2018-02-10 0:39:50,Network Awareness from Repository using RxJava,<android><rx-java2><rx-android>,1,9,4,,
Android,42820003,1,42820930,,2017,,12,9104,"<p>I've been following MVP design pattern provided by <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp/"" rel=""noreferrer"">Google</a>  to refactor my application. I have one MainActivity and many Fragments and it's seems little be messy for me to create activity for every fragment , so i've been thinking to register presenter in fragment. What i'm seeing is that every fragment register it's own presenter, but i'm not sure how much wrong it is... :)</p>

<p>So here is my Presenter:</p>

<pre><code>public class FirstPresenter implements FirstContract.Presenter {
    private final FirstContract.View mView;

    public FirstPresenter(FirstContract.View view) {
        mView = view;
    }

    @Override
    public void start() {
        Log.e(TAG, ""Start"");
    }
}
</code></pre>

<p>And here is my Fragment:</p>

<pre><code>public class FirstFragment extends Fragment implements FirstContract.View {
    private FirstContract.Presenter mPresenter;

@Nullable
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container
            , Bundle savedInstanceState) {
...
// I register firstFragment's presenter here.
mPresenter = new FirstPresenter(this);
...
</code></pre>

<p>So my question is, is this right way? Can i register Presenter into Fragment instead in Activity? And if it is not right way, is there some good example to handle MVP with one activity and multiple fragments?</p>

<p>Thank you guys,
BR!</p>
",2922851,,2922851,,2017-03-15 20:38:22,2018-09-11 11:54:13,Can i register MVP Presenter inside Fragment,<android><android-fragments><android-activity><mvp><android-mvp>,1,1,5,,
Android,29861580,1,29875013,,2015,,12,4281,"<p>Updating to Google Play Services v7.0+, and based in <a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationSettings/app/src/main/java/com/google/android/gms/location/sample/locationsettings/MainActivity.java"">this sample</a> for LocationUpdates in Android, I have the following code to connect to the <code>LocationServices.SettingsApi</code> and check if user has everything OK for the Application receive the location updates.</p>

<pre><code>    LocationSettingsRequest.Builder builder = new LocationSettingsRequest.Builder();
    builder.addLocationRequest(mLocationRequest);
    mLocationSettingsRequest = builder.build();

    PendingResult&lt;LocationSettingsResult&gt; result =
            LocationServices.SettingsApi.checkLocationSettings(
                    mLocationClient,
                    mLocationSettingsRequest
            );
    result.setResultCallback(this);
</code></pre>

<p>Where <code>this</code> is the following callback:</p>

<pre><code>    @Override
    public void onResult(LocationSettingsResult locationSettingsResult) {

        final Status status = locationSettingsResult.getStatus();
        Intent resolutionIntent;
        switch (status.getStatusCode()) {
            case LocationSettingsStatusCodes.SUCCESS:
                // Everything is OK, starting request location updates
                break;
            case LocationSettingsStatusCodes.RESOLUTION_REQUIRED:
                // Seems the user need to change setting to enable locations updates, call startResolutionForResult(Activity, REQUEST_CODE)
                break;
            case LocationSettingsStatusCodes.SETTINGS_CHANGE_UNAVAILABLE:
                // Error, cannot retrieve location updates.
                break;
        }
    }
</code></pre>

<p>The <code>SUCCESS</code> it OK to reproduce, just keep GPS enabled.</p>

<p>The <code>RESOLUTION_REQUIRED</code> is also OK to reproduce, only disable GPS.</p>

<p>The <code>SETTINGS_CHANGE_UNAVAILABLE</code> is the deal: If user select ""NEVER"" when the step <code>RESOLUTION_REQUIRED</code> is executed, the result will come with this status always.</p>

<p>Did the Google Play Services has a option to reset <strong>programmatically</strong> the flag when user select the ""NEVER"" option? </p>

<p>I know that ""NEVER"" seems to be ""<strong><em>Really, don't ask me again!!!</em></strong>"", but I thinking to create a option in case the user change his mind, of course, if this can be possible.</p>

<p>In this case I'll be able to receive the status <code>RESOLUTION_REQUIRED</code> again and ask to user to accept the LocationUpdates when the app is executed next time.</p>
",1481408,,,,,2016-03-23 11:52:13,LocationServices.SettingsApi Reset SETTINGS_CHANGE_UNAVAILABLE flag,<android><google-play-services>,1,0,5,,
Android,30195940,1,30197939,,2015,,13,9302,"<p>I am trying to get the camera frame in preview mode. I am running the sample project from github <a href=""https://github.com/googlesamples/android-Camera2Basic"">https://github.com/googlesamples/android-Camera2Basic</a></p>

<p>The issue I am having is getting the frame in preview mode.</p>

<p>Here is the code:</p>

<pre><code>private CameraCaptureSession.CaptureCallback mCaptureCallback = new CameraCaptureSession.CaptureCallback() {

    private void process(CaptureResult result) {
        switch (mState) {
            case STATE_PREVIEW: {

                //HERE, HOW CAN I RETRIEVE THE CURRENT FRAME?

                break;
            }
            case STATE_WAITING_LOCK: {
               ...
                break;
            }
            case STATE_WAITING_PRECAPTURE: {
             ...
                break;
            }
            case STATE_WAITING_NON_PRECAPTURE: {
             ...
                break;
            }
        }
    }
</code></pre>

<p>Another thing I tried to get the frame is setting the  mImageReader.setOnImageAvailableListener.
I was expecting to be able to get the frame onImageAvailable callback, but onImageAvailable is never called. onPreviewFrame is my own method, I need to pass it the current frame.</p>

<pre><code>  mImageReader = ImageReader.newInstance(largest.getWidth(), largest.getHeight(), ImageFormat.JPEG, /*maxImages*/2);
  mImageReader.setOnImageAvailableListener(mOnImageAvailableListener, mBackgroundHandler);

  private final ImageReader.OnImageAvailableListener mOnImageAvailableListener  = new ImageReader.OnImageAvailableListener() {

    @Override
    public void onImageAvailable(ImageReader reader) {
        mTextureView.onPreviewFrame(reader.acquireNextImage().getPlanes([0].getBuffer().array());
    }

};
</code></pre>

<p>What I am doing wrong?
Thanks.</p>
",1520263,,,,,2016-03-13 18:20:45,Android Camera2 getPreviewFrame,<android><android-camera><android-5.0-lollipop>,1,0,8,,
Android,48189415,1,,,2018,,13,3814,"<p>I've started using Architecture Components in my application and I'm still learning how to use it. </p>

<p>In my app I have an Activity showing different Fragments sequentially. In some of them I need to communicate with a background service in order to receive data from external BLE sensors. Since I need to interact with the service in more than one Fragment, I'm wondering if ViewModel is the right place where to make the binding. <a href=""https://github.com/googlesamples/android-architecture-components/issues/20"" rel=""noreferrer"">I've looked around</a> but I didn't found an answer.</p>

<p>Are there any problems binding a service inside a ViewModel?</p>
",302798,,,,,2018-02-20 6:37:35,Is it correct to bind a ViewModel to a Service?,<android><android-service><android-architecture-components><android-viewmodel>,1,3,1,,
Android,50797934,1,,,2018,,13,138,"<p>I am trying <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""noreferrer"">uamp</a> sample, whenever orientation changes MediaBrowserFragment  recyclerview state is lost(its scroll position is not maintained).</p>

<p>My problem is how to maintain scroll position in uamp sample.</p>

<p>I know I can save scroll position and restore it later but since recyclerView itself maintains scroll state I don't want that hacks.</p>

<p>I tried pushing this simple fragment instead of MediaBrowserFragment and its maintaining its scroll </p>

<pre><code>public class TestFragment extends Fragment {

    @Override
    public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View mRootView = inflater.inflate(R.layout.fragment_test, container, false);
        RecyclerView recyclerView = (RecyclerView) mRootView.findViewById(R.id.recyclerView);
        recyclerView.setLayoutManager(new LinearLayoutManager(getActivity()));
        recyclerView.setAdapter(new RecAdapter());
        return mRootView;
    }


    private class RecAdapter extends RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt; {

        @NonNull
        @Override
        public RecyclerView.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {
            View itemView = LayoutInflater.from(parent.getContext()).inflate(R.layout.layout_text, null);
            return new ItemViewHolder(itemView);
        }

        @Override
        public void onBindViewHolder(@NonNull RecyclerView.ViewHolder holder, int position) {
            ((ItemViewHolder) holder).title.setText(""""+ position);
        }

        @Override
        public int getItemCount() {
            return 200;
        }
    }

    private class ItemViewHolder extends RecyclerView.ViewHolder {
        TextView title;

        ItemViewHolder(View itemLayoutView) {
            super(itemLayoutView);
            title = (TextView) itemLayoutView.findViewById(R.id.title);
        }
    }
}
</code></pre>

<p><strong>Update</strong></p>

<p>I raised the issue with uamp </p>

<p><a href=""https://github.com/googlesamples/android-UniversalMusicPlayer/issues/217"" rel=""noreferrer"">https://github.com/googlesamples/android-UniversalMusicPlayer/issues/217</a></p>
",517247,,517247,,2018-06-30 4:20:15,2018-06-30 4:20:15,UAMP MediaBrowser orientation,<android><mediabrowserservicecompat>,1,0,,,
Android,34476043,1,34503320,,2015,,14,1132,"<p>I am trying to implement the Google's Fingerprint API in my app (in my Fragment specifically). Google has given an example but it's implemented inside an Activity <a href=""https://github.com/googlesamples/android-FingerprintDialog/blob/master/Application/src/main/java/com/example/android/fingerprintdialog/MainActivity.java"" rel=""noreferrer""><strong>here</strong></a>.</p>

<p>My specific question is that the code below to check if there are enrolled fingerprints already, it is giving me an error (screenshot below):</p>

<p><strong>Question</strong> --> What change do I need to do to make it work in my Fragment (as opposed to an activity like Google has)?</p>

<pre><code>if (!mFingerprintManager.hasEnrolledFingerprints()) {
        purchaseButton.setEnabled(false);
        // This happens when no fingerprints are registered.
        Toast.makeText(getActivity(),
                ""Go to 'Settings -&gt; Security -&gt; Fingerprint' and register at least one fingerprint"",
                Toast.LENGTH_LONG).show();
        return;
    }
</code></pre>

<p><a href=""https://i.stack.imgur.com/5k9s2.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/5k9s2.png"" alt=""enter image description here""></a></p>
",1406716,,,,,2015-12-29 2:08:30,Why is `hasEnrolledFingerprints` giving error that it requires a permission only in my Fragment but not in the Activity in Google's Example?,<android><android-fragments><android-6.0-marshmallow><android-fingerprint-api>,1,0,,,
Android,46278357,1,46280749,,2017,,17,1782,"<p>One of the most up to date samples covering Android Architecture Components is <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample"" rel=""nofollow noreferrer"">GithubBrowserSample</a> provided by Google. I reviewed the code and a few questions arose:</p>

<ol>
<li><p>I have noticed that <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/di/ViewModelModule.kt"" rel=""nofollow noreferrer"">ViewModelModule</a> is included in <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/di/AppModule.kt"" rel=""nofollow noreferrer"">AppModule</a>. It means that all the viewmodels are added to the DI graph. Why that is done in that way instead of having separate <code>Module</code> for each Activity/Fragment that would provide only needed <code>ViewModel</code> for specific Activity/Fragment?</p></li>
<li><p>In this specific example, where viewmodels are instantiated using <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/viewmodel/GithubViewModelFactory.kt"" rel=""nofollow noreferrer"">GithubViewModelFactory</a> is there any way to pass a parameter to the specific <code>ViewModel</code>? Or the better solution would be to create a setter in <code>ViewModel</code> and set needed param via setter?</p></li>
</ol>
",4260554,,2489403,,2018-04-29 14:05:37,2018-04-29 14:05:37,"Understanding Android Architecture Components example GithubBrowserSample: ViewModelModule, ViewModel parameters",<android><dagger-2><android-architecture-components><dagger.android><android-viewmodel>,1,1,5,,
Android,45531230,1,45645939,,2017,,19,1797,"<p>I'm currently checking out the following guide: <a href=""https://developer.android.com/topic/libraries/architecture/guide.html"" rel=""noreferrer"">https://developer.android.com/topic/libraries/architecture/guide.html</a></p>

<p>The networkBoundResource class: </p>

<pre><code>// ResultType: Type for the Resource data
// RequestType: Type for the API response
public abstract class NetworkBoundResource&lt;ResultType, RequestType&gt; {
    // Called to save the result of the API response into the database
    @WorkerThread
    protected abstract void saveCallResult(@NonNull RequestType item);

    // Called with the data in the database to decide whether it should be
    // fetched from the network.
    @MainThread
    protected abstract boolean shouldFetch(@Nullable ResultType data);

    // Called to get the cached data from the database
    @NonNull @MainThread
    protected abstract LiveData&lt;ResultType&gt; loadFromDb();

    // Called to create the API call.
    @NonNull @MainThread
    protected abstract LiveData&lt;ApiResponse&lt;RequestType&gt;&gt; createCall();

    // Called when the fetch fails. The child class may want to reset components
    // like rate limiter.
    @MainThread
    protected void onFetchFailed() {
    }

    // returns a LiveData that represents the resource
    public final LiveData&lt;Resource&lt;ResultType&gt;&gt; getAsLiveData() {
        return result;
    }
}
</code></pre>

<p>I'm a bit confused here about the use of threads.<br>
Why is @MainThread applied here for networkIO?<br>
Also, for saving into the db, @WorkerThread is applied, whereas @MainThread for retrieving results.  </p>

<p>Is it bad practise to use a worker thread by default for NetworkIO and local db interaction?  </p>

<p>I'm also checking out the following demo (GithubBrowserSample): <a href=""https://github.com/googlesamples/android-architecture-components"" rel=""noreferrer"">https://github.com/googlesamples/android-architecture-components</a><br>
This confuses me from a threading point of view.<br>
The demo uses executors framework, and defines a fixed pool with 3 threads for networkIO, however in the demo only a worker task is defined for one call, i.e. the <code>FetchNextSearchPageTask</code>. All other network requests seem to be executed on the main thread. </p>

<p>Can someone clarify the rationale? </p>
",917467,,,,,2017-08-12 2:26:17,Android Architecture Components network threads,<java><android><multithreading><architecture>,1,0,3,,
Android,35105545,1,35106120,,2016,,19,15782,"<p>I have just read about Unit Instrumented Testing in Android and I wonder how I can mock a SharedPreferences without any SharedPreferencesHelper class on it like <a href=""https://github.com/googlesamples/android-testing/blob/master/unit/BasicSample/app/src/test/java/com/example/android/testing/unittesting/BasicSample/SharedPreferencesHelperTest.java"" rel=""noreferrer"">here</a></p>

<p>My code is:</p>

<pre><code>public class Auth {
private static SharedPreferences loggedUserData = null;
public static String getValidToken(Context context)
{
    initLoggedUserPreferences(context);
    String token = loggedUserData.getString(Constants.USER_TOKEN,null);
    return token;
}
public static String getLoggedUser(Context context)
{
    initLoggedUserPreferences(context);
    String user = loggedUserData.getString(Constants.LOGGED_USERNAME,null);
    return user;
}
public static void setUserCredentials(Context context, String username, String token)
{
    initLoggedUserPreferences(context);
    loggedUserData.edit().putString(Constants.LOGGED_USERNAME, username).commit();
    loggedUserData.edit().putString(Constants.USER_TOKEN,token).commit();
}

public static HashMap&lt;String, String&gt; setHeaders(String username, String password)
{
    HashMap&lt;String, String&gt; headers = new HashMap&lt;String, String&gt;();
    String auth = username + "":"" + password;
    String encoding = Base64.encodeToString(auth.getBytes(), Base64.DEFAULT);
    headers.put(""Authorization"", ""Basic "" + encoding);
    return headers;
}

public static void deleteToken(Context context)
{
    initLoggedUserPreferences(context);
    loggedUserData.edit().remove(Constants.LOGGED_USERNAME).commit();
    loggedUserData.edit().remove(Constants.USER_TOKEN).commit();
}

public static HashMap&lt;String, String&gt; setHeadersWithToken(String token) {
    HashMap&lt;String, String&gt; headers = new HashMap&lt;String, String&gt;();
    headers.put(""Authorization"",""Token ""+token);
    return headers;
}
private static SharedPreferences initLoggedUserPreferences(Context context)
{
    if(loggedUserData == null)
        loggedUserData = context.getSharedPreferences(Constants.LOGGED_USER_PREFERENCES,0);
    return loggedUserData;
}}
</code></pre>

<p>Is is possible to mock SharedPreferences without creating other class on it?</p>
",3127984,,,,,2016-10-31 9:39:51,How to mock a SharedPreferences using Mockito,<android><sharedpreferences><mockito>,1,0,2,,
Android,47459523,1,,,2017,,24,2967,"<p>I have an architectural question about the android ViewModels:</p>

<p>Let's say that in my App I have an Activity with two Fragments inside (using a Viewpager). The two fragments do different things (therefore may have their own ViewModel?), but they also both need various data that is similar. </p>

<p>This is for example the state if a network connection is available or not (and both fragments show different error UIs if there is no connection), or some user setting that comes via a Push from a server and affects both fragments equally.</p>

<p>This looks something like this:</p>

<p><a href=""https://i.stack.imgur.com/fnss1.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/fnss1.png"" alt=""enter image description here""></a></p>

<p>Now my question is how to deal with that situation when using ViewModels? 
Is it good that a view observes multiple ViewModels, like it would be if I have a ViewModel for the Activity (holding the state that both need equally) and one for each fragment, like this:</p>

<p><a href=""https://i.stack.imgur.com/7CufL.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/7CufL.png"" alt=""enter image description here""></a></p>

<p>This was hinted <a href=""https://github.com/googlesamples/android-architecture-components/issues/205"" rel=""noreferrer"">here</a> for example, but it is not a good practice, as the <a href=""https://stackoverflow.com/questions/9413034/viewmodel-per-view-or-per-model"">relationship in MVVM</a> generally is </p>

<blockquote>
  <p>View n - 1 ViewModel n - 1 Model</p>
</blockquote>

<p>But I am not sure where the right place for such shared LiveData is in my case?</p>
",2567799,,,,,2018-10-09 18:16:22,Android MVVM: Activity with multiple Fragments - Where to put shared LiveData?,<android><mvvm><android-viewmodel>,1,7,9,,
Android,32021193,1,32029162,,2015,,27,25619,"<p>I've been playing with the sample code from the new Google Barcode API.  It overlays a box and the barcode value over the live camera feed of a barcode.  (Also faces)</p>

<p>I can't tell how to return a barcode value to my app.  A) How to tell when a detection event has occurred and B) how to access the ravValue for use in other parts of my app.  Can anyone help with this?</p>

<p><a href=""https://developers.google.com/vision/multi-tracker-tutorial"">https://developers.google.com/vision/multi-tracker-tutorial</a></p>

<p><a href=""https://github.com/googlesamples/android-vision"">https://github.com/googlesamples/android-vision</a></p>

<p><strong>UPDATE:</strong>
Building on @pm0733464's answer, I added a callback interface (called onFound) to the Tracker class that I could access in the Activity. Adapting the Google multi-tracker sample:</p>

<p><strong>GraphicTracker</strong>:</p>

<pre><code>class GraphicTracker&lt;T&gt; extends Tracker&lt;T&gt; {
    private GraphicOverlay mOverlay;
    private TrackedGraphic&lt;T&gt; mGraphic;
    private Callback mCallback;

    GraphicTracker(GraphicOverlay overlay, TrackedGraphic&lt;T&gt; graphic, Callback callback) {
        mOverlay = overlay;
        mGraphic = graphic;
        mCallback = callback;
    }

    public interface Callback {
        void onFound(String barcodeValue);
    }

    @Override
    public void onUpdate(Detector.Detections&lt;T&gt; detectionResults, T item) {
        mCallback.onFound(((Barcode) item).rawValue);
        mOverlay.add(mGraphic);
        mGraphic.updateItem(item);
    }
</code></pre>

<p><strong>BarcodeTrackerFactory</strong> :</p>

<pre><code>class BarcodeTrackerFactory implements MultiProcessor.Factory&lt;Barcode&gt; {
    private GraphicOverlay mGraphicOverlay;
    private GraphicTracker.Callback mCallback;

    BarcodeTrackerFactory(GraphicOverlay graphicOverlay, GraphicTracker.Callback callback) {
        mGraphicOverlay = graphicOverlay;
        mCallback = callback;
    }

    @Override
    public Tracker&lt;Barcode&gt; create(Barcode barcode) {
        BarcodeGraphic graphic = new BarcodeGraphic(mGraphicOverlay);
        return new GraphicTracker&lt;&gt;(mGraphicOverlay, graphic, mCallback);
    }
}
</code></pre>

<p><strong>Main Activity:</strong></p>

<pre><code>BarcodeDetector barcodeDetector = new BarcodeDetector.Builder(context).build();
BarcodeTrackerFactory barcodeFactory = new BarcodeTrackerFactory(mGraphicOverlay, new GraphicTracker.Callback() {
    @Override
    public void onFound(String barcodeValue) {
        Log.d(TAG, ""Barcode in Multitracker = "" + barcodeValue);
    }
});
MultiProcessor&lt;Barcode&gt; barcodeMultiProcessor = new MultiProcessor.Builder&lt;&gt;(barcodeFactory).build();
barcodeDetector.setProcessor(barcodeMultiProcessor);
</code></pre>
",3576831,,3576831,,2015-08-16 4:35:36,2015-10-01 3:17:58,How to capture barcode values using the new Barcode API in Google Play Services?,<android><google-play-services><google-vision>,1,7,15,,
Android,33379534,1,33386364,,2015,,27,8839,"<p><strong>Summary</strong></p>

<p>Finally, I found the related issue, <code>setForeground()</code> incorrectly flagged as requiring API 23 on ViewGroups extending <code>FrameLayout</code>.</p>

<p><a href=""https://code.google.com/p/android/issues/detail?id=189041"" rel=""noreferrer"">Issue 189041:  setForeground() incorrectly flagged as requiring API 23 (NewApi) for ViewGroups extending FrameLayout</a></p>

<p>If you are not extending <code>FrameLayout</code>, the documentation is wrong and API 23 is required.</p>

<p><a href=""https://code.google.com/p/android/issues/detail?id=186273"" rel=""noreferrer"">Issue 186273:  View.setForeground wrong API level</a></p>

<p><strong>Updated question</strong></p>

<p>Marked as <a href=""https://stackoverflow.com/a/33201753/1009132"">duplicated of Can't use <code>setForeground</code> method on ImageView</a> by Commonsware and answered by him:</p>

<blockquote>
  <p>That is a documentation bug. setForeground() existed on FrameLayout
  from API Level 1; it is only on View as of API Level 23.</p>
</blockquote>

<p>In my case the documentation bug is not detected by the inspection in the fork but does it in an integration project, I don't understand it, anyway, this answers my initial question.</p>

<p>But It's not the same case, this code is already extending a <code>Framelayout</code> and using this method, it's not an <code>ImageView</code>, so I suppose the method has been removed in API 23. It doesn't appear in the reference now.</p>

<p><strong>Update:</strong> I add a <a href=""https://developer.android.com/sdk/api_diff/23/changes.html"" rel=""noreferrer"">diff report</a> for FrameLayout:</p>

<p><a href=""https://i.stack.imgur.com/cRCUa.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/cRCUa.png"" alt=""enter image description here""></a></p>

<p><strong>New question</strong></p>

<p>So my question changes to how to use the method in previous versions, and, why does appear the inspection error selectively?</p>

<p>If I add a redundant cast, the error message disappears:</p>

<pre><code>((FrameLayout) layout).getForeground()
</code></pre>

<p>But it's accessing the <code>View</code> method that is not supported now.</p>

<p>So I suppose targeting a previous API would remove the error message but I would appreciate a solution to use this Framelayout method or a clue to fix the issue in my case:</p>

<pre><code>ANDROID_COMPILE_SDK_VERSION=23
ANDROID_BUILD_TOOLS_VERSION=23.0.1
ANDROID_DEFAULT_MIN_SDK_VERSION=19
ANDROID_DEFAULT_TARGET_SDK_VERSION=23
</code></pre>

<p><strong>Workaround</strong> </p>

<p>In short, as a workaround, I changed the type to <code>FrameLayout</code> directly, so warnings about API and casting are gone, and I tested it works on Android 4.4.4 device and debugging, I thought it would crash, anyway it's only used in one animation, and I will fix/replace it in the future.</p>

<p><strong>Initial question</strong></p>

<p>I forked and customised the Google sample <a href=""https://github.com/googlesamples/android-topeka/blob/master/app/src/main/java/com/google/samples/apps/topeka/widget/quiz/AbsQuizView.java#L89"" rel=""noreferrer"">android-topeka</a>, and android-studio shows an error that I don't understand about the API level required to use the method <code>getForeground()</code> of the class <code>View</code> in <code>android.view</code> package:</p>

<blockquote>
  <p>Call requires API level 23 (current min is 19):
  android.view.View#getForeground</p>
</blockquote>

<p>The <a href=""http://developer.android.com/reference/android/view/View.html#getForeground()"" rel=""noreferrer"">reference</a> marks the method as added in API level 1, and the documentation (<code>Control+Q</code>) shows the same:</p>

<p><a href=""https://i.stack.imgur.com/YTaVn.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/YTaVn.png"" alt=""Doc showing API level 1 method""></a></p>

<p>But the <code>Calling new methods on older versions inspection</code> shows an error that API level 23 is required:</p>

<p><a href=""https://i.stack.imgur.com/xrVqr.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/xrVqr.png"" alt=""Error message about API 23 required""></a></p>

<p>I found a <a href=""https://stackoverflow.com/questions/16591672/android-studio-call-requires-api-level-16-error"">similar question</a>,  a bug in that case, but I think this is not a bug due to the original fork doesn't show this error message.</p>

<p>I'll try to detect the first time the message appears, but I did a lot of changes so any clue would be appreciated, thanks.</p>
",1009132,,1009132,,2018-01-09 17:27:45,2018-09-19 4:48:56,"Call requires API level 23' error, but getForeground() exists on FrameLayout from API 1",<java><android><android-studio><android-framelayout><android-api-levels>,1,0,2,,
Android,32715573,1,,,2015,,30,2306,"<p>I am using the <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker"" rel=""noreferrer"">FaceTracker</a> sample from the Android vision API. However, I am experiencing difficulty in recording videos while the overlays are drawn on them. </p>

<p>One way is to store bitmaps as images and process them using FFmpeg or Xuggler to merge them as videos, but I am wondering if there is a better solution to this problem if we can record video at runtime as the preview is projected.</p>

<p><strong>Update 1:</strong>
I updated the <a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/FaceTracker/app/src/main/java/com/google/android/gms/samples/vision/face/facetracker/ui/camera/CameraSourcePreview.java"" rel=""noreferrer"">following</a> class with media recorder, but the recording is still not working. It is throwing the following error when I call triggerRecording() function:</p>

<p><strong>MediaRecorder: start called in an invalid state: 4</strong></p>

<p>and I have external storage permission in the Manifest file.</p>

<p><strong>Update 2:</strong></p>

<p>I have fixed the above issue in the code and moved the setupMediaRecorder() in the onSurfaceCreated callback. However, when I stop recording it throws the runtime-exception. According to the <a href=""http://developer.android.com/reference/android/media/MediaRecorder.html#stop%28%29"" rel=""noreferrer"">documentation</a> if there is no video/audio data Runtime exception will be thrown.</p>

<p>So, what am I missing here? </p>

<pre><code>public class CameraSourcePreview extends ViewGroup {
    private static final String TAG = ""CameraSourcePreview"";

    private static final SparseIntArray ORIENTATIONS = new SparseIntArray();

    static {
        ORIENTATIONS.append(Surface.ROTATION_0, 90);
        ORIENTATIONS.append(Surface.ROTATION_90, 0);
        ORIENTATIONS.append(Surface.ROTATION_180, 270);
        ORIENTATIONS.append(Surface.ROTATION_270, 180);
    }

    private MediaRecorder mMediaRecorder;
    /**
     * Whether the app is recording video now
     */
    private boolean mIsRecordingVideo;

    private Context mContext;
    private SurfaceView mSurfaceView;
    private boolean mStartRequested;
    private boolean mSurfaceAvailable;
    private CameraSource mCameraSource;

    private GraphicOverlay mOverlay;

    public CameraSourcePreview(Context context, AttributeSet attrs) {
        super(context, attrs);
        mContext = context;
        mStartRequested = false;
        mSurfaceAvailable = false;

        mSurfaceView = new SurfaceView(context);

        mSurfaceView.getHolder().addCallback(new SurfaceCallback());

        addView(mSurfaceView);

        mMediaRecorder = new MediaRecorder();
    }

    private void setUpMediaRecorder() throws IOException {
        mMediaRecorder.setPreviewDisplay(mSurfaceView.getHolder().getSurface());
        mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.SURFACE);
        mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);

        mMediaRecorder.setOutputFile(Environment.getExternalStorageDirectory() + File.separator + Environment.DIRECTORY_DCIM + File.separator + System.currentTimeMillis() + "".mp4"");
        mMediaRecorder.setVideoEncodingBitRate(10000000);
        mMediaRecorder.setVideoFrameRate(30);
        mMediaRecorder.setVideoSize(480, 640);
        mMediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264);
        mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);
        //int rotation = mContext.getWindowManager().getDefaultDisplay().getRotation();
        //int orientation = ORIENTATIONS.get(rotation);
        mMediaRecorder.setOrientationHint(ORIENTATIONS.get(0));
        mMediaRecorder.prepare();

        mMediaRecorder.setOnErrorListener(new MediaRecorder.OnErrorListener() {
            @Override
            public void onError(MediaRecorder mr, int what, int extra) {
                Timber.d(mr.toString() + "" : what["" + what + ""]"" + "" Extras["" + extra + ""]"");
            }
        });
    }

    public void start(CameraSource cameraSource) throws IOException {
        if (cameraSource == null) {
            stop();
        }

        mCameraSource = cameraSource;

        if (mCameraSource != null) {
            mStartRequested = true;
            startIfReady();
        }
    }

    public void start(CameraSource cameraSource, GraphicOverlay overlay) throws IOException {
        mOverlay = overlay;
        start(cameraSource);
    }

    public void stop() {
        if (mCameraSource != null) {
            mCameraSource.stop();
        }
    }

    public void release() {
        if (mCameraSource != null) {
            mCameraSource.release();
            mCameraSource = null;
        }
    }

    private void startIfReady() throws IOException {
        if (mStartRequested &amp;&amp; mSurfaceAvailable) {
            mCameraSource.start(mSurfaceView.getHolder());
            if (mOverlay != null) {
                Size size = mCameraSource.getPreviewSize();
                int min = Math.min(size.getWidth(), size.getHeight());
                int max = Math.max(size.getWidth(), size.getHeight());
                if (isPortraitMode()) {
                    // Swap width and height sizes when in portrait, since it will be rotated by
                    // 90 degrees
                    mOverlay.setCameraInfo(min, max, mCameraSource.getCameraFacing());
                } else {
                    mOverlay.setCameraInfo(max, min, mCameraSource.getCameraFacing());
                }
                mOverlay.clear();
            }

            mStartRequested = false;
        }
    }

    private class SurfaceCallback implements SurfaceHolder.Callback {
        @Override
        public void surfaceCreated(SurfaceHolder surface) {
            mSurfaceAvailable = true;
            surface.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

            // setup the media recorder
            try {
                setUpMediaRecorder();
            } catch (IOException e) {
                e.printStackTrace();
            }

            try {
                startIfReady();
            } catch (IOException e) {
                Timber.e(TAG, ""Could not start camera source."", e);
            }
        }

        @Override
        public void surfaceDestroyed(SurfaceHolder surface) {
            mSurfaceAvailable = false;
        }

        @Override
        public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
        }
    }

    @Override
    protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
        int width = 320;
        int height = 240;
        if (mCameraSource != null) {
            Size size = mCameraSource.getPreviewSize();
            if (size != null) {
                width = size.getWidth();
                height = size.getHeight();
            }
        }

        // Swap width and height sizes when in portrait, since it will be rotated 90 degrees
        if (isPortraitMode()) {
            int tmp = width;
            width = height;
            height = tmp;
        }

        final int layoutWidth = right - left;
        final int layoutHeight = bottom - top;

        // Computes height and width for potentially doing fit width.
        int childWidth = layoutWidth;
        int childHeight = (int) (((float) layoutWidth / (float) width) * height);

        // If height is too tall using fit width, does fit height instead.
        if (childHeight &gt; layoutHeight) {
            childHeight = layoutHeight;
            childWidth = (int) (((float) layoutHeight / (float) height) * width);
        }

        for (int i = 0; i &lt; getChildCount(); ++i) {
            getChildAt(i).layout(0, 0, childWidth, childHeight);
        }

        try {
            startIfReady();
        } catch (IOException e) {
            Timber.e(TAG, ""Could not start camera source."", e);
        }
    }

    private boolean isPortraitMode() {
        int orientation = mContext.getResources().getConfiguration().orientation;
        if (orientation == Configuration.ORIENTATION_LANDSCAPE) {
            return false;
        }
        if (orientation == Configuration.ORIENTATION_PORTRAIT) {
            return true;
        }

        Timber.d(TAG, ""isPortraitMode returning false by default"");
        return false;
    }

    private void startRecordingVideo() {
        try {
            // Start recording
            mMediaRecorder.start();
            mIsRecordingVideo = true;
        } catch (IllegalStateException e) {
            e.printStackTrace();
        }
    }

    private void stopRecordingVideo() {
        // UI
        mIsRecordingVideo = false;
        // Stop recording
        mMediaRecorder.stop();
        mMediaRecorder.reset();
    }

    public void triggerRecording() {
        if (mIsRecordingVideo) {
            stopRecordingVideo();
            Timber.d(""Recording stopped"");
        } else {
            startRecordingVideo();
            Timber.d(""Recording starting"");
        }
    }
}
</code></pre>
",1053097,,4702010,,2017-12-07 11:51:59,2017-12-30 8:14:29,Media Recorder with Google Vision API,<android><android-camera><android-mediarecorder><google-vision><android-vision>,1,7,6,,
Android,50970915,1,,,2018,,33,2247,"<h2>Background</h2>

<p>Phone recording is not really supported on Android, yet some devices support it to some extend. </p>

<p>This made various call recording apps gather as much possible information about devices and what should be done to them, and decide upon this what to do.</p>

<p>Some even offer root solutions.</p>

<p>One such example is <a href=""https://play.google.com/store/apps/details?id=com.boldbeast.recorder&amp;hl=en"" rel=""noreferrer""><strong>boldbeast Call Recorder app</strong></a>, which offers a lot of various configurations to change:</p>

<p><a href=""https://i.stack.imgur.com/SV6Ud.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/SV6Ud.png"" alt=""enter image description here""></a></p>

<ul>
<li><p>""record mode"" . Shows 14 modes for non-rooted devices, and up to 34 for rooted. Also shows ""Alsa mode"" as an option for it, for rooted devices.</p></li>
<li><p>Has ""Tune Audio Effect (""auto tune a groupd of parameters"") . </p></li>
<li><p>Has ""Tune Audio Route"", with the possible values of ""Disabled"", ""Group1"", ""Group2"", ""Group3""</p></li>
<li><p>For rooted devices: </p>

<ul>
<li><p>""change audio controls"" (""auto change audio controls"")</p></li>
<li><p>""change audio driver"" (change audio drive settings to enable record mode 21,22,23,24,31,32,33,34"")</p></li>
<li><p>For rooted devices: ""start input stream""</p></li>
</ul></li>
</ul>

<h2>The problem</h2>

<p>If I'm in need to create a call recording app, there is no other way than to find the various workarounds for various devices, but as it seems other apps use terms that don't appear in the API.</p>

<p>I can't find any of those of the app I've mentioned, for example.</p>

<h2>What I've found</h2>

<p>Other than tons of questions of how to record calls on Android, showing that it doesn't work on all devices, I could find some interesting things. Here are my tries and insights so far:</p>

<ul>
<li><p>There are some Audio recording sources we can use while preparing the recording (docs <a href=""https://developer.android.com/reference/android/media/MediaRecorder.AudioSource"" rel=""noreferrer""><strong>here</strong></a>) , but sadly in each device it might be different. For some, VOICE_CALL works, and for some, others. But at least we can try...</p></li>
<li><p>On OnePlus 2 with Android 6.0.1, incoming calls can be recorded using <a href=""https://developer.android.com/reference/android/media/MediaRecorder.AudioSource.html#VOICE_CALL"" rel=""noreferrer""><strong>VOICE_CALL</strong></a>, but I can't make outgoing calls be recorded there, unless I use MIC as audio source together with speaker turned on. Somehow, the app I've mentioned succeeds recording it without any issues. I'm sure I will see other issues with other Android devices, as I've tried to address this whole topic in the past. Update: I've found <a href=""https://github.com/riul88/call-recorder-for-android"" rel=""noreferrer""><strong>this sample</strong></a> project (also <a href=""https://www.ipragmatech.com/make-call-recording-android-app/"" rel=""noreferrer""><strong>here</strong></a>), which for some reason sleeps for 2 seconds on the UI thread between <code>prepare</code> and <code>start</code> calls of the mediaRecorder. It works fine, and when I did something similar (wait using Handler.postDelayed for 1 second), it worked fine too. The comment that was written there is ""Sometimes prepare takes some time to complete"".</p></li>
<li><p>On Galaxy S7 with Android 8, I've failed to get sound of the other side for outgoing calls AND incoming calls (even with MIC and speaker), no matter what I did, yet the app I've mentioned worked fine.</p></li>
<li><p>To let you try my POC of call recording, I've published an open source github repository <a href=""https://github.com/AndroidDeveloperLB/PhoneCallRecorder"" rel=""noreferrer""><strong>here</strong></a>, having a sample that will record a single call, and let you listen to the most recent one, if all works well.</p></li>
<li><p><a href=""https://github.com/ViktorDegtyarev/CallRecLib"" rel=""noreferrer""><strong>This ""ViktorDegtyarev - CallRecLib"" SDK</strong></a> , which doesn't seem to work at all, and crashes on various Android versions</p></li>
<li><p>These 2 old sample projects : <a href=""https://code.google.com/archive/p/rvoix/downloads"" rel=""noreferrer""><strong>rvoix</strong></a> , <a href=""https://github.com/esnyder/callrecorder"" rel=""noreferrer""><strong>esnyder-callrecorder</strong></a> , both fail to actually record. The second doesn't even seem to work on Android 6.0.1 device, which it's supposed to support.</p></li>
<li><p><a href=""https://github.com/aykuttasil/CallRecorder"" rel=""noreferrer""><strong>aykuttasil - CallRecorder</strong></a> sample and <a href=""https://gitlab.com/axet/android-call-recorder"" rel=""noreferrer""><strong>axet - android-call-recorder</strong></a> sample - both, just like on my POC, don't have any tweaking except for AudioSource, and because of this they fails to record on some cases, such as OnePlus 2 output-audio of outgoing calls.</p></li>
<li><p>Most third party apps only offer the AudioSource tweaking, but some (like ""boldbeast"") do offer more. One example is ""<a href=""https://play.google.com/store/apps/details?hl=en&amp;id=com.appstar.callrecorder"" rel=""noreferrer""><strong>Automatic Call Recorder</strong></a>"" which has ""configuration"" (10 values to choose from, first is ""default"") and ""method"" (5 vales to choose from, first is ""default""). Those apps probably do not want others to understand what those configurations mean, so they put general names. Or, it's just too complicated for everyone (especially for users), so they generalize the names.</p></li>
<li><p>There is an API of ""setMode"" <a href=""https://stuff.mit.edu/afs/sipb/project/android/docs/reference/android/media/AudioManager.html#setMode(int)"" rel=""noreferrer""><strong>here</strong></a>, but it doesn't seem to change upon calling it. I was thinking of maybe change the ""channel"" of where the call is being used, this way, but it doesn't work. It stays on the value of ""2"" during call, which is <a href=""https://stuff.mit.edu/afs/sipb/project/android/docs/reference/android/media/AudioManager.html#MODE_IN_CALL"" rel=""noreferrer""><strong>MODE_IN_CALL</strong></a>.</p></li>
<li><p>There are customized parameters that are available for various devices (each OEM and its own parameters), which can be set <a href=""https://developer.android.com/reference/android/media/AudioManager.html#setParameters(java.lang.String)"" rel=""noreferrer""><strong>here</strong></a> and maybe even via JNI (<a href=""https://stackoverflow.com/a/46804577/878126""><strong>here</strong></a> and <a href=""https://stackoverflow.com/q/37080374/878126""><strong>here</strong></a>) , but I don't get where to get this information from (meaning which pairs of key-value are available). I've searched in a lot of places, but couldn't find any website that talks about which possible parameters are available, and for which devices.</p></li>
<li><p>I was thinking of using <a href=""https://developer.android.com/reference/android/media/AudioRecord"" rel=""noreferrer""><strong>AudioRecord</strong></a> instead of <a href=""https://developer.android.com/reference/android/media/MediaRecorder"" rel=""noreferrer""><strong>MediaRecorder</strong></a> class for recording, thinking that it's a bit low level, so it could give me more power and access to customized capabilities, but it seems to be very similar to MediaRecorder, and even use the same audio sources (example <a href=""https://gist.github.com/kmark/d8b1b01fb0d2febf5770"" rel=""noreferrer""><strong>here</strong></a>).</p></li>
<li><p>Another try I had with low level API, was even further, of using JNI (OpenSL ES for Android). For this, I couldn't find much information (except <a href=""https://developer.android.com/ndk/guides/audio/opensl/opensl-for-android"" rel=""noreferrer""><strong>here</strong></a> and <a href=""https://googlesamples.github.io/android-audio-high-performance/guides/opensl_es.html"" rel=""noreferrer""><strong>here</strong></a>), and only found the 2 samples of Google <a href=""https://github.com/googlesamples/android-ndk"" rel=""noreferrer""><strong>here</strong></a> (called ""audio echo"" and ""native audio""), which are not about recording sound, or at least I don't see them occur. </p></li>
<li><p>Android P might have official way to record calls (read <a href=""https://www.androidpit.com/android-p-news-release-features"" rel=""noreferrer""><strong>here</strong></a> and <a href=""https://www.neowin.net/news/android-p-could-officially-support-call-recording"" rel=""noreferrer""><strong>here</strong></a>). Testing on my Android P DP3 device (Pixel 2), I could record both sides fine in both incoming and outgoing calls, using ""DEFAULT"" as audio source, so maybe the API will finally be official and work on all Android versions. I wrote about it <a href=""https://issuetracker.google.com/issues/110436314"" rel=""noreferrer""><strong>here</strong></a> and <a href=""https://issuetracker.google.com/issues/110433612"" rel=""noreferrer""><strong>here</strong></a>.</p></li>
<li><p>I was thinking that maybe the <a href=""https://developer.android.com/reference/android/media/audiofx/Visualizer"" rel=""noreferrer""><strong>Visualizer</strong></a> class could be a workaround of recording, but according to some StackOverflow post (<a href=""https://stackoverflow.com/a/30157272/878126""><strong>here</strong></a>), the quality it extremely low, so I decided that maybe I shouldn't try it. Plus I couldn't find a sample of how to record from it.</p></li>
<li><p>I've found some parameters that might be available on some devices, <a href=""https://android.googlesource.com/platform/hardware/libhardware/+/jb-mr0-release/include/hardware/audio.h"" rel=""noreferrer""><strong>here</strong></a> (found from <a href=""https://stackoverflow.com/a/37921082/878126""><strong>here</strong></a>), all start with ""AUDIO_PARAMETER_"", but testing on Galaxy S7, all returned empty string. I've also found <a href=""https://twigstechtips.blogspot.com/2013/07/android-enable-noise-cancellation-in.html"" rel=""noreferrer""><strong>this website</strong></a>, that gave me the idea of using <code>audioManager.setParameters(""noise_suppression=off"")</code> together with MIC audio source, but this didn't seem to do anything in the case of Galaxy S7.</p></li>
</ul>

<h2>The questions</h2>

<p>As opposed to other similar questions about this topic, I'm not asking how to record calls. I already know it's a very problematic and complex problem. I already know I will have to address various configurations, and that I will probably use a server to store all of them and find there the best match for each one.</p>

<p>What I want to ask is more about the tweaking and workarounds :</p>

<ol>
<li><p>Is there a list of configurations for the various devices, Android versions, and what to choose for each?</p></li>
<li><p>Besides Audio source, which other configuration is possible to be used?</p></li>
<li><p>Which parameters are possible for the various devices and Android versions ? Are there any websites of the OEMs describing them? </p></li>
<li><p>What are the various terms in the app I've mentioned? Where can I find information of how to change them?</p></li>
<li><p>Which tools are available for rooted devices?</p></li>
<li><p>Is it possible to know which device supports call recording and which not, by using the API ? </p></li>
<li><p>About the workaround of OnePlus 2, to wait a moment till we start recording, why is it needed? Is it needed on all Android versions? Is it a known issue? Would 1 second be enough?</p></li>
<li><p>How come on the Galaxy S7 I've failed to record the other side even when using MIC&amp;speaker? </p></li>
</ol>
",878126,,878126,,2018-06-26 12:21:11,2018-12-10 16:59:01,How do some apps overcome phone recording restrictions?,<android><audio><call-recording>,1,12,17,,
Android,35381104,1,,,2016,,46,943,"<p>Releasing promo codes for in-app purchases seems like it will prevent an app from (ever again) performing remote server purchase verification!</p>

<p>When a <a href=""http://developer.android.com/intl/es/google/play/billing/billing_promotions.html"" rel=""noreferrer"">promo code</a> is used for an in-app purchase (the <code>PURCHASES_UPDATED</code> broadcast), it will completely bypass the purchase flow so the app has no chance to supply an <a href=""http://developer.android.com/google/play/billing/billing_best_practices.html#payload"" rel=""noreferrer"">""developerPayload""</a>, used for remote verification.</p>

<p>Later when the app call <a href=""http://developer.android.com/intl/es/google/play/billing/billing_reference.html#getPurchases"" rel=""noreferrer"">getPurchases()</a> to get/verify owner products, the <a href=""http://developer.android.com/intl/es/google/play/billing/billing_reference.html#purchase-data-table"" rel=""noreferrer"">purchase data</a> for promo purchases won't contain a <code>""developerPayload""</code> of course, but neither an <code>""orderId""</code>, also useful for remote verification using the <a href=""https://developers.google.com/android-publisher/api-ref/purchases/products"" rel=""noreferrer"">Google Play Developer API</a>.</p>

<p><strong>How is an app supposed to verify in-app purchases made with promo codes?</strong></p>

<p>Allowing users to redeem promo codes through the Google Play Store app/site, thus bypassing the purchase flow, seems like an major oversight which shouldn't be possible.</p>

<p>Issue reports:</p>

<ul>
<li><a href=""https://code.google.com/p/android/issues/detail?id=200722"" rel=""noreferrer"">https://code.google.com/p/android/issues/detail?id=200722</a> (closed WrongForum)</li>
<li><a href=""https://github.com/googlesamples/android-play-billing/issues/7"" rel=""noreferrer"">https://github.com/googlesamples/android-play-billing/issues/7</a></li>
</ul>

<p>Similar posts:</p>

<ul>
<li><a href=""https://stackoverflow.com/questions/34979420/in-app-purchases-made-via-promo-codes-return-empty-developer-payload-string"">In-app purchases made via promo codes return empty developer payload string</a></li>
</ul>
",445360,,-1,,2017-05-23 11:55:00,2017-07-06 19:38:41,In-app purchase promo codes breaks remote server verification?,<android><google-play><in-app-billing><promotion-code>,1,1,10,,
Android,42068877,1,42069068,,2017,,1,821,"<p>Android 6.0 (M) offers new features Fingerprint Authentication. I tried this example <a href=""https://github.com/googlesamples/android-FingerprintDialog"" rel=""nofollow noreferrer"">android-FingerprintDialog</a> it's good google sample.</p>

<p>A Problem is i am creating app like once user successfully authenticated by Fingerprint load that user data from <code>SQlite Database</code> but <code>FingerprintManager</code> can't provide any unique identity of fingerprint. If anyone have idea about this then please share it.</p>
",4395114,,4395114,,2017-02-06 13:27:51,2017-12-21 8:04:21,Is Android Fingerprint provide fingerprint name or Any unique identity of fingerprint?,<android><android-6.0-marshmallow><android-fingerprint-api>,2,9,2,,
Android,47148619,1,47161584,,2017,,1,157,"<p>I'm super excited that Realm now supports RxJava 2 which introduces the asFlowable functionality so thank you to anyone that contributed to this.</p>

<p>The problem I'm facing is how to best manage the life cycle of realm instances in my local data source singleton class. My local data source is similar to the Android architecture sample <a href=""https://github.com/googlesamples/android-architecture/blob/todo-mvp-rxjava/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/data/source/local/TasksLocalDataSource.java"" rel=""nofollow noreferrer"">here</a>. In the Realm examples for RxJava, they instantiate a realm instance in the onCreate and close it in the onDestroy of the activity. However, since my local data source is a singleton, I won't have these lifecycle events to instantiate and close the instance.</p>

<p>The question is: should I instantiate a realm instance every time the singleton is created and close it only when the singleton is destroyed or should I instantiate a realm instance in the activity/fragment, inject it into the local data source, and then close it in the activity/fragment?
Any other suggestions are welcome. Thanks!</p>
",3308320,,,,,2017-11-07 15:27:26,How do you structure a local data source using RxJava and Realm?,<android><realm><mvp><rx-java2>,2,0,1,,
Android,43319318,1,,,2017,,1,1063,"<p>I am building a custom camera with the Camera2 API.
So far the camera works very well except for the preview which is distorted sometimes. Let's say I open the camera 7 times in a row. All of the attempts are succesful and the 8th time the camera preview is distorted. It looks like it uses the width as the height and vice versa.</p>

<p>I have based my code on the Google sample implementation of the camera2 which can be found <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">here</a>.
the interesting thing is that even the Google sample implementation has this distorted preview sometimes. I have tried to modify the AutoFitTextureView but nothing was successful. I am currently using the AutoFitTextureView.java Google provides again.</p>

<p>A similar post to this one <a href=""https://stackoverflow.com/questions/30049293/camera-preview-stretched-on-few-android-devices"">can be found here</a>.
However the proposed fixes didn't solve the problem.</p>

<p>I can reproduce the problem by changing the following in the setUpCameraOutputs method:</p>

<pre><code>mTextureView.setAspectRatio(mPreviewSize.getHeight(), mPreviewSize.getWidth());
</code></pre>

<p>to:</p>

<pre><code>mTextureView.setAspectRatio(mPreviewSize.getWidth(), mPreviewSize.getHeight());
</code></pre>

<p>Another weird thing is that whenever the distorted preview occurs and you just press the home button so the app goes in onPause() and open up the app again so onResume() gets called, the preview is perfect every time.</p>

<p>Has anyone here experienced this problem and found a fix for it?</p>

<p>Thanks in advance</p>
",7726613,,-1,,2017-05-23 12:17:35,2018-01-07 15:33:32,Android Camera2 API preview sometimes distorted,<android><preview><android-camera2><distortion><camera2>,2,2,1,,
Android,52480833,1,,,2018,,1,240,"<p>I am trying to implement app bundle for my project. On starting the dynamic module activity, it is downloading the module and trying to install the module, but is not able to completely install it. It gets stuck as in the image given below. 
<a href=""https://i.stack.imgur.com/kHc8k.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/kHc8k.jpg"" alt=""enter image description here""></a></p>

<p>Following the below link for reference. 
<a href=""https://github.com/googlesamples/android-dynamic-features"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-dynamic-features</a></p>

<pre><code>import android.content.Intent
import android.os.Bundle
import android.support.v7.app.AppCompatActivity
import android.util.Log
import android.view.View
import android.widget.ProgressBar
import android.widget.TextView
import com.google.android.play.core.splitinstall.*
import com.google.android.play.core.splitinstall.model.SplitInstallSessionStatus
import com.lenskart.app.R

private const val modulePackageName = ""com.test.feature""

private const val htoClassname = ""$modulePackageName.hto.HtoActivity""

private const val atHomeClassname = ""$modulePackageName.athome.AtHomeActivity""

class BundleActivity : AppCompatActivity() {

    private val listener = SplitInstallStateUpdatedListener { state -&gt;
        val multiInstall = state.moduleNames().size &gt; 1
        state.moduleNames().forEach { name -&gt;
            when (state.status()) {
                SplitInstallSessionStatus.DOWNLOADING -&gt; {
                    displayLoadingState(state, ""Downloading $name"")
                }
                SplitInstallSessionStatus.REQUIRES_USER_CONFIRMATION -&gt; {
                    startIntentSender(state.resolutionIntent().intentSender, null, 0, 0, 0)
                }
                SplitInstallSessionStatus.INSTALLED -&gt; {
                    displayLoadingState(state, ""Installed $name"")
                    onSuccessfulLoad(name, launch = !multiInstall)
                }

                SplitInstallSessionStatus.INSTALLING -&gt; displayLoadingState(state, ""Installing $name"")
                SplitInstallSessionStatus.FAILED -&gt; {
                    Log.e(TAG, ""Error: ${state.errorCode()} for module ${state.moduleNames()}"")
                }

                SplitInstallSessionStatus.CANCELED -&gt; displayLoadingState(state, ""Cancelled $name"")
                SplitInstallSessionStatus.UNKNOWN -&gt; displayLoadingState(state, ""Unknown thingy $name"")
                SplitInstallSessionStatus.PENDING -&gt; displayLoadingState(state, ""Pending $name"")

            }
        }
    }

    private val moduleHto by lazy { ""hto"" }
    private val moduleAtHome by lazy { ""athome"" }

    private lateinit var manager: SplitInstallManager

    private lateinit var progressBar: ProgressBar
    private lateinit var progressText: TextView

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_bundle)
        manager = SplitInstallManagerFactory.create(this)
        initializeViews()
        loadAndLaunchModule(moduleAtHome)
    }

    override fun onResume() {
        manager.registerListener(listener)
        super.onResume()
    }

    override fun onPause() {
        manager.unregisterListener(listener)
        super.onPause()
    }

    private fun loadAndLaunchModule(name: String) {
        updateProgressMessage(""Loading module $name"")
        if (manager.installedModules.contains(name)) {
            updateProgressMessage(""Already installed"")
            onSuccessfulLoad(name, launch = true)
            return
        }
        val request = SplitInstallRequest.newBuilder()
                .addModule(name)
                .build()

        manager.startInstall(request)

        updateProgressMessage(""Starting install for $name"")
    }

    private fun onSuccessfulLoad(moduleName: String, launch: Boolean) {
        if (true) {
            when (moduleName) {
                moduleHto -&gt; launchActivity(htoClassname)
                moduleAtHome -&gt; launchActivity(atHomeClassname)
            }
        }

        displayButtons()
    }

    private fun launchActivity(className: String) {
        Intent().setClassName(packageName, className)
                .also {
                    startActivity(it)
                }
    }

    private fun displayLoadingState(state: SplitInstallSessionState, message: String) {
        displayProgress()

        progressBar.max = state.totalBytesToDownload().toInt()
        progressBar.progress = state.bytesDownloaded().toInt()

        updateProgressMessage(message)
    }

    private fun initializeViews() {
        progressBar = findViewById(R.id.progress_bar)
        progressText = findViewById(R.id.progress_text)
    }

    private fun updateProgressMessage(message: String) {
        if (progressText.visibility != View.VISIBLE &amp;&amp;
                progressBar.visibility != View.VISIBLE) displayProgress()
        progressText.text = message
    }

    private fun displayProgress() {
        progressText.visibility = View.VISIBLE
        progressBar.visibility = View.VISIBLE
    }

    private fun displayButtons() {
        progressText.visibility = View.GONE
        progressBar.visibility = View.GONE
    }

}

private const val TAG = ""DynamicFeatures""
</code></pre>
",2053458,,,,,2018-11-09 7:18:56,"Dynamic Feature activity not loading, stuck at installation",<android><generics><app-bundle><android-app-bundle>,2,1,1,,
Android,52873328,1,52943251,,2018,,1,195,"<p>I'm currently working on instant apps for Android and I want to use the Camera. 
I'm requesting the camera permission in a Fragment, but the Permission request dialog doesn't appear. </p>

<p>This is how I request the permission in the Fragment:</p>

<pre><code>requestPermissions(new String[]{
                    Manifest.permission.CAMERA}, 1);
</code></pre>

<p>Now I expect, that the Permission request dialog is displayed, as it is for the Application itself (com.android.application). Unfortunately it doesn't appear for the instant app (com.android.instantapp).</p>

<p>Additionally I figured out that the </p>

<pre><code>@Override
public void onRequestPermissionsResult(final int requestCode, @NonNull final String permissions[], @NonNull int[] grantResults)
{...}
</code></pre>

<p>is called but with <code>grantResults[0] = -1</code>, which means <code>PackageManager.PERMISSION_DENIED</code>.</p>

<p>As per the <a href=""https://developer.android.com/topic/instant-apps/faqs.html"" rel=""nofollow noreferrer"">Instant Apps FAQ</a> it should be the same as for the application:</p>

<blockquote>
  <p><strong>How do permissions work in Google Play Instant?</strong></p>
  
  <p>Google Play Instant uses the <a href=""https://developer.android.com/training/permissions/requesting.html"" rel=""nofollow noreferrer"">runtime permissions</a> model that was introduced in Android 6.0 (API level 23).</p>
</blockquote>

<p>The same problem occurs, if I add a permission request for the Instant App Demo project from Google (<a href=""https://github.com/googlesamples/android-topeka"" rel=""nofollow noreferrer"">android-topeka</a>).</p>
",4291264,,4291264,,2018-10-19 11:26:11,2018-10-23 7:18:44,Android instant app permission request dialog not shown,<android><android-permissions><android-instant-apps>,2,5,1,,
Android,45104944,1,,,2017,,1,885,"<p>I am interested in how to run Espresso tests from command line (gradle task) individually (<em>run group/suite tests then close app and then run another group/suite of tests</em>).</p>

<p>Found that it is feasible to implement <a href=""https://developer.android.com/training/testing/unit-testing/instrumented-unit-tests.html#test-suites"" rel=""nofollow noreferrer"">JUnit Test Suites</a> but do not really understand how does it looks like under the hood in a context of instrumentation tests. Does it starts separate processes per Test suite? There is <a href=""https://github.com/googlesamples/android-testing/tree/master/runner/AndroidJunitRunnerSample"" rel=""nofollow noreferrer"">sample application on Github</a> but how to execute it from terminal?</p>

<p>Another interesting discovery is <a href=""https://developer.android.com/training/testing/junit-runner.html#sharding-tests"" rel=""nofollow noreferrer"">Sharding tests</a>. However, it one sentence documentation.</p>

<p>May be somebody can share with any experience of running Espresso tests individually.</p>
",1474153,,1474153,,2017-07-14 17:04:31,2017-07-18 3:17:38,Android Espresso Test Suites,<android><unit-testing><android-emulator><android-espresso><android-junit>,2,0,1,,
Android,40331561,1,,,2016,,1,1890,"<p>I am trying to capture video in a custom view. I can display video in correct orientation via Camera.setDisplayOrientation(rotation), but recorded video is still in landscape mode. I cannot capture video correctly in portrait mode.</p>

<p>I tested <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Video</a>  and it has the same problem too.</p>

<p>I am calling <code>setCameraOrientation()</code> method after <code>Camera.open(currentCameraId)</code> after checking for permissions.</p>

<pre><code>private void setCameraOrientation()
{
    int rotation = getRotation();
    mCamera.setDisplayOrientation(rotation);

    Camera.Parameters parameters = mCamera.getParameters();
    parameters.setRotation(rotation);
    mCamera.setParameters(parameters);
}

private int getRotation()
{
    Display display = getWindowManager().getDefaultDisplay();
    int rotation = 0;
    switch (display.getRotation())
    {
        case Surface.ROTATION_0:
            rotation = 90;
            break;
        case Surface.ROTATION_90:
            rotation = 0;
            break;
        case Surface.ROTATION_180:
            rotation = 270;
            break;
        case Surface.ROTATION_270:
            rotation = 180;
            break;
    }
    return rotation;
}
</code></pre>

<p>This lets me display video in correct orientation. But when after I stop <code>MediaRecorder</code> and check for saved file, I see 90 degrees rotated video with bad aspect ratio. I checked this via pulling to my computer and in another fragment which has VideoView element. My  prepareRecorder method is: </p>

<pre><code>private boolean prepareRecorder()
{
    mCamera.lock();
    mCamera.unlock();
    recorder = new MediaRecorder();

    recorder.setCamera(mCamera);

    recorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

    CamcorderProfile profile = CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH);
    if (!mIsMute)
    {
        recorder.setAudioSource(MediaRecorder.AudioSource.DEFAULT);
        recorder.setProfile(profile);
    }
    else
    {
        recorder.setOutputFormat(profile.fileFormat);
        recorder.setVideoSize(profile.videoFrameWidth, profile.videoFrameHeight);
        recorder.setVideoFrameRate(profile.videoFrameRate);
        recorder.setVideoEncoder(profile.videoCodec);
        recorder.setVideoEncodingBitRate(profile.videoBitRate);
    }

    recorder.setMaxDuration(maxVideoDuration - videoProgress);

    String fileName = StorageUtil.sharedUtil().getExternalStorageDir() + File.separator + String.format(
            fileNameFormat, videoCount);
    recorder.setOutputFile(fileName);

    recorder.setPreviewDisplay(surfaceHolder.getSurface());

    try
    {
        recorder.prepare();
    }
    catch (Exception e)
    {
        e.printStackTrace();
        return false;
    }

    return true;
}
</code></pre>

<p>and then I just call <code>recorder.start();</code></p>

<p>By the way I tried <code>recorder.setOrientationHint(90);</code> just before <code>recoreder.prepare();</code> but it does not do anything. I can display correct orientation but cannot save.</p>
",7027099,,,,,2017-01-21 17:49:29,"Android, How to rotate recorded video using MediaRecorder in portrait mode",<android><video><orientation><mediarecorder><portrait>,2,0,1,,
Android,48972343,1,,,2018,,1,1654,"<p>I am looking for recommendation in handling below use case w.r.t. LiveData handling:
ViewModel invokes Repository for LiveData (e.g. products catalog). Repository checks from LocalDataSource(Room) first but if data not available, invokes RemoteDataSource(REST API). </p>

<p>Questions:</p>

<p>1) As per below comment from yigit <a href=""https://github.com/googlesamples/android-architecture-components/issues/44"" rel=""nofollow noreferrer"">here</a>, Repository can't get LiveData availability status in Room until it subscribes as observer. So even when data is avaiable, I get null in response. 
<em>""LiveData is to watch the data and distribute it to the observers. It won't calculate the value until an active observer is added.""</em></p>

<p>Since Repository hides data sources to clients, it is repository's responsibility to check in Room and then pull from Remote Source. How can it check for data availability in Room ?</p>

<p>2) Since data returned by RemoteDataSource is not LiveData type, what should be done so that repository eventually returns LiveData to ViewModel ?</p>

<p>Should Repository first insert data (from RemoteDataSource) into Room first and then query Room so it returns LiveData ? It looks quite expensive operation as there Room is queried twice in the process. Please advise . Thanks !</p>
",1992013,,1000551,,2018-03-19 11:21:28,2018-12-23 13:40:27,Repository to return LiveData when Room doesn't have it and instead fetches from REST API,<android><android-room><android-architecture-components><android-livedata><android-viewmodel>,2,0,1,,
Android,41032145,1,41032503,,2016,,1,1240,"<p>{Novice Android Dev.}</p>

<p>I'm currently using Google's Open Source Media App found on <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""nofollow noreferrer"">Github</a> to try and create my own media player for one of my own projects. However, one issue that I keep running into is that when I change the JSON file in RemoteJSON from </p>

<pre><code>protected static final String CATALOG_URL =
    ""http://storage.googleapis.com/automotive-media/music.json"";
</code></pre>

<p>to</p>

<pre><code>protected static final String CATALOG_URL =
    ""https://api.myjson.com/bins/2ir4d"";
</code></pre>

<p>(using myjson.com to store the file)</p>

<p>it populates the information within the app but when one item is selected, it produces a MediaPlayer error 1 (-2147483648). (All I did was copy the JSON code from original Google URL and uploaded it to myjson)</p>

<p>My goal is to create my own JSON file with my own media content but I can't even get this one to work outside of the provided URL.</p>

<p>Any ideas?
Much obliged</p>
",2518783,,,,,2016-12-08 14:51:51,JSON with Android Universal Media Player Application (MediaPlayer Error 1),<android><json>,2,0,1,,
Android,50747713,1,,,2018,,1,231,"<p>So, I was looking into the new <a href=""https://developer.android.com/topic/libraries/architecture/paging"" rel=""nofollow noreferrer"">paging library</a> by android. It has different components that you need to implement to have it work. Let's say I want to hit an API with retrofit and endlessly scroll with pagination updates. What is the best way to pass by the Header or Field maps to Retrofit considering all the stuff that you need to implement( ViewModel, repository, data source etc)? 
<a href=""https://github.com/googlesamples/android-architecture-components/tree/master/PagingWithNetworkSample"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components/tree/master/PagingWithNetworkSample</a></p>
",1778343,,,,,2018-08-09 5:50:28,How to pass by Retrofit Header and Field Maps with Paging Library,<android><paging><android-architecture-components><androidx>,2,0,1,,
Android,39454127,1,42908291,,2016,,1,1502,"<p>Our app contains a <code>MediaBrowserService</code> and uses a whitelist to restrict who can can query the service. It is typically used to permit Android Auto and Android Wear to query our app for audio content.  As far as I know, this is still a recommended approach.  For example, as shown in this Google sample app: <a href=""https://github.com/googlesamples/android-MediaBrowserService/blob/master/Application/src/main/res/xml/allowed_media_browser_callers.xml"" rel=""nofollow"">MediaBrowserService sample app</a></p>

<p>Our app reports the package names that try to query our <code>MediaBrowserService</code> but are NOT on the whitelist.   We fairly regularly receive reports that ""com.android.bluetooth"" tried to call our service and was denied.</p>

<p>I'm perplexed by these reports. We've never seen such calls from this package on our own test devices. My previous attempts to ask the user if they have a Bluetooth device that might be displaying audio information has been met with confusion...so it seems perhaps Android itself is making these calls?  </p>

<p>Has anyone else encountered this? This whitelist approach requires validating specific signing certificates.  Does com.android.bluetooth have a consistent signing certificate that can be used to add this package to the whitelist?</p>

<p><strong>UPDATE 1:</strong></p>

<p>Looking at the reports we have received from users, this appears to be exclusively a Samsung Android 6.0.1 phenomenon. The first report of it showed up on 3/13/2016 and there has been a steady trickle all summer. </p>

<p>Here's a partial list of the models that have reported this issue. All of them have had Android 6.0.1.  Could this be related to their Tizen-based Galaxy Gear watches?</p>

<ul>
<li>Galaxy Note 4 (SM-N910R4)  </li>
<li>Galaxy Note 4 (SAMSUNG-SM-N910A)  </li>
<li>Galaxy Note 5 (SM-N920V)</li>
<li>Galaxy S5 (SM-G900V)  </li>
<li>Galaxy S5 Active (SAMSUNG-SM-G870A)  </li>
<li>Galaxy S6 (SM-G920R7)  </li>
<li>Galaxy S6 (SAMSUNG-SM-G890A)</li>
<li>Galaxy S7 Edge (SM-G935V)</li>
<li>Galaxy S7 Edge (SAMSUNG-SM-G935A)</li>
<li>Galaxy J7    (SM-J700T1)</li>
</ul>

<p><strong>UPDATE 2:</strong></p>

<p>I have finally reproduced the situation on a Galaxy S6 Edge with 6.0.1.  Bluetooth on the device simply has to be turned on.  If turned on, with nothing even paired or connected, when I start playing audio in our app ""com.android.bluetooth"" (UID 1002) calls <code>onGetRoot</code> and <code>onLoadChildren</code> on our <code>MediaBrowserService</code>.  WHY!?  If I allow it, nothing visible changes on the device.  I thought I might see some Samsung widget presenting the media info from our app...but I don't.</p>
",262119,,262119,,2016-09-13 19:51:01,2017-03-20 16:03:34,"Why is package ""com.android.bluetooth"" querying our MediaBrowserService on Samsung devices?",<android><wear-os><samsung-mobile><android-auto>,2,3,1,,
Android,42623014,1,,,2017,,1,737,"<p>I upgraded Android Studio 2.2 -> 2.3 today and now have a compiler error when building my app in Android Studio that I didn't have before.</p>

<pre><code>Error:No resource found that matches the given name (at 'versionName' with value '@string/BRAND_VERSION').
</code></pre>

<p>This is the string resource.</p>

<pre><code>&lt;string name=""BRAND_VERSION""&gt;2.0&lt;/string&gt;
</code></pre>

<p>This is the relevant section from the manifest.</p>

<pre><code>&lt;manifest package=""com.metaswitch.cp.unbrandedpackage""
      xmlns:android=""http://schemas.android.com/apk/res/android""
      xmlns:tools=""http://schemas.android.com/tools""
      android:versionCode=""5""
      android:versionName=""@string/BRAND_VERSION""&gt;
</code></pre>

<p>According to <a href=""https://developer.android.com/studio/publish/versioning.html"" rel=""nofollow noreferrer"">Android documentation</a>, string resources are allowed in the versionName in the manifest or in build.gradle.</p>

<p>This is not specific to my app.  I can repro with this <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-loaders/"" rel=""nofollow noreferrer"">Android sample</a></p>

<p>It builds and installs fine for me.  When I make this single line change to the versionName in build.gradle (picking a random string resource from strings.xml) it fails with the same error.</p>

<pre><code>// versionName ""1.0""
versionName ""@string/add_task""
</code></pre>

<p>This is the build.gradle from the Android sample (note my edit to versionName).</p>

<pre><code>apply plugin: 'com.android.application'

android {
    compileSdkVersion rootProject.ext.compileSdkVersion
    buildToolsVersion rootProject.ext.buildToolsVersion

    defaultConfig {
        applicationId ""com.example.android.architecture.blueprints.todomvploaders""
    minSdkVersion rootProject.ext.minSdkVersion
    targetSdkVersion rootProject.ext.targetSdkVersion
    versionCode 1
    // I really want to use a string resource here!
    // versionName ""1.0""
    versionName ""@string/add_task""

    testInstrumentationRunner 'android.support.test.runner.AndroidJUnitRunner'
}

buildTypes {
    debug {
        minifyEnabled true
        // Uses new built-in shrinker http://tools.android.com/tech-docs/new-build-system/built-in-shrinker
        useProguard false
        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        testProguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguardTest-rules.pro'
    }

    release {
        minifyEnabled true
        useProguard true
        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        testProguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguardTest-rules.pro'
    }
}

// If you need to add more flavors, consider using flavor dimensions.
productFlavors {
    mock {
        applicationIdSuffix = "".mock""
    }
    prod {

    }
}

// Remove mockRelease as it's not needed.
android.variantFilter { variant -&gt;
    if(variant.buildType.name.equals('release')
            &amp;&amp; variant.getFlavors().get(0).name.equals('mock')) {
        variant.setIgnore(true);
    }
}

// Always show the result of every unit test, even if it passes.
testOptions.unitTests.all {
    testLogging {
        events 'passed', 'skipped', 'failed', 'standardOut', 'standardError'
    }
}
buildToolsVersion '25.0.0'
</code></pre>

<p>}</p>

<pre><code>/*
 Dependency versions are defined in the top level build.gradle file. This helps keeping track of
 all versions in a single place. This improves readability and helps managing project complexity.
 */
dependencies {
    // App's dependencies, including test
    compile ""com.android.support:appcompat-v7:$rootProject.supportLibraryVersion""
    compile ""com.android.support:cardview-v7:$rootProject.supportLibraryVersion""
    compile ""com.android.support:design:$rootProject.supportLibraryVersion""
    compile ""com.android.support:recyclerview-v7:$rootProject.supportLibraryVersion""
    compile ""com.android.support:support-v4:$rootProject.supportLibraryVersion""
    compile ""com.android.support.test.espresso:espresso-idling-resource:$rootProject.espressoVersion""
    compile ""com.google.guava:guava:$rootProject.guavaVersion""
// Dependencies for local unit tests
testCompile ""junit:junit:$rootProject.ext.junitVersion""
testCompile ""org.mockito:mockito-all:$rootProject.ext.mockitoVersion""
testCompile ""org.hamcrest:hamcrest-all:$rootProject.ext.hamcrestVersion""

// Android Testing Support Library's runner and rules
androidTestCompile ""com.android.support.test:runner:$rootProject.ext.runnerVersion""
androidTestCompile ""com.android.support.test:rules:$rootProject.ext.runnerVersion""

// Dependencies for Android unit tests
androidTestCompile ""junit:junit:$rootProject.ext.junitVersion""
androidTestCompile ""org.mockito:mockito-core:$rootProject.ext.mockitoVersion""
androidTestCompile 'com.google.dexmaker:dexmaker:1.2'
androidTestCompile 'com.google.dexmaker:dexmaker-mockito:1.2'

// Espresso UI Testing
androidTestCompile ""com.android.support.test.espresso:espresso-core:$rootProject.espressoVersion""
androidTestCompile ""com.android.support.test.espresso:espresso-contrib:$rootProject.espressoVersion""
androidTestCompile ""com.android.support.test.espresso:espresso-intents:$rootProject.espressoVersion""

// Resolve conflicts between main and test APK:
androidTestCompile ""com.android.support:support-annotations:$rootProject.supportLibraryVersion""
androidTestCompile ""com.android.support:support-v4:$rootProject.supportLibraryVersion""
androidTestCompile ""com.android.support:recyclerview-v7:$rootProject.supportLibraryVersion""
androidTestCompile ""com.android.support:appcompat-v7:$rootProject.supportLibraryVersion""
androidTestCompile ""com.android.support:design:$rootProject.supportLibraryVersion""
</code></pre>

<p>}</p>
",98618,,98618,,2017-03-06 10:37:21,2017-12-16 4:09:16,Android Studio 2.3: can't use string resource in android:versionName,<android>,2,8,1,,
Android,44753069,1,44753178,,2017,,1,1518,"<p>I have read <a href=""https://developer.android.com/topic/libraries/architecture/room.html#db-migration"" rel=""nofollow noreferrer"">Room Persistence Library</a>. I also clone <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample"" rel=""nofollow noreferrer"">android-architecture-components</a> then I try to add Mirgration test. However, I cannot import </p>

<pre><code>import android.arch.persistence.room.testing.MigrationTestHelper;
</code></pre>

<p>I also use latest lib version which is.</p>

<pre><code>android.arch.core:core-testing:1.0.0-alpha3
</code></pre>

<p>Here is the code for MigrationTest</p>

<pre><code>import android.arch.persistence.db.SupportSQLiteDatabase;
import android.arch.persistence.db.framework.FrameworkSQLiteOpenHelperFactory;
import android.support.test.InstrumentationRegistry;
import android.support.test.runner.AndroidJUnit4;

import org.junit.Rule;
import org.junit.Test;
import org.junit.runner.RunWith;

import java.io.IOException;
import android.arch.persistence.room.testing.MigrationTestHelper;

@RunWith(AndroidJUnit4.class)
public class MigrationTest {
    private static final String TEST_DB = ""migration-test"";

    @Rule
    public MigrationTestHelper helper;

    public MigrationTest() {
        helper = new MigrationTestHelper(InstrumentationRegistry.getInstrumentation(),
                MigrationDb.class.getCanonicalName(),
                new FrameworkSQLiteOpenHelperFactory());
    }

    @Test
    public void migrate1To2() throws IOException {
        SupportSQLiteDatabase db = helper.createDatabase(TEST_DB, 1);

        // db has schema version 1. insert some data using SQL queries.
        // You cannot use DAO classes because they expect the latest schema.
        //db.execSQL(...);

        // Prepare for the next version.
        db.close();

        // Re-open the database with version 2 and provide
        // MIGRATION_1_2 as the migration process.
        db = helper.runMigrationsAndValidate(TEST_DB, 2, true, MIGRATION_1_2);

        // MigrationTestHelper automatically verifies the schema changes,
        // but you need to validate that the data was migrated properly.
    }
}
</code></pre>
",1025935,,,,,2017-06-28 10:51:12,Cannot import android.arch.persistence.room.testing.MigrationTestHelper,<android><database-migration><android-room><android-architecture-components>,2,0,1,,
Android,34387574,1,34859599,,2015,,1,2116,"<p>I am trying to get Instant Run to work in Android Studio.  I have A.S. 2.0 Preview 4 installed, and my Instant Run is enabled like this:
<a href=""https://i.stack.imgur.com/rXg32.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/rXg32.png"" alt=""enter image description here""></a></p>

<p>Now, I am experimenting with this in the Topeka sample app from Google (<a href=""https://github.com/googlesamples/android-topeka"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-topeka</a>).  So, I am placing a bunch of Toasts in CategorySelectionActivity and CategorySelectionFragment, hoping that they can be instantaneously changed with Instant Run.  But every time I hit the Instant Run button in A.S., it completely shuts down the app and re-installs it.  It does not resume from the same activity I was on previously (as expected), NOR is it displaying the toast message like </p>

<blockquote>
  <p>Applied code changes without Activity restart</p>
</blockquote>

<p>Does anyone know how to get Instant Run to work properly?</p>

<p>Thanks,
Igor</p>
",6998684,,,,,2016-01-29 17:44:54,Android Studio Instant Run not working,<android-studio><instant-run>,2,0,1,,
Android,31120662,1,31120777,,2015,,1,4428,"<p>Is it possible to run <a href=""https://github.com/googlesamples/android-RuntimePermissionsBasic"" rel=""nofollow"">Google Sample - RuntimePermissionsBasic</a> </p>

<p>On devices with OS less than MNC (Android M)?</p>

<p>This project comes with:</p>

<pre><code>compileSdkVersion ""android-MNC""
targetSdkVersion ""MNC""
</code></pre>

<p>So far so good, running it on less than M OS will get:</p>

<p><code>INSTALL_FAILED_OLDER_SDK</code></p>

<p>But when I changed it to:</p>

<pre><code>compileSdkVersion 22
targetSdkVersion ""MNC""
</code></pre>

<p>The Android Studio isn't recognizing the <code>checkSelfPermission (...)</code> method </p>
",1038702,,,,,2015-10-23 11:06:26,Android Studio isn't recognizing the checkSelfPermission,<android><permissions><android-6.0-marshmallow>,2,0,1,,
Android,54728368,1,54967397,,2019,,1,110,"<p><strong>Context:</strong></p>

<p>I have been using Google's <a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationUpdatesForegroundService"" rel=""nofollow noreferrer"">LocationUpdatesForegroundService</a> example project to learn a bit more about services.</p>

<p>I have downloaded the project via Github desktop and ran it on my phone, everything is great and the project does what it's intended to do.</p>

<p><em>My phone is Android 8.0.0, API 26</em></p>

<p><strong>Problem:</strong></p>

<p>The foreground service notification shows up on the status bar once the app is terminated, as soon as that happens I hear a notification sound(default sound).
However, I would like the notification to be silent, like in some location-based apps(eg: <a href=""https://play.google.com/store/apps/details?id=com.life360.android.safetymapd&amp;hl"" rel=""nofollow noreferrer"">Life360</a>)</p>

<p><strong>What I've tried so far:</strong></p>

<ul>
<li>in <a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationUpdatesForegroundService/app/src/main/java/com/google/android/gms/location/sample/locationupdatesforegroundservice/LocationUpdatesService.java"" rel=""nofollow noreferrer"">LocationUpdatesService.java</a> at added<code>159</code> tried <code>mChannel.setSound(null,null);</code></li>
<li>in <a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationUpdatesForegroundService/app/src/main/java/com/google/android/gms/location/sample/locationupdatesforegroundservice/LocationUpdatesService.java"" rel=""nofollow noreferrer"">LocationUpdatesService.java</a> at line <code>296</code> changed <code>.setPriority(Notification.PRIORITY_HIGH)</code> to 
<code>.setPriority(Notification.PRIORITY_LOW)</code></li>
<li>in <a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationUpdatesForegroundService/app/src/main/java/com/google/android/gms/location/sample/locationupdatesforegroundservice/LocationUpdatesService.java"" rel=""nofollow noreferrer"">LocationUpdatesService.java</a> at line <code>158</code>changed <code>NotificationManager.IMPORTANCE_DEFAULT</code> to <code>NotificationManager.IMPORTANCE_LOW)</code></li>
<li>in <a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationUpdatesForegroundService/app/src/main/java/com/google/android/gms/location/sample/locationupdatesforegroundservice/LocationUpdatesService.java"" rel=""nofollow noreferrer"">LocationUpdatesService.java</a> at  line <code>300</code> added <code>setSound(null)</code></li>
</ul>

<p>None of the above have worked for me, I would really appreciate if someone could shed some light on this situation.</p>
",4194655,,6296561,,2019-02-25 7:14:21,2019-03-03 9:29:22,Foreground Service with a Silent Notification,<java><android><notifications><foreground-service>,2,13,1,,
Android,51309576,1,52085011,,2018,,1,234,"<p><strong>EDIT:</strong> I've tested the below on two devices on Android API 22 and one on API 19, the one on API 19 does not have the issue. Any ideas what the difference could be between versions?</p>

<p>I am setting up espresso tests for my Android with an IdlingResource identical to the example <a href=""https://github.com/googlesamples/android-testing/tree/master/ui/espresso/IdlingResourceSample/app/src/main/java/com/example/android/testing/espresso/IdlingResourceSample"" rel=""nofollow noreferrer"">here</a>. </p>

<p>My Test setup:</p>

<pre><code>@Rule
public ActivityTestRule&lt;MainActivity&gt; mMainActivity =
        new ActivityTestRule(MainActivity.class);

private IdlingResource mIdlingResource;

@Before
public void registerIdlingResource() {
    mIdlingResource = mMainActivity.getActivity().getIdlingResource();
    IdlingRegistry.getInstance().register(mIdlingResource);
}
</code></pre>

<p>In my Activity each time I change the Idle state I call:</p>

<pre><code>if (mIdlingResource != null) {
    mIdlingResource.setIdleState(false);
} else {
    Log.d(""error "", ""idle resource is null"");
}
</code></pre>

<p>My issue comes when trying to change the idle state in my activity -- there seems to be a lag between when the activity is created and the IdlingResource is available.</p>

<p><strong>In the first test of the sequence, the IdlingResource is never available</strong> -- as such I cannot set the initialValue of the IdlingResource to false and then later switch back to true. That seems to be caused by the annotation lifecycle as described in <a href=""https://medium.com/mindorks/android-testing-part-1-espresso-basics-7219b86c862b"" rel=""nofollow noreferrer"">this article</a>:</p>

<p><a href=""https://i.stack.imgur.com/sF5x4.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/sF5x4.jpg"" alt=""enter image description here""></a></p>

<p>From what I can tell the Activity is created by the @Rule and then the IdlingResource is instantiated in the @Before. Since the Activity is already running the idle resource is null at each of the points where I attempt to change the state.</p>

<p>In subsequent tests only the first instance of setIdleState (which occurs in the onCreate) is skipped -- perhaps something to do with the Activity lifecycle with the @Rule? -- but the others operate as expected.</p>

<p>Is there a best practice to getting the @Rule and @Before to work in order before the first test?</p>
",3130972,,3130972,,2018-07-18 14:50:30,2018-08-29 19:42:14,Why is IdlingResource null in Espresso tests on Android API 22?,<java><android><junit><android-espresso>,2,0,1,,
Android,47158230,1,,,2017,,1,298,"<p>I have an app uploaded to Google Play that was working fine, but suddenly some users reported me a strange error. I have been investigating and it's due to an <a href=""https://github.com/googlesamples/android-vision/issues/269"" rel=""nofollow noreferrer"">internal error of the google vision inside gms library</a>. This is the code that causes the problem:</p>

<pre><code>TextRecognizer textRecognizer = new TextRecognizer.Builder(context)
                .build();
</code></pre>

<p>This error only occurs on some devices. So how can I handle this error at runtime preventing an app crash?. </p>

<p>Thanks a lot!</p>
",5107823,,5107823,,2017-11-07 13:23:28,2017-11-08 13:34:50,Prevent app crash due to Google native library error,<android><google-vision><crash>,2,2,,,
Android,48127910,1,48169325,,2018,,1,219,"<p>I'm trying to test the code written in callback function of one of Rxjava operator. Here is the original code that I want to test</p>

<pre><code>@Override
public Observable&lt;List&lt;User&gt;&gt; getUsers() {
    UserDataStore userDataStore = userDataStoreFactory.createCloudDataStore();
    return userDataStore.getUsers().map(userEntityDataMapper::transform);
}
</code></pre>

<p>In above code there is a ""map"" operator and its callback Function will transform the original object to another by calling <code>userEntityDataMapper.transform()</code> method. <strong>Here I want to test that userEntityDataMapper's transform method must be call.</strong> Here is the code which I tried to check if <code>userEntityDataMapper.transform()</code> method calls or not.</p>

<pre><code>@Test
public void testGetUsersHappyCase() {
    List&lt;UserEntity&gt; userEntityList = new ArrayList&lt;&gt;();
    userEntityList.add(new UserEntity());
    given(mockUserDataStore.getUsers()).willReturn(Observable.just(userEntityList));
    List&lt;User&gt; userList = new ArrayList&lt;&gt;();
    given(mockUserEntityDataMapper.transform(userEntityList)).willReturn(userList);
    given(mockUserDataStoreFactory.createCloudDataStore()).willReturn(mockUserDataStore);

    Observable observable = userDataRepository.getUsers();

    verify(mockUserDataStoreFactory).createCloudDataStore();
    verify(mockUserDataStore).getUsers();
    TestObserver&lt;List&lt;UserEntity&gt;&gt; testObserver = new TestObserver&lt;&gt;();
    TestScheduler testScheduler = new TestScheduler();
    observable.subscribeOn(testScheduler).observeOn(testScheduler).subscribeWith(testObserver);
    verify(mockUserEntityDataMapper).transform(any(List.class));
}
</code></pre>

<p>I checked many similar questions on stackoverflow and from forum but not able to find exact solution for my question.</p>

<p><strong>Update:</strong>
Here is the change which I did to fix the problem.</p>

<pre><code>@Test
public void testGetUsersHappyCase() {
    List&lt;UserEntity&gt; userEntityList = new ArrayList&lt;&gt;();
    userEntityList.add(new UserEntity());
    given(mockUserDataStore.getUsers()).willReturn(Observable.just(userEntityList));
    List&lt;User&gt; userList = new ArrayList&lt;&gt;();
    given(mockUserEntityDataMapper.transform(userEntityList)).willReturn(userList);

    userDataRepository.getUsers().test().assertNoErrors();

    verify(mockUserDataStoreFactory).createCloudDataStore();
    verify(mockUserDataStore).getUsers();

    verify(mockUserEntityDataMapper).transform(userEntityList);
}
</code></pre>

<p>Thanks @tynn for the hint of test() method. Also same thing I found in BasicRxJavaSample demo found on <a href=""https://github.com/googlesamples/android-architecture-components"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components</a>.</p>
",630668,,630668,,2018-01-13 6:29:03,2018-01-13 8:21:26,test rxjava callback function,<android><unit-testing><mockito><rx-java2>,2,2,,,
Android,32153945,1,32169591,,2015,,1,614,"<p>I get the android example <code>android-NetworkConnect</code>, and I can build it within <code>Android-Studio-1.3</code>.</p>

<p>Then I want to build it with <strong>gradle</strong> command line, however I got a failed result.</p>

<pre><code>/// get the example code
https://github.com/googlesamples/android-NetworkConnect

/// setting gradle
export GRADLE_HOME=/opt/gradle/gradle-2.2.1
export PATH=${PATH}:$GRADLE_HOME/bin

/// building failed
android-NetworkConnect-master $ gradle build

FAILURE: Build failed with an exception.

* What went wrong:
A problem occurred configuring project ':Application'.
&gt; Could not resolve all dependencies for configuration ':Application:classpath'.
   &gt; Could not resolve com.android.tools.build:gradle:1.2.3.
     Required by:
         android-NetworkConnect-master:Application:unspecified
      &gt; Could not GET 'https://jcenter.bintray.com/com/android/tools/build/gradle/1.2.3/gradle-1.2.3.pom'.
         &gt; jcenter.bintray.com

* Try:
Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.

BUILD FAILED

Total time: 3.771 secs

/// build.gradle
android-NetworkConnect-master $ cat build.gradle 
allprojects {
    repositories {
        jcenter()
    }
 }
</code></pre>
",1570557,,4601170,,2015-08-25 13:23:46,2015-08-25 13:23:46,I failed to use gradle command line to build the android example code,<android-studio><command-line><gradle>,2,3,,,
Android,43515031,1,,,2017,,1,152,"<p>I have followed the <a href=""https://github.com/googlesamples/android-BasicSyncAdapter"" rel=""nofollow noreferrer"">BasicSyncAdapter</a> example in the google samples and I wonder why a default periodic sync (sync interval 86400 secs or 24h) is even created if I <a href=""https://github.com/googlesamples/android-BasicSyncAdapter/blob/master/Application/src/main/java/com/example/android/basicsyncadapter/SyncUtils.java#L63"" rel=""nofollow noreferrer"">comment out the call to <code>addPeriodicSync()</code> function in the code</a>.</p>

<p>I find no documentation whatsoever that creating a SyncAdapter and the stub code (SyncService, Authenticator account etc.) also creates a periodic sync with that default sync interval. </p>

<p>My Question: Is it possible to create a SyncAdapter without such default periodic sync?</p>

<p>Thanks.</p>

<p>BTW, this is how I detect the presence of periodic syncs.</p>

<pre><code>java.util.List&lt;PeriodicSync&gt; periodicSyncsList = ContentResolver.getPeriodicSyncs(myaccount, CONTENT_AUTHORITY);
Log.d(TAG, ""Number of syncs in the periodicSyncsList = "" + periodicSyncsList.size());
for (PeriodicSync p : periodicSyncsList) {
    Log.d(TAG, p.toString());
}
</code></pre>
",782094,,782094,,2017-04-20 9:20:06,2018-10-05 8:20:14,Why does SyncAdapter create a default periodic sync even though I have not called addPeriodicSync()?,<java><android><android-syncadapter>,2,0,,,
Android,36204550,1,36206257,,2016,,1,3726,"<p>I am trying to understand how to use Api.camera2
and I am following google sample from this link 
<a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Basic</a></p>

<p>when I open the project it works but when I try it to rebuild the app to see  the effect of each part of the code I got the following error
cannotresolve method newinstance()
 it is the main java class</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>package com.example.jimy.camera_app_learn;




import android.app.Activity;
        import android.os.Bundle;

public class CameraActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_camera);
        if (null == savedInstanceState) {
            getFragmentManager().beginTransaction()
                    .replace(R.id.container,  Camera2BasicFragment.newInstance())
                    .commit();
        }
    }

}</code></pre>
</div>
</div>
</p>

<p>i tried exporting project setting from the original project but it did not work  </p>
",5939975,,,,,2016-07-14 14:02:43,cannot resolve method newinstance(),<android><android-fragments><fragment><android-fragmentactivity><android-camera2>,2,4,,,
Android,55038077,1,55121125,,2019,,1,141,"<p><a href=""https://i.stack.imgur.com/0JXoJ.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/0JXoJ.png"" alt=""Image inside overlay""></a></p>

<p>I need to capture only the image which is inside the overlay box as shown. I don't need the entire image in the TextureView. I'm new to Android and I couldn't figure out a few solutions that were mentioned to capture just the image inside the rectangular region.
The overlay must be at the center. I tried, but I couldn't achieve it. </p>

<p>I followed this code - <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">Google Sample-Camera2Basic</a></p>

<hr>

<p>To add overlay, I used the following code:</p>

<p><code>activity_camera2_basic_fragment.xml</code></p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;RelativeLayout xmlns:android=""http://schemas.android.com/apk/res/android""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""&gt;

    &lt;com.example.googlecamera2.AutoFitTextureView
        android:id=""@+id/texture""
        android:layout_width=""wrap_content""
        android:layout_height=""wrap_content""
        android:layout_alignParentStart=""true""
        android:layout_alignParentTop=""true"" /&gt;

    &lt;LinearLayout
        android:id=""@+id/surface""
        android:layout_width=""match_parent""
        android:layout_height=""match_parent""
        android:orientation=""vertical""
        android:layout_centerInParent=""true""/&gt;

    &lt;FrameLayout
        android:id=""@+id/control""
        android:layout_width=""match_parent""
        android:layout_height=""112dp""
        android:layout_alignParentBottom=""true""
        android:layout_alignParentStart=""true""
        android:background=""@color/control_background""&gt;

        &lt;Button
            android:id=""@+id/picture""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_gravity=""center""
            android:text=""@string/picture"" /&gt;

        &lt;ImageButton
            android:id=""@+id/info""
            android:contentDescription=""@string/description_info""
            style=""@android:style/Widget.Material.Light.Button.Borderless""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_gravity=""center_vertical|right""
            android:padding=""20dp""
            android:src=""@drawable/ic_action_info"" /&gt;

    &lt;/FrameLayout&gt;

&lt;/RelativeLayout&gt;
</code></pre>

<hr>

<p>I implemented the <code>onCreateView</code> like this:</p>

<pre><code>@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_camera2_basic, container, false);

        linearLayout = view.findViewById(R.id.surface);
        linearLayout.addView(new Rectangle(getActivity()));
        return view;
    }

</code></pre>

<h2>EDIT</h2>

<p>Rectangle.java</p>

<pre><code>package com.example.googlecamera2;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Rect;
import android.view.View;

public class Rectangle extends View {
    Paint paint = new Paint();

    public Rectangle(Context context) {
        super(context);
    }


    @Override
    public void onDraw(Canvas canvas) {
        paint.setColor(Color.GREEN);
        paint.setStyle(Paint.Style.STROKE);
        paint.setStrokeWidth(6);
        Rect rect = new Rect(120, 100, 620, 900);
        canvas.drawRect(rect, paint );
    }
}
</code></pre>

<p>Please suggest how I can get just the cropped image from the overlay region and center the overlay in the preview.</p>
",10391394,,10391394,,2019-03-07 9:40:50,2019-03-12 12:08:24,How to capture image inside the overlay in Camera2 API Android?,<android><overlay><crop><android-camera2>,2,7,,,
Android,28966466,1,28989409,,2015,,1,651,"<p>The code implemented in my application once worked, the data was inserted/displayed in Google Fit correctly, but now it doesn't work.</p>

<p>I have also tested the <code>BasicHistoryApi</code> but it doesn't work.(<a href=""https://github.com/googlesamples/android-fit"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-fit</a>)
Screenshot where this test app returns no error:
<img src=""https://i.stack.imgur.com/YS9D2.png"" alt=""enter image description here""></p>

<p>Please tell me if you use this method <code>Fitness.HistoryApi.insertData()</code> and it works correctly, because I can't find any solution to make it work.</p>

<p>This code snippet returns ""success"", but no changes in my Google Fit:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""false"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-html lang-html prettyprint-override""><code>		DataSet runningDataSet = DataSet.create(runningDataSource);
		runningDataSet.add(runningDataSet.createDataPoint().setTimeInterval(
				startTime, endTime, TimeUnit.MILLISECONDS));

		Session session = new Session.Builder().setName(""TEST "" + startTime)
				.setDescription(""Test description"")
				.setIdentifier(""TEST "" + "" - "" + startTime)
				.setActivity(FitnessActivities.RUNNING_JOGGING)
				.setStartTime(startTime, TimeUnit.MILLISECONDS)
				.setEndTime(endTime, TimeUnit.MILLISECONDS).build();

		SessionInsertRequest insertRequest = new SessionInsertRequest.Builder()
				.setSession(session).addDataSet(runningDataSet).build();

		Log.i(TAG, ""Inserting the session in the History API"");
		com.google.android.gms.common.api.Status insertStatus = Fitness.SessionsApi
				.insertSession(MainActivity.getFitnessClient(), insertRequest)
				.await(1, TimeUnit.MINUTES);

		if (!insertStatus.isSuccess()) {
			Log.i(TAG, ""There was a problem inserting the session: ""
					+ insertStatus.getStatusMessage());</code></pre>
</div>
</div>
</p>
",4427983,,4427983,,2015-03-11 8:21:07,2015-03-11 14:33:10,"Google Fit stopped working, ""Fitness.HistoryApi.insertData"" returns success but doesn't shows up in Google Fit application",<android><google-fit>,2,1,,,
Android,47528461,1,,,2017,,1,143,"<p>I'm working on location based app. I am using <code>LocationUpdatesForegroundService</code> sample code.
Which is a <code>Service</code> to get location details</p>

<p>At some case location are not getting.</p>

<p>like.</p>

<p><strong>GPS and Internet are on I'm getting location details</strong>.</p>

<p>but,</p>

<p><strong>GPS and Internet are in offline I'm not getting location details.</strong></p>

<p><strong>case :</strong>
Start app I am start to service getting location but <code>gps</code> off case to first prompt to please <code>gps</code> ON after I <code>gps</code> ON.</p>

<p>BUT not getting LOCATION <code>mFusedLocationClient.getLastLocation</code> method <code>task.getResult()</code> are <code>null</code>.</p>

<p>please resolve my issue.</p>

<p>Thanks</p>

<p><strong>NOTE:
This code working in MOTO E os version 4.4.4.
but not working in LAVA a97 os version 6.0</strong></p>

<p>I'm using this sample :-
<a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationUpdatesForegroundService"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-location/tree/master/LocationUpdatesForegroundService</a></p>
",3469444,,8525773,,2017-11-28 12:27:11,2017-11-29 1:34:33,Google play service sample not getting location offline,<android><gps><location><google-play-services><android-fusedlocation>,2,1,,,
Android,41393423,1,41435642,,2016,,1,896,"<h2>Configuration</h2>

<p><strong>Operating system</strong>: Ubuntu 16.04</p>

<p><strong>Android Studio Version</strong>: 2.2.3</p>

<h2>Key code</h2>

<p><code>~/project/build.gradle</code>:</p>

<pre><code>buildscript {
      repositories {
          jcenter()
      }
      dependencies {
          classpath 'com.android.tools.build:gradle:2.2.3'
      }
  }
  ...
</code></pre>

<p><code>~/project/library/build.gradle</code>:</p>

<pre><code>apply plugin: 'com.android.library'

android {
    ...

    defaultConfig {
        ...

        externalNativeBuild {
            cmake {
                arguments '-DANDROID_TOOLCHAIN=clang',
                        '-DANDROID_STL=gnustl_static'
                     // I also tried '-DANDROID_STL=gnustl_shared', result is same
            }
        }
    }

    externalNativeBuild {
        cmake {
            path ""src/main/cpp/CMakeLists.txt""
        }
    }

    ...
}
</code></pre>

<p><code>~/project/app/build.gradle</code>:</p>

<pre><code>apply plugin: 'com.android.application'

android {
    ...
}

dependencies {
    ...
    compile project(':library')
    ...
}
</code></pre>

<p><code>~/project/settings.gradle</code></p>

<pre><code>include ':app', ':library'
</code></pre>

<p><code>~/project/library/src/main/cpp/test.h</code>:</p>

<pre><code>#include &lt;vector&gt;   // vector is red, says ""cannot find vector""
#include &lt;stdint.h&gt;

class test {

private:
    std::vector&lt;int32_t&gt; array;  // std is red, says ""can't resolve container std""
};
</code></pre>

<h3>Description of problem</h3>

<p>In file <code>~/project/library/src/main/cpp/test.h</code>, <code>vector</code> in <code>#include &lt;vector&gt;</code> is red. 
Move mouse over it will popup a window which says <code>Cannot find 'vector'</code>.
<code>std</code> in <code>std::vector&lt;int32_t&gt;</code> is also red. Move mouse over it says <code>Can't resolve container 'std'</code>.</p>

<p>This project has no compile error. It can be compiled successfully and installed on my phone. Problem is it has syntax error. I don't have code completion on some variables, like <code>array</code> in <code>test.h</code>.</p>

<h3>Some information I find</h3>

<p>I imported project <a href=""https://github.com/googlesamples/android-ndk/tree/master/teapots"" rel=""nofollow noreferrer"">teapots</a> which contains <code>#include &lt;vector&gt;</code>.
Android studio did resolve <code>vector</code> and <code>std</code> symbol for this project.</p>

<h3>My question</h3>

<p>What I did wrong? Why project <a href=""https://github.com/googlesamples/android-ndk/tree/master/teapots"" rel=""nofollow noreferrer"">teapots</a> don't have this problem?
What's the key difference between my project and <code>teapots</code> that makes the latter one can resolve <code>vector</code> and <code>std</code> but mine not?</p>

<hr>

<h2>Update</h2>

<p>I created a new project in android studio. In step 1 of new project wizard, I checked <code>include C++ Support</code>. In last step, I kept default <code>Toolchain Default</code> for <code>C++ Standard</code> option. After I clicked <code>finish</code> button, android studio automatically created file <code>native-lib.cpp</code> for me. I added code <code>#include &lt;vector&gt;</code> in line 3 in this file. This time android studio resolved symbol <code>vector</code> correctly. Then I created a new module library <code>mylibrary</code> for this project, in there I added <code>cpp</code> folder and <code>test.h</code> and it also resolved symbol <code>vector</code>(<code>mylibrary</code> module's <code>build.gradle</code> had been correctly added cmake stuff by me). But my problem is I need add <code>vector</code> to my existed project, and my existed project can't resolve symbol <code>vector</code>.</p>
",7011251,,7011251,,2017-01-01 11:16:02,2017-01-03 2:33:55,Android Studio 2.2.3 cannot find <vector>,<android><android-ndk><cmake><ndk-build>,2,2,,,
Android,39407587,1,42025718,,2016,,1,2258,"<p>I want to debug native code in Android Studio (version 2.2) in following examples: <a href=""https://github.com/googlesamples/android-ndk/tree/master-ndkbuild"" rel=""nofollow"">https://github.com/googlesamples/android-ndk/tree/master-ndkbuild</a>.</p>

<p>I have tried to edit app Run/Debug configuration and change debugger type to native or hybrid without success. Also tried to attach debuger selecting hybrid or native, but app doesn't stop on breakpoint in C++ code, when debugger is connected to process.</p>

<p>I have bigger project which is built simillary to linked examples. Currently rebuilding makefiles is not possible, therefore I want to run debugging with this kind or project setup. This kind of project setup means; using externalNativeBuild with ndk-build.</p>

<p>Does anyone know how to debug these examples?</p>
",1512518,,1512518,,2016-09-15 12:42:00,2017-02-03 13:44:12,Android native debug compiled with externalNativeBuild.ndkBuild,<android><c++><debugging><android-ndk>,2,4,,,
Android,29744045,1,29750984,,2015,,1,1712,"<p>I'm using the Google Places API for Android and I can't seem to get a <code>resultCallback</code> from a <code>PendingResult</code> to fire. Here's my code (essentially identical to the sample code to <a href=""https://github.com/googlesamples/android-play-places/tree/master/PlaceComplete"" rel=""nofollow"">https://github.com/googlesamples/android-play-places/tree/master/PlaceComplete</a> except in a Dialog)</p>

<pre><code>adapter = ((MainActivity) getActivity()).getAdapter();
googleApiClient = ((MainActivity) getActivity()).getGoogleApiClient();

final AutoCompleteTextView tvCity = new AutoCompleteTextView(getActivity());
tvCity.setAdapter(adapter);

tvCity.setOnItemClickListener(new AdapterView.OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {
        final PlacesAutoCompleteAdapter.PlaceAutocomplete item = adapter.getItem(position);
        final String placeId = String.valueOf(item.placeId);

        PendingResult&lt;PlaceBuffer&gt; placeResult = Places.GeoDataApi
                .getPlaceById(googleApiClient, placeId);
        placeResult.setResultCallback(new ResultCallback&lt;PlaceBuffer&gt;() {
            @Override
            public void onResult(PlaceBuffer places) {

            if (places.getStatus().isSuccess()) {
                    final Place place = places.get(0);
                    cityCoordinates = place.getLatLng();

                } else {
                    dialog.dismiss();
                    Toast.makeText(getActivity(), ""There was an error, please try again"", Toast.LENGTH_SHORT).show();
                    return;

                }
                dialog.getButton(AlertDialog.BUTTON_POSITIVE).setEnabled(true);
                places.release();
            }
        });
    }
});
</code></pre>
",1596679,,,,,2015-04-22 20:42:42,Google Places API Android resultCallback not firing,<android><google-play-services><google-places-api>,2,2,,,
Android,52972693,1,53040454,,2018,,1,117,"<p>I'm currently working on Android instant apps by using the <a href=""https://github.com/googlesamples/android-topeka"" rel=""nofollow noreferrer"">android-topeka</a> example project.</p>

<p>Everything works as expected, after I'm using <a href=""http://androidannotations.org/"" rel=""nofollow noreferrer"">AndroidAnnotations</a> on my Activity:</p>

<pre><code>@EActivity(resName = ""activity_start"")
public class StartActivity extends AppCompatActivity {
...
}
</code></pre>

<p>If I want to start the <strong>application</strong>(<code>:installed</code>) one, everything works, but for the <strong>instant-app</strong>(<code>:instant</code>), I get the following error:</p>

<pre><code>:base:javaPreCompileDebugFeature UP-TO-DATE
error: The generated &lt;applicationId&gt;.R class cannot be found
1 error
:base:compileDebugFeatureJavaWithJavac FAILED
</code></pre>

<p><strong>Additional Info:</strong></p>

<blockquote>
  <p>If I remove the <code>application project(':installed')</code> in the base
  build.gradle I can start the <strong>instant-app</strong> but with the wrong
  <strong>application-id</strong> (configured in the <code>:installed</code> project).</p>
</blockquote>
",4291264,,,,,2018-10-29 7:32:35,AndroidAnnotations + Instant App - The generated <applicationId>.R class cannot be found,<android><android-annotations><android-instant-apps>,2,3,,,
Android,35056994,1,,,2016,,1,1265,"<p>I'm experimenting with the following Google sample: <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker"" rel=""nofollow"">https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker</a></p>

<p>The sample is using the Play Service new Face detection APIs, and draws a square on detected faces on the camera video stream.</p>

<p>I'm trying to figure out if it is possible to save the frames that has detected faces in them, from following the code it seems that the face detector's processor is a good place to perform the 'saving' but it only supplies the detection meta data and not the actual frame.</p>

<p>Your guidance will be appreciated.</p>
",1068397,,,,,2017-12-06 22:24:03,Get detected face bitmap,<android><android-camera>,2,1,,,
Android,30838231,1,30838770,,2015,,1,565,"<p>I am using Google Fit APIs for the first time. I have modified the <a href=""https://github.com/googlesamples/android-fit/tree/master/BasicSensorsApi"" rel=""nofollow"">BasicSensorsApi sample</a> code to calculate steps count. It is working fine, but the problem is when I call <code>GoogleApiClient.disconnect()</code> in <code>onStop()</code> function and then again call <code>GoogleApiClient.connect()</code> in <code>onStart()</code> function, <code>OnDataPointListener</code> stops getting callbacks. I am not unregistering this  listener any where.</p>

<p>When I don't call <code>GoogleApiClient.disconnect()</code> it is working fine and I get callbacks event after activity's <code>onStop()</code> function is called.</p>

<p>I am not sure whether I should disconnect <code>GoogleApiClient</code> in <code>onStop()</code> function or not. If yes then how can I solve above problem?</p>

<p>Here is the relavent code:</p>

<pre><code>private void buildFitnessClient() {
    // Create the Google API Client
    mClient = new GoogleApiClient.Builder(this)
            .addApi(Fitness.SENSORS_API)
            .addScope(new Scope(Scopes.FITNESS_LOCATION_READ))
            .addScope(new Scope((Scopes.FITNESS_ACTIVITY_READ)))
            .addScope(new Scope((Scopes.FITNESS_BODY_READ)))
            .addConnectionCallbacks(
                    new GoogleApiClient.ConnectionCallbacks() {

                        @Override
                        public void onConnected(Bundle bundle) {
                            Log.i(TAG, ""Connected!!!"");
                            // Now you can make calls to the Fitness APIs.
                            // Put application specific code here.
                            findFitnessDataSources();
                        }

                        @Override
                        public void onConnectionSuspended(int i) {
                            // If your connection to the sensor gets lost at some point,
                            // you'll be able to determine the reason and react to it here.
                            if (i == GoogleApiClient.ConnectionCallbacks.CAUSE_NETWORK_LOST) {
                                Log.i(TAG, ""Connection lost.  Cause: Network Lost."");
                            } else if (i == GoogleApiClient.ConnectionCallbacks.CAUSE_SERVICE_DISCONNECTED) {
                                Log.i(TAG, ""Connection lost.  Reason: Service Disconnected"");
                            }
                        }
                    }
            )
            .addOnConnectionFailedListener(
                    new GoogleApiClient.OnConnectionFailedListener() {
                        // Called whenever the API client fails to connect.
                        @Override
                        public void onConnectionFailed(ConnectionResult result) {
                            Log.i(TAG, ""Connection failed. Cause: "" + result.toString());
                            if (!result.hasResolution()) {
                                // Show the localized error dialog
                                GooglePlayServicesUtil.getErrorDialog(result.getErrorCode(), MainActivity.this, 0).show();
                                return;
                            }
                            // The failure has a resolution. Resolve it.
                            // Called typically when the app is not yet authorized, and an
                            // authorization dialog is displayed to the user.
                            if (!authInProgress) {
                                try {
                                    Log.i(TAG, ""Attempting to resolve failed connection"");
                                    authInProgress = true;
                                    result.startResolutionForResult(MainActivity.this, REQUEST_OAUTH);
                                } catch (IntentSender.SendIntentException e) {
                                    Log.e(TAG, ""Exception while starting resolution activity"", e);
                                }
                            }
                        }
                    }
            )
            .build();
}

@Override
protected void onStart() {
    super.onStart();
    // Connect to the Fitness API
    Log.i(TAG, ""Connecting..."");
    mClient.connect();
}

@Override
protected void onStop() {
    super.onStop();
    if (mClient.isConnected()) {
        //mClient.disconnect();
    }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == REQUEST_OAUTH) {
        authInProgress = false;
        if (resultCode == RESULT_OK) {
            // Make sure the app is not already connected or attempting to connect
            if (!mClient.isConnecting() &amp;&amp; !mClient.isConnected()) {
                mClient.connect();
            }
        }
    }
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putBoolean(AUTH_PENDING, authInProgress);
}

// [END auth_connection_flow_in_activity_lifecycle_methods]

/**
 * Find available data sources and attempt to register on a specific {@link DataType}.
 * If the application cares about a data type but doesn't care about the source of the data,
 * this can be skipped entirely, instead calling
 * {@link com.google.android.gms.fitness.SensorsApi
 * #register(GoogleApiClient, SensorRequest, DataSourceListener)},
 * where the {@link SensorRequest} contains the desired data type.
 */
private void findFitnessDataSources() {
    // [START find_data_sources]
    Fitness.SensorsApi.findDataSources(mClient, new DataSourcesRequest.Builder()
            // At least one datatype must be specified.
            .setDataTypes(DataType.TYPE_STEP_COUNT_CADENCE)
            .setDataTypes(DataType.TYPE_STEP_COUNT_CUMULATIVE)
            .setDataTypes(DataType.TYPE_STEP_COUNT_DELTA)
                    // Can specify whether data type is raw or derived.
            .setDataSourceTypes(DataSource.TYPE_DERIVED)
            .build())
            .setResultCallback(new ResultCallback&lt;DataSourcesResult&gt;() {
                @Override
                public void onResult(DataSourcesResult dataSourcesResult) {
                    Log.i(TAG, ""Result: "" + dataSourcesResult.getStatus().toString());
                    for (DataSource dataSource : dataSourcesResult.getDataSources()) {
                        Log.i(TAG, ""Data source found: "" + dataSource.toString());
                        Log.i(TAG, ""Data Source type: "" + dataSource.getDataType().getName());

                        //Let's register a listener to receive Activity data!
                        if (dataSource.getDataType().equals(DataType.TYPE_STEP_COUNT_CADENCE) &amp;&amp; mListener == null) {
                            Log.i(TAG, ""Data source for TYPE_STEP_COUNT_CADENCE found!  Registering."");
                            registerFitnessDataListener(dataSource, DataType.TYPE_STEP_COUNT_CADENCE);
                        } else if (dataSource.getDataType().equals(DataType.TYPE_STEP_COUNT_CUMULATIVE) &amp;&amp; mListener == null) {
                            Log.i(TAG, ""Data source for TYPE_STEP_COUNT_CUMULATIVE found!  Registering."");
                            registerFitnessDataListener(dataSource, DataType.TYPE_STEP_COUNT_CUMULATIVE);
                        } else if (dataSource.getDataType().equals(DataType.TYPE_STEP_COUNT_DELTA) &amp;&amp; mListener == null) {
                            Log.i(TAG, ""Data source for TYPE_STEP_COUNT_DELTA found!  Registering."");
                            registerFitnessDataListener(dataSource, DataType.TYPE_STEP_COUNT_DELTA);
                        }
                    }
                }
            });
    // [END find_data_sources]
}

/**
 * Register a listener with the Sensors API for the provided {@link DataSource} and
 * {@link DataType} combo.
 */
private void registerFitnessDataListener(DataSource dataSource, DataType dataType) {
    // [START register_data_listener]
    mListener = new OnDataPointListener() {
        @Override
        public void onDataPoint(DataPoint dataPoint) {
            for (Field field : dataPoint.getDataType().getFields()) {
                Value val = dataPoint.getValue(field);
                Log.i(TAG, ""Detected DataPoint field: "" + field.getName());
                Log.i(TAG, ""Detected DataPoint value: "" + val);
            }
        }
    };

    Fitness.SensorsApi.add(
            mClient,
            new SensorRequest.Builder()
                    .setDataSource(dataSource) // Optional but recommended for custom data sets.
                    .setDataType(dataType) // Can't be omitted.
                    .setSamplingRate(10, TimeUnit.SECONDS)
                    .build(),
            mListener)
            .setResultCallback(new ResultCallback&lt;Status&gt;() {
                @Override
                public void onResult(Status status) {
                    if (status.isSuccess()) {
                        Log.i(TAG, ""Listener registered!"");
                    } else {
                        Log.i(TAG, ""Listener not registered."");
                    }
                }
            });
    // [END register_data_listener]
}
</code></pre>
",4575744,,3024519,,2015-06-15 6:08:55,2015-11-22 19:08:45,OnDataPointListener does not get callback if GoogleApiClient is disconnected,<android><google-fit>,2,0,,,
Android,49762991,1,49778032,,2018,,1,327,"<p>I'm writing an Android application and although I already have read about MVP and saw some examples in Android, I'm in doubt about how should I structure this part of the app.</p>

<p>NOTE: My app follows a structure very similar to: <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture/tree/todo-mvp</a></p>

<p>In this app, the Model should fetch JSON data from a web service. This data, among other stuff, contains links of images that the app should download asynchronously. And, after downloading, these images should be presented to the user.</p>

<p>How should I approach this?</p>

<p>Right now, my idea is to add the web service request logic on the Model (I'm also using the Repository pattern) and the download logic on the Presenter. Something like this (the code is just an example): </p>

<pre><code>class MyPresenter {
    ....

    void init() {
        myRepositoryInstance.fetchDataAndSaveLocally(new MyCallback() {

            @Override
            public void success(List&lt;Thing&gt; listOfThings) {
                // do some other stuff with listOfThings data
                ...

                List&lt;URL&gt; imagesURL = getImagesURLs(listOfThings);

                // config/use Android DownloadManager to download the images
                ...

                registerReceiver(onImageDownloadComplete, new IntentFilter(DownloadManager.ACTION_DOWNLOAD_COMPLETE));
            }

            @Override
            public void error() {// logging stuff, try again...}
        });
    }

    void onImageDownloadComplete() {
        URL path = getWhereTheImageWasSaved();
        Thing thing = getInstanceOfThingAssociatedWithThisImage();
        myRepositoryInstance.updatePathOfThingImage(thing, path);
        viewInstance.updateTheViewPager(); // I'll probably show these images on a ViewPager
    }

    ....
}
</code></pre>

<p>Does this makes sense? Does the download logic belongs to the Presenter? Am I putting too much logic on the Presenter?</p>

<p>NOTE: I' thinking about putting the download logic in the Presenter because the DownloadManager needs a Context (btw, Glide needs too). Alternatively, I know that I can use an AsyncTask on the Model to download using an HttpURLConnection, but how should I inform the download result back to the Presenter? In the latter, should I use events? </p>

<p>NOTE 2: I would love if I could unit test this part of the app (Mocking the DownloadManager). So, passing the Context to the Model is not an option, as it breaks the MVP (IMHO) and would be much harder to unit test it.</p>

<p>Any informed help would be appreciated!</p>

<h2>Updates</h2>

<p>Thanks for you response @amadeu-cavalcante-filho. Let me address each issue. First, the Context problem: I need a Context, if I use Glade (an image download library) or DownloadManager, to download the images, thus, if I download the images on the Model (repository) Ill have to give to the Model a Context instance and this clearly breaks the MVP. </p>

<p>Second, the MVVM, I dont know much about the MVVM, but it seems to me that the Model in MVP should know how to fetch data (<a href=""https://medium.com/@cervonefrancesco/model-view-presenter-android-guidelines-94970b430ddf"" rel=""nofollow noreferrer"">https://medium.com/@cervonefrancesco/model-view-presenter-android-guidelines-94970b430ddf</a>) using a repository pattern or something like that.</p>

<p>Third, I'm prone to accept that the Presenter can indeed download the images (this is specifically the example that I constructed in my question). But, my problem is: should the Presenter know about Android stuff (the Context in this case)? This is a huge part of my question, where the Android stuff should be in the MVP? The only place that can know about Android stuff  is the view, but the download logic clearly doesnt belong there.</p>
",3186218,,3186218,,2018-04-11 13:45:49,2018-04-11 14:41:45,"Where should I put the image download logic on Android, according to the MVP pattern?",<android><mvp><android-mvp>,2,4,,,
Android,30622664,1,,,2015,,1,1015,"<p>I have made a custom camera on android using camera2 api. I am currently facing an intermittent issue with one device, a OnePlus One. As checked it is working fine with other devices like S3, S4, HTC  (all major devices), Moto  (all devices).</p>

<p>Please suggest if anything in particular is required/needed to resolve this issue on the OnePlus One and other devices?</p>

<pre><code>public class AutoFitTextureView extends TextureView {

private int mRatioWidth = 0;
private int mRatioHeight = 0;

public AutoFitTextureView(Context context) {
    this(context, null);
}

public AutoFitTextureView(Context context, AttributeSet attrs) {
    this(context, attrs, 0);
}

@SuppressLint(""NewApi"")
public AutoFitTextureView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

/**
 * Sets the aspect ratio for this view. The size of the view will be measured based on the ratio
 * calculated from the parameters. Note that the actual sizes of parameters don't matter, that
 * is, calling setAspectRatio(2, 3) and setAspectRatio(4, 6) make the same result.
 *
 * @param width  Relative horizontal size
 * @param height Relative vertical size
 */
@SuppressLint(""NewApi"")
public void setAspectRatio(int width, int height) {
    if (width &lt; 0 || height &lt; 0) {
        throw new IllegalArgumentException(""Size cannot be negative."");
    }
    mRatioWidth = width;
    mRatioHeight = height;
    requestLayout();
}

@SuppressLint(""NewApi"")
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    if (mRatioWidth ==0 &amp;&amp; mRatioHeight == 00) {
           int width = MeasureSpec.getSize(widthMeasureSpec);
           int height = MeasureSpec.getSize(heightMeasureSpec);
           if (0 == mRatioWidth || 0 == mRatioHeight) {
               setMeasuredDimension(width, height);
           } else {
               if (width &lt; height * mRatioWidth / mRatioHeight) {
                   setMeasuredDimension(width, width * mRatioHeight / mRatioWidth);
               } else {
                   setMeasuredDimension(height * mRatioWidth / mRatioHeight, height);
               }
           }
    }else {
        setMeasuredDimension(mRatioWidth, mRatioHeight);
    }
}
</code></pre>

<p>We have used <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">this</a> link to make this camera</p>

<p>Thanks in advance</p>
",4969863,,4969863,,2015-06-03 15:21:36,2017-02-09 14:06:44,Front Camera preview is not full screen,<android><camera>,2,0,,,
Android,34170159,1,34170187,,2015,,1,731,"<p>Im learning from Android's <a href=""https://github.com/googlesamples/android-BluetoothChat/"" rel=""nofollow"">BluetoothChat sample app</a> and noticed that they are using a Handler to send updates to the UI as seen <a href=""https://github.com/googlesamples/android-BluetoothChat/blob/master/Application/src/main/java/com/example/android/bluetoothchat/BluetoothChatService.java#L470-L492"" rel=""nofollow"">here</a> . I was wondering why they wouldn't prefer to use a callback/listener to send updates to UI?</p>
",4885784,,,,,2015-12-09 4:55:57,Using a callback vs using Handler in Android?,<java><android><callback><listener><handler>,2,0,,,
Android,35636078,1,35846721,,2016,,1,664,"<p>I am attempting to use the Google Credentials API to store credentials for my app.  I have downloaded and installed both sample apps from here (<a href=""https://github.com/googlesamples/android-credentials"" rel=""nofollow"">https://github.com/googlesamples/android-credentials</a>) as well as tried the code in my own app.  When attempting to save any credentials I get the following error - Status{statusCode=No eligible accounts can be found, resolution=null}.</p>

<p>I am testing on a Nexus 5x with a single Gmail account configured.</p>

<p>Any help would be greatly appreciated.</p>
",2051363,,,,,2016-10-31 16:56:40,Android Credentials API - No eligible accounts,<android><google-api-client>,2,0,,,
Android,34832098,1,36071166,,2016,,1,1123,"<p>I'm facing the problem with recording video by new camera2 api. I'm playing with project from 
<a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Video</a>
which demonstrates video recording using new camera2 api. Recording works well but rotation of recorded mp4 video is different because of different devices.</p>

<p>Nexus 9 result video is fine but Nexus 5X not.</p>

<p><strong>I've heard that Nexus 5X has camera rotated upside down</strong>. In this case I would set MediaRecorder flags to record properly but...</p>

<p><strong>My question is, how to recognize programmatically whether device has or doesn't have camera rotated upside down?</strong></p>

<p>Thanks for any help!</p>
",3846287,,3846287,,2016-03-17 20:34:41,2016-06-30 12:06:29,Nexus 5X records video rotated upside down using MediaRecorder and camera2,<android><video-capture><android-mediarecorder><android-camera2>,2,0,,,
Android,44447767,1,44470910,,2017,,1,111,"<p>If we look at Google's Android Architecture example for Model-View-Presenter (MVP), particularly these two lines:</p>

<p><a href=""https://github.com/googlesamples/android-architecture/blob/todo-mvp/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/tasks/TasksFragment.java#L357"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture/blob/todo-mvp/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/tasks/TasksFragment.java#L357</a></p>

<p><a href=""https://github.com/googlesamples/android-architecture/blob/todo-mvp/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/data/source/TasksRepository.java#L50"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture/blob/todo-mvp/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/data/source/TasksRepository.java#L50</a></p>

<p>We see the collection of Tasks is redundant - one is stored in the model in a Map, and one is stored in the View's Adapter as a List.</p>

<p>Is this a necessity?  Is it possible for the list to be stored once, or must we always be duplicating the list between the Model and the View's Adapter?  If it only had to be stored in one place, obviously that would be in the Model/repository portion.</p>

<p>Most importantly, if it is not a necessity to duplicate the objects list, how would the implementation work to not duplicate it?</p>
",470542,,,,,2017-09-01 14:47:27,Redundancy in Android Model-View-Presenter between Model and View Adapter,<android>,2,0,,,
Android,31797821,1,31839641,,2015,,1,718,"<p>I'm having difficulties with the Camera2 API's in regards to autofocus.  I am trying to snap pictures of objects at about 6-8"" range, specifically, a bank check, however, until the object is at approximately 12"" range, the text on the check is very blurry and it doesn't seem that the device's autofocus is working properly.  When I use the device's built-in Camera application, I don't have this issue at all.</p>

<p>The blurriness is present in both the preview and captured still image.</p>

<p>I'm using code from <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Basic</a> , and have been playing with all of the autofocus settings I can think to try, and so far none have worked.</p>

<p>This is on a Samsung Galaxy S5.  Unfortunately I don't have any other Android 5 devices to try it out on right now.</p>

<p>How can I achieve smooth focus on such items similar to the native Camera app?</p>
",1580268,,,,,2015-08-05 18:00:34,Unable to focus on nearby objects,<android><android-camera>,2,1,,,
Android,45630453,1,45631324,,2017,,1,215,"<p>According to the <a href=""https://developer.android.com/work/managed-configurations.html#define-configuration"" rel=""nofollow noreferrer"">restriction entry types</a>, for defining a list of objects we should use the <code>bundle_array</code> type, and an example follows:</p>

<pre class=""lang-xml prettyprint-override""><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;restrictions xmlns:android=""http://schemas.android.com/apk/res/android"" &gt;

  &lt;restriction
    android:key=""vpn_configuration_list""
    android:restrictionType=""bundle_array""&gt;
    &lt;restriction
      android:key=""vpn_configuration""
      android:restrictionType=""bundle""&gt;
      &lt;restriction
        android:key=""vpn_server""
        android:restrictionType=""string""/&gt;
      &lt;restriction
        android:key=""vpn_username""
        android:restrictionType=""string""/&gt;
      &lt;restriction
        android:key=""vpn_password""
        android:restrictionType=""string""/&gt;
    &lt;/restriction&gt;
  &lt;/restriction&gt;

&lt;/restrictions&gt;
</code></pre>

<p>In code that would be similar to a <code>List&lt;VpnConfiguration&gt;</code>, and <code>VpnConfiguration</code> would be a pojo with the three fields <code>vpn_server</code>, <code>vpn_username</code>, and <code>vpn_password</code>.</p>

<p>So far so good, now imagine that a simpler data structure is needed, like a <code>String[]</code>. 
According to <a href=""https://github.com/googlesamples/android-testdpc"" rel=""nofollow noreferrer"">Test DPC</a> this should be possible, because there's an option to insert an array of strings:</p>

<p><a href=""https://i.stack.imgur.com/gKD9f.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/gKD9f.png"" alt=""enter image description here""></a></p>

<p>Once you select it, then you are prompted to enter the list of values. However, the documentation does not have a <code>string_array</code> type, it has only the <code>bundle_array</code>.</p>

<p>With <code>bundle_array</code> you can define a <code>List&lt;String&gt;</code> instead of <code>String[]</code>, but that is overkill:</p>

<pre><code>&lt;restriction
    android:key=""mylist""
    android:restrictionType=""bundle_array""&gt;

    &lt;restriction
        android:key=""item""
        android:restrictionType=""bundle""&gt;

        &lt;restriction
            android:key=""name""
            android:restrictionType=""string"" /&gt;

    &lt;/restriction&gt;
&lt;/restriction&gt;
</code></pre>

<p>So, is there a simpler way one can define a string array?</p>
",1271435,,1271435,,2017-08-11 9:35:00,2017-08-11 9:35:45,Managed Configurations: defining an array of strings,<android><android-for-work>,2,0,,,
Android,53507668,1,,,2018,,1,80,"<p>What is the recommendation about placing Toasts, Snackbars in Activity vs. Fragment in the era of <code>ViewModel</code> and <code>one activity multiple fragments</code> concept.</p>

<p>Its clear that things like</p>

<ul>
<li>new Intents</li>
<li>Fragment transactions/fragment setup</li>
<li>permission requests</li>
<li>presenting navigational components (drawer, viewpager)</li>
</ul>

<p>should be handled by activity but what about <strong>Toasts</strong>/<strong>Snackbars</strong>?</p>

<p>There are so many SO questions about how to show Toasts or Snackbars in Fragment and how + when to use <code>getContext()</code> that I tend to let the activity handle all showing messages.</p>

<p>With ViewModel and <a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java"" rel=""nofollow noreferrer"">SingleLiveEvent</a> its quite easy to have a sharedViewModel that will be observed by activity and fragments and when needed a fragment dispatchs an event that notifies the activity to show a message.</p>

<p>So what do you think is best practice/recommended while having resposibility and separation of concerns in mind?</p>
",3357313,,,,,2018-11-30 4:32:42,"Where to place Toasts, Snackbars etc. in era of Android Architecture Components",<android><android-architecture-components><android-viewmodel>,2,0,,,
Android,32736708,1,,,2015,,2,4172,"<p>I am presently working with a chat application where I'm suppose to use Bluetooth LE Technology in my chat application.<br>
Through my research &amp; study over it,i have gone through several links:</p>

<ol>
<li><p><a href=""https://stackoverflow.com/questions/21489386/android-bluetooth-le-chat-example"">Android Bluetooth LE Chat example</a></p>

<p>From here i got to know that serial data transfer over Bluetooth low
energy is not supported as of then(10.10.14).</p></li>
<li><p><a href=""https://github.com/onlyinamerica/blemeshchat"" rel=""nofollow noreferrer"">https://github.com/onlyinamerica/blemeshchat</a> </p>

<p>The above project i have found bit similar as of my purpose but later on it was in vain.</p></li>
<li><p>Even gone through several Bluetooth chat tutorials and got to know that the user has to pair their device for their purpose.<br>
Gone through the following tutorials:</p>

<ul>
<li><a href=""https://github.com/googlesamples/android-BluetoothChat"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-BluetoothChat</a></li>
<li><a href=""http://www.androidhive.info/2014/10/android-building-group-chat-app-using-sockets-part-1/"" rel=""nofollow noreferrer"">http://www.androidhive.info/2014/10/android-building-group-chat-app-using-sockets-part-1/</a></li>
<li><a href=""http://www.pubnub.com/blog/tutorial-how-to-build-android-group-chat-application/"" rel=""nofollow noreferrer"">http://www.pubnub.com/blog/tutorial-how-to-build-android-group-chat-application/</a></li>
<li><a href=""http://myapptemplates.com/simple-android-chat-app-parse-integration-tutorial/"" rel=""nofollow noreferrer"">http://myapptemplates.com/simple-android-chat-app-parse-integration-tutorial/</a></li>
</ul></li>
</ol>

<p>I have done loads of research on how to use BLE Technology for chatting but didn't find a good resource on how to implement it.</p>

<p>So my questions are as follows:</p>

<ol>
<li><p>Can we make a chat application using Bluetooth Low Energy similarly as of Bluetooth? Please give a verified reasons but not opinion based.</p></li>
<li><p>Can BLE chat application can chat with normal bluetooth application? Give reasons?</p></li>
<li><p>If possible please provide me some good resource for implementing chat with BLE Technology.</p></li>
</ol>
",4684069,,-1,,2017-05-23 11:46:36,2018-12-07 9:33:05,How to use Bluetooth Low Energy (BLE) in an android chat application?,<android><bluetooth><chat><bluetooth-lowenergy>,2,2,4,,
Android,37936693,1,,,2016,,2,1476,"<p>I am currently making an application where I need to get the user's location when a button is clicked. I am using <a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationUpdates"" rel=""nofollow"">this</a> sample and it works great as a sample application. My question is, how would I implement it into my application button's <em>onClick</em> event? I don't need it to refresh often, I just need it so that when the user clicks the button, it gets the user's latitude and longitude and saves them to two variables. What would be the best way to do this? I didn't post my own code because all I have is a button with an <em>onClick</em> event.</p>
",6363024,,,,,2016-06-21 7:15:10,How do I get android location once at the push of a button?,<java><android><android-location>,2,0,2,,
Android,47868684,1,47873189,,2017,,2,903,"<p>I've seen good examples of MVP architecture (<a href=""https://github.com/android10/Android-CleanArchitecture"" rel=""nofollow noreferrer"">here</a> and <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-clean/todoapp"" rel=""nofollow noreferrer"">here</a>). Both present only simple interactors, but I wonder how to deal with more complex use case, consisting of steps, which are repeated in other use cases.</p>

<p>For example, my API requires token to authenticate any call. I've created an interactor to get that token (<code>GetToken</code>). I want to get user's last login date (<code>GetLastLoginDate</code>) and then fetch a list of changes that occured between that date and now (<code>GetVersionChanges</code>).</p>

<p>Where those interactor should be chained? I want to keep them separate, because some of them are reused in other parts of the code. I've came up with two solutions.</p>

<ol>
<li><p>Presenter should chain all interactors. This solution works as long the use case is not complex and doesn't have many preconditions. It seems to me it's not the right place, because it burdens presenter with another responsibility.</p></li>
<li><p>Interactor can use many repositories (no clean architecture rules are broken then). Why not use <code>TokenRepository</code> in other interactors? Because getting token is much more complex than just reaching to repository. Repeating the steps in other interactor does not reuse already existing code.</p></li>
</ol>

<p>Both solutions have their flaws and are against basic principles (DRY, single responsibility principle).</p>
",7123686,,7123686,,2017-12-18 14:05:19,2019-04-12 16:21:44,"In clean MVP, who should handle combining interactors?",<android><mvp><use-case><clean-architecture>,2,0,1,,
Android,42366276,1,42366771,,2017,,2,2979,"<p>I want to make video recording using <code>android.hardware.camera2</code>. I have googled but not get any proper tutorial regarding this. There are some tutorial available for <code>camera preview</code> base on <a href=""https://developer.android.com/reference/android/hardware/Camera.html"" rel=""nofollow noreferrer"">Camera</a> which is now deprecated. Can anyone help me with latest sample code just for <code>recording video</code> with its <code>preview</code> which can be saved into <code>sd card</code>. I have just check <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow noreferrer"">GitHub</a> and <a href=""https://developer.android.com/samples/Camera2Video/index.html"" rel=""nofollow noreferrer""> Google camera2Video example</a> also but I need any simple solution which I can integrated into my project.</p>
",5302251,,1033581,,2019-01-15 17:54:01,2019-01-15 17:54:01,Android: How to record video using android.hardware.camera2 and MediaRecorder,<android><camera><android-camera><android-camera2>,2,0,1,,
Android,41790052,1,41790239,,2017,,2,780,"<p>I am using the Camera2Basic example from Google Samples (<a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a>) to display a camera preview inside a fragment.
This fragment contains a RelativeLayout and a custom AutoFitTextureView. The latter can be found on the link above. I have adjusted the layout to center the preview and remove control buttons:</p>

<pre><code>&lt;RelativeLayout xmlns:android=""http://schemas.android.com/apk/res/android""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""
    android:id=""@+id/camera_rel""&gt;

    &lt;uk.co.deluxe_digital.messngr.AutoFitTextureView
    android:id=""@+id/texture""
    android:layout_width=""wrap_content""
    android:layout_height=""wrap_content""
    android:layout_centerInParent=""true""
    android:layout_centerHorizontal=""true""
    android:layout_centerVertical=""true"" /&gt;

&lt;/RelativeLayout&gt;
</code></pre>

<p>I have three total fragments that are displayed within a ViewPager. I did make some small changes to the Camera2BasicFragment to make it an android.support.v4.app.Fragment to work with my ViewPager and remove the buttons.</p>

<p>What I would like is to make the camera preview fill the entire screen. This is possible by stretching the preview image. That is not what I want. Does anyone know a way of scaling up the preview or TextureView so that the height of the preview matches the container even if the sides are cropped off. I would like it to fill the view and maintain aspect ratio. This would mean that some of the preview at either side is lost, but that is okay.</p>

<p>This is what I currently have:
<a href=""https://i.stack.imgur.com/lPZXH.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/lPZXH.jpg"" alt=""current incorrect display of camera preview""></a></p>

<p>The FloatingActionButton takes care of capturing the image. That is on the main parent activity.</p>

<p>Even if you can point me in the right direction to working this out, that would be a huge help!</p>
",2216919,,2216919,,2017-01-22 11:38:02,2018-01-23 1:59:34,Camera2 API Make Preview Fill Entire View,<java><android><android-layout><android-fragments><android-camera2>,2,0,1,,
Android,49520242,1,,,2018,,2,558,"<p>I was working with Android MVP architecture and I am following <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">Google MVP Architecture</a>.</p>

<p>I am facing issue when Activity have multiple fragment,In my case activity having 2 tab. I am not able to understand, Should i create two Presenter for every Fragment OR should i create one Presenter for this? now same thing with View.</p>

<p>Even i did'nt found any solution on <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">google-sample github repository</a>.</p>

<p>Can anyone please suggest me or show me live code which accomplish my above requirement.</p>
",5867850,,,,,2018-04-03 4:06:01,Multiple fragment in one Activity in Android MVP,<android><mvp><android-mvp><android-architecture>,2,3,1,,
Android,33654287,1,33702425,,2015,,2,1241,"<p>Was looking through the camera2 video <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow"">sample app</a> published by Google and one of the methods goes as following:</p>

<pre><code>/**
 * In this sample, we choose a video size with 3x4 aspect ratio. Also, we don't use sizes
 * larger than 1080p, since MediaRecorder cannot handle such a high-resolution video.
 *
 * @param choices The list of available sizes
 * @return The video size
 */
private static Size chooseVideoSize(Size[] choices) {
    for (Size size : choices) {
        if (size.getWidth() == size.getHeight() * 4 / 3 &amp;&amp; size.getWidth() &lt;= 1080) {
            return size;
        }
    }
    Log.e(TAG, ""Couldn't find any suitable video size"");
    return choices[choices.length - 1];
}
</code></pre>

<p>I've fiddled with my own implementation of camera2 and attempted to record a 4K video with media recorder which worked fine - the recorded file reported dimensions of 38402160. </p>

<p>So, is the comment in the sample incorrect or MediaRecorder was not capable of handling larger resolutions on Lollipop but is capable on Marshmallow or something else?</p>
",3361863,,294248,,2015-11-11 16:51:57,2017-10-24 7:36:44,Recording 4K with MediaRecorder,<android><android-camera><android-mediarecorder>,2,3,1,,
Android,39327480,1,39333694,,2016,,2,3873,"<p>I want to fetch user's current lat long on click of a button. I know that you can get the last known location using FusedLocationApi. But what I am not able to understand is, gps or location services needs to be turned on for this? If yes, how to check that the user has turned on location and get the current location. Also, how to include marshmallow permission checks in getting the location. </p>

<p>I have already referred:
1) <a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationSettings/app/src/main/java/com/google/android/gms/location/sample/locationsettings/MainActivity.java"" rel=""nofollow"">googlesamples/android-play-location</a>
2) <a href=""https://github.com/googlesamples/android-XYZTouristAttractions/blob/master/Application/src/main/java/com/example/android/xyztouristattractions/service/UtilityService.java"" rel=""nofollow"">googlesamples/android-XYZTouristAttractions</a> 
and many other links but unable to make a complete flow.</p>

<p>Code</p>

<pre><code>public class AccessLocationFragment extends BaseFragment implements View.OnClickListener, LocationListener,
    GoogleApiClient.ConnectionCallbacks, GoogleApiClient.OnConnectionFailedListener, GeneralDialogFragment.GeneralDialogClickListener {

private static final int MY_PERMISSIONS_REQUEST_LOCATION = 101;
private static final String TAG = AccessLocationFragment.class.getSimpleName();
private static final int REQUEST_CHECK_SETTINGS = 102;
private Button mAccessLocation;
private EditText mZipCode;
private Dialog progressDialog;
private GoogleApiClient mGoogleApiClient;
private Location mLastLocation;

public static AccessLocationFragment newInstance() {
    return new AccessLocationFragment();
}

@Nullable
@Override
public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
    return inflater.inflate(R.layout.fragment_access_location, container, false);
}

@Override
public void onViewCreated(View view, @Nullable Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);
    RecycleApplication.getEventBus().register(this);
    mAccessLocation = (Button) view.findViewById(R.id.access_location);
    mZipCode = (EditText) view.findViewById(R.id.zip_code);
    mAccessLocation.setOnClickListener(this);

    mZipCode.setOnEditorActionListener(new TextView.OnEditorActionListener() {
        @Override
        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
            if (actionId == EditorInfo.IME_ACTION_DONE) {
                String zipCode = mZipCode.getText().toString().trim();
                if (TextUtils.isEmpty(zipCode)) {
                    Toast.makeText(mActivity, ""Please enter zip code"", Toast.LENGTH_SHORT).show();
                } else {
                    Call&lt;Address&gt; response = mRecycleService.getAddress(zipCode);
                    response.enqueue(new GetLocationCallback(AccessLocationFragment.this));
                }
            }
            return false;
        }
    });
    // Create an instance of GoogleAPIClient.
    if (mGoogleApiClient == null) {
        mGoogleApiClient = new GoogleApiClient.Builder(mActivity)
                .addConnectionCallbacks(this)
                .addOnConnectionFailedListener(this)
                .addApi(LocationServices.API)
                .build();
    }
    if (!LocationUtils.checkFineLocationPermission(mActivity)) {
        // See if user has denied permission in the past
        if (shouldShowRequestPermissionRationale(android.Manifest.permission.ACCESS_FINE_LOCATION)) {
            // Show a simple snackbar explaining the request instead
            showPermissionSnackbar();
        } else {
            requestFineLocationPermission();
        }
    } else {
        displayLocationSettingsRequest();
    }
}

private void startHomeActivity(Address address) {
    RecyclePreferences.getInstance().setCity(address.getCity());
    RecyclePreferences.getInstance().setState(address.getState());
    RecyclePreferences.getInstance().setLatitude(address.getLatitude());
    RecyclePreferences.getInstance().setLongitude(address.getLongitude());
    RecyclePreferences.getInstance().setZipCode(address.getZipCode());
    startActivity(new Intent(mActivity, HomeActivity.class));
    mActivity.finish();
}

@Override
public void onSuccess(Call&lt;Address&gt; call, Response&lt;Address&gt; response) {
    mActivity.hideProgressDialog(progressDialog);
    if (response.isSuccessful()) {
        Address address = response.body();
        startHomeActivity(address);
    }
}

@Override
public void onFailure(Call&lt;Address&gt; call, Throwable t) {
    mActivity.hideProgressDialog(progressDialog);
}

@Override
public void onClick(View view) {
    if (view.getId() == R.id.access_location) {
        fetchAddress(mLastLocation);
    }
}

@Override
public void onRequestPermissionsResult(int requestCode, String permissions[], int[] grantResults) {
    switch (requestCode) {
        case MY_PERMISSIONS_REQUEST_LOCATION: {
            if (grantResults[0] == PackageManager.PERMISSION_GRANTED) {
               displayLocationSettingsRequest();
            }
        }
    }
}

private void fetchAddress(Location location) {
    mRecycleService = new RecycleRetrofitBuilder(mActivity).getService();
    Call&lt;Address&gt; response = mRecycleService.getAddress(String.valueOf(location.getLatitude()), String.valueOf(location.getLongitude()));
    progressDialog = mActivity.showProgressDialog(mActivity);
    response.enqueue(new GetLocationCallback(AccessLocationFragment.this));
}

private void requestFineLocationPermission() {
    requestPermissions(new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, MY_PERMISSIONS_REQUEST_LOCATION);
}

private void showPermissionSnackbar() {
    GeneralDialogFragment generalDialogFragment = GeneralDialogFragment.
            newInstance(""Permissions"", ""Allow Recycle the World to use your location."", ""Allow"", ""Go Back"", this);
    mActivity.showDialogFragment(generalDialogFragment);
    displayLocationSettingsRequest();
}

private void displayLocationSettingsRequest() {
    LocationRequest locationRequest = LocationRequest.create();
    locationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);
    locationRequest.setInterval(10000);
    locationRequest.setFastestInterval(10000 / 2);

    LocationSettingsRequest.Builder builder = new LocationSettingsRequest.Builder().addLocationRequest(locationRequest);
    builder.setAlwaysShow(true);

    PendingResult&lt;LocationSettingsResult&gt; result = LocationServices.SettingsApi.checkLocationSettings(mGoogleApiClient, builder.build());
    result.setResultCallback(new ResultCallback&lt;LocationSettingsResult&gt;() {
        @Override
        public void onResult(LocationSettingsResult result) {
            final Status status = result.getStatus();
            switch (status.getStatusCode()) {
                case LocationSettingsStatusCodes.SUCCESS:
                    getLocation();
                    break;
                case LocationSettingsStatusCodes.RESOLUTION_REQUIRED:
                    Log.i(TAG, ""Location settings are not satisfied. Show the user a dialog to upgrade location settings "");
                    try {
                        status.startResolutionForResult(mActivity, REQUEST_CHECK_SETTINGS);
                    } catch (IntentSender.SendIntentException e) {
                        Log.i(TAG, ""PendingIntent unable to execute request."");
                    }
                    break;
                case LocationSettingsStatusCodes.SETTINGS_CHANGE_UNAVAILABLE:
                    Log.i(TAG, ""Location settings are inadequate, and cannot be fixed here. Dialog not created."");
                    break;
            }
        }
    });
}

private void getLocation() {
    if (ActivityCompat.checkSelfPermission(mActivity, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED
            &amp;&amp; ActivityCompat.checkSelfPermission(mActivity, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {
        return;
    }
    mLastLocation = LocationServices.FusedLocationApi.getLastLocation(mGoogleApiClient);
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == REQUEST_CHECK_SETTINGS) {
        getLocation();
    }
}

@Override
public void onStart() {
    mGoogleApiClient.connect();
    super.onStart();
}

@Override
public void onStop() {
    mGoogleApiClient.disconnect();
    super.onStop();
}

@Override
public void onConnected(@Nullable Bundle bundle) {
    getLocation();
}

@Override
public void onDestroy() {
    super.onDestroy();
    RecycleApplication.getEventBus().unregister(this);
}


@Override
public void onConnectionSuspended(int i) {

}

@Override
public void onConnectionFailed(@NonNull ConnectionResult connectionResult) {

}

@Override
public void onOk(DialogFragment dialogFragment) {
    dialogFragment.dismiss();
    requestFineLocationPermission();
}

@Override
public void onCancel(DialogFragment dialogFragment) {
    dialogFragment.dismiss();

}
</code></pre>

<p>}</p>
",1081355,,1081355,,2016-09-05 11:14:02,2017-04-03 12:16:25,How to get user's current location in Android,<android><location><google-play-services>,2,2,1,,
Android,42581120,1,,,2017,,2,2482,"<p>I want to play around with mobile Vulkan without having to buy a device.</p>

<p>If it is not supported, please provide evidence (e.g. source code, official Google statements). Are there any plans to support it?</p>

<p>If supported, please give detailed and tested instructions of how to get a minimal hello world triangle app running, including the app you have tested with.</p>

<p>I have tried <a href=""https://github.com/googlesamples/android-vulkan-tutorials/tree/7ba478ac2e0d9006c9e2e261446003a4449b8aa3/tutorial05_triangle"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vulkan-tutorials/tree/7ba478ac2e0d9006c9e2e261446003a4449b8aa3/tutorial05_triangle</a> with a Pixel API 25 image (API 25 is supposed to support Vulkan), but keep getting build or runtime errors.</p>

<p>I have opened an issue at: <a href=""https://github.com/googlesamples/android-vulkan-tutorials/issues/13"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vulkan-tutorials/issues/13</a> but it was closed without solution.</p>

<p>Related:</p>

<ul>
<li>OpenGL ES 2: <a href=""https://stackoverflow.com/questions/4455783/does-the-android-emulator-support-opengl-es-2-0"">Does the Android Emulator support OpenGL ES 2.0?</a></li>
<li>OpenGL ES 3:
<a href=""https://stackoverflow.com/questions/24874066/does-the-android-emulator-support-opengl-es-3-0"">Does the Android emulator support OpenGL ES 3.0?</a></li>
</ul>
",895245,,-1,,2017-05-23 12:09:27,2017-03-04 16:10:41,How to create and run an example Vulkan app on the Android emulator?,<android><android-emulator><vulkan>,2,0,1,,
Android,44863661,1,44863853,,2017,,2,979,"<p>I have made an app which takes pictures (portrait, landscape or selfie) using the <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">Google Camera2 sample</a>. Everything works, I can take the pictures, they are saved, etc. </p>

<p>But when I open my phone's (Samsung S7) gallery then all the selfies and portrait pictures are rotated 90 degrees. The landscape pictures are fine though. I have seen a lot of post about how to <strong>read</strong> images in the correct orientation, but what about saving them properly? </p>

<p>I have my own gallery in my app and there the pictures are loaded correctly (using Glide) without any special rotation fixing, so I am not sure what I did wrong and most importantly, how do I fix this?</p>
",8021836,,3908170,,2018-09-17 23:45:55,2018-09-17 23:45:55,Android Camera2 pictures appear rotated in gallery,<android><android-camera2>,2,4,1,,
Android,36964572,1,,,2016,,2,616,"<p>I am working on a modification of Google's Camera2 API example for Android, found here: <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Basic</a></p>

<p>I am uploading captured images to Cloudinary, and obviously need to do so in a background thread so the UI isn't blocked.</p>

<p>The problem I'm running into, however, is that the UI actually is blocked when the image is uploaded even though from what I understand, it shouldn't be, because the Handler is created with the Looper from a background thread like so: </p>

<pre><code>private void startBackgroundThread() {
    mBackgroundThread = new HandlerThread(""CameraBackground"");
    mBackgroundThread.start();
    mBackgroundHandler = new Handler(mBackgroundThread.getLooper());
}
</code></pre>

<p>The ImageSaver class, which is responsible for writing the captured image to disk, is as follows:</p>

<pre><code>private static class ImageSaver implements Runnable {
    /**
     * The JPEG image
     */
    private final Image mImage;
    /**
     * The file we save the image into.
     */
    private final File mFile;

    public ImageSaver(Image image, File file ) {
        mImage = image;
        mFile = file;
    }

    @Override
    public void run() {
        ByteBuffer buffer = mImage.getPlanes()[0].getBuffer();
        byte[] bytes = new byte[buffer.remaining()];
        buffer.get(bytes);
        FileOutputStream output = null;
        try {
            output = new FileOutputStream(mFile);
            output.write(bytes);
            InputStream is = new ByteArrayInputStream(bytes);
            Map uploadResult = CloudinaryManager.getInstance().uploader().upload(is, ObjectUtils.asMap(
                    ""api_key"", CloudinaryManager.CLOUDINARY_API_KEY,
                    ""api_secret"", CloudinaryManager.CLOUDINARY_SECRET_KEY
            ));
            System.out.println(""result"");
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            mImage.close();
            if (null != output) {
                try {
                    output.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }
</code></pre>

<p>The ImageSaver is added to the Handler here:</p>

<pre><code> private final ImageReader.OnImageAvailableListener mOnImageAvailableListener
        = new ImageReader.OnImageAvailableListener() {

    @Override
    public void onImageAvailable(ImageReader reader) {
        mBackgroundHandler.post(new ImageSaver(reader.acquireNextImage(), mFile));
    }
};
</code></pre>

<p>I would appreciate any help or advice to point me in the right direction.</p>
",4812993,,4812993,,2016-05-01 19:08:24,2017-03-13 20:21:52,HandlerThread blocks UI android,<android><multithreading><android-camera2><android-looper><android-handlerthread>,2,2,1,,
Android,47860064,1,,,2017,,2,122,"<p>As the title states, does it considered as a good practice to use a single fragment within an activity to display the content? I began to notice that more and more developers start to use the fragment as an insulation layer to separate the lifecycle logic from UI that activity (sorry, fragment) displays. The most recent example that I stumble on is the <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer""><code>architecture blueprints</code></a> provided by Google developers. They <a href=""https://github.com/googlesamples/android-architecture/blob/todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/tasks/TasksActivity.java"" rel=""nofollow noreferrer""><code>use</code></a> just one single fragment for UI while the activity handles ViewModel and all the navigation between screens.</p>

<p>So, is this a good practice or just a personal preference? Would you care to share your opinion on the subject?</p>
",5233074,,5233074,,2017-12-18 16:25:04,2017-12-18 16:25:04,Is it a good practice to use a single fragment to display the UI instead of the activity?,<android><android-fragments><design-patterns><android-activity><architecture>,2,0,,,
Android,51988969,1,,,2018,,2,376,"<p>Following <a href=""https://developer.android.com/studio/projects/add-native-code#create-sources"" rel=""nofollow noreferrer"">this</a> I'm trying to link correctly <a href=""https://github.com/prouast/heartbeat"" rel=""nofollow noreferrer"">some cpp and hpp files</a>.
I'm starting by an <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker"" rel=""nofollow noreferrer"">existing project</a> and I would to connect all toghether. 
I read that I have 2 possibilities: write a CMake file or use ndk-build to connect them all.
By trying the latter I can not write the Application.mk and Android.mk files because I do not know what I need to do.</p>

<p>Build Grandle code:</p>

<pre><code>apply plugin: 'com.android.application'

android {
compileSdkVersion 24
buildToolsVersion ""24.0.2""

defaultConfig {
    applicationId ""com.google.android.gms.samples.vision.face.facetracker""
    minSdkVersion 9
    targetSdkVersion 24
    versionCode 1
    versionName ""1.0""
}
buildTypes {
    release {
        minifyEnabled false
        proguardFiles getDefaultProguardFile('proguard-android.txt'), 
'proguard-rules.pro'
       }
    }
 }

 dependencies {
   compile fileTree(dir: 'libs', include: ['*.jar'])
   compile 'com.android.support:support-v4:24.2.0'
   compile 'com.android.support:design:24.2.0'
   compile 'com.google.android.gms:play-services-vision:9.4.0+'
</code></pre>

<p>EDIT:
I'm trying to use ndk-build.</p>

<p>app.grandle:</p>

<pre><code>apply plugin: 'com.android.application'

android {
    compileSdkVersion 24
    buildToolsVersion ""24.0.2""

   defaultConfig {
       applicationId ""com.google.android.gms.samples.vision.face.facetracker""
       minSdkVersion 9
       targetSdkVersion 24
       versionCode 1
       versionName ""1.0""


}
sourceSets.main {
    jni.srcDirs = [] //disable automatic ndk-build call
}
task ndkBuild(type: Exec, description: 'Compile JNI source via NDK') {
    commandLine ""C:/Users/cvlab/AppData/Local/Android/sdk/ndk-bundle/ndk-build.cmd"",
            'NDK_PROJECT_PATH=build/intermediates/ndk',
            'NDK_LIBS_OUT=src/main/jniLibs',
            'APP_BUILD_SCRIPT=src/main/jni/Android.mk',
            'NDK_APPLICATION_MK=src/main/jni/Application.mk'
}
tasks.withType(JavaCompile) {
    compileTask -&gt; compileTask.dependsOn ndkBuild
}


buildTypes {
    release {
        minifyEnabled false
        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
          }
      }
  }

dependencies {
   compile fileTree(dir: 'libs', include: ['*.jar'])
   compile 'com.android.support:support-v4:24.2.0'
   compile 'com.android.support:design:24.2.0'
   compile 'com.google.android.gms:play-services-vision:9.4.0+'
}
</code></pre>

<p>Application.mk:</p>

<pre><code>APP_PLATFORM := android-24
APP_ABI := armeabi-v7a arm64-v8a x86 x86_64
APP_STL := gnustl_static
APP_CPPFLAGS := -std=gnu++11 -frtti -fexceptions

ifeq ($(NDK_DEBUG),0)
  APP_CPPFLAGS += -DNDEBUG
endif
</code></pre>

<p>Android.mk:</p>

<pre><code>LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

OPENCV_CAMERA_MODULES:=on
OPENCV_INSTALL_MODULES:=on
OPENCV_LIB_TYPE:=SHARED
OPENCVROOT:= C:\Users\cvlab\Downloads\opencv-3.3.0-android-sdk

OPENCV_INSTALL_MODULES := on
include ${OPENCVROOT}/sdk/native/jni/OpenCV.mk

LOCAL_MODULE := face-lib
LOCAL_SRC_FILES += $(LOCAL_PATH)/Baseline.cpp $(LOCAL_PATH)/Heartbeat.cpp $(LOCAL_PATH)/opencv.cpp $(LOCAL_PATH)/RPPG.cpp
LOCAL_LDLIBS += -llog -ldl
LOCAL_CPPFLAGS += -std=gnu++11 -frtti -fexceptions

LOCAL_MODULE := MyLibs

include $(BUILD_SHARED_LIBRARY)
</code></pre>

<p>Sync, make project and clean project are resulting without any error but I'm running into this error:</p>

<blockquote>
  <p>Process 'command 'C:/Users/cvlab/AppData/Local/Android/Sdk/ndk-bundle/ndk-build.cmd'' finished with non-zero exit value 2</p>
</blockquote>

<p>What's wrong?</p>
",10191400,,10191400,,2018-08-23 17:36:12,2018-08-23 17:36:12,How to link correctly C++ files to an existing Android Project in Android Studio?,<android><c++>,2,2,,,
Android,42358194,1,42402203,,2017,,2,1028,"<p>I was using Visual Studio and it's Debug mechanism is really useful to me. With many header and C files in 1 project, just a simple F10 it could take me a tour around from the beginning of the main() function so that I could see the sequence of the code being executed.</p>

<p>Now I'm jumping into Android Studio and start with a project using NDK, JNI (this project for example: <a href=""https://github.com/googlesamples/android-ndk/tree/master/gles3jni"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk/tree/master/gles3jni</a>), it makes me confused because there're many .java files and others C++ (native code) files and I don't know which code from which file is executed first and how it goes on.</p>

<p>My Question is: I'm looking for a way to debug in Android Studio line by line from the beginning <strong>to see its workflow</strong> likes how Visual Studio did but all I got from searching is how to start from a breakpoint when debugging.</p>

<p>I have tried putting the break point in the <code>onCreate()</code> method of the launcher activity and use <code>F8</code> to <code>Step Over</code> and <code>F7</code> to <code>Step Into</code> but it doesn't work as i expect. It keeps taking me to the super class <code>Activity.java</code> and <code>GLSurafaceView.java</code> instead of taking me to the C++ code. Is there any way to do so in Android Studio and how to do it? </p>

<p>I have tried with others project but the problem still remain the same. Hope someone could help.</p>
",7408814,,4409409,,2017-07-13 19:00:30,2017-07-13 19:00:30,How to debug Android Studio Project (using NDK and JNI) line by line to see the workflow?,<android-studio><debugging><android-ndk><java-native-interface>,2,2,,,
Android,53635269,1,,,2018,,2,380,"<p>I'm currently working on a school project and pulled the code from here <a href=""https://github.com/googlesamples/android-nearby/tree/master/connections/rockpaperscissors"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-nearby/tree/master/connections/rockpaperscissors</a>. I'm using Intellij IDEA Ultimate 2018.3. (Well, it's basically an Android Studio as well)</p>

<p>I worked on that project for several days and everything works <strong>fine</strong> until today i found this Gradle error:</p>

<pre><code>Failed to resolve: androidx.appcompat:appcompat:1.1.0-alpha01
Show in File


Failed to resolve: com.google.android.gms:play-services-nearby:16.0.0
Install Repository and sync project
Show in File
</code></pre>

<p>Here's my project level build.gradle:</p>

<pre><code>buildscript {
    repositories {
        google()
        maven {
            url 'https://maven.google.com/'
            name 'Google'
        }
        jcenter()

    }
    dependencies {
        classpath 'com.android.tools.build:gradle:3.4.0-alpha06'
        // NOTE: Do not place your application dependencies here; they belong
        // in the individual module build.gradle files
    }
}

    repositories {
        google()
        maven {
            url ""https://maven.google.com""
        }
        jcenter()
    }


task clean(type: Delete) {
    delete rootProject.buildDir
}
</code></pre>

<p>And here's my module build.gradle:</p>

<pre><code>apply plugin: 'com.android.application'

android {
    compileSdkVersion 28
    defaultConfig {
        applicationId ""{my school project Id}""
        minSdkVersion 23
        targetSdkVersion 28
        versionCode 1
        versionName ""1.0""
    }

}

dependencies {
    implementation 'androidx.appcompat:appcompat:1.1.0-alpha01'
    implementation 'com.google.android.gms:play-services-nearby:16.0.0'
}
</code></pre>

<p>What <strong>i have done</strong> to solve this:</p>

<ol>
<li>Invalidate/Restart IntelliJ</li>
<li>Rebuild/Clean project</li>
<li>Checked Google Maven Repository for possible typos on package names</li>
<li>Restarted my computer</li>
<li>Reinstalled Google Play Services</li>
</ol>

<p>What makes me more frustrated is the fact that everything is fine yesterday! So, any help would be appreciated. Thank you!</p>
",7130705,,7130705,,2018-12-05 15:20:08,2019-04-15 7:06:37,Gradle cannot resolve androidx.appcompat:appcompat:1.1.0-alpha01 and com.google.android.gms:play-services-nearby:16.0.0,<android><android-studio><gradle><android-gradle><google-play-services>,2,0,,,
Android,36580297,1,,,2016,,2,2360,"<p>I am trying to use the new Fingerprint Scan feature on android. I followed the google's example from here:
<a href=""https://github.com/googlesamples/android-FingerprintDialog"" rel=""nofollow"">https://github.com/googlesamples/android-FingerprintDialog</a></p>

<p>But when I run my program I get this error:</p>

<pre><code>04-12 22:51:06.475 9218-9218/ivote.android.gj.ivote E/AndroidRuntime: FATAL EXCEPTION: main
                                                                      Process: ivote.android.gj.ivote, PID: 9218
                                                                      java.lang.NoClassDefFoundError: Failed resolution of: Landroid/hardware/fingerprint/FingerprintManager;
                                                                          at ivote.android.gj.ivote.ActivityPackage.HomeScreen.fingerScan(HomeScreen.java:233)
                                                                          at ivote.android.gj.ivote.ActivityPackage.HomeScreen$7.onResponse(HomeScreen.java:188)
                                                                          at ivote.android.gj.ivote.ActivityPackage.HomeScreen$7.onResponse(HomeScreen.java:176)
                                                                          at com.android.volley.toolbox.StringRequest.deliverResponse(StringRequest.java:60)
                                                                          at com.android.volley.toolbox.StringRequest.deliverResponse(StringRequest.java:30)
                                                                          at com.android.volley.ExecutorDelivery$ResponseDeliveryRunnable.run(ExecutorDelivery.java:99)
                                                                          at android.os.Handler.handleCallback(Handler.java:739)
                                                                          at android.os.Handler.dispatchMessage(Handler.java:95)
                                                                          at android.os.Looper.loop(Looper.java:135)
                                                                          at android.app.ActivityThread.main(ActivityThread.java:5383)
                                                                          at java.lang.reflect.Method.invoke(Native Method)
                                                                          at java.lang.reflect.Method.invoke(Method.java:372)
                                                                          at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:939)
                                                                          at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:734)
                                                                       Caused by: java.lang.ClassNotFoundException: Didn't find class ""android.hardware.fingerprint.FingerprintManager"" on path: DexPathList[[zip file ""/data/app/ivote.android.gj.ivote-2/base.apk""],nativeLibraryDirectories=[/vendor/lib64, /system/lib64]]
                                                                          at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:56)
                                                                          at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
                                                                          at java.lang.ClassLoader.loadClass(ClassLoader.java:469)
                                                                          at ivote.android.gj.ivote.ActivityPackage.HomeScreen.fingerScan(HomeScreen.java:233)
                                                                          at ivote.android.gj.ivote.ActivityPackage.HomeScreen$7.onResponse(HomeScreen.java:188)
                                                                          at ivote.android.gj.ivote.ActivityPackage.HomeScreen$7.onResponse(HomeScreen.java:176)
                                                                          at com.android.volley.toolbox.StringRequest.deliverResponse(StringRequest.java:60)
                                                                          at com.android.volley.toolbox.StringRequest.deliverResponse(StringRequest.java:30)
                                                                          at com.android.volley.ExecutorDelivery$ResponseDeliveryRunnable.run(ExecutorDelivery.java:99)
                                                                          at android.os.Handler.handleCallback(Handler.java:739)
                                                                          at android.os.Handler.dispatchMessage(Handler.java:95)
                                                                          at android.os.Looper.loop(Looper.java:135)
                                                                          at android.app.ActivityThread.main(ActivityThread.java:5383)
                                                                          at java.lang.reflect.Method.invoke(Native Method)
                                                                          at java.lang.reflect.Method.invoke(Method.java:372)
                                                                          at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:939)
                                                                          at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:734)
                                                                        Suppressed: java.lang.ClassNotFoundException: android.hardware.fingerprint.FingerprintManager
                                                                          at java.lang.Class.classForName(Native Method)
                                                                          at java.lang.BootClassLoader.findClass(ClassLoader.java:781)
                                                                          at java.lang.BootClassLoader.loadClass(ClassLoader.java:841)
                                                                          at java.lang.ClassLoader.loadClass(ClassLoader.java:504)
                                                                                ... 15 more
                                                                       Caused by: java.lang.NoClassDefFoundError: Class not found using the boot class loader; no stack available
</code></pre>

<p>I tried to find the solution of this issue on google, but it didn't help. Few SO question pointed out mistake n gradle file, so my app gradle file looks like this:</p>

<pre><code>apply plugin: 'com.android.application'

android {
    compileSdkVersion 23
    buildToolsVersion ""23.0.1""

    defaultConfig {
        applicationId ""ivote.android.gj.ivote""
        minSdkVersion 15
        targetSdkVersion 23
        versionCode 1
        versionName ""1.0""
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
}

repositories {
    jcenter()
    mavenCentral()
    maven { url ""https://jitpack.io"" }
}

dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    compile 'com.android.support:appcompat-v7:23.1.1'
    compile 'com.android.support:design:23.1.1'
    compile 'com.android.support:support-v4:23.1.1'
    compile ""com.android.support:support-v13:23.1.1""
    compile 'com.squareup.picasso:picasso:2.5.2'
    compile project(path: ':volley')
    compile 'com.android.support:cardview-v7:23.1.1'
    compile 'com.android.support:recyclerview-v7:23.1.1'
    compile 'com.github.PhilJay:MPAndroidChart:v2.2.3'
    compile 'com.journeyapps:zxing-android-embedded:3.0.2@aar'
    compile 'com.google.zxing:core:3.2.0'
}
</code></pre>

<p>I am trying to solve this error for a while, so please if any one can help it would be great help. Thanks in Advance!</p>
",4123672,,,,,2017-07-19 6:34:01,Error While using FIngerprintManager android API,<java><android><classnotfoundexception><android-fingerprint-api>,2,2,,,
Android,41500348,1,41500488,,2017,,2,629,"<p>I have requirement in which I would like to have the receipt of my purchase which is already consumed. So using of method getPurchases is ruled out because it only provides info of purchases which are owned and not consumed.
I can see documentation of getPurchaseHistory which can give all purchase history of all the purchases in 
<a href=""https://developer.android.com/google/play/billing/billing_reference.html#getPurchaseHistory"" rel=""nofollow noreferrer"">https://developer.android.com/google/play/billing/billing_reference.html#getPurchaseHistory</a></p>

<p>But its api is not present in IInAppBillingService.aidl</p>

<p><a href=""https://github.com/googlesamples/android-play-billing/blob/551a178e52baf60cc6e1f9cb6f40767b8453655a/TrivialDrive/app/src/main/aidl/com/android/vending/billing/IInAppBillingService.aidl"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-billing/blob/551a178e52baf60cc6e1f9cb6f40767b8453655a/TrivialDrive/app/src/main/aidl/com/android/vending/billing/IInAppBillingService.aidl</a></p>
",6339618,,,,,2017-07-06 22:08:26,Why getPurchaseHistory method is not present in IInAppBillingService.aidl even if it is documented?,<android><google-play><google-play-services>,2,0,,,
Android,42216472,1,,,2017,,2,167,"<p>I am working with the CC2650STK SensorTag.</p>

<p>I have downloaded this open source app from GitHub: <a href=""https://github.com/googlesamples/android-BluetoothLeGatt"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-BluetoothLeGatt</a></p>

<p>However, the app does not scan my BLE device and show on the list. If anyone can guide me or help me modify this code so that it can scan for my CC2650STK device. </p>

<p>Your help is appreciated</p>
",7422536,,1319139,,2017-02-14 2:32:39,2017-03-06 4:34:16,Android Code Does not scan BLE device CC2650,<java><android><bluetooth-lowenergy><gatt>,2,2,,,
Android,31345049,1,31388760,,2015,,2,1698,"<p>I'm trying to get the basic autocomplete functionality from <a href=""https://developers.google.com/places/android/autocomplete"" rel=""nofollow"">Google's Places Api</a> working with Xamarin Android.</p>

<p>I'm using version 25.0.0.0 of Xamarin's <a href=""http://components.xamarin.com/view/googleplayservices"" rel=""nofollow"">Google Play Services - Location</a>  lib.</p>

<p>I've managed to get to the point of returning results of a query while following <a href=""https://github.com/googlesamples/android-play-places/blob/master/PlaceComplete/Application/src/main/java/com/example/google/playservices/placecomplete/PlaceAutocompleteAdapter.java"" rel=""nofollow"">this example code</a></p>

<p>This is the Fragment I'm using to test the code</p>

<pre><code>public class PlaceAutocomplete: BaseFragment, IGoogleApiClientOnConnectionFailedListener {
    IGoogleApiClient client;
    public override void OnCreate( Bundle savedInstanceState ) {
        base.OnCreate( savedInstanceState );
        client = new GoogleApiClientBuilder( Activity )
                                            .EnableAutoManage( Activity as BaseFragmentActivity, 0, this )
                                            .AddOnConnectionFailedListener( OnConnectionFailed )
                                            .AddApi( Places.GEO_DATA_API )
                                            .Build();
    }

    public override View OnCreateView( LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState ) {
        Places.GeoDataApi.GetAutocompletePredictions( client, ""cul"",
        new LatLngBounds( new LatLng( 33.515071, -118.796427 ), new LatLng( 34.435985, -117.127371 ) ), null )
        .SetResultCallback&lt;AutocompletePredictionBuffer&gt;( AutocompleteResult );

        return base.OnCreateView( inflater, container, savedInstanceState );
    }

    public void AutocompleteResult( AutocompletePredictionBuffer buffer ) {

        if( !buffer.Status.IsSuccess ) {
            Toast.MakeText( Activity, buffer.Status.StatusMessage, ToastLength.Long ).Show();
            return;
        }

        var a = new List&lt;IAutocompletePrediction&gt;();
        for( var i = 0; i &lt; buffer.Count; i++ ) {
            var item = buffer.Get( i );
            if( item is IAutocompletePrediction ) {
                a.Add( (IAutocompletePrediction) item );
            } else {
                 //all the results go in here
            }
        }

        Toast.MakeText( Activity, a.Count.ToString(), ToastLength.Long ).Show();
    }

    public void OnConnectionFailed( ConnectionResult result ) {

    }
}
</code></pre>

<p>There are 5 returned results from <em>GetAutocompletePredictions</em> method but all of them of type named <strong>com.google.android.gms.location.places.internal.zzb</strong>, cannot be cast to IAutocompletePrediction and I did not find any way to use them.</p>

<p>Did I do something wrong or this part of Xamarin's Google Play library is not fully implemented?</p>
",1014690,,1014690,,2015-07-13 7:40:21,2016-01-21 2:21:49,Xamarin Android Google Places Api AutoComplete broken,<xamarin><xamarin.android><google-places-api>,2,1,,,
Android,44022751,1,,,2017,,2,356,"<p>I am trying to get continuous location updates by running a background service. While I debug the code <strong>onConnected(Bundle b)</strong> is called and location update request is called. But <strong>onLocationChanged(Location location)</strong>  is never called. Below is my code:</p>

<pre><code>    public class LocationUpdateService extends Service implements
        GoogleApiClient.ConnectionCallbacks, GoogleApiClient.OnConnectionFailedListener, LocationListener {


    private GoogleApiClient googleApiClient;
    private LocationRequest mLocationRequest;
    Location mCurrentLocation;

    @Override
    public void onLocationChanged(Location location) {
        mCurrentLocation = location;
        double lat = mCurrentLocation.getLatitude();
        double lng = mCurrentLocation.getLongitude();
    }

    //GoogleApiClient
    @Override
    public void onConnectionFailed(ConnectionResult bundle) {

    }

    @Override
    public void onConnected(Bundle bundle) {
        Log.i(""onConnected"", ""GoogleApiClient"");

        Toast.makeText(this, ""Location  service connected"", Toast.LENGTH_SHORT).show();
        createLocationRequest();
        startLocationUpdate();
    }

    @Override
    public void onConnectionSuspended(int i) {

    }

    //Service
    @Override
    public void onCreate() {
        super.onCreate();
        buildGoogleApiClient();
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {

        return START_STICKY; // run until explicitly stopped.
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    private void startLocationUpdate() {
        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION)
                != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {
            return;
        }
        LocationServices.FusedLocationApi.requestLocationUpdates(
                googleApiClient, mLocationRequest, this);
        mCurrentLocation = LocationServices.FusedLocationApi.getLastLocation(googleApiClient);
    }

    void buildGoogleApiClient() {
        googleApiClient = new GoogleApiClient.Builder(this)
                .addConnectionCallbacks(this)
                .addOnConnectionFailedListener(this)
                .addApi(LocationServices.API)
                .build();
        googleApiClient.connect();
    }

    void createLocationRequest() {
        mLocationRequest = new LocationRequest().create()
                .setInterval(5000)
                .setFastestInterval(5000)
                .setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);
    }
}
</code></pre>

<p>I can't understand where I am making mistake, while I have followed <a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationUpdates"" rel=""nofollow noreferrer"">android docs</a>. I am testing on real device and app has location permissions.</p>

<p>service in menifest:</p>

<pre><code>&lt;service
            android:name="".locations.LocationUpdateService""
            android:enabled=""true""
            android:exported=""false""&gt;&lt;/service&gt;
</code></pre>

<p>Call of service in activity:</p>

<pre><code>startService(new Intent(BaseActivity.this, LocationUpdateService.class));
</code></pre>
",7387039,,7387039,,2017-05-17 11:23:31,2017-05-19 9:55:33,"onLocationChanged never called , GoogleApiClient",<android><google-maps><geolocation><google-api-client>,2,2,,,
Android,28004653,1,28005607,,2015,,2,6708,"<p>I am new to using recyclerview and adapters.  I have the RecyclerView and an Onclick working (thanks to Google: <a href=""https://github.com/googlesamples/android-RecyclerView"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-RecyclerView</a>).  It does have an setOnClickListener which writes to the Log.  But I'm trying to figure out how to remove an item from the list when it is clicked - I can't figure out how to get to the ArrayList which the adapter is using and run notifyItemInserted to update the display. </p>

<p>In reviewing another post (Android RecyclerView addition &amp; removal of items - <a href=""https://stackoverflow.com/questions/26076965/android-recyclerview-addition-removal-of-items"">Android RecyclerView addition &amp; removal of items</a>) it looks like paradite/Jared Burrows were able to get it running.  But some of the code appears to be missing and I was hoping that someone could fill in the holes for me.  (I couldn't comment on this other post to ask the question there).  </p>

<p>For example, I don't see that mItemClickListener is defined anywhere.  I'm also not sure of the connection between the class which extends the RecyclerView.Adapter and the class which extends the RecyclerView.ViewHolder.</p>

<p>Here is my RecyclerView.Adapter:</p>

<pre><code>public class RVAdapter1 extends RecyclerView.Adapter&lt;RVAdapter1.ViewHolder&gt; {
private static final String TAG = ""debug"";
private int itemCounter = 0;

private List&lt;String&gt; feedItemList;

public static class ViewHolder extends RecyclerView.ViewHolder {
    private final TextView textView;

    public ViewHolder(View v) {
        super(v);
        v.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Log.d(TAG, ""Element "" + getPosition() + "" clicked."");
                //feedItemList.remove(getPosition());
               //notifyItemRemoved(getPosition());
            }
        });
        textView = (TextView) v.findViewById(R.id.textView);
    }

    public TextView getTextView() {
        return textView;
    }
}

public RVAdapter1(List&lt;String&gt; dataSet) {
    feedItemList = dataSet;
}

@Override
public ViewHolder onCreateViewHolder(ViewGroup viewGroup, int viewType) {
    View v = LayoutInflater.from(viewGroup.getContext())
            .inflate(R.layout.text_row_item, viewGroup, false);
    return new ViewHolder(v);
}

@Override
public void onBindViewHolder(ViewHolder viewHolder, final int position) {
    Log.d(TAG, ""Element "" + position + "" set."");
    viewHolder.getTextView().setText(String.valueOf(feedItemList.get(position)));
}

@Override
public int getItemCount() {
    return feedItemList.size();
}

public void addItem(int position, String data) {
    feedItemList.add(position, data);
    notifyItemInserted(position);
    Log.d(TAG,""adapter list length="" + feedItemList.size());
}
}    
</code></pre>

<p>I am trying to use the adapter from the other StackOverflow question, but I am unsure of how to connect (or combine?) the two adapters and where the mItemClickListener comes from).</p>

<pre><code>public class ViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener{
public CardView mCardView;
public TextView mTextViewTitle;
public TextView mTextViewContent;
public ImageView mImageViewContentPic;
//......
public ImageView imgViewRemoveIcon;
public ViewHolder(View v) {
    super(v);
    mCardView = (CardView) v.findViewById(R.id.card_view);
    mTextViewTitle = (TextView) v.findViewById(R.id.item_title);
    mTextViewContent = (TextView) v.findViewById(R.id.item_content);
    mImageViewContentPic = (ImageView) v.findViewById(R.id.item_content_pic);
    //......
    imgViewRemoveIcon = (ImageView) v.findViewById(R.id.remove_icon);

    mTextViewContent.setOnClickListener(this);
    imgViewRemoveIcon.setOnClickListener(this);
    v.setOnClickListener(this);
    mTextViewContent.setOnLongClickListener(new View.OnLongClickListener() {
        @Override
        public boolean onLongClick(View view) {
            if (mItemClickListener != null) {
                mItemClickListener.onItemClick(view, getPosition());
            }
            return false;
        }
    });
}

@Override
public void onClick(View v) {
    //Log.d(""View: "", v.toString());
    //Toast.makeText(v.getContext(), mTextViewTitle.getText() + "" position = "" + getPosition(), Toast.LENGTH_SHORT).show();
    if(v.equals(imgViewRemoveIcon)){
        removeAt(getPosition());
    }else if (mItemClickListener != null) {
        mItemClickListener.onItemClick(v, getPosition());
        }
    }
}

public void setOnItemClickListener(final OnItemClickListener mItemClickListener) {
    this.mItemClickListener = mItemClickListener;
}

public void removeAt(int position) {
    mDataset.remove(position);
    notifyItemRemoved(position);
    notifyItemRangeChanged(getPosition, mDataSet.size());
}    
</code></pre>

<p>This may be a trivial question but I certainly would appreciate any help that anyone is willing to offer...  Thanks!</p>
",4465348,,-1,,2017-05-23 12:32:21,2015-01-17 23:44:49,Problems with OnClick to remove item from within Adapter,<android><adapter><android-recyclerview>,2,0,,,
Android,54091648,1,,,2019,,2,230,"<p>My use case is when user start recording video, I need to record video and also process the preview frames for user face inside the frames using Firebase face detection. I have tried to do it following way but some preview is paused.</p>

<p>I am using <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow noreferrer"">googlesamples/android-Camera2Video</a> codebase and I have added following code inside it.</p>

<p>Inside <code>Camera2VideoFragment</code> class:</p>

<pre><code>private ImageReader mYUVImageReader;
private final ImageReader.OnImageAvailableListener mOnYUVImageAvailableListener
            = new ImageReader.OnImageAvailableListener() {

   @Override
   public void onImageAvailable(ImageReader reader) {
        Log.d(Camera2VideoFragment.TAG, ""Bipin - onImageAvailable "");
   }
}
</code></pre>

<p>Inside <code>openCamera</code> method:</p>

<pre><code>mYUVImageReader = ImageReader
                    .newInstance(mPreviewSize.getWidth()/16, mPreviewSize.getHeight()/16,ImageFormat.YUV_420_888, 2);
            mYUVImageReader.setOnImageAvailableListener(
                    mOnYUVImageAvailableListener, mBackgroundHandler);
</code></pre>

<p>Inside <code>startRecording</code> method:</p>

<pre><code>   Surface imageSurface = mYUVImageReader.getSurface();
   surfaces.add(imageSurface);
   mPreviewBuilder.addTarget(imageSurface);
</code></pre>

<p>I have tried to set <code>imageSurface</code> inside startPreview as well but no luck, Facing the same preview still issue. Please provide your input or correct me about what is the best approach for this scenario?</p>

<p>Demo app code here: <a href=""https://github.com/bipinvaylu/Camera2Demo/tree/bipin"" rel=""nofollow noreferrer"">https://github.com/bipinvaylu/Camera2Demo/tree/bipin</a></p>

<p>Updated:[10-Jan-2019]
I have renamed it to mYUVImageReader, Please find details here: 
Init: <a href=""https://github.com/bipinvaylu/Camera2Demo/blob/bipin/app/src/main/java/com/camerademo/Camera2VideoFragment.java#L477"" rel=""nofollow noreferrer"">https://github.com/bipinvaylu/Camera2Demo/blob/bipin/app/src/main/java/com/camerademo/Camera2VideoFragment.java#L477</a>
Adding ImageReaderSurface here: <a href=""https://github.com/bipinvaylu/Camera2Demo/blob/bipin/app/src/main/java/com/camerademo/Camera2VideoFragment.java#L540"" rel=""nofollow noreferrer"">https://github.com/bipinvaylu/Camera2Demo/blob/bipin/app/src/main/java/com/camerademo/Camera2VideoFragment.java#L540</a></p>

<p><em>My main concern is, Does it possible to provid output to the Preview surface (mTextureView.getSurfaceTexture()), Recording (mMediaRecorder.getSurface()) and Continuous Image (mYUVImageReader.getSurface()) simultaneously by using Camera 2 API?</em></p>
",722683,,722683,,2019-01-10 11:49:41,2019-01-10 11:49:41,"Camera 2 API to Preview, Record and Extract the preview frame to Firebase face detection processing simultaneously",<android><face-detection><android-camera2>,2,0,,,
Android,37327891,1,,,2016,,2,4322,"<p>I am trying to test the google mobile vision api, for face detection, so I started with the demos from <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples"" rel=""nofollow noreferrer"">GitHub mobile vision</a>. I tried both apps, FaceTracker and photo-demo, and the same issue rises with downloading the native face detector library. </p>

<p>For Nexus 5x, Galaxy S6 Edge not working, Galaxy S4, Galaxy Alpha is working.</p>

<p>What I see in the logs, when not working is:</p>

<p>For the app:</p>

<pre><code>05-19 17:52:07.301 14909-14909/com.google.android.gms.samples.vision.face.photo W/System: ClassLoader referenced unknown path: /data/app/com.google.android.gms.samples.vision.face.photo-1/lib/arm64
05-19 17:52:07.725 14909-14909/com.google.android.gms.samples.vision.face.photo W/System: ClassLoader referenced unknown path: /data/app/com.google.android.gms.samples.vision.face.photo-1/lib/arm64
05-19 17:52:08.043 14909-14909/com.google.android.gms.samples.vision.face.photo D/ChimeraCfgMgr: Reading stored module config
05-19 17:52:08.068 14909-14909/com.google.android.gms.samples.vision.face.photo W/System: ClassLoader referenced unknown path: /data/user/0/com.google.android.gms/app_chimera/m/00000001/n/arm64-v8a
05-19 17:52:08.077 14909-14909/com.google.android.gms.samples.vision.face.photo D/ChimeraFileApk: Primary ABI of requesting process is arm64-v8a
05-19 17:52:08.079 14909-14909/com.google.android.gms.samples.vision.face.photo D/ChimeraFileApk: Classloading successful. Optimized code found.
05-19 17:52:08.105 14909-14909/com.google.android.gms.samples.vision.face.photo I/FaceDetectorCreatorImpl: Requesting download for vision face detector
05-19 17:52:08.107 14909-14909/com.google.android.gms.samples.vision.face.photo W/FaceDetectorHandle: Native face detector not yet available.  Reverting to no-op detection.
05-19 17:52:08.253 14909-14909/com.google.android.gms.samples.vision.face.photo W/PhotoViewerActivity: Face detector dependencies are not yet available.
05-19 17:52:08.263 14909-14941/com.google.android.gms.samples.vision.face.photo D/OpenGLRenderer: Use EGL_SWAP_BEHAVIOR_PRESERVED: true
05-19 17:52:08.312 14909-14941/com.google.android.gms.samples.vision.face.photo I/Adreno: QUALCOMM build                   : 63c06b2, I8366cd0437
                                                                                          Build Date                       : 12/06/15
                                                                                          OpenGL ES Shader Compiler Version: XE031.05.13.02
                                                                                          Local Branch                     : mybranch17112971
                                                                                          Remote Branch                    : quic/LA.BF64.1.2.9_v2
                                                                                          Remote Branch                    : NONE
                                                                                          Reconstruct Branch               : NOTHING
05-19 17:52:08.317 14909-14941/com.google.android.gms.samples.vision.face.photo I/OpenGLRenderer: Initialized EGL, version 1.4
</code></pre>

<p>After doing some digging in the logs, by applying the vision filter for tags I see:</p>

<pre><code>05-19 17:52:08.124 10421-10526/? I/Vision: Attempting to open download_details.json in com.google.android.gms.vision
05-19 17:52:08.125 10421-10526/? W/Vision: Failed to open download_details.json in com.google.android.gms.vision: android.content.pm.PackageManager$NameNotFoundException: com.google.android.gms.vision
05-19 17:52:08.126 10421-10526/? I/Vision: Attempting to open download_details.json in com.google.android.gms.policy_ccocr_vision
05-19 17:52:08.127 10421-10526/? W/Vision: Failed to open download_details.json in com.google.android.gms.policy_ccocr_vision: android.content.pm.PackageManager$NameNotFoundException: com.google.android.gms.policy_ccocr_vision
05-19 17:52:08.127 10421-10526/? W/Vision: Reading download details from hard-coded Java
05-19 17:52:08.443 10421-10526/? E/Vision: Download Failed: Status{statusCode=Download errored: The download was configured incorrectly., resolution=null}
</code></pre>

<p>Similar questions:</p>

<ol>
<li><a href=""https://stackoverflow.com/questions/32099530/google-vision-barcode-library-not-found"">Google Vision barcode library not found</a></li>
<li><a href=""https://stackoverflow.com/questions/32062803/facedetectorhandle-native-face-detector-not-yet-available-reverting-to-no-op-d"">FaceDetectorHandle Native face detector not yet available. Reverting to no-op detection</a></li>
</ol>

<p>Tried the solution with freeing up space, clearing cache, no result.</p>

<p>What can I do next ? Is it possible to manually download the libraries ? Does anyone have a clear indication why is the library not downloading ?</p>

<p><strong><em>EDIT</em></strong></p>

<p>So it looks like there is an issue with the Mobile Vision api <a href=""https://github.com/googlesamples/android-vision/issues/98"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vision/issues/98</a>. Hope the developers come with a solution soon.</p>

<p><strong><em>EDIT</em></strong></p>

<p>The issue has been resolved by updating the play service library.</p>
",1532642,,-1,,2017-05-23 12:02:05,2018-05-04 17:42:16,Android vision - Face detector dependencies are not yet available,<android><google-play-services><google-vision>,2,6,,,
Android,51192192,1,,,2018,,3,145,"<p>I develop an android app which streams video over <a href=""https://tokbox.com/a"" rel=""nofollow noreferrer"">TokBox</a>. I want to record the streaming video. In order to do this, I tried to use <a href=""https://github.com/googlesamples/android-MediaRecorder"" rel=""nofollow noreferrer"">MediaRecorder</a> sample. It did great job on video recording, however I lost my stream. There are two main java classes, just say A and B. The class B implements <code>PreviewCallback</code>. Here are <code>onPreviewFrame</code> method. If you are interested in TokBox, the class B extends <code>BaseVideoCapturer</code>.</p>

<pre><code>@Override
public void onPreviewFrame(byte[] data, Camera camera) {
    mPreviewBufferLock.lock();
    if (isCaptureRunning) {
        if (data.length == mExpectedFrameSize) {
            // Get the rotation of the camera
            int currentRotation = compensateCameraRotation(mCurrentDisplay
                    .getRotation());
            // Send frame to OpenTok
            provideByteArrayFrame(data, NV21, mCaptureWidth,
                    mCaptureHeight, currentRotation, isFrontCamera());

            // Reuse the video buffer
            camera.addCallbackBuffer(data);
        }
    }
    mPreviewBufferLock.unlock();
}
</code></pre>

<p>The class A is an activity that manages recording. There is a method to start video record and stop after 5 seconds.</p>

<pre><code>public static boolean prepareAndStartMediaRecorder(){
    if(CustomVideoCapturer.isCaptureStarted){
        // BEGIN_INCLUDE (configure_media_recorder)
        mMediaRecorder = new MediaRecorder();
        // Step 1: Unlock and set camera to MediaRecorder
        B.mCamera.unlock();
        mediaRecorder.setCamera(B.mCamera);
        // Step 2: Set sources
        mediaRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
        mediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
        // Step 3: Set a CamcorderProfile (requires API Level 8 or higher)
        mMediaRecorder.setProfile(profile);
        // Step 4: Set output file
        mediaRecorder.setOutputFile(""/sdcard/myvideo.mp4"");
        mediaRecorder.setMaxDuration(60000); // Set max duration 60 sec.
        mediaRecorder.setMaxFileSize(5000000); // Set max file size 5M
        //configure preview
        mediaRecorder.setPreviewDisplay(mPreview.getSurfaceTexture());
        // Step 5: Prepare configured MediaRecorder
        try {
            mediaRecorder.prepare();
        } catch (IllegalStateException e) {
            releaseMediaRecorder();
            return false;
        } catch (IOException e) {
            releaseMediaRecorder();
            return false;
        }
        mediaRecorder.start();
        final Handler handler = new Handler();
        handler.postDelayed(new Runnable() {
            @Override
            public void run() {
                mediaRecorder.stop();  // stop the recording
            }
        }, 5000);
    }
</code></pre>

<p>After recording is started, <code>onPreviewFrame</code> method is not called. Do you have any solution about this problem or another approach to record and stream video at the same time?</p>

<p>Edit 1: I tried to apply this <a href=""https://stackoverflow.com/questions/14412618/android-onpreviewframe-is-not-called"">solution</a>, but it did not work. If you claim that this is the right solution, please inform me.</p>

<p>Edit 2: The archiving API records the streaming media, so it has noisy sometimes. I need to record frames from camera directly in order to get high-quality video.</p>
",8065997,,8065997,,2018-07-07 11:21:20,2018-07-24 10:09:46,How to record video that is already streamed on onPreviewFrame,<android><video-streaming><android-camera><opentok><android-video-record>,2,2,4,,
Android,52477887,1,,,2018,,3,239,"<p>When I config Android Studio 3.3 Canary 11 (gradle 3.3.0 alpha 11) with Kotlin 1.3.0-rc-57 and <code>constraintlayout 2.0</code></p>

<p>I have some problems like this, and AS can not work with some projects, i.e <a href=""https://github.com/googlesamples/android-sunflower/"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-sunflower/</a></p>

<p>Problem: AS can't understand Kotlin code, no auto-complete of codes, etc.....</p>

<p>Not all projects, maybe only the projects with <code>constraintlayout 2.0</code></p>

<p>Error in AS:</p>

<pre><code>com.google.common.util.concurrent.UncheckedExecutionException: java.io.IOException: File format error reading /Users/xxxxx/.gradle/caches/transforms-1/files-1.1/constraintlayout-2.0.0-alpha2.aar/66d32464c2b8004a7b95f523ebd1e95c/R.txt line 1743: 'int[] styleable GradientColor { 0x0101020b, 0x010101a2, 0x010101a3, 0x0101019e, 0x01010512, 0x01010513, 0x010101a4, 0x0101019d, 0x01010510, 0x01010511, 0x01010201, 0x010101a1 }'
    at com.android.utils.concurrency.CacheUtils.getAndUnwrap(CacheUtils.kt:37)
    at com.android.tools.idea.res.ProjectLightResourceClassService.getAarRClasses(ProjectLightResourceClassService.kt:172)
    at com.android.tools.idea.res.ProjectLightResourceClassService.getAarRClasses$default(ProjectLightResourceClassService.kt:169)
    at com.android.tools.idea.res.ProjectLightResourceClassService.getLightRClassesAccessibleFromModule(ProjectLightResourceClassService.kt:122)
</code></pre>

<p><a href=""https://issuetracker.google.com/issues/116402286"" rel=""nofollow noreferrer"">issue</a></p>
",1835650,,1835650,,2018-09-24 11:03:44,2018-09-29 20:49:35,Big problem Android Studio 3.3 Canary 11 (gradle 3.3.0 alpha 11) with Kotlin 1.3.0-rc-57 and constraintlayout 2.0,<android><android-studio><android-gradle>,2,2,2,,
Android,39019899,1,,,2016,,3,1328,"<p>I would like to perform face detection / tracking on a video file (e.g. an MP4 from the users gallery) using the Android Vision <code>FaceDetector</code> API. I can see many examples on using the <a href=""https://developers.google.com/android/reference/com/google/android/gms/vision/CameraSource"" rel=""nofollow noreferrer"">CameraSource</a> class to perform face tracking on the stream coming directly from the camera (e.g. <a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/FaceTracker/app/src/main/java/com/google/android/gms/samples/vision/face/facetracker/FaceTrackerActivity.java"" rel=""nofollow noreferrer"">on the android-vision github</a>), but nothing on video files.</p>

<p>I tried looking at the source code for <code>CameraSource</code> through Android Studio, but it is obfuscated, and I couldn't see the original online. I image there are many commonalities between using the camera and using a file. Presumably I just play the video file on a <code>Surface</code>, and then pass that to a pipeline.</p>

<p>Alternatively I can see that <code>Frame.Builder</code> has functions <code>setImageData</code> and <code>setTimestampMillis</code>. If I was able to read in the video as <code>ByteBuffer</code>, how would I pass that to the <code>FaceDetector</code> API? I guess <a href=""https://stackoverflow.com/questions/33173525/android-vision-face-detection-with-video-stream"">this question</a> is similar, but no answers. Similarly, decode the video into <code>Bitmap</code> frames and pass that to <code>setBitmap</code>.</p>

<p>Ideally I don't want to render the video to the screen, and the processing should happen as fast as the <code>FaceDetector</code> API is capable of.</p>
",1847734,,-1,,2017-05-23 12:17:32,2017-05-31 15:46:07,Android Face Detection API - Stored video file,<android><video><face-detection><android-vision>,2,2,2,,
Android,35054405,1,,,2016,,3,2320,"<p>I have authenticated user using <code>authenticate()</code> method in my app. I was looking through documentation regarding gestures on Finger-Print Sensor but couldn't find any class pertaining to gestures. Is there any class regarding same which detects gestures like long Press,Tap, etc on finger print sensor. </p>

<p>I went through <code>FingerprintManager</code> class &amp; <a href=""https://github.com/googlesamples/android-FingerprintDialog"" rel=""nofollow"">this</a> but couldn't find much info regarding gestures. </p>
",5717212,,,,,2017-03-30 0:28:17,Detect Gestures on Fingerprint Sensor-Android,<android><gesture><android-6.0-marshmallow><fingerprint>,2,0,2,,
Android,48172364,1,48174338,,2018,,3,3458,"<p>I have several entities that you can see below, the problem is how to select nested lists properly when you have more than one level of nesting. If you take a look at Google repository on <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/BasicRxJavaSample"" rel=""nofollow noreferrer"">github</a>, you can find very simple example, but not something complex. As documentation says <a href=""https://developer.android.com/training/data-storage/room/referencing-data.html#understand-no-object-references"" rel=""nofollow noreferrer"">here</a>, Room doesn't allow object references. How to get <code>ResultObject</code> (and how it should look) including all nested lists?</p>

<p>ResultObject should have this info:</p>

<ol>
<li><code>List&lt;Dialog&gt;</code></li>
<li><code>Dialog</code> entity has <code>List&lt;Message&gt;</code>.  </li>
<li><code>Message</code> has <code>List&lt;ImageContent&gt;</code>.</li>
<li><code>ImageContent</code> has <code>List&lt;ImageContentItem&gt;</code></li>
</ol>

<p>Dialog</p>

<pre><code>@Entity(tableName = ""dialog"")
data class Dialog(@PrimaryKey val id String, val title: String)
</code></pre>

<p>Message</p>

<pre><code>@Entity(tableName = ""message"",
        foreignKeys = [(ForeignKey(entity = Dialog::class, parentColumns [""id""], childColumns = [""dialogId""]))])
data class Message(@PrimaryKey val id: String, val dialogId: String)
</code></pre>

<p>ImageContent</p>

<pre><code>@Entity(tableName = ""image_content"",
        foreignKeys = [(ForeignKey(entity = Message::class, parentColumns = [""id""], childColumns = [""messageId""]))])
data class ImageContent(@PrimaryKey val id: String, val messageId: String)
</code></pre>

<p>ImageContentItem</p>

<pre><code>@Entity(tableName = ""image_content_item"",
        foreignKeys = [(ForeignKey(entity = ImageContent::class, parentColumns = [""id""], childColumns = [""imageContentId""]))])
data class ImageContentItem(val imageContentId: String,
                        @PrimaryKey(autoGenerate = true) val id: Long = 1)
</code></pre>

<p>DAO:</p>

<pre><code>@Dao
interface DialogDao {
    @Query(""SELECT * FROM dialog "" +
            ""INNER JOIN message ON message.dialogId = dialog.id "" +
            ""INNER JOIN image_content ON image_content.messageId = message.id "" +
            ""INNER JOIN image_content_item ON image_content_item.imageContentId = image_content.id"")
    fun getDialogAllInformation(): Flowable&lt;List&lt;**ResultObject**&gt;&gt;
}
</code></pre>
",8052090,,2649012,,2018-01-09 16:32:36,2018-02-07 23:23:55,How to query a complex nested objects in Room?,<android><android-room>,2,0,1,,
Android,29253846,1,,,2015,,3,1001,"<p>I have fragment A which includes a SwipeRefresh and a RecycleView.
When user click on an Item in RecycleView, I replace a new Fragment which is B:</p>

<pre><code>mAdapter.setOnItemClickListener(new MyAdapter.OnItemClickListener() {
            @Override
            public void onItemClick(View view, int position) {

                Item tem = mItems.get(position);
                // selected item
                Log.i(TAG, item.getTitle() + "" clicked. Replacing fragment."");

                // We start the fragment transaction here. It is just an ordinary fragment transaction.
                getActivity().getSupportFragmentManager()
                        .beginTransaction()
                        .replace(R.id.content_fragment,
                                FragmentB.newInstance(item,
                                        (int) view.getX(), (int) view.getY(),
                                        view.getWidth(), view.getHeight())
                        )
                                // We push the fragment transaction to back stack. User can go back to the
                                // previous fragment by pressing back button.
                        .addToBackStack(""detail"")
                        .commit();
            }
        });
</code></pre>

<p>There is a problem :</p>

<p>When I start to refresh using SwipeRefresh, and it is still running, I click on an item (as you can see the code above), Fragment B will be replaced <code>under</code> Fragment A in the screen.
I can see Fragment B under my RecycleView in Fragment A! 
I am no longer able to scroll in recycleView since <code>onStop()</code> is called in Fragment A and <code>onCreateView</code> is called in Fragment B.</p>

<p>What could be the reason? do you have any workaround?</p>

<p>Addenda : Crash can be reproduce in google sample as well:</p>

<p><a href=""https://github.com/googlesamples/android-FragmentTransition/"" rel=""nofollow"">https://github.com/googlesamples/android-FragmentTransition/</a></p>
",1315447,,1315447,,2015-03-25 20:42:14,2016-12-21 13:47:01,Replacing Fragment does not work properly while swipeRefresh is running,<android><android-recyclerview><swiperefreshlayout>,2,5,1,,
Android,44560981,1,44646030,,2017,,3,320,"<p>Looking at the following method in Google <a href=""https://github.com/googlesamples/android-testing/blob/master/ui/espresso/IntentsBasicSample/app/src/androidTest/java/com/example/android/testing/espresso/BasicSample/DialerActivityTest.java"" rel=""nofollow noreferrer"">sample for intents</a>:</p>

<pre><code>@Before
public void stubAllExternalIntents() {
    // By default Espresso Intents does not stub any Intents. Stubbing needs to be setup before
    // every test run. In this case all external Intents will be blocked.
    intending(not(isInternal())).respondWith(new ActivityResult(Activity.RESULT_OK, null));
}
</code></pre>

<p>I see that all external intents will be blocked but I was wondering what purpose does this method serve?</p>
",5907514,,1083957,,2017-06-20 7:03:59,2017-06-20 7:03:59,Purpose of stubAllExternalIntents() in Espresso intents testing,<android><testing><android-intent><android-espresso><android-testing>,2,0,1,,
Android,26241916,1,,,2014,,3,484,"<p>I started by looking into a couple of Gists I found on Github: <a href=""https://gist.github.com/lpetre/87a5196d14cf4484f1f2"" rel=""nofollow"">https://gist.github.com/lpetre/87a5196d14cf4484f1f2</a></p>

<p>And this works great on my laptop, however I'm trying to set up Travis-CI to automatically build the release APK and submit it to the Play Store.  The issue that I'm encountering now is on the Travis side, in that I cannot use pip to install the google_api_python_client.</p>

<p>upon that call, I get the following:</p>

<pre><code> Installing collected packages: google-api-python-client, httplib2
  Running setup.py install for google-api-python-client
    error: could not create '/usr/local/lib/python2.7/dist-packages/apiclient': Permission denied
    Complete output from command /usr/bin/python -c ""import setuptools, tokenize;__file__='/tmp/pip_build_travis/google-api-python-client/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))"" install --record /tmp/pip-ctZKCR-record/install-record.txt --single-version-externally-managed --compile:
</code></pre>

<p>So I strayed away from using pip, downloaded the python client libraries on their own, and am now including them in my git repo (under /google_api_upload).</p>

<p>A part of Google's API Upload client library instructions (<a href=""https://github.com/googlesamples/android-play-publisher-api/blob/master/v2/python/README.md"" rel=""nofollow"">https://github.com/googlesamples/android-play-publisher-api/blob/master/v2/python/README.md</a>) say to run ""import apiclient"" in a python console (again, works fine on my laptop, but not travis because I can't start a python session and enter in ""import apiclient"" so far as I've found; it just hangs on the python session).</p>

<p>So then I figured it'd be awesome to just have a Gradle function in my gradle files which calls the API functions, and is called from the travis.yml file; but I don't even know if that's possible.</p>

<p>So any input would help, notably:</p>

<ul>
<li>Did I mess up in my attempt at running pip on travis? Can I sudo to elevate permissions for this (I imagine I can't)</li>
<li>Is there a way to call ""import apiclient"" for python within a single line in the travis.yml file?</li>
<li>Is it possible to have travis call a gradle function which refers to client libraries included in my build?</li>
<li>I've tried to find examples of this end-to-end process, but haven't found any that fit this exact case, do you know of any?</li>
</ul>

<p>Thanks!</p>
",231768,,,,,2014-11-23 12:39:45,Error in Travis trying to submit app to Google's Play Store,<google-api><android-gradle><google-api-java-client><travis-ci><google-play>,2,2,1,,
Android,35629725,1,,,2016,,3,299,"<p>I take example from <a href=""https://github.com/googlesamples/android-play-publisher-api/blob/master/v2/java/src/com/google/play/developerapi/samples/BasicUploadApk.java"" rel=""nofollow"">GitHub</a>.
It works fine, but I need to upload obb file with my apk.</p>

<p>Part of my code:</p>

<pre><code>        AndroidPublisher.Edits.Insert editRequest = edits.insert(bundleID, null);
        AppEdit edit = editRequest.execute();
        final String editId = edit.getId();
        final AbstractInputStreamContent apkFile = new FileContent(""application/vnd.android.package-archive"", new File(apkPath));

        AndroidPublisher.Edits.Apks.Upload uploadRequest = edits.apks().upload(bundleID, editId, apkFile);

        Apk apk = uploadRequest.execute();

        List&lt;Integer&gt; apkVersionCodes = new ArrayList&lt;&gt;();
        apkVersionCodes.add(apk.getVersionCode());
        AndroidPublisher.Edits.Tracks.Update updateTrackRequest = edits.tracks().update(bundleID, editId, TRACK_ALPHA, new Track().setVersionCodes(apkVersionCodes));
        updateTrackRequest.execute();
        // Commit changes for edit.
        AndroidPublisher.Edits.Commit commitRequest = edits.commit(bundleID, editId);
        commitRequest.execute();
</code></pre>

<p>How can I do it?</p>
",3882388,,,,,2017-05-20 4:49:38,How to upload obb file to Google Play via Android Publisher Java API v2,<java><upload><google-play-developer-api>,2,0,1,,
Android,42403890,1,42426052,,2017,,3,1782,"<p>Google just launch <a href=""https://developers.google.com/android-publisher/voided-purchases"" rel=""nofollow noreferrer"">Voided Purchases API</a> </p>

<blockquote>
  <p>The Google Play Voided Purchases API allows you to revoke access to in-app products that are associated with purchases that a user has voided. The user can void a purchase in the following ways:</p>
  
  <ul>
  <li>The user requests a refund for their order.</li>
  <li>The user cancels their order.</li>
  <li>An order is charged back.</li>
  </ul>
</blockquote>

<p>But, I am confused with the use case.</p>

<p>Currently, I have an app with non consumable in-app purchase item (One-time purchase).</p>

<p>Whenever my app starts, I will check whether user has purchased the item, by using the following code.</p>

<p><a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample/MainActivity.java#L243"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample/MainActivity.java#L243</a></p>

<p>I expect <code>inventory.getPurchase</code> will return null during next app startup, if user has decided to cancel their purchase order.</p>

<p>So, how does <code>Voided Purchases API</code> fit in ""user has decided to cancel their purchase order"" case? </p>

<p>I thought by using <code>onQueryInventoryFinished</code>, we can determine what item is currently owned by user?</p>
",72437,,62576,,2017-02-22 23:01:13,2017-02-23 20:58:32,What is the use case of new Voided Purchases API,<android>,2,0,1,,
Android,45630903,1,,,2017,,3,545,"<p>I have been trying to elevate an internal Demo App to Device Owner on my <strong>rooted</strong> S8 and keep having problems.</p>

<p>Ways I have tried:</p>

<p>1) <strong>NFC provisioning</strong> (as explained <a href=""https://github.com/googlesamples/android-NfcProvisioning"" rel=""nofollow noreferrer"">here</a> )</p>

<p>When using NFC with Android Bean to set the Device Owner the S8 shows a ""Cannot create working profile due to the security guidelines of your device""-error</p>

<p>2) <strong>Adb provisioning</strong> (from console):</p>

<p>When using </p>

<pre><code>dpm set-device-owner my/app/namespace/.DeviceAdmin
</code></pre>

<p>in a windows console I get the following error</p>

<pre><code>java.lang.SecurityException: Neither user 2000 nor current process has com.samsung.android.knox.permission.KNOX_PROXY_ADMIN_INTERNAL.,com.sec.enterprise.permission.MDM_PROXY_ADMIN_INTERNAL
        at android.os.Parcel.readException(Parcel.java:1693)
        at android.os.Parcel.readException(Parcel.java:1646)
        at android.app.admin.IDevicePolicyManager$Stub$Proxy.setActiveAdmin(IDevicePolicyManager.java:5825)
        at com.android.commands.dpm.Dpm.runSetDeviceOwner(Dpm.java:145)
        at com.android.commands.dpm.Dpm.onRun(Dpm.java:96)
        at com.android.internal.os.BaseCommand.run(BaseCommand.java:51)
        at com.android.commands.dpm.Dpm.main(Dpm.java:41)
        at com.android.internal.os.RuntimeInit.nativeFinishInit(Native Method)
        at com.android.internal.os.RuntimeInit.main(RuntimeInit.java:307)
</code></pre>

<p>Adding the missing permissions to my manifest did not change anything.</p>

<p>3) <strong>Create xml-file manually</strong> (as explained <a href=""https://stackoverflow.com/questions/21183328/how-to-make-my-app-a-device-owner/27909315#answer-26839548"">here</a> )</p>

<p>In this case I can create the xml in the right folder, but when I restart the phone the file gets deleted and my app is not registered as Device Owner</p>

<p>Are there any more ways I could try or does anyone know where the problem is? </p>
",3840288,,3840288,,2017-08-11 11:11:35,2017-10-12 11:10:20,Device Owner on rooted Galaxy S8,<android><device-admin><samsung-knox>,2,0,1,,
Android,46646744,1,54328498,,2017,,3,620,"<p>I'm using <code>Recyclerview</code> inside a <code>Fragment</code> Following <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp/"" rel=""nofollow noreferrer"">Google's sample of MVP</a> Android architecture and I tried to make the <code>View</code> part passive as possible following <a href=""https://android.jlelse.eu/recyclerview-in-mvp-passive-views-approach-8dd74633158"" rel=""nofollow noreferrer"">this article</a> , which makes the whole <code>Recyclerview</code> <code>Adapter</code> passive of the Data Models and the presenter handles it.</p>

<p><strong>Here is my code of the Fragment:</strong></p>

<pre><code>class OrderHistoryFragment : Fragment(), OrderHistoryContract.View {


    lateinit var mPresenter: OrderHistoryContract.Presenter
    lateinit var rvOrderHistory: RecyclerView
    lateinit var  orderHistoryAdapter : OrderHistoryAdapter


    override fun onCreateView(inflater: LayoutInflater?, container: ViewGroup?,
                              savedInstanceState: Bundle?): View? {
        val root = inflater!!.inflate(R.layout.order_history_fragment, container, false)
        rvOrderHistory = root.findViewById&lt;RecyclerView&gt;(R.id.rvOrderHistory)
        rvOrderHistory.layoutManager = LinearLayoutManager(context, LinearLayout.VERTICAL, false)
         orderHistoryAdapter = OrderHistoryAdapter(mPresenter, object : HistoryItemListener {
            override fun onReorder(orderHistory: OrderHistory) {

            }

            override fun onOpenOrder(orderHistory: OrderHistory) {
                val orderIntent = Intent(activity, OrderDetailActivity::class.java)
                orderIntent.putExtra(""orderId"", orderHistory.id)
                startActivity(orderIntent)

            }
        })
        rvOrderHistory.adapter = orderHistoryAdapter


        return root
    }



    override fun onResume() {
        super.onResume()
        mPresenter.start()

    }

    override fun setPresenter(presenter: OrderHistoryContract.Presenter) {
        mPresenter = checkNotNull&lt;OrderHistoryContract.Presenter&gt;(presenter)

    }


    override fun showLoadingIndicator(load: Boolean?) {


    }


    override fun updateOrdersAdapter() {

        orderHistoryAdapter.notifyDataSetChanged()


    }

    override fun showSnackBar(Message: String) {
        val parentLayout = activity.findViewById&lt;View&gt;(android.R.id.content)
        val snackBar = Snackbar
                .make(parentLayout, Message, Snackbar.LENGTH_INDEFINITE)
        snackBar.setAction(""Dismiss"") { snackBar.dismiss() }
        snackBar.setActionTextColor(Color.RED)
        snackBar.show()

    }


    interface HistoryItemListener {

        fun onReorder(orderHistory: OrderHistory)

        fun onOpenOrder(orderHistory: OrderHistory)

    }

    companion object {

        fun newInstance(): OrderHistoryFragment {

            return OrderHistoryFragment()
        }
    }

    fun OrderHistoryFragment() {

    }

}
</code></pre>

<p><strong>And this is my <code>RecyclerView</code> Adapters code</strong></p>

<pre><code>class OrderHistoryAdapter(internal var orderHistoryPresenter: OrderHistoryContract.Presenter, private val listener: OrderHistoryFragment.HistoryItemListener) : RecyclerView.Adapter&lt;OrderHistoryAdapter.ViewHolder&gt;() {


    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {
        val view = LayoutInflater.from(parent.context)
                .inflate(R.layout.order_history_item, parent, false)
        return ViewHolder(view)

    }

    override fun onBindViewHolder(holder: ViewHolder, position: Int) {
        orderHistoryPresenter.onBindOrdersRow(position, holder)
        holder.bReOrder!!.setOnClickListener { v -&gt; listener.onReorder(orderHistoryPresenter.getOrderHistoryItem(position)) }
        holder.cvOrderItem!!.setOnClickListener { v -&gt; listener.onOpenOrder(orderHistoryPresenter.getOrderHistoryItem(position)) }


    }

    override fun getItemId(position: Int): Long {
        return position.toLong()
    }

    override fun getItemCount(): Int {
        return orderHistoryPresenter.getOrdersCount()
    }


    class ViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView), OrderHistoryContract.orderRowView {
        internal var ivOrderVendor: ImageView? = null
        internal var tvOrderId: TextView? = null
        internal var tvOrderItems: TextView? = null
        internal var tvOrderDate: TextView? = null
        internal var tvOrderPrice: TextView? = null
        internal var bReOrder: Button? = null
        internal var cvOrderItem: CardView? = null

        init {
            ivOrderVendor = itemView.findViewById&lt;ImageView&gt;(R.id.ivOrderVendor)
            tvOrderId = itemView.findViewById&lt;TextView&gt;(R.id.tvOrderId)
            tvOrderItems = itemView.findViewById&lt;TextView&gt;(R.id.tvOrderItems)
            tvOrderDate = itemView.findViewById&lt;TextView&gt;(R.id.tvOrderDate)
            tvOrderPrice = itemView.findViewById&lt;TextView&gt;(R.id.tvOrderPrice)
            bReOrder = itemView.findViewById&lt;Button&gt;(R.id.bReOrder)
            cvOrderItem = itemView.findViewById&lt;CardView&gt;(R.id.cvOrderItem)

        }

        override fun setOrderImage(url: String) {
            Glide.with(itemView.context).load(url).into(ivOrderVendor!!)


        }

        override fun setOrderDate(orderDate: String) {
            tvOrderDate!!.text = orderDate


        }

        override fun setOrderId(orderId: String) {
            tvOrderId!!.text = orderId


        }

        override fun setOrderItems(orderItems: ArrayList&lt;String&gt;) {
            val stringBuilder = StringBuilder()
            for (item in orderItems) {
                stringBuilder.append(item)
            }
            tvOrderItems!!.text = stringBuilder.toString()


        }

        override fun setOrderPrice(orderPrice: String) {
            tvOrderPrice!!.text = R.string.price.toString() + "" "" + orderPrice + "" "" + R.string.egp

        }
    }


}
</code></pre>

<p><strong>And Here is code of the presenter which handles the <code>Adapter</code> data and it's binding to the <code>ViewHolder</code></strong> </p>

<pre><code>class OrderHistoryPresenter internal constructor(mDataRepository: DataRepository, mOrdeHistoryView: OrderHistoryContract.View) : OrderHistoryContract.Presenter {


    private val mDataRepository: DataRepository
    //refrence of the View to trigger the functions after proccessing the task
    private val mOrdeHistoryView: OrderHistoryContract.View
    private var orderHistoryItems = ArrayList&lt;OrderHistory&gt;()


    init {
        this.mDataRepository = checkNotNull(mDataRepository, ""tasksRepository cannot be null"")
        this.mOrdeHistoryView = checkNotNull&lt;OrderHistoryContract.View&gt;(mOrdeHistoryView, ""tasksView cannot be null!"")

        mOrdeHistoryView.setPresenter(this)
    }


    override fun start() {
        mOrdeHistoryView.showLoadingIndicator(true)
        mDataRepository.getCurrentUser(object : LocalDataSource.userRequestCallback {
            override fun onUserRequestSuccess(botitUser: BotitUser) {
                val urlParams = HashMap&lt;String, String&gt;()
                urlParams.put(Endpoints.USER_ID_KEY, botitUser.userId!!)
                val url = Endpoints.getUrl(Endpoints.urls.ORDER_HISTORY, urlParams)
                mDataRepository.buildEndPointRequest(url, "" "", Endpoints.requestsType.GET, object : EndpointDataSource.RequestCallback {
                    override fun onRequestSuccess(Body: String) {
                        try {
                            mOrdeHistoryView.showLoadingIndicator(false)
                            orderHistoryItems = JSONParser.parseData(JSONParser.parsers.ORDER_HISTORY, JSONObject(Body)) as ArrayList&lt;OrderHistory&gt;
                            mOrdeHistoryView.updateOrdersAdapter()
                        } catch (e: JSONException) {
                            e.printStackTrace()
                        }

                    }

                    override fun onRequestError(Body: String) {
                        mOrdeHistoryView.showLoadingIndicator(false)
                        mOrdeHistoryView.showSnackBar(""Cannot load data"")

                    }
                })

            }

            override fun onUserRequestError(Body: String) {

            }
        })
    }


    override fun refreshData() {


    }

    override fun getOrdersCount(): Int {

            return orderHistoryItems.size


    }

    override fun onBindOrdersRow(position: Int, orderViewHolder: OrderHistoryContract.orderRowView) {
        if (orderHistoryItems.isNotEmpty()) {
            val orderHistory = orderHistoryItems[position]
//            orderViewHolder.setOrderDate(orderHistory.orderDate!!)
            orderViewHolder.setOrderId(orderHistory.orderId!!)
            orderViewHolder.setOrderImage(orderHistory.orderImage!!)
            orderViewHolder.setOrderItems(orderHistory.orderItems)
            orderViewHolder.setOrderPrice(orderHistory.orderPrice!!)
        }


    }

    override fun getOrderHistoryItem(position: Int): OrderHistory {
        return orderHistoryItems[position]
    }

    override fun actionReOrder(ordreId: String) {


    }


}
</code></pre>

<p><strong>Here is the <code>Fragment</code> XML</strong> </p>

<pre><code>&lt;android.support.v7.widget.RecyclerView android:layout_width=""match_parent""
    xmlns:app=""http://schemas.android.com/apk/res-auto""
    android:id=""@+id/rvOrderHistory""
    android:layout_height=""match_parent""
    xmlns:android=""http://schemas.android.com/apk/res/android""&gt;

        &lt;/android.support.v7.widget.RecyclerView&gt;
</code></pre>

<p>and Here is the RecyclerView Item XML order_history_item.xml</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;android.support.v7.widget.CardView xmlns:android=""http://schemas.android.com/apk/res/android""
    xmlns:app=""http://schemas.android.com/apk/res-auto""
    xmlns:tools=""http://schemas.android.com/tools""
    android:layout_width=""match_parent""
    android:layout_height=""wrap_content""
    android:id=""@+id/cvOrderItem""
    android:layout_margin=""4dp""
    android:orientation=""vertical""&gt;

    &lt;android.support.constraint.ConstraintLayout xmlns:android=""http://schemas.android.com/apk/res/android""
        xmlns:app=""http://schemas.android.com/apk/res-auto""
        xmlns:tools=""http://schemas.android.com/tools""
        android:layout_width=""match_parent""
        android:layout_height=""match_parent""
        android:orientation=""vertical""
        android:padding=""8dp""&gt;


        &lt;ImageView
            android:id=""@+id/ivOrderVendor""
            android:layout_width=""60dp""
            android:layout_height=""60dp""
            android:layout_marginEnd=""8dp""
            android:layout_marginLeft=""8dp""
            android:layout_marginRight=""8dp""
            android:layout_marginStart=""8dp""
            android:layout_marginTop=""8dp""
            app:layout_constraintHorizontal_bias=""0.0""
            app:layout_constraintLeft_toLeftOf=""parent""
            app:layout_constraintRight_toRightOf=""parent""
            app:layout_constraintTop_toTopOf=""parent""
            app:srcCompat=""@drawable/mac"" /&gt;

        &lt;TextView
            android:id=""@+id/tvOrderId""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_marginEnd=""8dp""
            android:layout_marginLeft=""8dp""
            android:layout_marginRight=""8dp""
            android:layout_marginStart=""8dp""
            android:layout_marginTop=""8dp""
            android:text=""Order #2123""
            android:textAppearance=""@style/TextAppearance.AppCompat.Body2""
            app:layout_constraintHorizontal_bias=""0.0""
            app:layout_constraintLeft_toRightOf=""@+id/ivOrderVendor""
            app:layout_constraintRight_toRightOf=""parent""
            app:layout_constraintTop_toTopOf=""parent"" /&gt;

        &lt;TextView
            android:id=""@+id/tvOrderItems""
            android:layout_width=""242dp""
            android:layout_height=""35dp""
            android:layout_marginEnd=""8dp""
            android:layout_marginStart=""8dp""
            android:text=""MacDonalds: Big Mac Beef, Big Tasty Beef. El Ezaby: Signal 2, Pantene Shampoo""
            android:textAppearance=""@style/TextAppearance.AppCompat.Small""
            android:layout_marginRight=""8dp""
            app:layout_constraintRight_toRightOf=""parent""
            android:layout_marginTop=""8dp""
            app:layout_constraintTop_toBottomOf=""@+id/tvOrderId""
            app:layout_constraintLeft_toRightOf=""@+id/ivOrderVendor""
            android:layout_marginLeft=""8dp""
            app:layout_constraintHorizontal_bias=""0.0"" /&gt;

        &lt;TextView
            android:id=""@+id/tvOrderDate""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_marginBottom=""8dp""
            android:layout_marginEnd=""16dp""
            android:layout_marginRight=""16dp""
            android:layout_marginTop=""8dp""
            android:text=""03:22 PM 23/2/2017""
            app:layout_constraintBottom_toTopOf=""@+id/tvOrderItems""
            app:layout_constraintRight_toRightOf=""parent""
            app:layout_constraintTop_toTopOf=""parent""
            app:layout_constraintVertical_bias=""0.0""
            android:layout_marginLeft=""8dp""
            app:layout_constraintLeft_toLeftOf=""parent""
            app:layout_constraintHorizontal_bias=""1.0"" /&gt;

        &lt;TextView
            android:id=""@+id/tvOrderPrice""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_marginEnd=""8dp""
            android:layout_marginLeft=""8dp""
            android:layout_marginRight=""8dp""
            android:layout_marginStart=""8dp""
            android:layout_marginTop=""16dp""
            android:text=""Price: 225.50 LE""
            android:textAppearance=""@style/TextAppearance.AppCompat.Body2""
            app:layout_constraintHorizontal_bias=""0.0""
            app:layout_constraintLeft_toLeftOf=""parent""
            app:layout_constraintRight_toRightOf=""parent""
            app:layout_constraintTop_toBottomOf=""@+id/tvOrderItems"" /&gt;

        &lt;Button
            android:id=""@+id/bReOrder""
            android:layout_width=""wrap_content""
            android:layout_height=""35dp""
            android:layout_margin=""4dp""
            android:background=""@drawable/chip_accent""
            android:foreground=""?attr/selectableItemBackground""
            android:orientation=""vertical""
            android:padding=""8dp""
            android:text=""Order Again""
            android:textAllCaps=""false""
            android:textColor=""@color/colorAccent""
            android:textSize=""15sp""
            app:layout_constraintHorizontal_bias=""0.937""
            app:layout_constraintLeft_toRightOf=""@+id/tvOrderPrice""
            app:layout_constraintRight_toRightOf=""parent""
            app:layout_constraintTop_toBottomOf=""@+id/tvOrderItems""
            tools:layout_editor_absoluteY=""74dp"" /&gt;
    &lt;/android.support.constraint.ConstraintLayout&gt;
&lt;/android.support.v7.widget.CardView&gt;
</code></pre>

<p>The issue is that when I start the <code>Activity</code> showing the <code>Fragment</code>, the <code>RecyclerView</code> doesn't show the Item. It only appears if I scrolled the empty <code>RecyclerView</code> or by leaving the App on the foreground and go back to it again.</p>

<p>At the initialization the data of the <code>Adapter</code> is empty but <code>onResume()</code> I make a request which updates the data at the Presenter, Then I <code>notifyDataChange()</code> on the <code>Adapter</code> but nothing updates.</p>

<p>When I debugged I found that <code>onBindViewHolder()</code> isn't called after <code>notifyDataChange()</code> on the Adapter so i don't know why the <code>notifyDataChange()</code> doesn't notify the <code>Adapter</code> that the data is changed.</p>

<p>Anyone has an idea or any solution that might fix this issue?</p>
",4614550,,5223744,,2017-10-09 12:52:39,2019-01-23 13:34:20,RecyclerView Items doesn't appear until i scroll it,<android><android-recyclerview><kotlin><mvp><android-constraintlayout>,2,2,,,
Android,38034005,1,44012305,,2016,,3,445,"<p>I'm currently developing an app and have the following issue.</p>

<p>While using NFC for device owner provisioning, I would like to send a string, which would be used by the new device owner app.</p>

<p>I'm aware of the standard MIME properties for device owner provisioning, found <a href=""http://Properties%20properties%20=%20new%20Properties();%20%20%20%20%20%20%20%20%20%20%20%20%20properties.put(%22name%22,%20deviceName);%20%20%20%20%20%20%20%20%20%20%20%20%20//put%20token%20%20%20%20%20%20%20%20%20%20%20%20%20properties.put(DevicePolicyManager.EXTRA_PROVISIONING_LOCAL_TIME,%20localTime);%20%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20properties.store(stream,%20%22Staffbravo%20NFC%20Provisioning%22);%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ndefMessage%20=%20new%20NdefMessage(new%20NdefRecord[]%7BNdefRecord.createMime(DevicePolicyManager.MIME_TYPE_PROVISIONING_NFC,%20stream.toByteArray())%7D);%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20(IOException%20e)%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Log.e(getTag(),%20e.getMessage());%20%20%20%20%20%20%20%20%20%20%20%20%20%7D"" rel=""nofollow noreferrer"">here</a></p>

<p>Here's a snippet that can give you a better visual of my issue. Notice the ""myCustomValue"" property.</p>

<pre><code>Properties properties = new Properties();
properties.put(""myCustomValue"", value);
properties.put(DevicePolicyManager.EXTRA_PROVISIONING_DEVICE_ADMIN_PACKAGE_NAME, ""com.example.some.app"");
try {                    
    properties.store(stream, ""NFC Provisioning"");            
    ndefMessage = new NdefMessage(new NdefRecord[{NdefRecord.createMime(DevicePolicyManager.MIME_TYPE_PROVISIONING_NFC, stream.toByteArray())});
} catch (IOException e) {                         

}
</code></pre>

<p>This snippet lies inside</p>

<pre><code>public NdefMessage createNdefMessage(NfcEvent event)
</code></pre>

<p>and you can find a template <a href=""https://github.com/googlesamples/android-NfcProvisioning/blob/master/Application/src/main/java/com/example/android/nfcprovisioning/NfcProvisioningFragment.java"" rel=""nofollow noreferrer"">here</a></p>

<p>In case this is possible, I also would like to know how to retrieve that string value as soon as the provisioned app has started.</p>
",6513648,,1841194,,2018-06-02 5:25:00,2018-06-02 5:25:00,Android NFC device owner provisioning: send custom properties. Is it possible?,<java><android><provisioning><nfs>,2,0,,,
Android,31229953,1,,,2015,,3,2394,"<p>In my android application, I need to get each frame that is returned by the  android.hardware.camera2, make some processing with it's data and only then display it on the surfacetexture.
This question is similar to mine, but it didn't help me:
<a href=""https://stackoverflow.com/questions/25462277/camera-preview-image-data-processing-with-android-l-and-camera2-api"">Camera preview image data processing with Android L and Camera2 API</a></p>

<p>I've tried to get the frame from here (as suggested in the answer to the question):</p>

<pre><code>private final ImageReader.OnImageAvailableListener mOnImageAvailableListener
            = new ImageReader.OnImageAvailableListener() {

        @Override
        public void onImageAvailable(ImageReader reader) {

            Log.d(""Img"", ""onImageAvailable"");
            mBackgroundHandler.post(new ImageSaver(reader.acquireNextImage(), mFile));
        }

    };
</code></pre>

<p>This was not useful, as the callback is called only after the user performed capture of image. And I don't need it only on capture, I need to get each frame that is sent to the camerapreview surface.
I wonder, maybe the farme can be taken here (from the texture):</p>

<pre><code>public void onSurfaceTextureUpdated(SurfaceTexture texture) {
            Log.d(""Img"", ""onSurfaceTextureUpdated"");

        }
</code></pre>

<p>If yes, how?</p>

<p>I'm using this sample from google, as a basis: </p>

<p><a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a></p>
",2924714,,-1,,2017-05-23 11:44:38,2015-09-15 5:16:41,get data of each android.hardware.camera2 frame before it is displayed on the surfacetexture,<android><image-processing><android-camera><android-5.0-lollipop>,2,2,,,
Android,36265659,1,,,2016,,3,3663,"<p>I'm using the Mobile vision api's face tracking example and i'm trying to take picture with tapping on the screen. Firstly i wanted to take any picture on the screen with button and i tryed this code but it failed. I look at the barcode reader example and there is tap method but i couldn't succeed. What approach that i should use this case?</p>

<p><a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker"" rel=""nofollow"">pure FaceTracking github code</a></p>

<pre><code>private void takeImage() {
    camera.takePicture(null, null, new PictureCallback() {

        private File imageFile;

        @Override
        public void onPictureTaken(byte[] data, Camera camera) {
            try {
                // convert byte array into bitmap
                Bitmap loadedImage = null;
                Bitmap rotatedBitmap = null;
                loadedImage = BitmapFactory.decodeByteArray(data, 0,
                        data.length);

                // rotate Image
                Matrix rotateMatrix = new Matrix();
                rotateMatrix.postRotate(rotation);
                rotatedBitmap = Bitmap.createBitmap(loadedImage, 0, 0,
                        loadedImage.getWidth(), loadedImage.getHeight(),
                        rotateMatrix, false);
                String state = Environment.getExternalStorageState();
                File folder = null;
                if (state.contains(Environment.MEDIA_MOUNTED)) {
                    folder = new File(Environment
                            .getExternalStorageDirectory() + ""/Demo"");
                } else {
                    folder = new File(Environment
                            .getExternalStorageDirectory() + ""/Demo"");
                }

                boolean success = true;
                if (!folder.exists()) {
                    success = folder.mkdirs();
                }
                if (success) {
                    java.util.Date date = new java.util.Date();
                    imageFile = new File(folder.getAbsolutePath()
                            + File.separator
                            + new Timestamp(date.getTime()).toString()
                            + ""Image.jpg"");

                    imageFile.createNewFile();
                } else {
                    Toast.makeText(getBaseContext(), ""Image Not saved"",
                            Toast.LENGTH_SHORT).show();
                    return;
                }

                ByteArrayOutputStream ostream = new ByteArrayOutputStream();

                // save image into gallery
                rotatedBitmap.compress(CompressFormat.JPEG, 100, ostream);

                FileOutputStream fout = new FileOutputStream(imageFile);
                fout.write(ostream.toByteArray());
                fout.close();
                ContentValues values = new ContentValues();

                values.put(Images.Media.DATE_TAKEN,
                        System.currentTimeMillis());
                values.put(Images.Media.MIME_TYPE, ""image/jpeg"");
                values.put(MediaStore.MediaColumns.DATA,
                        imageFile.getAbsolutePath());

                CameraDemoActivity.this.getContentResolver().insert(
                        Images.Media.EXTERNAL_CONTENT_URI, values);

            } catch (Exception e) {
                e.printStackTrace();
            }

        }
    });
}

@Override
public void onClick(View v) {
    case R.id.captureImage:
        takeImage();
        break;
    default:
        break;
    }
}
</code></pre>
",6064497,,6064497,,2016-03-28 20:01:34,2016-06-09 11:10:44,How Capture Picture while mobile vision api - face tracking,<android><google-vision>,2,2,,,
Android,31984622,1,31993813,,2015,,3,7190,"<p>I built my own camera app with the camera2 API. I started with the sample ""<a href=""https://github.com/googlesamples/android-Camera2Raw"" rel=""nofollow"">camera2Raw</a>"" and I added YUV_420_888 support instead of JPEG. But now I am wondering how I save the images in the ImageSaver!?</p>

<p>Here is my code of the run method:</p>

<pre><code>@Override
    public void run() {
        boolean success = false;
        int format = mImage.getFormat();
        switch(format) {
            case ImageFormat.RAW_SENSOR:{
                DngCreator dngCreator = new DngCreator(mCharacteristics, mCaptureResult);
                FileOutputStream output = null;
                try {
                    output = new FileOutputStream(mFile);
                    dngCreator.writeImage(output, mImage);
                    success = true;
                } catch (IOException e) {
                    e.printStackTrace();
                } finally {
                    mImage.close();
                    closeOutput(output);
                }
                break;
            }
            case ImageFormat.YUV_420_888:{
                ByteBuffer buffer = mImage.getPlanes()[0].getBuffer();
                byte[] bytes = new byte[buffer.remaining()];
                buffer.get(bytes);
                FileOutputStream output = null;
                try {
                    output = new FileOutputStream(mFile);
                    output.write(bytes);
                    success = true;
                } catch (IOException e) {
                    e.printStackTrace();
                } finally {
                    mImage.close();
                    closeOutput(output);
                }
                break;
            }
            default:
                Log.e(TAG, ""Cannot save image, unexpected image format:"" + format);

        }
        // Decrement reference count to allow ImageReader to be closed to free up resources.
        mReader.close();

        // If saving the file succeeded, update MediaStore.
        if (success) {
            MediaScannerConnection.scanFile(mContext, new String[] { mFile.getPath()},
            /*mimeTypes*/ null, new MediaScannerConnection.MediaScannerConnectionClient() {
                @Override
                public void onMediaScannerConnected() {
                    // Do nothing
                }

                @Override
                public void onScanCompleted(String path, Uri uri) {
                    Log.i(TAG, ""Scanned "" + path + "":"");
                    Log.i(TAG, ""-&gt; uri="" + uri);
                }
            });
        }
    }
</code></pre>

<p>I tried to save the YUV images like a JPEG, but that way I only get one plane and the saved data don't make any sense to me...</p>

<p>What is the correct way to save a YUV image? Convert it to RGB (what is the sense of YUV then?)? Or with YuvImage class?</p>
",5084931,,5084931,,2015-08-13 9:46:53,2015-08-14 15:51:11,How to save a YUV_420_888 image?,<android><android-camera>,2,0,,,
Android,41985926,1,,,2017,,3,1480,"<p>I am using the <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">sample code</a> for Camera2, and I was wondering how I can make the preview and captured image in full screen? <a href=""https://stackoverflow.com/questions/19577299/android-camera-preview-stretched?rq=1"">This</a> SO question seems to solve it in video mode, but I can't find any solution for image captures. The sample fragment has a blue area at the bottom and also has the status bas. I want to hide both of these and use the entire screen to show the preview, and also capture the image in full screen size.</p>
",3052244,,-1,,2017-05-23 12:34:15,2018-02-26 20:33:31,Camera2 full screen preview and image capture,<android><camera>,2,0,,,
Android,48781673,1,48817039,,2018,,3,1174,"<p>As moving from beginner level coding and deeping into Android apps developing, patterns and architecture, to make my code cleaner and better. I met with a question, that I couldn't find a proper answer to.<br>
And the question is: what is the <strong>proper</strong> way of using MVP pattern and Fragment? Should each layout have his own Activity, that will host Presenter and Fragment(as I heard putting Presenter to the Fragment itself is not the best practice), or it's better to have 1 hosting Activity that will host all Fragments and just replace them when needed, but create additional layer to manage Presenters switching? And things seem to become much harder when it comes to Tablet layouts or Tabs.<br>
<a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">Google samples</a> contains an example of using 1 Activity -> 1 Fragment, but I'm not sure if this is the best way, 'cause creating new Activity makes app 'blink'.</p>
",9358655,,9358655,,2018-02-14 7:40:58,2018-02-16 11:06:52,Proper way of using Fragments and MVP pattern,<android><android-fragments><mvp><android-mvp>,2,2,,,
Android,52235986,1,52236076,,2018,,3,663,"<p>How many methods will I have to make for Room migration if I have db version 10?</p>

<p>I looked into the following example <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/PersistenceMigrationsSample/app/src/room3/java/com/example/android/persistence/migrations/UsersDatabase.java"" rel=""nofollow noreferrer"" title=""Google Persistence Migration Sample"">Google Persistence Migration Sample</a></p>

<p>and I found <em>Migration</em> varargs based on probable scenarios for database version 4.</p>

<pre><code>public static UsersDatabase getInstance(Context context) {
    synchronized (sLock) {
        if (INSTANCE == null) {
            INSTANCE = Room.databaseBuilder(context.getApplicationContext(),
                    UsersDatabase.class, ""Sample.db"") 
                    .addMigrations(MIGRATION_1_2, MIGRATION_2_3, MIGRATION_3_4, MIGRATION_1_4)
                    .build(); 
        } 
        return INSTANCE;
    } 
} 
</code></pre>

<p>My question is, Suppose I am using Room from the db v1 and by time my app reaches to db v10, how many migration methods will I have to write?</p>

<p>In sqlite, we get current db version of installed app in <code>onUpgrade</code> and we just fall through switch case without break statements so that it satisfies all db upgrades.</p>

<p>However, I am not sure, but afaik, we cannot get current db version of installed app in room, we write all possible methods for migration. </p>

<p>But it feels so inconvenient, inappropriate to write total 45 methods if I have db v10!</p>

<p>Is there any better solution?</p>
",5492211,,2649012,,2018-09-08 15:47:56,2018-09-08 15:47:56,Room Database migration,<android><database><sqlite><android-room>,2,0,,,
Android,42418470,1,,,2017,,3,736,"<p>I have been trying to implement the flashlight/torch feature of the camera using the GooglePlay Services Vision API (using Nuget from Visual Studio) for the past few days without success. I have noticed that there is a GitHub implementation of this API which has such functionality but that is only available to Java users.
I was wondering if there is anything related to C# Xamarin users.</p>

<p>The Camera object is not made available on this API therefore I am not able to alter the Camera parameters needed to activate the flashlight.</p>

<p>I would like to be sure if that functionality is not available so I don't waste more time over this. It just might be the case that the Xamarin developers have not attended to this functionality and they might in a near future.</p>

<hr>

<p>UPDATE</p>

<p><a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/BarcodeCaptureActivity.java"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/BarcodeCaptureActivity.java</a></p>

<p>In there you can see that on line 214 we have such method call:</p>

<pre><code>mCameraSource = builder.setFlashMode(useFlash ? Camera.Parameters.FLASH_MODE_TORCH : null).build();
</code></pre>

<p>SetFlashMode is not a method of the CameraSource in Nuget, but it is on the GitHub (open source version).</p>
",1792386,,1792386,,2017-02-23 15:32:38,2017-07-20 12:10:42,How to turn on the torch/flashlight with GooglePlay Services Vision API Xamarin Android,<android><xamarin><torch><flashlight><vision>,2,9,,,
Android,37206416,1,37388669,,2016,,3,952,"<p>While running the sample NDK program <a href=""https://github.com/googlesamples/android-ndk/tree/master/native-audio"" rel=""nofollow"">Native Audio</a> in Android studio in Arch Linux I get the following error:  </p>

<blockquote>
  <p>Error:Execution failed for task ':app:compileNative-audio-jniArmeabi-v7aDebugSharedLibraryNative-audio-jniMainC'.<br>
  No tool chain is available to build for platform 'armeabi-v7a':
      - Tool chain 'ndk-clang' (Clang): Could not determine Clang version: failed to execute clang -dM -E -.</p>
</blockquote>

<p>How can I correct this error? Do I need to make a tool chain so that i can run the sample ndk program?</p>
",4180271,,,,,2017-05-08 19:21:49,No tool chain is available to build for platform 'armeabi-v7a',<android><android-studio><android-ndk>,2,2,,,
Android,41615189,1,46238934,,2017,,4,1827,"<p>I try to fix call recording in my app since lolipop update in my Galaxy S5. As a base I am using google sample project from here: <a href=""https://github.com/googlesamples/android-ndk/tree/master/audio-echo/app/src/main/cpp"" rel=""nofollow noreferrer"">Sample</a>. </p>

<p>And this is the main part of the code:</p>

<h1>AudioRecorder::AudioRecorder(SampleFormat *sampleFormat, SLEngineItf slEngine) :freeQueue_(nullptr), recQueue_(nullptr), devShadowQueue_(nullptr), callback_(nullptr)</h1>

<pre><code>SLresult result;
sampleInfo_ = *sampleFormat;
SLAndroidDataFormat_PCM_EX format_pcm;
ConvertToSLSampleFormat(&amp;format_pcm, &amp;sampleInfo_);

gFp = fopen(""/storage/emulated/0/file.pcm"", ""w"");

// configure audio source
SLDataLocator_IODevice loc_dev = {SL_DATALOCATOR_IODEVICE, SL_IODEVICE_AUDIOINPUT,
                                  SL_DEFAULTDEVICEID_AUDIOINPUT, NULL};
SLDataSource audioSrc = {&amp;loc_dev, NULL};


// configure audio sink
SLDataLocator_AndroidSimpleBufferQueue loc_bq = {
        SL_DATALOCATOR_ANDROIDSIMPLEBUFFERQUEUE,
        DEVICE_SHADOW_BUFFER_QUEUE_LEN};

SLDataSink audioSnk = {&amp;loc_bq, &amp;format_pcm};

// create audio recorder
// (requires the RECORD_AUDIO permission)
const SLInterfaceID id[2] = {SL_IID_ANDROIDSIMPLEBUFFERQUEUE,
                             SL_IID_ANDROIDCONFIGURATION};

const SLboolean req[2] = {SL_BOOLEAN_FALSE, SL_BOOLEAN_FALSE};

result = (*slEngine)-&gt;CreateAudioRecorder(slEngine,
                                          &amp;recObjectItf_,
                                          &amp;audioSrc,
                                          &amp;audioSnk,
                                          2,
                                          id, req);
SLASSERT(result);

// Configure the voice recognition preset which has no
// signal processing for lower latency.
SLAndroidConfigurationItf inputConfig;
result = (*recObjectItf_)-&gt;GetInterface(recObjectItf_,
                                        SL_IID_ANDROIDCONFIGURATION,
                                        &amp;inputConfig);

SLuint32 presetValue = SL_ANDROID_RECORDING_PRESET_VOICE_COMMUNICATION;
result = (*inputConfig)-&gt;SetConfiguration(inputConfig,
                                          SL_ANDROID_KEY_RECORDING_PRESET,
                                          &amp;presetValue,
                                          sizeof(SLint32));
SLASSERT(result);


result = (*recObjectItf_)-&gt;Realize(recObjectItf_, SL_BOOLEAN_FALSE);
SLASSERT(result);

result = (*recObjectItf_)-&gt;GetInterface(recObjectItf_, SL_IID_RECORD, &amp;recItf_);
SLASSERT(result);

result = (*recObjectItf_)-&gt;GetInterface(recObjectItf_, SL_IID_ANDROIDSIMPLEBUFFERQUEUE,
                                        &amp;recBufQueueItf_);
SLASSERT(result);

result = (*recBufQueueItf_)-&gt;RegisterCallback(recBufQueueItf_, bqRecorderCallback, this);
SLASSERT(result);

devShadowQueue_ = new AudioQueue(DEVICE_SHADOW_BUFFER_QUEUE_LEN);
assert(devShadowQueue_);
</code></pre>

<p>And here is my problem this code do not record other side of the call, in output file I can only hear voice from microphone. I tried changing parameters but with same result. Anyone know what I am doing wrong?</p>
",7409905,,,,,2017-10-18 8:38:01,Call recording with OpenSL,<android><android-ndk><audio-recording><voice-recording>,2,5,6,,
Android,41251543,1,41258348,,2016,,4,2424,"<p>Im using MVP and RxJava similar to <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-rxjava/"" rel=""nofollow noreferrer"">google-samples</a> repo.</p>

<p>And I would like to ask how to correctly handle screen orientation change.</p>
",5140726,,5140726,,2016-12-20 21:39:24,2016-12-21 8:32:46,MVP and RxJava - Handling Orientation Changes on Android,<android><rx-java><screen-orientation><rx-android>,2,0,5,,
Android,36481333,1,,,2016,,4,827,"<p>I have kontakt.io beacon and I try to write application for background scanning with nearby API.</p>

<p>I use this method to subscribe messages: </p>

<pre><code>SubscribeOptions options = new SubscribeOptions.Builder()
            // Finds messages attached to BLE beacons. See
            // https://developers.google.com/beacons/
            .setStrategy(Strategy.BLE_ONLY)
            .build();

    Nearby.Messages.subscribe(mGoogleApiClient, getPendingIntent(), options)
            .setResultCallback(new ResultCallback&lt;Status&gt;() {
                @Override
                public void onResult(@NonNull Status status) {
                    if (status.isSuccess()) {
                        Log.i(TAG, ""subscribed successfully"");
                        mSubState = SubState.SUBSCRIBING;
                        // Start background service for handling the notification.
                        getActivity().startService(getBackgroundSubscribeServiceIntent());
                    } else {
                        Log.i(TAG, ""could not subscribe"");
                        handleUnsuccessfulNearbyResult(status);
                    }
                }
            });
</code></pre>

<p>My code is according to this sample:
<a href=""https://github.com/googlesamples/android-nearby/tree/master/messages/NearbyBackgroundBeacons"" rel=""nofollow"">https://github.com/googlesamples/android-nearby/tree/master/messages/NearbyBackgroundBeacons</a></p>

<p>Im receiving messages correctly, but when I kill application no more message come.</p>

<p>Is there any way to get messages from nearby after killing application?</p>
",5967417,,,,,2016-05-03 22:02:48,Google nearby API background scan doesnt work after application kill,<android><google-play-services><beacon><google-nearby>,2,0,2,,
Android,32295158,1,32299031,,2015,,4,2634,"<p>As Android Studio 1.3 coming with NDK support, I tried to convert my Gradle scripts (build.gradle app/build.gradle and gradle-wrapper.properties) following this link <a href=""http://tools.android.com/tech-docs/new-build-system/gradle-experimental"" rel=""nofollow"">http://tools.android.com/tech-docs/new-build-system/gradle-experimental</a>.</p>

<p>However, I cannot find any guidance about <strong>lintOptions</strong> from both the tutorial as well as ndk example repository <a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow"">https://github.com/googlesamples/android-ndk</a></p>

<p>My app/build.gradle</p>

<pre><code>apply plugin: 'com.android.model.application'

model {
    android {
        compileSdkVersion = 21
        buildToolsVersion = ""21.1.2""

        defaultConfig.with {
            applicationId = ""com.abc.xyz""
            minSdkVersion.apiLevel = 9
            targetSdkVersion.apiLevel = 21
        }

        compileOptions.with {
            sourceCompatibility=JavaVersion.VERSION_1_7
            targetCompatibility=JavaVersion.VERSION_1_7
        }

        lintOptions {       // &lt;-- this block
            checkReleaseBuilds false
        }
    }

        android.buildTypes {
        release {
            minifyEnabled = true
        }
    }
}
</code></pre>

<p>The sync failed with log: Error:Cause: com.android.build.gradle.managed.AndroidConfig_Impl</p>

<p>If I remove the <strong>lintOptions</strong> block, it seems to sync OK but build fails later.</p>
",3850054,,2016562,,2015-10-05 20:50:31,2015-12-08 16:24:00,lintOptions for experimental Gradle build tool in Android Studio 1.3,<android><android-studio><android-gradle><build.gradle><gradle-experimental>,2,0,2,,
Android,42901334,1,42912408,,2017,,4,6003,"<p>I want to develop an Android Camera App for myself (can share it if there are interested people) that has a manual focus while video recording.</p>

<p>I've added a SeekBar to the google sample <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow noreferrer"">Camera2 app</a> but I can't find the way to implement the manual focus.</p>

<p>I found <a href=""https://stackoverflow.com/questions/28170491/manual-focus-in-camera2-android"">Manual focus in camera2, android</a> but it doesn't work on my LG G4.
The stock camera app is almost perfect since it doesn't allow the manual focus in video mode.</p>

<p>Does anyone of you have an idea ?</p>

<p>EDIT: here's the code of the SeekBar listener:</p>

<pre><code>@Override
public void onStopTrackingTouch(SeekBar seekBar) {}

@Override
public void onStartTrackingTouch(SeekBar seekBar) {
    mPreviewBuilder.set(CaptureRequest.CONTROL_AF_MODE, CameraMetadata.CONTROL_AF_MODE_OFF);
}

@Override
public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
    float minimumLens = characteristics.get(CameraCharacteristics.LENS_INFO_MINIMUM_FOCUS_DISTANCE);
    float num = (((float)progress) * minimumLens / 100);
    mPreviewBuilder.set(CaptureRequest.LENS_FOCUS_DISTANCE, num);
}
</code></pre>
",7230462,,7230462,,2017-03-21 14:26:06,2017-08-08 15:35:36,Manual Focus using android camera2 API,<android><api><focus><android-camera2><lg>,2,0,2,,
Android,32990275,1,35264164,,2015,,4,3851,"<p>there is no response after I typed adb -s emulator-5554 emu finger touch 1. 
this is reference link 
<a href=""https://github.com/googlesamples/android-FingerprintDialog/issues/2"" rel=""nofollow"">https://github.com/googlesamples/android-FingerprintDialog/issues/2</a></p>
",5417969,,,,,2017-09-06 15:19:02,how to register Fingerprint for Authentication on Nexus emulator,<emulation><nexus-5>,2,0,2,,
Android,37764937,1,,,2016,,4,2792,"<p>I am using my Samsung S5 G900F(API 23, ANDROID 6.0.1) to test the latest Android Fingerprint API. </p>

<p>I tried to build Google Sample project
<a href=""https://github.com/googlesamples/android-FingerprintDialog"" rel=""nofollow"">https://github.com/googlesamples/android-FingerprintDialog</a></p>

<p>But I am facing some problems </p>

<p><code>mFingerprintManager.hasEnrolledFingerprints()</code> </p>

<p>This always returns false. I have double checked on Settings that I have enrolled my fingerprint and I am using Fingerprint to unlock my device.</p>

<p>I had also tried this function </p>

<pre><code>mFingerprintManager.isHardwareDetected() 
</code></pre>

<p>which also returns false.</p>

<p>Does this mean my Samsung S5 (which got its offical 6.0.1 update) is not supported or I am missing something?</p>
",1162842,,,,,2017-02-11 23:02:00,FingerPrint API isHardwareDetected always returns false,<android-studio><android-6.0-marshmallow><android-fingerprint-api>,2,3,1,,
Android,49232559,1,49280941,,2018,,4,1722,"<p>Looks like <code>ConstraintSet</code> is finding hard to cope up with <code>Start/End</code> constrains.<br/></p>

<p>This example is taken from <em>Google samples</em>.
Github: <a href=""https://github.com/googlesamples/android-ConstraintLayoutExamples"" rel=""nofollow noreferrer"">android-ConstraintLayoutExamples</a></p>

<p><br/></p>

<p>When you replace Left &amp; Right constrains with <code>Start</code> &amp; <code>End</code>, ConstraintSet - not working properly, It's working with <code>Left/Right</code> constrains only.
<br/>
For example replace 
layout_constraintStart_toStartOf with layout_constraintLeft_toLeftOf  &amp; replace
layout_constraintEnd_toEndOf with layout_constraintRight_toRightOf </p>

<p>in following files:<br/>
<a href=""https://github.com/googlesamples/android-ConstraintLayoutExamples/blob/master/app/src/main/res/layout/constraintset_example_main.xml"" rel=""nofollow noreferrer"">constraintset_example_main.xml</a><br/>
<a href=""https://github.com/googlesamples/android-ConstraintLayoutExamples/blob/master/app/src/main/res/layout/constraintset_example_big.xml"" rel=""nofollow noreferrer"">constraintset_example_big.xml</a>
<br/></p>

<p>Behaviour:
<a href=""https://i.stack.imgur.com/9MF2j.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/9MF2j.gif"" alt=""""></a></p>

<p><strong>onClick of image:</strong></p>

<pre><code>private ConstraintSet mConstraintSetNormal = new ConstraintSet();

    private ConstraintSet mConstraintSetBig = new ConstraintSet();

 public void toggleMode(View v) {
        TransitionManager.beginDelayedTransition(mRootLayout);
        mShowBigImage = !mShowBigImage;
        applyConfig();
    }

    private void applyConfig() {
        if (mShowBigImage) {
            mConstraintSetBig.applyTo(mRootLayout);
        } else {
            mConstraintSetNormal.applyTo(mRootLayout);
        }
    }
</code></pre>

<p>By default Android studio uses <code>start</code>/ <code>end</code> constrains hence it's I want to know root cause and possible fix. <br/>
Or Is this a bug with <code>ConstrainSet</code> itself?</p>
",4903889,,4903889,,2018-03-15 4:51:30,2018-03-16 5:49:48,ConstrainLayout ConstraintSet - not working properly with Start/End constrains,<android><android-constraintlayout>,2,2,1,,
Android,52441736,1,52446017,,2018,,4,469,"<p>I want to pre-populate my Room database from the json file in the assets folder. I follow the <a href=""https://github.com/googlesamples/android-sunflower/tree/master/app/src/main/java/com/google/samples/apps/sunflower"" rel=""nofollow noreferrer"">Google Sunflower sample</a>. I copied the SeedDatabaseWorker class:</p>

<pre><code>import android.content.Context
import android.util.Log
import androidx.work.Worker
import androidx.work.WorkerParameters
import com.dmitrysimakov.gymlab.data.GymLabDb
import com.dmitrysimakov.gymlab.data.entity.Training
import com.google.gson.Gson
import com.google.gson.reflect.TypeToken
import com.google.gson.stream.JsonReader
import javax.inject.Inject

class SeedDatabaseWorker(val context: Context, workerParams: WorkerParameters) : Worker(context, workerParams) {
    private val TAG = SeedDatabaseWorker::class.java.simpleName

    @Inject lateinit var database: GymLabDb

    override fun doWork(): Worker.Result {
        val plantType = object : TypeToken&lt;List&lt;Training&gt;&gt;() {}.type
        var jsonReader: JsonReader? = null

        return try {
            val inputStream = context.assets.open(""training.json"")
            jsonReader = JsonReader(inputStream.reader())
            val plantList: List&lt;Training&gt; = Gson().fromJson(jsonReader, plantType)
            database.trainingDao().insert(plantList)
            Worker.Result.SUCCESS
        } catch (ex: Exception) {
            Log.e(TAG, ""Error seeding database"", ex)
            Worker.Result.FAILURE
        } finally {
            jsonReader?.close()
        }
    }
}
</code></pre>

<p>I'm using Dagger 2, so instead of doing this: <a href=""https://github.com/googlesamples/android-sunflower/blob/master/app/src/main/java/com/google/samples/apps/sunflower/data/AppDatabase.kt"" rel=""nofollow noreferrer"">Sunflower AppDatabase</a>, I do this:</p>

<pre><code>import android.arch.persistence.db.SupportSQLiteDatabase
import android.arch.persistence.room.Room
import android.arch.persistence.room.RoomDatabase
import androidx.work.OneTimeWorkRequestBuilder
import androidx.work.WorkManager
import com.dmitrysimakov.gymlab.GymLabApp
import com.dmitrysimakov.gymlab.data.GymLabDb
import com.dmitrysimakov.gymlab.workers.SeedDatabaseWorker
import dagger.Module
import dagger.Provides
import javax.inject.Singleton

@Module(includes = [ViewModelModule::class])
class AppModule {

    @Singleton
    @Provides
    fun provideDb(app: GymLabApp): GymLabDb {
        return Room
                .databaseBuilder(app, GymLabDb::class.java, ""gymlab.db"")
                .addCallback(object : RoomDatabase.Callback() {
                    override fun onCreate(db: SupportSQLiteDatabase) {
                        super.onCreate(db)
                        val request = OneTimeWorkRequestBuilder&lt;SeedDatabaseWorker&gt;().build()
                        WorkManager.getInstance().enqueue(request)
                    }
                })
                .fallbackToDestructiveMigration()
                .build()
    }

    @Singleton
    @Provides
    fun provideTrainingDao(db: GymLabDb) = db.trainingDao()
}
</code></pre>

<p>But I can't inject the database that has not yet been created. So, how can I access the dao?</p>
",7775572,,7775572,,2018-09-21 11:44:02,2018-10-02 5:52:52,Android. Could not instantiate Worker,<android><dagger-2><android-room><android-architecture-components><android-workmanager>,2,0,1,,
Android,48914977,1,48992369,,2018,,4,469,"<p>Hi folks I'm trying to learn unit tests with Kotlin using <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/test/java/com/android/example/github/ui/user/UserViewModelTest.java"" rel=""nofollow noreferrer"">Google's github browser sample as a base</a>. My code is very similar indeed but I can't get one of their more basic tests to work (and I don't really understand it).</p>

<p>My main question is what preciesly is the <code>sendResultToUI()</code> test doing,</p>

<pre><code>@Test
public void sendResultToUI() {
    MutableLiveData&lt;Resource&lt;User&gt;&gt; foo = new MutableLiveData&lt;&gt;();
    when(userRepository.loadUser(""foo"")).thenReturn(foo);
    Observer&lt;Resource&lt;User&gt;&gt; observer = mock(Observer.class);
    userViewModel.getUser().observeForever(observer);
    userViewModel.setLogin(""foo"");
    verify(observer, never()).onChanged(any(Resource.class));
    User fooUser = TestUtil.createUser(""foo"");
    Resource&lt;User&gt; fooValue = Resource.success(fooUser);

    foo.setValue(fooValue);
    verify(observer).onChanged(fooValue);
    reset(observer);
}
</code></pre>

<p>from what I can tell, it says:</p>

<ul>
<li>a) When <code>loadUser(""foo"")</code> is called, instead of executing the function
just return a new live data guy called foo. </li>
<li>b) Observe the <code>userViewModel.getUser()</code> live data  </li>
<li>c) Call <code>setLogin(""foo"")</code>, which triggers the live data and calls <code>loadUser(""foo"")</code> </li>
<li><strong>d) Verify the observer to <code>getUser()</code> we created earlier has never been fired by any instance of a Resource</strong> </li>
<li>e) Create a successful foo user, verify that setting it's value triggers the <code>getUser()</code> observer</li>
</ul>

<p>So if all of that is roughly correct, my question is on step d). My code is throwing an exception:</p>

<pre><code>java.lang.IllegalStateException: ArgumentMatchers.any(T::class.java) must not be null
</code></pre>

<p>So I guess <code>onChanged</code> is called with a null value. I really don't get what the hell is going on here - calling <code>setLogin()</code> in step c) triggers the user switchMap live data which in turn calls <code>userRepositiory.loadUser()</code>, so that <em>should</em> call the observer to <code>getUser()</code> yet we ask to verify the opposite (that it's never called). After all calling loadUser() returns foo which we specified in a). Maybe if someone can at least explain the test to me I might make sense of my own code!</p>

<p><strong>Edit:</strong> Here is my own current unit test, the classes and models have changed but as far as I can tell the actual code is identical (I'm aware this can probably be more succinct, will worry about that later!)</p>

<pre><code>    @Test
fun `send result to UI`(){
    val foo = MutableLiveData&lt;Resource&lt;Member&gt;&gt;()
    `when`(interactor.callServerLoginRepo(email, password)).thenReturn(foo)
    val observer: Observer&lt;Resource&lt;Member&gt;&gt; = mock()
    loginViewModel.member.observeForever(observer)
    loginViewModel.setLoginCredentials(email, password)
    verify&lt;Observer&lt;Resource&lt;Member&gt;&gt;&gt;(observer, never()).onChanged(any(Resource::class.java) as Resource&lt;Member&gt;)
    val fooUser = TestUtil.createMember(email)
    val fooValue = Resource.success(fooUser)

    foo.setValue(fooValue)
    verify&lt;Observer&lt;Resource&lt;Member&gt;&gt;&gt;(observer).onChanged(fooValue)
    reset&lt;Observer&lt;Resource&lt;Member&gt;&gt;&gt;(observer)
}
</code></pre>

<p>MockitoHelpers.kt</p>

<pre><code>fun &lt;T&gt; any(type: Class&lt;T&gt;): T = Mockito.any&lt;T&gt;(type)
</code></pre>

<p>The error is also subtly different:</p>

<pre><code>kotlin.TypeCastException: null cannot be cast to non-null type app.core.sdk.data.remote.response.Resource&lt;app.core.sdk.data.model.db.Member&gt;

at app.core.sdk.ui.login.LoginViewModelTest.send result to UI(LoginViewModelTest.kt:114)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:498)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
at org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:55)
</code></pre>

<p><strong>Edit 2, final code:</strong>
So it looks like my main issue here was the confusion over the different <code>any()</code> functions, basically I need a null safe call to <code>any()</code>, ideally one that can specify the matching class. The <a href=""https://github.com/nhaarman/mockito-kotlin"" rel=""nofollow noreferrer"">Mockito-Kotlin</a> library looks like the safest route to go for the moment, because I need an <code>any</code> function which will be fallback to the class I specify and I think his version does so:</p>

<pre><code>inline fun &lt;reified T : Any&gt; any() = Mockito.any(T::class.java) ?: createInstance&lt;T&gt;()
</code></pre>

<p>I am assuming the reason the observer is fired with a null value is just something the <code>Mockito.any()</code> function does, and that's where Kotlin throws the exception.</p>

<pre><code>    val foo = MutableLiveData&lt;Resource&lt;Member&gt;&gt;()
    //When callServerLoginRepo() is called, return foo live data
    `when`(interactor.callServerLoginRepo(email, password)).thenReturn(foo)
    //Observe member live data
    val observer: Observer&lt;Resource&lt;Member&gt;&gt; = mock()
    loginViewModel.member.observeForever(observer)
    //Fire setLoginCredentials, and make sure it didn't touch our observed 'member' live data
    loginViewModel.setLoginCredentials(email, password)
    verify(observer, never()).onChanged(any())
    //Create a successful foo user, and set it's value
    val fooUser = TestUtil.createMember(email)
    val fooValue = Resource.success(fooUser)

    foo.value = fooValue
    //Ensure setting this did indeed trigger our live data
    verify(observer).onChanged(fooValue)
    reset(observer)
</code></pre>
",1866373,,1866373,,2018-03-01 16:00:43,2018-03-01 16:00:43,Android Architecture Components GithubBrowserSample unit test understanding,<android><unit-testing><kotlin><mockito><android-architecture-components>,2,5,,,
Android,41646040,1,41649595,,2017,,4,659,"<p>I am developing an Android application with MVP and RxJava. Well, I have a doubt: </p>

<p>When I am creating my presenter and interactor I can put me Schedulers in the presenter, like this:</p>

<p><strong>Schedulers in the Presenter</strong></p>

<p>Presenter: </p>

<pre><code> override fun tryLogin(username: String, password: String) {
                mLoginInteractor.login(username, password)
                        .subscribeOn(Schedulers.newThread())
                        .observeOn(AndroidSchedulers.mainThread())
                        .subscribe(object : Subscriber&lt;User&gt;(){
        [...]
        }
</code></pre>

<p>Login Interactor:</p>

<pre><code>override fun login(username: String, password: String) =
 mRetrofit.create(ApiClient::class.java).login()
</code></pre>

<p>Or I can set the Schedulers in the Interactor, like this:</p>

<p><strong>Schedulers in the Interactor</strong></p>

<p>Presenter: </p>

<pre><code> override fun tryLogin(username: String, password: String) {
                mLoginInteractor.login(username, password)
                        .subscribe(object : Subscriber&lt;User&gt;(){
        [...]
        }
</code></pre>

<p>Login Interactor:</p>

<pre><code>    override fun login(username: String, password: String) =
     mRetrofit.create(ApiClient::class.java).login()
.subscribeOn(Schedulers.newThread())
.observeOn(AndroidSchedulers.mainThread())
</code></pre>

<p>I see that Google advices to set Schedulers in the Interactor. You can see this in this link:</p>

<p><a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-rxjava/"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture/tree/todo-mvp-rxjava/</a></p>

<p>But many people put the code in the Presenter, like this example:</p>

<p><a href=""https://github.com/BoydHogerheijde/Android-MVP-example/blob/master/app/src/main/java/nl/bhogerheijde/example/rxmvp/interactor/Interactor.java"" rel=""nofollow noreferrer"">https://github.com/BoydHogerheijde/Android-MVP-example/blob/master/app/src/main/java/nl/bhogerheijde/example/rxmvp/interactor/Interactor.java</a></p>

<p>So, <strong>Do I set Schedulers in the Presenter or in the Interactor</strong>?</p>

<p>(I think it's a better idea to put in the Presenter as the Intractor job is only to get the Data, but maybe I am wrong...)</p>
",7101554,,,,,2017-04-05 6:24:38,MVP + RxJava - Put the Schedulers in the Presenter or in the Interactor?,<android><architecture><rx-java><kotlin><mvp>,2,0,,,
Android,51365460,1,,,2018,,4,245,"<p>I am using DataBoundListAdapter from android architecture components <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample"" rel=""nofollow noreferrer"">example</a>.</p>

<p>I need to enhance it to support multiple item types. Anybody did it already ?
My problem is how to find out item type in createBinding procedure, as I do not have available item position there, but I need it to get item type to be able to inflate correct layout base on it.</p>

<pre><code>@Override
    protected ChatMessageItemBinding createBinding(ViewGroup parent) {
        MyItemBinding binding = DataBindingUtil.inflate(LayoutInflater.from(parent.getContext()), R.layout.my_item, parent,
                false, dataBindingComponent);


        return binding;
    }
</code></pre>
",2800835,,2649012,,2018-07-16 16:34:11,2019-03-01 11:49:43,DataBoundListAdapter with multiple item types,<android><android-recyclerview><recycler-adapter><android-architecture-components>,2,0,,,
Android,41284827,1,,,2016,,4,702,"<p>I'm trying to develop a media application for Android Auto. To help me, I've downloaded the AndroidMediaBrowserService Sample (<a href=""https://github.com/googlesamples/android-MediaBrowserService"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-MediaBrowserService</a>).
I've succeded in installing the application, but when I launch Android Auto on my phone and I click the Media icon in the bottom right corner, the application is not listed with the other ones and I can't find out why. Can someone help me please ?</p>
",4349315,,845568,,2016-12-27 23:07:59,2018-12-19 15:10:11,Application not listed in Android Auto,<android><android-auto>,2,2,,,
Android,52367169,1,52420312,,2018,,4,358,"<p><strong>What I Need:</strong> </p>

<p>To Crop out the only exact face from Image.</p>

<p><strong>What I Have Done:</strong> </p>

<p><a href=""https://github.com/blundell/FaceDetectionTutorialWithPreview"" rel=""nofollow noreferrer"">https://github.com/blundell/FaceDetectionTutorialWithPreview</a></p>

<p>With This way or with </p>

<p><a href=""https://github.com/googlesamples/android-vision"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vision</a></p>

<p>Both way I am getting Face Detected. But I am unable to crop the detected Face.</p>

<p>I tried with </p>

<pre><code>Matrix matrix = new Matrix();

        RectF sourceRect = null , destRect = null;

        for (Camera.Face f : mFaces) {

            // Draws a circle at the position of the detected face, with the face's track id below.
            float x = translateX(f.rect.centerX() + f.rect.width() / 2);
            float y = translateY(f.rect.centerY() + f.rect.height() / 2);
            //canvas.drawCircle(x, y, FACE_POSITION_RADIUS, mFacePositionPaint);
            //  canvas.drawText(""id: "" + mFaceId, x + ID_X_OFFSET, y + ID_Y_OFFSET, mIdPaint);
            // canvas.drawText(""happiness: "" + String.format(""%.2f"", face.getIsSmilingProbability()), x - ID_X_OFFSET, y - ID_Y_OFFSET, mIdPaint);
            // canvas.drawText(""right eye: "" + String.format(""%.2f"", face.getIsRightEyeOpenProbability()), x + ID_X_OFFSET * 2, y + ID_Y_OFFSET * 2, mIdPaint);
            //canvas.drawText(""left eye: "" + String.format(""%.2f"", face.getIsLeftEyeOpenProbability()), x - ID_X_OFFSET*2, y - ID_Y_OFFSET*2, mIdPaint);

            // Draws a bounding box around the face.
            float xOffset = scaleX(f.rect.width() / 2.0f);
            float yOffset = scaleY(f.rect.height() / 2.0f);
            float left = x - xOffset;
            float top = y - yOffset;
            float right = x + xOffset;
            float bottom = y + yOffset;

            sourceRect = new RectF(0, 0, source.getWidth(), source.getHeight());
            destRect = new RectF(left, top, right, bottom);

            Log.v(""Margins: "",""top: ""+top+""\n""+""left: ""+left+""\n""+""right: ""+right+""\n""+""bottom: ""+bottom+""\n"");

        }


        matrix.setRectToRect(sourceRect, destRect, Matrix.ScaleToFit.CENTER);

        matrix.postRotate(angle);

        return Bitmap.createBitmap(source, 0, 0, source.getWidth(), source.getHeight(),
                matrix, true);
</code></pre>

<p>The same code working for drawing it for canvas but while cropping its not working. </p>

<p>For Now, I am taking pictures of the whole view. Just need the way how to crop from that image like below.
<a href=""https://i.stack.imgur.com/rlbEY.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/rlbEY.jpg"" alt=""enter image description here""></a></p>
",6000190,,,,,2018-09-20 7:59:56,Crop Detected Face in Android,<android><crop><face-detection>,2,0,,,
Android,37300874,1,37310467,,2016,,4,2265,"<h2>Background</h2>

<p>Google has released a few months ago a new API to detect faces on bitmaps:</p>

<ul>
<li><a href=""http://android-developers.blogspot.co.il/2015/08/face-detection-in-google-play-services.html"" rel=""nofollow"">http://android-developers.blogspot.co.il/2015/08/face-detection-in-google-play-services.html</a></li>
<li><a href=""https://developers.google.com/vision/introduction#apis"" rel=""nofollow"">https://developers.google.com/vision/introduction#apis</a></li>
<li><a href=""https://developers.google.com/vision/face-detection-concepts#face_orientation"" rel=""nofollow"">https://developers.google.com/vision/face-detection-concepts#face_orientation</a></li>
<li><a href=""https://search-codelabs.appspot.com/codelabs/face-detection#1"" rel=""nofollow"">https://search-codelabs.appspot.com/codelabs/face-detection#1</a></li>
<li><a href=""https://github.com/googlesamples/android-vision"" rel=""nofollow"">https://github.com/googlesamples/android-vision</a></li>
</ul>

<p>It's supposed to be faster and better than the <a href=""https://developer.android.com/reference/android/media/FaceDetector.html"" rel=""nofollow""><strong>built-in FaceDetector class</strong></a>, and it has no restrictions/limitations compared to it (like the need that the input bitmap will be with config 565 , bitmap width that's even, and have a max faces to detect).</p>

<p>The code is pretty simple, too:</p>

<p>manifest:</p>

<pre><code>&lt;meta-data
     android:name=""com.google.android.gms.vision.DEPENDENCIES""
     android:value=""face"" /&gt;
</code></pre>

<p>java:</p>

<pre><code>FaceDetector faceDetector = new
       FaceDetector.Builder(getApplicationContext()).setTrackingEnabled(false)
.build();
if(!faceDetector.isOperational()){
   //show error
  return;
  }
Frame frame = new Frame.Builder().setBitmap(myBitmap).build();
SparseArray&lt;Face&gt; faces = faceDetector.detect(frame);
</code></pre>

<h2>The problem</h2>

<p>It seems that the API isn't available on some devices, returning ""false"" when calling ""isOperational()"".</p>

<ul>
<li>On Nexus 4 (Android 4.4.4) and Nexus 5 (Android 6.0.1) it doesn't work at all</li>
<li>On Nexus 5x (Android 6.0.1) and Galaxy S4 (Android 5.0) it works fine</li>
<li>On LG G2 (Android 4.2.2) it worked only from the second run of the sample.</li>
</ul>

<h2>What I've found</h2>

<p>I've found some clues:</p>

<ol>
<li><p>On Github (<a href=""https://github.com/googlesamples/android-vision/issues/39"" rel=""nofollow""><strong>here</strong></a>), other people also found this issue.</p></li>
<li><p>The sample <a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/photo-demo/app/src/main/java/com/google/android/gms/samples/vision/face/photo/PhotoViewerActivity.java"" rel=""nofollow""><strong>says</strong></a> (in ""photo-demo"", inside ""PhotoViewerActivity.java"" file) the library might not be available, yet that if it's not, it will be downloaded :</p>

<pre><code>if (!safeDetector.isOperational()) {
    // Note: The first time that an app using face API is installed on a device, GMS will
    // download a native library to the device in order to do detection.  Usually this
    // completes before the app is run for the first time.  But if that download has not yet
    // completed, then the above call will not detect any faces.
    //
    // isOperational() can be used to check if the required native library is currently
    // available.  The detector will automatically become operational once the library
    // download completes on device.
    Log.w(TAG, ""Face detector dependencies are not yet available."");

    // Check for low storage.  If there is low storage, the native library will not be
    // downloaded, so detection will not become operational.
    IntentFilter lowstorageFilter = new IntentFilter(Intent.ACTION_DEVICE_STORAGE_LOW);
    boolean hasLowStorage = registerReceiver(null, lowstorageFilter) != null;

    if (hasLowStorage) {
        Toast.makeText(this, R.string.low_storage_error, Toast.LENGTH_LONG).show();
        Log.w(TAG, getString(R.string.low_storage_error));
    }
}
</code></pre></li>
</ol>

<p>I tried to reset the play-services app (so that maybe the library will be forced to be re-downloaded), but it didn't seem to work (tried on Nexus 5).</p>

<h2>The question</h2>

<ol>
<li><p>Is there a way to force the library to be downloaded, and then start using the API? Is there a listener to this operation? </p></li>
<li><p>Would using ""isOperational"" trigger this download? </p></li>
<li><p>How come it's not available on some Nexus devices? Am I missing here something that I should have known about using this library?</p></li>
<li><p>Is it really without limitations/restrictions on the input, as I've found? I've noticed someone reported about memory issues (<a href=""https://github.com/googlesamples/android-vision/issues/53"" rel=""nofollow""><strong>here</strong></a>). Would using try-catch (of OutOfMemoryError) help handling OOM ? </p></li>
</ol>
",878126,,878126,,2016-05-18 13:26:21,2017-02-03 3:31:15,Why isn't the new Play-Services FaceDetector available on some devices?,<android><google-play-services><face-detection>,2,2,,,
Android,29431021,1,,,2015,,5,3713,"<p>I want to capture video with 4:3 aspect ratio from android fron-facing camera using Camera2 API (added in 5.0 version of android). It works correctly unless camera has 16:9 sensor array (as front-facing camera on Samsung Galaxy S5). In such case picture looks stretched as if 16:9 picture was being captured and squeezed into 4:3 surface provided by MediaRecorder.</p>

<p>According to documentation there shouldn't be any additional configuration needed as long as MediaRecorder's size has been set to one of sizes provided by <a href=""https://developer.android.com/reference/android/hardware/camera2/params/StreamConfigurationMap.html#getOutputSizes(java.lang.Class%3CT%3E)"" rel=""noreferrer"">getOutputSizes(MediaRecorder.class)</a>. Camera should automatically crop picture so it fits size of MediaRecorder's surface.</p>

<p>I tested also reversed situation - recording 16:9 video on camera with 4:3 sensor array (front-facing camera of Nexus-5). It works properly - picture is cropped to 16:9 aspect ratio.</p>

<p>I assume this is a bug in android API but would like to see whether there's something I miss here.</p>

<p>The simplest way to reproduce that problem is to use <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""noreferrer"">camera2Basic</a> sample app provided by google with the following <a href=""https://github.com/mikosik/android-Camera2Basic/commit/c3cf9f3755d2844d3398fa6252f3e324eee63e92"" rel=""noreferrer"">change</a> that switches to using front-facing camera and 4:3 size for preview. It works correctly on Nexus-5 but provides stretched image on Samsung Galaxy S5. Below screenshot of camera2Basic app on Samsung Galaxy S5 (android 5.0).</p>

<p><img src=""https://i.stack.imgur.com/WCJaj.jpg"" alt=""enter image description here""></p>
",2807871,,,,,2015-11-13 10:29:21,Capturing 4:3 camera picture via android Camera2 API on camera with 16:9 sensor array,<android><android-camera>,2,2,5,,
Android,33371331,1,33450716,,2015,,5,6020,"<p>I have tried new Google Play Services feature - Barcode/QR scanner. In <a href=""https://github.com/googlesamples/android-vision"" rel=""noreferrer"">sample</a> application is scanning started by taping on button and result is returned also on tap.</p>

<p>Is there a way to change its behavior to return first detected barcode/QR immediately?</p>

<p>I am not the first one curious about <a href=""https://github.com/googlesamples/android-vision/issues/37"" rel=""noreferrer"">this</a>.</p>

<p>Thank you in advance.</p>
",1317571,,,,,2017-11-21 10:01:03,How to get detected barcode/QR automatically,<android><android-vision>,2,0,3,,
Android,41828237,1,,,2017,,5,929,"<p>I got an error and I'm going mad because happen only in some circumstances but I really don't understand when, maybe a more expert eye can help me:</p>

<p>From the Google tutorials I took the code for make an in-app purchase, <strong>briefly this code do</strong>: </p>

<ol>
<li><code>Initialize the In-App Service</code></li>
<li><code>Retrieve the price</code> of the object</li>
<li><code>Start the in-purchase</code> if the user click the button ""Buy"".</li>
</ol>

<p>Now, in all the tests that I did this work fine (more devices and API) <strong>BUT</strong> I got ton of reports that say: thrown a <code>NullPointerException</code> on <code>mHelper</code>. </p>

<p>I think that this happen in on the OnDestroy() when the service is disposed but i'm not sure and I couldn't fix it(Complete Error Log in the end).</p>

<p><strong>Here is my cleaned and commented as much as possible code:</strong></p>

<pre><code>IabHelper mHelper;
IabHelper.OnIabPurchaseFinishedListener mPurchaseFinishedListener;
Activity c;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_show_room);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
    c=this;

    //Initialize the In-App Service
    mHelper = new IabHelper(this, ""my_key"");
    mHelper.startSetup(new IabHelper.OnIabSetupFinishedListener() {
            public void onIabSetupFinished(IabResult result) {
                if (!result.isSuccess()) {
                        //Problem setting up In-app Billing
                    return;
                }
                if (mHelper == null) return;

                //Ask for the price
                List additionalSkuList = new ArrayList();
                additionalSkuList.add(""SKU_ID"");
                try {
                    mHelper.queryInventoryAsync(true, additionalSkuList, mQueryFinishedListener);
                }catch (Exception e){
                    //Fail while asking the price
                }
            }
        });

    //Buy Button Listener
    b_buy.setOnClickListener(new View.OnClickListener()
    {
        public void onClick(View V)
        {
            try {
            String payload= ""my_payload""
            mHelper.launchPurchaseFlow(c, ""SKU_ID"",1111,mPurchaseFinishedListener, payload);
            } catch (Exception e) {
                //Error launching purchase flow. Another async operation in progress
            }
        }
    });

    // Callback for when a purchase is finished
    mPurchaseFinishedListener = new IabHelper.OnIabPurchaseFinishedListener() {
        public void onIabPurchaseFinished(IabResult result, Purchase purchase) {
            // if we were disposed of in the meantime, quit.
            if (mHelper == null) return;

            if (result.isFailure()) {
                //Error while buying
                return;
            }

            if (purchase.getSku().equals(""SKU_ID"")) {
                // bought the premium upgrade!
            }
            }
        };
}

//For retrieve the price:
IabHelper.QueryInventoryFinishedListener mQueryFinishedListener = new IabHelper.QueryInventoryFinishedListener() {
    public void onQueryInventoryFinished(IabResult result, Inventory inventory) {
        if (result.isFailure()) {
            return;
        }
        String z = inventory.getSkuDetails(""SKU_ID"").getPrice();
        //The price of the object is + z !!!
    }

};

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (mHelper == null) return;

    // Pass on the activity result to the helper for handling
    if (!mHelper.handleActivityResult(requestCode, resultCode, data)) {
        super.onActivityResult(requestCode, resultCode, data);
    }
}

@Override
public void onDestroy() {
    super.onDestroy();
        if (mHelper != null) mHelper.dispose();
        mHelper = null;
}

@Override
public void onBackPressed() {
    super.onBackPressed();
    finish();
}
}
</code></pre>

<p><strong>And this is the error:</strong></p>

<pre><code>Exception java.lang.NullPointerException: Attempt to invoke virtual method 'java.lang.String android.content.Context.getPackageName()' on a null object reference
com.myproj.util.IabHelper.startSetup (IabHelper.java)
__null__.dispose (IabHelper.java)
__null__.launchPurchaseFlow (IabHelper.java)
__null__.handleActivityResult (IabHelper.java)
__null__.queryInventory (IabHelper.java)
__null__.queryInventoryAsync (IabHelper.java)
__null__.getResponseDesc (IabHelper.java)
__null__.checkSetupDone (IabHelper.java)
__null__.getResponseCodeFromBundle (IabHelper.java)
__null__.getResponseCodeFromIntent (IabHelper.java)
__null__.queryPurchases (IabHelper.java)
__null__.querySkuDetails (IabHelper.java)
com.myproj.util.IabHelper.startSetup (IabHelper.java)
__null__.dispose (IabHelper.java)
__null__.launchPurchaseFlow (IabHelper.java)
__null__.handleActivityResult (IabHelper.java)
__null__.queryInventory (IabHelper.java)
__null__.queryInventoryAsync (IabHelper.java)
__null__.getResponseDesc (IabHelper.java)
__null__.checkSetupDone (IabHelper.java)
__null__.getResponseCodeFromBundle (IabHelper.java)
__null__.getResponseCodeFromIntent (IabHelper.java)
__null__.queryPurchases (IabHelper.java)
__null__.querySkuDetails (IabHelper.java)
com.myproj.util.IabHelper.startSetup (IabHelper.java)
__null__.dispose (IabHelper.java)
__null__.launchPurchaseFlow (IabHelper.java)
__null__.handleActivityResult (IabHelper.java)
__null__.queryInventory (IabHelper.java)
__null__.queryInventoryAsync (IabHelper.java)
__null__.getResponseDesc (IabHelper.java)
__null__.checkSetupDone (IabHelper.java)
__null__.getResponseCodeFromBundle (IabHelper.java)
__null__.getResponseCodeFromIntent (IabHelper.java)
__null__.queryPurchases (IabHelper.java)
__null__.querySkuDetails (IabHelper.java)
com.myproj.util.IabHelper$2.run (IabHelper.java)
java.lang.Thread.run (Thread.java:818)
</code></pre>

<hr>

<p>Here is some involved method of the Google IabHelper class <strong>(Probably you'll NOT need to read this)</strong> They are just mentioned in the Error Log and are written by Google:</p>

<p>Dispose:</p>

<pre><code>public void dispose() {
    logDebug(""Disposing."");
    mSetupDone = false;
    if (mServiceConn != null) {
        logDebug(""Unbinding from service."");
        if (mContext != null) mContext.unbindService(mServiceConn);
    }
    mDisposed = true;
    mContext = null;
    mServiceConn = null;
    mService = null;
    mPurchaseListener = null;
}
</code></pre>

<p>StartSetup:</p>

<pre><code>    public void startSetup(final OnIabSetupFinishedListener listener) {
    // If already set up, can't do it again.
    checkNotDisposed();
    if (mSetupDone) throw new IllegalStateException(""IAB helper is already set up."");

    // Connection to IAB service
    logDebug(""Starting in-app billing setup."");
    mServiceConn = new ServiceConnection() {
        @Override
        public void onServiceDisconnected(ComponentName name) {
            logDebug(""Billing service disconnected."");
            mService = null;
        }

        @Override
        public void onServiceConnected(ComponentName name, IBinder service) {
            if (mDisposed) return;
            logDebug(""Billing service connected."");
            mService = IInAppBillingService.Stub.asInterface(service);
            String packageName = mContext.getPackageName();
            try {
                logDebug(""Checking for in-app billing 3 support."");

                // check for in-app billing v3 support
                int response = mService.isBillingSupported(3, packageName, ITEM_TYPE_INAPP);
                if (response != BILLING_RESPONSE_RESULT_OK) {
                    if (listener != null) listener.onIabSetupFinished(new IabResult(response,
                            ""Error checking for billing v3 support.""));

                    // if in-app purchases aren't supported, neither are subscriptions.
                    mSubscriptionsSupported = false;
                    return;
                }
                logDebug(""In-app billing version 3 supported for "" + packageName);

                // check for v3 subscriptions support
                response = mService.isBillingSupported(3, packageName, ITEM_TYPE_SUBS);
                if (response == BILLING_RESPONSE_RESULT_OK) {
                    logDebug(""Subscriptions AVAILABLE."");
                    mSubscriptionsSupported = true;
                }
                else {
                    logDebug(""Subscriptions NOT AVAILABLE. Response: "" + response);
                }

                mSetupDone = true;
            }
            catch (RemoteException e) {
                if (listener != null) {
                    listener.onIabSetupFinished(new IabResult(IABHELPER_REMOTE_EXCEPTION,
                                                ""RemoteException while setting up in-app billing.""));
                }
                e.printStackTrace();
                return;
            }

            if (listener != null) {
                listener.onIabSetupFinished(new IabResult(BILLING_RESPONSE_RESULT_OK, ""Setup successful.""));
            }
        }
    };

    Intent serviceIntent = new Intent(""com.android.vending.billing.InAppBillingService.BIND"");
    serviceIntent.setPackage(""com.android.vending"");
    if (!mContext.getPackageManager().queryIntentServices(serviceIntent, 0).isEmpty()) {
        // service available to handle that Intent
        mContext.bindService(serviceIntent, mServiceConn, Context.BIND_AUTO_CREATE);
    }
    else {
        // no service available to handle that Intent
        if (listener != null) {
            listener.onIabSetupFinished(
                    new IabResult(BILLING_RESPONSE_RESULT_BILLING_UNAVAILABLE,
                    ""Billing service unavailable on device.""));
        }
    }
}
</code></pre>

<p>and the Constructor of IabHelper:</p>

<pre><code>    public IabHelper(Context ctx, String base64PublicKey) {
        mContext = ctx.getApplicationContext();
        mSignatureBase64 = base64PublicKey;
        logDebug(""IAB helper created."");
    }
</code></pre>

<p><a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample/util/IabHelper.java"" rel=""nofollow noreferrer"">Here</a> is the complete IabHelper class.</p>

<p><strong>Recap:</strong></p>

<p>Tell me if you can see <strong>where/when the <code>NullPointerException</code> of the variable <code>mHelper</code> is thrown.</strong> I couldn't from the code and test with virtual and physical devices since work fine. </p>

<p>I'm pretty much sure that the error is thrown after that the Activity is closed but I don't understand why for fix it.</p>

<p>Write if you need more info. Thank to all!</p>
",3893550,,3893550,,2017-01-27 22:44:07,2017-02-02 15:04:41,Android In-app purchase NullPointerException,<java><android><nullpointerexception><in-app-purchase>,2,7,3,,
Android,51781176,1,51788659,,2018,,5,1740,"<p>I have been using the <code>SingleLiveData</code> class which can be found <a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java"" rel=""noreferrer"">here</a>.  My questions are:</p>

<ol>
<li><p>Is <code>SingleLiveData</code> is actually part of the Android Architecture Components?</p></li>
<li><p>Is it a good idea to use it?</p></li>
</ol>
",9291997,,139985,,2018-08-10 8:01:40,2019-03-16 15:50:59,Is SingleLiveEvent actually part of the Android Architecture Components Library?,<android><android-architecture-components><android-livedata><mutablelivedata>,2,1,2,,
Android,53372539,1,53390772,,2018,,5,1017,"<p>I am implementing an android app (in Kotlin, but that is not relevant to the Problem) in my free time and I try to use android jetpack and new libraries. I have a single Activity with a navigation drawer. I try to follow the <a href=""https://github.com/googlesamples/android-sunflower"" rel=""nofollow noreferrer"">sample sunflower app</a>. It uses the following combination in the main activity to enable the logic behind the navigation drawer:</p>

<pre><code>appBarConfiguration = AppBarConfiguration(navController.graph, drawerLayout)
setSupportActionBar(findViewById(R.id.toolbar))
setupActionBarWithNavController(navController, appBarConfiguration)
</code></pre>

<p><strong>Note on this code</strong>: This automatically will navigate to the correct fragments when clicked in the navigation drawer and close the drawer and keep them selected etc. All that boilerplate code. That is pretty neat and also works. As far as I understand this, the IDs of the navigation drawer menu items have to match the ids of the fragments in the navigation graph and this way they are connected.</p>

<p><strong>The problem I have</strong>: When I use the navigation drawer to go to any fragment other than the starting fragment of the navigation graph, it will display a back button instead of the hamburger item. That is not what I expect, I would expect it still to be the hamburger item since the navigation drawer is for navigating between views on an equal level and not nested in each other, right? I expect a back button if I navigate to a subfragment of any fragment by clicking on elements in that fragment (for example list -> detail) but not if I navigate using the navigation drawer.</p>

<p>Now I traced that problem back to the <code>AppBarConfiguration</code> builder which reads on the constructor taking a navgraph <code>The NavGraph whose start destination should be considered the only top level destination.</code> I can fairly easily fix that by overriding <code>AppBarConfiguration</code> to return different top level destinations than just the starting destination of the navigation graph. </p>

<p>However my question is, why is there this behaviour default? Is it a bug? If I override this will I violate some design guidelines by Google? Should not every element in the navigation drawer be on the same level how I expect it? Is there a different solution inteded for I want to do?</p>
",3795043,,3795043,,2018-11-27 16:33:54,2018-12-09 18:57:32,Navigation graph with multiple top level destinations,<android><android-navigation-drawer><android-navigation><android-jetpack>,2,0,1,,
Android,43632752,1,43661005,,2017,,5,1548,"<p>I am implementing the example given in <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker"" rel=""noreferrer"">google-vision face tracker</a>.
<code>MyFaceDetector</code> class:</p>

<pre><code>public class MyFaceDetector extends Detector&lt;Face&gt; {
    private Detector&lt;Face&gt; mDelegate;

    MyFaceDetector(Detector&lt;Face&gt; delegate) {
        mDelegate = delegate;
    }

    public SparseArray&lt;Face&gt; detect(Frame frame) {
        return mDelegate.detect(frame);
    }

    public boolean isOperational() {
        return mDelegate.isOperational();
    }

    public boolean setFocus(int id) {
        return mDelegate.setFocus(id);
    }

}
</code></pre>

<p><code>FaceTrackerActivity</code> class:</p>

<pre><code>private void createCameraSource() {

    imageView = (ImageView) findViewById(R.id.face);

    FaceDetector faceDetector = new FaceDetector.Builder(this).build();
    myFaceDetector = new MyFaceDetector(faceDetector);
    myFaceDetector.setProcessor(new MultiProcessor.Builder&lt;&gt;(new GraphicFaceTrackerFactory())
            .build());
    mCameraSource = new CameraSource.Builder(this, myFaceDetector)
            .setRequestedPreviewSize(640, 480)
            .setFacing(CameraSource.CAMERA_FACING_FRONT)
            .setRequestedFps(60.0f)
            .build();

    if (!myFaceDetector.isOperational()) {
        Log.w(TAG, ""Face detector dependencies are not yet available."");
    }
}
</code></pre>

<p>I need to crop the face and set it on <code>ImageView</code>. I am not able to implement my custom <code>Frame</code> here. <code>frame.getBitmap()</code> always returns <code>null</code> in <code>detect(Frame frame)</code>. How do I achieve this?</p>
",1785200,,,,,2017-12-15 21:57:53,Crop face from the CameraSource,<android><android-camera><android-vision>,2,1,1,,
Android,34298780,1,35621793,,2015,,5,2062,"<p>I'm trying to implement <a href=""https://github.com/googlesamples/android-ndk/tree/master/hello-jni"" rel=""nofollow noreferrer""><code>hello-jni</code> sample</a>
into my project. I have <code>Gradle</code> 2.8 and <code>'com.android.tools.build:gradle-experimental:0.4.0'</code> and using <code>Android Studio 2.0 Preview 3b</code>.</p>

<p>This is my <code>build.gradle</code>:</p>

<pre><code>apply plugin: 'com.android.model.application'
model {
    android {
        compileSdkVersion = 23
        buildToolsVersion = ""23.0.2""
        defaultConfig.with {
            applicationId = ""lala.lala""
            minSdkVersion.apiLevel = 16
            targetSdkVersion.apiLevel = 23
            versionCode = 1
            versionName = ""1.0""
        }
    }
    /*
    * native build settings
    */
    android.ndk {
        moduleName = ""hello-jni""


        //  cppFlags.add(""-fno-rtti"")
     //    cppFlags.add(""-fno-exceptions"")
     //   ldLibs.addAll([""android"", ""log""])
      //  stl       = ""system""

    }

    android.productFlavors {
        // for detailed abiFilter descriptions, refer to ""Supported ABIs"" @
        // https://developer.android.com/ndk/guides/abis.html#sa
        create(""arm"") {
            ndk.abiFilters.add(""armeabi"")
        }
        create(""arm7"") {
            ndk.abiFilters.add(""armeabi-v7a"")
        }
        create(""arm8"") {
            ndk.abiFilters.add(""arm64-v8a"")
        }
        create(""x86"") {
            ndk.abiFilters.add(""x86"")
        }
        create(""x86-64"") {
            ndk.abiFilters.add(""x86_64"")
        }
        create(""mips"") {
            ndk.abiFilters.add(""mips"")
        }
        create(""mips-64"") {
            ndk.abiFilters.add(""mips64"")
        }
        // To include all cpu architectures, leaves abiFilters empty
        create(""all"")
    }
    android.buildTypes {
        release {
            minifyEnabled = false
            //proguardFiles.add(file('proguard-rules.txt'))
        }
    }

}

dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    testCompile 'junit:junit:4.12'
    compile 'com.android.support:appcompat-v7:23.1.1'
    compile 'com.android.support:design:23.1.1'
    compile 'com.android.support:cardview-v7:23.1.1'
    compile 'com.android.support:recyclerview-v7:23.1.1'
    compile 'com.google.android.gms:play-services-ads:8.3.0'
    compile 'com.google.android.gms:play-services-analytics:8.3.0'
    compile 'com.google.android.gms:play-services-appindexing:8.3.0'
}
</code></pre>

<p>I have created in <code>JNI</code> folder <code>hello-jni.h</code>:</p>

<p><a href=""https://i.stack.imgur.com/iYBwU.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/iYBwU.png"" alt=""enter image description here""></a></p>

<p>In some part of my code I import this:</p>

<pre><code>static {
    System.loadLibrary(""hello-jni"");
}
public static native int testMethod();
</code></pre>

<p>And by auto completion created <code>hello-jni.c</code>:</p>

<pre><code>#include ""hello-jni.h""

JNIEXPORT jintJNICALL
Java_lala_lala_HomeScreen_testMethod(JNIEnv
*env,
jclass type
)
{
// TODO
}
</code></pre>

<p>Header file <code>hello-jni.h</code>:</p>

<pre><code>//
// Created by Filip on 15.12.2015..
//

#ifndef PHOTO_HELLO_JNI_H
#define PHOTO_HELLO_JNI_H

#endif //PHOTO_HELLO_JNI_H
</code></pre>

<p>But it doesn't work. It is full red:</p>

<p><a href=""https://i.stack.imgur.com/dtACE.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/dtACE.png"" alt=""enter image description here""></a></p>

<p>What is problem? How to solve it?</p>
",5665386,,3290339,,2015-12-17 21:08:08,2016-03-03 18:47:21,Hello-jni sample doesn't work in Android Studio 2.0 Preview,<android><android-studio><android-ndk><java-native-interface>,2,0,1,,
Android,37441252,1,37606353,,2016,,5,636,"<p>I'm using google official <a href=""https://github.com/googlesamples/android-Camera2Video/blob/master/Application/src/main/java/com/example/android/camera2video/Camera2VideoFragment.java"" rel=""nofollow noreferrer"">sample</a> to work around video recording by using Camera API 2 . but the problem is I'm not able to make it full screen as I limited the screen orientation only to portrait.Here the xml I edited and the <a href=""https://github.com/googlesamples/android-Camera2Video/blob/master/Application/src/main/res/layout/fragment_camera2_video.xml"" rel=""nofollow noreferrer"">official xml</a>.  </p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;RelativeLayout xmlns:android=""http://schemas.android.com/apk/res/android""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""&gt;

    &lt;AutoFitTextureView
        android:id=""@+id/texture""
        android:layout_width=""wrap_content""
        android:layout_height=""wrap_content""
        android:layout_alignParentLeft=""true""
        android:layout_alignParentStart=""true""
        android:layout_alignParentTop=""true"" /&gt;

    &lt;FrameLayout
        android:layout_width=""match_parent""
        android:layout_height=""wrap_content""
        android:layout_alignParentBottom=""true""
        android:layout_alignParentLeft=""true""
        android:layout_alignParentStart=""true""&gt;

        &lt;Button
            android:id=""@+id/video""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_gravity=""center""
            android:text=""@string/label_record"" /&gt;

        &lt;ImageView
            android:id=""@+id/info""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_gravity=""center_vertical|right""
            android:contentDescription=""Description""
            android:padding=""20dp""
            android:src=""@drawable/ic_more"" /&gt;

    &lt;/FrameLayout&gt;

&lt;/RelativeLayout&gt;
</code></pre>

<p>I think here is setting the video screen size by aspect ration to the <code>TextureView</code> but I couldn't make it to full screen. Any help is greatly appreciated.</p>

<pre><code>mVideoSize = chooseVideoSize(map.getOutputSizes(MediaRecorder.class));
mPreviewSize = chooseOptimalSize(map.getOutputSizes(SurfaceTexture.class), width, height, mVideoSize);
int orientation = getResources().getConfiguration().orientation;
if (orientation == Configuration.ORIENTATION_LANDSCAPE) {
    mTextureView.setAspectRatio(mPreviewSize.getWidth(), mPreviewSize.getHeight());
} else {
    mTextureView.setAspectRatio(mPreviewSize.getHeight(), mPreviewSize.getWidth());
}
</code></pre>

<p><a href=""https://i.stack.imgur.com/ckyue.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/ckyue.png"" alt=""enter image description here""></a></p>
",4817630,,3919009,,2016-06-01 18:29:27,2016-06-03 5:10:33,Camera 2 : Unable to record video in full screen?,<android><camera-api>,2,0,,,
Android,31371440,1,31385161,,2015,,5,2657,"<p>I build sample project MoreTeapots from <a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow"">https://github.com/googlesamples/android-ndk</a> and get errors </p>

<blockquote>
  <p>Information:Gradle tasks [:app:assembleAllDebug]
  :app:copyArm64-v8aDebugAllMoreTeapotsNativeActivitySharedLibraryGdbServer
  :app:createArm64-v8aDebugAllMoreTeapotsNativeActivitySharedLibraryGdbsetup
  :app:compileArm64-v8aDebugAllMoreTeapotsNativeActivitySharedLibraryMoreTeapotsNativeActivityMainC
  :app:compileArm64-v8aDebugAllMoreTeapotsNativeActivitySharedLibraryMoreTeapotsNativeActivityMainCpp
  :app:linkArm64-v8aDebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:stripSymbolsArm64-v8aDebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:arm64-v8aDebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:copyArmeabi-v7aDebugAllMoreTeapotsNativeActivitySharedLibraryGdbServer
  :app:createArmeabi-v7aDebugAllMoreTeapotsNativeActivitySharedLibraryGdbsetup
  :app:compileArmeabi-v7aDebugAllMoreTeapotsNativeActivitySharedLibraryMoreTeapotsNativeActivityMainC
  :app:compileArmeabi-v7aDebugAllMoreTeapotsNativeActivitySharedLibraryMoreTeapotsNativeActivityMainCpp
  :app:linkArmeabi-v7aDebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:stripSymbolsArmeabi-v7aDebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:armeabi-v7aDebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:copyArmeabiDebugAllMoreTeapotsNativeActivitySharedLibraryGdbServer
  :app:createArmeabiDebugAllMoreTeapotsNativeActivitySharedLibraryGdbsetup
  :app:compileArmeabiDebugAllMoreTeapotsNativeActivitySharedLibraryMoreTeapotsNativeActivityMainC
  :app:compileArmeabiDebugAllMoreTeapotsNativeActivitySharedLibraryMoreTeapotsNativeActivityMainCpp
  :app:linkArmeabiDebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:stripSymbolsArmeabiDebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:armeabiDebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:preBuild UP-TO-DATE
  :app:preAllDebugBuild UP-TO-DATE
  :app:checkAllDebugManifest
  :app:prepareAllDebugDependencies
  :app:compileAllDebugAidl UP-TO-DATE
  :app:compileAllDebugRenderscript UP-TO-DATE
  :app:generateAllDebugBuildConfig UP-TO-DATE
  :app:generateAllDebugAssets UP-TO-DATE
  :app:mergeAllDebugAssets UP-TO-DATE
  :app:generateAllDebugResValues UP-TO-DATE
  :app:generateAllDebugResources UP-TO-DATE
  :app:mergeAllDebugResources UP-TO-DATE
  :app:processAllDebugManifest UP-TO-DATE
  :app:processAllDebugResources UP-TO-DATE
  :app:generateAllDebugSources UP-TO-DATE
  :app:processAllDebugJavaRes UP-TO-DATE
  :app:compileAllDebugJavaWithJavac
  Note: C:\Users\Cuong\Downloads\MoreTeapots\app\src\main\java\com\sample\moreteapots\MoreTeapotsNativeActivity.java uses or overrides a deprecated API.
  Note: Recompile with -Xlint:deprecation for details.
  :app:copyMips64DebugAllMoreTeapotsNativeActivitySharedLibraryGdbServer
  :app:createMips64DebugAllMoreTeapotsNativeActivitySharedLibraryGdbsetup
  :app:compileMips64DebugAllMoreTeapotsNativeActivitySharedLibraryMoreTeapotsNativeActivityMainC
  :app:compileMips64DebugAllMoreTeapotsNativeActivitySharedLibraryMoreTeapotsNativeActivityMainCpp
  :app:linkMips64DebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:stripSymbolsMips64DebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:mips64DebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:copyMipsDebugAllMoreTeapotsNativeActivitySharedLibraryGdbServer
  :app:createMipsDebugAllMoreTeapotsNativeActivitySharedLibraryGdbsetup
  :app:compileMipsDebugAllMoreTeapotsNativeActivitySharedLibraryMoreTeapotsNativeActivityMainC
  :app:compileMipsDebugAllMoreTeapotsNativeActivitySharedLibraryMoreTeapotsNativeActivityMainCpp
  :app:linkMipsDebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:stripSymbolsMipsDebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:mipsDebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:copyX86DebugAllMoreTeapotsNativeActivitySharedLibraryGdbServer
  :app:createX86DebugAllMoreTeapotsNativeActivitySharedLibraryGdbsetup
  :app:compileX86DebugAllMoreTeapotsNativeActivitySharedLibraryMoreTeapotsNativeActivityMainC
  :app:compileX86DebugAllMoreTeapotsNativeActivitySharedLibraryMoreTeapotsNativeActivityMainCpp
  :app:linkX86DebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:stripSymbolsX86DebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:x86DebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:copyX86_64DebugAllMoreTeapotsNativeActivitySharedLibraryGdbServer
  :app:createX86_64DebugAllMoreTeapotsNativeActivitySharedLibraryGdbsetup
  :app:compileX86_64DebugAllMoreTeapotsNativeActivitySharedLibraryMoreTeapotsNativeActivityMainC
  :app:compileX86_64DebugAllMoreTeapotsNativeActivitySharedLibraryMoreTeapotsNativeActivityMainCpp
  :app:linkX86_64DebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:stripSymbolsX86_64DebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:x86_64DebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:compileAllDebugSources
  :app:preDexAllDebug
  :app:dexAllDebug
  UNEXPECTED TOP-LEVEL EXCEPTION:
  ...while parsing com/sample/helper/NDKHelper.class
  UNEXPECTED TOP-LEVEL EXCEPTION:
  ...while parsing com/sample/moreteapots/BuildConfig.class
  UNEXPECTED TOP-LEVEL EXCEPTION:
  ...while parsing com/sample/moreteapots/MoreTeapotsApplication.class
  UNEXPECTED TOP-LEVEL EXCEPTION:
  ...while parsing com/sample/moreteapots/MoreTeapotsNativeActivity$1.class
  UNEXPECTED TOP-LEVEL EXCEPTION:
  ...while parsing com/sample/moreteapots/MoreTeapotsNativeActivity$2.class
  UNEXPECTED TOP-LEVEL EXCEPTION:
  ...while parsing com/sample/moreteapots/MoreTeapotsNativeActivity$3.class
  UNEXPECTED TOP-LEVEL EXCEPTION:
  ...while parsing com/sample/moreteapots/MoreTeapotsNativeActivity.class
  UNEXPECTED TOP-LEVEL EXCEPTION:
  ...while parsing com/sample/moreteapots/R$attr.class
  UNEXPECTED TOP-LEVEL EXCEPTION:
  ...while parsing com/sample/moreteapots/R$drawable.class
  UNEXPECTED TOP-LEVEL EXCEPTION:
  ...while parsing com/sample/moreteapots/R$id.class
  UNEXPECTED TOP-LEVEL EXCEPTION:
  ...while parsing com/sample/moreteapots/R$layout.class
  UNEXPECTED TOP-LEVEL EXCEPTION:
  ...while parsing com/sample/moreteapots/R$string.class
  UNEXPECTED TOP-LEVEL EXCEPTION:
  ...while parsing com/sample/moreteapots/R$style.class
  UNEXPECTED TOP-LEVEL EXCEPTION:
  ...while parsing com/sample/moreteapots/R.class
  14 errors; aborting
  Error:Execution failed for task ':app:dexAllDebug'.
  com.android.ide.common.process.ProcessException: org.gradle.process.internal.ExecException: Process 'command 'C:\Program Files\Java\jdk1.8.0_45\bin\java.exe'' finished with non-zero exit value 1
  Information:BUILD FAILED
  Information:Total time: 4 mins 1.033 secs
  Information:1 error
  Information:0 warnings
  Information:See complete output in console</p>
</blockquote>

<p>This is guide <a href=""http://tools.android.com/tech-docs/new-build-system/gradle-experimental"" rel=""nofollow"">http://tools.android.com/tech-docs/new-build-system/gradle-experimental</a>.
Its app build.gradle</p>

<pre><code>apply plugin: 'com.android.model.application'

model {
android {
    compileSdkVersion    = 22
    buildToolsVersion    =""22.0.1""

    defaultConfig.with {
        applicationId    = ""com.sample.moreteapots""
        minSdkVersion.apiLevel    = 11
        targetSdkVersion.apiLevel = 22

    }
}
android.ndk {
    moduleName =""MoreTeapotsNativeActivity""
    cppFlags   += ""-I${file(""src/main/jni/cpufeatures"")}"".toString()
    cppFlags   += ""-I${file(""src/main/jni/native_app_glue"")}"".toString()
    cppFlags   += ""-I${file(""src/main/jni/ndk_helper"")}"".toString()

    // CFlags is configured in similiar way as cppFlags
    // CFlags    += ""-I${file(""src/main/jni/native_app_glue"")}"".toString()

    ldLibs     += [""android"", ""EGL"", ""GLESv2"",""log""]
    stl         = ""stlport_static""
}

android.sources {
    main {
        jni {
            source {
                srcDirs 'src/main/jni'
            }
        }
    }
}

android.productFlavors {
    create (""arm7"") {
        ndk.abiFilters += ""armeabi-v7a""
    }
    create (""arm8"") {
        ndk.abiFilters += ""arm64-v8a""
    }
    create (""x86-32"") {
        ndk.abiFilters += ""x86""
    }
    // for detailed abiFilter descriptions, refer to ""Supported ABIs"" @
    // https://developer.android.com/ndk/guides/abis.html#sa
    // build one including all productFlavors
    create(""all"")
}
</code></pre>

<p>}</p>

<p>Its project build.gradle</p>

<pre><code>// Top-level build file where you can add configuration options common to      all sub-projects/modules.
buildscript {
repositories {
   maven {
     url  ""http://dl.bintray.com/android/android-tools""
   }
   jcenter()
}
dependencies {
    classpath 'com.android.tools.build:gradle-experimental:0.1.0'
}
}

allprojects {
repositories {
    jcenter()
}
</code></pre>

<p>}</p>

<p>Its gradle-wrapper.properties</p>

<pre><code>#Wed Apr 10 15:27:10 PDT 2013
distributionBase=GRADLE_USER_HOME
distributionPath=wrapper/dists
zipStoreBase=GRADLE_USER_HOME
zipStorePath=wrapper/dists
distributionUrl=https\://services.gradle.org/distributions/gradle-2.5-rc-1-bin.zip
</code></pre>

<p>How can I solve? Thanks.</p>

<p>UPDATE: Solved.  I add </p>

<pre><code>    compileOptions.with {
    sourceCompatibility = JavaVersion.VERSION_1_7
    targetCompatibility = JavaVersion.VERSION_1_7
}
</code></pre>

<p>to app build.gradle like</p>

<pre><code>apply plugin: 'com.android.model.application'
model {
android {
    compileSdkVersion    = 22
    buildToolsVersion    =""22.0.1""

    defaultConfig.with {
        applicationId    = ""com.sample.moreteapots""
        minSdkVersion.apiLevel    = 10
        targetSdkVersion.apiLevel = 22

    }
}
android.ndk {
    moduleName =""MoreTeapotsNativeActivity""
    cppFlags   += ""-I${file(""src/main/jni/cpufeatures"")}"".toString()
    cppFlags   += ""-I${file(""src/main/jni/native_app_glue"")}"".toString()
    cppFlags   += ""-I${file(""src/main/jni/ndk_helper"")}"".toString()

    // CFlags is configured in similiar way as cppFlags
    // CFlags    += ""-I${file(""src/main/jni/native_app_glue"")}"".toString()

    ldLibs     += [""android"", ""EGL"", ""GLESv2"",""log""]
    stl         = ""stlport_static""
}

android.sources {
    main {
        jni {
            source {
                srcDirs 'src/main/jni'
            }
        }
    }
}

android.productFlavors {
    create (""arm7"") {
        ndk.abiFilters += ""armeabi-v7a""
    }
    create (""arm8"") {
        ndk.abiFilters += ""arm64-v8a""
    }
    create (""x86-32"") {
        ndk.abiFilters += ""x86""
    }
    // for detailed abiFilter descriptions, refer to ""Supported ABIs"" @
    // https://developer.android.com/ndk/guides/abis.html#sa
    // build one including all productFlavors
    create(""all"")
}
compileOptions.with {
    sourceCompatibility = JavaVersion.VERSION_1_7
    targetCompatibility = JavaVersion.VERSION_1_7
}
</code></pre>

<p>}</p>
",4108002,,4108002,,2015-07-14 13:23:41,2015-07-25 3:12:13,Android Studio: New gradle build NDK sample app error,<android><android-ndk>,2,0,,,
Android,29724923,1,29724962,,2015,,5,3486,"<p>I just tried <a href=""https://github.com/googlesamples/android-play-places/tree/master/PlaceComplete"" rel=""nofollow"">this demo</a>, but I can't find how to limit result in country.
I also checked getAutocompletePredictions in com.google.android.gms.location.places.GeoDataApi, but I can't found any document to implement limiting country.</p>

<p>I also searched some questions in SO; apparently it's JavaScript and needs to add some ""optional param"". So how to add optional param in this request?</p>
",3205503,,4099598,,2015-04-19 2:17:08,2015-07-09 8:54:41,Limiting result in country with Google Place autocomplete?,<android><google-places-api>,2,0,,,
Android,33149700,1,33150597,,2015,,5,2077,"<p>I'm trying to implement activity recognition so it will support api 23.
I've followed the running permissions guide from  here : </p>

<p><a href=""https://developer.android.com/guide/topics/security/permissions.html#normal-dangerous"" rel=""nofollow"">https://developer.android.com/guide/topics/security/permissions.html#normal-dangerous</a></p>

<p>And i cant find if activity recognition is classified as dangerous permission or normal?</p>

<p>Even in google's activity recognition sample they dont target api 23 : <a href=""https://github.com/googlesamples/android-play-location/tree/master/ActivityRecognition"" rel=""nofollow"">https://github.com/googlesamples/android-play-location/tree/master/ActivityRecognition</a></p>

<p>is it possible that activity recoognition is not supported in android 6.0?</p>
",4227647,,2401535,,2015-10-22 10:20:43,2015-10-22 10:20:43,Activity Recognition Running permissions in android 6.0,<android><android-permissions><android-6.0-marshmallow><activity-recognition>,2,6,,,
Android,45099484,1,46485018,,2017,,6,761,"<p>I'm trying to implement an MDM client app for Android, known in the Android For Work world as a Device Policy Controller or DPC. Google's documentation for building a DPC is <a href=""https://developers.google.com/android/work/build-dpc"" rel=""noreferrer"">here</a>.</p>

<p>The documented process <a href=""https://developers.google.com/android/work/build-dpc#download_the_library"" rel=""noreferrer"">begins</a> with downloading the DPC Support Library. Unfortunately, the <a href=""https://connect.googleforwork.com/community/developers/android/emm/technical-integration/profile-owner-and-device-owner-guidance"" rel=""noreferrer"">download link they provide</a> (to the ""EMM Community's Technical Integration"" section) doesn't work: you're prompted to log in with a Google account, but after doing so I see this:</p>

<blockquote>
  <p><strong>Were sorry...</strong></p>
  
  <p>...but it looks like you dont have access to this place or content. If you think you should have access to this space, try logging out and back in again using your account menu accessible by clicking your avatar in the top right corner of this page. If this issue persists, please notify your Support Representative and we will troubleshoot further.</p>
</blockquote>

<p>Others have had the same problem: there's an <a href=""https://connect.googleforwork.com/thread/19771"" rel=""noreferrer"">issue ticket raised here</a> which is only 2 months old, has no answer but for some reason has been marked <em>Assumed Answered</em> and then ignored.</p>

<p>The <a href=""https://developers.google.com/android/work/prov-devices#final_setup_steps_for_all_modes_of_operation"" rel=""noreferrer"">steps documented here</a> make it very clear that the DPC Support Library is a required part of the process, and don't describe any alternatives to using it.</p>

<p>So, <strong>how do I get hold of the DPC Support Library?</strong> Can it be obtained anywhere else? Or failing that, how do I find out what it does so I can reproduce those steps manually in my own code?</p>

<hr/>

<p>Some steps I've already tried:</p>

<ol>
<li>I have successfully <a href=""https://connect.googleforwork.com/docs/DOC-13121"" rel=""noreferrer"">registered for the EMM Community</a> and have access to the <a href=""https://developers.google.com/android/work/play/emm-api/v1/"" rel=""noreferrer"">EMM API</a>. (i.e. I get a valid response now from <a href=""https://developers.google.com/android/work/play/emm-api/v1/enterprises/generateSignupUrl"" rel=""noreferrer"">Enterprises.generateSignupUrl</a>, and no longer the dreaded ""<a href=""https://stackoverflow.com/questions/41094734/google-emm-apis-return-the-caller-is-not-registered-as-an-mdm"">The caller is not registered as an MDM</a>"".) That in itself was a long and frustratingly opaque process.</li>
<li>I have built and run the <a href=""https://github.com/googlesamples/android-testdpc"" rel=""noreferrer"">googlesamples/android-testdpc</a> app and looked through the source code. Unfortunately this is a client-only demo: it doesn't communicate with an EMM server and doesn't use the DPC Support Library. Specifically, it doesn't obtain an authorisation token in order to provision a work profile on the device, as documented <a href=""https://developers.google.com/android/work/prov-devices#final_setup_steps_for_all_modes_of_operation"" rel=""noreferrer"">here</a>.</li>
<li>I have played with the <a href=""https://enterprise.google.com/android/experience/overview"" rel=""noreferrer"">public EMM demo system</a> and its <a href=""https://play.google.com/store/apps/details?id=com.google.android.apps.work.clouddpc"" rel=""noreferrer"">DPC app</a>. That seems to be doing things properly, but as it's closed-source I can't look at the code for either client or server.</li>
</ol>
",440921,,440921,,2017-07-14 10:03:00,2017-10-12 11:12:05,How can I get hold of (or bypass) the Android DPC Support Library?,<android><mdm><android-for-work>,2,5,4,,
Android,52140059,1,52142897,,2018,,6,994,"<p><strong>OBS:</strong> Though still no first class support (as of writing this), Google has now updated their samples with an example of how they think this should be solved: <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/NavigationAdvancedSample"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components/tree/master/NavigationAdvancedSample</a></p>

<p>The <a href=""https://codelabs.developers.google.com/codelabs/android-navigation/index.html?index=..%2F..%2Findex#0"" rel=""nofollow noreferrer"">Android Codelab for Navigation</a> does a good job describing how to use the architecture component Navigation together with a <code>BottomNavigationView</code>. But let's say I have 2 tabs in the <code>BottomNavigationView</code>, <strong>Tab1</strong> and <strong>Tab2</strong>. And let's say that in <strong>Tab1</strong> you navigate through the fragments <strong>Frag1</strong> --> <strong>Frag2</strong>. Now, whenever I go to <strong>Tab2</strong>, and then back to <strong>Tab1</strong>, the fragment back stack of <strong>Frag1,2</strong> is gone, and replaced with the starting point <strong>Frag1</strong> again. </p>

<p>What do I have to do in an app so that a <code>BottomNavigationView</code> together with <a href=""https://developer.android.com/topic/libraries/architecture/navigation/"" rel=""nofollow noreferrer"">Navigation</a> keeps its back stack intact even though I change tabs? And, also keeping the back/up button behaviours in sync with the guidelines.</p>

<p>Previously I've done this with the use of <code>ViewPager</code> and managing the back stack my selfe, but that doesn't feels like the right approach with the new Navigation.</p>

<p>Thanks in advance!</p>

<hr>

<p><strong>Edit:</strong></p>

<p>There's a more elaborate answer <a href=""https://stackoverflow.com/questions/51707889/android-jetpack-navigation-with-multiple-stack/52146506#52146506"">here</a>.</p>
",3499145,,3499145,,2019-03-20 7:27:39,2019-03-20 7:27:39,Android Jetpack Navigation proper back stack with BottomNavigationView,<android><android-architecture-components><bottomnavigationview><android-navigation><android-jetpack>,2,0,4,,
Android,44527420,1,,,2017,,6,1055,"<p>I need to use Camera2 API on my application. (Api21+)
I found the next sample:
<a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a> </p>

<p>I downloaded it and started on my phone. When I pressed the ""Picture"" Button, it's call the takePhoto method.</p>

<pre><code>private void takePicture() {
    lockFocus();
}
</code></pre>

<p>It is a State machine. Sometimes this machine stuck on <code>STATE_WAITING_LOCK</code>.
My device is waiting for Focus, but nothing happens! (Yes, my device is support auto focus)</p>

<pre><code>case STATE_WAITING_LOCK: {
        Integer afState = result.get(CaptureResult.CONTROL_AF_STATE);
        if (afState == null) {
            captureStillPicture();
        } else if (CaptureResult.CONTROL_AF_STATE_FOCUSED_LOCKED == afState ||
                CaptureResult.CONTROL_AF_STATE_NOT_FOCUSED_LOCKED == afState) {
            // CONTROL_AE_STATE can be null on some devices
            Integer aeState = result.get(CaptureResult.CONTROL_AE_STATE);
            if (aeState == null ||
                    aeState == CaptureResult.CONTROL_AE_STATE_CONVERGED) {
                mState = STATE_PICTURE_TAKEN;
                captureStillPicture();
            } else {
                runPrecaptureSequence();
            }
        }
        break;
    }
</code></pre>

<p>What is the good solution for this problem?
And this program sometimes crashed here:</p>

<pre><code>private void unlockFocus() {
    try {
        // Reset the auto-focus trigger
        mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AF_TRIGGER,
                CameraMetadata.CONTROL_AF_TRIGGER_CANCEL);
        setAutoFlash(mPreviewRequestBuilder);
/*HERE*/ mCaptureSession.capture(mPreviewRequestBuilder.build(), mCaptureCallback,
                mBackgroundHandler);
        // After this, the camera will go back to the normal state of preview.
        mState = STATE_PREVIEW;
        mCaptureSession.setRepeatingRequest(mPreviewRequest, mCaptureCallback,
                mBackgroundHandler);
    } catch (CameraAccessException e) {
        e.printStackTrace();
    }
}
</code></pre>

<p>Why can't focus my device?</p>
",5472479,,1033581,,2019-02-01 7:41:35,2019-02-01 7:41:35,Android Camera2 focus state stuck,<android><android-camera2>,2,2,3,,
Android,39022845,1,39064930,,2016,,6,8702,"<p>I'm creating a custom camera capturing videos with the new camera2 API.</p>

<p>My code is strongly inspired from the code provided by Google <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""noreferrer"">here</a>. My camera preview has a button to switch from back to front camera and then from front to back camera.
The ""camera preview"" activity is launched with the back camera by default.</p>

<p>For some reason, when I click on the ""switch/swap camera"" button <strong>for the first time</strong>, it brings be to the front camera as it should, BUT everytime I click again, the switch/swap doesn't work anymore: the preview (on the front camera) fades a little bit, like if something is happening, but it remains on the currently selected (front) camera. </p>

<p>Here is my code :</p>

<p>In a <code>RecordVideoFragment</code>, in the <code>onViewCreated</code>:</p>

<pre><code>//  Switch camera button
        switchCameraButton = (ImageButton) view.findViewById(R.id.button_switch_camera);
        // Listener for Switch cameras button
        switchCameraButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                switchCameras();
            }
        });
</code></pre>

<p>And here is the <code>switchCameras()</code> function: </p>

<pre><code>private void  switchCameras() {
        mCameraOpenCloseLock.release();
        mCameraDevice.close();

        CameraManager mCameraManager = (CameraManager) getActivity().getSystemService(Context.CAMERA_SERVICE);
        try {
            String mCameraId = mCameraManager.getCameraIdList()[0];
            if (mCameraId.equals(""0"")) {   // If currently on FRONT camera (0 = CameraCharacteristics.LENS_FACING_FRONT)
                mCameraId = ""1"";           // switch to BACK camera (1 = CameraCharacteristics.LENS_FACING_BACK)
                switchCameraButton.setImageResource(R.drawable.ic_camera_front);
            } else {  // If currently on BACK camera
                mCameraId = ""0""; // switch to front camera
                switchCameraButton.setImageResource(R.drawable.ic_camera_back);
            }
            try {
                if (ActivityCompat.checkSelfPermission(getActivity(), Manifest.permission.CAMERA)
                        == PackageManager.PERMISSION_GRANTED) {
                    mCameraManager.openCamera(mCameraId, mStateCallback, null);
                } else {
                    requestVideoPermissions();
                }
            } catch (CameraAccessException e) {
                e.printStackTrace();
            }
        } catch (CameraAccessException e) {
            Toast.makeText(getActivity(), ""Cannot access the camera."", Toast.LENGTH_SHORT).show();
            getActivity().finish();
        }
    }
</code></pre>

<p>If you have any idea on what's happening that would save me. I have been bugging on this for days. Thank you very much</p>
",5175297,,,,,2018-02-08 8:39:38,Android Camera2 API switch back - front cameras,<android><camera><camera2><android-camera2>,2,1,3,,
Android,50121501,1,,,2018,,6,472,"<h2>TL;DR</h2>

<p>How do I deal with Activities that actively change data (for example through an EditText)? Do I keep saving their state in the SavedInstanceState on rotation and only use the ViewModel when all of the fields are ready, or is there a way to make the ViewModel responsible for checking/holding/using the UI's data?</p>

<h2>Question</h2>

<p>I'm developing my application using Google's Arch. Components, and writing my latest class I've noticed I'm not really sure on what the best practice is when handling, say, data coming from an Activity form.</p>

<h2>Example</h2>

<p>I have a POJO made of title, description, location, type</p>

<p>I have an Activity with four EditText: <code>title_et</code>, <code>description_et</code>, <code>location_et</code>, <code>type_et</code>.</p>

<p>My ViewModel, through a Repository (irrelevant here), can send an object to the Database when the <code>sendObject</code> function is called.</p>

<h3>How I'm doing it now</h3>

<p>The activity has the <code>mTitle</code>, <code>mDescription</code>, <code>mLocation</code>, <code>mType</code>.
On rotation, the activity saves all of the EditText values in the <code>savedInstanceState</code> bundle, and it loads them again populating the views.</p>

<p>When the user wants to send the object, it clicks a button and the activity calls the function <code>viewModel.sendObject(mTitle, mDescription, mLocation, mType)</code> after the necessary checks.</p>

<h3>Problems with this approach</h3>

<p>The activity is responsible of holding/checking all the data of the EditTexts, basically making the ViewModel only responsible of interacting with the Repository.</p>

<h3>What I'd like to accomplish</h3>

<p>Ideally, I'd want to make the Activity only responsible of the UI, delegating everything to the ViewModel.</p>

<p>This way I could call <code>sendObject()</code> and the ViewModel would have already all of the data needed.</p>

<h3>The LiveData situation</h3>

<p>Right now the ViewModel has only one instance of LiveData, inside that there is a Resource (which is <a href=""https://developer.android.com/topic/libraries/architecture/guide#addendum"" rel=""noreferrer"">taken from here</a>) and it's used to ""tell"" the Activity that new data has arrived or an error occurred.</p>

<p>This approach works fine in all Activities that just receive data from the network and display them. What do I do when I want to synchronise data coming FROM the Activity? Do I use one LiveData for each field and use that to display potential errors?</p>

<p>I've read most of the <a href=""https://github.com/googlesamples/android-architecture-components"" rel=""noreferrer"">samples</a> but all of the Activities there are passive.</p>

<h2>Conclusion</h2>

<p>Thanks to anyone who takes the time to help.</p>
",8095850,,,,,2018-05-08 17:04:06,Handling input with Android Architecture Components,<android><mvvm><android-architecture-components>,2,0,2,,
Android,32105785,1,,,2015,,6,8484,"<p>I feel incredibly dumb asking this, but I've downloaded the sample code of the Android Mobile Vision API available here: <a href=""https://github.com/googlesamples/android-vision"" rel=""noreferrer"">https://github.com/googlesamples/android-vision</a>.</p>

<p>I'm trying to import this code into Android Studio so that I am able to just run the sample apps, but no matter how I import (Import Existing Android Studio Project, Import Non-Android Studio Project, Open Project), I am not able to get it imported in a way where I can just compile and hit play to run the app.</p>

<p>Since this is an official sample code from Android, I am <em>sure</em> it shouldn't be this complicated. What am I missing?</p>
",832442,,5231007,,2015-08-21 20:25:14,2015-08-25 20:11:37,Trying to import code from GitHub into Android Studio,<android><android-studio><google-vision><android-vision>,2,7,,,
Android,51892478,1,51961333,,2018,,6,3680,"<h3>Issue</h3>

<p><em>Summary</em>: Multiple <strong>LiveData</strong> <strong>Observers</strong> are being triggered in a Fragment after navigating to a new Fragment, popping the new Fragment, and returning to the original Fragment.</p>

<p><em>Details</em>: The architecture consists of <strong>MainActivity</strong> that hosts a <strong>HomeFragment</strong> as the <em>start destination</em> in the MainActivity's <strong>navigation graph</strong>. Within HomeFragment is a programmatically inflated <strong>PriceGraphFragment</strong>. The <strong>HomeFragment</strong> is using the navigation component to launch a new child Fragment <strong>ProfileFragment</strong>. On back press the ProfileFragment is popped and the app returns to the HomeFragment hosting the PriceGraphFragment. The PriceGraphFragment is where the Observer is being called multiple times.</p>

<p>I'm logging the hashcode of the HashMap being emitted by the Observer and it is showing 2 unique hashcodes when I go to the profile Fragment, pop the profile Fragment, and return to the price Fragment. This is opposed to the one hashcode seen from the HashMap when I rotate the screen without launching the profile Fragment. </p>

<h3>Implementation</h3>

<ol>
<li><p>Navigation component to launch new ProfileFragment within HomeFragment.</p>

<p><code>view.setOnClickListener(Navigation.createNavigateOnClickListener(
R.id.action_homeFragment_to_profileFragment, null))</code></p></li>
<li><p><strong>ViewModel</strong> creation in Fragment (PriceGraphFragment). The ViewModel has been logged and the data that has multiple Observers only has data initialized in the ViewModel once. </p>

<p><code>override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    priceViewModel = ViewModelProviders.of(this).get(PriceDataViewModel::class.java)
}</code></p></li>
<li><p>Listen for data from <strong>ViewModel</strong> in original Fragment (PriceGraphFragment). This is being called multiple times, however it is only expected to have one Observer when the Fragment is loaded.</p>

<p><code>priceViewModel.graphLiveData.observe(
this, Observer { priceGraphDataMap: HashMap&lt;Exchange, PriceGraphLiveData&gt;? -&gt;
   // This is being called multiple times.
})</code></p></li>
</ol>

<h3>Attempted Solutions</h3>

<ol>
<li>Creating the <strong>Fragment</strong>'s <strong>ViewModel</strong> in the <strong>onCreate()</strong> method.
<code>priceViewModel = ViewModelProviders.of(this).get(PriceDataViewModel::class.java)</code></li>
<li><p>Creating the ViewModel using the Fragment's activity and the child Fragment's parent Fragment.<br>
<code>priceViewModel = ViewModelProviders.of(activity!!).get(PriceDataViewModel::class.java)</code></p>

<p><code>priceViewModel = ViewModelProviders.of(parentFragment!!).get(PriceDataViewModel::class.java)</code></p></li>
<li>Moving methods that create the Observers to the Fragment's <strong>onCreate()</strong> and <strong>onActivityCreated()</strong> methods.</li>
<li>Using <code>viewLifecycleOwner</code> instead of <code>this</code> for the <strong>LifecycleOwner</strong> in the method <code>observe(@NonNull LifecycleOwner owner, @NonNull Observer&lt;? super T&gt; observer)</code>.</li>
<li>Storing the HashMap data that is showing as duplicates in the ViewModel opposed to the Fragment.</li>
<li>Launching the child Fragment using the <code>ChildFragmentManager</code> and the <code>SupportFragmentManager</code> (on the Activity level).</li>
</ol>

<h3>Similar Issues and Proposed Solutions</h3>

<ul>
<li><a href=""https://github.com/googlesamples/android-architecture-components/issues/47"" rel=""noreferrer"">https://github.com/googlesamples/android-architecture-components/issues/47</a></li>
<li><a href=""https://medium.com/@BladeCoder/architecture-components-pitfalls-part-1-9300dd969808"" rel=""noreferrer"">https://medium.com/@BladeCoder/architecture-components-pitfalls-part-1-9300dd969808</a></li>
<li><a href=""https://plus.google.com/109072532559844610756/posts/Mn9SpcA5cHz"" rel=""noreferrer"">https://plus.google.com/109072532559844610756/posts/Mn9SpcA5cHz</a></li>
</ul>

<h3>Next Steps</h3>

<ul>
<li>Perhaps the issue is related to creating the nested <strong>ChildFragment</strong> (<em>PriceGraphFragment</em>) in the <strong>ParentFragment</strong>'s (<em>HomeFragment</em>) <code>onViewCreated()</code>?</li>
</ul>

<p><em>ParentFragment</em></p>

<pre><code>override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
    super.onViewCreated(view, savedInstanceState)
    user = viewModel.getCurrentUser()
     if (savedInstanceState == null) {
         fragmentManager
                ?.beginTransaction()
                ?.replace(binding.priceDataContainer.id, 
                   PriceGraphFragment.newInstance())
                ?.commit()
}
</code></pre>

<ul>
<li>Test replacing the LiveData objects with RxJava observables.</li>
</ul>
",2253682,,2253682,,2018-08-21 19:37:43,2019-03-18 7:03:57,Multiple LiveData Observers After Popping Fragment,<android><android-fragments><kotlin><android-navigation><android-livedata>,2,16,,,
Android,51988532,1,51988806,,2018,,6,308,"<p>I have been looking at some Google sample code and they seem to create a singleton using the the following code:</p>

<pre><code>companion object {

        // For Singleton instantiation
        @Volatile
        private var instance: CarRepository? = null

        fun getInstance(carDao: CarDao) =
                instance ?: synchronized(this) {
                    instance ?: CarRepository(carDao).also { instance = it }
                }
    }
</code></pre>

<p>So I know <code>@Volatile</code> means that </p>

<blockquote>
  <p>Marks the JVM backing field of the annotated property as volatile, meaning that writes to this field are immediately made visible to other threads.</p>
</blockquote>

<p>Should all Singletons instances always be marked as <code>@Volatile</code>? If so, why?</p>

<p>Lastly, I don't understand the <code>getInstance</code> function</p>

<pre><code>instance ?: synchronized(this) {
    instance ?: CarRepository(carDao).also { instance = it }
}
</code></pre>

<p>What is it exactly doing here? </p>

<p>UPDATE:
Source: <a href=""https://github.com/googlesamples/android-sunflower"" rel=""nofollow noreferrer"">Google's Sunflower</a> 
I changed the Repository and Dao name for my own use, but it is the same logic in the <code>Repository</code> files.</p>
",1270257,,1963973,,2018-08-23 20:52:01,2018-08-23 20:52:01,Getting a Singleton in Kotlin,<kotlin>,2,3,,,
Android,46465056,1,,,2017,,6,8033,"<p>I am using Android Support Library 26.1.0. These are the dependencies in app module - </p>

<pre><code>implementation ""android.arch.lifecycle:runtime:1.0.0""
implementation ""android.arch.lifecycle:extensions:1.0.0-beta1""
implementation ""android.arch.persistence.room:rxjava2:1.0.0-beta1""
implementation ""android.arch.lifecycle:common-java8:1.0.0-beta1""
annotationProcessor ""android.arch.lifecycle:compiler:1.0.0-beta1""
</code></pre>

<p>But when I am trying to use ViewModel like below - </p>

<pre><code>mUserViewModel.getUsers().observe(this,
            (Observer&lt;Resource&lt;List&lt;UserView&gt;&gt;&gt;) listResource -&gt; {
                if(listResource != null){
                    this.handleDataState(listResource.status, listResource.data, listResource.message);
                }
            });
</code></pre>

<p>It is showing error at <code>this</code> and the error message is <code>Wrong first argument type Found: packagename.BrowseActivity, required: android.arch.lifecycle.LifecycleOwner</code>. (Although support library version is 26.1+ which already implements LifecycleOwner)</p>

<p>I have also tried to implement <code>LifecycleRegistryOwner</code> which I found in this <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/MainActivity.java"" rel=""noreferrer"">sample</a> and this is also not working. Kindly suggest a solution and let me know if I am doing anything wrong.</p>

<p><strong>Edit 1</strong> - 
This is Activity class</p>

<pre><code>import android.arch.lifecycle.Observer;
import android.arch.lifecycle.ViewModelProviders;
import android.os.Bundle;
import android.support.v7.app.AppCompatActivity;
import android.support.v7.widget.LinearLayoutManager;
import android.support.v7.widget.RecyclerView;
import android.view.View;
import android.widget.ProgressBar;

import com.github.amitkma.boilerplate.app.R;
import com.github.amitkma.boilerplate.app.mapper.UserMapper;
import com.github.amitkma.boilerplate.app.model.UserModel;
import com.github.amitkma.boilerplate.app.ui.widget.EmptyView;
import com.github.amitkma.boilerplate.app.ui.widget.ErrorView;
import com.github.amitkma.boilerplate.presentation.data.Resource;
import com.github.amitkma.boilerplate.presentation.data.ResourceState;
import com.github.amitkma.boilerplate.presentation.factory.ViewModelFactory;
import com.github.amitkma.boilerplate.presentation.viewmodel.UserViewModel;
import com.github.amitkma.boilerplate.presentation.vo.UserView;

import java.util.ArrayList;
import java.util.List;

import javax.inject.Inject;

import dagger.android.AndroidInjection;

public class BrowseActivity extends AppCompatActivity {

    @Inject
    UserAdapter mUserAdapter;
    @Inject
    UserMapper mUserMapper;
    @Inject
    ViewModelFactory mViewModelFactory;
    private UserViewModel mUserViewModel;

    private RecyclerView mRecyclerView;
    private ProgressBar mProgressBar;
    private ErrorView mErrorView;
    private EmptyView mEmptyView;


   @Override
   protected void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       AndroidInjection.inject(this);
       setContentView(R.layout.activity_browse);
       mUserViewModel = ViewModelProviders.of(this, mViewModelFactory)
            .get(UserViewModel.class);

       mRecyclerView = findViewById(R.id.recycler_browse);
       mProgressBar = findViewById(R.id.progress);
       mEmptyView = findViewById(R.id.view_empty);
       mErrorView = findViewById(R.id.view_error);

       setupBrowseRecycler();
       setupViewListeners();
   }

    @Override
    protected void onStart() {
        super.onStart();
        mUserViewModel.getUsers().observe(this,
            (Observer&lt;Resource&lt;List&lt;UserView&gt;&gt;&gt;) listResource -&gt; {
                if(listResource != null){
                    this.handleDataState(listResource.status, listResource.data, listResource.message);
                }
            });
    }
    ....
}
</code></pre>

<p>This is ViewModel Class</p>

<pre><code>import android.arch.lifecycle.LiveData;
import android.arch.lifecycle.MutableLiveData;
import android.arch.lifecycle.ViewModel;

import com.github.amitkma.boilerplate.domain.interactor.GetUserList;
import com.github.amitkma.boilerplate.domain.model.User;
import com.github.amitkma.boilerplate.presentation.data.Resource;
import com.github.amitkma.boilerplate.presentation.data.ResourceState;
import com.github.amitkma.boilerplate.presentation.mapper.UserMapper;
import com.github.amitkma.boilerplate.presentation.vo.UserView;

import java.util.ArrayList;
import java.util.List;

import javax.inject.Inject;

import io.reactivex.subscribers.DisposableSubscriber;

public class UserViewModel extends ViewModel {

    private final GetUserList mGetUserList;
    private final UserMapper mUserMapper;

    @Inject
    public UserViewModel(GetUserList getUserList,
            UserMapper userMapper) {
        mGetUserList = getUserList;
        mUserMapper = userMapper;
        fetchUsers();
    }

    public void fetchUsers(){
        mUserMutableLiveData.postValue(new Resource(ResourceState.LOADING, null, null));
        mGetUserList.execute(new UserSubscriber(), null);
    }

    public LiveData&lt;Resource&lt;List&lt;UserView&gt;&gt;&gt; getUsers(){
        return mUserMutableLiveData;
    }

    @Override
    protected void onCleared() {
        mGetUserList.dispose();
        super.onCleared();
    }

    private final MutableLiveData&lt;Resource&lt;List&lt;UserView&gt;&gt;&gt; mUserMutableLiveData =
        new MutableLiveData&lt;&gt;();
</code></pre>

<p>}</p>
",4440076,,4440076,,2017-09-28 9:27:01,2019-04-14 19:41:26,AppCompatActivity not implementing LifecycleOwner,<java><android><android-architecture-components><android-architecture-lifecycle>,2,7,,,
Android,38601271,1,38646673,,2016,,6,656,"<p>I'm developing an audio streaming application for Android and integrating Android Auto. I've been following these two tutorials.</p>

<p><a href=""https://developer.android.com/training/auto/start/index.html"" rel=""noreferrer"">Android Developer Training</a></p>

<p><a href=""http://ptrprograms.blogspot.com/2015/02/using-android-auto-media-browser.html"" rel=""noreferrer"">PTR Android Blog</a></p>

<p>Using the Desktop Head Unit, I'm able to select my media app from the media app list, but from there a <code>ProgressBar</code> stays instead of giving way to the ""To play something, open the menu at the top left."" message seen in the <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""noreferrer"">Universal Music Player</a>.</p>

<p>On inspection, it seems that the <code>MediaBrowserServiceCompat</code>'s <code>onGetRoot()</code>is never invoked and thus never populating my <code>MediaItemCompat</code> into the Auto app's list.</p>

<p>My manifest contains the following.</p>

<pre><code>&lt;manifest package=""com.app.audio""
      xmlns:android=""http://schemas.android.com/apk/res/android""&gt;

&lt;uses-permission android:name=""android.permission.ACCESS_NETWORK_STATE""/&gt;
&lt;uses-permission android:name=""android.permission.INTERNET""/&gt;
&lt;uses-permission android:name=""android.permission.WAKE_LOCK""/&gt;
&lt;uses-permission android:name=""android.permission.RECORD_AUDIO""/&gt;
&lt;uses-permission android:name=""android.permission.ACCESS_FINE_LOCATION""/&gt;
&lt;uses-permission android:name=""android.permission.MEDIA_CONTENT_CONTROL""/&gt;
&lt;uses-permission android:name=""android.permission.RECEIVE_BOOT_COMPLETED""/&gt;

&lt;application
    android:name=""com.app.audio.AudioApp""
    android:allowBackup=""true""
    android:icon=""@drawable/ic_launcher""
    android:label=""@string/app_name""
    android:theme=""@style/AppTheme""&gt;


    &lt;activity
        android:name=""com.app.audio.presentation.home.HomeActivity""
        android:label=""@string/app_name""
        android:launchMode=""singleTop""&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=""android.intent.action.MAIN""/&gt;

            &lt;category android:name=""android.intent.category.LAUNCHER""/&gt;
        &lt;/intent-filter&gt;
    &lt;/activity&gt;

    &lt;activity
        android:name=""com.app.audio.presentation.weather.WeatherActivity""
        android:screenOrientation=""userPortrait""/&gt;

    &lt;activity android:name=""com.app.audio.presentation.settings.SettingsActivity""/&gt;

    &lt;activity android:name=""com.app.audio.presentation.alarm.AlarmActivity""/&gt;

    &lt;activity android:name=""com.app.audio.presentation.sleep.SleepActivity""/&gt;

    &lt;receiver android:name=""com.app.audio.audio.AudioIntentReceiver""&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=""android.intent.action.MEDIA_BUTTON""/&gt;
            &lt;action android:name=""android.media.AUDIO_BECOMING_NOISY""/&gt;
        &lt;/intent-filter&gt;
    &lt;/receiver&gt;

    &lt;receiver android:name=""com.app.audio.presentation.alarm.AlarmReceiver""&gt;&lt;/receiver&gt;

    &lt;receiver android:name=""com.app.audio.presentation.sleep.SleepReceiver""&gt;&lt;/receiver&gt;

    &lt;service
        android:name=""com.app.audio.data.service.media.MediaService""
        android:exported=""true""&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=""android.media.browse.MediaBrowserService""/&gt;
        &lt;/intent-filter&gt;
    &lt;/service&gt;

    &lt;meta-data
        android:name=""com.google.android.gms.version""
        android:value=""@integer/google_play_services_version""/&gt;

    &lt;meta-data
        android:name=""com.google.android.gms.car.application""
        android:resource=""@xml/automotive_app_desc""/&gt;

    &lt;meta-data
        android:name=""com.google.android.gms.car.notification.SmallIcon""
        android:resource=""@drawable/ic_launcher""/&gt;
&lt;/application&gt;
</code></pre>

<p></p>

<p>My <code>automotive_app_desc.xml</code> is very simple, only declaring Media.</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;automotiveApp&gt;
    &lt;uses name=""media""/&gt;
&lt;/automotiveApp&gt;
</code></pre>

<p>My <code>MediaService</code> extends <code>MediaBrowserServiceCompat</code>. In the <code>onCreate()</code> I create and set my <code>MediaSessionCompat</code>.</p>

<pre><code>@Override
public void onCreate() {
    super.onCreate();
    //...
    mediaSession = new MediaSessionCompat(
            this,
            SESSION_TAG,
            mediaIntentReceiver,
            null
    );

    mediaSession.setFlags(
            MediaSessionCompat.FLAG_HANDLES_MEDIA_BUTTONS |
                    MediaSessionCompat.FLAG_HANDLES_TRANSPORT_CONTROLS);

    mediaSession.setCallback(new MediaSessionCompat.Callback() {
        @Override
        public void onPlay() {
            super.onPlay();
            play(selectedStream);
        }

        @Override
        public void onPause() {
            super.onPause();
            pause();
        }

        @Override
        public void onStop() {
            super.onStop();
            stop();
        }

        @Override
        public void onSkipToNext() {
            super.onSkipToNext();
            playNextStation();
        }

        @Override
        public void onSkipToPrevious() {
            super.onSkipToPrevious();
            playPreviousStation();
        }
    });

    mediaSession.setActive(true);
    setSessionToken(mediaSession.getSessionToken());
    updatePlaybackState(ACTION_STOP);
}
</code></pre>

<p>Finally, the two overridden methods from <code>MediaBrowserServiceCompat</code>, of which neither is ever called.</p>

<pre><code>@Nullable
@Override
public BrowserRoot onGetRoot(@NonNull String clientPackageName, int clientUid, @Nullable Bundle rootHints) {
    return new BrowserRoot(ROOT_ID, null);
}

@Override
public void onLoadChildren(@NonNull String parentId, @NonNull Result&lt;List&lt;MediaBrowserCompat.MediaItem&gt;&gt; result) {
    List&lt;MediaBrowserCompat.MediaItem&gt; items = getMediaItemsById(parentId);
    if (items != null) {
        result.sendResult(items);
    }
}
</code></pre>

<p>As far as I can tell, that's everything required to get an Android Auto started, yet when I open the app on my desktop head unit, there is only a <code>ProgressBar</code> greeting me, and when I open the off-screen nav drawer, there's another one. I haven't heard of that state in any material I've read. Is there something I missed?</p>
",1880711,,,,,2017-01-31 2:01:30,Android Auto app never calls onGetRoot,<android><android-auto>,2,0,,,
Android,35877936,1,,,2016,,6,1661,"<p>On the official sources did not find the information ... There are many examples of how to work with the Camera API, but how to work with Camera2API anything ... a couple of discussions at Stake and all ... there is a similar question to me, but I have a problem not solved. ..</p>

<p><strong>link to the same quetion :</strong>
<a href=""https://stackoverflow.com/questions/30334319/android-camera2-face-recognition"">Android camera2 face recognition</a></p>

<p><strong>I took the example of <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">Google's API for Camera 2</a></strong>.</p>

<p>That's what I did, but I did not detect a face :</p>

<p>I added events</p>

<pre><code>    private void createCameraPreviewSession() {
    try {
        SurfaceTexture texture = mTextureView.getSurfaceTexture();
        assert texture != null;

        // We configure the size of default buffer to be the size of camera preview we want.
        texture.setDefaultBufferSize(mPreviewSize.getWidth(), mPreviewSize.getHeight());

        // This is the output Surface we need to start preview.
        Surface surface = new Surface(texture);

        // We set up a CaptureRequest.Builder with the output Surface.
        mPreviewRequestBuilder
                = mCameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_PREVIEW);
        mPreviewRequestBuilder.addTarget(surface);

        // Here, we create a CameraCaptureSession for camera preview.
        mCameraDevice.createCaptureSession(Arrays.asList(surface, mImageReader.getSurface()),
                new CameraCaptureSession.StateCallback() {

                    @Override
                    public void onConfigured(@NonNull CameraCaptureSession cameraCaptureSession) {
                        // The camera is already closed
                        if (null == mCameraDevice) {
                            return;
                        }

                        // When the session is ready, we start displaying the preview.
                        mCaptureSession = cameraCaptureSession;
                        try {



//           ----&gt;&gt;            
                            mPreviewRequestBuilder.set(CaptureRequest.STATISTICS_FACE_DETECT_MODE,
                                    CameraMetadata.STATISTICS_FACE_DETECT_MODE_FULL);



                            // Auto focus should be continuous for camera preview.
                            mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AF_MODE,
                                    CaptureRequest.CONTROL_AF_MODE_CONTINUOUS_PICTURE);

                            // Flash is automatically enabled when necessary.
                            setAutoFlash(mPreviewRequestBuilder);

                            // Finally, we start displaying the camera preview.
                            mPreviewRequest = mPreviewRequestBuilder.build();

                            mCaptureSession.setRepeatingRequest(mPreviewRequest,
                                    mCaptureCallback, mBackgroundHandler);
                        } catch (CameraAccessException e) {
                            e.printStackTrace();
                        }
                    }

                    @Override
                    public void onConfigureFailed(
                            @NonNull CameraCaptureSession cameraCaptureSession) {
                        System.out.println(""Failed  757"");
                    }
                }, null
        );
    } catch (CameraAccessException e) {
        e.printStackTrace();
    }
}

private CameraCaptureSession.CaptureCallback mCaptureCallback
        = new CameraCaptureSession.CaptureCallback() {

    @Override
    public void onCaptureProgressed(@NonNull CameraCaptureSession session,
                                    @NonNull CaptureRequest request,
                                    @NonNull CaptureResult partialResult) {
        process(partialResult);
    }

    @Override
    public void onCaptureCompleted(@NonNull CameraCaptureSession session,
                                   @NonNull CaptureRequest request,
                                   @NonNull TotalCaptureResult result) {
        process(result);
    }

    private void process(CaptureResult result) {


---&gt;   //         +  
        Integer mode = result.get(CaptureResult.STATISTICS_FACE_DETECT_MODE);
        Face[] faces = result.get(CaptureResult.STATISTICS_FACES);
        if(faces != null &amp;&amp; mode != null)
            System.out.println(""tagDDDDDDDDDDDDDDDDDDDDDDDD"" + ""faces : "" +
                    faces.length + "" , mode : "" + mode);

        switch (mState) {
            case STATE_PREVIEW: {
                // We have nothing to do when the camera preview is working normally.

//                  Here i set Face Detection
                mPreviewRequestBuilder.set(CaptureRequest.STATISTICS_FACE_DETECT_MODE,
                        CameraMetadata.STATISTICS_FACE_DETECT_MODE_FULL);
                break;
            }
</code></pre>

<p><strong>here i am checking max count of faces that camera can get</strong></p>

<pre><code>    private void setUpCameraOutputs(int width, int height) {

    CameraManager manager = (CameraManager) getSystemService(Context.CAMERA_SERVICE);
    try {
        for (String cameraId : manager.getCameraIdList()) {
            CameraCharacteristics characteristics
                    = manager.getCameraCharacteristics(cameraId);

            // We don't use a front facing camera in this sample.
            Integer facing = characteristics.get(CameraCharacteristics.LENS_FACING);
            if (facing != null &amp;&amp; facing == CameraCharacteristics.LENS_FACING_FRONT) {
                continue;
            }

            max_count = characteristics.get(
                    CameraCharacteristics.STATISTICS_INFO_MAX_FACE_COUNT);
            modes = characteristics.get(
                    CameraCharacteristics.STATISTICS_INFO_AVAILABLE_FACE_DETECT_MODES);

            System.out.println(""!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! max_count "" + max_count + "" modes "" + modes);
</code></pre>

<p>** Output is: **</p>

<pre><code>I/System.out: !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! max_count 16 modes [I@3e2907e8
</code></pre>

<p>** And this is what a log prints **</p>

<pre><code>    03-08 18:34:07.018 7405-7438/com.example.android.camera2basic I/System.out: tagDDDDDDDDDDDDDDDDDDDDDDDDfaces : 0 , mode : 1
03-08 18:34:07.048 7405-7438/com.example.android.camera2basic I/System.out: tagDDDDDDDDDDDDDDDDDDDDDDDDfaces : 0 , mode : 1
03-08 18:34:07.078 7405-7438/com.example.android.camera2basic I/System.out: tagDDDDDDDDDDDDDDDDDDDDDDDDfaces : 0 , mode : 1
03-08 18:34:07.118 7405-7438/com.example.android.camera2basic I/System.out: tagDDDDDDDDDDDDDDDDDDDDDDDDfaces : 0 , mode : 1
03-08 18:34:07.148 7405-7438/com.example.android.camera2basic I/System.out: tagDDDDDDDDDDDDDDDDDDDDDDDDfaces : 0 , mode : 1
03-08 18:34:07.178 7405-7438/com.example.android.camera2basic I/System.out: tagDDDDDDDDDDDDDDDDDDDDDDDDfaces : 0 , mode : 1
03-08 18:34:07.218 7405-7438/com.example.android.camera2basic I/System.out: tagDDDDDDDDDDDDDDDDDDDDDDDDfaces : 0 , mode : 1
03-08 18:34:07.258 7405-7438/com.example.android.camera2basic I/System.out: tagDDDDDDDDDDDDDDDDDDDDDDDDfaces : 0 , mode : 1
03-08 18:34:07.288 7405-7438/com.example.android.camera2basic I/System.out: tagDDDDDDDDDDDDDDDDDDDDDDDDfaces : 0 , mode : 1
03-08 18:34:07.308 7405-7438/com.example.android.camera2basic I/System.out: tagDDDDDDDDDDDDDDDDDDDDDDDDfaces : 0 , mode : 1
03-08 18:34:07.348 7405-7438/com.example.android.camera2basic I/System.out: tagDDDDDDDDDDDDDDDDDDDDDDDDfaces : 0 , mode : 1
</code></pre>

<p>Why it isn't reterning face? If someone have a correct working exsample, give please a link. How i can make face detection with camera2API. Throughout the week, I can not understand((</p>
",5709159,,-1,,2017-05-23 12:16:06,2016-03-29 4:53:34,Who has a material how to work with the Face Detection Camera 2 API?,<java><android><camera><android-camera>,2,4,,,
Android,32063524,1,,,2015,,7,4011,"<p>I am working with <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""noreferrer"">camera2Basic</a> now and trying to get each frame data to do some image processing. I am using camera2 API in Android5.0, everything is fine when only doing the camera preview and it is fluid. But the preview stuck when I use the <code>ImageReader.OnImageAvailableListener</code> callback to get each frame data, this cause a bad User Experience. 
The following is my related codes:</p>

<p>This is the setup for camera and ImageReader, I set the format of image is YUV_420_888</p>

<pre><code>public&lt;T&gt; Size setUpCameraOutputs(CameraManager cameraManager,Class&lt;T&gt; kClass, int width, int height) {
    boolean flagSuccess = true;
    try {
        for (String cameraId : cameraManager.getCameraIdList()) {
            CameraCharacteristics characteristics = cameraManager.getCameraCharacteristics(cameraId);
            // choose the front or back camera
            if (FLAG_CAMERA.BACK_CAMERA == mChosenCamera &amp;&amp;        
                    CameraCharacteristics.LENS_FACING_BACK != characteristics.get(CameraCharacteristics.LENS_FACING)) {
                continue;
            }
            if (FLAG_CAMERA.FRONT_CAMERA == mChosenCamera &amp;&amp;  
                    CameraCharacteristics.LENS_FACING_FRONT != characteristics.get(CameraCharacteristics.LENS_FACING)) {
                continue;
            }
            StreamConfigurationMap map = characteristics.get(
                    CameraCharacteristics.SCALER_STREAM_CONFIGURATION_MAP);

            Size largestSize = Collections.max(
                    Arrays.asList(map.getOutputSizes(ImageFormat.YUV_420_888)),
                    new CompareSizesByArea());

            mImageReader = ImageReader.newInstance(largestSize.getWidth(), largestSize.getHeight(),
                    ImageFormat.YUV_420_888, 3);

            mImageReader.setOnImageAvailableListener(mOnImageAvailableListener, mBackgroundHandler);
            ...
            mCameraId = cameraId;
       }
    } catch (CameraAccessException e) {
        e.printStackTrace();
    } catch (NullPointerException e) {

    }
    ......
}
</code></pre>

<p>When the camera opened successfully, I Create a CameraCaptureSession for camera preview</p>

<pre><code>private void createCameraPreviewSession() {
    if (null == mTexture) {
        return;
    }

    // We configure the size of default buffer to be the size of camera preview we want.
    mTexture.setDefaultBufferSize(mPreviewSize.getWidth(), mPreviewSize.getHeight());

    // This is the output Surface we need to start preview
    Surface surface = new Surface(mTexture);

    // We set up a CaptureRequest.Builder with the output Surface.
    try {
        mPreviewRequestBuilder =
                mCameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_PREVIEW);
        mPreviewRequestBuilder.addTarget(mImageReader.getSurface());
        mPreviewRequestBuilder.addTarget(surface);

        // We create a CameraCaptureSession for camera preview
        mCameraDevice.createCaptureSession(Arrays.asList(surface, mImageReader.getSurface()),
                new CameraCaptureSession.StateCallback() {

                    @Override
                    public void onConfigured(CameraCaptureSession session) {
                        if (null == mCameraDevice) {
                            return;
                        }

                        // when the session is ready, we start displaying the preview
                        mCaptureSession = session;

                        // Finally, we start displaying the camera preview
                        mPreviewRequest = mPreviewRequestBuilder.build();
                        try {
                            mCaptureSession.setRepeatingRequest(mPreviewRequest,
                                    mCaptureCallback, mBackgroundHandler);
                        } catch (CameraAccessException e) {
                            e.printStackTrace();
                        }
                    }

                    @Override
                    public void onConfigureFailed(CameraCaptureSession session) {

                    }
                }, null);
    } catch (CameraAccessException e) {
        e.printStackTrace();
    }
}
</code></pre>

<p>The last is the <code>ImageReader.OnImageAvailableListener</code> callback</p>

<pre><code>private final ImageReader.OnImageAvailableListener mOnImageAvailableListener = new ImageReader.OnImageAvailableListener() {
            @Override
            public void onImageAvailable(ImageReader reader) {
                Log.d(TAG, ""The onImageAvailable thread id: "" + Thread.currentThread().getId());
                Image readImage = reader.acquireLatestImage();
                readImage.close();
            }
        };
</code></pre>

<p>Maybe I do the wrong setup but I try several times and it doesn't work. Maybe there is another way to get frame data rather than ImageReader but I don't know.
Anybody knows how to get each frame data in realtime?</p>
",5237329,,5237329,,2015-08-18 4:39:35,2017-01-30 14:25:00,How to get each frame data using camera2 API in Android5.0 in realtime,<android><android-camera>,2,8,3,,
Android,45208116,1,45325913,,2017,,7,1088,"<p>Geocoder was working fine until today. It started to return String with 0 length.
Note: This is not a duplicate of Geocoder threads, i used intent service and AsyncTask to get it before starting the thread(and AsyncTask approach was working fine over 8 months), checked <a href=""http://www.androidauthority.com/get-location-address-android-app-628764/"" rel=""nofollow noreferrer"">this code</a> and new <a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationAddress"" rel=""nofollow noreferrer"">code</a> from Google with FusedLocationProviderClient(this is offical code) it also returns string with zero length.<a href=""https://developer.android.com/training/location/display-address.html"" rel=""nofollow noreferrer"">This link</a> from official Android page shows how to get it with intent service.</p>

<p>I get full address on Android 5.1 but on Android 7.1 it returns an address with length zero.</p>

<p>Code i used to use and worked fine until today.</p>

<pre><code>private void getAddressFromCoordinates() {

    new AsyncTask&lt;Void, String, Void&gt;() {

        @Override
        protected Void doInBackground(Void... params) {

            try {
                addresses.clear();
                addresses.addAll(geocoder.getFromLocation(mCurrentLocation.getLatitude(),
                        mCurrentLocation.getLongitude(), 1));


            } catch (IOException e) {
                e.printStackTrace();
                showToastAsync(getString(R.string.activity_loc_no_location_info));
            } catch (IllegalArgumentException illegalArgumentException) {
                // Catch invalid latitude or longitude values.
                showToastAsync(""Invalid latitude or longitude values"");
            }

            // Handle case where no address was found.
            if (addresses == null || addresses.size() == 0) {
                showToastAsync(getString(R.string.activity_loc_no_address_is_found));
            } else {
                Address address = addresses.get(0);
                ArrayList&lt;String&gt; addressFragments = new ArrayList&lt;String&gt;();
                for (int i = 0; i &lt; address.getMaxAddressLineIndex(); i++) {
                    addressFragments.add(address.getAddressLine(i));
                }

                addressInfo = TextUtils.join(System.getProperty(""line.separator""), addressFragments);
                addressSingleLine = LocationActivity.addressInfo.replaceAll(""[\r\n]+"", "" "");
            }
            return null;
        }

    }.execute();
}
</code></pre>

<p><strong>Answer</strong> is to add <code>=</code> to for loop to not retreive an address with zero length on Android 7. You don't need to do this on some versions. Also code on Google referenced Github pages is missing <strong>=</strong>. That's why i was not able to find the reason why.</p>
",5457853,,5457853,,2017-07-26 19:48:56,2017-07-26 19:48:56,Geocoder returns an address with zero length,<android><android-location>,2,0,1,,
Android,35811411,1,,,2016,,7,4829,"<p>I am playing with the original example of BarCode scanner here:</p>

<p><a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/BarcodeCaptureActivity.java"" rel=""noreferrer"">https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/BarcodeCaptureActivity.java</a></p>

<p>They are able to start the AutoFocus/Flash within the camera factory like this:</p>

<pre><code>    // Creates and starts the camera.  Note that this uses a higher resolution in comparison
    // to other detection examples to enable the barcode detector to detect small barcodes
    // at long distances.
    CameraSource.Builder builder = new CameraSource.Builder(getApplicationContext(), barcodeDetector)
            .setFacing(CameraSource.CAMERA_FACING_BACK)
            .setRequestedPreviewSize(1600, 1024)
            .setRequestedFps(15.0f);

    // make sure that auto focus is an available option
    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
        builder = builder.setFocusMode(
                autoFocus ? Camera.Parameters.FOCUS_MODE_CONTINUOUS_PICTURE : null);
    }

    mCameraSource = builder
            .setFlashMode(useFlash ? Camera.Parameters.FLASH_MODE_TORCH : null)
            .build();
</code></pre>

<p>However this method on cameraSource builder is gone in current version and so this setting cannot be accessed. Also I need to change the FlashMode during usage, so that is not the way to do it either. I found this ugly solution to accessing the camera:</p>

<pre><code>public static Camera getCamera(@NonNull CameraSource cameraSource) {
    Field[] declaredFields = CameraSource.class.getDeclaredFields();

    for (Field field : declaredFields) {
        if (field.getType() == Camera.class) {
            field.setAccessible(true);
            try {
                Camera camera = (Camera) field.get(cameraSource);
                if (camera != null) {
                    return camera;
                }

                return null;
            } catch (IllegalAccessException e) {
                e.printStackTrace();
            }

            break;
        }
    }

    return null;
}
</code></pre>

<p>Although it works, it does not help: when calling <code>getParameters().setFocusMode()</code> I am getting this exception:</p>

<pre><code>Attempt to invoke virtual method 'android.hardware.Camera$Parameters android.hardware.Camera.getParameters()' on a null object reference
</code></pre>

<p>Obviously what I am doing is not a right way to do it, but there seem to be no documentation about it.</p>

<p>Thanks for hints.</p>
",922584,,2057709,,2016-03-06 4:13:04,2018-04-04 12:28:43,Accessing AutoFocus/Flash with Google Vision BarCode Reader,<android><android-camera><barcode-scanner><camera-flash>,2,1,1,,
Android,39044494,1,39054918,,2016,,8,7231,"<p>I'm building a custom camera using the new camera2 API. My code is based on the code sample provided by Google <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""noreferrer"">here</a>. </p>

<p>I can't find a way to get the camera preview in full screen. In the code sample, they use ratio optimization to adapt to all screens but it's only taking around 3/4 of the screen's height.</p>

<p>Here is my code of <code>AutoFitTextureView</code> :</p>

<pre><code>public class AutoFitTextureView extends TextureView {

private int mRatioWidth = 0;
private int mRatioHeight = 0;

public AutoFitTextureView(Context context) {
    this(context, null);
}

public AutoFitTextureView(Context context, AttributeSet attrs) {
    this(context, attrs, 0);
}

public AutoFitTextureView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

/**
 * Sets the aspect ratio for this view. The size of the view will be measured based on the ratio
 * calculated from the parameters. Note that the actual sizes of parameters don't matter, that
 * is, calling setAspectRatio(2, 3) and setAspectRatio(4, 6) make the same result.
 *
 * @param width  Relative horizontal size
 * @param height Relative vertical size
 */
public void setAspectRatio(int width, int height) {
    if (width &lt; 0 || height &lt; 0) {
        throw new IllegalArgumentException(""Size cannot be negative."");
    }
    mRatioWidth = width;
    mRatioHeight = height;
    requestLayout();
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    int width = MeasureSpec.getSize(widthMeasureSpec);
    int height = MeasureSpec.getSize(heightMeasureSpec);

    if (0 == mRatioWidth || 0 == mRatioHeight) {
        setMeasuredDimension(width, height);
    } else {
        if (width &lt; height * mRatioWidth / mRatioHeight) {
            setMeasuredDimension(width, width * mRatioHeight / mRatioWidth);
        } else {
            setMeasuredDimension(height * mRatioWidth / mRatioHeight, height);
        }
    }
}
</code></pre>

<p>}</p>

<p>Thank you very much for your help.</p>
",5175297,,,,,2018-04-03 12:23:20,Get full screen preview with Android camera2,<android><camera><camera2><android-camera2>,2,0,3,,
Android,42112519,1,42176567,,2017,,8,3263,"<p>I'm trying to disable multiple <code>Barcode</code> detection at time.
How to disable <code>MultiProcessor</code> using <code>Google Vision API</code>, I couldn't find any solution from official site <a href=""https://developers.google.com/vision/android/multi-tracker-tutorial"" rel=""noreferrer"">here</a></p>

<p>I have downloaded sample from <a href=""https://github.com/googlesamples/android-vision"" rel=""noreferrer"">here</a></p>

<p><strong>Code</strong>    </p>

<pre><code>BarcodeDetector barcodeDetector = new BarcodeDetector.Builder(context).build();
    BarcodeTrackerFactory barcodeFactory = new BarcodeTrackerFactory(mGraphicOverlay);
    barcodeDetector.setProcessor(
            new MultiProcessor.Builder&lt;&gt;(barcodeFactory).build());
</code></pre>

<p>Even if remove below line, I cannot detect at all.</p>

<pre><code> barcodeDetector.setProcessor(
        new MultiProcessor.Builder&lt;&gt;(barcodeFactory).build());
</code></pre>
",3251783,,3251783,,2017-02-08 12:33:16,2017-02-11 13:45:16,How to Disable multiple barcode detection android Vision API,<android><barcode-scanner><android-vision>,2,2,2,,
Android,33763874,1,33923113,,2015,,8,1677,"<p>I'm testing Nearby connection API with the sample application available here: <a href=""https://github.com/googlesamples/android-nearby"">https://github.com/googlesamples/android-nearby</a>
It seems that this is not working for some devices. I successfully connected Samsung Galaxy S3 with Nexus 7, in both directions (S3 as host, N7 as slave and vice versa). However, when I try to connect Samusung Galaxy S3 to Nexus 5, the connection ALWAYS fails, with status code 8005. </p>

<p>Below you can see the method invoked by slave (discovering device) in order to connect to host (advertising device).</p>

<pre><code>private void connectTo(String endpointId, final String endpointName) {
    debugLog(""connectTo:"" + endpointId + "":"" + endpointName);

    // Send a connection request to a remote endpoint. By passing 'null' for the name,
    // the Nearby Connections API will construct a default name based on device model
    // such as 'LGE Nexus 5'.
    String myName = null;
    byte[] myPayload = null;
    Nearby.Connections.sendConnectionRequest(mGoogleApiClient, myName, endpointId, myPayload,
            new Connections.ConnectionResponseCallback() {
                @Override
                public void onConnectionResponse(String endpointId, Status status,
                                                 byte[] bytes) {
                    Log.d(TAG, ""onConnectionResponse:"" + endpointId + "":"" + status);
                    if (status.isSuccess()) {
                        debugLog(""onConnectionResponse: "" + endpointName + "" SUCCESS"");
                        Toast.makeText(MainActivity.this, ""Connected to "" + endpointName,
                                Toast.LENGTH_SHORT).show();

                        mOtherEndpointId = endpointId;
                        updateViewVisibility(STATE_CONNECTED);
                    } else {
                        debugLog(""onConnectionResponse: "" + endpointName + "" FAILURE. ResponseCode="" + status.getStatusCode() + "" statusMessage="" + status.getStatusMessage() );
                    }
                }
            }, this);
}
</code></pre>

<p>The result I always get is :<br>
11-17 18:48:50.678 11133-11133/com.google.example.connectionsquickstart D/MainActivity: onConnectionResponse: Samsung GT-I9300 FAILURE. ResponseCode=8005 statusMessage=null</p>

<p>Any clue what is going on?</p>
",229697,,,,,2015-11-25 17:55:35,Nearby connection API for Android - not working for some devices,<android><google-nearby>,2,0,2,,
Android,29822760,1,,,2015,,8,9353,"<p>Final intention here is to have a device in 'kiosk mod'.</p>

<p><a href=""http://sdgsystems.com/blog/implementing-kiosk-mode-android-part-3-android-lollipop/"" rel=""nofollow noreferrer"">They</a> <a href=""http://florent-dupont.blogspot.fr/2015/01/android-shell-command-dpm-device-policy.html"" rel=""nofollow noreferrer"">say</a> you don't need NFC nor rooting to achieve application becoming <a href=""http://developer.android.com/about/versions/android-5.0.html#DeviceOwner"" rel=""nofollow noreferrer"">device owner</a>. I've yet to see a full example of this method but lets try:</p>

<pre><code>adb shell dpm set-device-owner &lt;package&gt;/.&lt;ReceiverImplementation&gt;
</code></pre>

<p>should do... So I do so, and get: </p>

<pre><code>java.lang.SecurityException: 
Neither user 2000 nor current process has android.permission.BIND_DEVICE_ADMIN.
</code></pre>

<p>Following code, therefore, returns false.</p>

<pre><code>((DevicePolicyManager) getSystemService(Context.DEVICE_POLICY_SERVICE))
   .isDeviceOwnerApp(getApplicationContext().getPackageName())
</code></pre>

<p><a href=""https://stackoverflow.com/questions/28112382/device-owner-without-using-nfc-in-android-lollipop"">This STO question</a> poses a similar question but doesn't specify an actual failure..</p>

<p>Manifest file and the rest of the source is mostly inspired from <a href=""https://github.com/googlesamples/android-DeviceOwner"" rel=""nofollow noreferrer"">this google sample</a></p>

<pre><code>&lt;manifest
    package=""com.example.android.deviceowner""
    xmlns:android=""http://schemas.android.com/apk/res/android""
    android:versionCode=""1""
    android:versionName=""1.0""&gt;

    &lt;application
        android:allowBackup=""true""
        android:icon=""@drawable/ic_launcher""
        android:label=""@string/app_name""
        android:theme=""@style/AppTheme""&gt;

        &lt;activity
            android:name="".MainActivity""
            android:label=""@string/app_name""&gt;
            &lt;intent-filter&gt;
                &lt;action android:name=""android.intent.action.MAIN""/&gt;
                &lt;category android:name=""android.intent.category.LAUNCHER""/&gt;
            &lt;/intent-filter&gt;
        &lt;/activity&gt;

        &lt;receiver
            android:name="".DeviceOwnerReceiver""
            android:description=""@string/app_name""
            android:label=""@string/app_name""
            android:permission=""android.permission.BIND_DEVICE_ADMIN""&gt;
            &lt;meta-data
                android:name=""android.app.device_admin""
                android:resource=""@xml/device_owner_receiver""/&gt;
            &lt;intent-filter&gt;
                &lt;action android:name=""android.app.action.ACTION_DEVICE_ADMIN_ENABLED""/&gt;
            &lt;/intent-filter&gt;
        &lt;/receiver&gt;

    &lt;/application&gt;

&lt;/manifest&gt;
</code></pre>

<p>Device I am trying to do this currently is LG G Pad.</p>
",2208247,,-1,,2017-05-23 11:47:28,2016-05-12 13:42:14,"Device owner on a nonrooted device (Android L), without NFC, using adb shell, dpm set-device-owner",<android><android-5.0-lollipop><kiosk-mode>,2,15,1,,
Android,54016644,1,54017265,,2019,,9,704,"<p>I was reading about the <a href=""https://github.com/googlesamples/android-testing"" rel=""nofollow noreferrer"">Android Testing Samples</a> project and noticed that a ""<strong>new</strong>"" build tool named <strong>Bazel</strong> is being used for building Android projects:</p>

<blockquote>
  <h2>Experimental Bazel Support</h2>
  
  <p>Some of these samples can be built with Bazel on Linux. These samples contain a <code>BUILD.bazel</code> file, which is similar to a <code>build.gradle</code> file. The external dependencies are defined in the top level WORKSPACE file.</p>
  
  <p>This is experimental feature. To run the tests, please install the latest version of Bazel (0.12.0 or later) by following the instructions on the Bazel website. </p>
</blockquote>

<p>Then, </p>

<ul>
<li>What is the added advantage of using Bazel over the existing Gradle? </li>
<li>Is it really good to have TWO build tools for Android? </li>
<li>Does it mean that Android developers will probably need to learn this new build tool in future?</li>
</ul>

<hr>

<p><strong>Update #1:</strong> Updated with accepted answer from <a href=""https://stackoverflow.com/users/7357920/farhana"">farhana</a> and thanks to <a href=""https://stackoverflow.com/users/521209/jin"">Jin</a> for the in depth details about the google build systems. </p>

<p><strong>Update #2:</strong> Updated with google code labs for <a href=""https://codelabs.developers.google.com/codelabs/bazel-android-intro/index.html#0"" rel=""nofollow noreferrer"">bazel android introduction</a>. </p>
",8034839,,8034839,,2019-02-22 8:16:21,2019-03-15 4:47:43,What is the added advantage of using Bazel over Gradle?,<android><gradle><android-gradle><android-testing><bazel>,2,3,6,2019-01-18 19:04:54,
Android,47236796,1,,,2017,,9,1107,"<p>I was looking in to the google sample for the new architecture component, where I found the the code as below:</p>

<pre><code>dependencies {
    // Support libraries
    implementation deps.support.app_compat
    implementation deps.support.v4
    implementation deps.support.design
    implementation deps.support.cardview

    // Architecture components
    implementation deps.lifecycle.runtime
    implementation deps.lifecycle.extensions
    annotationProcessor deps.lifecycle.compiler
    implementation deps.room.runtime
    annotationProcessor deps.room.compiler

    // Android Testing Support Library's runner and rules
    androidTestImplementation deps.atsl.runner
    androidTestImplementation deps.atsl.rules
    androidTestImplementation deps.room.testing
    androidTestImplementation deps.arch_core.testing

    // Espresso UI Testing
    androidTestImplementation deps.espresso.core
    androidTestImplementation deps.espresso.contrib
    androidTestImplementation deps.espresso.intents

    // Resolve conflicts between main and test APK:
    androidTestImplementation deps.support.annotations
    androidTestImplementation deps.support.v4
    androidTestImplementation deps.support.app_compat
    androidTestImplementation deps.support.design
}
</code></pre>

<p>I am not able to understand why they have written all the dependency starting with <code>deps.*</code>. Could anybody help me understand the code. Thanks in advance.
Here is the <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/BasicSample/app/build.gradle"" rel=""noreferrer"">link</a> to the repo.</p>
",4820070,,542270,,2017-11-11 10:25:47,2017-11-24 15:06:06,"What is ""deps"" in ""implementation deps.support.app_compat""?",<android><gradle><build.gradle>,2,1,5,,
Android,32961771,1,,,2015,,9,1918,"<p>I'm trying to create an app that takes some photos from a service using the <strong>camera2 API</strong>.</p>

<p>I can get the app to take pictures fine from a fragment based on the <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/d7a3bfd0f2a2a3a6447a41f7b729fcae571ef020/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"">Camera2Basic sample</a>.</p>

<p>But when I try move to a service the image doesn't finish capturing properly. It never progresses past the autoexposure precapture state.</p>

<p>I narrowed it down to being some problem with not having a preview. I've put together a test fragment by taking the <strong>Camera2Basic</strong> code and removing the preview, which results in the same issue.</p>

<p>I put together a test fragment that has the issue, based on the Camera2Basic sample where i've basically just removed code for the preview. Fragment code uploaded here <a href=""http://pastebin.ca/3182401"">http://pastebin.ca/3182401</a>.</p>

<p>I'm getting the <strong>onCaptureCompleted()</strong> callback but when i check the camera autoexposure state here, it's still in the <strong>CONTROL_AE_STATE_PRECAPTURE</strong> state.</p>

<p>It doesn't make sense to me that the capture would be completed if one of the camera states is still in precapture.</p>

<p>Anyone know what might be happening here?</p>
",2128112,,609602,,2015-10-12 7:32:15,2015-11-25 23:44:18,Camera2 API onCaptureComplete() is called but camera state is still CONTROL_AE_STATE_PRECAPTURE,<android><android-camera><camera2>,2,3,1,,
Android,30172529,1,,,2015,,10,753,"<p><a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">One of the official Google samples for the Camera2 API</a> suffers from <a href=""https://github.com/googlesamples/android-Camera2Basic/issues/10"" rel=""nofollow noreferrer"">the same <code>BufferQueue has been abandoned</code> problem</a> as is seen in:</p>

<ul>
<li><a href=""https://stackoverflow.com/questions/22486762/what-can-i-do-when-the-bufferqueue-has-been-abandoned"">What can I do when the BufferQueue has been abandoned?</a></li>
<li><a href=""https://stackoverflow.com/questions/30111951/android-logcat-shows-bufferqueueprocedure-solved"">Android LogCat shows BufferQueueProcedure</a></li>
</ul>

<p>Specifically, the sample app calls a <code>closeCamera()</code> method from <code>onPause()</code> of a fragment, where <code>closeCamera()</code> calls <code>close()</code> on the <code>CameraCaptureSession</code>, then <code>close()</code> on the <code>CameraDevice</code>, then <code>close()</code> on the <code>ImageReader</code> (used for actual picture-taking). After the <code>close()</code> on <code>CameraDevice</code> is when a few occurrences of the aforementioned <code>BufferQueue has been abandoned</code> message appears in LogCat, though I only get the message on some Android 5.1 hardware (Nexus 4 and Nexus 7 2013) and not others (Nexus 5 and Nexus 6).</p>

<p>fadden's comment on this was:</p>

<blockquote>
  <p>If the consumer side is shut down before entering onPause(), the messages would be expected.</p>
</blockquote>

<p>When will <code>TextureView</code>'s ""consumer side"" will be shut down, and why then?</p>

<p>Google's sample code does not proactively do anything to shut down the <code>TextureView</code> that I can see. And, since the <code>TextureView</code> could still be visible when paused, I would have expected that the ""consumer side"" would not be affected at the time of <code>onPause()</code>, but perhaps later in <code>onStop()</code>.</p>

<p>While I realize that this message (despite being an error) is benign, I'm trying to figure out how to get rid of it, if for no other reason than to prevent my being asked time and again why code of mine is logging this error. I am hoping that by understanding more about this ""consumer side"", I can figure out how better to tidy things up when the user exits a Camera2-using activity or fragment and avoid this error.</p>
",115145,,-1,,2017-05-23 11:51:56,2015-05-19 20:22:42,"When Is a TextureView's ""Consumer Side"" Closed?",<android><android-camera><textureview>,2,2,4,,
Android,32142463,1,32273525,,2015,,10,4336,"<p>This is first time I am using espresso intents, I followed <a href=""https://github.com/googlesamples/android-testing/tree/master/ui/espresso/IntentsBasicSample"" rel=""noreferrer"">IntentsBasicSamle</a> provided in the android-testing project but no solved.</p>

<p>In my app I have a activity where user selects multiple images and then returned images are shown in the gridview, Now by using the espresso intents I want to mock this without going to actual image picker and return some specified images everytime.</p>

<p>No error but still opens the image chooser window when I run the test. I feel I am doing it wrong but I am not getting how it works. </p>

<p>I am testing using apk.</p>

<p>This is how photo picker is called</p>

<p><strong>App code</strong></p>

<p>This is how I am calling select images Intent and result is handled in onActivityResult.</p>

<pre><code>if (ApiUtils.checkApiLevel(18)) {
        //API18+
        intent.putExtra(Intent.EXTRA_ALLOW_MULTIPLE, true);
    }
    intent.setAction(Intent.ACTION_GET_CONTENT);
    startActivityForResult(Intent.createChooser(intent,      getActivity().getString(R.string.fragment_image_selection_select_picture)), 1);
</code></pre>

<p><strong>Testing Code</strong></p>

<pre><code>@RunWith(AndroidJUnit4.class)
@LargeTest
public class ImagesTests {

private static final String LAUNCHER_ACTIVITY_FULL_CLASSNAME = ""com.company.recorder.RecorderActivity"";
private static Class&lt;? extends Activity&gt; activityClass;
private ServiceValidatorIdlingResource serviceValidatorIdlingResource;

static {
    try {
        activityClass = (Class&lt;? extends Activity&gt;) Class.forName(LAUNCHER_ACTIVITY_FULL_CLASSNAME);
    } catch (ClassNotFoundException e) {
        throw new RuntimeException(e);
    }
}

/**
 * Change espresso default view idling time
 * so that test can wait for long time
 */
@Before
public void registerWaitService() {
    EspressoSolo.setIdlingResourceTimeout(30);

    Instrumentation.ActivityResult result = createImageCaptureActivityResultStub();

    // Stub the Intent.
    intending(hasAction(Intent.ACTION_GET_CONTENT)).respondWith(result);

   //For API 18 and above
    intending(hasAction(Intent.EXTRA_ALLOW_MULTIPLE)).respondWith(result);

    //intending(not(isInternal())).respondWith(result);
}

private Instrumentation.ActivityResult createImageCaptureActivityResultStub() {
    // Put the drawable in a bundle.
    Bundle bundle = new Bundle();
    Uri imageUri = Uri.parse(ContentResolver.SCHEME_ANDROID_RESOURCE + ""://"" +
            InstrumentationRegistry.getTargetContext().getPackageName()+ '/' +
            InstrumentationRegistry.getTargetContext().getResources().getResourceTypeName(R.drawable.abc_ic_menu_copy_mtrl_am_alpha) + '/' +
            InstrumentationRegistry.getTargetContext().getResources().getResourceEntryName(R.drawable.abc_ic_menu_copy_mtrl_am_alpha) );

    Parcelable parcelable = (Parcelable)imageUri;

    ArrayList&lt;Parcelable&gt; parcels = new ArrayList&lt;&gt;();
    parcels.add(parcelable);

    bundle.putParcelableArrayList(Intent.EXTRA_STREAM, parcels);

    // Create the Intent that will include the bundle.
    Intent resultData = new Intent();
    resultData.putExtras(bundle);

    // Create the ActivityResult with the Intent.
    return new Instrumentation.ActivityResult(Activity.RESULT_OK, resultData);
}

@Rule
public IntentsTestRule&lt;?&gt; mIntentsRule = new IntentsTestRule&lt;&gt;(
        activityClass);


/**
 * In this test images are taken during the recording
 * add the images taken during the recording through add photos card
 * displayed after recording is stopped.
 *
 * @throws Exception
 */
@Test
public void testAddImagesFromPhotosCard() throws Exception {

    onView(withId(Recorder.getId(""recorderpage_record""))).perform(click());

    Log.d(""called"", ""other package"");
    IdlingResource idlingResource0 = new RecordingWaitIdlingResource(5000);
    Espresso.registerIdlingResources(idlingResource0);

    Log.d(""called"", ""other package"");
    onView(withId(Recorder.getId(""card_topText""))).perform(click());
    Espresso.unregisterIdlingResources(idlingResource0);
    onView(withId(Recorder.getId(""recorderpage_stop""))).perform(click());
    //Log.d(""called"", ""other package"");
    IdlingResource idlingResource2 = new RecordingWaitIdlingResource(2000);
    Espresso.registerIdlingResources(idlingResource2);
    onView(withId(Recorder.getId(""recorderpage_statustext"")))
            .perform(click());
    Espresso.unregisterIdlingResources(idlingResource2);

    onView(withId(Recorder.getId(""pager""))).perform(swipeLeft());

    onData(allOf()).onChildView(withId(Recorder.getId(""recordsOverflow""))).
            atPosition(0).perform(click());

    IdlingResource idlingResource3 = new RecordingWaitIdlingResource(2000);
    Espresso.registerIdlingResources(idlingResource3);
    onData(allOf()).onChildView(withId(Recorder.getId(""recordsOverflow""))).
            atPosition(0).perform(click());
    Espresso.unregisterIdlingResources(idlingResource3);
    onView(withText(""Add an image"")).perform(click());

    Instrumentation.ActivityResult result = createImageCaptureActivityResultStub();
    intending(toPackage(""com.android.documentsui"")).respondWith(result);

     /* I actually dont know which preinstalled app is opened by intent, I saw this com.android.documentsui, also tried with photos and gallery package names */

    intending(toPackage(""com.android.documentsui.DocumentsActivity"")).respondWith(result);

    intending(hasAction(Intent.ACTION_GET_CONTENT)).respondWith(result);

    //Now click on add images
    onView(withId(Recorder.getId(""menu_fragment_imagewizard_selection_add""))).perform(click());

    //Just waits for 2seconds
    IdlingResource idlingResource4 = new RecordingWaitIdlingResource(2000);
    Espresso.registerIdlingResources(idlingResource4);
    onView(withText(""Add images"")).perform(click());
    Espresso.unregisterIdlingResources(idlingResource4);

}
}
</code></pre>
",2765160,,2765160,,2015-08-24 10:00:43,2017-03-10 11:30:40,How to stub select images intent using Espresso intents?,<java><android><android-intent><android-testing><android-espresso>,2,0,2,,
Android,40832882,1,40848379,,2016,,10,4121,"<p>Does the Google Mobile Vision (<a href=""https://developers.google.com/vision/"" rel=""noreferrer"">https://developers.google.com/vision/</a>) API work offline? Or does it need Internet connectivity? The <a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/ocr-reader/app/src/main/AndroidManifest.xml"" rel=""noreferrer"">sample app</a> does not require any Internet permission. Which means the API works entirely offline. I am looking for a positive confirmation of this.</p>

<p>PS. Also I am looking for more information on this API. For example, does it use neural networks? If so what algorithms were used? I can not find any detail discussion anywhere. </p>
",1036017,,,,,2018-01-31 2:34:31,Does Machine Vision API work offline?,<android-vision>,2,0,1,,
Android,46268768,1,,,2017,,11,3161,"<p>The problem is quite straightforward. The question is in context of using ViewModels, LiveData and other related <a href=""https://developer.android.com/reference/android/arch/lifecycle/package-summary.html"" rel=""noreferrer"">Lifecycle</a> aware arch approaches.
<br/>I have an Activity with NavDrawer, which switches fragments inside. <br>And also I have a case when two fragments are present at the same time on the screen - this will be the main pain.
One Fragment has a ViewPager with nested <code>Fragments</code>(<strong>don't ask why</strong>).
The other fragment is just obtaining info from first one when user performs some actions. This is achieved just by sharing activity viewmodel. But the app itself has a lot of business logic and as it goes further the viewmodel goes bigger and bigger.
<br/> What I want to ask - not a receipt or rules how to fix this, or maybe how to overcome this by fixing the entire structure of the project. I want to ask for suggestions how can I apply the MVVM approach within android.arch.lifecycle style to mine use-case.
<br> I haven't seen something more complicated then just sharing the Activity ViewModel between Fragments. But common, that's not a cure.
<a href=""https://i.stack.imgur.com/kASaU.jpg"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/kASaU.jpg"" alt=""enter image description here""></a></p>

<p>What you can see here - a mess actually. The point is that all are sharing the <code>ActivityViewModel</code>. Connections(aggregation) from FirstFragment mean that <code>ViewPager</code> inside <code>FirstFragment</code> is initiating <code>ChildFragments</code> and they are also working with the same <code>ActivityViewModel</code>(kill me). So as result everyone is working with one shared ViewModel. 
<br> My proposal is to add a ViewModel for each Layer. So that Activity/Fragments/ChildFragments have their own ViewModels.
But what appears here - <strong><em>how we should communicate then</em></strong>?
<br> Possible solutions :</p>

<ul>
<li>Having two ViewModels per one component. One ViewModel will handle/delegate the business logic and another will make the communication. <strong>Two viewmodels per component - not so good, yeah?</strong></li>
<li>Having old manner interface(<strong>please no!</strong>)</li>
<li><p>Other workarounds - like DB/SharedPrefs/Realm change listeners and Event Buses(<strong>I'm too old for this :(</strong> ).</p></li>
<li><p><strong>Your solution here!</strong></p></li>
</ul>

<p>I'll say that all of the above are breaking a lot of design principles, so what should I do?
How should I come out of this mess? Is there any <code>Uncle Bob</code> or another <code>superhero</code> here to help?</p>

<p><strong>P.S.</strong> - Well, creating UMLs or other charts isn't mine forte. Sorry for that. 
<br><strong>P.P.S.</strong> - I'm aware of <a href=""https://github.com/googlesamples/android-architecture-components"" rel=""noreferrer"">google</a> <a href=""https://github.com/googlesamples/android-architecture"" rel=""noreferrer"">samples</a>.</p>
",3874721,,4604751,,2017-09-18 8:54:19,2018-10-10 4:52:24,ViewModel for Fragment instead accessing Activity ViewModel?,<android><android-fragments><mvvm><kotlin><android-architecture-components>,2,5,8,,
Android,37559401,1,,,2016,,11,1558,"<p>I saw that in android vision api (the sample is here: <a href=""https://github.com/googlesamples/android-vision"" rel=""noreferrer"">https://github.com/googlesamples/android-vision</a>) camera (camera1) is now deprecated and the recommend is to use camera2.</p>

<p>Do you guys have any idea how to re-write CameraSource to use camera2 on android vision?</p>

<p>Thanks in advance,</p>
",6369323,,,,,2018-06-29 17:20:25,Switching to Camera2 in Android Vision API,<android><android-vision>,2,0,3,,
Android,47323883,1,47326971,,2017,,11,1537,"<p>I have been exploring <a href=""https://developer.android.com/training/data-storage/room/index.html"" rel=""noreferrer"">Room</a> database object mapping library and I figured something weird.</p>

<p>An entity data model cannot have immutable properties, as <a href=""https://stackoverflow.com/a/44213583/4620609"">this</a> answer suggests.</p>

<p>But I checked out <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/BasicRxJavaSampleKotlin"" rel=""noreferrer"">google's persistent example with kotlin</a>, <code>Room</code> works with immutable properties too. Please check <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/BasicRxJavaSampleKotlin/app/src/main/java/com/example/android/observability/persistence/User.kt"" rel=""noreferrer"">this</a> data class from the example.</p>

<p>What could be the reason for this behavior?</p>

<p>This could be a good feature if we could create immutable values (<code>val</code> properties), as this restrict programmers from changing unique identifiers such as ids after an object has been created.</p>
",4620609,,4620609,,2017-11-16 8:37:26,2018-01-16 17:47:04,Why Room entities don't work with immutable properties in Android,<android><sqlite><kotlin><immutability><android-room>,2,2,2,,
Android,45461226,1,,,2017,,12,9692,"<p>I am trying to implement Custom Camera to record a video. I have followed <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""noreferrer"">This sample</a> and it is working fine.</p>

<p>Now, i want to add <strong>""Switch Camera""</strong> functionality over a Button click. It should be able to <strong>Switch between Front/Back Camera</strong> even while the video is getting recorded.</p>

<p>Hence please help me to know if it is even possible??</p>

<p><strong>1. If yes then How??</strong></p>

<p><strong>2. If no then Please suggest some workaround??</strong></p>

<p>Some sample codes or links would be very helpful...</p>

<p><strong>Note :</strong> I have been googling about it and found some StackOverFlow answers like </p>

<p><a href=""https://stackoverflow.com/questions/39022845/android-camera2-api-switch-back-front-cameras"">Android Camera2 API switch back - front cameras</a></p>

<p><a href=""https://stackoverflow.com/questions/16765527/android-switch-camera-when-button-clicked"">Android: Switch camera when button clicked</a></p>

<p>But none of these are giving a <strong>facility to switch the camera when the video is being recorded</strong>.</p>

<p><strong>Please Help.</strong> </p>

<p>The code is same as <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""noreferrer"">This sample</a>. And it's the <strong>Camera2 API</strong>.</p>
",3792476,,3792476,,2017-08-10 8:33:02,2017-08-10 12:33:05,Android - Switch between front and back camera while recording a video,<android><android-layout><video><android-camera><android-camera2>,2,1,3,,
Android,47078005,1,47079964,,2017,,13,2800,"<p>I'm working on UI tests with Espresso for Android, and following the Google's <a href=""https://github.com/googlesamples/android-testing/blob/master/ui/espresso/IdlingResourceSample/app/src/androidTest/java/com/example/android/testing/espresso/IdlingResourceSample/ChangeTextBehaviorTest.java"" rel=""noreferrer"">code sample</a> it is used, even though it's deprecated. So my questions are:</p>

<ul>
<li>why is it deprecated?</li>
<li>what replaces it?</li>
</ul>
",1769975,,1769975,,2017-11-03 8:45:31,2018-07-03 19:57:40,"Why is Espresso's registerIdlingResources deprecated, and what replaces it?",<java><android><android-espresso>,2,0,3,,
Android,44231334,1,,,2017,,16,4290,"<p>New Android Architecture Components released on google IO 17.</p>

<p>So should we use MVP with architecture components and MVVM?</p>

<p>In google sample on Github, they have used the MVVM model.
<a href=""https://github.com/googlesamples/android-architecture-components/tree/master/BasicSample"" rel=""noreferrer"">Google Sample</a></p>
",2534612,,767857,,2017-06-01 17:16:50,2018-03-18 10:08:36,Android architecture components with MVP,<android><android-architecture-components>,2,2,7,,
Android,33220233,1,33220286,,2015,,17,12352,"<p>I've just pasted this <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"">file</a> in a new project, but I'm getting:</p>

<blockquote>
  <p>Cannot resolve symbol FragmentCompat;</p>
</blockquote>

<p>any help?</p>
",248959,,,,,2018-04-27 14:04:32,Cannot resolve symbol FragmentCompat,<android>,2,0,4,,
Android,33039188,1,33253587,,2015,,18,7040,"<p>I'm studying the new permission model of Android Marshmallow but I'm facing an issue I find odd.</p>

<p>An app with <code>targetSdkVersion</code> 22 (so not yet using the new permission model of Android Marshmallow) declares the <code>READ_CONTACTS</code> permission in the manifest:</p>

<pre><code>&lt;uses-permission android:name=""android.permission.READ_CONTACTS"" /&gt;
</code></pre>

<p>and tries to read the phone number of a contact via <code>Intent.ACTION_PICK</code>:</p>

<pre><code>Intent intent = new Intent(Intent.ACTION_PICK);
intent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_TYPE);
startActivityForResult(intent, PICK_CONTACT_REQUEST);
</code></pre>

<p>When running on a device with Marshmallow MRA58K, after I revoke the permission after installing the app via ADB, the <code>ContextCompat.checkSelfPermission()</code> method still returns <code>PERMISSION_GRANTED</code>, but the operation fails later when accessing the contacts because a cursor with no records is returned. As I understood, this is the default ""retrocompatibility"" strategy to avoid legacy app to crash.</p>

<pre><code>@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == PICK_CONTACT_REQUEST &amp;&amp; resultCode == Activity.RESULT_OK) {
        Log.i("""", ""Permission granted: "" + (ContextCompat.checkSelfPermission(this, Manifest.permission.READ_CONTACTS) == PackageManager.PERMISSION_GRANTED));
        Uri contactUri = data.getData();
        Cursor c = null;
        try {
            c = getContentResolver().query(contactUri, new String[]{ContactsContract.CommonDataKinds.Phone.NUMBER}, null, null, null);
            if (c != null &amp;&amp; c.moveToFirst()) {
                Log.i("""", ""got phone number: "" + c.getString(0));
            } else {
                Log.w("""", ""No data received"");
            }
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            if (c != null) {
                c.close();
            }
        }
    } else {
        super.onActivityResult(requestCode, resultCode, data);
    }
}
</code></pre>

<p>How can I safely detect if the user explicitly before the permission before attempting the operation?</p>

<p>I also tried the official Google sample at <a href=""https://github.com/googlesamples/android-RuntimePermissions"" rel=""noreferrer"">https://github.com/googlesamples/android-RuntimePermissions</a> setting the <code>targetSdkVersion</code> to 22 with the same result: it logs that the permission is granted even if the user revoked it, ant then the operation fails.</p>

<p>Thanks ;)</p>
",247095,,,,,2017-07-17 10:16:34,checkSelfPermission returning PERMISSION_GRANTED for revoked permission with targetSdkVersion <= 22,<android><android-6.0-marshmallow>,2,5,5,,
Android,46111860,1,46111993,,2017,,23,18544,"<p>So far, I've adjsuted my code to use <code>ContextCompat.startForegroundService(context, intentService);</code> to start my service. This way, it works on android &lt; 26 and on android 26 (Oreo) as well.</p>

<p>I still see a difference, in android oreo I don't see my custom foreground notification (I only see the ""app is running in the background"" notification). Do I have to adjust anything there as well?</p>

<p>My service looks like this:</p>

<pre><code>public class BaseOverlayService extends Service {
    @Override
    public void onCreate() {
        super.onCreate();
        moveToForeground();
    }

    private void moveToForeground() {
        Notification notification = ...;
        super.startForeground(NOTIFICATION_ID, notification);
    }
}
</code></pre>

<p><strong>Official example</strong></p>

<p>This example (<a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationUpdatesForegroundService/app/src/main/java/com/google/android/gms/location/sample/locationupdatesforegroundservice/LocationUpdatesService.java#L200"" rel=""noreferrer"">https://github.com/googlesamples/android-play-location/blob/master/LocationUpdatesForegroundService/app/src/main/java/com/google/android/gms/location/sample/locationupdatesforegroundservice/LocationUpdatesService.java#L200</a>) shows as comment, that I should use following, but <code>startServiceInForeground</code> does not exist...</p>

<pre><code>if (Build.VERSION.SDK_INT == Build.VERSION_CODES.O) {
    NotificationManager mNotificationManager = ((NotificationManager) getSystemService(NOTIFICATION_SERVICE));
    mNotificationManager.startServiceInForeground(new Intent(this, BaseOverlayService.class), NOTIFICATION_ID, notification);
} else {
    startForeground(NOTIFICATION_ID, notification);
}
</code></pre>

<p><strong>Edit</strong></p>

<p>My notification is created like this, which is working on thousands of android devices with API &lt; 26 until now:</p>

<pre><code>protected Notification foregroundNotification(int notificationId)
{
    boolean paused = MainApp.getPrefs().sidebarServicePaused();
    NotificationCompat.Builder builder = new NotificationCompat.Builder(this);
    builder.setSmallIcon(R.drawable.icon_not);
    builder.setContentIntent(notificationIntent());
    builder.setLargeIcon(BitmapFactory.decodeResource(getResources(), R.drawable.icon));
    builder.setContentTitle(getString(R.string.derived_app_name));
    builder.setContentText(getString(checkStatus() ? (paused ? R.string.service_notification_text_paused : R.string.service_notification_text_running) : R.string.service_notification_text_preparing));
    builder.setColor(Color.parseColor(""#25baa2""));

    if (MainApp.getPrefs().hideNotificationIcon())
        builder.setPriority(NotificationCompat.PRIORITY_MIN);
    else
        builder.setPriority(NotificationCompat.PRIORITY_MAX);

    if (paused)
        builder.addAction(R.drawable.ic_play_arrow_black_24dp, getString(R.string.resume), resumeIntent(this));
    else
        builder.addAction(R.drawable.ic_pause_black_24dp, getString(R.string.pause), pauseIntent(this));

    return builder.build();
}
</code></pre>
",1439522,,7679573,,2017-09-08 8:52:00,2019-01-05 15:58:05,Oreo - Foreground service does not show foreground notification,<android><android-notifications><android-8.0-oreo><foreground-service>,2,0,9,,
Android,49488903,1,49489018,,2018,,32,7467,"<p>I'm trying to set up location updates in my Android app using <code>com.google.android.gms:play-services-location:12.0.0</code>, but I'm getting the following error:</p>

<blockquote>
  <p>LocationRequest constructor is marked as internal and should not be accessed from apps</p>
</blockquote>

<p>My location updates request looks like this:</p>

<pre><code>locationClient.requestLocationUpdates(
    new LocationRequest()
        .setInterval(5000)
        .setFastestInterval(1000)
        .setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY),
    locationCallback,
    null
);
</code></pre>

<p>I have followed the <a href=""https://developer.android.com/training/location/change-location-settings.html#location-request"" rel=""noreferrer"">docs</a> and the <a href=""https://github.com/googlesamples/android-play-location/blob/432d3b72b8c058f220416958b444274ddd186abd/LocationUpdates/app/src/main/java/com/google/android/gms/location/sample/locationupdates/MainActivity.java#L238"" rel=""noreferrer"">example</a>, which do it the same way. If I'm not supposed to call <code>new LocationRequest()</code>, then what is the proper way to do it?</p>
",4136777,,4136777,,2018-03-28 12:20:29,2018-04-04 14:24:37,LocationRequest constructor is marked as internal,<java><android><location>,2,0,3,,
Android,50456919,1,,,2018,,44,2004,"<p><strong>Short question</strong>:</p>

<p>What is the correct way to handle database + network on the Paging library from Architecture components, using an API that uses page + size to load a new page and the <code>BoundaryCallback</code> class?</p>

<p><strong>Research and explanation</strong></p>

<p>Currently the class <a href=""https://developer.android.com/reference/android/arch/paging/PagedList.BoundaryCallback"" rel=""noreferrer""><code>BoundaryCallback</code></a> used in the paging library for architecture components, receives as parameter the instance of an element in the list without actual context of where this element is at. It happens in <code>onItemAtFrontLoaded</code> and <code>onItemAtEndLoaded</code>.</p>

<p>My Api is supposed to receive the page and the size of the page to load the next chunk of data. Boundary callback, added as part of the paged list builder, is supposed to tell you when to load the next page of data based on prefetch distance and page size.</p>

<p>Since the Api needs the page number and the size of the page to provide, I don't see a way to send that to the Api just by receiving one of the elements from the list as offered in <code>onItemAtFrontLoaded</code> and <code>onItemAtEndLoaded</code>. Checking the google examples in <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/PagingWithNetworkSample"" rel=""noreferrer"">this link</a>, they use the name of the last element to get the next one, but that doesn't fit an Api with page + size.</p>

<p>They also have another example with only network that uses <a href=""https://developer.android.com/reference/android/arch/paging/PageKeyedDataSource"" rel=""noreferrer""><code>PagedKeyedDatasource</code></a>, but there is no sample or clue on how to mix that with the database and the BoundaryCallback.</p>

<p><strong>Edit</strong>:
Only solutions I have found so far is to store the last loaded page on the shared preferences, but that sounds like a dirty trick.</p>

<p>Refer to 
<a href=""https://github.com/googlesamples/android-architecture-components/issues/252#issuecomment-392119468"" rel=""noreferrer"">https://github.com/googlesamples/android-architecture-components/issues/252#issuecomment-392119468</a> for official input on it.</p>
",1560067,,1560067,,2018-05-25 17:01:16,2019-01-06 17:52:15,Paging library - Boundary callback for network + db with API taking page and size,<android><android-room><android-architecture-components><android-livedata><android-paging>,2,5,3,,
Android,36055167,1,41862649,,2016,,1,2741,"<p>I have a camera project and im using <code>camera2 API</code> especially from this link
<a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Basic</a></p>

<p>I can save the picture taken to my file manager located at <code>DCIM/camera</code> for example, but when I open my gallery, it wont show my last picture.</p>

<p>Can anyone help me?</p>

<p>One more question, I want to make my camera can be a list:
for example, when I open ""LINE"" and I want take picture with camera, I want my camera appears and can be chosen.</p>

<p>This is the sample code I tried for saving picture to the custom path:</p>

<pre><code>@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    mFile = new File(""/storage/emulated/0/DCIM/Camera"", ""pic.jpg"");
    int counter=1;
    while (mFile.exists()) {
        mFile = new File(""/storage/emulated/0/DCIM/Camera"", ""pic"" + String.format(""%02d"", counter) + "".jpg"");
        counter++;
    }

}
</code></pre>
",5225911,,4370109,,2016-03-19 9:57:51,2017-01-25 22:14:05,Camera2 API picture taken wont show at gallery apps,<android><android-studio><android-camera2>,3,5,1,,
Android,37539614,1,,,2016,,1,1399,"<p>I'm building an app regarding camera2video API. Wanted to show the preview full screen, but instead it is occupying 70% area of the screen as shown in the Camera2video API Github <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Video</a>
And also there is no option for Video Quality parameter as it was available in the deprecated Camera API.</p>
",5693666,,,,,2018-02-13 7:28:06,Camera2Video Api full screen preview and video quality,<android><camera><android-camera><android-camera2>,3,0,,,
Android,46317509,1,,,2017,,1,1033,"<p>I'm using the EmojiCompat support library to have emoji in my app, and I would like to have those emojis directly in the <code>strings.xml</code> file (ex: <code>&lt;string name=""string_name""&gt;Some text \uD83E\uDD96&lt;/string&gt;</code>)</p>

<p>This works well for devices API>23 but otherwise it crash</p>

<pre><code>A/art: art/runtime/check_jni.cc:65] JNI DETECTED ERROR IN APPLICATION: input is not valid Modified UTF-8: illegal start byte 0xf0
A/art: art/runtime/check_jni.cc:65]     string: 'Some text '
A/art: art/runtime/check_jni.cc:65]     in call to NewStringUTF
A/art: art/runtime/check_jni.cc:65]     from java.lang.String android.content.res.StringBlock.nativeGetString(long, int)
</code></pre>

<p>The only solution I have found is to get the emoji code in a java variable and put it at the end of my string (like the <a href=""https://github.com/googlesamples/android-EmojiCompat/blob/master/app/src/main/java/com/example/android/emojicompat/MainActivity.java"" rel=""nofollow noreferrer"">google sample</a>) and it works on every version supported.</p>

<p>But I really want to put emoji code in the strings files and be able to do something like this :</p>

<pre><code>emojiTextView.setText(getText(R.string.string_name));
</code></pre>

<p>Does anyone know how to achieve this ?</p>
",2050982,,2050982,,2018-02-27 17:55:49,2018-08-29 5:52:32,Use emoji in strings.xml with EmojiCompat support library,<android><emoji>,3,0,,,
Android,45201324,1,45204178,,2017,,1,2129,"<p>I have a MVVM project where I have ViewModel classes extending BaseObservable. Now if put @Inject class in my ViewModel then compilation fails with many errors like: ""error: package xxx.databinding does not exist""</p>

<p>Can I find the actual error that's causing this using some gradle technique? Also is @Inject really supported with databinding?</p>

<p>Edit:</p>

<p>Code is exactly the same as <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvvm-databinding/"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture/tree/todo-mvvm-databinding/</a></p>

<p>In that I have added dagger and I'm trying to @Inject a repository into a view model that extends BaseObservable. As soon as I add @Inject into the view model then I cant compile</p>
",517860,,517860,,2017-07-19 21:39:41,2019-03-12 7:16:32,Dagger and databinding,<android><mvvm><dagger-2><android-databinding><dagger.android>,3,2,,,
Android,41096332,1,41112022,,2016,,1,822,"<p>UPDATE:
My initial question may be misleading so I want to rephrase it:
I want to traverse through the hierarchy tree from an MTP connected device through Android's Storage Access Framework.  I can't seem to achieve this because I get a <code>SecurityException</code> stating that a subnode is not a descendant of its parent node.  Is there a way to workaround this issue?  Or is this a known issue?  Thanks.</p>

<p>I'm writing an Android application that attempts to traverse and access documents through the hierarchy tree using Android's Storage Access Framework (SAF) via the <code>MtpDocumentsProvider</code>. I am more or less following the code example described in <a href=""https://github.com/googlesamples/android-DirectorySelection"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-DirectorySelection</a> on how to launch the SAF Picker from my app, select the MTP data source, and then, in <code>onActivityResult</code>, use the returned <code>Uri</code> to traverse through the hierarchy.  Unfortunately, this doesn't seem to work because as soon as I access a sub-folder and try to traverse that, I always get a <code>SecurityException</code> stating that <code>document xx is not a descendant of yy</code></p>

<p>So my question is, using the <code>MtpDocumentProvider</code>, how can I successfully traverse through the hierarchy tree from my app and avoid this exception?</p>

<p>To be specific, in my app, first, I call the following method to launch the SAF Picker:</p>

<pre><code>private void launchStoragePicker() {
    Intent browseIntent = new Intent(Intent.ACTION_OPEN_DOCUMENT_TREE);
    browseIntent.addFlags(
        Intent.FLAG_GRANT_PERSISTABLE_URI_PERMISSION
            | Intent.FLAG_GRANT_PREFIX_URI_PERMISSION
            | Intent.FLAG_GRANT_READ_URI_PERMISSION
            | Intent.FLAG_GRANT_WRITE_URI_PERMISSION
    );
    startActivityForResult(browseIntent, REQUEST_CODE_OPEN_DIRECTORY);
}
</code></pre>

<p>The Android SAF picker then launches, and I see my connected device recognized as the MTP data source.  I select said data source and I get the <code>Uri</code> from my <code>onActivityResult</code>:</p>

<pre><code>@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == REQUEST_CODE_OPEN_DIRECTORY &amp;&amp; resultCode == Activity.RESULT_OK) {
        traverseDirectoryEntries(data.getData()); // getData() returns the root uri node
    }
}
</code></pre>

<p>Then, using the returned <code>Uri</code>, I call <code>DocumentsContract.buildChildDocumentsUriUsingTree</code> to get a <code>Uri</code> which I can then use to query and access the tree hierarchy:</p>

<pre><code>void traverseDirectoryEntries(Uri rootUri) {
    ContentResolver contentResolver = getActivity().getContentResolver();
    Uri childrenUri = DocumentsContract.buildChildDocumentsUriUsingTree(rootUri, DocumentsContract.getTreeDocumentId(rootUri));

    // Keep track of our directory hierarchy
    List&lt;Uri&gt; dirNodes = new LinkedList&lt;&gt;();
    dirNodes.add(childrenUri);

    while(!dirNodes.isEmpty()) {
        childrenUri = dirNodes.remove(0); // get the item from top
        Log.d(TAG, ""node uri: "", childrenUri);
        Cursor c = contentResolver.query(childrenUri, new String[]{Document.COLUMN_DOCUMENT_ID, Document.COLUMN_DISPLAY_NAME, Document.COLUMN_MIME_TYPE}, null, null, null);
        try {
            while (c.moveToNext()) {
                final String docId = c.getString(0);
                final String name = c.getString(1);
                final String mime = c.getString(2);
                Log.d(TAG, ""docId: "" + id + "", name: "" + name + "", mime: "" + mime);
                if(isDirectory(mime)) {
                    final Uri newNode = DocumentsContract.buildChildDocumentsUriUsingTree(rootUri, docId);
                    dirNodes.add(newNode);
                }
            }
        } finally {
            closeQuietly(c);
        }
    }
}

// Util method to check if the mime type is a directory
private static boolean isDirectory(String mimeType) {
    return DocumentsContract.Document.MIME_TYPE_DIR.equals(mimeType);
}

// Util method to close a closeable
private static void closeQuietly(Closeable closeable) {
    if (closeable != null) {
        try {
            closeable.close();
        } catch (RuntimeException re) {
            throw re;
        } catch (Exception ignore) {
            // ignore exception
        }
    }
}
</code></pre>

<p>The first iteration on the outer while loop succeeds: the call to <code>query</code> returned a valid <code>Cursor</code> for me to traverse.  The problem is the second iteration: when I try to query for the <code>Uri</code>, which happens to be a subnode of <code>rootUri</code>, I get a <code>SecurityException</code> stating the document xx is not a descendent of yy.</p>

<blockquote>
  <p>D/MyApp(19241): node uri: content://com.android.mtp.documents/tree/2/document/2/children
  D/MyApp(19241): docId: 4, name: DCIM, mime: vnd.android.document/directory
  D/MyApp(19241): node uri: content://com.android.mtp.documents/tree/2/document/4/children
  E/DatabaseUtils(20944): Writing exception to parcel
  E/DatabaseUtils(20944): java.lang.SecurityException: Document 4 is not a descendant of 2</p>
</blockquote>

<p>Can anyone provide some insight as to what I'm doing wrong? If I use a different data source provider, for example, one that is from external storage (i.e. an SD Card attached via a standard USB OTG reader), everything works fine.</p>

<p>Additional information:
I'm running this on a Nexus 6P, Android 7.1.1, and my app <code>minSdkVersion</code> is 19.</p>
",3221524,,3221524,,2016-12-12 23:46:06,2018-03-15 13:12:57,Issues traversing through directory hierarchy with Android Storage Access Framework / DocumentProvider using MTP,<android><android-external-storage><mtp><storage-access-framework><document-provider>,3,11,,,
Android,32525489,1,,,2015,,1,986,"<p>I'm having everything the same as in this sample in <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/multi-tracker"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vision/tree/master/visionSamples/multi-tracker</a> except my activity layout is this:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;LinearLayout xmlns:android=""http://schemas.android.com/apk/res/android""
    android:id=""@+id/topLayout""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""
    android:keepScreenOn=""true""
    android:weightSum=""100""
    android:orientation=""horizontal""&gt;

    &lt;be.citylife.communitypurchaseapp.view.camera.CameraSourcePreview
        android:id=""@+id/preview""
        android:layout_width=""0dp""
        android:layout_height=""match_parent""
        android:layout_weight=""60""&gt;

        &lt;be.citylife.communitypurchaseapp.view.camera.GraphicOverlay
            android:id=""@+id/overlay""
            android:layout_width=""match_parent""
            android:layout_height=""match_parent"" /&gt;

    &lt;/be.citylife.communitypurchaseapp.view.camera.CameraSourcePreview&gt;

    &lt;FrameLayout
        android:id=""@+id/sideContainer""
        android:layout_width=""0dp""
        android:layout_height=""match_parent""
        android:layout_weight=""40""/&gt;

&lt;/LinearLayout&gt;
</code></pre>

<p>My tablet is in landscape and I want that the cameraPreviewSource is always left and fills the whole screen in the height and then right off it I'm having a fragment that fills the rest. </p>

<p>This layout works except my previewsource doesn't fill the whole height. It has a black banner on it. Even my width is actually smaller than I want you can see this on the screenshot:</p>

<p><a href=""http://i61.tinypic.com/vctmw0.png"" rel=""nofollow noreferrer"">http://i61.tinypic.com/vctmw0.png</a></p>

<p>I played with the CameraSourcePreview with the width and height in the onLayout function but it doesn't help. I know on the preview that it does fill the screen to the bottom of the screen but on the tablet it isn't.  </p>

<p><a href=""https://i.stack.imgur.com/EnZBz.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/EnZBz.png"" alt=""enter image description here""></a>lp.</p>

<p>Anyone an idea how to solve this? </p>

<p>EDIT: </p>

<p>I think it has something to do with this:</p>

<pre><code>  @Override
    protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
        int width = 320;
        int height = 240;
        if (mCameraSource != null) {
            Size size = mCameraSource.getPreviewSize();
            if (size != null) {
                width = size.getWidth();
                height = size.getHeight();
            }
        }

        // Swap width and height sizes when in portrait, since it will be rotated 90 degrees
        if (isPortraitMode()) {
            int tmp = width;
            width = height;
            height = tmp;
        }

        final int layoutWidth = right - left;
        final int layoutHeight = bottom - top;

        // Computes height and width for potentially doing fit width.
        int childWidth = layoutWidth;
        int childHeight = (int)(((float) layoutWidth / (float) width) * height);

        // If height is too tall using fit width, does fit height instead.
        if (childHeight &gt; layoutHeight) {
            childHeight = layoutHeight;
            childWidth = (int)(((float) layoutHeight / (float) height) * width);
        }

        for (int i = 0; i &lt; getChildCount(); ++i) {
            getChildAt(i).layout(0, 0, childWidth, childHeight);
        }

        try {
            startIfReady();
        } catch (IOException e) {
            Log.e(TAG, ""Could not start camera source."", e);
        }
    }
</code></pre>

<p>That's the onlayout method off the CameraSourcePreview.</p>
",1007522,,1007522,,2015-09-11 14:24:39,2015-09-14 0:50:18,View doesn't fill the whole screen,<android>,3,1,,,
Android,43821919,1,,,2017,,1,1361,"<p>I'm developing an app for Android Things and want to use Nearby from Google Play Services to communicate with my IoT device across Android and iOS.</p>

<p>I've compiled the app, but am getting a message that it's not supported on my device, however, the Android Things website clearly states that there is support for it.</p>

<p>I'm using the sample code provided by Google here with no modifications other than adding my API key <a href=""https://github.com/googlesamples/android-nearby/tree/master/messages/NearbyDevices"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-nearby/tree/master/messages/NearbyDevices</a>.</p>

<p>My device is a Raspberry Pi 3 model B and I'm using the latest release of Android Things.</p>
",6377072,,6377072,,2017-05-07 8:28:12,2018-05-19 6:56:37,Are Google Play Services Supported on Android Things?,<android><google-play><google-nearby><android-things>,3,4,,,
Android,36669064,1,,,2016,,1,3823,"<p>I'm developing an android app which allows user to check a QR Code content and execute something according read result.</p>

<p>In order to improve the performance i'd like to implement 2 methods:</p>

<ul>
<li>onClickFocus (which allows user to focus the camera when screen is clicked)</li>
<li>turnOn/OFF flash (which allows user to turn on/off the flash)</li>
</ul>

<p>I've done some digging and figured out that for manage camera and flash I need to be able to manage the <code>Camera</code> as object itself.</p>

<p>And here is where the nightmare begin.</p>

<p>I'm using the follow code to show camera result and track QR codes.</p>

<pre><code>    import android.app.FragmentTransaction;
import android.content.Context;


import android.os.Bundle;
import android.os.Vibrator;
import android.support.v4.widget.DrawerLayout;
import android.support.v7.app.AppCompatActivity;
import android.util.Log;
import android.util.SparseArray;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.widget.TextView;

import com.google.android.gms.vision.Detector;
import com.google.android.gms.vision.barcode.Barcode;
import com.google.android.gms.vision.barcode.BarcodeDetector;
import java.io.IOException;



public class MainReadActivity extends AppCompatActivity {


    public SurfaceView cameraView;
    private TextView barcodeInfo;
    public BarcodeDetector barcodeDetector;
    public CameraSource cameraSource;
    public Vibrator v;
    public String textInfo;
    public DrawerLayout mDrawerLayout;




    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main_read);
        v = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);

        mDrawerLayout = (DrawerLayout) findViewById(R.id.drawer_layout_main);


        getSupportFragmentManager().findFragmentById(R.id.drawer_layout_main);

        cameraView = (SurfaceView) findViewById(R.id.camera_view);


        //barcodeInfo = (TextView) findViewById(R.id.code_info);

        barcodeDetector = new BarcodeDetector.Builder(this)
                .setBarcodeFormats(Barcode.QR_CODE)
                .build();


        cameraSource = new CameraSource.Builder(this, barcodeDetector).build();



        cameraView.getHolder().addCallback(new SurfaceHolder.Callback() {

            @Override
            public void surfaceCreated(SurfaceHolder holder) {


                try {
                    cameraSource.start(cameraView.getHolder());
                } catch (IOException ie) {
                    Log.e(""CAMERA SOURCE"", ie.getMessage());
                }

            }


            @Override
            public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
            }

            @Override
            public void surfaceDestroyed(SurfaceHolder holder) {
                cameraSource.stop();
            }

        });


        barcodeDetector.setProcessor(new Detector.Processor&lt;Barcode&gt;() {

            @Override
            public void release() {

            }


            @Override
            public void receiveDetections(Detector.Detections&lt;Barcode&gt; detections) {
                final SparseArray&lt;Barcode&gt; barcodes = detections.getDetectedItems();

                if (barcodes.size() != 0) {


                    new Runnable() {    // Use the post method of the TextView
                        public void run() {


                            v.vibrate(500);
                          // textInfo = barcodes.valueAt(0).displayValue;

                            MyFragmentDialog newf = new MyFragmentDialog();
                            FragmentTransaction transaction = getFragmentManager().beginTransaction();
                            transaction.replace(R.id.fragment_container, newf);

                            transaction.addToBackStack(""tag"");
                            transaction.commit();

                        }
                    };
                }
            }

        });







    }

    public void onBackPressed() {
        // do nothing
    }
}
</code></pre>

<p>So, I need to get access to Camera, from CameraSource (am I right?!)
Once it is not possible, I tryed to use this <a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java"" rel=""nofollow"">CameraSource</a> class from GoogleSamples's git which allows to use setFocusMode method... But unfortunately I wasn't successful.</p>

<p>I also tryed to use API 21, since API 22 <a href=""http://developer.android.com/reference/android/hardware/camera2/package-summary.html"" rel=""nofollow"">no longer supports</a> Camera and CameraPreferences.</p>

<p>I'm pretty sure this is not only my problem, but couldn't find a way to fix it.</p>

<p>Anyone can help?</p>

<p>FIXED:</p>

<p>Just use this CameraSource (github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java) . Yeah, I know, I've suggested it... But this time i fixed my problem! So, if you're going to use this, make sure your compile looks like this:</p>

<pre><code>compile 'com.google.android.gms:play-services:8.1.0'
</code></pre>
",5991732,,5991732,,2016-04-18 1:10:36,2019-03-18 13:17:25,Create on click focus on CameraSource - Android QR Code detection,<android><camera><android-camera><qr-code><android-vision>,3,0,,,
Android,31154802,1,,,2015,,2,1918,"<p>I want to use <a href=""http://developer.android.com/training/location/geofencing.html"" rel=""nofollow noreferrer"">Geofencing location API</a> in my application to set certain Point of Interest. I have used <a href=""https://github.com/googlesamples/android-play-location/tree/master/Geofencing"" rel=""nofollow noreferrer"">this</a> demo provided by google. I am able to run this demo when WIFI and location services both are on. But this doesn't seem to work when only GPS is turned on. I am not able to get <a href=""http://developer.android.com/reference/com/google/android/gms/location/Geofence.html#GEOFENCE_TRANSITION_ENTER"" rel=""nofollow noreferrer"">GEOFENCE_TRANSITION_ENTER</a> or <a href=""https://developers.google.com/android/reference/com/google/android/gms/location/Geofence#GEOFENCE_TRANSITION_EXIT"" rel=""nofollow noreferrer"">GEOFENCE_TRANSITION_EXIT</a> events for that. I have modified the expiration time to <a href=""https://developers.google.com/android/reference/com/google/android/gms/location/Geofence#NEVER_EXPIRE"" rel=""nofollow noreferrer"">NEVER_EXPIRE</a>, but still no luck. Can anyone point out what I am doing wrong ? TIA.  </p>

<p>Edit: After following many sites, I finally managed to get the Geofence API working with <a href=""https://stackoverflow.com/a/23741825/1465910"">this code</a>. That is, Poll the GPS hardware on an interval without doing anything with the result. But now my question is that, is it the right way to do it ? Will google allow this once it's on Play store ? Please guide me on this topic. </p>
",1465910,,-1,,2017-05-23 12:01:40,2016-09-02 9:19:06,Geofencing with only GPS does not work in android,<android><gps><geolocation><geofencing><android-geofence>,3,0,2,,
Android,43460985,1,,,2017,,2,4098,"<p>I'm working on some app using Android's Camera2 API. So far I've been able to get a preview displayed within a <code>TextureView</code>. The app is by default in landscape mode. When using the emulator the preview will appear upside-down. On my physical Nexus 5 the preview is <em>usually</em> displayed correctly (landscape, not upside-down), but occasionally it is rotated by 90 degrees, yet stretched to the dimensions of the screen.
I thought that should be easy and thought the following code would return the necessary information on the current orientation:</p>

<pre><code>// display rotation
getActivity().getWindowManager().getDefaultDisplay().getRotation();
// sensor orientation
mManager.getCameraCharacteristics(mCameraId).get(CameraCharacteristics.SENSOR_ORIENTATION);
</code></pre>

<p>... I was pretty surprised when I saw that above code <strong>always</strong> returned <code>1</code> for the display rotation and <code>90</code> for the sensor orientation, <em>regardless</em> of the preview being rotated by 90 degree or not. (Within the emulator sensor orientation is always 270 which kinda makes sense if I assume 90 to be the correct orientation).
I also checked the width and height within <code>onMeasure</code> within <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/AutoFitTextureView.java"" rel=""nofollow noreferrer"">AutoMeasureTextureView</a> (adopted from <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"" rel=""nofollow noreferrer"">Android's Camera2 example</a>) that I'm using to create my TextureView. But no luck either - width and height reported from within <code>onMeasure</code> are always the same regardless of the preview rotation.
So I'm clueless on how to tackle this issue. Does anyone have an idea what could be the reason for the occasional hickups in my preview orientation?</p>

<p>[Edit]
A detail I just found out: Whenever the preview appears rotated <code>onSurfaceTextureSizeChanged</code> in the <code>TextureView.SurfaceTextureListener</code> seems not to get called. In the documentation for <code>onSurfaceTextureSizeChanged</code> it is said that this method is called whenever the <code>SurfaceTexture</code>'s buffers size is changed. I have a method <code>createCameraPreviewSession</code> (copied from Android's Camera2 example) in which I set the default buffer size of my texture like</p>

<pre><code>texture.setDefaultBufferSize(mPreviewSize.getWidth(), mPreviewSize.getHeight());
</code></pre>

<p>From my logging output I can tell that <code>onSurfaceTextureSizeChanged</code> is called exactly after that - however, not always... (or setting the default buffer size sometimes silently fails?).</p>
",2001687,,2001687,,2018-09-15 14:07:27,2018-09-15 14:07:27,Android Camera2 preview occasionally rotated by 90 degrees,<android><rotation><android-camera2>,3,0,2,,
Android,35287835,1,35469813,,2016,,2,6762,"<p>I used this <a href=""https://github.com/googlesamples/android-vision"" rel=""nofollow"">android-vision project</a> to scan a barcode. When the camera detects the barcode, I am currently required to manually tap to capture it. But, I want to change the code a little bit so that it is captured automatically when the barcode is detected. How can I do this? This is my <code>BarcodeCaptureActivity</code> class: </p>

<pre><code>package com.example.fs.barcodescanner;

import android.Manifest;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.IntentFilter;
import android.content.pm.PackageManager;
import android.hardware.Camera;
import android.os.Build;
import android.os.Bundle;
import android.support.annotation.NonNull;
import android.support.design.widget.Snackbar;
import android.support.v4.app.ActivityCompat;
import android.support.v7.app.AppCompatActivity;
import android.util.Log;
import android.view.GestureDetector;
import android.view.MotionEvent;
import android.view.ScaleGestureDetector;
import android.view.View;
import android.view.WindowId;
import android.widget.Toast;

import com.example.fs.barcodescanner.ui.camera.CameraSource;
import com.example.fs.barcodescanner.ui.camera.CameraSourcePreview;
import com.example.fs.barcodescanner.ui.camera.GraphicOverlay;
import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.GoogleApiAvailability;
import com.google.android.gms.common.api.CommonStatusCodes;
import com.google.android.gms.vision.MultiProcessor;
import com.google.android.gms.vision.barcode.Barcode;
import com.google.android.gms.vision.barcode.BarcodeDetector;

import java.io.IOException;

public final class BarcodeCaptureActivity extends AppCompatActivity {
    private static final String TAG = ""Barcode-reader"";

    // intent request code to handle updating play services if needed.
    private static final int RC_HANDLE_GMS = 9001;

    // permission request codes need to be &lt; 256
    private static final int RC_HANDLE_CAMERA_PERM = 2;

    // constants used to pass extra data in the intent
    public static final String AutoFocus = ""AutoFocus"";
    public static final String UseFlash = ""UseFlash"";
    public static final String BarcodeObject = ""Barcode"";

    private CameraSource mCameraSource;
    private CameraSourcePreview mPreview;
    private GraphicOverlay&lt;BarcodeGraphic&gt; mGraphicOverlay;

    // helper objects for detecting taps and pinches.
    private ScaleGestureDetector scaleGestureDetector;
    private GestureDetector gestureDetector;
    private WindowId.FocusObserver fo;

    /**
     * Initializes the UI and creates the detector pipeline.
     */
    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.activity_barcode_capture);

        mPreview = (CameraSourcePreview) findViewById(R.id.preview);
        mGraphicOverlay = (GraphicOverlay&lt;BarcodeGraphic&gt;) findViewById(R.id.graphicOverlay);

        // read parameters from the intent used to launch the activity.
        boolean autoFocus = getIntent().getBooleanExtra(AutoFocus, false);
        boolean useFlash = getIntent().getBooleanExtra(UseFlash, false);

        // Check for the camera permission before accessing the camera.  If the
        // permission is not granted yet, request permission.
        int rc = ActivityCompat.checkSelfPermission(this, Manifest.permission.CAMERA);
        if (rc == PackageManager.PERMISSION_GRANTED) {
            createCameraSource(autoFocus, useFlash);
        } else {
            requestCameraPermission();
        }

        gestureDetector = new GestureDetector(this, new CaptureGestureListener());
        scaleGestureDetector = new ScaleGestureDetector(this, new ScaleListener());

        Snackbar.make(mGraphicOverlay, ""Tap to capture. Pinch/Stretch to zoom"",
                Snackbar.LENGTH_LONG)
                .show();
    }

    /**
     * Handles the requesting of the camera permission.  This includes
     * showing a ""Snackbar"" message of why the permission is needed then
     * sending the request.
     */
    private void requestCameraPermission() {
        Log.w(TAG, ""Camera permission is not granted. Requesting permission"");

        final String[] permissions = new String[]{Manifest.permission.CAMERA};

        if (!ActivityCompat.shouldShowRequestPermissionRationale(this,
                Manifest.permission.CAMERA)) {
            ActivityCompat.requestPermissions(this, permissions, RC_HANDLE_CAMERA_PERM);
            return;
        }

        final Activity thisActivity = this;

        View.OnClickListener listener = new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                ActivityCompat.requestPermissions(thisActivity, permissions,
                        RC_HANDLE_CAMERA_PERM);
            }
        };

        Snackbar.make(mGraphicOverlay, R.string.permission_camera_rationale,
                Snackbar.LENGTH_INDEFINITE)
                .setAction(R.string.ok, listener)
                .show();
    }

    @Override
    public boolean onTouchEvent(MotionEvent e) {
        boolean b = scaleGestureDetector.onTouchEvent(e);
        System.out.println(""scale gesture""+b);
        boolean c = gestureDetector.onTouchEvent(e);
        System.out.println(""tap gesture""+c);
        return b || c || super.onTouchEvent(e);
    }


    /**
     * Creates and starts the camera.  Note that this uses a higher resolution in comparison
     * to other detection examples to enable the barcode detector to detect small barcodes
     * at long distances.
     *
     * Suppressing InlinedApi since there is a check that the minimum version is met before using
     * the constant.
     */
    @SuppressLint(""InlinedApi"")
    private void createCameraSource(boolean autoFocus, boolean useFlash) {
        Context context = getApplicationContext();

        // A barcode detector is created to track barcodes.  An associated multi-processor instance
        // is set to receive the barcode detection results, track the barcodes, and maintain
        // graphics for each barcode on screen.  The factory is used by the multi-processor to
        // create a separate tracker instance for each barcode.
        BarcodeDetector barcodeDetector = new BarcodeDetector.Builder(context).build();
        BarcodeTrackerFactory barcodeFactory = new BarcodeTrackerFactory(mGraphicOverlay);
        barcodeDetector.setProcessor(
                new MultiProcessor.Builder&lt;&gt;(barcodeFactory).build());

        if (!barcodeDetector.isOperational()) {
            // Note: The first time that an app using the barcode or face API is installed on a
            // device, GMS will download a native libraries to the device in order to do detection.
            // Usually this completes before the app is run for the first time.  But if that
            // download has not yet completed, then the above call will not detect any barcodes
            // and/or faces.
            //
            // isOperational() can be used to check if the required native libraries are currently
            // available.  The detectors will automatically become operational once the library
            // downloads complete on device.
            Log.w(TAG, ""Detector dependencies are not yet available."");

            // Check for low storage.  If there is low storage, the native library will not be
            // downloaded, so detection will not become operational.
            IntentFilter lowstorageFilter = new IntentFilter(Intent.ACTION_DEVICE_STORAGE_LOW);
            boolean hasLowStorage = registerReceiver(null, lowstorageFilter) != null;

            if (hasLowStorage) {
                Toast.makeText(this, R.string.low_storage_error, Toast.LENGTH_LONG).show();
                Log.w(TAG, getString(R.string.low_storage_error));
            }
        }

        // Creates and starts the camera.  Note that this uses a higher resolution in comparison
        // to other detection examples to enable the barcode detector to detect small barcodes
        // at long distances.
        CameraSource.Builder builder = new CameraSource.Builder(getApplicationContext(), barcodeDetector)
                .setFacing(CameraSource.CAMERA_FACING_BACK)
                .setRequestedPreviewSize(1600, 1024)
                .setRequestedFps(15.0f);

        // make sure that auto focus is an available option
        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
            builder = builder.setFocusMode(
                    autoFocus ? Camera.Parameters.FOCUS_MODE_CONTINUOUS_PICTURE : null);
        }

        mCameraSource = builder
                .setFlashMode(useFlash ? Camera.Parameters.FLASH_MODE_TORCH : null)
                .build();
    }

    /**
     * Restarts the camera.
     */
    @Override
    protected void onResume() {
        super.onResume();
        startCameraSource();
    }

    /**
     * Stops the camera.
     */
    @Override
    protected void onPause() {
        super.onPause();
        if (mPreview != null) {
            mPreview.stop();
        }
    }

    /**
     * Releases the resources associated with the camera source, the associated detectors, and the
     * rest of the processing pipeline.
     */
    @Override
    protected void onDestroy() {
        super.onDestroy();
        if (mPreview != null) {
            mPreview.release();
        }
    }

    /**
     * Callback for the result from requesting permissions. This method
     * is invoked for every call on {@link #requestPermissions(String[], int)}.
     * &lt;p&gt;
     * &lt;strong&gt;Note:&lt;/strong&gt; It is possible that the permissions request interaction
     * with the user is interrupted. In this case you will receive empty permissions
     * and results arrays which should be treated as a cancellation.
     * &lt;/p&gt;
     *
     * @param requestCode  The request code passed in {@link #requestPermissions(String[], int)}.
     * @param permissions  The requested permissions. Never null.
     * @param grantResults The grant results for the corresponding permissions
     *                     which is either {@link PackageManager#PERMISSION_GRANTED}
     *                     or {@link PackageManager#PERMISSION_DENIED}. Never null.
     * @see #requestPermissions(String[], int)
     */
    @Override
    public void onRequestPermissionsResult(int requestCode,
                                           @NonNull String[] permissions,
                                           @NonNull int[] grantResults) {
        if (requestCode != RC_HANDLE_CAMERA_PERM) {
            Log.d(TAG, ""Got unexpected permission result: "" + requestCode);
            super.onRequestPermissionsResult(requestCode, permissions, grantResults);
            return;
        }

        if (grantResults.length != 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {
            Log.d(TAG, ""Camera permission granted - initialize the camera source"");
            // we have permission, so create the camerasource
            boolean autoFocus = getIntent().getBooleanExtra(AutoFocus,false);
            boolean useFlash = getIntent().getBooleanExtra(UseFlash, false);
            createCameraSource(autoFocus, useFlash);
            return;
        }

        Log.e(TAG, ""Permission not granted: results len = "" + grantResults.length +
                "" Result code = "" + (grantResults.length &gt; 0 ? grantResults[0] : ""(empty)""));

        DialogInterface.OnClickListener listener = new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                finish();
            }
        };

        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle(""Multitracker sample"")
                .setMessage(R.string.no_camera_permission)
                .setPositiveButton(R.string.ok, listener)
                .show();
    }

    /**
     * Starts or restarts the camera source, if it exists.  If the camera source doesn't exist yet
     * (e.g., because onResume was called before the camera source was created), this will be called
     * again when the camera source is created.
     */
    private void startCameraSource() throws SecurityException {
        // check that the device has play services available.
        int code = GoogleApiAvailability.getInstance().isGooglePlayServicesAvailable(
                getApplicationContext());
        if (code != ConnectionResult.SUCCESS) {
            Dialog dlg =
                    GoogleApiAvailability.getInstance().getErrorDialog(this, code, RC_HANDLE_GMS);
            dlg.show();
        }

        if (mCameraSource != null) {
            try {
                mPreview.start(mCameraSource, mGraphicOverlay);
            } catch (IOException e) {
                Log.e(TAG, ""Unable to start camera source."", e);
                mCameraSource.release();
                mCameraSource = null;
            }
        }
    }

    /**
     * onTap is called to capture the oldest barcode currently detected and
     * return it to the caller.
     *
     * @param rawX - the raw position of the tap
     * @param rawY - the raw position of the tap.
     * @return true if the activity is ending.
     */
    private boolean onTap(float rawX, float rawY) {

        //TODO: use the tap position to select the barcode.
        BarcodeGraphic graphic = mGraphicOverlay.getFirstGraphic();
        Barcode barcode = null;
        if (graphic != null) {
            barcode = graphic.getBarcode();
            if (barcode != null) {
                Intent data = new Intent();
                data.putExtra(BarcodeObject, barcode);
                setResult(CommonStatusCodes.SUCCESS, data);
                finish();
            }
            else {
                Log.d(TAG, ""barcode data is null"");
            }
        }
        else {
            Log.d(TAG,""no barcode detected"");
        }
        return barcode != null;
    }

    private class CaptureGestureListener extends GestureDetector.SimpleOnGestureListener {

        @Override
        public boolean onSingleTapConfirmed(MotionEvent e) {
            System.out.println(e.getRawX());
            System.out.println(e.getRawY());
            return onTap(e.getRawX(), e.getRawY()) || super.onSingleTapConfirmed(e);
        }
    }

    private class ScaleListener implements ScaleGestureDetector.OnScaleGestureListener {

        /**
         * Responds to scaling events for a gesture in progress.
         * Reported by pointer motion.
         *
         * @param detector The detector reporting the event - use this to
         *                 retrieve extended info about event state.
         * @return Whether or not the detector should consider this event
         * as handled. If an event was not handled, the detector
         * will continue to accumulate movement until an event is
         * handled. This can be useful if an application, for example,
         * only wants to update scaling factors if the change is
         * greater than 0.01.
         */
        @Override
        public boolean onScale(ScaleGestureDetector detector) {
            return false;
        }

        /**
         * Responds to the beginning of a scaling gesture. Reported by
         * new pointers going down.
         *
         * @param detector The detector reporting the event - use this to
         *                 retrieve extended info about event state.
         * @return Whether or not the detector should continue recognizing
         * this gesture. For example, if a gesture is beginning
         * with a focal point outside of a region where it makes
         * sense, onScaleBegin() may return false to ignore the
         * rest of the gesture.
         */
        @Override
        public boolean onScaleBegin(ScaleGestureDetector detector) {
            return true;
        }

        /**
         * Responds to the end of a scale gesture. Reported by existing
         * pointers going up.
         * &lt;p/&gt;
         * Once a scale has ended, {@link ScaleGestureDetector#getFocusX()}
         * and {@link ScaleGestureDetector#getFocusY()} will return focal point
         * of the pointers remaining on the screen.
         *
         * @param detector The detector reporting the event - use this to
         *                 retrieve extended info about event state.
         */
        @Override
        public void onScaleEnd(ScaleGestureDetector detector) {
            mCameraSource.doZoom(detector.getScaleFactor());
        }
    }
}
</code></pre>
",4697260,,5350328,,2016-02-09 9:38:12,2017-03-21 16:10:49,Detect and capture barcode automatically when it is read by camera,<android>,3,2,2,,
Android,35711493,1,35728605,,2016,,2,2233,"<p>At the end of <a href=""http://developer.android.com/guide/components/fragments.html"" rel=""nofollow"">http://developer.android.com/guide/components/fragments.html</a> is stated ""For more samples using fragments (<strong>and complete source files for this example</strong>), <strong>see the API Demos sample app available in ApiDemos</strong> (available for download from the Samples SDK component).""</p>

<p>However, <strong>ApiDemos</strong> is <em>not</em> listed anywhere among the hundreds of items when I try to <code>Import sample...</code> in AS 1.5.1. ADVANCED ApiDemos is listed, but the description says this is NOT what I seek.</p>

<p>It sure would be nice to accomplish this task in one step as advertised instead of having to download each individual file (and worry if the app will work because of some omission) from <a href=""https://github.com/googlesamples/android-ads/tree/master/APIDemo"" rel=""nofollow"">https://github.com/googlesamples/android-ads/tree/master/APIDemo</a>.</p>

<p>Is there a way to <code>Import sample...</code> ApiDemos somehow?</p>
",2737933,,,,,2016-08-06 18:03:20,How to Import Sample ApiDemos into Android Studio 1.5.1,<android><android-studio><github>,3,5,,,
Android,36368371,1,36389005,,2016,,2,1294,"<p>I want to write a java program using the Google Fit <a href=""https://developers.google.com/fit/rest/"" rel=""nofollow"">REST API</a>. (It's not an Android app, so I can't use the Android API.)</p>

<p>It seems like there is a <a href=""https://developers.google.com/api-client-library/java/apis/fitness/v1"" rel=""nofollow"">Java Client library for the REST API</a> - so I was thinking this would be easy.</p>

<p>However, I can't find any samples/examples that explain how to use the client library (just the <a href=""https://developers.google.com/resources/api-libraries/documentation/fitness/v1/java/latest/"" rel=""nofollow"">javadoc</a>).</p>

<p>I found examples about how to use the Android API - e.g. <a href=""https://github.com/googlesamples/android-fit/blob/master/BasicHistorySessions/app/src/main/java/com/google/android/gms/fit/samples/basichistorysessions/MainActivity.java"" rel=""nofollow"">this</a>. But it's completely different, so no use.</p>

<p>For other Google APIs that I have used, the Client Library comes with examples... not so in this case. </p>

<p>Any ideas please? Thanks.</p>
",2509368,,2509368,,2016-04-02 3:35:59,2016-12-09 13:41:02,Examples for Java Client Library for Google Fit REST API (not Android API!),<java><google-fit>,3,0,,,
Android,39443657,1,,,2016,,2,967,"<p>I am using vision api for tracking face. I applied a mask on the basis of face position.When i take a picture from front camera i call  camerasource.takePicture() to save images.I am facing issue of image rotation in some device like samsung and capture image shows mask and face in different different position.I use Exif class to get orientation of images but it always return 0 so i am unable to rotate the image.
I am using following class to getOrientation and rotate image.</p>

<pre><code> public class ExifUtils {
 public Bitmap rotateBitmap(String src, Bitmap bitmap) {
    try {
        int orientation = getExifOrientation(src);

        if (orientation == 1) {
            return bitmap;
        }

        Matrix matrix = new Matrix();
        switch (orientation) {
            case 2:
                matrix.setScale(-1, 1);
                break;
            case 3:
                matrix.setRotate(180);
                break;
            case 4:
                matrix.setRotate(180);
                matrix.postScale(-1, 1);
                break;
            case 5:
                matrix.setRotate(90);
                matrix.postScale(-1, 1);
                break;
            case 6:
                matrix.setRotate(90);
                break;
            case 7:
                matrix.setRotate(-90);
                matrix.postScale(-1, 1);
                break;
            case 8:
                matrix.setRotate(-90);
                break;
            default:
                return bitmap;
        }

        try {
            Bitmap oriented = Bitmap.createBitmap(bitmap, 0, 0,
                    bitmap.getWidth(), bitmap.getHeight(), matrix, true);
            bitmap.recycle();
            return oriented;
        } catch (OutOfMemoryError e) {
            e.printStackTrace();
            return bitmap;
        }
    } catch (IOException e) {
        e.printStackTrace();
    }

    return bitmap;
}

private int getExifOrientation(String src) throws IOException {
    int orientation = 1;

    try {

        if (Build.VERSION.SDK_INT &gt;= 5) {
            Class&lt;?&gt; exifClass = Class
                    .forName(""android.media.ExifInterface"");
            Constructor&lt;?&gt; exifConstructor = exifClass
                    .getConstructor(new Class[]{String.class});
            Object exifInstance = exifConstructor
                    .newInstance(new Object[]{src});
            Method getAttributeInt = exifClass.getMethod(""getAttributeInt"",
                    new Class[]{String.class, int.class});
            Field tagOrientationField = exifClass
                    .getField(""TAG_ORIENTATION"");
            String tagOrientation = (String) tagOrientationField.get(null);
            orientation = (Integer) getAttributeInt.invoke(exifInstance,
                    new Object[]{tagOrientation, 1});

        }
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    } catch (SecurityException e) {
        e.printStackTrace();
    } catch (NoSuchMethodException e) {
        e.printStackTrace();
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (Fragment.InstantiationException e) {
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    } catch (InvocationTargetException e) {
        e.printStackTrace();
    } catch (NoSuchFieldException e) {
        e.printStackTrace();
    } catch (java.lang.InstantiationException e) {
        e.printStackTrace();
    }

    return orientation;
}
</code></pre>

<p>}</p>

<p>I found this <a href=""https://github.com/googlesamples/android-vision/issues/124"" rel=""nofollow"">issue</a> in vision api is there any solution.</p>
",4875115,,4875115,,2016-09-12 9:37:42,2016-09-15 12:09:41,camerasource.takePicture() save rotated images in some device,<android><google-vision>,3,3,,,
Android,29578606,1,,,2015,,2,1479,"<p>I installed Google Services API in my Genymotion and after I downloaded the location example (<a href=""https://github.com/googlesamples/android-play-location/tree/master/BasicLocationSample"" rel=""nofollow"">https://github.com/googlesamples/android-play-location/tree/master/BasicLocationSample</a>) and it doesn't work, I set GPS and Data abled. I tested it on my real phone and it works! How to fix?</p>

<p>Google Maps find me on map.</p>
",4747586,,,,,2016-06-26 15:18:42,Android Genymotion Location (Google Services API) doesn't work,<android><location><genymotion><genymotion-gps>,3,2,,,
Android,32603382,1,32618529,,2015,,3,1556,"<p>I am trying to run <a href=""https://code.google.com/p/android-test-kit/"" rel=""nofollow"">Espresso</a> tests for an Android app. It works fine on a hardware device. When I run it on a freshly created <strong>AVD emulator</strong> it <strong>fails</strong> as shown here:</p>

<pre><code>:ExampleApp:connectedDebugAndroidTest

com.example.MainFragmentTest &gt; initializationError[Nexus_5_API_19(AVD) - 4.4.2] 
FAILED 
    java.lang.NoClassDefFoundError: com/example/MainActivity
    at java.lang.Class.getDeclaredFields(Native Method)
:ExampleApp:connectedDebugAndroidTest FAILED

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':ExampleApp:connectedDebugAndroidTest'.
&gt; There were failing tests. See the report at: 
file:///home/user/work/ExampleApp/build/reports/androidTests/connected/index.html
</code></pre>

<p>The HTML report contains the following stacktrace:</p>

<pre><code>java.lang.NoClassDefFoundError: com/example/MainActivity
at java.lang.Class.getDeclaredFields(Native Method)
at java.lang.Class.getDeclaredFields(Class.java:610)
at org.junit.runners.model.TestClass.getSortedDeclaredFields(TestClass.java:77)
at org.junit.runners.model.TestClass.scanAnnotatedMembers(TestClass.java:70)
at org.junit.runners.model.TestClass.&lt;init&gt;(TestClass.java:57)
at org.junit.runners.ParentRunner.createTestClass(ParentRunner.java:88)
at org.junit.runners.ParentRunner.&lt;init&gt;(ParentRunner.java:83)
at org.junit.runners.BlockJUnit4ClassRunner.&lt;init&gt;(BlockJUnit4ClassRunner.java:65)
at android.support.test.internal.runner.junit4.AndroidJUnit4ClassRunner.&lt;init&gt;(AndroidJUnit4ClassRunner.java:38)
at android.support.test.runner.AndroidJUnit4.&lt;init&gt;(AndroidJUnit4.java:36)
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
at android.support.test.internal.runner.junit4.AndroidAnnotatedBuilder.buildAndroidRunner(AndroidAnnotatedBuilder.java:57)
at android.support.test.internal.runner.junit4.AndroidAnnotatedBuilder.runnerForClass(AndroidAnnotatedBuilder.java:45)
at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)
at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:26)
at org.junit.runner.Computer.getRunner(Computer.java:40)
at org.junit.runner.Computer$1.runnerForClass(Computer.java:31)
at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)
at org.junit.runners.model.RunnerBuilder.runners(RunnerBuilder.java:101)
at org.junit.runners.model.RunnerBuilder.runners(RunnerBuilder.java:87)
at org.junit.runners.Suite.&lt;init&gt;(Suite.java:81)
at org.junit.runner.Computer.getSuite(Computer.java:28)
at android.support.test.internal.runner.TestRequestBuilder.classes(TestRequestBuilder.java:701)
at android.support.test.internal.runner.TestRequestBuilder.build(TestRequestBuilder.java:664)
at android.support.test.runner.AndroidJUnitRunner.buildRequest(AndroidJUnitRunner.java:329)
at android.support.test.runner.AndroidJUnitRunner.onStart(AndroidJUnitRunner.java:226)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1701)

Caused by: java.lang.ClassNotFoundException: Didn't find class 
  ""com.example.MainActivity"" on path: DexPathList[[zip file 
  ""/system/framework/android.test.runner.jar"", zip file 
  ""/data/app/com.example.debug.test-1.apk"", zip file 
  ""/data/app/com.example.debug-1.apk""],
  nativeLibraryDirectories=[/data/app-lib/com.example.debug.test-1, 
  /data/app-lib/com.example.debug-1, /vendor/lib, /system/lib]]
at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:56)
at java.lang.ClassLoader.loadClass(ClassLoader.java:497)
at java.lang.ClassLoader.loadClass(ClassLoader.java:457)
... 28 more
</code></pre>

<p>I am basically following the structure in <a href=""https://github.com/googlesamples/android-testing/blob/master/ui/espresso/BasicSample/app/src/androidTest/java/com/example/android/testing/espresso/BasicSample/ChangeTextBehaviorTest.java"" rel=""nofollow"">espresso/BasicSample/ChangeTextBehaviorTest.java</a>. This test <strong>works</strong> on the emulator!</p>

<p>For my test I could boil it down that running the test already <strong>fails</strong> when I just use the following code:</p>

<pre><code>@RunWith(AndroidJUnit4.class)
public class MainFragmentTest {

    @Rule
    public ActivityTestRule&lt;MainActivity&gt; mActivityRule = 
        new ActivityTestRule&lt;&gt;(MainActivity.class);    
}
</code></pre>

<p>Here is the complete test class:</p>

<pre><code>import org.junit.Before;
import org.junit.Rule;
import org.junit.Test;
import org.junit.runner.RunWith;

import android.support.test.rule.ActivityTestRule;
import android.support.test.runner.AndroidJUnit4;

import com.example.R;

import static android.support.test.espresso.Espresso.onView;
import static android.support.test.espresso.assertion.ViewAssertions.matches;
import static android.support.test.espresso.matcher.ViewMatchers.withId;
import static android.support.test.espresso.matcher.ViewMatchers.withText;

@RunWith(AndroidJUnit4.class)
public class MainFragmentTest {

    @Rule
    public ActivityTestRule&lt;MainActivity&gt; mActivityRule = 
        new ActivityTestRule&lt;&gt;(MainActivity.class);

    MainActivity mMainActivity;

    MainFragment mMainFragment;

    @Before
    public void setUp() {
        mMainActivity = mActivityRule.getActivity();
        mMainFragment = (MainFragment) mMainActivity
                .getSupportFragmentManager()
                .findFragmentByTag(MainFragment.FRAGMENT_TAG);
    }

    @Test
    public void testHeadline() {
        onView(withId(R.id.headline)).check(matches(withText(R.string.headline)));
    }
}
</code></pre>

<p>I am currently using the following tool chain:</p>

<ul>
<li>com.android.tools.build:gradle:1.4.0-beta2</li>
<li>buildToolsVersion ""23.0.1""</li>
<li>compileSdkVersion 22</li>
<li>targetSdkVersion 22</li>
<li>Gradle wrapper 2.5</li>
<li>java version ""1.7.0_79"" OpenJDK</li>
</ul>
",356895,,356895,,2015-09-16 9:14:31,2015-11-27 8:36:58,NoClassDefFoundError when running Gradle connectedCheck on AVD emulator,<android><android-emulator><android-testing><android-espresso><avd>,3,0,2,,
Android,40766673,1,41383912,,2016,,3,7855,"<p>I want to run <a href=""https://github.com/googlesamples/android-ndk/tree/master/sensor-graph"" rel=""nofollow noreferrer"">sensor-graph</a> sample project</p>

<p>After the following:</p>

<ol>
<li>Download Android Studio 2.2+ with NDK bundle.</li>
<li>Launch Android Studio.</li>
<li>Open android-ndk/sensor-graph sample.</li>
<li>Open File/Project Structure...</li>
<li>Click Download or Select NDK location.</li>
<li>Click Tools/Android/Sync Project with Gradle Files.</li>
<li>Click Run/Run 'app'.</li>
</ol>

<p>i get follow error:</p>

<blockquote>
  <p>Failed to find CMake.</p>
  
  <p>Gradle sync failed: Failed to find CMake.
             Install from Android Studio under File/Settings/Appearance &amp; Behavior/System Settings/Android SDK/SDK Tools/CMake.
             Expected CMake executable at /Users/myUser/Library/Android/sdk/cmake/bin/cmake.
             Consult IDE log for more details (Help | Show Log)</p>
</blockquote>
",2715054,,,,,2017-11-18 15:22:57,Android - Failed to find CMake,<android><c++><android-ndk>,3,0,,,
Android,27311251,1,,,2014,,3,681,"<p>I got an android demo named <a href=""https://github.com/googlesamples/android-BasicManagedProfile"" rel=""nofollow"">BasicManagedProfile</a>  which implements some new features about device policy manager.</p>

<p>Now I have a question about how to get the other package names when application in managed profile. For example, the demo shows the chrome and calculators name string to make presentations. </p>

<pre><code>/**
 * Package name of calculator
 */
private static final String PACKAGE_NAME_CALCULATOR = ""com.android.calculator2"";

/**
 * Package name of Chrome
 */
private static final String PACKAGE_NAME_CHROME = ""com.android.chrome"";
</code></pre>

<p>But I want to know how to get others like dialer and contact.</p>

<p>I tried to use <code>getInstalledPackages()</code> or <code>queryIntentActivities()</code> but failed.</p>

<p>By the way, I use the method <code>addCrossProfileIntentFilter()</code> like this:</p>

<pre><code>IntentFilter filter = new IntentFilter(Intent.ACTION_MAIN); filter.addCategory(Intent.CATEGORY_LAUNCHER);

MyActivity.deviceManager.addCrossProfileIntentFilter(MyReceiver.getComponentName(context), filter, FLAG_MANAGED_CAN_ACCESS_PARENT | FLAG_PARENT_CAN_ACCESS_MANAGED);
</code></pre>

<p>But the <code>queryIntentActivities()</code> can not return the right list of applications.
Please give me some suggestion about these.</p>
",1432273,,3478852,,2015-01-19 21:19:15,2017-06-11 8:18:55,How to obtain package info list form primary account when application in managed profile?,<android><android-5.0-lollipop><device-policy-manager>,3,0,,,
Android,28355353,1,28532785,,2015,,4,2995,"<p>My main requirement would be to have a service having its own process and trigger its own geofencing event. I'd like the user to be notified from the notification center when he enters a geofence, even if the app is killed.</p>

<p>I read about services and this seems pretty clear to me, the Android documentation is dense so I managed to understand how to start a service with its own process, and also how it is able to communicate with the app using Messenger.</p>

<p>Then there is this code sample from Google showing how to use geofencing with google play services:
<a href=""https://github.com/googlesamples/android-Geofencing"" rel=""nofollow"">Google samples geofencing</a></p>

<p>What I found so far is that we have to use an IntentService to trigger geofencing events, and from the docs I've read it states that an IntentService terminates itself when its work is done. And I tested a bit also, it looks like the Intentservice gets killed when the app gets killed, which doesn't surprise me regarding the documentation.</p>

<p>So my question is, how could we perform a geofencing service having its own process? Is that possible to avoid using IntentService for this matter?</p>

<p><strong>EDIT:</strong></p>

<p>The reason I wanna do this, is that the user can set geofence ""reminders"", it is based on a daily usage. For instance imagine each day you arrive at your workplace, we should be able to fire an alarm (or a notification) when we enter this geofence regarding the app is running or not. We don't want the user to worry about having the app running in background.</p>
",1763767,,1763767,,2015-02-06 9:19:41,2015-04-17 14:37:35,Android geofencing when app is killed,<android><service><android-service><geofencing><android-geofence>,3,3,2,,
Android,35133519,1,36597669,,2016,,4,355,"<p>I'm trying to setup a test project like is described in the <a href=""https://github.com/googlesamples/android-testing-templates/tree/master/AndroidTestingBlueprint"" rel=""nofollow"">Android Testing Blueprint</a> but I receive the following NoClassDefFoundError:</p>

<pre><code>java.lang.NoClassDefFoundError: android.test.mock.MockContentResolver
</code></pre>

<p>Android Studio resolves this correctly but when running I receive this error.</p>

<p>It's worth to note that I do not have an androidTest configuration on the app project, instead I only have a separate <code>tests</code> module with:</p>

<pre><code>apply plugin: 'com.android.test'
</code></pre>

<p>I'm running tests like this:</p>

<pre><code> ./gradlew :tests:connectedAndroidTest
</code></pre>

<p>Test project to reproduce this issue can be found here:
<a href=""https://github.com/vexdev/android-testing-templates/tree/master/AndroidTestingBlueprint"" rel=""nofollow"">https://github.com/vexdev/android-testing-templates/tree/master/AndroidTestingBlueprint</a></p>

<p>EDIT: Also asked on <a href=""https://plus.google.com/106636663923951797914/posts/PTvUTCP39Gm"" rel=""nofollow"">Android Development community</a></p>

<p>EDIT: Also created following android issue:
<a href=""https://code.google.com/p/android/issues/detail?id=200182&amp;thanks=200182&amp;ts=1454489567"" rel=""nofollow"">https://code.google.com/p/android/issues/detail?id=200182&amp;thanks=200182&amp;ts=1454489567</a></p>
",1634147,,1634147,,2016-02-03 8:53:59,2016-04-13 11:58:46,MockContentResolver is not found in an Android Test project with separate module,<android><android-testing>,3,2,1,,
Android,38296278,1,,,2016,,4,2637,"<p>I took inspiration from google's sample on how to test your <code>SharedPreferences</code> code here by creating a <code>SharedPreferencesHelper</code> class:</p>

<p><a href=""https://github.com/googlesamples/android-https://github.com/googlesamples/android-testing/blob/master/unit/BasicSample/app/src/main/java/com/example/android/testing/unittesting/BasicSample/SharedPreferencesHelper.java"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-https://github.com/googlesamples/android-testing/blob/master/unit/BasicSample/app/src/main/java/com/example/android/testing/unittesting/BasicSample/SharedPreferencesHelper.java</a></p>

<p>You can see that the class uses actual strings hardcoded within the class as the keys to the <code>sharedPreferences</code> - here's an extract of the class:</p>

<pre><code>public class SharedPreferencesHelper {

    // Keys for saving values in SharedPreferences.
    static final String KEY_NAME = ""key_name"";
    static final String KEY_DOB = ""key_dob_millis"";
    static final String KEY_EMAIL = ""key_email"";

    public boolean savePersonalInfo(SharedPreferenceEntry sharedPreferenceEntry){
        // Start a SharedPreferences transaction.
        SharedPreferences.Editor editor = mSharedPreferences.edit();
        editor.putString(KEY_NAME, sharedPreferenceEntry.getName());
        editor.putLong(KEY_DOB, sharedPreferenceEntry.getDateOfBirth().getTimeInMillis());
        editor.putString(KEY_EMAIL, sharedPreferenceEntry.getEmail());

        // Commit changes to SharedPreferences.
        return editor.commit();
    }
</code></pre>

<p>When testing this on using their <code>SharedPreferencesHelperTest</code> class here, they access the mocked <code>sharedPreferences</code> using the same variables defined in the above class:</p>

<p><a href=""https://github.com/googlesamples/android-testing/blob/master/unit/BasicSample/app/src/test/java/com/example/android/testing/unittesting/BasicSample/SharedPreferencesHelperTest.java"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-testing/blob/master/unit/BasicSample/app/src/test/java/com/example/android/testing/unittesting/BasicSample/SharedPreferencesHelperTest.java</a></p>

<p>An extract of that class is displayed below:</p>

<pre><code>when(mMockSharedPreferences.getString(eq(SharedPreferencesHelper.KEY_NAME), anyString()))
            .thenReturn(mSharedPreferenceEntry.getName());
    when(mMockSharedPreferences.getString(eq(SharedPreferencesHelper.KEY_EMAIL), anyString()))
            .thenReturn(mSharedPreferenceEntry.getEmail());
    when(mMockSharedPreferences.getLong(eq(SharedPreferencesHelper.KEY_DOB), anyLong()))
            .thenReturn(mSharedPreferenceEntry.getDateOfBirth().getTimeInMillis());
</code></pre>

<p>The way google does this allowed them to bypass the issue of using a <code>context</code> to pull a string out of the <strong>string.xml</strong> resource file and query it inside <code>sharedPreferences</code> like how it is normally suppose to happen by using <code>getString()</code>, ie:</p>

<pre><code>mSharedPreferences.getString(context.getString(R.string.name),"""");
</code></pre>

<p>However, I have read that it is not possible to use <code>context.getString</code> as it is a final method and mockito cannot mock final methods: </p>

<p><a href=""https://stackoverflow.com/questions/18941509/mockito-overriding-a-method-that-takes-primitive-parameters/18942522#18942522"">Mockito - Overriding a method that takes primitive parameters</a></p>

<p>How can I then use mockito to unit test any methods with <code>getString</code>? Any method with <code>getString</code> will not work and my unit test will fail.</p>

<p>This is my class that I have written for <code>SharedPreferences</code> and I would like to test it with the <code>sharedPreferences</code> keys written with <code>getStrings</code>:</p>

<pre><code>public class SharedPreferencesHelper {

    // The injected SharedPreferences implementation to use for persistence.
    private final SharedPreferences mSharedPreferences;
    private Context context;

    public SharedPreferencesHelper(SharedPreferences sharedPreferences, Context context) {
        mSharedPreferences = sharedPreferences;
        this.context = context;
    }

    public boolean saveName(String name) {
        // Start a SharedPreferences transaction.
        SharedPreferences.Editor editor = mSharedPreferences.edit();
        editor.putString(context.getString(R.string.name), name);
        return editor.commit();
    }

    public String fetchName() {
        // Start a SharedPreferences transaction.
        return mSharedPreferences.getString(context.getString(R.string.name),"""");
    }

    public boolean saveGender(String gender) {
        SharedPreferences.Editor editor = mSharedPreferences.edit();
        editor.putString(context.getString(R.string.gender), gender);
        return editor.commit();
    }

}
</code></pre>

<p>This is the test that I have written for the above class - it is very similar to google's SharedPreferencesHelperTest:</p>

<pre><code>@RunWith(MockitoJUnitRunner.class)
public class SharedPreferencesHelperTest {

    private static final String TEST_NAME = ""Test name"";

    private SharedPreferencesHelper mMockSharedPreferencesHelper;

    @Mock
    SharedPreferences mMockSharedPreferences;
    @Mock
    SharedPreferences.Editor mMockEditor;
    @Mock
    MockContext context;

    @Before
    public void setUp() throws Exception {
        // Create a mocked SharedPreferences.
        mMockSharedPreferencesHelper = createMockSharedPreference();
    }

    @Test
    public void testSaveName() throws Exception {
        boolean success = mMockSharedPreferencesHelper.saveName(TEST_NAME);
        Timber.e(""success "" + success);
        assertThat(""Checking that name was saved... returns true = "" + success,
                success, is(true));
        String name = mMockSharedPreferencesHelper.fetchName();
        Timber.e(""name "" + name);
        assertThat(""Checking that name has been persisted and read correctly "" + name,
                TEST_NAME,
                is(name));
    }

    /**
     * Creates a mocked SharedPreferences.
     */
    private SharedPreferencesHelper createMockSharedPreference() {
        // Mocking reading the SharedPreferences as if mMockSharedPreferences was previously written
        // correctly.
        when(mMockSharedPreferences.getString(Matchers.eq(""name""), anyString()))
                .thenReturn(TEST_NAME);
        when(mMockSharedPreferences.getString(Matchers.eq(""gender""), anyString()))
                .thenReturn(""M"");
        // Mocking a successful commit.
        when(mMockEditor.commit()).thenReturn(true);
        // Return the MockEditor when requesting it.
        when(mMockSharedPreferences.edit()).thenReturn(mMockEditor);
        return new SharedPreferencesHelper(mMockSharedPreferences, context);
    }
}
</code></pre>

<p>Running the test fails as I have used <code>getString</code> in my <code>SharedPreferencesHelper</code> class. If I hard coded the keys, I will not get the error, i.e.:</p>

<pre><code>public String fetchName() {
    // Start a SharedPreferences transaction.
    return mSharedPreferences.getString(""name"","""");
}
</code></pre>

<p>One should not hard-code strings within the code so how do I solve this dilemma?</p>
",3178944,,-1,,2017-05-23 12:19:29,2018-10-01 20:46:05,Mockito: How do I use getString with mockito?,<android><unit-testing><mockito><android-context>,3,0,,,
Android,37747466,1,47359090,,2016,,4,570,"<p>I'm looking over the <a href=""https://github.com/googlesamples/android-BluetoothChat"" rel=""nofollow"">Bluetooth Chat sample application</a> from Google and they write to <code>BluetoothSocket</code>'s <code>OutputStream</code> on the UI thread. Is that correct? Normally, streams block until the data is sent out.</p>

<p>In my tests (with that app), as long as the devices were close enough, the communication was prompt. When they got farther, the connection was dropped. Is this correct way to send data over Bluetooth? My message size will by 100-500 bytes.</p>
",952135,,,,,2019-03-03 11:32:54,Writing data to BluetoothSocket on the UI thread,<android><android-bluetooth>,3,4,,,
Android,33876196,1,,,2015,,4,2155,"<p>I'm working on Camera 2 API recently and my device has a 16:9 screen ratio but my camera sensor is 4:3. So all the preview size I got is 4:3. I' wondering is there any way I get a crop the size and only display the 16:9 part?  I tried a long time and didn't find any help for camera 2.</p>

<p>My current camera code is similar to the <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">camera 2 basic sample</a>.</p>

<p>So how should I crop the preview and only display the 16:9 part on the texture view?</p>

<p>Thanks!!</p>
",1763748,,8892392,,2018-08-28 8:19:14,2018-08-28 8:19:14,"Android Camera 2, how to crop preview size",<android><preview><android-camera2>,3,1,,,
Android,48094952,1,48095129,,2018,,5,2615,"<p>I am trying to implement a camera app. and checking examples. Some examples contain following manifest feature: <code>uses-feature android:name=""android.hardware.camera2.full</code>.
I have checked official documents and google examples and none of them mentioning existing this feature. (or I am missing some).</p>

<p>What is the source of this feature and what is the difference between <code>android.hardware.camera</code>?</p>

<hr>

<p>Edit:
What confuses me was those examples on <code>googlesamples</code>:</p>

<p><a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/kotlinApp/Application/src/main/AndroidManifest.xml"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic/blob/master/kotlinApp/Application/src/main/AndroidManifest.xml</a></p>

<p>and this</p>

<p><a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/AndroidManifest.xml"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/AndroidManifest.xml</a></p>

<p>and this</p>

<p><a href=""https://github.com/googlesamples/android-Camera2Raw/blob/master/Application/src/main/AndroidManifest.xml"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Raw/blob/master/Application/src/main/AndroidManifest.xml</a></p>

<p>They are using new <code>Camera2</code> API and old manifest <code>features</code>. I don't know how both fits together.</p>
",1281930,,,user8389458,2018-04-21 22:15:45,2018-04-21 22:15:45,Where does android.hardware.camera2.full come from?,<android><android-camera><android-camera2>,3,3,2,,
Android,35620400,1,36716795,,2016,,5,4069,"<p>Basically, what I am trying to do is change the CONTROL_AE_MODE by button click in the app. The user can use AUTO flash(ON_AUTO_FLASH), turn if ON(ON_ALWAYS_FLASH), or OFF(CONTROL_AE_MODE_OFF).</p>

<p>In this example: <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"" rel=""noreferrer"">https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java</a></p>

<p>Line 818, they set the flash once:</p>

<pre><code>// Use the same AE and AF modes as the preview.
            captureBuilder.set(CaptureRequest.CONTROL_AF_MODE,
                    CaptureRequest.CONTROL_AF_MODE_CONTINUOUS_PICTURE);
            setAutoFlash(captureBuilder);

            // Orientation
            int rotation = activity.getWindowManager().getDefaultDisplay().getRotation();
            captureBuilder.set(CaptureRequest.JPEG_ORIENTATION, ORIENTATIONS.get(rotation));

            CameraCaptureSession.CaptureCallback CaptureCallback
                    = new CameraCaptureSession.CaptureCallback() {

                @Override
                public void onCaptureCompleted(@NonNull CameraCaptureSession session,
                                               @NonNull CaptureRequest request,
                                               @NonNull TotalCaptureResult result) {
                    showToast(""Saved: "" + mFile);
                    Log.d(TAG, mFile.toString());
                    unlockFocus();
                }
            };

            mCaptureSession.stopRepeating();
            mCaptureSession.capture(captureBuilder.build(), CaptureCallback, null);
</code></pre>

<p>And then builds the CaptureSession at line 840.</p>

<p>Is there a way to change the CONTROL_AE_MODE after the preview is made?</p>

<p>I have tried remaking the session, which kinda worked:</p>

<pre><code>if(flashMode == CameraView.CAMERA_FLASH_ON){
            Log.e(""CAMERA 2"", ""FLASH ON"");
            mPreviewCaptureRequestBuilder.set(CaptureRequest.CONTROL_AE_MODE, CaptureRequest.CONTROL_AE_MODE_ON_ALWAYS_FLASH);
        }else if(flashMode == CameraView.CAMERA_FLASH_OFF){
            Log.e(""CAMERA 2"", ""FLASH OFF"");
            mPreviewCaptureRequestBuilder.set(CaptureRequest.CONTROL_AE_MODE, CaptureRequest.CONTROL_AE_MODE_OFF);
        }else if(flashMode == CameraView.CAMERA_FLASH_AUTO){
            Log.e(""CAMERA 2"", ""FLASH AUTO"");
            mPreviewCaptureRequestBuilder.set(CaptureRequest.CONTROL_AE_MODE, CaptureRequest.CONTROL_AE_MODE_ON_AUTO_FLASH);
        }
        mFlashMode = flashMode;
        if (mCameraCaptureSession != null) {
            mCameraCaptureSession.close();
            mCameraCaptureSession = null;
       }
  createCameraPreviewSession();
</code></pre>

<p>For some reason, CONTROL_AE_MODE_OFF would turn the whole preview black.
I tried looking in the docs for methods to update but haven't found anything. </p>

<p>Any tutorials or docs is much appreciated.</p>
",1601974,,,,,2019-01-15 10:01:57,Changing Flash setting of Android Camera 2 at runtime,<java><android><mobile><android-camera2>,3,2,,,
Android,37371844,1,,,2016,,5,950,"<p>I tried Google barcode-reader from <a href=""https://github.com/googlesamples/android-vision"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vision</a></p>

<p>This example doesn't work. When I tab to screen it always detect </p>

<blockquote>
  <p>""no barcode detected""</p>
</blockquote>

<p>Debug reason : </p>

<pre><code>private boolean onTap(float rawX, float rawY) {

    //TODO: use the tap position to select the barcode.
    BarcodeGraphic graphic = mGraphicOverlay.getFirstGraphic();
    Barcode barcode = null;
    if (graphic != null) {
        barcode = graphic.getBarcode();
        if (barcode != null) {
            Intent data = new Intent();
            data.putExtra(BarcodeObject, barcode);
            setResult(CommonStatusCodes.SUCCESS, data);
            finish();
        }
        else {
            Log.d(TAG, ""barcode data is null"");
        }
    }
    else {
        Log.d(TAG,""no barcode detected"");
    }
    return barcode != null;
}
</code></pre>

<p><code>graphic</code> variable is always <code>Null</code> </p>

<p>See the image:</p>

<p><img src=""https://i.stack.imgur.com/JJvE7.jpg"" alt=""Image on android studio""></p>

<p>Anyone faced this problem? Can you let me know how to resolve it?
Thank you so much!</p>
",5667742,,900743,,2016-05-22 10:16:06,2016-06-07 17:13:26,Can not use Google Barcode scanner,<android><android-vision>,3,1,,,
Android,37483049,1,46002017,,2016,,6,4907,"<p>I am trying to use PdfRenderer, and the requirement is to have Zoom and scroll available with it, but in Android PdfRenderer do not provide any support for Zoom and scroll, there is only page navigation support available.</p>

<p>But i guess zoom and scroll support can be implemented as PdfRenderer uses bitmap to show the content using imageview.</p>

<blockquote>
  <p>How to implement Zoom and Scroll support with Google PdfRenderer
  sample?</p>
</blockquote>

<p>PS: I am using this PdfRenderer sample provided by Google, <a href=""https://github.com/googlesamples/android-PdfRendererBasic"" rel=""noreferrer"">https://github.com/googlesamples/android-PdfRendererBasic</a></p>
",1791546,,1791546,,2016-07-01 10:24:51,2018-01-09 15:06:40,How to implement PdfRenderer Zoom and Scroll support?,<java><android><pdfrenderer>,3,0,2,,
Android,29501618,1,,,2015,,6,6075,"<p>Since android 5.0 they are providing mediaprojection library to capture screen content. but sample demo application provided by them is not clear. U can find sample app <a href=""https://github.com/googlesamples/android-ScreenCapture"" rel=""noreferrer"">here</a>. In that application they are projecting captured screen using virtualdisplay method</p>

<pre><code>private void setUpVirtualDisplay() {
    Log.i(TAG, ""Setting up a VirtualDisplay: "" +
            mSurfaceView.getWidth() + ""x"" + mSurfaceView.getHeight() +
            "" ("" + mScreenDensity + "")"");
    mVirtualDisplay = mMediaProjection.createVirtualDisplay(""ScreenCapture"",
            mSurfaceView.getWidth(), mSurfaceView.getHeight(), mScreenDensity,
            DisplayManager.VIRTUAL_DISPLAY_FLAG_AUTO_MIRROR,
            mSurface, null, null);
    mButtonToggle.setText(R.string.stop);
}
</code></pre>

<p>I want to convert captured screen into mp4 file for my screen recording application. Please help me to get through this.</p>
",2251601,,294248,,2015-05-07 17:46:51,2016-07-26 9:25:12,How to use Mediaprojection library in android to capture screen and convert into mp4 file?,<android><android-mediarecorder><android-mediaprojection>,3,0,1,,
Android,45982524,1,46148860,,2017,,6,363,"<p>I have tried Google's <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">android-Camera2Basic</a> sample app. For front camera get works, I have changed some code in <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"" rel=""nofollow noreferrer"">Camera2BasicFragment</a>. The changes are as follows.</p>

<p>To switch to front camera I have changed <code>mCameraId = cameraId;</code> to <code>mCameraId = ""1"";</code> in <code>setUpCameraOutputs(int width, int height)</code> method. </p>

<p>And added on if condition at end of <code>setUpCameraOutputs(int width, int height)</code> like,</p>

<pre><code>if(mCameraId == null)
    mCameraId = cameraId;
</code></pre>

<p>This change shows front camera perfectly but doesn't pick the photo. So I replaced</p>

<pre><code>mCaptureSession.capture(mPreviewRequestBuilder.build(), mCaptureCallback,
                        mBackgroundHandler);
</code></pre>

<p>to </p>

<pre><code>captureStillPicture();
</code></pre>

<p>in <code>lockFocus()</code>. Now front camera picks the photo, but it looks upside down. </p>

<p>For ex: </p>

<p><a href=""https://i.stack.imgur.com/xKHzb.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/xKHzb.jpg"" alt=""sample image""></a></p>

<p>I don't know what to do now.</p>

<p>My requirement is to capture photo in both cameras using camera2 api. So if I did anything wrong please correct me. </p>

<p>And in some devices this app takes more than one pic on single click.</p>
",1573279,,472495,,2018-07-29 12:23:27,2018-10-17 17:41:49,Camera2Basic app front camera takes pic upside down,<android><camera><android-camera2>,3,0,,,
Android,46294833,1,,,2017,,7,6415,"<p>The notification channels which introduced from Android O (API 26) version.I read about it from the following links:</p>

<ul>
<li><a href=""https://developer.android.com/guide/topics/ui/notifiers/notifications.html#ManageChannels"" rel=""noreferrer"">Managing notification channels</a></li>
<li><a href=""https://github.com/googlesamples/android-NotificationChannels/blob/master/Application/src/main/java/com/example/android/notificationchannels/NotificationHelper.java"" rel=""noreferrer"">Google Sample for Creating Channel</a></li>
</ul>

<p><strong>Questions:</strong> </p>

<ol>
<li><p>If I have multiple numbers of notification then Is it a good idea to create notification channels when the application starts and keep it at <code>ApplicationScope</code>?</p>

<pre><code>public void addNotificationChannels(Context context) {

    List&lt;NotificationChannel&gt; channels = new ArrayList&lt;&gt;();
    channels.add(""channel_1"");
    channels.add(""channel_2"");
    .
    .
    channels.add(""channel_7"");

    NotificationManager notificationManager =
        (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
    notificationManager.createNotificationChannels(channels);

}
</code></pre></li>
<li><p>What will happen if I try to execute this line <code>new Notification.Builder(getApplicationContext(), PRIMARY_CHANNEL)</code> before adding channels to the notification manager</p></li>
</ol>
",1004437,,4166923,,2017-10-31 19:50:41,2018-06-01 19:05:17,Correct way to create Notification Channels from Android O Api,<android><android-notifications><android-8.0-oreo><notification-channel>,3,0,1,,
Android,44910631,1,44911261,,2017,,7,1426,"<p>Why are there two versions of TrivialDrive?</p>

<p><a href=""https://github.com/googlesamples/android-play-billing"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-billing</a></p>

<p>Which version should be the main reference project for learning in-app billing? What's the difference between the versions?</p>
",8251758,,1390874,,2017-09-28 22:38:27,2017-09-28 22:44:21,TrivialDrive vs TrivialDrive V2?,<android><github><in-app-purchase><play-billing-library>,3,0,1,,
Android,30350739,1,,,2015,,9,24330,"<p>I need to make screen similar to this. I think it has autocompletetextview and listview to display returned results. Google Place API is used here to auto suggest places and listview adapter is updated accordingly.
Please any kind of help is appreciated.
Thanks in advance.</p>

<p>Checked android sample project on AutoComplete for places too. But it is not having any listview to display results. Instead it shows results in autocompletetextview spinner. Any modification we can do with that project</p>

<p><a href=""https://github.com/googlesamples/android-play-places"" rel=""noreferrer"">Link to google sample project</a></p>

<p><img src=""https://i.stack.imgur.com/KVQOR.png"" alt=""Uber PickUp location screen""></p>
",2265145,,,,,2018-07-02 23:36:11,AutoCompleteTextView with Google Places shown in ListView just like Uber,<android><android-fragments><android-listview><google-places-api><autocompletetextview>,3,4,6,,
Android,34638651,1,34650699,,2016,,10,3202,"<p>My question is very simple:</p>

<blockquote>
  <p>How to get an Android <code>android.hardware.Camera2</code> with 1:1 ratio and without deformation like Instagram?</p>
</blockquote>

<p>I tested with the GoogeSamples project <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""noreferrer"">android-Camera2Basic</a>. But when I change the preview with a ratio of 1:1 image is deformed. Does anyone have an idea on this?</p>

<p><a href=""https://i.stack.imgur.com/wGC9Y.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/wGC9Y.png"" alt=""enter image description here""></a></p>
",1832221,,2370483,,2019-01-16 22:53:19,2019-01-16 22:53:19,How to get an Android Camera2 with 1:1 ratio like Instagram?,<android><android-camera2>,3,4,3,,
Android,38535355,1,,,2016,,10,3877,"<p>I have been working with the <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""noreferrer"">camera2 api demo from google</a> and unfortunately the sample application is built to display the textureview preview at approximately 70% of the screen height, after looking around I was able to determine that this was being caused by the AutoFitTextureView overriding the <code>onMeasure()</code> method as shown below:</p>

<pre><code>@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    int width = MeasureSpec.getSize(widthMeasureSpec);
    int height = MeasureSpec.getSize(heightMeasureSpec);
    if (0 == mRatioWidth || 0 == mRatioHeight) {
        setMeasuredDimension(width, height);
    } else {
        if (width &lt; height * mRatioWidth / mRatioHeight) {
            setMeasuredDimension(width, width * mRatioHeight / mRatioWidth);
        } else {
            setMeasuredDimension(height * mRatioWidth / mRatioHeight, height);
        }
    }
}
</code></pre>

<p>I attempted to correct this by setting the correct heights and widths in <code>setMeasuredDimension(width, height);</code>, this fixed the height issue and gave me a full screen preview from the textureview, however the aspect ratio is completely broken and warped on every device, what is the standard way of fixing this? I see many apps on the play store have found a way to solve this problem but havent been able to track down a fix, any help will go a long way, thanks.</p>
",793197,,,,,2017-08-17 15:12:59,android textureview full screen preview with correct aspect ratio,<java><android><android-camera><android-camera2><android-textureview>,3,2,2,,
Android,33151244,1,,,2015,,11,8478,"<p>i want to implement tap to focus feature in my custom camera.
This is the basic code provided by Google <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a></p>

<p>Here's the code snippet where i think i should add my feature
If anyone has implemented the Camera2 API please help!</p>

<pre><code>  private void lockFocus() {
    try {
        // This is how to tell the camera to lock focus.
        mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AF_TRIGGER,
                CameraMetadata.CONTROL_AF_TRIGGER_START);
        // Tell #mCaptureCallback to wait for the lock.
        mState = STATE_WAITING_LOCK;
        mCaptureSession.capture(mPreviewRequestBuilder.build(), mCaptureCallback,
                mBackgroundHandler);
    } catch (CameraAccessException e) {
        e.printStackTrace();
    }
}
</code></pre>
",5137755,,,,,2019-01-02 7:57:29,Implement Tap to Focus in Camera2 API,<android>,3,0,6,,
Android,33851794,1,33851850,,2015,,12,1394,"<p>In Google's in-app billing Trivial Drive sample, a <code>BroadcastReceiver</code> is registered to listen for messages about updated purchases, after the IabHelper setup has successfully completed.  </p>

<p>The author however has included the following note:</p>

<blockquote>
  <p>Note: registering this listener in an Activity is a bad idea, but is done here 
  because this is a SAMPLE.</p>
</blockquote>

<p>Why is this a bad idea for this listener?</p>

<p>This comment can be found in the <code>OnIabSetupFinishedListener</code> definition in the <code>onCreate</code> method of <a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample/MainActivity.java""><code>MainActivity</code></a> in the <a href=""https://github.com/googlesamples/android-play-billing/tree/master/TrivialDrive"">source code for the Trivial Drive sample</a></p>
",2598349,,,,,2016-07-21 6:02:09,Why is registering IabBroadcastReceiver in Activity a bad idea?,<android>,3,1,2,,
Android,32051973,1,32051974,,2015,,12,16099,"<p>I have checkout out the latest Google Vision APIs from here:</p>

<p><a href=""https://github.com/googlesamples/android-vision"" rel=""noreferrer"">https://github.com/googlesamples/android-vision</a></p>

<p>And I am running it on a LG G2 device with KitKat. The only change I have made is to the minSdkVerion in the Gradle file:</p>

<pre><code>...
defaultConfig {
    applicationId ""com.google.android.gms.samples.vision.face.multitracker""
    minSdkVersion 19
...
</code></pre>

<p>However it does not focus. How do I make it focus?</p>
",932052,,379726,,2015-09-28 9:31:22,2018-06-08 9:57:34,Google Vision API Samples: Get the CameraSource to Focus,<android><camera><google-play-services><google-vision><android-vision>,3,0,2,,
Android,53573731,1,53764393,,2018,,12,364,"<p>We try to update <code>sqlite_sequence</code> with the following code.</p>

<pre><code>WeNoteRoomDatabase weNoteRoomDatabase = WeNoteRoomDatabase.instance();
weNoteRoomDatabase.query(new SimpleSQLiteQuery(""UPDATE sqlite_sequence SET seq = 0 WHERE name = 'attachment'""));
</code></pre>

<p>However, it has no effect at all. I exam the <code>sqlite_sequence</code> table content using SQLite browser. The counter is not reset to 0.</p>

<p>If we try to run the same query manually using SQLite browser on same SQLite file, it works just fine.</p>

<p>Our Room database is pretty straightforward.</p>

<pre><code>@Database(
    entities = {Attachment.class},
    version = 6
)
public abstract class WeNoteRoomDatabase extends RoomDatabase {
    private volatile static WeNoteRoomDatabase INSTANCE;

    private static final String NAME = ""wenote"";

    public abstract AttachmentDao attachmentDao();

    public static WeNoteRoomDatabase instance() {
        if (INSTANCE == null) {
            synchronized (WeNoteRoomDatabase.class) {
                if (INSTANCE == null) {
                    INSTANCE = Room.databaseBuilder(
                        WeNoteApplication.instance(),
                        WeNoteRoomDatabase.class,
                        NAME
                    )
                        .build();
                }
            }
        }

        return INSTANCE;
    }
}
</code></pre>

<p>Any idea what we had missed out?</p>

<hr>

<p>Additional information : <a href=""https://github.com/googlesamples/android-architecture-components/issues/330"" rel=""noreferrer"">clearing sqlite_sequence is not working in android room</a></p>
",72437,,72437,,2018-12-02 8:28:35,2018-12-14 16:24:33,Not able to update sqlite_sequence table using RoomDatabase.query,<android><android-room>,3,7,2,,
Android,45407964,1,45563152,,2017,,14,2331,"<p><strong>What I am trying?</strong></p>

<p>I am trying to take picture with drawable/paint on face but, i am not able to get both on same picture.</p>

<p><a href=""https://i.stack.imgur.com/2c3rI.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/2c3rI.png"" alt=""enter image description here""></a></p>

<p><strong>What I have tried?</strong></p>

<p>I have tried using <code>CameraSource.takePicture</code> but i am just getting face without any drawable/paint on it.</p>

<pre><code>mCameraSource.takePicture(shutterCallback, new CameraSource.PictureCallback() {
            @Override
            public void onPictureTaken(byte[] bytes) {
                try {
                    String mainpath = getExternalStorageDirectory() + separator + ""TestXyz"" + separator + ""images"" + separator;
                    File basePath = new File(mainpath);
                    if (!basePath.exists())
                        Log.d(""CAPTURE_BASE_PATH"", basePath.mkdirs() ? ""Success"": ""Failed"");
                    String path = mainpath + ""photo_"" + getPhotoTime() + "".jpg"";
                    File captureFile = new File(path);
                    captureFile.createNewFile();
                    if (!captureFile.exists())
                        Log.d(""CAPTURE_FILE_PATH"", captureFile.createNewFile() ? ""Success"": ""Failed"");
                    FileOutputStream stream = new FileOutputStream(captureFile);
                    stream.write(bytes);
                    stream.flush();
                    stream.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        });
</code></pre>

<p>I also tried using : </p>

<pre><code>mPreview.setDrawingCacheEnabled(true);
        Bitmap drawingCache = mPreview.getDrawingCache();
        try {
            String mainpath = getExternalStorageDirectory() + separator + ""TestXyz"" + separator + ""images"" + separator;
            File basePath = new File(mainpath);
            if (!basePath.exists())
                Log.d(""CAPTURE_BASE_PATH"", basePath.mkdirs() ? ""Success"": ""Failed"");
            String path = mainpath + ""photo_"" + getPhotoTime() + "".jpg"";
            File captureFile = new File(path);
            captureFile.createNewFile();
            if (!captureFile.exists())
                Log.d(""CAPTURE_FILE_PATH"", captureFile.createNewFile() ? ""Success"": ""Failed"");
            FileOutputStream stream = new FileOutputStream(captureFile);
            drawingCache.compress(Bitmap.CompressFormat.PNG, 100, stream);
            stream.flush();
            stream.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
</code></pre>

<p>in this case i am only getting what i draw on face. Here, mPreview is the <a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/googly-eyes/app/src/main/java/com/google/android/gms/samples/vision/face/googlyeyes/ui/camera/CameraSourcePreview.java"" rel=""noreferrer"">CameraSourcePreview</a>. </p>

<p>Just added capture button and added above code in <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/googly-eyes"" rel=""noreferrer"">this</a> google example.</p>
",2024527,,7663565,,2017-08-04 4:04:36,2018-05-02 3:59:10,Take picture with drawable/paint on face using vision api,<android><google-vision><vision-api>,3,6,4,,
Android,39470098,1,,,2016,,14,4423,"<p>I have gone through the android finger print sample provided by Google.</p>

<p><a href=""https://github.com/googlesamples/android-FingerprintDialog"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-FingerprintDialog</a></p>

<p>As I am new to security standards, I am unable to understand the following.</p>

<ol>
<li>Why we need to use Keystore, key, CryptoObject... etc? Simply It could be like, ask fingerprint manager to authenticate the user and it can simply return the status(success/failed)</li>
<li>Do I need to generate new key every time on each authentication?</li>
</ol>
",1294150,,3857465,,2018-09-13 10:55:35,2018-09-13 10:55:35,Why crypto object is needed for Android fingerprint authentication?,<android><android-fingerprint-api>,3,3,3,,
Android,28003186,1,28019789,,2015,,16,31689,"<p>What I want to achieve is capturing a picture without showing the preview, sending directly the output to an <code>ImageReader</code>. 
I have used the <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"" rel=""noreferrer"">Camera2Basic example</a> as a starting point. 
However, the callback of my <code>ImageReader</code> is never called, hence no image is sent to its <code>Surface</code>.
Do I really need to display a preview first?</p>

<p>This is the camera code, which is ordered following the flow of the asynchronous callbacks:</p>

<pre><code>private ImageReader imageReader;
private Handler backgroundHandler;
private HandlerThread backgroundThread;
private String cameraId;
private CameraDevice cameraDevice;
private CameraCaptureSession cameraCaptureSession;
    @Override
    public void onCreate() {
        setupCamera2();
    }

    private void setupCamera2() {
        CameraManager manager = (CameraManager) getSystemService(Context.CAMERA_SERVICE);

        try {

            for (String cameraId : manager.getCameraIdList()) {
            CameraCharacteristics characteristics = manager.getCameraCharacteristics(cameraId);

            if (characteristics.get(CameraCharacteristics.LENS_FACING) != CameraCharacteristics.LENS_FACING_FRONT) {
                continue;
            }

            this.cameraId = cameraId;

            int[] picSize = Settings.getPictureSize();
            int picWidth = picSize[0];
            int picHeight = picSize[1];

            imageReader = ImageReader.newInstance(picWidth, picHeight, ImageFormat.JPEG, 2);
            imageReader.setOnImageAvailableListener(onImageAvailableListener, backgroundHandler);
            }

        } catch (CameraAccessException | NullPointerException e) {
            e.printStackTrace();
        }
    }


    private void openCamera2() {
        CameraManager manager = (CameraManager) getSystemService(Context.CAMERA_SERVICE);
        try {

            manager.openCamera(cameraId, cameraStateCallback, backgroundHandler);

        } catch (CameraAccessException e) {
            e.printStackTrace();
        }
    }



    private final CameraDevice.StateCallback cameraStateCallback = new CameraDevice.StateCallback() {
        @Override
        public void onOpened(CameraDevice device) {
            cameraDevice = device;
            createCameraCaptureSession();
        }

        @Override
        public void onDisconnected(CameraDevice cameraDevice) {}

        @Override
        public void onError(CameraDevice cameraDevice, int error) {}
    };



    private void createCaptureSession() {
        List&lt;Surface&gt; outputSurfaces = new LinkedList&lt;&gt;();
        outputSurfaces.add(imageReader.getSurface());

        try {

            cameraDevice.createCaptureSession(outputSurfaces, new CameraCaptureSession.StateCallback() {
                @Override
                public void onConfigured(CameraCaptureSession session) {
                    cameraCaptureSession = session;
                }

                @Override
                public void onConfigureFailed(CameraCaptureSession session) {}
            }, null);

        } catch (CameraAccessException e) {
            e.printStackTrace();
        }
    }


    private final ImageReader.OnImageAvailableListener onImageAvailableListener = new ImageReader.OnImageAvailableListener() {
        @Override
        public void onImageAvailable(ImageReader reader) {
            createCaptureRequest();
        }
    };


    private void createCaptureRequest() {
        try {

            CaptureRequest.Builder requestBuilder = cameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_STILL_CAPTURE);
            requestBuilder.addTarget(imageReader.getSurface());

            // Focus
            requestBuilder.set(CaptureRequest.CONTROL_AF_MODE, CaptureRequest.CONTROL_AF_MODE_CONTINUOUS_PICTURE);

            // Orientation
            int rotation = windowManager.getDefaultDisplay().getRotation();
            requestBuilder.set(CaptureRequest.JPEG_ORIENTATION, ORIENTATIONS.get(rotation));

            cameraCaptureSession.capture(requestBuilder.build(), camera2Callback, null);

        } catch (CameraAccessException e) {
            e.printStackTrace();
        }
    }
</code></pre>
",2639515,,3192021,,2016-12-22 11:51:54,2018-03-20 16:37:04,Capture picture without preview using camera2 API,<android><camera>,3,4,18,,
Android,34609427,1,,,2016,,18,4795,"<p>A user of my app reported that when my app is listening for fingerprint authentication (I have called <code>fingerprintManager.authenticate</code>) and the screen is turned off (by hitting the devices power switch button), it is not possible to use the fingerprint to unlock the device. </p>

<p>I can also see that the onAuthenticationError callback method is called when the screen is turned off, which does not happen when I leave my activity, because I call <code>CancellationSignal.cancel()</code> in my <code>onPause</code> method. I have checked that <code>onPause</code> is being called.</p>

<p>The same behavior can be observed in the Fingerprint Dialog sample (<a href=""https://github.com/xamarin/monodroid-samples/tree/master/android-m/FingerprintDialog"">https://github.com/xamarin/monodroid-samples/tree/master/android-m/FingerprintDialog</a>, ported from <a href=""https://github.com/googlesamples/android-FingerprintDialog"">https://github.com/googlesamples/android-FingerprintDialog</a>)</p>

<p>What can I do to resolve this behavior?</p>

<p>EDIT: I also tried to register a broadcast receiver for android.intent.action.SCREEN_OFF which gets notified after onPause, so it's no surprise that calling <code>cancel()</code> in that receiver does not change anything.</p>
",292233,,292233,,2016-01-10 8:35:49,2016-09-07 14:07:29,Stop listening for fingerprint when screen off,<android><fingerprint>,3,2,,,
Android,47727211,1,47930515,,2017,,20,9731,"<p>With the stabilization of Android Architecture Components I started updating all my basic <code>ViewModel</code>s to the new implementation of<a href=""https://developer.android.com/topic/libraries/architecture/viewmodel.html"" rel=""noreferrer""><code>ViewModel</code></a>. In my understanding, the usage of <a href=""https://developer.android.com/topic/libraries/architecture/livedata.html"" rel=""noreferrer""><code>LiveData</code></a> is recommended to hold the <code>Model</code> class since it handles the lifecycle better.</p>

<p>I like using <code>Data Binding</code> because it makes the code clearer in Java/Kotlin side and it is not needed to ""watch"" the value changes to update the UI. However the layout using <code>Data Binding</code> only watch data changes if the <code>Model</code> (or the ViewModel) extends <a href=""https://developer.android.com/reference/android/databinding/BaseObservable.html"" rel=""noreferrer""><code>BaseObservable</code></a> and <code>LiveData</code> does not. I understand the one of the main objectives of <code>LiveData</code> is to be observed and updates the UI programmatically but for simple updates, <code>Data Binding</code> is very useful.</p>

<p>This issue was already reported (<a href=""https://github.com/googlesamples/android-architecture-components/issues/34#issuecomment-305991529"" rel=""noreferrer"">GitHub</a> and <a href=""https://stackoverflow.com/questions/44077566/how-to-combine-architecture-components-with-data-binding-on-android#comment82259306_44178060"">Stack Overflow</a>) and first was said that the version 1.0 would have it and now is said that this feature is in development.</p>

<p>In order to use both <code>LiveData</code> and <code>Data Binding</code>, I created a very simple implementation of class that extends <code>BaseObservable</code>:</p>

<pre><code>import android.arch.lifecycle.LiveData
import android.arch.lifecycle.MutableLiveData
import android.databinding.BaseObservable

class ObservableMutableLiveData&lt;T&gt;() : BaseObservable() {

    private var data: MutableLiveData&lt;T&gt; = MutableLiveData()

    constructor(data: T) : this() {
        this.data.value = data
    }

    public fun set(value: T) {
        if (value != data.value) {
            data.value = value
            notifyChange()
        }
    }

    public fun get(): T? {
        return data.value
    }

    public fun getObservable(): LiveData&lt;T&gt; {
        return data
    }
}
</code></pre>

<p>So basically my <code>ObservableMutableLiveData</code> is a copy of <a href=""https://android.googlesource.com/platform/frameworks/data-binding/+/c9a5d6f140f732ca0ff279a4b1ee315072e1c422/library/src/main/java/android/databinding/ObservableField.java"" rel=""noreferrer""><code>ObservableField</code></a> using <code>LiveData</code> to store the model and with this implementation, the layout updates after every model update.</p>

<p>The questions are:</p>

<ul>
<li>Is this a bad implementation of <code>LiveData</code>? Does this wrapper ""breaks"" the functionalities of <code>LiveData</code>, such as be lifecycle-aware?</li>
<li>In my understanding, <code>LiveData</code> is the new <code>ObservableField</code>. Is this correct?</li>
</ul>
",6100078,,,,,2019-02-05 20:14:44,Using LiveData with Data Binding,<android><kotlin><android-databinding><android-architecture-components><android-mvvm>,3,0,4,,
Android,38493000,1,,,2016,,21,1895,"<p>The new API, perhaps only on LG G3, seems to have something changed.</p>

<p>I'm using <a href=""https://github.com/googlesamples/android-Camera2Basic"">the sample code</a>.</p>

<p>On my nexus 4, the code runs perfectly, but on LGG3 updated to Android 6.0 it does not. Any ideas?</p>

<p>I played with the settings, but no luck, this still works fine on Nexus 4:</p>

<pre><code>mPreviewRequestBuilder.set(CaptureRequest.BLACK_LEVEL_LOCK, false);


mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AWB_LOCK, false);
mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AWB_MODE, CaptureRequest.CONTROL_AWB_MODE_AUTO);


mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AE_LOCK, false);

mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AE_MODE, CaptureRequest.CONTROL_AE_MODE_ON);
mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AE_ANTIBANDING_MODE, CaptureRequest.CONTROL_AE_ANTIBANDING_MODE_AUTO);
mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AE_EXPOSURE_COMPENSATION, 0);
//mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AE_TARGET_FPS_RANGE, Range.create(1000,1000));
mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AE_PRECAPTURE_TRIGGER, 0);


mPreviewRequestBuilder.set(CaptureRequest.CONTROL_MODE, CaptureRequest.CONTROL_MODE_AUTO);
mPreviewRequestBuilder.set(CaptureRequest.COLOR_CORRECTION_MODE, CaptureRequest.CONTROL_MODE_AUTO);


mPreviewRequestBuilder.set(CaptureRequest.CONTROL_CAPTURE_INTENT,
        CaptureRequest.CONTROL_CAPTURE_INTENT_PREVIEW);

mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AF_MODE,
        CaptureRequest.CONTROL_AF_MODE_CONTINUOUS_PICTURE);
</code></pre>
",6503333,,1276636,,2016-08-01 15:14:59,2018-04-29 15:23:24,"Camera2basic app, has very dark preview in Android 6.0 LGG3",<android><android-6.0-marshmallow><android-camera2>,3,4,5,,
Android,41296030,1,,,2016,,2,2496,"<p><a href=""https://github.com/googlesamples/android-SwipeRefreshLayoutBasic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-SwipeRefreshLayoutBasic</a></p>

<p>Referring to the sample above. The swipe refresh is calling when user scrolls up reaches top of the list. What i want is to call swipe refresh only when user specially swipes for it. Not calling swipe refresh when user is scrolling up and reached top end.</p>

<p>When i am using the lib below, i get what i want. But i m facing some issues with this lib so i didnt want to use it.
github.com/baoyongzhang/android-PullRefreshLayout</p>

<p>Here is the video clip of what i dont want:
<a href=""https://drive.google.com/file/d/0By2g3SV1qz5TUFdZZ1FUNmxzU1E/view?usp=sharing"" rel=""nofollow noreferrer"">https://drive.google.com/file/d/0By2g3SV1qz5TUFdZZ1FUNmxzU1E/view?usp=sharing</a></p>
",4302472,,4302472,,2016-12-23 6:21:48,2016-12-23 9:08:41,"Swipe refresh to be called only when user swipes for it, not when user reaches top of list",<android><android-support-library><swiperefreshlayout>,4,13,1,,
Android,50758822,1,,,2018,,3,3869,"<p>I tried to integrate google smart login and SMS SmsRetrieverClient  in my project. First thing that shocked me is, on the official documentation of these functionalities(<a href=""https://developers.google.com/identity/sms-retriever/request#prerequisites"" rel=""nofollow noreferrer"">https://developers.google.com/identity/sms-retriever/request#prerequisites</a>), the required libraries are missing. Some how i tried to find out the required ones on net that are : </p>

<pre><code>implementation 'com.google.android.gms:play-services-base:11.8.0'
implementation 'com.google.android.gms:play-services-identity:11.8.0'
implementation 'com.google.android.gms:play-services-auth:11.8.0'
implementation 'com.google.android.gms:play-services-auth-api-phone:11.8.0'
</code></pre>

<p>but as i sync the gradle one error is coming. i.e. </p>

<blockquote>
  <p>Failed to resolve: play-services-auth-base-license Open File</p>
</blockquote>

<p>I have made a lot of search on google but do not got any solution. 
The sample of google on git hub is: <a href=""https://github.com/googlesamples/android-credentials/tree/master/sms-verification/android"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-credentials/tree/master/sms-verification/android</a></p>
",2260963,,6176003,,2018-06-08 13:02:35,2018-12-04 13:43:14,Failed to resolve: play-services-auth-base-license version 11.8.0,<android><android-gradle><resolve><play-services-auth-base-license>,4,4,1,,
Android,27529852,1,,,2014,,3,5007,"<p>I have a problem with android Camera2 API on a Nexus 7. I have developed an app on android 4.4.4 that uses the camera to take a picture, and I want to update it for the Lollipop update. I've followed code from this link to make new camera api work: <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java</a></p>

<p>I've tested code on a Nexus 5, and everything works well, but if i try it on a Nexus 7, something goes wrong. This is the error log:</p>

<pre><code>12-17 17:01:15.517: W/LegacyRequestMapper(24382): convertRequestMetadata - control.awbRegions setting is not supported, ignoring value
12-17 17:01:15.517: W/LegacyRequestMapper(24382): Only received metering rectangles with weight 0.
12-17 17:01:15.518: W/LegacyRequestMapper(24382): Only received metering rectangles with weight 0.
12-17 17:01:15.519: W/LegacyRequestMapper(24382): mapAeAndFlashMode - Ignore control.aeMode == ON_AUTO_FLASH;camera does not support it
12-17 17:01:15.519: W/LegacyRequestMapper(24382): convertRequestToMetadata - Ignoring android.lens.focusDistance false, only 0.0f is supported
12-17 17:01:15.955: I/CameraDeviceState(24382): Legacy camera service transitioning to state CAPTURING
12-17 17:01:21.198: I/RequestQueue(24382): Repeating capture request cancelled.
12-17 17:01:21.198: I/RequestQueue(24382): Repeating capture request set.
12-17 17:01:21.215: W/LegacyRequestMapper(24382): convertRequestMetadata - control.awbRegions setting is not supported, ignoring value
12-17 17:01:21.215: W/LegacyRequestMapper(24382): Only received metering rectangles with weight 0.
12-17 17:01:21.215: W/LegacyRequestMapper(24382): Only received metering rectangles with weight 0.
12-17 17:01:21.216: W/LegacyRequestMapper(24382): mapAeAndFlashMode - Ignore control.aeMode == ON_AUTO_FLASH;camera does not support it
12-17 17:01:21.216: W/LegacyRequestMapper(24382): convertRequestToMetadata - Ignoring android.lens.focusDistance false, only 0.0f is supported
12-17 17:01:21.495: E/AndroidRuntime(24382): FATAL EXCEPTION: CameraBackground
12-17 17:01:21.495: E/AndroidRuntime(24382): Process: com.example.newapicamera, PID: 24382
12-17 17:01:21.495: E/AndroidRuntime(24382): java.lang.NullPointerException: Attempt to invoke virtual method 'int java.lang.Integer.intValue()' on a null object reference
12-17 17:01:21.495: E/AndroidRuntime(24382):    at com.example.newapicamera.Camera2BasicFragment$4.process(Camera2BasicFragment.java:285)
12-17 17:01:21.495: E/AndroidRuntime(24382):    at com.example.newapicamera.Camera2BasicFragment$4.onCaptureCompleted(Camera2BasicFragment.java:324)
12-17 17:01:21.495: E/AndroidRuntime(24382):    at java.lang.reflect.Method.invoke(Native Method)
12-17 17:01:21.495: E/AndroidRuntime(24382):    at java.lang.reflect.Method.invoke(Method.java:372)
12-17 17:01:21.495: E/AndroidRuntime(24382):    at android.hardware.camera2.dispatch.InvokeDispatcher.dispatch(InvokeDispatcher.java:39)
12-17 17:01:21.495: E/AndroidRuntime(24382):    at android.hardware.camera2.dispatch.HandlerDispatcher$1.run(HandlerDispatcher.java:65)
12-17 17:01:21.495: E/AndroidRuntime(24382):    at android.os.Handler.handleCallback(Handler.java:739)
12-17 17:01:21.495: E/AndroidRuntime(24382):    at  android.os.Handler.dispatchMessage(Handler.java:95)
12-17 17:01:21.495: E/AndroidRuntime(24382):    at android.os.Looper.loop(Looper.java:135)
12-17 17:01:21.495: E/AndroidRuntime(24382):    at android.os.HandlerThread.run(HandlerThread.java:61)
12-17 17:01:21.542: I/RequestQueue(24382): Repeating capture request cancelled.
12-17 17:01:21.580: E/BufferQueueProducer(24382): [unnamed-24382-2] dequeueBuffer: BufferQueue has been abandoned
12-17 17:01:21.580: E/BufferQueueProducer(24382): [unnamed-24382-2] dequeueBuffer: BufferQueue has been abandoned
12-17 17:01:21.596: E/BufferQueueProducer(24382): [unnamed-24382-2] queueBuffer: BufferQueue has been abandoned
12-17 17:01:21.605: W/Camera-JNI(24382): callback on dead camera object
12-17 17:01:21.620: E/BufferQueueProducer(24382): [unnamed-24382-2] queueBuffer: BufferQueue has been abandoned
12-17 17:01:21.651: E/BufferQueueProducer(24382): [unnamed-24382-2] queueBuffer: BufferQueue has been abandoned
12-17 17:01:21.688: E/BufferQueueProducer(24382): [unnamed-24382-2] queueBuffer: BufferQueue has been abandoned
12-17 17:01:21.721: E/BufferQueueProducer(24382): [unnamed-24382-2] queueBuffer: BufferQueue has been abandoned
</code></pre>

<p>The line that throws the exception is:</p>

<pre><code>int aeState = result.get(CaptureResult.CONTROL_AE_STATE);
</code></pre>

<p>What is going wrong?</p>
",1246746,,822005,,2014-12-17 23:53:09,2016-03-15 1:46:24,new android Camera2 Api on nexus 7,<android><android-camera>,4,0,1,,
Android,35793657,1,35797305,,2016,,3,755,"<p>I am using Camera2 API with help of the two examples that you can find here:</p>

<ul>
<li><a href=""https://github.com/googlesamples/android-Camera2Video/"" rel=""nofollow"">GitHub - Camera2Video</a></li>
<li><a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">GitHub - Camera2Basic</a></li>
</ul>

<p>I am using identical source code like in the above links, so I wont copy my Source here (unless you require some parts, I will edit my question and post it).</p>

<p><strong>EDIT:</strong> </p>

<p>Ran some tests. When I try to play the video through my phone, it only displays the first frame and I can hear Audio (voices) that were actually in the recording. Once the video goes until end, the video somehow restarts automatically and displays the video as it should.</p>

<p>However, when I try to play the video on my PC (copying it from Phone to Desktop), I only get black screen until the last frame. Last frame is shown, but the video does not play at all. I can hear Audio (voices) tho.</p>

<p>I am thinking of maybe there's issue with some Video encoding / decoding?</p>

<p><strong>ISSUE:</strong></p>

<blockquote>
  <p>In my case the Video recording won't work. I
  can see both files in the directory that they should be on my Phone,
  but when I play the video
  (5 second video) <strong>first 4 seconds are black</strong>, then last second is like
  one Frame of what I recorded and that's it, yet file size seems big (160MB).</p>
</blockquote>

<p><strong>SCREENS:</strong></p>

<ul>
<li><em>Will post video once uploaded</em></li>
</ul>

<p>I do not know what is wrong, can someone please help?</p>
",4090338,,4090338,,2016-03-04 13:14:16,2017-11-11 9:12:23,Android Camera2 picture is black and video records only 1sec,<android><video><android-camera><android-image><android-camera2>,4,2,,,
Android,35968315,1,36030703,,2016,,8,6675,"<p>I'm new in Android Camera2 API.
I just move my all project to the new Camera2 API. I have used the <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"" rel=""nofollow noreferrer"">Camera2Basic example</a> as a starting point.</p>

<p>I'm now trying handle zoom by adding this:</p>

<pre><code>public boolean onTouchEvent(MotionEvent event) {
    try {
        CameraManager manager = (CameraManager) getSystemService(Context.CAMERA_SERVICE);
        CameraCharacteristics characteristics = manager.getCameraCharacteristics(mCameraId);
        float maxZoom = (characteristics.get(CameraCharacteristics.SCALER_AVAILABLE_MAX_DIGITAL_ZOOM))*10;

        Rect m = characteristics.get(CameraCharacteristics.SENSOR_INFO_ACTIVE_ARRAY_SIZE);
        int action = event.getAction();
        float current_finger_spacing;

        if (event.getPointerCount() &gt; 1) {
            // Multi touch logic
            current_finger_spacing = getFingerSpacing(event);

            if(finger_spacing != 0){
                if(current_finger_spacing &gt; finger_spacing &amp;&amp; maxZoom &gt; zoom_level){
                    zoom_level++;

                }
                else if (current_finger_spacing &lt; finger_spacing &amp;&amp; zoom_level &gt; 1){
                    zoom_level--;

                }
                int minW = (int) (m.width() / maxZoom);
                int minH = (int) (m.height() / maxZoom);
                int difW = m.width() - minW;
                int difH = m.height() - minH;
                int cropW = difW /100 *(int)zoom_level;
                int cropH = difH /100 *(int)zoom_level;
                cropW -= cropW &amp; 3;
                cropH -= cropH &amp; 3;
                Rect zoom = new Rect(cropW, cropH, m.width() - cropW, m.height() - cropH);
                mPreviewRequestBuilder.set(CaptureRequest.SCALER_CROP_REGION, zoom);
            }
            finger_spacing = current_finger_spacing;
        }
        else{
            if (action == MotionEvent.ACTION_UP) {
                //single touch logic
            }
        }

        try {
            mCaptureSession.setRepeatingRequest(mPreviewRequestBuilder.build(), mCaptureCallback,
                    null);
        }
        catch (CameraAccessException e) {
            e.printStackTrace();
        }
        catch (NullPointerException ex)
        {
            ex.printStackTrace();
        }
    }
    catch (CameraAccessException e)
    {
        throw new RuntimeException(""can not access camera."", e);
    }

    return true;
}
</code></pre>

<p>And this:</p>

<pre><code>private float getFingerSpacing(MotionEvent event) {
    float x = event.getX(0) - event.getX(1);
    float y = event.getY(0) - event.getY(1);
    return FloatMath.sqrt(x * x + y * y);
}
</code></pre>

<p>But after I captured, the picture result is without the zoom.
How can I make it happen?
Thanks all.</p>

<p><strong>Update</strong>
Need to add <code>captureBuilder.set(CaptureRequest.SCALER_CROP_REGION, zoom);</code> to <code>captureStillPicture()</code> method.</p>
",5904387,,1363438,,2018-10-10 20:41:19,2018-10-10 20:41:19,android camera2 handle zoom,<android><zoom><capture><android-camera2>,4,4,5,,
Android,30334319,1,,,2015,,16,9602,"<p>There is not enough info about camera2 face recognition mechanism. I used Camera2 sample from Google:
  <a href=""http://%20%20https://github.com/googlesamples/android-Camera2Basic"" rel=""noreferrer"">android-Camera2Basic</a></p>

<p>I set face recognition mode to FULL.</p>

<pre><code>mPreviewRequestBuilder.set(CaptureRequest.STATISTICS_FACE_DETECT_MODE,
                                    CameraMetadata.STATISTICS_FACE_DETECT_MODE_FULL);
</code></pre>

<p>Also I checked </p>

<p><code>STATISTICS_INFO_MAX_FACE_COUNT</code> and <code>STATISTICS_INFO_AVAILABLE_FACE_DETECT_MODES</code>:</p>

<pre><code>int max_count = characteristics.get(
CameraCharacteristics.STATISTICS_INFO_MAX_FACE_COUNT);
int modes [] = characteristics.get(
CameraCharacteristics.STATISTICS_INFO_AVAILABLE_FACE_DETECT_MODES);
</code></pre>

<p><strong>Output</strong>: <em>maxCount : 5 , modes : [0, 2]</em> </p>

<p>My CaptureCallback:</p>

<pre><code> private CameraCaptureSession.CaptureCallback mCaptureCallback
 = new CameraCaptureSession.CaptureCallback() {

    private void process(CaptureResult result) {
                Integer mode = result.get(CaptureResult.STATISTICS_FACE_DETECT_MODE);
                Face [] faces = result.get(CaptureResult.STATISTICS_FACES);
                if(faces != null &amp;&amp; mode != null)
                    Log.e(""tag"", ""faces : "" + faces.length + "" , mode : "" + mode ); 
    }

    @Override
    public void onCaptureProgressed(CameraCaptureSession session, CaptureRequest request,
                                    CaptureResult partialResult) {
        process(partialResult);
    }

    @Override
    public void onCaptureCompleted(CameraCaptureSession session, CaptureRequest request,
                                   TotalCaptureResult result) {
        process(result);
    }
</code></pre>

<p><strong>Output</strong>: <em>faces : 0 , mode : 2</em> </p>

<pre><code> public static final int STATISTICS_FACE_DETECT_MODE_FULL = 2;
</code></pre>

<p>Faces length is constantly 0. Looks like it doesn't recognise a face properly or I missed something.</p>

<p>I know approach with <a href=""https://developer.android.com/reference/android/media/FaceDetector.html"" rel=""noreferrer"">FaceDetector</a>. I just wanted to check how it works with new camera2 <a href=""https://developer.android.com/reference/android/hardware/camera2/params/Face.html"" rel=""noreferrer"">Face</a>.</p>
",1100525,,4501480,,2016-06-27 5:09:28,2018-12-29 13:01:05,Android camera2 face recognition,<android><android-camera><face-detection><face-recognition>,4,2,4,,
Android,42054221,1,42152545,,2017,,27,1174,"<p>I have an android application that performs image analysis, which is managed with an <code>IntentService</code> - the process takes a couple of seconds each time and works accurately and quickly. </p>

<p>But when the process is repeated in the app around 50 times (as illustrated) it begins to get very slow until the point in which the app and device becomes unusable. When the device is restarted and app opens again it runs as usual.</p>

<p>Inspecting with Android Studio I can see that each time I run the analysis that the memory allocation for the app goes up and up every time by around <em>1MB</em>. So it is clearly running out of memory when it crashes.</p>

<p>I have used this flag on finishing the analysis and going to the result to try fix background activities;</p>

<pre><code>intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);
</code></pre>

<p>which has had minimal effect, and I understand the IntentService manages itself shutting down. So not sure what else I can do to try and reduce the memory allocation or at least clear down allocation and stop adding to it?</p>

<p><a href=""https://i.stack.imgur.com/S12aw.png""><img src=""https://i.stack.imgur.com/S12aw.png"" alt=""Image Analysis Workflow""></a></p>

<p>Further details:</p>

<ul>
<li>The application is using the camera implementation based on <a href=""https://github.com/googlesamples/android-Camera2Basic"">Google Camera2</a></li>
<li>The analysis is done with a C++ library through the IntentService</li>
</ul>
",1887939,,,,,2017-02-14 22:10:20,Memory allocation problems with android application,<java><android><android-camera2>,4,7,2,,
Android,49832787,1,52724308,,2018,,1,1264,"<p>Is it possible to prevent LiveData receive the last value when start observing?
I am considering to use LiveData as events.</p>

<p>For example events like show message, a navigation event or a dialog trigger, similar to EventBus.</p>

<p>I found something similar <a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java"" rel=""nofollow noreferrer"">SingleLiveEvent</a> - but it work only for 1 observer and not for multiple observers.</p>
",5827565,,5827565,,2019-02-08 23:34:16,2019-03-17 23:00:43,Android LiveData prevent receive the last value when subscribe,<android><android-architecture-components><android-livedata><mutablelivedata>,5,5,2,,
Android,42107466,1,,,2017,,2,2351,"<p>I am exploring wonderful mobile vision apis, I am working on <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker"" rel=""nofollow noreferrer"">Face Tracker</a> example and looking for a solution where I can find out whether mouth is open or not. e.g. person is yawning. There is not direct way like <code>face.getIsLeftEyeOpenProbability();</code></p>

<p>So I am thinking that I need to find out x,y coordinates of both left and right mouth find out the difference and figure out whether mouse is open or not. I am not sure if this will work or not.</p>

<p>But is there any other way we can find out whether mouth is open or closed ?</p>
",1166926,,1166926,,2017-02-08 9:42:40,2019-04-10 13:48:41,Android Mobile Vision API detect mouth is open,<android><face-recognition><android-vision>,5,0,1,,
Android,31188849,1,31191045,,2015,,3,3785,"<p>No matter what projects I import they never work - Android Studio is always flagging <code>this is not a Gradle build project</code>.</p>

<p>I select <code>VCS -&gt; GIT</code> and clone the repo without any problem. I then go through the wizard with no issues (I select <code>create project from existing sources</code>), creating my code base with a warning, below.  When i try to run throws all sorts of errors.</p>

<blockquote>
  <p>Migrate Project to Gradle? This project does not use the Gradle build
  system. We recommend that you migrate to using the Gradle build
  system. More Information about migrating to Gradle.</p>
  
  <p>Don't show this message again.</p>
</blockquote>

<p>When I go to the link it makes no sense whatever to me, it says to create an arbitrary Gradle file and populate it with my references (I think), which is out of my understanding. I shouldnt have to do this as it says in the repository instructions that it is in fact a Gradle-based project.</p>

<p>The project I am trying to clone is
<a href=""https://github.com/googlesamples/android-play-location.git"" rel=""nofollow"">https://github.com/googlesamples/android-play-location.git</a></p>

<p>Can anybody tell me specifically how to import and run the following git repo in Android studio for example?</p>
",510981,,130659,,2015-07-03 10:04:20,2018-09-20 3:42:17,Android Studio not recognising Gradle projects,<android><android-studio><gradle>,5,0,2,,
Android,49833533,1,50061778,,2018,,5,3301,"<p>I'm currently writing some UI unit tests for a fragment, and one of these <code>@Test</code> is to see if a list of objects is correctly displayed, this is <strong>not an integration</strong> test, therefore I wish to <strong>mock</strong> the <code>ViewModel</code>.</p>

<p>The fragment's vars:</p>

<pre><code>class FavoritesFragment : Fragment() {

    private lateinit var adapter: FavoritesAdapter
    private lateinit var viewModel: FavoritesViewModel
    @Inject lateinit var viewModelFactory: FavoritesViewModelFactory

    (...)
</code></pre>

<p>Here's the code:</p>

<pre><code>@MediumTest
@RunWith(AndroidJUnit4::class)
class FavoritesFragmentTest {

    @Rule @JvmField val activityRule = ActivityTestRule(TestFragmentActivity::class.java, true, true)
    @Rule @JvmField val instantTaskExecutorRule = InstantTaskExecutorRule()

    private val results = MutableLiveData&lt;Resource&lt;List&lt;FavoriteView&gt;&gt;&gt;()
    private val viewModel = mock(FavoritesViewModel::class.java)

    private lateinit var favoritesFragment: FavoritesFragment

    @Before
    fun setup() {
        favoritesFragment = FavoritesFragment.newInstance()
        activityRule.activity.addFragment(favoritesFragment)
        `when`(viewModel.getFavourites()).thenReturn(results)
    }

    (...)

    // This is the initial part of the test where I intend to push to the view
    @Test
    fun whenDataComesInItIsCorrectlyDisplayedOnTheList() {
        val resultsList = TestFactoryFavoriteView.generateFavoriteViewList()
        results.postValue(Resource.success(resultsList))

        (...)
    }
</code></pre>

<p>I was able to mock the <code>ViewModel</code> but of course, that's not the same <code>ViewModel</code> created inside the <code>Fragment</code>.</p>

<p>So my question really, has someone done this successfully or has some pointers/references that might help me out?</p>

<ul>
<li><p>Also, I've tried looking into the <a href=""https://github.com/googlesamples/android-architecture-components"" rel=""noreferrer"">google-samples</a> but with no luck.</p></li>
<li><p><strong>For reference, the project can be found here:</strong> <a href=""https://github.com/JoaquimLey/transport-eta/"" rel=""noreferrer"">https://github.com/JoaquimLey/transport-eta/</a></p></li>
</ul>
",3374428,,3374428,,2018-04-27 7:47:08,2018-08-10 12:47:04,How to correctly mock ViewModel on androidTest,<android><kotlin><mockito><android-espresso><android-architecture-components>,5,0,2,,
Android,48005850,1,,,2017,,8,293,"<p><a href=""https://github.com/googlesamples/android-RuntimePermissions/"" rel=""noreferrer"">https://github.com/googlesamples/android-RuntimePermissions/</a></p>

<p>After cloning I imported the code in Android Studio 2.3.3 But app folder is not showing in Project>Android and also other android specific option like Android Monitor is absent. Build Project not working.</p>

<p>How I imported is as followed.
<strong>File > New > Import Project > android-RuntimePermissions > build.gradle</strong>and then clicked ok</p>

<p>I have added Kotlin plugin to android studio as the project have Kotlin module.</p>
",1646919,,6248491,,2018-01-16 5:51:51,2018-01-22 6:51:33,android-RuntimePermissions sample code not working,<java><android><android-studio><intellij-idea>,5,1,,,
Android,33127258,1,,,2015,,10,4255,"<p>I have the code for the Camera2 from <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a>.</p>

<p>The problem i'm facing is that when i turn to my Front Camera, i cannot capture pictures but works fine with Back Camera.</p>

<p>Has anyone implemented the Camera2 Api please help!</p>

<p>Here's the code snippet:</p>

<pre><code>private void setUpCameraOutputs(int width, int height) {
    Activity activity = getActivity();
    CameraManager manager = (CameraManager) activity.getSystemService(Context.CAMERA_SERVICE);
    try {
        for (String cameraId : manager.getCameraIdList()) {
            CameraCharacteristics characteristics
                    = manager.getCameraCharacteristics(cameraId);

            // We don't use a front facing camera in this sample.
            int facing = characteristics.get(CameraCharacteristics.LENS_FACING);
            Log.i(TAG,""Front Cam ID: ""+ facing);
            if (characteristics.get(CameraCharacteristics.LENS_FACING)==CameraCharacteristics.LENS_FACING_FRONT)
            {



                StreamConfigurationMap map = characteristics.get(
                        CameraCharacteristics.SCALER_STREAM_CONFIGURATION_MAP);


                // For still image captures, we use the largest available size.
                Size largest = Collections.max(
                        Arrays.asList(map.getOutputSizes(ImageFormat.JPEG)),
                        new CompareSizesByArea());
                mImageReader = ImageReader.newInstance(largest.getWidth(), largest.getHeight(),
                        ImageFormat.JPEG, /*maxImages*/2);
                mImageReader.setOnImageAvailableListener(
                        mOnImageAvailableListener, mBackgroundHandler);

                // Danger, W.R.! Attempting to use too large a preview size could  exceed the camera
                // bus' bandwidth limitation, resulting in gorgeous previews but the storage of
                // garbage capture data.
                mPreviewSize = chooseOptimalSize(map.getOutputSizes(SurfaceTexture.class),
                        width, height, largest);

                // We fit the aspect ratio of TextureView to the size of preview we picked.
                int orientation = getResources().getConfiguration().orientation;
                if (orientation == Configuration.ORIENTATION_LANDSCAPE) {
                    mTextureView.setAspectRatio(
                            mPreviewSize.getWidth(), mPreviewSize.getHeight());
                } else {
                    mTextureView.setAspectRatio(
                            mPreviewSize.getHeight(), mPreviewSize.getWidth());
                }

                mCameraId = cameraId;
                return;
            }
            else
            {
                onActivityCreated(Bundle.EMPTY);
            }
        }
    } catch (CameraAccessException e) {
        e.printStackTrace();
    } catch (NullPointerException e) {
        // Currently an NPE is thrown when the Camera2API is used but not supported on the
        // device this code runs.
        ErrorDialog.newInstance(getString(R.string.camera_error))
                .show(getChildFragmentManager(), FRAGMENT_DIALOG);
    }
}
</code></pre>
",5137755,,,,,2016-11-14 20:21:31,Front Camera in Camera2 not capturing image,<android>,5,3,5,,
Android,39658993,1,,,2016,,16,3787,"<p>I have a BroadcastReceiver implementation that receives network connection events. its declared in the AndroidManifest.xml and is called by Android automatically when network events occur.</p>

<p>BroadcastReceiver:</p>

<pre><code>public class ConnectivityChangeReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        Log.v(TAG, ""action: "" + intent.getAction());
        Log.v(TAG, ""component: "" + intent.getComponent());
    }
}
</code></pre>

<p>AndroidManifest.xml:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;manifest xmlns:android=""http://schemas.android.com/apk/res/android""
    package=""com.example.test""&gt;

    &lt;uses-permission android:name=""android.permission.ACCESS_NETWORK_STATE"" /&gt;

    &lt;application
        android:allowBackup=""true""
        android:icon=""@mipmap/ic_launcher""
        android:label=""@string/app_name""
        android:supportsRtl=""true""
        android:theme=""@style/AppTheme""&gt;
        ...
        &lt;receiver
            android:name="".ConnectivityChangeReceiver""
            android:enabled=""true""&gt;
            &lt;intent-filter&gt;
                &lt;action android:name=""android.net.conn.CONNECTIVITY_CHANGE"" /&gt;
            &lt;/intent-filter&gt;
        &lt;/receiver&gt;
    &lt;/application&gt;

&lt;/manifest&gt;
</code></pre>

<p>I'd like to use Google's MVP sample architecture described here for my app:</p>

<p><a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp/"" rel=""noreferrer"">https://github.com/googlesamples/android-architecture/tree/todo-mvp/</a></p>

<p>Using the above architecture, just wondering:</p>

<ol>
<li><p>Where should my BroadcastReceiver be placed?</p></li>
<li><p>If my BroadcastReceiver needs to write to the database, whats the best way of doing this?</p></li>
<li><p>If my BroadcastReceiver needs to update the UI, whats the best way of doing this?</p></li>
</ol>
",4477923,,,,,2016-10-03 12:18:47,Where to put BroadcastReceiver in Android MVP?,<android><mvp>,5,5,6,,
Android,52873173,1,52897124,,2018,,20,3401,"<p>I am migrating my app to androidx, I can't seem to get my unit tests working. I took example from <a href=""https://github.com/googlesamples/android-testing/tree/master/runner/AndroidJunitRunnerSample/"" rel=""noreferrer"">Google's AndroidJunitRunnerSample</a>, which has been updated to use the new androidx api. I get the following error when trying to run my tests:</p>

<pre><code>java.lang.Exception: Delegate runner 'androidx.test.internal.runner.junit4.AndroidJUnit4ClassRunner' for AndroidJUnit4 could not be loaded. Check your build configuration.
</code></pre>

<p>Here is my module build.gradle:</p>

<pre><code>android {
    defaultConfig {
        testInstrumentationRunner ""androidx.test.runner.AndroidJUnitRunner""
    }
}
dependencies {
    // Test dependencies
    androidTestImplementation 'androidx.test:core:1.0.0-beta02'
    androidTestImplementation 'androidx.test.ext:junit:1.0.0-beta02'
    androidTestImplementation 'androidx.test:runner:1.1.0-beta02'
    androidTestImplementation 'androidx.test.espresso:espresso-core:3.1.0-beta02'
    androidTestImplementation ""androidx.arch.core:core-testing:2.0.0""
    androidTestImplementation 'androidx.room:room-testing:2.1.0-alpha01'
    androidTestImplementation 'androidx.test.espresso:espresso-core:3.1.0-beta02'
    androidTestImplementation 'org.hamcrest:hamcrest-library:1.3'
}
</code></pre>

<p>And here is how my tests are structured:</p>

<pre><code>import org.junit.BeforeClass;
import org.junit.Test;
import org.junit.runner.RunWith;

import androidx.test.ext.junit.runners.AndroidJUnit4;

@RunWith(AndroidJUnit4.class)
public class EntityParcelTest {

    @BeforeClass
    public void createEntities() {
        // Setup...
    }

    @Test
    void someTest() {
        // Testing here
    }
</code></pre>

<p>What am I doing wrong?</p>
",10518087,,10518087,,2018-10-19 17:02:09,2019-03-01 11:15:35,Migrating Junit4 tests to androidx: What causes 'delegate runner could not be loaded'?,<android><android-studio><junit><junit4><androidx>,5,0,3,,
Android,32134299,1,,,2015,,39,16587,"<p>Say you have a method like this:</p>

<pre><code>public boolean saveFile (Url url, String content) {

   // save the file, this can be done a lot of different ways, but
   // basically the point is...

   return save_was_successful;
}
</code></pre>

<p>Throughout your app, if you want to save a file to external storage, you do something like...</p>

<pre><code>if (saveFile(external_storage_url, ""this is a test"")) {
   // yay, success!
} else { // notify the user something was wrong or handle the error }
</code></pre>

<p>This is a simplified example, so don't get on my case about blocking the UI, handling exceptions properly, etc.  If you don't like file saving, you could imagine a <code>getContact()</code> or <code>getPhoneState()</code> or whatever.  The point is it's a permission-needing operation that returns some value(s) and it's used throughout the app.</p>

<p>In Android &lt;= Lollipop, if the user had installed and agreed to granting <code>android.permission.WRITE_EXTERNAL_STORAGE</code> or whatever, all would be good.</p>

<p>But in the new Marshmallow (API 23) <a href=""https://developer.android.com/preview/features/runtime-permissions.html"">runtime permission model</a>, before you can save the file to external storage, you're supposed to (1) check if the permission has been granted.  <a href=""https://github.com/googlesamples/android-RuntimePermissions/blob/master/Application/src/main/java/com/example/android/system/runtimepermissions/MainActivity.java#L204-L208"">If not</a>, possibly (2) <a href=""https://github.com/googlesamples/android-RuntimePermissions/blob/master/Application/src/main/java/com/example/android/system/runtimepermissions/MainActivity.java#L217-L227"">show a rationale for the request</a> (if the <a href=""https://developer.android.com/reference/android/app/Activity.html#shouldShowRequestPermissionRationale(java.lang.String)"">system thinks it's a good idea</a>) with a toast or whatever and (3) ask the user to grant permission via a dialog, then basically sit back and wait for a callback...</p>

<p>(so your app sits around, waiting...)</p>

<p>(4) When the user finally responds to the dialog, the <a href=""https://github.com/googlesamples/android-RuntimePermissions/blob/master/Application/src/main/java/com/example/android/system/runtimepermissions/MainActivity.java#L263-L264"">onRequestPermissionsResult()</a> method fires off, and your code now (5) has to sift through WHICH <a href=""https://github.com/googlesamples/android-RuntimePermissions/blob/master/Application/src/main/java/com/example/android/system/runtimepermissions/MainActivity.java#L286"">permission</a> request they are actually <a href=""https://github.com/googlesamples/android-RuntimePermissions/blob/master/Application/src/main/java/com/example/android/system/runtimepermissions/MainActivity.java#L286"">responding to</a>, whether the user said yes or no (to my knowledge there's no way to handle ""no"" vs. ""no and don't ask again""), (6) figure out what they were trying to accomplish in the first place that prompted the whole ask-for-permissions process, so that the program can <em>finally</em>  (7) go ahead and do that thing.</p>

<p>To know what the user was trying to do in step (6) involves having previously passed a special <a href=""https://developer.android.com/preview/features/runtime-permissions.html#coding"">code</a> (the ""permissions request response"") which is described in the docs as an identifier of the type of <a href=""https://github.com/googlesamples/android-RuntimePermissions/blob/master/Application/src/main/java/com/example/android/system/runtimepermissions/MainActivity.java#L89"">permission request</a> (camera/contact/etc.) but seems to me more like a ""specifically, what you were trying to do when you realized you'd need to ask for permissions"" code, given that the same permission/group may be used for multiple purposes in your code, so you'd need to use this code to return execution to the appropriate place after getting the permission.</p>

<p>I could be totally misunderstanding how this is supposed to work-- so please let me know if I'm way off-- but the larger point is I'm <em>really</em> not sure how to even think about doing all of the above w/the <code>saveFile()</code> method described previously due to the asynchronous ""wait for the user to respond"" part.  The ideas I've considered are pretty hacky and certainly wrong.</p>

<p>Today's <a href=""http://androidbackstage.blogspot.com/2015/08/episode-33-permission-mission.html"">Android Developer Podcast</a> hinted that there may be a synchronous solution around the corner, and there was even talk about a magic, one-step alt-enter type of ""add a permissions request"" tool in Android Studio.  Still, how the runtime permission process might be shoved into a <code>saveFile()</code> or whatever-- I'm thinking something along the lines of :</p>

<pre><code>public boolean saveFile(Url url, String content) {
   //   this next line will check for the permission, ask the user
   //   for permission if required, maybe even handle the rationale
   //   situation
   if (!checkPermission(Manifest.permission.WRITE_EXTERNAL_STORAGE,
                        R.string.permission_storage_rationale))
       {
           return false; // or throw an exception or whatever
       } else {

   // try to save the file

   return save_was_successful;

   }
}
</code></pre>

<p>So the above <code>checkPermission()</code> would fail if the user didn't have and also refused to grant the permission.  Maybe one could use a loop around <code>checkPermission()</code> to try asking up to 3 times or something, or better would be if a sane dont-be-annoying-policy was handled by the method.</p>

<p>Is such a thing possible?  Desirable?  Would any such solution block the UI thread?  From the podcast it sounded like Google <em>may</em> have a solution like this coming 'round the corner, but I wanted to get thoughts on whether there was something-- a convenience class, a pattern, something-- that doesn't involve everyone having to refactor all permission-requiring operations, which I must assume could get pretty messy.</p>

<p>Sorry for the long-winded question, but I wanted to be as complete as possible.  I'll take my answer off the air.  Thanks!</p>

<hr>

<p><strong><em>Update</em></strong>:  Here is the transcript from the podcast mentioned above.</p>

<p>Listen at about <a href=""http://androidbackstage.blogspot.com/2015/08/episode-33-permission-mission.html"">41:20</a>.  In this discussion:</p>

<p>Rough transcript:</p>

<p>Tor Norbye (Tools team):  ""<em>So it doesn't seem like it should be a lot of work for developers.  But I understand part of the problem is that these are not synchronous calls, right?.  So what you have to- actually change the way your activity is written to have a callback-- so it's really kinda like a state machine where... for this state, you-</em>""</p>

<p>Poiesz (product manager): ""<em>Ah- I thought- there was a- there might be an option for synchronous response--</em>""</p>

<p>Norbye: ""<em>Oh.  that would make things--</em>""</p>

<p>Poiesz: ""<em>I can talk with folks internally.  I recall a discussion about synchronous- but we can find out.</em>""</p>

<p>Norbye: ""<em>Yeah. In fact we should probably make it into the tools.  Where you have an easy refactoring...</em>""</p>

<p>Then he talks about using annotations in the tools to determine which APIs require permissions.. (which as of now doesn't work that great IMO) and how he wants the tools someday to actually generate the required code if it finds an unchecked ""dangerous"" method call:</p>

<p>Norbye:  ""<em>...then if you're on M as well it'll say, 'hey, are you actually checking for this permission or are you catching security exceptions?', and if you're not, we'll say 'you probably need to do something for requesting the permission here.'   What I would like though is for that to have a quick fix where you can go 'CHING!' and it inserts all the right stuff for asking, but the way things were back when I looked, this required restructuring a lot of things-- adding interfaces and callbacks, and changing the flow, and that we couldn't do.  But if there's an easy synchronous mode as a temporary thing or a permanent thing, that would [be great].</em>""</p>
",3035127,,3035127,,2015-10-03 8:50:20,2017-07-24 19:04:10,Can you request permissions synchronously in Android Marshmallow (API 23)'s runtime permissions model?,<android><android-permissions><android-6.0-marshmallow>,5,9,8,,
Android,53865978,1,,,2018,,7,2071,"<p>I've implemented the <code>SMS Retriever API</code> like in the google tutorials and in my debug Build Variant work fine. I can read the sms and get the code to the user can do the login. </p>

<p>My problem is when I run the app in release Build Variant the sms it doesn't work. I receive the sms but I can't read the code to do the login.</p>

<p>I change the hash generated with <a href=""https://github.com/googlesamples/android-credentials/blob/master/sms-verification/android/app/src/main/java/com/google/samples/smartlock/sms_verify/AppSignatureHelper.java"" rel=""nofollow noreferrer"">AppSignatureHelper </a> in release mode that is differente than in the debug mode. In debug work and in release no.</p>

<p>Some help will be appreciate</p>

<p>The code:</p>

<p><strong>Manifest:</strong></p>

<pre><code>   &lt;receiver android:name="".app.receivers.SmsReceiver""&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=""com.google.android.gms.auth.api.phone.SMS_RETRIEVED""/&gt;
        &lt;/intent-filter&gt;
    &lt;/receiver&gt;
</code></pre>

<p>In my class: (In release and in debug mode the code go throw the onSucess method) This method is called in <strong>onCreate</strong>.</p>

<pre><code>private void startSMSListening(){
    SmsRetrieverClient client = SmsRetriever.getClient(this);
    Task&lt;Void&gt; task = client.startSmsRetriever();

    task.addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {
        @Override
        public void onSuccess(Void aVoid) {
            // Successfully started retriever, expect broadcast intent
            Log.e(""startSMSListening"", ""listening sms"");
            sendCode();
            showHideLoadingView(false);
        }
    });

    task.addOnFailureListener(new OnFailureListener() {
        @Override
        public void onFailure(@NonNull Exception e) {
            // Failed to start retriever, inspect Exception for more details
            Log.e(""startSMSListening"", ""failure listening sms"");
            showHideLoadingView(false);
        }
    });
}
</code></pre>

<p><strong>My receiver:</strong></p>

<pre><code>public class SmsReceiver extends BroadcastReceiver {
    //interface
    private static SmsListener mListener;

    @Override
    public void onReceive(Context context, Intent intent) {
        if (SmsRetriever.SMS_RETRIEVED_ACTION.equals(intent.getAction())) {
            Bundle extras = intent.getExtras();
            if(extras != null) {
                Status status = (Status) extras.get(SmsRetriever.EXTRA_STATUS);

                if(status != null) {
                    switch (status.getStatusCode()) {
                        case CommonStatusCodes.SUCCESS:
                            // Get SMS message contents
                            String message = (String) extras.get(SmsRetriever.EXTRA_SMS_MESSAGE);
                            //Pass the message text to interface
                            if (mListener != null &amp;&amp; !StringUtil.isNull(message)) {
                                mListener.messageReceived(message);
                            }
                            break;
                        case CommonStatusCodes.TIMEOUT:
                            Log.d(""SMSReceiver"", ""timed out (5 minutes)"");
                            break;
                    }
                }
            }
        }
    }

    public static void bindListener(SmsListener listener) {
        mListener = listener;
    }
}
</code></pre>

<p><strong>My smsReceiver method:</strong></p>

<pre><code>private void smsReceiver(){
        SmsReceiver.bindListener(new SmsListener() {
            @Override
            public void messageReceived(String messageText) {
                //From the received text string you may do string operations to get the required OTP
                //It depends on your SMS format
                Log.e(""Message"",messageText);

                // If your OTP is six digits number, you may use the below code
                Pattern pattern = Pattern.compile(OTP_REGEX);
                Matcher matcher = pattern.matcher(messageText);
                String otp = null;

                while (matcher.find()) {
                    otp = matcher.group();
                }

                if(otp != null &amp;&amp; et_code != null) {
                    et_code.setText(otp);
                }
            }
        });
    }
</code></pre>
",4403871,,7649582,,2019-01-16 12:28:03,2019-04-17 14:18:12,Why SMS Retriever API don't work in release mode?,<android><android-intent><android-broadcast><android-broadcastreceiver><android-sms>,6,5,2,,
Android,36174807,1,,,2016,,8,4355,"<p>I want to capture image while recording video using camera2 API.</p>

<p>Two separate demos are available.
1. <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""noreferrer"">To capture image</a> and 
2. <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""noreferrer"">To record video</a></p>

<p>I tried to combine them into one app. But confused in many things. Like</p>

<ul>
<li>CameraDevice is single which representation of a single camera connected to an Android device.</li>
<li>Different template needed in request. For image : <code>mCameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_PREVIEW);</code> and for video <code>mCameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_RECORD);</code></li>
<li>In createCaptureSession method surface of ImageReader is needed and for video MediaRecorder is needed.</li>
</ul>

<p>CameraCaptureSession.StateCallback is needed in createCaptureSession method for both image and video.</p>

<p>And camera2 APIs are new. So no more examples available on Google.</p>

<p>Anyone has any idea about this? like how to capture photo while recording in android?</p>
",759684,,1033581,,2017-12-14 10:44:03,2018-09-12 16:46:05,How to programmatically take Photos while recording Video using Camera2 API in Android,<android><image><video><android-camera2>,6,2,6,,
Android,28954421,1,29069944,,2015,,15,32893,"<p>I'm attempting to follow the Android <a href=""https://developer.android.com/training/location/receive-location-updates.html"">Receiving Location Updates</a> tutorial. The example code is <a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationUpdates/app/src/main/java/com/google/android/gms/location/sample/locationupdates/MainActivity.java"">here on Github</a>.</p>

<p>Everything is working except for this line:
        <code>LocationServices.FusedLocationApi.requestLocationUpdates(mGoogleApiClient, mLocationRequest, this);</code></p>

<p>It's throwing a <code>cannot resolve method requestLocationUpdates</code> error. I don't see anything in the <a href=""https://developer.android.com/reference/com/google/android/gms/location/FusedLocationProviderApi.html#requestLocationUpdates(com.google.android.gms.common.api.GoogleApiClient,%20com.google.android.gms.location.LocationRequest,%20com.google.android.gms.location.LocationListener)"">documentation</a>, but I'm pretty new to Android so might be missing something :).</p>

<p>Here's the full code. Any ideas where I'm going wrong? Thanks!</p>

<pre><code>package location.test.example.com;

import android.app.Fragment;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.os.Bundle;
import android.support.v4.app.NavUtils;
import android.text.format.DateFormat;
import android.util.Log;
import android.view.ActionMode;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.api.GoogleApiClient;
import com.google.android.gms.location.LocationRequest;
import com.google.android.gms.location.LocationServices;

import java.util.ArrayList;
import java.util.Date;

public class LocationFragment extends Fragment implements
        GoogleApiClient.ConnectionCallbacks, GoogleApiClient.OnConnectionFailedListener, LocationListener {

    protected GoogleApiClient mGoogleApiClient;
    protected Location mCurrentLocation;
    protected LocationRequest mLocationRequest;
    protected String mLastUpdateTime;

    public static final long UPDATE_INTERVAL_IN_MILLISECONDS = 5000;

    public static final long FASTEST_UPDATE_INTERVAL_IN_MILLISECONDS = UPDATE_INTERVAL_IN_MILLISECONDS / 5;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mLastUpdateTime = """";

        buildGoogleApiClient();

        if (NavUtils.getParentActivityName(getActivity()) != null) {
            getActivity().getActionBar().setDisplayHomeAsUpEnabled(true);
        }
        setHasOptionsMenu(true);

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.fragment_location, container, false);    

        return v;
    }

    protected synchronized void buildGoogleApiClient() {
        mGoogleApiClient = new GoogleApiClient.Builder(getActivity())
                .addConnectionCallbacks(this)
                .addOnConnectionFailedListener(this)
                .addApi(LocationServices.API)
                .build();
        createLocationRequest();
    }

    protected void createLocationRequest() {
        mLocationRequest = new LocationRequest();

        mLocationRequest.setInterval(UPDATE_INTERVAL_IN_MILLISECONDS);

        mLocationRequest.setFastestInterval(FASTEST_UPDATE_INTERVAL_IN_MILLISECONDS);

        mLocationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);
        startLocationUpdates();
    }

    protected void startLocationUpdates() {
        LocationServices.FusedLocationApi.requestLocationUpdates(mGoogleApiClient, mLocationRequest, this);
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {

    }

    @Override
    public void onProviderEnabled(String provider) {

    }

    @Override
    public void onProviderDisabled(String provider) {

    }

    @Override
    public void onLocationChanged(Location location) {
        mCurrentLocation = location;
        mLastUpdateTime = DateFormat.getDateFormat(getActivity()).format(new Date());
        Toast.makeText(getActivity(), location.toString() + """", Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onConnected(Bundle connectionHint) {

    }

    @Override
    public void onConnectionFailed(ConnectionResult result) {
        Log.i(""LocationFragment"", ""Connection failed: ConnectionResult.getErrorCode() "" + result.getErrorCode());
    }

    @Override
    public void onConnectionSuspended(int cause) {
        Log.i(""LocationFragment"", ""Connection suspended"");
        mGoogleApiClient.connect();
    }

}
</code></pre>
",2650407,,,,,2018-08-07 9:16:15,Android cannot resolve method requestLocationUpdates FusedLocationProviderAPI,<android><fusedlocationproviderapi>,6,0,3,,
Android,29029594,1,,,2015,,22,7668,"<p>I've been testing the geofencing api available in the latest Google Play Services, using the official sample available here: <a href=""https://github.com/googlesamples/android-Geofencing/"">https://github.com/googlesamples/android-Geofencing/</a>
And of course, following the training course: <a href=""http://developer.android.com/training/location/geofencing.html"">http://developer.android.com/training/location/geofencing.html</a></p>

<p>The sample displays a notification when you are nearing two Google buildings in San Fransisco, so I tweaked it to be triggered when I'm nearing my home or my work place.</p>

<p>If I use a real device, it works. The notifications are triggered properly. But when I'm using a simulator, and change the location with telnet or ddms, nothing happens. I also tried with Genymotion, with the Gapps installed, and same stuff: nothing.</p>

<p>Would anyone have any pointer about how to test geofence, without actually moving my butt? Because in the street, there is no way to debug the code...</p>
",870751,,,,,2018-09-04 10:17:40,Testing geofencing with Google Play Services 6.5.+,<android><google-play-services><geofencing>,6,7,5,,
Android,44497929,1,52966077,,2017,,2,3333,"<p>I have created an instant app. I uploaded it to my Google Console, and I got this error. </p>

<blockquote>
  <p>The www.kochchy.cz website has not been linked to your application
  through the Digital Assets Link protocol. Link the application site
  with Digital Assets Link.</p>
</blockquote>

<pre><code>[{
  ""relation"": [""delegate_permission/common.handle_all_urls""],
  ""target"": {
   ""namespace"": ""android_app"",
    ""package_name"": ""com.kochchy.instantapptest.app"",
    ""sha256_cert_fingerprints"":[""A4:A6:74:15:F1:3E:38:3F:93:0F:EF:E3:A6:86:8E:7C:25:45:E8:80:5B:5E:35:70:49:20:DB:F8:CB:D4:FC:E0""]
  }
}] 
</code></pre>

<p>Both apks, instant and installable use same id: <strong>com.kochchy.instantapptest.app</strong> (each defined in own module manifests) </p>

<p>My <strong>base</strong> module manifest looks like this: </p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;manifest xmlns:android=""http://schemas.android.com/apk/res/android""
package=""com.kochchy.instantapptest""&gt;

&lt;uses-permission android:name=""android.permission.INTERNET"" /&gt;

&lt;application
    android:allowBackup=""true""
    android:icon=""@mipmap/ic_launcher""
    android:label=""@string/app_name""
    android:roundIcon=""@mipmap/ic_launcher_round""
    android:theme=""@style/AppTheme""&gt;

    &lt;activity
        android:name="".MainActivity""
        android:label=""@string/app_name""
        android:theme=""@style/AppTheme.NoActionBar""&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=""android.intent.action.MAIN"" /&gt;

            &lt;category android:name=""android.intent.category.LAUNCHER"" /&gt;
        &lt;/intent-filter&gt;

        &lt;meta-data
            android:name=""default-url""
            android:value=""https://www.kochchy.cz"" /&gt;

        &lt;intent-filter android:autoVerify=""true""&gt;
            &lt;action android:name=""android.intent.action.VIEW"" /&gt;

            &lt;category android:name=""android.intent.category.DEFAULT"" /&gt;
            &lt;category android:name=""android.intent.category.BROWSABLE"" /&gt;

            &lt;data android:scheme=""https"" /&gt;
            &lt;data android:scheme=""http"" /&gt;
            &lt;data android:host=""www.kochchy.cz"" /&gt;
            &lt;data android:pathPattern=""/menu"" /&gt;
        &lt;/intent-filter&gt;
    &lt;/activity&gt;
&lt;/application&gt;
&lt;/manifest&gt;
</code></pre>

<p><strong>------ EDIT ------</strong></p>

<p>I made new project from google instant app sample: <a href=""https://github.com/googlesamples/android-instant-apps/tree/master/hello"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-instant-apps/tree/master/hello</a></p>

<p>Same google console error. I guess there is problem in my web setup, not in the app.</p>

<blockquote>
  <p><strong>The www.kochchy.cz website has not been linked to your application
  through the Digital Assets Link protocol. Link the application site
  with Digital Assets Link.</strong></p>
</blockquote>
",2291718,,2291718,,2017-06-15 14:19:10,2018-10-24 9:56:07,Digital Assets Link link to my website,<android><google-console-developer><android-instant-apps>,7,5,1,,
Android,42583759,1,42868218,,2017,,17,7806,"<p>DataBinding worked very well in my project,  But after upgrade Android Studio 2.3 today . <strong>Run 'app'</strong> failed because following error : </p>

<pre><code>Error:(15, 40) Error: package com.javan.myrecorder.databinding not exist.
import com.javan.myrecorder.databinding.FragmentEventsBinding;
:app:compileMockDebugJavaWithJavac FAILED
</code></pre>

<p>I just upgrade android studio and didn't change anything. all plugin is latest! Now my question is, why occurs this error and how could I solve it? any help is welcome!</p>

<p>English is not my mother tongue; please excuse any errors on my part.</p>

<hr>

<p>EDIT1</p>

<p>Like android project <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">googlesamples/android-architecture</a></p>

<ul>
<li><code>git checkout todo-databinding</code> </li>
<li>and then run <code>./gradlew assembleDebug</code> to build, build failed because of following error:</li>
</ul>

<p><a href=""https://i.stack.imgur.com/cwMyA.png"" rel=""nofollow noreferrer"">complete log of build</a></p>

<hr>

<p>EDIT2 <strong>I have fixed this problem by following <a href=""https://stackoverflow.com/questions/42570707/data-binding-broke-after-upgrade-to-gradle-2-3/42590471#42590471"">Data Binding broke after upgrade to Gradle 2.3</a></strong>.</p>

<p>in <code>build.gradle(app)</code> add </p>

<pre><code>apply plugin: 'com.android.application'
apply plugin: 'com.neenbedankt.android-apt'

..balabala

dependencies {
    apt 'com.android.databinding:compiler:2.3.0'
}
</code></pre>

<p>some file in my project:</p>

<p><code>gradle-wrapper.properties</code></p>

<pre><code>#Mon Mar 06 10:59:04 CST 2017
distributionBase=GRADLE_USER_HOME
distributionPath=wrapper/dists
zipStoreBase=GRADLE_USER_HOME
zipStorePath=wrapper/dists
distributionUrl=https\://services.gradle.org/distributions/gradle-3.3-all.zip
</code></pre>

<p>@petrnohejl @George Mount @Sa-Zad Prasla, Thanks!</p>
",7638509,,-1,,2017-05-23 10:31:31,2018-03-16 17:03:30,DataBinding not working after Upgrade Android Studio 2.3,<android><android-studio><data-binding><android-databinding><android-studio-2.3>,7,5,5,,
Android,43251528,1,,,2017,,29,31846,"<p>So, with Android O, you need to have your service running as a foreground service if you want to receive more than just a few location updates per hour.</p>

<p>I noticed that the old method for starting a foreground service does seem to work on O.
i.e. </p>

<pre><code>startForeground(NOTIFICATION_ID, getNotification());
</code></pre>

<p>According to the behaviour changes guide here:
<a href=""https://developer.android.com/preview/behavior-changes.html"" rel=""noreferrer"">https://developer.android.com/preview/behavior-changes.html</a></p>

<blockquote>
  <p>The NotificationManager.startServiceInForeground() method starts a foreground service. The old way to start a foreground service no longer works.</p>
</blockquote>

<p>Though the new method only works when targeting O, it seems that the old method still seems to work on an O device whether targeting O or not.</p>

<p><strong>Edit</strong>
Including example:</p>

<p>The Google sample project LocationUpdatesForegroundService actually has a working example where you can see the issue first hand.
<a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationUpdatesForegroundService"" rel=""noreferrer"">https://github.com/googlesamples/android-play-location/tree/master/LocationUpdatesForegroundService</a></p>

<p>The startForeground method seems to work without issue whether targeting and compiling against API level 25 OR targeting and compiling against O (as directed to here: <a href=""https://developer.android.com/preview/migration.html#uya"" rel=""noreferrer"">https://developer.android.com/preview/migration.html#uya</a>)</p>

<p>So, to reproduce:</p>

<ol>
<li>Configure the app gradle as mentioned in the previous link</li>
<li>Open the app</li>
<li>Request location updates</li>
<li>Close app (either via back button or home button)</li>
</ol>

<p>Service is running in foreground (shown by icon in notification shade).  Location updates are coming through as expected (every 10 seconds) even on a device running O. What I am missing here?</p>
",487812,,6618622,,2018-04-01 9:22:48,2019-01-04 14:12:28,Android O - Old start foreground service still working?,<android><location><android-8.0-oreo>,7,9,10,,
Android,33115337,1,,,2015,,8,11927,"<p>I am trying Google Place Autocomplete Example from <a href=""https://github.com/googlesamples/android-play-places"">https://github.com/googlesamples/android-play-places</a>.</p>

<p>I have put the correct API key at the correct place. I knew it because when I put a random string invalid API key I will get a different error.</p>

<p>So after I put the correct API key, I run the app in both real device and simulator. Both devices gave me this error:</p>

<p>Status{statusCode=PLACES_API_INVALID_APP, resolution=null}</p>

<p>What causes this error and how to fix it?</p>
",1114591,,1677912,,2015-10-14 2:00:33,2018-06-04 19:20:23,PLACES_API_INVALID_APP error from Android Play Places,<android><google-places-api>,8,3,1,,
Android,43258773,1,43646354,,2017,,35,2613,"<p><a href=""https://msdn.microsoft.com/en-us/library/ff649690.aspx"" rel=""noreferrer"">Repository Pattern</a> is defined by <a href=""https://martinfowler.com/eaaCatalog/repository.html"" rel=""noreferrer"">Hieatt and Rob Mee</a> as design pattern that <em>mediates between the domain and data mapping layers using a collection-like interface for accessing domain objects</em>.</p>

<p><a href=""https://i.stack.imgur.com/CMJFn.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/CMJFn.png"" alt=""MSDN Repository Pattern""></a></p>

<p>Basically it abstracts one or more I/O devices (cloud, disk, data base, etc) into a common collection-like interface where you can <a href=""http://blog.cleancoder.com/uncle-bob/2016/01/04/ALittleArchitecture.html"" rel=""noreferrer""><em>read, write, seek and delete data</em></a>.</p>

<p>On <a href=""https://fernandocejas.com/2014/09/03/architecting-android-the-clean-way/"" rel=""noreferrer"">Fernando Cejas's Android Clean Architecture</a>, all data needed for the application comes from this layer through a repository implementation (the interface is in the domain layer) that uses a Repository Pattern with a strategy that, through a factory, picks different data sources depending on certain conditions.</p>

<p><a href=""https://fernandocejas.com/assets/migrated/clean_architecture_data.png"" rel=""noreferrer""><img src=""https://fernandocejas.com/assets/migrated/clean_architecture_data.png"" alt=""Content Provider""></a></p>

<p>However, as pointed out by professor <a href=""https://www.youtube.com/watch?v=b3m9UIeSpBY&amp;t=246s"" rel=""noreferrer"">Douglas Schmidt</a> at <a href=""http://www.dre.vanderbilt.edu/~schmidt/Coursera/"" rel=""noreferrer"">Coursera course</a>, content provider <a href=""https://developer.android.com/guide/topics/providers/content-provider-basics.html"" rel=""noreferrer""><em>manages and mediates access to a central repository of data to one or more applications</em></a></p>

<p><a href=""https://i.stack.imgur.com/9ELkt.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/9ELkt.png"" alt=""Content Provider""></a></p>

<p>In the book <a href=""https://rads.stackoverflow.com/amzn/click/com/1449316646"" rel=""noreferrer"" rel=""nofollow noreferrer"">Programming Android</a>, content providers are used <a href=""https://www.safaribooksonline.com/library/view/programming-android-2nd/9781449332921/ch13.html"" rel=""noreferrer"">as a Facade for a RESTful Web Service</a>. This approach was initially presented by <a href=""https://www.youtube.com/watch?v=xHXn3Kg2IQE"" rel=""noreferrer"">
Virgil Dobjanschi during Google I/O 2010</a>.</p>

<p>Thus, instead of using content providers to <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-contentproviders/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/data/source"" rel=""noreferrer"">access the local SQLite database</a>, why not using it as the repository pattern itself?</p>

<p><a href=""https://i.stack.imgur.com/H21Oc.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/H21Oc.png"" alt=""enter image description here""></a></p>
",2886392,,2886392,,2017-04-26 11:54:06,2017-04-28 10:03:58,Is Content Provider an implementation of Repository Pattern?,<android><design-patterns><android-mvp>,8,0,8,,
Android,37388669,2,,37206416,2016,,1,,"<p>Two solutions:  </p>

<p>1) download ndk-r12 from <a href=""https://github.com/android-ndk/ndk/wiki"" rel=""nofollow"">https://github.com/android-ndk/ndk/wiki</a>, scroll down to ""current beta release"", and point your android studio to use that version from native-audio/local.properties file  </p>

<p>2) use your current ndk as-is, but comment out the following from native-audio/app/build.gradle<br>
toolchain = 'clang'<br>
then it will use gcc to build</p>

<p>Thanks to ggfan for <a href=""https://github.com/googlesamples/android-ndk/issues/202#issuecomment-219350419"" rel=""nofollow"">answering this question in github</a></p>
",4180271,,,,,2016-05-23 10:33:00,,,,0,,,
Android,29311776,2,,29307702,2015,,1,,"<p>The new camera2 API has a fairly different way of working, so I recommend you take a look at the basic samples available on GitHub here:</p>

<p><a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Basic</a></p>

<p>You also don't have to switch to the new API - the old android.hardware.Camera API is deprecated, but continues to work as before. It will eventually be removed, but it will be quite a while before that happens.</p>
",1344825,,,,,2015-03-27 23:26:37,,,,0,,,
Android,38715419,2,,29915035,2016,,1,,"<p>You just have to update the 'aidl' file from the official gitHub, and clean-build the project:</p>

<p><a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/aidl/com/android/vending/billing/IInAppBillingService.aidl"" rel=""nofollow"">https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/aidl/com/android/vending/billing/IInAppBillingService.aidl</a></p>

<p>You'll be happy forever after.</p>
",1371730,,,,,2016-08-02 8:29:20,,,,0,,,
Android,38712636,2,,38712410,2016,,1,,"<p>You have to make Custom Camera. As If you use Intent for Camera then you will get a full screen by default. You cannot use it. You want something like facebook uses in Messenger. Try this. This camera is in a Fragment. Replace the Fragment where required. Divide device height of surface view and fragment view.</p>

<p><a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Basic</a></p>
",4476671,,4476671,,2016-08-02 6:42:14,2016-08-02 6:42:14,,,,1,,,
Android,35584260,2,,35582760,2016,,1,,"<p>I found a nifty little trick, used in the <a href=""https://github.com/googlesamples/android-AsymmetricFingerprintDialog"" rel=""nofollow"">AsymmetricFingerprintDialog</a> sample application, though I do not know if I fully understand how it works. The sample uses the first iteration of Dagger, but a quick test showed that it works with Dagger 2 as well.</p>

<p>For each <code>Fragment</code> I added an empty constructor with an <code>@Inject</code> annotation, then used an <code>@Inject</code> annotation to get an instance of the <code>Fragment</code> in my <code>Activity</code>.</p>

<pre><code>public class MainActivity extends AppCompatActivity {

    @Inject MyFragment mFragment;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        MyApplication.getComponent().inject(this);
        getSupportFragmentManager().beginTransaction
                .replace(R.id.fragment_container, mFragment).commit();
        ...
    }
}
</code></pre>

<hr>

<pre><code>public class MyFragment extends Fragment {

    @Inject MyDependency mDependency;

    @Inject
    public MyFragment() {}

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
        mDependency.doSomething();
        ...
    }
}
</code></pre>

<p>This allows me to call <code>MyApplication.getComponent().inject(this)</code> only in each <code>Activity</code>, and the dependencies will be injected to the <code>Fragment</code> classes as well. In this way, I only need an <code>inject</code> method for each <code>Activity</code>, and not each <code>Fragment</code>.</p>

<pre><code>@Singleton @Component(modules = {AppModule.class})
public interface AppComponent {

    void inject(MainActivity activity);
}
</code></pre>

<p>I am curious as to how this works though. From what I can see it has nothing to do with Dagger, instead it seems to use the <code>@Inject</code> annotation for its intended purpose? Though I am new to Dagger as well as JSR-330, so I am unsure.</p>

<hr>

<p><strong>Edit:</strong> This method only works with <code>setRetainInstanceState(true)</code>, or if you save and restore the instance yourself. </p>
",5115932,,5115932,,2016-02-23 19:57:49,2016-02-23 19:57:49,,,,2,,,
Android,53364590,2,,48826312,2018,,1,,"<p>I've just seen your question whilst having to implement a QR code scanner myself.</p>

<p>What worked easily for me was to place everything in a RelativeLayout and simply stack views on top of the SurfaceView. By doing this you can obtain the required overlay effect. </p>

<pre><code>&lt;RelativeLayout
    xmlns:android=""http://schemas.android.com/apk/res/android""
    xmlns:tools=""http://schemas.android.com/tools""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""
    tools:context="".view.activity.QRActivity""&gt;

&lt;SurfaceView android:id=""@+id/surfaceViewBarcode""
             android:layout_width=""match_parent""
             android:layout_height=""match_parent""/&gt;

&lt;View   android:layout_width=""match_parent""
        android:layout_height=""match_parent""
        android:alpha=""0.5""
        android:background=""@android:color/black"" /&gt;

&lt;TextView android:text=""@string/qr_scanText""
          android:gravity=""center""
          android:textColor=""@android:color/white""
          android:textStyle=""bold""
          android:layout_centerInParent=""true""
          android:layout_width=""match_parent""
          android:layout_height=""wrap_content""
          android:layout_alignBottom=""@+id/surfaceViewBarcode""
          android:layout_alignParentTop=""true""/&gt;
</code></pre>

<p></p>

<p>The only inconvenience is the fact that the bar code scanner will pickup the QR code even if it's not placed in the designated area. </p>

<p>After following <strong><a href=""https://github.com/googlesamples/android-vision/issues/155"" rel=""nofollow noreferrer"">this thread</a></strong>, I've found out that you have multiple options for achieving the required result. 
One would be by implementing a <strong><a href=""https://stackoverflow.com/questions/36405717/android-vision-reduce-bar-code-tracking-window/36428822#36428822"">custom processor</a></strong> </p>

<p>Another way is by <strong><a href=""https://stackoverflow.com/questions/32299947/mobile-vision-api-concatenate-new-detector-object-to-continue-frame-processing/32314136#32314136"">BoxDetector</a></strong>. </p>

<p>I think <strong><a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/BarcodeCaptureActivity.java"" rel=""nofollow noreferrer"">this example</a></strong> may come also come in handy</p>
",6320865,,6320865,,2018-11-18 20:34:03,2018-11-18 20:34:03,,,,0,,,
Android,51329389,2,,51321167,2018,,1,,"<p>You are using <code>LiveData</code> to fetch User Details as declared in this Dao method</p>

<pre><code>LiveData&lt;UserLoginDetails&gt; loadUserDetails(String userId);
</code></pre>

<p>You <strong>cannot</strong> directly call getValue() on <code>LiveData</code> and <strong>expect</strong> to get current value. <code>LiveData</code> needs an observer to be calculated in first place. In this case value is not fetched synchronously.
You can find same issue <a href=""https://github.com/googlesamples/android-architecture-components/issues/44#issuecomment-306966494"" rel=""nofollow noreferrer"">here</a></p>

<p>To use <code>LiveData</code> you need to observe for changes by passing <code>LifecycleOwner</code> like <code>Activity</code>, Like they have given in Architecture Component Samples - <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/BasicSample/app/src/main/java/com/example/android/persistence/ui/ProductFragment.java"" rel=""nofollow noreferrer"">ProductFragment</a></p>

<pre><code>// Observe product data
model.getObservableProduct().observe(this, new Observer&lt;ProductEntity&gt;() {
    @Override
    public void onChanged(@Nullable ProductEntity productEntity) {
        model.setProduct(productEntity);
    }
});
</code></pre>

<p>If you want the value without observer you can change return type to non <code>LiveData</code> like this</p>

<pre><code>UserLoginDetails loadUserDetails(String userId);
</code></pre>

<p>In this case you can't call this method on <strong>main</strong> thread. You need to call this database <strong>synchronous</strong> operation method on background thread like using <code>Schedulers.io()</code> thread using <code>RxJava</code>.</p>

<p>Possible solution can be to use RxJava with Room to return <code>Flowable</code> of the User Data, for example as they shown in Architecture Component Examples - <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/BasicRxJavaSample/app/src/main/java/com/example/android/observability/persistence/UserDao.java"" rel=""nofollow noreferrer"">UserDao.java</a></p>

<p>Change your loadUserDetails to return <code>Flowable</code> </p>

<pre><code>Flowable&lt;UserLoginDetails?&gt; loadUserDetails(String userId);
</code></pre>

<p>Subscribe to that <code>Flowable</code> like - <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/BasicRxJavaSample/app/src/main/java/com/example/android/observability/ui/UserViewModel.java"" rel=""nofollow noreferrer"">UserViewModel.java</a></p>

<pre><code>// Map the result to desired format
// Using RxJava operators to perform checks
// If user is null or not
public void checkUserExists(String userId) {
    dao.loadUserDetails(userId)
        .map(new Function&lt;UserLoginDetails, Boolean&gt;() {
            @Override
            public Boolean apply(UserLoginDetails userLoginDetails) throws Exception {
                if(userLoginDetails == null){
                    return false;
                } else {
                    return true;
                }
            }
        })
        .subscribe(getObserver());
}
</code></pre>

<p>So as you get <code>Flowable</code> you can apply various operators to check for your desired <strong>conditions</strong> and may convert this <strong>stream</strong> to <strong>boolean</strong> observable with value dependent on your conditions. This will be much easy and <strong>maintainable</strong> approach for this particular use case.</p>
",3624647,,3624647,,2018-07-13 16:39:25,2018-07-13 16:39:25,,,,2,,,
Android,52489690,2,,52489638,2018,,1,,"<p>The Sign in on the phone flow is available for OAuth 2.0 apps as per the <a href=""https://developer.android.com/training/wearables/apps/auth-wear#OAuth"" rel=""nofollow noreferrer"">documentation</a>:</p>

<blockquote>
  <p>Wear provides OAuth 2.0 support for third-party apps to authenticate a user with a web service. Considering the limited screen real estate on wear devices, Wear OS OAuth support enables standalone watch apps to complete the OAuth authentication flow via a phone. Standalone apps use a request and response URL model to authenticate a user and receive an OAuth token to access the service.</p>
</blockquote>

<p>This is done by using the <a href=""https://developer.android.com/reference/android/support/wearable/authentication/OAuthClient"" rel=""nofollow noreferrer""><code>OAuthClient</code></a> and <a href=""https://developer.android.com/reference/android/support/wearable/authentication/OAuthClient#sendAuthorizationRequest(android.net.Uri,%20android.support.wearable.authentication.OAuthClient.Callback)"" rel=""nofollow noreferrer""><code>sendAuthorizationRequest()</code></a> to open up a WebView on the phone to your OAuth page. The <a href=""https://github.com/googlesamples/android-WearOAuth"" rel=""nofollow noreferrer"">Wear OAuth sample</a> provides a full example of how this works.</p>
",1676363,,,,,2018-09-25 2:19:35,,,,3,,,
Android,43564927,2,,43533251,2017,,1,,"<p>When something goes wrong with your Dagger 2 setup, you will get a compile-time message in the Gradle console when you try and build (it's in the bottom right corner of Android Studio). The message will tell you what is wrong and give you a clue for how to fix it.</p>

<p>In your case, it looks like you have something like this inside your <code>LoginActivity</code>:</p>

<pre><code>@Inject FileOrganiserModule fileOrganiserModule;

protected void onCreate(Bundle savedInstanceState) {
</code></pre>

<p>Dagger 2 modules and components are like scaffolding that helps you to request injection for the dependencies in your project. You normally shouldn't request injection of them by putting <code>@Inject</code> annotations on them. </p>

<p>If you have to create your module with a reference of the current Activity, you normally just create an instance of the module using the constructor:</p>

<pre><code>void injectMembers() {
    DaggerLoginComponent.builder().loginModule(new LoginModule(this));
}
</code></pre>

<p>Or you can use the new <code>dagger.android</code> classes to do that for you. A good example project for you to follow is in the Google Android Architecture Blueprints repo <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-dagger/"" rel=""nofollow noreferrer"">here</a></p>
",5241933,,,,,2017-04-22 21:40:13,,,,0,,,
Android,37385501,2,,37377384,2016,,1,,"<p>Based from this <a href=""https://groups.google.com/forum/#!topic/android-ndk/W5FTSeIA9QM"" rel=""nofollow noreferrer"">forum</a>, maybe it was because you're trying to release the back buffer after it had been released due to async issues. You can also look into this <a href=""https://github.com/googlesamples/android-Camera2Video/issues/2"" rel=""nofollow noreferrer"">issue</a>:</p>

<blockquote>
  <p>I think whats happening here is that when MediaRecorder is reset, it kills the surface while the background thread is still trying to draw captured images onto it. Im suspecting this based on the EGL error codes 0x300b and 0x300d (EGL_BAD_NATIVE_WINDOW and EGL_BAD_SURFACE, respectively).</p>
</blockquote>

<p>Closing the camera before resetting the recorder and reopening it afterwards works around the issue.</p>

<p>Check these related so questions:</p>

<ul>
<li><a href=""https://stackoverflow.com/questions/8914454/mediarecorder-stop-hanging-with-android-4-0-ics"">MediaRecorder.stop() hanging with Android 4.0 (ICS)</a></li>
<li><a href=""https://stackoverflow.com/questions/18202911/mediarecorder-stop-timed-out-waiting-for-incoming-camera-video-frames"">mediarecorder.stop() -&gt; timed out waiting for incoming camera video frames</a></li>
</ul>
",5832311,,-1,,2017-05-23 11:58:41,2016-05-23 7:54:10,,,,1,,,
Android,48582961,2,,47870971,2018,,1,,"<p>The Guide to App Architecture shows an example of <a href=""https://developer.android.com/topic/libraries/architecture/guide.html#addendum"" rel=""nofollow noreferrer"">how to expose network status</a>. I guess you can modify the following generic class by adding your progress percentage while loading.</p>

<pre><code>//a generic class that describes a data with a status
public class Resource&lt;T&gt; {
    @NonNull public final Status status;
    @Nullable public final T data;
    @Nullable public final String message;
    private Resource(@NonNull Status status, @Nullable T data, @Nullable String message) {
        this.status = status;
        this.data = data;
        this.message = message;
    }

    public static &lt;T&gt; Resource&lt;T&gt; success(@NonNull T data) {
        return new Resource&lt;&gt;(SUCCESS, data, null);
    }

    public static &lt;T&gt; Resource&lt;T&gt; error(String msg, @Nullable T data) {
        return new Resource&lt;&gt;(ERROR, data, msg);
    }

    public static &lt;T&gt; Resource&lt;T&gt; loading(@Nullable T data) {
        return new Resource&lt;&gt;(LOADING, data, null);
    }
}
</code></pre>

<p>Also, you can check a full implementation <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/vo/Resource.kt"" rel=""nofollow noreferrer"">here</a>.</p>
",3185230,,1245166,,2018-07-02 14:29:17,2018-07-02 14:29:17,,,,1,,,
Android,48586767,2,,6181704,2018,,1,,"<p>I scoured the internet for an updated (past year) answer using the latest location pulling methods suggested by google (to use FusedLocationProviderClient).  I finally landed on this:</p>

<p><a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationUpdates"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-location/tree/master/LocationUpdates</a></p>

<p>I created a new project and copied in most of this code.  Boom.  It works.  And I think without any deprecated lines.  </p>

<p>Also, the simulator doesn't seem to get a GPS location, that I know of.  It did get as far as reporting this in the log:  ""All location settings are satisfied.""</p>

<p>And finally, in case you wanted to know (I did), you DO NOT need a google maps api key from the google developer console, if all you want is the GPS location.</p>

<p>Also useful is their tutorial.  But I wanted a full one page tutorial/code example, and that.  Their tutorial stacks but is confusing when you're new to this because you don't know what pieces you need from earlier pages. </p>

<p><a href=""https://developer.android.com/training/location/index.html"" rel=""nofollow noreferrer"">https://developer.android.com/training/location/index.html</a> </p>

<p>And finally, remember things like this:</p>

<p>I not only had to modify the mainActivity.Java.  I also had to modify Strings.xml, androidmanifest.xml, AND the correct build.gradle.  And also your activity_Main.xml (but that part was easy for me).</p>

<p>I needed to add dependencies like this one: implementation 'com.google.android.gms:play-services-location:11.8.0', and update the settings of my android studio SDK to include google play services. (file   settings  appearance   system settings   android SDK   SDK Tools     check google play services).   </p>

<p>update:  the android simulator did seem to get a location and location change events (when I changed the value in the settings of the sim).  But my best and first results were on an actual device.  So it's probably easiest to test on actual devices.</p>
",125062,,125062,,2018-02-07 15:32:14,2018-02-07 15:32:14,,,,0,,,
Android,48802151,2,,48781647,2018,,1,,"<p>Another way to do this so that the instant app APKs have the desired <strong><em><code>minSdkVersion</code></em></strong> is with this:</p>

<p><strong>App (com.android.instant.application) manifest:</strong></p>

<pre><code>&lt;uses-sdk tools:overrideLibrary=""com.example.feature""/&gt;
</code></pre>

<p><strong>App (com.android.instant.application) <code>gradle</code>:</strong></p>

<pre><code>minSdkVersion rootProject.minSdk
</code></pre>

<p><strong>Feature (com.android.instant.feature) <code>gradle</code>:</strong></p>

<pre><code>minSdkVersion rootProject.minSdkInstant
</code></pre>

<p><strong>This allowed me to build</strong></p>

<ul>
<li><em>Installed</em> app with <code>minSdk</code></li>
<li><em>Instant app</em> APKs with <code>minSdkInstant</code></li>
</ul>

<p>The only recommended way is to use <a href=""https://developer.android.com/studio/build/build-variants.html#flavor-dimensions"" rel=""nofollow noreferrer"">flavors</a>.</p>

<p>Besides the <code>tools:overrideLibrary</code> method, there are no other ways to do this.</p>

<p>The APKs are generated from the <strong><em>feature plugin</em></strong> and not from the <strong><em>instant App plugin</em></strong>.</p>

<p>Can you check <a href=""https://github.com/googlesamples/android-instant-apps/blob/master/configuration-apks/features/build.gradle"" rel=""nofollow noreferrer""><strong><em>android-instant-apps/configuration-apks/features/build.gradle</em></strong></a>
and this <a href=""https://stackoverflow.com/questions/46975251/use-of-configuration-apks-while-still-targeting-pre-lollipop-devices"">SO Question</a></p>
",2638235,,2638235,,2018-02-15 7:54:16,2018-02-15 7:54:16,,,,0,,,
Android,39747033,2,,39558525,2016,,1,,"<p>You MUST NOT use Bluetooth - related stuff inside Activity (see SOLID) principles. Activity is just a UI. You should create separate Service, which will be running independently from UI in background and managing all Bluetooth - related action. From your Activity bind to that Service in onResume() method and unbind from it in onPause() method. You can get bt- control interface from ServiceConnection, passed by Service during binding.
There is a great Bluetooth example from Google - <a href=""https://github.com/googlesamples/android-BluetoothChat"" rel=""nofollow"">https://github.com/googlesamples/android-BluetoothChat</a> . The only drawback - it uses Handler for passing messages. I've modified it slightely - now there is another thread, receiving all state messages and calling callback. Feel free to use this code: 
<a href=""https://github.com/AlexShutov/LEDLights"" rel=""nofollow"">https://github.com/AlexShutov/LEDLights</a></p>
",6175778,,,,,2016-09-28 12:07:57,,,,0,,,
Android,46788946,2,,46774109,2017,,1,,"<p>There is an <a href=""https://github.com/googlesamples/android-play-billing"" rel=""nofollow noreferrer"">example</a> provided by Google. In this example, they use additional <code>BillingManager</code> class which can be accessed from different places of your application but it isn't a singleton because it's not only about <code>BillingClient</code> you also have to have <code>PurchasesUpdatedListener</code> which is receiving updates from the <code>BillingManager</code>. </p>

<p>If you want to make <code>BillingClient</code> a singleton you can use <a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive_v2/shared-module/src/main/java/com/example/billingmodule/billing/BillingManager.java"" rel=""nofollow noreferrer"">BillingManager</a> from the sample app and manage the list of <code>BillingUpdatesListener</code> by yourself.</p>
",1245166,,,,,2017-10-17 11:22:07,,,,2,,,
Android,37705106,2,,37692655,2016,,1,,"<p>There is an android prebuilt port of Opencv 3.0. 
<a href=""http://opencv.org/downloads.html"" rel=""nofollow"">http://opencv.org/downloads.html</a></p>

<p>Most of work in opencv is programmed on C++.</p>

<p>There are examples Java, such as face Detector in  (Quite simple) . I am not sure if there is mouth and eye detector.</p>

<p>Besides you can use your code, to program android application through JNI.</p>

<p>At the beginning (JNI) is quite complicated, but is the most elegant way to get maximum performance of the applications. Besides, you will be almost sure that the opencv desktop features are on android.</p>

<p>check this links: 
<a href=""https://github.com/googlesamples/android-ndk/tree/master/hello-jni"" rel=""nofollow"">https://github.com/googlesamples/android-ndk/tree/master/hello-jni</a></p>

<p><a href=""https://developer.android.com/ndk/samples/sample_hellojni.html?hl=es"" rel=""nofollow"">https://developer.android.com/ndk/samples/sample_hellojni.html?hl=es</a>
Hope this references helps. </p>

<p>Cheers.</p>
",2995941,,,,,2016-06-08 14:18:37,,,,0,,,
Android,37871654,2,,33776795,2016,,1,,"<p><a href=""https://github.com/googlesamples/android-ndk/tree/master/hello-libs"" rel=""nofollow"">Hello-libs</a> is the one that might be helpful too: it builds 2 libs and use them in the app. The building libs and using libs could be de-coupled; for usage, look at the app/build.gradle</p>

<p>the sample are for shared lib; follow the comment above gperf for static lib in that build.gradle [do not put static lib into jniLibs folder, no need], it will work.</p>

<p>CMake + android studio is similar and simpler [they are in master-cmake branch]</p>
",4496512,,,,,2016-06-17 1:14:49,,,,0,,,
Android,38074852,2,,38074779,2016,,1,,"<p>You need to ask for Runtime permissions from Android 6.</p>

<p>See : 
1. <a href=""https://github.com/googlesamples/android-RuntimePermissions"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-RuntimePermissions</a></p>

<ol start=""2"">
<li><p><a href=""https://developer.android.com/training/permissions/requesting.html"" rel=""nofollow noreferrer"">https://developer.android.com/training/permissions/requesting.html</a></p></li>
<li><p><a href=""https://stackoverflow.com/questions/30549561/how-to-check-grants-permissions-at-run-time"">How to check Grants Permissions at Run-Time?</a></p></li>
</ol>
",4035628,,-1,,2017-05-23 12:22:40,2016-06-28 11:22:04,,,,2,,,
Android,47202334,2,,47202160,2017,,1,,"<p>I think its happening because of you are using old method of getPlace</p>

<p>try to swap the arguments, by changing it from:</p>

<pre><code>Place place = PlacePicker.getPlace(data, this);
</code></pre>

<p>to </p>

<pre><code>Place place = PlacePicker.getPlace(getContext(), data);
</code></pre>

<hr>

<p><strong>Update #2</strong></p>

<p>Enable Google places API in the developer console and add these lines to AndroidManifest</p>

<pre><code>&lt;meta-data
  android:name=""com.google.android.geo.API_KEY""
  android:value=""ADD_YOUR_API_KEY_HERE"" /&gt;
</code></pre>

<hr>

<p><strong>Update #3</strong></p>

<p>after some search, it looks like there is others having same issue. Look at these links:</p>

<p><a href=""https://github.com/zhangtaii/react-native-google-place-picker/issues/21"" rel=""nofollow noreferrer"">https://github.com/zhangtaii/react-native-google-place-picker/issues/21</a></p>

<p><a href=""https://www.codesd.com/item/google-placepicker-closes-immediately-after-launch-with-result-code-2.html"" rel=""nofollow noreferrer"">https://www.codesd.com/item/google-placepicker-closes-immediately-after-launch-with-result-code-2.html</a></p>

<p><a href=""https://github.com/googlesamples/android-play-places/issues/13"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-places/issues/13</a></p>
",1317522,,1317522,,2017-11-09 14:12:17,2017-11-09 14:12:17,,,,16,,,
Android,47422589,2,,47307796,2017,,1,,"<p>As you say answering your question is not easy because there are multiple solutions to achieve what you want. </p>

<p>I think you should read about Object Detection especially about Convolutional Neural Nets (CNN). Good libs for the detection task are probably <a href=""https://opencv.org/platforms/android/"" rel=""nofollow noreferrer"">OpenCV</a> and Googles <a href=""https://www.tensorflow.org/mobile/android_build"" rel=""nofollow noreferrer"">Tensorflow</a>. Also samples in Googles <a href=""https://developers.google.com/vision/android/getting-started"" rel=""nofollow noreferrer"">Mobile Vision API</a> can show you how to have a live feed from the camera and manage overlaying it with your paintings. <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/ocr-codelab/ocr-reader-complete"" rel=""nofollow noreferrer"">This</a> example I personally found very helpful to see where/how to implement a detector as well as a graphic overlay even if its for Text Recognition. Finally <a href=""https://github.com/tensorflow/tensorflow/tree/master/tensorflow/examples/android"" rel=""nofollow noreferrer"">here</a> you have the Android Tensorflow demos. </p>

<p>But as easy as it seems it's still a long way to go. For this kind of implementation with Tensorflow you need to...</p>

<ol>
<li>Collect sample images with walls and what is not a wall ;)</li>
<li>Think about preprocessing e.g. rescale, grayscale and filter and implement it</li>
<li>Write and tune your Python code for your CNN model</li>
<li>Train and evaluate your model with Python</li>
<li>Port your model to Android</li>
<li>Paint on the appropriate area  </li>
</ol>

<p>Another approach I can think of would be with <a href=""https://en.wikipedia.org/wiki/Edge_detection"" rel=""nofollow noreferrer"">Edge Detection</a> and <a href=""https://docs.opencv.org/3.0-beta/doc/py_tutorials/py_imgproc/py_houghlines/py_houghlines.html"" rel=""nofollow noreferrer"">Hough Line Transform</a> but I suggest you to use Neural Nets because results are probably better, Tensorflow (Mobile or Lite) is already optimized for Android and it's cutting edge tech ;)</p>

<p>Hope this helps!</p>
",7089630,,,,,2017-11-21 20:57:40,,,,0,,,
Android,29061164,2,,28058284,2015,,1,,"<p>While having separate service could definitely fit the bill, I was researching for possibly having just one service for both CanvasWatchFaceService and being registered for Data Layers API, and seems the DigitalWatchFaceService in the Google sample/android-WatchFace provide an example of this.</p>

<p>Notice it provide example to register both as BroadcastReceiver AND the Data API.</p>

<p>Hope this helps.</p>

<p><a href=""https://github.com/googlesamples/android-WatchFace/blob/master/Wearable/src/main/java/com/example/android/wearable/watchface/DigitalWatchFaceService.java"" rel=""nofollow"">https://github.com/googlesamples/android-WatchFace/blob/master/Wearable/src/main/java/com/example/android/wearable/watchface/DigitalWatchFaceService.java</a></p>
",893991,,,,,2015-03-15 13:30:15,,,,0,,,
Android,47620225,2,,17836234,2017,,1,,"<p>I know it sounds so easy, but I copy paste from google sample all folder </p>

<p><a href=""https://github.com/googlesamples/android-play-billing/tree/master/TrivialDrive/app/src/main"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-billing/tree/master/TrivialDrive/app/src/main</a></p>

<blockquote>
  <p>aidl/com/android/vending/billing</p>
  
  <p>copied into project aidl ( I had set project view in Android Studio)</p>
</blockquote>

<p>and next I clean and rebuild project and it found a reference. </p>
",7123042,,,,,2017-12-03 16:00:26,,,,0,,,
Android,47967933,2,,47954616,2017,,1,,"<p>Try this. It records an audio using the wear microphone and then plays it.
<a href=""https://github.com/googlesamples/android-WearSpeakerSample"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-WearSpeakerSample</a></p>

<p>This is the apk built:
<a href=""https://drive.google.com/open?id=1z6lwVoWh89gbGz43c_6PNPVS4Os6s4nu"" rel=""nofollow noreferrer"">https://drive.google.com/open?id=1z6lwVoWh89gbGz43c_6PNPVS4Os6s4nu</a></p>

<p>I have put it also in the Google Play with a watchface:
<a href=""https://play.google.com/store/apps/details?id=com.jorc.android.wearable.watchface&amp;hl=en"" rel=""nofollow noreferrer"">https://play.google.com/store/apps/details?id=com.jorc.android.wearable.watchface&amp;hl=en</a></p>
",3041972,,3041972,,2017-12-26 1:07:38,2017-12-26 1:07:38,,,,4,,,
Android,46727422,2,,46701959,2017,,1,,"<p>I experimented a little with this on camera2basic (<a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a>) and found I could get the preview back much quicker if I called unlock just after acquiring the image and before saving it - I also removed the original call to unLockFocus in the captureCallback. </p>

<pre class=""lang-js prettyprint-override""><code>    /**
     * This a callback object for the {@link ImageReader}. ""onImageAvailable"" will be called when a
     * still image is ready to be saved.
     */
    private final ImageReader.OnImageAvailableListener mOnImageAvailableListener
            = new ImageReader.OnImageAvailableListener() {

        @Override
        public void onImageAvailable(ImageReader reader) {
            Log.d(TAG,""onImageAvailable"");

            //Get the image
            Image cameraImage = reader.acquireNextImage();

            //Now unlock the focus so the UI does not look locked - note that this is a much earlier point than in the
            //original Camera2Basic example from google as the original place was causing the preview to lock during any
            //image manipulation and saving.
            unlockFocus();

            //Save the image file in the background - note check you have permissions granted by user or this will cause an exception.
            mBackgroundHandler.post(new ImageSaver(getActivity().getApplicationContext(), cameraImage, outputPicFile);

        }

    };
</code></pre>



<p>However, Camera2Basic has many callbacks and I found that when you start testing with scenarios where the activity or fragment is paused and resumed, and especially if your app has other asynchronous callbacks also, it is very easy to get into race conditions that can cause unexpected behaviour or crashes.</p>

<p>If you just want a simple example of a camera that returns the preview quicker when taking a photo, then the basic FotoApparat example might be worth looking at also:</p>

<ul>
<li><a href=""https://github.com/Fotoapparat/Fotoapparat"" rel=""nofollow noreferrer"">https://github.com/Fotoapparat/Fotoapparat</a></li>
</ul>
",334402,,,,,2017-10-13 10:06:30,,,,3,,,
Android,37751276,2,,37501805,2016,,1,,"<p>Unfortunately Android doesn't appear to have low level Classic Bluetooth APIs which would allow you to do broadcast type behavior. This makes some sense as Android is intended to go into a power limited devices and active radios use energy. If you are required to use Classic Bluetooth (3.x) and Android to handle sending or receiving broadcast type behavior you'll probably need to write a custom ROM.</p>

<p>However there is specification called Bluetooth Low Energy (4.x) allows for less energy consumption but slower/less data throughput. Specifically the Advertising mode. Android devices which are scanning can pick up the short advertised data packet broadcasted by a device called a 'beacon'. Protocols which use this mode are Apple's iBeacon and Google's Eddystone.</p>

<p>Look here for sample apps involving Advertisements:</p>

<ul>
<li><a href=""https://github.com/googlesamples/android-BluetoothAdvertisements"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-BluetoothAdvertisements</a></li>
<li><a href=""https://github.com/devunwired/accessory-samples/blob/master/bluetoothadvertiser"" rel=""nofollow noreferrer"">https://github.com/devunwired/accessory-samples/blob/master/bluetoothadvertiser</a></li>
</ul>

<p>Also note that Android devices don't always support BLE Peripheral Mode which is what you will need for your Android device to act like beacon.</p>

<p>Related link:
<a href=""https://stackoverflow.com/questions/19602913/can-an-android-device-act-as-an-ibeacon"">Can an Android device act as an iBeacon?</a></p>

<p>And a nice list of what devices have been tested:
<a href=""http://altbeacon.github.io/android-beacon-library/beacon-transmitter-devices.html"" rel=""nofollow noreferrer"">http://altbeacon.github.io/android-beacon-library/beacon-transmitter-devices.html</a></p>

<p>So in your case you should still be able to use your Sony Xperia Z3 as a Scanner, but will have to buy/build a beacon for testing.</p>
",295004,,-1,,2017-05-23 12:16:16,2016-06-13 13:27:31,,,,0,,,
Android,46759532,2,,46635651,2017,,1,,"<p>You should use Service as a command manager for your music player app. All the play, pause, next and other playback controls should be sent to service, and service will delegate it accordingly. Also Android <a href=""https://developer.android.com/reference/android/media/MediaPlayer.html"" rel=""nofollow noreferrer"">MediaPlayer</a> has asynchronous methods and associated listeners to notify callers. Please do have a look at <a href=""https://developer.android.com/reference/android/media/MediaPlayer.html"" rel=""nofollow noreferrer"">it</a>.
Please follow google sample code for music player <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-UniversalMusicPlayer</a> which addresses basic music player functionalities very well.</p>
",3669602,,,,,2017-10-15 20:12:40,,,,0,,,
Android,47270509,2,,47194606,2017,,1,,"<p>You need to set the camera's auto-exposure mode to one of the flash-using ones; generally that's either <a href=""https://developer.android.com/reference/android/hardware/camera2/CameraMetadata.html#CONTROL_AE_MODE_ON_AUTO_FLASH"" rel=""nofollow noreferrer"">AE_MODE_ON_AUTO_FLASH</a> or <a href=""https://developer.android.com/reference/android/hardware/camera2/CameraMetadata.html#CONTROL_AE_MODE_ON_ALWAYS_FLASH"" rel=""nofollow noreferrer"">AE_MODE_ON_ALWAYS_FLASH</a>.</p>

<p>You can check which modes are available on your device via <a href=""https://developer.android.com/reference/android/hardware/camera2/CameraCharacteristics.html#CONTROL_AE_AVAILABLE_MODES"" rel=""nofollow noreferrer"">AE_AVAILABLE_MODES</a>.</p>

<p>Then you'll need to use the <a href=""https://developer.android.com/reference/android/hardware/camera2/CaptureRequest.html#CONTROL_AE_PRECAPTURE_TRIGGER"" rel=""nofollow noreferrer"">AE precapture trigger</a> before doing the main image capture, so that a preflash can be fired for accurate flash brightness control.</p>

<ol>
<li>Ensure your preview request has the desired AE flash mode, have it set as the repeating request for your capture session.</li>
<li>Create a new capture request builder with your preview settings.</li>
<li>Set the precapture trigger to START for that builder</li>
<li>Create one request with that builder, and call CameraCaptureSession.capture() with it</li>
<li>Wait for the <a href=""https://developer.android.com/reference/android/hardware/camera2/CaptureResult.html#CONTROL_AE_STATE"" rel=""nofollow noreferrer"">AE_STATE</a> of PRECAPTURE to appear and disappear; during this time the camera device may light up the flash to measure how bright it needs to be.</li>
<li>Once AE_STATE_PRECAPTURE ends, issue the high-resolution capture request using the STILL_CAPTURE template (which sets the capture intent control to STILL_CAPTURE, triggering the main flash firing).</li>
</ol>

<p>The <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">Camera2Basic</a> sample includes all this for flash operation, as a sample to follow. It uses AE_MODE_AUTO_FLASH if supported by the device.</p>
",1344825,,,,,2017-11-13 17:50:28,,,,0,,,
Android,37973389,2,,4777935,2016,,1,,"<p>Install the SDK and NDK like this: <a href=""https://askubuntu.com/a/732010/52975"">https://askubuntu.com/a/732010/52975</a></p>

<p>Plug in your device via USB and run:</p>

<pre><code>git clone https://github.com/googlesamples/android-ndk
cd android-ndk
git checkout a5fdebebdb27ea29cb8a96e08e1ed8c796fa52db
cd hello-jni
./gradlew clean
./gradlew assembleDebug
./gradlew installAllDebug
</code></pre>

<p>Now the app should be installed in your device.</p>

<p><code>hello-jni</code> is the simplest C example, and there are also C++ examples like <code>Teapot</code>.</p>

<p>Those examples use Gradle, and there are Ant <code>Android.mk</code> examples under the branch <a href=""https://github.com/googlesamples/android-ndk/tree/android-mk"" rel=""nofollow noreferrer"">android-mk</a>. You can build those with:</p>

<pre><code> ndk-build
 android update project -p . -t android-23
 ant clean
 ant debug
 ant installd
</code></pre>

<p>Tested on Ubuntu 16.04, Android 5.1.1.</p>
",895245,,-1,,2017-04-13 12:22:42,2016-06-22 17:05:57,,,,0,,,
Android,38300203,2,,38292746,2016,,1,,"<p>There's a sample in the Google Mobile Vision API GitHub samples that illustrates how to draw eyeball graphics based on the position of the eyes: <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/googly-eyes"" rel=""nofollow"">https://github.com/googlesamples/android-vision/tree/master/visionSamples/googly-eyes</a> </p>

<p>In order to overlay an image instead of drawing primitives (as the sample does), you could load the image into a Bitmap</p>

<pre><code>InputStream inputStream = contentResolver.openInputStream(imageUri);
Bitmap mBitmap = BitmapFactory.decodeStream(inputStream, null, options); 
</code></pre>

<p>Then draw it to the canvas at the desired location using <code>canvas.drawBitmap</code></p>

<pre><code>canvas.drawBitmap(mBitmap, eyePosition.x, eyePosition.y, mPaint);
</code></pre>

<p>If you were married to an ImageView, you could load the image into it and then update that position directly when the tracker updates</p>

<pre><code>imageView.setX(mPosition.x);
imageView.setY(mPosition.y);
postInvalidate();
</code></pre>

<p>Make sure those set calls happen on the thread that created the View, or they'll throw an exception.</p>
",1663826,,,,,2016-07-11 6:11:25,,,,5,,,
Android,46871075,2,,4200119,2017,,1,,"<p>Example from google <a href=""https://github.com/googlesamples/android-ndk/tree/master/sensor-graph"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk/tree/master/sensor-graph</a>.Their code allow you controll SENSOR_REFRESH_RATE_HZ for the accelerometer.Written on c++ and connected to java code  through the NDK.</p>
",3774071,,,,,2017-10-22 6:14:48,,,,0,,,
Android,38305042,2,,33642991,2016,,1,,"<p>Have you tried camera2basic from github?</p>

<p><a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a></p>

<p>I have tried to study camera2 from there and from android developer android.hardware.camera2 reference. But it is soo confusing. I am using android studio 2, gradle 2.8, and nexus lg 5x android 6.</p>

<p>I copied the source codes to my project, check all errors on the IDE and found no error. After I tried it on my nexus, I always get the same errors on every line which calls CameraDevice class. It says null pointer on that class.</p>

<p>Then, I found this question here <a href=""https://stackoverflow.com/questions/28599958/android-camera2-sample"">Android Camera2 Sample</a>
and it turns out the guy asking have already tried it with the method:</p>

<ol>
<li>File > New > Import Sample..</li>
<li>Pick the Camera2Basic sample. </li>
<li>Update your gradle to version 2.10 
HOW? </li>
<li>File > Project Structure... > on left tab click project > gradle </li>
<li>Change the Gradle version to 2.10</li>
</ol>

<p>Then I run the code to my Nexus 5X Android 6 and it runs really well. It has camera preview, It will ask permissions at first, It can save picture to storage, etc..</p>
",5068236,,-1,,2017-05-23 11:53:09,2016-07-11 10:48:55,,,,0,,,
Android,38429299,2,,38427019,2016,,1,,"<p>they samples appear to be now held on github. <a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow"">https://github.com/googlesamples/android-ndk</a></p>
",4839316,,,,,2016-07-18 5:41:40,,,,0,,,
Android,38193974,2,,38163091,2016,,1,,"<p>You can very easily turn a <code>PendingResult</code> from <code>getPlaceById</code> into a <code>PlaceBuffer</code>.  You simply call the <code>await()</code> method:</p>

<pre><code>PendingResult&lt;PlaceBuffer&gt; result = Places.GeoDataApi.getPlaceById(
        mGoogleApiClient, placeId);
PlaceBuffer placeBuffer = result.await();
</code></pre>

<p>(You could of course do that in one line if you prefer.)</p>

<p>There are examples of calling <code>GeoDataApi.getPlaceByID</code> and <code>PendingResult&lt;PlaceBuffer&gt;.await</code> in <a href=""https://github.com/googlesamples/android-play-places"" rel=""nofollow"">https://github.com/googlesamples/android-play-places</a>.</p>
",806600,,,,,2016-07-05 1:21:50,,,,3,,,
Android,47497481,2,,47367042,2017,,1,,"<p>I found this <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/PagingSample/app/src/main/java/paging/android/example/com/pagingsample"" rel=""nofollow noreferrer"">paging example</a> by google. Based on that I wrote this view model (see <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/PagingSample/app/src/main/java/paging/android/example/com/pagingsample/CheeseViewModel.kt"" rel=""nofollow noreferrer"">CheeseViewModel</a>):</p>

<pre><code>class MyViewModel(app: Application) : AndroidViewModel(app) {

    val data = MyDatabase.get(app).dao.get().create(
            /* initial load position */ 0,
            PagedList.Config.Builder()
                    .setPageSize(50)
                    .setPrefetchDistance(50)
                    .build())
}
</code></pre>

<p>And I added this to my DB class (see <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/PagingSample/app/src/main/java/paging/android/example/com/pagingsample/CheeseDb.kt"" rel=""nofollow noreferrer"">CheeseDb</a>):</p>

<pre><code>companion object {

    // Google example noted that this might not be the best
    // solution and to use a dependency injection framework instead.

    private var instance: MyDatabase? = null

    @Synchronized
    fun get(context: Context): MyDatabase {
        return instance ?: Room.databaseBuilder(context.applicationContext,
                MyDatabase::class.java, ""myDB"")
                .build()
                .also { instance = it }
    }
}
</code></pre>

<p>So that answers the question on how to get a DAO instance in a view model. Regarding the other question, I guess that the <a href=""https://developer.android.com/topic/libraries/architecture/paging.html#classes"" rel=""nofollow noreferrer"">paging library</a> example was incomplete.</p>
",1020871,,,,,2017-11-26 15:01:49,,,,0,,,
Android,37531657,2,,33282945,2016,,1,,"<p>As <a href=""https://stackoverflow.com/a/35312689/2655063"">Saurabh7474 has responded</a>, to check the version of Android and use setTorchMode API it's very correct.</p>

<p>Although you can also use params.setFlashMode (...) in marshmallow using</p>

<pre><code>mCamera.setPreviewTexture (new SurfaceTexture (100))
</code></pre>

<p>after Camera.open (...) and before calling mCamera.startPreview();</p>

<pre><code>try {
                Log.i(TAG, ""getCamera"");
                int requestedCameraId = getIdForRequestedCamera(mFacing);
                if (requestedCameraId == -1) {
                    throw new RuntimeException(""Could not find requested camera."");
                }
                mCamera = Camera.open(requestedCameraId);
                mCamera.setPreviewTexture(new SurfaceTexture(DUMMY_TEXTURE_NAME));
                params = mCamera.getParameters();
            } catch (RuntimeException e) {
                Log.e(""Failed to Open. Error:"", e.getMessage());
            } catch (IOException e) {
                Log.e(""Failed to Open. can't setPreviewTexture:"", e.getMessage());
            }
</code></pre>

<p>then when you want, you can use</p>

<pre><code>        mParams.setFlashMode(Camera.Parameters.FLASH_MODE_TORCH);
        camera.setParameters(mParams);
</code></pre>

<p>My answer is based on CameraSource examples of Vision API that uses params.setFlashMode (...) and works in Api 23 and above.
If you decide to inspect CameraSource, the key method that has solved the same problem is ""start ()"", in the line 312 ...</p>

<p><a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java</a></p>

<p>The reason you can find here
<a href=""https://stackoverflow.com/a/33333046/4114846"">https://stackoverflow.com/a/33333046/4114846</a></p>
",4114846,,-1,,2017-05-23 12:25:16,2016-08-24 5:10:28,,,,0,,,
Android,46765390,2,,39895783,2017,,1,,"<p>I suffered the same problem.
Gradle doesn't packaging .so files into apk while I filled CMakeLists.txt correctly, but finally I resolved it.</p>

<p>Add the JniLibs path into sourceSets in local build.gradle as this sample code:
<a href=""https://github.com/googlesamples/android-ndk/blob/master/hello-libs/app/build.gradle"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk/blob/master/hello-libs/app/build.gradle</a>
which is <a href=""https://stackoverflow.com/users/4496512/gerry"">@Gerry</a> mentioned in the comment.</p>

<p>I did:</p>

<hr>

<ol>
<li><p>copy .so libraries into src/main/JniLibs/${ANDROID_ABI}.</p>

<p>ex) mobile/src/main/JniLibs/armeabi-v7a/libavcodec.so</p></li>
</ol>

<hr>

<ol start=""2"">
<li>edit CMakeLists.txt</li>
</ol>

<p>CMakeLists.txt</p>

<pre><code>cmake_minimum_required(VERSION 3.4.1)

# project path (absolute), change it to yours.
set(projectDir C:/Users/Administrator/AndroidStudioProjects/TestApp1)

# headers
include_directories(${projectDir}/mobile/src/main/JniLibs/${ANDROID_ABI}/include)

# sample ndk lib
add_library( native-lib SHARED src/main/cpp/native-lib.cpp )

# FFMPEG libraries
add_library( lib_avcodec SHARED IMPORTED )

set_target_properties(  lib_avcodec  PROPERTIES IMPORTED_LOCATION  ${projectDir}/mobile/src/main/JniLibs/${ANDROID_ABI}/libavcodec.so)

# ...
# (omitted) same codes with lib_avdevice, lib_avfilter, lib_avformat, lib_avutil, lib_swresample, and lib_swscale each.
# ...

target_link_libraries( # Specifies the target library.
                   native-lib

                   lib_avcodec
                   lib_avdevice
                   lib_avfilter
                   lib_avformat
                   lib_avutil
                   lib_swresample
                   lib_swscale
                   )
</code></pre>

<hr>

<ol start=""3"">
<li>in build.gradle (app)</li>
</ol>

<p>build.gradle</p>

<pre><code>android {
    compileSdkVersion 26
    buildToolsVersion '26.0.2'
    defaultConfig {
        applicationId ""your-application-Id""
        minSdkVersion 19
        targetSdkVersion 26
        versionCode 1
        versionName ""1.0""
        testInstrumentationRunner ""android.support.test.runner.AndroidJUnitRunner""
        externalNativeBuild {
            cmake {
                cppFlags ""-std=c++11 -frtti -fexceptions""
            }
        }

        ndk {
            // Specifies the ABI configurations of your native
            // libraries Gradle should build and package with your APK.
            abiFilters 'armeabi', 'armeabi-v7a'
        }
    }

    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }

    # ADD THIS BLOCK.
    sourceSets {
        main {
            // let gradle pack the shared library into apk
            jniLibs.srcDirs = ['src/main/JniLibs']
        }
    }

    externalNativeBuild {
        cmake {
            path ""CMakeLists.txt""
        }
    }
    productFlavors {
    }
}
</code></pre>

<hr>

<p>hope it helps you.</p>

<p>p.s. I used FFMPEG libraries that built myself.</p>
",4251216,,,,,2017-10-16 7:52:21,,,,0,,,
Android,30441391,2,,30440860,2015,,1,,"<p>From the official doc of <strong><a href=""https://developer.android.com/reference/android/support/v7/widget/RecyclerView.ViewHolder.html"" rel=""nofollow"">ViewHold</a></strong>:</p>

<blockquote>
  <p>A ViewHolder describes an item view and metadata about its place
  within the RecyclerView.</p>
</blockquote>

<p>So you should avoid do anything else in the viewhold, instead use <strong><code>onBindViewHolder</code></strong> in the <strong><code>RecyclerView</code></strong> <br /></p>

<p>If you take a look at the example made by <strong>Google</strong> of RecyclerView on <a href=""https://github.com/googlesamples/android-RecyclerView"" rel=""nofollow"">GitHub</a> you will see google does not set listeners in the ViewHolder </p>
",4025983,,,,,2015-05-25 15:15:37,,,,2,,,
Android,39890164,2,,39889579,2016,,1,,"<p>Vinay. I'm working on a similar android- arduino project - smart LED controller. There is very good example from Google on how to use Bluetooth connectivity - <a href=""https://github.com/googlesamples/android-BluetoothChat"" rel=""nofollow"">https://github.com/googlesamples/android-BluetoothChat</a> . I've been following this example to get things going. There is my project - <a href=""https://github.com/AlexShutov/LEDLights"" rel=""nofollow"">https://github.com/AlexShutov/LEDLights</a> . Feel free to use code from there. Notice, that you have to connect to HC-05 from you phone (not accept connection from HC-05). </p>
",6175778,,,,,2016-10-06 7:35:21,,,,1,,,
Android,46962809,2,,46940606,2017,,1,,"<p>Yes, the problem is that Dagger, Databinding and Room uses an Annotation Processor.  That means that one code generator get issues while processing corrupt code by another.</p>

<p>Ive <a href=""https://github.com/googlesamples/android-architecture-components/issues/43"" rel=""nofollow noreferrer"">added an issue long time ago</a>. Google-Team want to improve that, but usually you can see the errors in your gradle log straight at the top. </p>

<p>After developing a little bit with those libraries you'll find the issues easy.</p>
",2032539,,,,,2017-10-26 20:00:09,,,,1,,,
Android,47387942,2,,47387202,2017,,1,,"<p>From my experience, 1x1 pixel preview is not reliable, and many devices will not work with this correctly. On some devices, you can push the SurfaceView off screen with clever layout (e.g. huge left margin), but not on others. It is possible to hide a SurfaceView under other elements of your view hierarchy, but this doesn't always work smoothly, because the framework sometimes creates a Surface too late (I believe it's a bug on some devices, not intended). </p>

<p>It is safer to use TextureView, as in the <a href=""https://github.com/googlesamples/android-MediaRecorder"" rel=""nofollow noreferrer"">MediaRecorder official sample</a>. You can set visibility of the TextureView to <strong>hidden</strong>, or hide it behind some other view, and you can make it very small. Here you can find more details: <a href=""https://stackoverflow.com/a/21447945/192373"">https://stackoverflow.com/a/21447945/192373</a>.</p>
",192373,,,,,2017-11-20 8:39:28,,,,0,,,
Android,38316071,2,,38315245,2016,,1,,"<p>If I am not mistaken, you are referring to this method <a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample/util/IabHelper.java#L216"" rel=""nofollow"">startSetup</a> that accepts a <code>final OnIabSetupFinishedListener</code> and supposedly sets up the billing.</p>

<p>What you seem to be confused about, is this rather syntactically obscure feature of Java called the <strong>anonymous inner class</strong>. </p>

<p>Let me attempt to answer your question to make it easier:</p>

<blockquote>
  <p>Is it a method that does not immediately return a result?</p>
</blockquote>

<p>Yes, sort of (it of course does not return anything for it is a <code>void</code> method). It, simply speaking, is a method that accepts an instance of the interface <code>OnIabSetupFinishedListener</code> and does some of its job <em>asynchronously</em> as stated in the Javadoc and returns nothing:</p>

<blockquote>
  <p>This will start up the setup process asynchronously.</p>
</blockquote>

<p>Thus, this method is similar to what any other <code>void</code> Java method looks like. The only additional implementation information is that some kind of communication is set up between the <code>listener</code> you pass to this method and some other objects. </p>

<p>But that communication is going to happen <em>at a later point in time</em>, <strong>not</strong> <em>at the time you call this method</em>, <code>startSetup</code>. Thus, what is important is the <em>call site</em>, i.e. how you are going to <em>call</em> this method in your own app. This, hopefully, happens at the time of setting up your app and you need to get it quickly running and hence this method provides a <em>callback</em> mechanism and returns as soon as possible in a synchronous manner without unnecessary delay. This means your calling thread can make progress and the listener you passed to this method can be utilized later in some other thread when an appropriate event occurs.</p>

<p>The confusion also comes in part because of the way anonymous inner classes are typically coded. Thus, your <em>call site</em> may look like the <a href=""https://developer.android.com/training/in-app-billing/preparing-iab-app.html"" rel=""nofollow"">following</a>:</p>

<pre><code>mHelper.startSetup(new IabHelper.OnIabSetupFinishedListener() {
   public void onIabSetupFinished(IabResult result) {
      if (!result.isSuccess()) {
         // Oh noes, there was a problem.
         Log.d(TAG, ""Problem setting up In-app Billing: "" + result);
      }
         // Hooray, IAB is fully set up!
   }
});
</code></pre>

<p>Here, you are providing an anonymous implementation of the interface <code>OnIabSetupFinishedListener</code> directly at the call site (without actually creating a separate class implementing that interface, using the construct like <code>class MyListener implements OnIabSetupFinishedListener</code>).</p>
",437506,,437506,,2016-07-11 21:07:34,2016-07-11 21:07:34,,,,0,,,
Android,48000850,2,,48000790,2017,,1,,"<p>That's expected since Instant Apps are sandboxed and don't have access to the device's full capabilities (no read/write for example). You'll have to work around this depending on <a href=""https://developer.android.com/topic/instant-apps/reference.html#isinstantapp"" rel=""nofollow noreferrer"">whether or not you're an Instant App</a>. Here's the full list of <a href=""https://developer.android.com/topic/instant-apps/faqs.html#general"" rel=""nofollow noreferrer"">available permissions</a>:</p>

<ul>
<li>BILLING</li>
<li>ACCESS_COARSE_LOCATION</li>
<li>ACCESS_FINE_LOCATION</li>
<li>ACCESS_NETWORK_STATE</li>
<li>CAMERA</li>
<li>INSTANT_APP_FOREGROUND_SERVICE only in Android 8.0.</li>
<li>INTERNET</li>
<li>READ_PHONE_NUMBERS. This permission is available only in Android 8.0 (API level 26).</li>
<li>RECORD_AUDIO</li>
<li>VIBRATE</li>
</ul>

<p>PS: ADB did a <a href=""http://androidbackstage.blogspot.com/2017/11/episode-84-instant-apps.html"" rel=""nofollow noreferrer"">really cool episode</a> where they discussed how Instant Apps work (and the sandboxing).</p>

<p>Also see: <a href=""https://github.com/googlesamples/android-instant-apps/issues/12"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-instant-apps/issues/12</a></p>
",4548500,,,,,2017-12-28 2:14:12,,,,3,,,
Android,48055881,2,,48023752,2018,,1,,"<p>Yes, Android Instant Applications support navigation from one sub instant feature module to another instant feature module. <br><em>(Example: details feature -> payment feature)</em><br> <br>
You can refer <a href=""https://developer.android.com/topic/instant-apps/overview.html"" rel=""nofollow noreferrer"">google developers webpage</a> :</p>

<ul>
<li>Always consider your entry points.</li>
<li>Each feature within the instant app has at least one Activity that acts as the entry-point for that feature.</li>
<li>Also, an activity cannot launch another activity directly within an instant app; rather, it must request the URL address that corresponds to that activity.</li>
<li>You can navigate by building an INTENT(request URL address); to open <em>payment feature</em>(feature2) you may call this from <em>details feature</em>(feature1).</li>
<li>When users request a feature from an instant app, they receive only the code necessary to run that specific feature, no more and no less.</li>
<li>By doing this, you are following the entry point concept.</li>
</ul>

<p>Sample code examples related to feature navigation can be checked at this <a href=""https://github.com/googlesamples/android-instant-apps/blob/master/multi-feature-module/main/src/main/java/com/example/android/unsplash/MainActivity.java"" rel=""nofollow noreferrer"">GitHub</a> link.</p>
",8782189,,8782189,,2018-01-02 6:29:42,2018-01-02 6:29:42,,,,0,,,
Android,47571060,2,,17172153,2017,,1,,"<p><strong>Android NDK official <code>hello-libs</code> CMake example</strong></p>

<p><a href=""https://github.com/googlesamples/android-ndk/tree/840858984e1bb8a7fab37c1b7c571efbe7d6eb75/hello-libs"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk/tree/840858984e1bb8a7fab37c1b7c571efbe7d6eb75/hello-libs</a></p>

<p>The key thing is to pack all versions of the <code>.so</code> that you care about, e.g.:</p>

<ul>
<li><code>distribution/gperf/lib/arm64-v8a/libgperf.so</code></li>
<li><code>distribution/gperf/lib/x86_64/libgperf.so</code></li>
</ul>

<p>and then pick the right one on CMake with: <code>${ANDROID_ABI}</code>.</p>

<p>I have further explained that example at: <a href=""https://stackoverflow.com/questions/9870435/how-to-link-a-prebuilt-shared-library-to-an-android-ndk-project/47558694#47558694"">How to link a prebuilt shared Library to an Android NDK project?</a></p>
",895245,,895245,,2017-11-30 10:51:06,2017-11-30 10:51:06,,,,0,,,
Android,47998727,2,,47998502,2017,,1,,"<p>It depends. </p>

<pre><code>implementation 'com.google.dagger:dagger:2.14.1'

annotationProcessor 'com.google.dagger:dagger-compiler:2.14.1'
</code></pre>

<p>You can get away with the above just fine but if you want to use the recently introduced <a href=""https://google.github.io/dagger/android.html"" rel=""nofollow noreferrer"">dagger.android</a> you'll at least need these two as well.</p>

<pre><code>implementation 'com.google.dagger:dagger-android:2.14.1'

annotationProcessor 'com.google.dagger:dagger-android-processor:2.14.1'
</code></pre>

<p>I believe the the <code>dagger-android-suppprt</code> is just if you're using <code>DaggerAppCompatActivity</code>, <code>DaggerFragments</code>, etc like in the <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-dagger"" rel=""nofollow noreferrer"">Todo-MVP-Dagger Android Architecture</a> example.</p>

<p>I don't think you need the last one at all, I don't have that in any my projects that use Dagger.</p>
",8217056,,8217056,,2017-12-28 3:11:36,2017-12-28 3:11:36,,,,0,,,
Android,47840996,2,,47840682,2017,,1,,"<p>Ok I've already found an JavaScanner replacement. It does not anwser 2 questions I've asked bellow but it solves deprecation interface problem so I have decided to post an answer.</p>

<p>According to this google groups - API changed twice since <em>JavaScanner</em>.</p>

<p>First change was to <em>JavaPsiScanner</em> but they 
""didn't advertise this widely, since I already knew that we wanted to switch over to UAST (which was still in development)"" </p>

<p>Second and final change is to <strong>UastScanner. So one should use it now for Java Classes.</strong> </p>

<p>You can even find short <a href=""https://groups.google.com/forum/#!searchin/lint-dev/deprecated%7Csort:date/lint-dev/7nLiXa04baM/9q6QJpmODgAJ"" rel=""nofollow noreferrer"">documentation</a> writen by Tor Norbye (7th comment from above) </p>

<p><strong>Edit:</strong> <a href=""https://github.com/googlesamples/android-custom-lint-rules/blob/master/android-studio-3/checks/src/main/java/com/example/lint/checks/SampleCodeDetector.java"" rel=""nofollow noreferrer"">Sample UastDetector class</a></p>
",4658157,,115145,,2018-04-05 16:40:19,2018-04-05 16:40:19,,,,0,,,
Android,48594233,2,,48277743,2018,,1,,"<p>Great Question this was what i was looking for and I get one that might be useful</p>

<p>(Its all about Intent) </p>

<p><a href=""https://github.com/googlesamples/android-AppShortcuts"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-AppShortcuts</a></p>

<p><strong>Note: If your app is static its simple to implement.</strong></p>

<p><strong>Updated:::</strong></p>

<p>Here is a link that will show you the difference of dynamic or static shortcuts and its implementation if you like it please up vote.</p>

<p><a href=""https://www.novoda.com/blog/exploring-android-nougat-7-1-app-shortcuts/"" rel=""nofollow noreferrer"">https://www.novoda.com/blog/exploring-android-nougat-7-1-app-shortcuts/</a></p>
",9287163,,9287163,,2018-02-03 9:00:07,2018-02-03 9:00:07,,,,3,,,
Android,47910511,2,,44908605,2017,,1,,"<p>This seems to be occurring only on Oreo. It can be reproduced on an API 26 emulator using Google's sample project available here: <a href=""https://github.com/googlesamples/android-ActivitySceneTransitionBasic/#readme"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ActivitySceneTransitionBasic/#readme</a></p>

<p>I managed to fix the problem in my app by adding this:</p>

<pre><code>&lt;item name=""android:windowIsTranslucent""&gt;true&lt;/item&gt;
</code></pre>

<p>To the style of my detail activity.</p>
",1356106,,1356106,,2017-12-20 17:33:06,2017-12-20 17:33:06,,,,0,,,
Android,48155550,2,,48150006,2018,,1,,"<p>First of all, this is a good question, a lot of developers had/have the same question and currently there isn't an official solution to this.</p>

<p>The only sure thing is:</p>

<blockquote>
  <p>A <code>ViewModel</code> <strong>should not</strong> have references to Activities or Views in general.</p>
</blockquote>

<p>What you should do is reading all this thread in GitHub <a href=""https://github.com/googlesamples/android-architecture-components/issues/63"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components/issues/63</a>, a lot of solutions have been posted and probably there is at least one good for you.</p>

<p>About the link you posted on <a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-rxjava/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/tasks/TasksViewModel.java"" rel=""nofollow noreferrer"">googlesamples and blueprint</a>, their <code>Navigator</code> is not good as you can think. It's still an example app and probably they removed some complexity to make the sample easier to understand for a wider set of developers.</p>

<p>I think a better approach is the one provided in <a href=""https://github.com/fabioCollini/ArchitectureComponentsDemo"" rel=""nofollow noreferrer"">this sample repo</a> which completely remove references to Activities. (It's made in Kotlin, I don't know if you can emulate the same behaviours with Java but you could try at least).</p>
",2910520,,1916449,,2018-05-18 23:43:18,2018-05-18 23:43:18,,,,4,,,
Android,38934377,2,,38916553,2016,,1,,"<p>As far as I understand you use <a href=""https://github.com/googlesamples/android-play-billing"" rel=""nofollow"">TrivialDrive</a> example, check how premium purchase is implemented (find usages <code>mIsPremium</code>).</p>

<pre><code>// Do we have the premium upgrade
Purchase premiumPurchase = inventory.getPurchase(SKU_PREMIUM);
mIsPremium = (premiumPurchase != null &amp;&amp; verifyDeveloperPayload(premiumPurchase));
</code></pre>

<p>Disable ads by this variable.</p>
",5766983,,,,,2016-08-13 15:44:17,,,,2,,,
Android,47992451,2,,47990608,2017,,1,,"<p>It's not impossible (I'm doing it to run C++ tests), but it requires some custom plumbing in Gradle, that by default supports Android apps, not standalone C++ x86 apps.</p>

<p>Since Android runtime is JVM, NDK is used to create libraries callable via JNI and the build systems experience is optimized for that.</p>

<p>If you want to kickstart NDK project, I advice you to check out this Google sample:
<a href=""https://github.com/googlesamples/android-ndk/tree/master/hello-jni"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk/tree/master/hello-jni</a>  </p>

<p>If you want to run standalone C++ binaries, I advice you to check <strong>CLion</strong> or write your app/lib as a custom CMake project not relying on NDK at all and then create a custom Gradle task to build it.</p>

<p>You probably (I can only guess) want to check hello-jni sample and CLion first.</p>
",3602072,,,,,2017-12-27 12:45:56,,,,1,,,
Android,39761861,2,,39753777,2016,,1,,"<p>If you are trying to convert YUV from camera to Bitmap, here is something you can try:</p>

<pre><code>// import android.renderscript.*
// RenderScript mRS;
// ScriptIntrinsicYuvToRGB mYuvToRGB;
// Allocation yuvPreviewAlloc;
// Allocation rgbOutputAlloc;

// Create RenderScript context, ScriptIntrinsicYuvToRGB and Allocations and keep reusing them.
if (NotInitialized) {
    mRS = RenderScript.create(this).
    mYuvToRGB = ScriptIntrinsicYuvToRGB.create(mRS, Element.YUV(mRS));    

    // Create a RS Allocation to hold NV21 data.
    Type.Builder tYuv = new Type.Builder(mRS, Element.YUV(mRS));
    tYuv.setX(width).setY(height).setYuvFormat(android.graphics.ImageFormat.NV21);
    yuvPreviewAlloc = Allocation.createTyped(mRS, tYuv.create(), Allocation.USAGE_SCRIPT | Allocation.USAGE_IO_INPUT);

    // Create a RS Allocation to hold RGBA data.
    Type.Builder tRgb = new Type.Builder(mRS, Element.RGBA_8888(mRS));
    tRgb.setX(width).tRgb(height);
    rgbOutputAlloc = Allocation.createTyped(mRS, tRgb.create(), Allocation.USAGE_SCRIPT);

    // Set input of ScriptIntrinsicYuvToRGB
    mYuvToRGB.setInput(yuvPreviewAlloc);
}

// Use rsPreviewSurface as one of the output surface from Camera API.
// You can refer to https://github.com/googlesamples/android-HdrViewfinder/blob/master/Application/src/main/java/com/example/android/hdrviewfinder/HdrViewfinderActivity.java#L504
Surface rsPreviewSurface = yuvPreviewAlloc.getSurface();
...

// Whenever a new frame is available
// Update the yuv Allocation with a new Camera buffer without any copy.
// You can refer to https://github.com/googlesamples/android-HdrViewfinder/blob/master/Application/src/main/java/com/example/android/hdrviewfinder/ViewfinderProcessor.java#L109
yuvPreviewAlloc.ioReceive();
// The actual Yuv to Rgb conversion.
mYuvToRGB.forEach(rgbOutputAlloc);

// Copy the rgb Allocation to a Bitmap.
rgbOutputAlloc.copyTo(mBitmap);

// continue processing mBitmap.
...
</code></pre>
",5116284,,5116284,,2016-09-29 17:31:54,2016-09-29 17:31:54,,,,3,,,
Android,49090472,2,,49076587,2018,,1,,"<p>So, from the comments it seems you actually want to take a screenshot. Please state exactly your problem next time, don't make people guess.</p>

<p>As for your question, it actually seems to be possible using the <code>MediaProjectionManager</code> and a service. See <a href=""https://github.com/googlesamples/android-ScreenCapture"" rel=""nofollow noreferrer"">this example project on github</a>.</p>

<p>This only works on Android 5.0+.</p>
",1737624,,,,,2018-03-03 23:48:51,,,,1,,,
Android,38971588,2,,38959881,2016,,1,,"<p>Use Google Fit to <a href=""https://developers.google.com/fit/android/releases"" rel=""nofollow"">track sleep data</a>.</p>

<blockquote>
  <p>Developers can now read and write granular sleep data. This includes
  light sleep, deep sleep, REM, and awake activities. These granular
  activity types have been added to the FitnessActivities enumerated
  type.</p>
</blockquote>

<p>-To insert sleep data, create a session of type FitnessActivities.SLEEP.</p>

<p>To detect granularity in your session, insert activity segments of types:</p>

<p>-FitnessActivities.SLEEP_LIGHT</p>

<p>-FitnessActivities.SLEEP_DEEP</p>

<p>-FitnessActivities.SLEEP_REM</p>

<p>-FitnessActivities.SLEEP_AWAKE</p>

<p>You can also check the Android Wear sample for Google Fit in this <a href=""https://github.com/googlesamples/android-WatchFace"" rel=""nofollow"">github repo</a>.</p>
",6143482,,,,,2016-08-16 9:45:38,,,,0,,,
Android,30571011,2,,30570620,2015,,1,,"<p>I think you will be better of trying to stream to a surface view, not sure if this can even be done with a imageview.</p>

<p>try this <a href=""https://www.airpair.com/android/android-camera-surface-view-fragment"" rel=""nofollow"">tutorial</a> it should get you going in the right direction </p>

<p>or <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">this</a> for a more up to date example provided by google</p>
",2543058,,2543058,,2015-06-01 13:48:37,2015-06-01 13:48:37,,,,3,,,
Android,30596636,2,,30590994,2015,,1,,"<p>I will answer myself, based on the answer I got here: <a href=""https://github.com/googlesamples/android-play-publisher-api/issues/20#issuecomment-107923343"" rel=""nofollow"">https://github.com/googlesamples/android-play-publisher-api/issues/20#issuecomment-107923343</a></p>

<p>Something like this works for me:</p>

<pre><code>        var service = new AndroidPublisherService(new BaseClientService.Initializer()
        {
            HttpClientInitializer = credential
        });

        // Insert new edit
        var edit = new AppEdit()
        {
            ExpiryTimeSeconds = ToEpochTime(DateTime.UtcNow.AddMinutes(30)).ToString()
        };
        edit = service.Edits.Insert(edit, packageName).Execute();

        // Fetching the Alpha track and clearing the version code from it
        var tracks = service.Edits.Tracks.List(packageName, edit.Id).Execute().Tracks;
        var alphaTrack = tracks.Single(track =&gt; track.TrackValue.Equals(EditsResource.TestersResource.GetRequest.TrackEnum.Alpha.ToString(), StringComparison.InvariantCultureIgnoreCase));
        var versionCode = alphaTrack.VersionCodes.Single();
        alphaTrack.VersionCodes.Clear();
        service.Edits.Tracks.Patch(alphaTrack, packageName, edit.Id, EditsResource.TracksResource.PatchRequest.TrackEnum.Alpha).Execute();

        // Updating a Beta track with the same version code as in the Alpha track
        var betaTrack = new Track {TrackValue = ""beta"", VersionCodes = new [] { versionCode }};
        service.Edits.Tracks.Update(betaTrack, packageName, edit.Id, EditsResource.TracksResource.UpdateRequest.TrackEnum.Beta).Execute();

        // Commit the edit
        service.Edits.Commit(packageName, edit.Id).Execute();
</code></pre>
",863882,,,,,2015-06-02 12:49:56,,,,0,,,
Android,48834992,2,,44880841,2018,,1,,"<p>To use MVVM with dagger check out <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample"" rel=""nofollow noreferrer"">this sample code</a> from google</p>

<p>It really did it very well and it uses the latest trends in dagger as well, like defining submodules and using new <code>AndroidInjection</code> for injecting activities and fragments. It also uses a custom factory for creating your view model that takes care of injecting the constructor fields. </p>
",2390217,,5457853,,2018-07-18 12:59:13,2018-07-18 12:59:13,,,,0,,,
Android,40067513,2,,39745851,2016,,1,,"<p>The shared lib currently need to packed into apk manually, one way is to route jniLibs to your shared lib directory. Hope later version could pack it automatically. One example is here,<a href=""https://github.com/googlesamples/android-ndk/tree/master/hello-libs"" rel=""nofollow"">https://github.com/googlesamples/android-ndk/tree/master/hello-libs</a>, it imports one shared lib, one static lib; shared lib is packed to APK  with script in app/build.gradle:jniLibs.srcDirs = ['../distribution/gperf/lib']</p>
",4496512,,,,,2016-10-16 6:25:12,,,,0,,,
Android,28439147,2,,11369332,2015,,1,,"<p>I am also encountering this error. My app is only published in beta-testing mode. Could that be the problem, I wonder? </p>

<p>In case it is relevant, I am using a modified version of <a href=""https://github.com/googlesamples/android-play-publisher-api/tree/master/v2/python"" rel=""nofollow"">googlesamples/android-play-publisher-api</a> where I changed <code>basic_list_apks</code> to act as a subscription revoker, by modifying the service-call defining line to be like this:</p>

<pre><code>service.purchases().subscriptions().revoke(packageName=package_name,
    subscriptionId=product_id,
    token=purchase_token)
</code></pre>
",1776544,,,,,2015-02-10 18:32:56,,,,0,,,
Android,46846928,2,,46846823,2017,,1,,"<p>Create a Listener for that. </p>

<pre><code>public interface OnChange() {
  void changed();
}

public class ListenerHolder {
    public static OnChange onChange = new OnChange( ... );
}

MyClass mClass = new MyClass();

@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
    ListenerHolder.onChange.changed();
}
</code></pre>

<p>Take care that the interface should be static somewhere else then the own activity, else it may be destroyed with the activity. </p>

<p>But there are a few better ways solving that. BroadcastReceivers, Deeplinking, Extending, LiveData (Livecycle-aware), RxJava Subjects, ...</p>

<p>It's a bad design pattern to hook into view events outside a class which is not used for that.</p>

<p>Take a look at <a href=""https://github.com/googlesamples/android-architecture-components"" rel=""nofollow noreferrer"">Android Architecture Components</a>  which uses a Mvvm Pattern including ViewModels and LiveData to survive configuration changes.</p>

<p>If you'r new to Android i highly recommend you to take a look at <a href=""https://developer.android.com/topic/libraries/architecture/index.html"" rel=""nofollow noreferrer"">https://developer.android.com/topic/libraries/architecture/index.html</a> for a proper design of your app. You may also start using Kotlin because it will be the maintained language in future for android.</p>
",2032539,,2032539,,2017-10-20 10:20:17,2017-10-20 10:20:17,,,,2,,,
Android,40660898,2,,2904507,2016,,1,,"<p>check this example it's used in google translate to get text from image it's use google services</p>

<p><a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/ocr-codelab"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vision/tree/master/visionSamples/ocr-codelab</a></p>
",3806350,,,,,2016-11-17 17:03:36,,,,0,,,
Android,38043651,2,,35937530,2016,,1,,"<pre><code>model {
    android {
       compileSdkVersion 24
       buildToolsVersion ""24.0.0""
</code></pre>

<p>on my <code>build.gradle</code> now makes the build work on the Android SDK 24 preview 4, tested on the Vulkan examples: <a href=""https://github.com/googlesamples/android-vulkan-tutorials/pull/12"" rel=""nofollow"">https://github.com/googlesamples/android-vulkan-tutorials/pull/12</a></p>

<p>The API for this preview seems to be final, so I think this is what code should look like after the release.</p>
",895245,,,,,2016-06-26 22:07:17,,,,0,,,
Android,46736617,2,,46731190,2017,,1,,"<p>Google provides a good feature list here:
<a href=""https://developers.google.com/android/work/requirements/features"" rel=""nofollow noreferrer"">https://developers.google.com/android/work/requirements/features</a></p>

<p>If your devices have NFC, I would provision using NFC. You can look at the code here for your own implementation or you might be able to use the app with very few modifications.
<a href=""https://github.com/googlesamples/android-NfcProvisioning"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-NfcProvisioning</a></p>

<p>By tapping the welcome screen in the Google Setup Wizard 6 times will allow you to use QR code provisioning. It is a bit more cumbersome in my opinion and requires Android 7.0+.</p>

<p>Those are your only two options unless you become a Google EMM Partner or again, partner with them to support Zero Touch Enrollment on Android 8.0+ devices for your own homebaked solution.</p>

<p>You might want to also look at existing open source EMM/MDM implementations that already exist such as WSO2.</p>
",6917917,,,,,2017-10-13 19:11:50,,,,6,,,
Android,49378133,2,,49298112,2018,,1,,"<p>You can make use of <a href=""https://developer.android.com/reference/android/view/ViewOutlineProvider.html"" rel=""nofollow noreferrer""><code>ViewOutlineProvider</code></a> API. As an example usage see <a href=""https://github.com/googlesamples/android-ClippingBasic"" rel=""nofollow noreferrer"">ClippingBasic</a> project.</p>

<p>Having defined outline provider class as such:</p>

<pre>
<code>
    private class OvalOutlineProvider extends ViewOutlineProvider {
        @Override
        public void getOutline(View view, Outline outline) {
            outline.setOval(0, 0, view.getWidth(), view.getHeight());
        }
    }
</code>
</pre>

<p>Then apply view outline to parent:</p>

<pre>
<code>
    View parent = findViewById(R.id.parent);
    parent.setOutlineProvider(new OvalOutlineProvider());
    parent.setClipToOutline(true);
</code>
</pre>

<p><code>ViewOutlineProvider</code> is accessible starting from API 21. Not sure, whether the solution is applicable for Xamarin (hope it does).</p>
",1083957,,,,,2018-03-20 7:04:20,,,,0,,,
Android,40369378,2,,40352748,2016,,1,,"<p>Found a much better sample project that doesn't display that strange Samsung popup: <a href=""https://github.com/googlesamples/android-FingerprintDialog/issues"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-FingerprintDialog/issues</a></p>

<p>And yes, fingerprint auth on android really is a PITA.</p>
",2593123,,,,,2016-11-01 22:05:47,,,,0,,,
Android,47339205,2,,47219596,2017,,1,,"<p>If you implement MediaSession, the title will appear. The system evaluates the MediaSession similar to how notifications with MediaSession work on phones. </p>

<p>There is an <a href=""https://github.com/googlesamples/android-PictureInPicture/blob/master/app/src/main/java/com/example/android/pictureinpicture/MediaSessionPlaybackActivity.java"" rel=""nofollow noreferrer"">activity that demonstrates</a> how MediaSession can affect PIP actions in the android-PictureInPicture sample. This is a bug in the sample, thank you for logging it.</p>

<p>To get the title to appear, you will need to update the meta data on the media session.</p>

<pre><code>MediaMetadataCompat metadata = new MediaMetadataCompat.Builder()
            .putString(
                 MediaMetadataCompat.METADATA_KEY_DISPLAY_TITLE, 
                ""Big Buck Bunny"")
            ...
            .build();
mSession.setMetadata(metadata);
</code></pre>
",8677540,,,,,2017-11-16 21:17:07,,,,0,,,
Android,40381117,2,,38402829,2016,,1,,"<p>Checkthis one <a href=""https://github.com/googlesamples/android-ndk/tree/master/audio-echo"" rel=""nofollow noreferrer"">google example </a></p>

<p>Usage :</p>

<blockquote>
  <p>App will capture audio from android devices and playback on the same
  device; the <strong>playback on speaker will be captured immediately</strong></p>
</blockquote>

<p>*</p>
",1850903,,1850903,,2016-11-02 13:30:06,2016-11-02 13:30:06,,,,1,,,
Android,49274559,2,,46180564,2018,,1,,"<p>Answer to your question, <a href=""https://developers.google.com/nearby/messages/android/get-beacon-messages#subscribe_in_the_background"" rel=""nofollow noreferrer"">on the official documentation</a></p>

<p>Sample <a href=""https://github.com/googlesamples/android-nearby/tree/master/messages/NearbyDevices"" rel=""nofollow noreferrer"">GitHub Google</a></p>

<h1>Google Solution</h1>

<pre><code>// Subscribe to messages in the background.
private void backgroundSubscribe() {
    Log.i(TAG, ""Subscribing for background updates."");
    SubscribeOptions options = new SubscribeOptions.Builder()
            .setStrategy(Strategy.BLE_ONLY)
            .build();
    Nearby.getMessagesClient(this).subscribe(getPendingIntent(), options);
}

private PendingIntent getPendingIntent() {
    return PendingIntent.getBroadcast(this, 0, new Intent(this, BeaconMessageReceiver.class),
            PendingIntent.FLAG_UPDATE_CURRENT);
}
</code></pre>

<p>The following code snippet demonstrates handling the intent in the BeaconMessageReceiver class.</p>

<pre><code>@Override
public void onReceive(Context context, Intent intent) {
    Nearby.getMessagesClient(context).handleIntent(intent, new MessageListener() {
        @Override
        public void onFound(Message message) {
            Log.i(TAG, ""Found message via PendingIntent: "" + message);
        }

        @Override
        public void onLost(Message message) {
            Log.i(TAG, ""Lost message via PendingIntent: "" + message);
        }
    });
}
</code></pre>

<p>When the subscription is no longer required, your app should unsubscribe by calling Nearby.getMessagesClient(Activity).unsubscribe(PendingIntent).</p>

<h1>A solution to use BLE</h1>

<pre><code>SubscribeOptions.Builder builder = new SubscribeOptions.Builder();

if (getPackageManager().hasSystemFeature(PackageManager.FEATURE_BLUETOOTH_LE)) {
    builder.setStrategy(Strategy.BLE_ONLY);
} else {
    builder.setStrategy(new Strategy.Builder().setDistanceType(Strategy.DISTANCE_TYPE_EARSHOT).build());
    Toast.makeText(this, ""BLE NOT SUPPORTED"", Toast.LENGTH_SHORT).show();
}

mOptions = builder.build();
</code></pre>

<h1>Publish</h1>

<pre><code>Strategy s = new Strategy.Builder()
                    .setDistanceType(Strategy.DISTANCE_TYPE_EARSHOT)
                    .build();
PublishOptions options = new PublishOptions.Builder()
                                .setStrategy(s)
                                .build();
Nerby.getMessagesClient(this).publish(mMessageName, options);
</code></pre>
",6831069,,,,,2018-03-14 9:55:26,,,,0,,,
Android,40258418,2,,40258004,2016,,1,,"<p>Try <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">this</a> sample project from Google (or just <a href=""https://developer.android.com/samples/Camera2Basic/src/com.example.android.camera2basic/Camera2BasicFragment.html"" rel=""nofollow"">Camera2BasicFragment</a>). In general You should request focus, than determine ""focus lock"" state in <code>CameraCaptureSession.CaptureCallback</code> than capture image and finally request for unlock focus.</p>
",6950238,,,,,2016-10-26 9:24:03,,,,2,,,
Android,50427206,2,,50426051,2018,,1,,"<p>I'd definitely recommend a bit of research before starting any piece of code. Today Android offers many interesting app architectures, and even though it's not trivial to chose the best one that suits you, that journey will make you learn a lot.</p>

<p>A good starting point for that is the Google's official <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">architecture sample projects</a> on GitHub. Not only you have many different architectures like MVP, MVVM, MVI, but also some interesting variants within each architecture.</p>

<p>On the other hand, Android is doing a great work trying to simplify that creating a great collection of libraries. That's called Android Architecture Components, and <a href=""https://github.com/googlesamples/android-architecture-components"" rel=""nofollow noreferrer"">here you have some of their samples</a> to start playing and adopting their patterns.</p>

<p>Finally, if you still decide to go with MVP, there're a few things you'll have to do in your example:</p>

<ol>
<li>Your <code>MainActivity</code> (the View) should implement a contract of that View (e.g: <code>MainViewContract</code>).</li>
<li>Within that View, you should get the reference to your <code>MainPresenter</code> passing the reference of the View which implements <code>MainViewContract</code>.</li>
<li>The MainPresenter will also implement a contract (e.g: <code>MainPresenterContract</code>).</li>
</ol>

<p>Basically all connections you need are stablished. The <code>MainPresenter</code> will be responsible of the business handling View inputs and outputs. In your case, the inputs and outputs very straightforward:</p>

<p>Inputs (<code>MainPresenterContract</code>):</p>

<ul>
<li><code>void copyText(String textToCopy);</code></li>
</ul>

<p>Outputs (<code>MainViewContract</code>):</p>

<ul>
<li><code>void showCopiedText(String copiedText);</code></li>
</ul>

<p>When the user clicks the button, you'll send the message <code>copyText</code> through the presenter local instance. Then, the presenter will get that and perform the output invoking <code>showCopiedText</code>. Since the main view <code>MainActivity</code> implements the <code>MainViewContract</code>, you'll receive the output message in a local method of the view where you just paint the text on the <code>Textview</code>.</p>
",812598,,,,,2018-05-19 16:15:06,,,,0,,,
Android,49683266,2,,49637797,2018,,1,,"<p>Play Billing 1.0 does not have the concept of purchase states (anymore), so there currently is no way to get this information using the Play Billing library.
My understanding is that <code>queryPurchases</code> is supposed to return actual valid purchases only. However, it gets the information from a long living cache and you have no way of updating it manually.</p>

<p><code>onBillingClientSetupFinished</code> is completely unrelated.</p>

<p>Here is an active discussion on the subject: <a href=""https://github.com/googlesamples/android-play-billing/issues/122"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-billing/issues/122</a></p>
",2168965,,2168965,,2018-04-06 0:07:12,2018-04-06 0:07:12,,,,1,,,
Android,50465218,2,,50236778,2018,,1,,"<p>This is what happens under the hood:</p>

<pre><code>ViewModelProviders.of(getActivity())
</code></pre>

<p>As you are using <strong>getActivity()</strong> this retains your NoteViewModel while the scope of MainActivity is alive so is your trashedNotesLiveData.</p>

<p>When you first open your TrashFragment room queries the db and your trashedNotesLiveData is populated with the trashed value (At the first opening there is only one onChange() call). So this value is cached in trashedNotesLiveData.</p>

<p>Then you come to the main fragment add a few trashed notes and go to the TrashFragment again. This time you are first served with the cached value in
trashedNotesLiveData while room makes async query. When query finishes you are
brought the latest value. This is why you get two onChange() calls.</p>

<p>So the solution is you need to clean the trashedNotesLiveData before opening
TrashFragment. This can either be done in your getTrashedNotesLiveData() method.</p>

<pre><code>public LiveData&lt;List&lt;Note&gt;&gt; getTrashedNotesLiveData() {
    return NoteplusRoomDatabase.instance().noteDao().getTrashedNotes();
}
</code></pre>

<p>Or you can use something like this <a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java"" rel=""nofollow noreferrer"">SingleLiveEvent</a></p>

<p>Or you can use a MediatorLiveData which intercepts the Room generated one and returns only distinct values.</p>

<pre><code>final MediatorLiveData&lt;T&gt; distinctLiveData = new MediatorLiveData&lt;&gt;();
    distinctLiveData.addSource(liveData, new Observer&lt;T&gt;() {
        private boolean initialized = false;
        private T lastObject = null;

        @Override
        public void onChanged(@Nullable T t) {
            if (!initialized) {
                initialized = true;
                lastObject = t;
                distinctLiveData.postValue(lastObject);
            } else if (t != null &amp;&amp; !t.equals(lastObject)) {
                lastObject = t;
                distinctLiveData.postValue(lastObject);
            }

        }
    });
</code></pre>
",6232541,,6232541,,2018-05-22 13:21:50,2018-05-22 13:21:50,,,,0,,,
Android,46780276,2,,46562806,2017,,1,,"<p>The <code>developerPayload</code> is not included in the Google Play Billing Library.</p>

<p><a href=""https://issuetracker.google.com/issues/63381481"" rel=""nofollow noreferrer"">https://issuetracker.google.com/issues/63381481</a></p>

<p><a href=""https://github.com/googlesamples/android-play-billing/issues/78"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-billing/issues/78</a></p>

<p>The Google Play server API will verify that the purchase was processed by Google.</p>

<p>If your server needs to verify the authenticity of the client app (when you send the <code>purchaseToken</code> to the server), you can send extra information from the client app.</p>
",1689960,,,,,2017-10-16 23:09:12,,,,1,,,
Android,46816791,2,,46811159,2017,,1,,"<p>As long as your device runs Lollipop or greater, you will want to set your app as a device owner. Note, this is different than device administrator. An app is granted device owner permissions only during device provisioning at the welcome screen of the Google Setup Wizard. The device owner is restricted when it can be set because of the control it has. Only one app can be the device owner.</p>

<p>A kiosk solution will set a device up with an app as the device owner. It will suspend all packages that shouldn't be available using <a href=""https://developer.android.com/reference/android/app/admin/DevicePolicyManager.html#setPackagesSuspended(android.content.ComponentName,%20java.lang.String[],%20boolean)"" rel=""nofollow noreferrer"">setPackagesSuspended</a>.</p>

<p>Some additional links you may find helpful (all require device owner for a COSU/kiosk-mode solution):</p>

<ul>
<li><a href=""https://developer.android.com/reference/android/app/admin/DevicePolicyManager.html#setApplicationHidden(android.content.ComponentName,%20java.lang.String,%20boolean)"" rel=""nofollow noreferrer"">setApplicationHidden</a></li>
<li><a href=""https://developer.android.com/reference/android/app/admin/DevicePolicyManager.html#addUserRestriction(android.content.ComponentName,%20java.lang.String)"" rel=""nofollow noreferrer"">addUserRestriction</a></li>
<li><a href=""https://developer.android.com/reference/android/os/UserManager.html#DISALLOW_INSTALL_APPS"" rel=""nofollow noreferrer"">DISALLOW_INSTALL_APPS</a></li>
</ul>

<p>Look into the TestDPC app. Google provides source code to it and it will have most, if not everything of what you need. </p>

<p><a href=""https://developers.google.com/android/work/build-dpc"" rel=""nofollow noreferrer"">https://developers.google.com/android/work/build-dpc</a></p>

<p><a href=""https://github.com/googlesamples/android-testdpc"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-testdpc</a></p>

<p>Other solutions I've seen (mostly on pre-Lollipop releases) are to use a custom launcher to hide non-approved apps. This custom launcher is sometimes referred to as a secure launcher, but hiding apps instead of suspending them as the device owner is much less effective. Secure launcher, IMO, is a misnomer.</p>
",6917917,,,,,2017-10-18 18:22:11,,,,0,,,
Android,47180652,2,,47180304,2017,,1,,"<p>You need to add the dependency inside the dependencies block in your <strong>module</strong> <code>build.gradle</code> <strong><em>not</em></strong> in your project <code>build.gradle</code>.</p>

<p>You can see the sample how adding the dependency from <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer/blob/master/mobile/build.gradle"" rel=""nofollow noreferrer"">UniversalMusicPlayer sample</a>. Here the sample of <strong>module</strong> build.gradle without the license:</p>

<pre><code>apply plugin: 'com.android.application'

android {
    compileSdkVersion 26
    buildToolsVersion ""26.0.1""

    defaultConfig {
        applicationId ""com.example.android.uamp""
        minSdkVersion 17
        targetSdkVersion 26
        versionCode 2
        versionName ""1.1""
        testInstrumentationRunner ""android.support.test.runner.AndroidJUnitRunner""
    }
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_7
        targetCompatibility JavaVersion.VERSION_1_7
    }
    lintOptions {
        abortOnError true
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
}

repositories {
    flatDir {
        dirs 'libs'
    }
}

dependencies {
    provided 'com.google.android.wearable:wearable:2.0.3'

    compile 'com.google.android.gms:play-services-cast-framework:11.0.1'
    compile 'com.google.android.support:wearable:2.0.3'
    compile 'com.android.support:appcompat-v7:26.1.0'
    compile 'com.android.support:cardview-v7:26.1.0'
    compile 'com.android.support:mediarouter-v7:26.1.0'
    compile 'com.android.support:leanback-v17:26.1.0'
    compile 'com.android.support:design:26.1.0'

    compile 'com.google.android.exoplayer:exoplayer:r2.5.0'

    testCompile 'junit:junit:4.12'
    testCompile 'org.mockito:mockito-core:1.10.19'
    androidTestCompile 'junit:junit:4.12'
    androidTestCompile 'com.android.support:support-annotations:26.1.0'
    androidTestCompile 'com.android.support.test:runner:0.5'
    androidTestCompile 'com.android.support.test:rules:0.5'
}
</code></pre>

<p>Take a look at the dependencies block:</p>

<pre><code>dependencies {
   ...
}
</code></pre>

<p>You need to add <code>debugCompile 'com.amitshekhar.android:debug-db:1.0.0'
</code> there. So it will become:</p>

<pre><code>dependencies {
   ...
   debugCompile 'com.amitshekhar.android:debug-db:1.0.0
}
</code></pre>
",4758255,,,,,2017-11-08 13:11:21,,,,2,,,
Android,46979581,2,,46975251,2017,,1,,"<p>Instant apps are only supported in API 21+ devices (<a href=""https://developer.android.com/topic/instant-apps/faqs.html"" rel=""nofollow noreferrer"">link</a>), older devices will only support full apk. </p>

<p>The better approach is to define different minSdk based on your module, like:</p>

<p>You can take a look at Google's analytics sample on <a href=""https://github.com/googlesamples/android-instant-apps/tree/master/analytics"" rel=""nofollow noreferrer"">GitHub</a></p>

<p>Project's gradle</p>

<pre><code>ext {
    buildTools = '26.0.2'
    compileSdk = 26
    minSdk = 15
    minSdkInstant = 21
    versionCode = 1
    versionName = '1.0'
    supportLib = '26.1.0'
    firebaseVer = '10.2.4'
    instantAppsVer = '1.0.0'
}
</code></pre>

<p>Base gradle</p>

<pre><code>android {
    compileSdkVersion rootProject.compileSdk
    buildToolsVersion rootProject.buildTools
    baseFeature true
    defaultConfig {
        minSdkVersion rootProject.minSdk
        targetSdkVersion rootProject.compileSdk
        versionCode rootProject.versionCode
        versionName rootProject.versionName
    }
    buildTypes {
        release {}
    }
}
</code></pre>

<p>Installed gradle</p>

<pre><code> defaultConfig {
        applicationId ""com.example.android.instant.analytics""
        minSdkVersion rootProject.minSdk
        targetSdkVersion rootProject.compileSdk
        versionCode rootProject.versionCode
        versionName rootProject.versionName

    }
</code></pre>

<p>Instant gradle</p>

<pre><code>android {
    defaultConfig {
        minSdkVersion rootProject.minSdkInstant
    }
}
</code></pre>
",3185230,,3185230,,2017-10-27 16:50:15,2017-10-27 16:50:15,,,,3,,,
Android,51611720,2,,51611503,2018,,1,,"<p>Using <a href=""https://developer.android.com/training/constraint-layout/"" rel=""nofollow noreferrer"">Android's relatively new ConstraintLayout</a> you should be able to treat the top and bottom edges of the blue layout as top and bottom constraints respectively for the red and violet ones. Aligning both of them to both of these constraints at once, while defining their heights in absolute, should render the layout you are looking for. You can refer to <a href=""https://github.com/googlesamples/android-ConstraintLayoutExamples/tree/master/constraintlayout"" rel=""nofollow noreferrer"">the official examples repository</a> to check use cases for this layout type. </p>

<p><strong>Edit:</strong> Took a moment to provide you with a simplified example. Only including tags/parameters which are relevant to the case.</p>

<pre><code>&lt;android.support.constraint.ConstraintLayout 
...
&gt;
    &lt;Layout
    android:id=""@+id/blue""
    ...
    /&gt;

    &lt;Layout
    android:id=""@+id/red""
    android:layout_height=""20dp""
    app:layout_constraintTop_toTopOf=""@+id/blue""
    app:layout_constraintBottom_toBottomOf=""@+id/blue""
    ...
    /&gt;

    &lt;Layout
    android:id=""@+id/violet""
    android:layout_height=""20dp""
    app:layout_constraintTop_toTopOf=""@+id/blue""
    app:layout_constraintBottom_toBottomOf=""@+id/blue""
    ...
    /&gt;


&lt;/android.support.constraint.ConstraintLayout&gt;
</code></pre>
",4933947,,4933947,,2018-07-31 11:02:07,2018-07-31 11:02:07,,,,0,,,
Android,51571188,2,,51571079,2018,,1,,"<p>I think in the <code>onBindViewHolder</code> method you should do what ever you want to do with your button.</p>

<p>Also there is no need for the list of buttons here. Make a list the data you need to be held in the Buttons RecyclerView.</p>

<p>I have a RecyclerView that will display Genres for restaurants lets say, So I will create a List of strings to hold these genres names (chickens, meats, etc,..)  </p>

<p>Setting its text </p>

<blockquote>
  <p>holder.actionButton.setText(// Make use of position here);</p>
</blockquote>

<p>Or Click Listeners.</p>

<h2>Update</h2>

<p>You can check google samples for recyclerview <a href=""https://github.com/googlesamples/android-RecyclerView/blob/master/Application/src/main/java/com/example/android/recyclerview/CustomAdapter.java"" rel=""nofollow noreferrer"">here</a></p>

<pre><code>@Override

    public void onBindViewHolder(ViewHolder viewHolder, final int position) {
        Log.d(TAG, ""Element "" + position + "" set."");

        // Get element from your dataset at this position and replace the contents of the view
        // with that element
        viewHolder.getTextView().setText(mDataSet[position]);
}
</code></pre>

<p>wheres mDataset is Array of Strings.</p>
",4695879,,4695879,,2018-07-30 10:34:10,2018-07-30 10:34:10,,,,0,,,
Android,33494428,2,,33494270,2015,,1,,"<p>Here is a good example of what you are looking for.
<a href=""https://github.com/googlesamples/android-ConfirmCredential"" rel=""nofollow"">https://github.com/googlesamples/android-ConfirmCredential</a></p>

<pre><code>private void showAuthenticationScreen() {
    // Create the Confirm Credentials screen. You can customize the title and description. Or
    // we will provide a generic one for you if you leave it null
    Intent intent = mKeyguardManager.createConfirmDeviceCredentialIntent(null, null);
    if (intent != null) {
        startActivityForResult(intent, REQUEST_CODE_CONFIRM_DEVICE_CREDENTIALS);
    }
}
</code></pre>

<p>This is the small code for the opening intent for result and getting authentication. But I would suggest try downloading code and have a look at it.</p>

<pre><code>@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == REQUEST_CODE_CONFIRM_DEVICE_CREDENTIALS) {
        // Challenge completed, proceed with using cipher
        if (resultCode == RESULT_OK) {
            if (tryEncrypt()) {
                showPurchaseConfirmation();
            }
        } else {
            // The user canceled or didnt complete the lock screen
            // operation. Go to error/cancellation flow.
        }
    }
}
</code></pre>
",5092293,,,,,2015-11-03 8:27:52,,,,0,,,
Android,32884304,2,,32882917,2015,,1,,"<p>Ok, Turns out using a custom <code>ViewMatcher</code> will do the trick:</p>

<p>Here the matcher has to match a view which has a parent with id <code>action_bar</code> and is an ImageView.</p>

<pre><code>onView(childOf(withId(android.support.v7.appcompat.R.id.action_bar),
            withClassName(is(ImageButton.class.getName()))))
            .perform(click());
</code></pre>

<p>the method <code>childOf</code> is as follows:</p>

<pre><code>Matcher&lt;View&gt; childOf(Matcher&lt;View&gt; parentMatcher,
        Matcher&lt;View&gt; childMatcher) {
    return new TypeSafeMatcher&lt;View&gt;() {
        @Override
        public void describeTo(Description description) {
             // creation of description left as an exercise
        }

        @Override
        protected boolean matchesSafely(View view) {
            if (view.getParent() instanceof ViewGroup) {
                ViewGroup parent = (ViewGroup) view.getParent();
                return parentMatcher.matches(parent) &amp;&amp; childMatcher
                        .matches(view);
            }
            return false;
        }
    };
}
</code></pre>

<p>The method allows one to use a variety of child <code>ViewMatcher</code>, so you can use custom view matcher if in need.</p>

<h2>Refs:</h2>

<ol>
<li>espresso <a href=""https://github.com/googlesamples/android-testing/blob/master/ui/espresso/CustomMatcherSample/app/src/androidTest/java/com/example/android/testing/espresso/CustomMatcherSample/HintMatcher.java"" rel=""nofollow"">custom-matcher sample</a></li>
</ol>
",1523910,,,,,2015-10-01 9:40:54,,,,0,,,
Android,51886545,2,,51884303,2018,,1,,"<p>These are two different kinds generated classes. They are generated automatically during the build (and on the fly when using Android Studio). The naming follow the names that are defined in .xml resource files with a suffix corresponding to their component. </p>

<p><strong>1.</strong> <code>ListItemPlantBinding</code></p>

<p><code>ListItemPlantBinding</code> is a class generated for data-binding, see <a href=""https://developer.android.com/topic/libraries/data-binding/generated-binding"" rel=""nofollow noreferrer"">generated data-binding documentation</a></p>

<blockquote>
  <p>The above layout filename is <strong>activity_main.xml</strong> so the corresponding generated class is <strong>ActivityMainBinding</strong></p>
</blockquote>

<p>This means <code>ListItemPlantBinding</code> is generated for <a href=""https://github.com/googlesamples/android-sunflower/blob/master/app/src/main/res/layout/list_item_plant.xml"" rel=""nofollow noreferrer"">list_item_plant.xml</a></p>

<p>Data-binding is enabled by </p>

<pre><code>dataBinding {
     enabled = true
}
</code></pre>

<p>in <a href=""https://github.com/googlesamples/android-sunflower/blob/356b192d38900f638e985cc293b0020fced2870d/app/build.gradle#L26"" rel=""nofollow noreferrer"">build.gradle</a></p>

<p><strong>2.</strong> <code>PlantListFragmentDirections</code></p>

<p><a href=""https://developer.android.com/topic/libraries/architecture/navigation/navigation-implementing"" rel=""nofollow noreferrer"">Navigation Architecture Component docs</a> points to the second answer.</p>

<blockquote>
  <p>A class for the destination where the action originates, appended with the word ""Directions"".</p>
</blockquote>

<p>Therefore <code>PlantListFragmentDirections</code> originates from <a href=""https://github.com/googlesamples/android-sunflower/blob/356b192d38900f638e985cc293b0020fced2870d/app/src/main/res/navigation/nav_garden.xml#L30"" rel=""nofollow noreferrer"">nav_garden.xml</a>:</p>

<pre><code> &lt;fragment
    android:id=""@+id/plant_list_fragment""
    android:name=""com.google.samples.apps.sunflower.PlantListFragment""
    android:label=""@string/plant_list_title""
    tools:layout=""@layout/fragment_plant_list""&gt;

    &lt;action
        android:id=""@+id/action_plant_list_fragment_to_plant_detail_fragment""
        app:destination=""@id/plant_detail_fragment""
        app:enterAnim=""@anim/slide_in_right""
        app:exitAnim=""@anim/slide_out_left""
        app:popEnterAnim=""@anim/slide_in_left""
        app:popExitAnim=""@anim/slide_out_right"" /&gt;
&lt;/fragment&gt;
</code></pre>

<p>Note the <code>&lt;fragment&gt;</code> element with the enclosed <code>&lt;action&gt;</code></p>

<p>For how to enable navigation please refer to <a href=""https://developer.android.com/topic/libraries/architecture/navigation/navigation-implementing"" rel=""nofollow noreferrer"">Navigation Architecture Component docs</a> </p>
",4265739,,4265739,,2018-08-16 23:37:45,2018-08-16 23:37:45,,,,1,,,
Android,33829124,2,,33826656,2015,,1,,"<p>There are some open issues with Barcode detection</p>

<ol>
<li><a href=""https://github.com/googlesamples/android-vision/issues/8"" rel=""nofollow noreferrer"">No barcode detected #8</a> 
This issue has a solution here <a href=""https://stackoverflow.com/a/32029162/2691974"">https://stackoverflow.com/a/32029162/2691974</a></li>
<li><a href=""https://github.com/googlesamples/android-vision/issues/31"" rel=""nofollow noreferrer"">No Barcode detection #31</a>
This is still a open issue in github</li>
<li>There are other issues, some of them are due to focus problems, and some formats are not recognised properly.</li>
</ol>
",2691974,,-1,,2017-05-23 12:18:25,2015-11-20 14:27:57,,,,0,,,
Android,43128307,2,,43128082,2017,,1,,"<ol>
<li><p>Yes, the methods are either in the activity or in other classes, but since there is no other places for java code to be, could you clarify this question better?</p></li>
<li><p>To reduce the complexity of Activitys. If you have very little logic, it is perfectly fine, to have all the code in the activity. But as soon as the count of lines rise, you may run into problems like readability, testability and things like that. 
But you should at least put code, that you use in different Activitys, into separate classes.</p></li>
<li><p>A good example would be something like M(odel)V(iew)P(resenter), where the goal is, to separate the View (Setup Buttons, Textview etc.), the presenter (Connection the loginbutton to the loginservice while showing a loginview) and the model (The actual implementation of the loginservice).</p></li>
<li><p>Google itself offers some examples for a clean <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">architecture</a> and a simple example for <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp/"" rel=""nofollow noreferrer"">MVP</a>.</p></li>
</ol>
",7787955,,,,,2017-03-30 21:04:58,,,,2,,,
Android,43320453,2,,40441577,2017,,1,,"<p>It looks like you just want a static rectangle in the center of the preview.</p>

<p>You can do this via an xml layout by adding the image into the layout.</p>

<p>Taking the Camera2Basic example (<a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a>) and adding it to this, the example below adds the rectangle, some text and control buttons on the side (it is for landscape orientation): </p>

<pre class=""lang-js prettyprint-override""><code>&lt;RelativeLayout xmlns:android=""http://schemas.android.com/apk/res/android""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""&gt;

    &lt;com.example.android.camera2basic.AutoFitTextureView
        android:id=""@+id/texture""
        android:layout_width=""wrap_content""
        android:layout_height=""wrap_content""
        android:layout_alignParentStart=""true""
        android:layout_alignParentTop=""true"" /&gt;

    &lt;LinearLayout
        android:id=""@+id/control""
        android:layout_width=""wrap_content""
        android:layout_height=""wrap_content""
        android:layout_alignParentBottom=""true""
        android:layout_alignParentEnd=""true""
        android:layout_alignParentTop=""true""
        android:background=""@color/colorPrimary""
        android:orientation=""vertical""&gt;

        &lt;Space
            android:layout_width=""1dp""
            android:layout_height=""0dp""
            android:layout_weight=""1"" &gt;
        &lt;/Space&gt;

        &lt;TextView
            android:id=""@+id/label1""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_gravity=""center""
            android:text=""@string/label1_text"" /&gt;

        &lt;Space
            android:layout_width=""1dp""
            android:layout_height=""0dp""
            android:layout_weight=""1"" &gt;
        &lt;/Space&gt;

        &lt;Button
            android:id=""@+id/picture_button""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_gravity=""center""
            android:text=""@string/picture_button_text"" /&gt;

        &lt;Space
            android:layout_width=""1dp""
            android:layout_height=""0dp""
            android:layout_weight=""1"" &gt;
        &lt;/Space&gt;

        &lt;ImageButton
            android:id=""@+id/info""
            style=""@android:style/Widget.Material.Light.Button.Borderless""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_gravity=""center_horizontal|bottom""
            android:contentDescription=""@string/description_info""
            android:padding=""20dp""
            android:src=""@drawable/ic_action_info"" /&gt;

        &lt;Space
            android:layout_width=""1dp""
            android:layout_height=""0dp""
            android:layout_weight=""1"" &gt;
        &lt;/Space&gt;

    &lt;/LinearLayout&gt;

    &lt;RelativeLayout
        android:id=""@+id/tileview""
        android:layout_width=""fill_parent""
        android:layout_height=""fill_parent""
        android:layout_toLeftOf=""@+id/control""
        android:background=""@android:color/transparent"" &gt;

        &lt;ImageView
            android:id=""@+id/autofocus_rectangle""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:src=""@drawable/autofocus_landscape_Image""
            android:layout_centerInParent=""true"" /&gt;

        &lt;TextView
            android:id=""@+id/bottom_text""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_centerInParent=""true""
            android:layout_alignParentBottom=""true""
            android:layout_margin=""10sp""
            android:background=""@android:color/holo_blue_dark""
            android:textSize=""15sp""
            android:padding=""5sp""
            android:text="""" /&gt;

    &lt;/RelativeLayout&gt;

&lt;/RelativeLayout&gt;
</code></pre>


",334402,,,,,2017-04-10 10:12:01,,,,0,,,
Android,51917612,2,,51917487,2018,,1,,"<p>Call the parent method <code>super.onRequestPermissionsResult(requestCode,permissions,grantResults);</code>
just if there's not a match with the request code you're receiving:</p>

<pre><code>switch (requestCode) {
        case GALLERY_PERMISSIONS_REQ_CODE:

            if (grantResults[0] == PackageManager.PERMISSION_GRANTED) {

                    openGallery();
            }
            imgGalleryCV.setClickable(true);
            break;

        default:
            super.onRequestPermissionsResult(requestCode,permissions,grantResults);
            break; 
}
</code></pre>

<p>Here you have an example of RuntimePermissions usage: <a href=""https://github.com/googlesamples/android-RuntimePermissions/blob/master/Application/src/main/java/com/example/android/system/runtimepermissions/MainActivity.java"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-RuntimePermissions/blob/master/Application/src/main/java/com/example/android/system/runtimepermissions/MainActivity.java</a></p>
",10211290,,,,,2018-08-19 12:21:57,,,,3,,,
Android,51923768,2,,51921674,2018,,1,,"<p>I haven't done this myself - it's quite likely that nobody has, it's a real corner case - but I have no doubt that it's doable.</p>

<p>Getting the heart rate data on Wear is pretty easy; there's an API to do just that. Here's a SO Q&amp;A with some basic code to do so: <a href=""https://stackoverflow.com/questions/36760344"">How to read Heart rate from Android Wear</a></p>

<p>Transferring that data to your RasPi is going to be more work, but it's still eminently possible. Both devices support a full Bluetooth stack, but there's no simple API for this, so you'll have to build this piece more-or-less from scratch. On the Android side, a good starting point is Google's Bluetooth Chat sample: <a href=""https://github.com/googlesamples/android-BluetoothChat"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-BluetoothChat</a></p>

<p>In summary: Anything's possible. Many things are difficult.</p>
",252080,,,,,2018-08-20 3:21:07,,,,0,,,
Android,43078517,2,,42977275,2017,,1,,"<p>Basically, as already suggested above, you are to plunge into the science of <em>optical recognition</em>. These are quite complex algorithms that analyze pixels of an image and try to 'see' some text or, let's say, faces in the images. This objective, obvious for a human eye and mind, is quite complex especially considering that the image may have been shot with some particular lighting (back light or side light), with right or wrong white balance, etc.</p>

<p>Despite the whole complexity, there is good news: Google has provided a special library that does exactly that: recognizes texts, bar codes and faces. It is called  <a href=""https://developers.google.com/vision/"" rel=""nofollow noreferrer"">Mobile Vision</a></p>

<p>Even without knowing the recognizing algorithms, you basically initiate this library and then feed your images to these algorithms with Face API, Barcode API or Text API. And then after the processing within that library you are given whatever was found by those algorithms. It's a kind of Magic :)</p>

<p>Useful links here:</p>

<p><a href=""https://codelabs.developers.google.com/codelabs/mobile-vision-ocr/#0"" rel=""nofollow noreferrer"">Tutorial with Text API</a></p>

<p><a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/ocr-codelab/ocr-reader-complete"" rel=""nofollow noreferrer"">The code sample of the app using Text API</a></p>
",3901722,,,,,2017-03-28 19:44:42,,,,0,,,
Android,43358105,2,,43198926,2017,,1,,"<p>Are you talking about QR Code + Barcode or OCR + Barcode?</p>

<p>The former one, when building BarcodeDetector, you can specify which Barcode types you'd like to detect and recognize, for example you can do Barcode.UPC_A | Barcode.QR_CODE.</p>

<p>The later one, you can mimic what we did in the demo app multiTracker
<a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/multi-tracker/app/src/main/java/com/google/android/gms/samples/vision/face/multitracker/MultiTrackerActivity.java"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vision/blob/master/visionSamples/multi-tracker/app/src/main/java/com/google/android/gms/samples/vision/face/multitracker/MultiTrackerActivity.java</a></p>
",1750600,,,,,2017-04-12 0:03:06,,,,0,,,
Android,33913141,2,,33912631,2015,,1,,"<p>The test/ folder will contain unit testing code that runs on your system's JVM. This is the same as plain java unit testing, so any classes that don't touch the Android framework would work great here.</p>

<p>The androidTest/ folder will contain instrumentation tests instead - these require a device or emulator to run. Things you'd test with it are Activities, Services, Providers, etc.</p>

<p>For examples on both, you can refer to the documentation:</p>

<ul>
<li><a href=""https://github.com/googlesamples/android-testing"" rel=""nofollow"">https://github.com/googlesamples/android-testing</a></li>
<li><a href=""https://google.github.io/android-testing-support-library/samples/index.html"" rel=""nofollow"">https://google.github.io/android-testing-support-library/samples/index.html</a></li>
</ul>
",643516,,,,,2015-11-25 9:45:15,,,,0,,,
Android,33936515,2,,31943963,2015,,1,,"<p>As fadden said, Maybe there is a race condition that causes ""setPreviewTexture failed"". Finnaly I find a solution from google camera2 sample code here : <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java</a>.  It uses ""Semaphore"" to solve the problem. </p>
",5168616,,,,,2015-11-26 10:41:51,,,,0,,,
Android,52011770,2,,47529737,2018,,1,,"<p>I was also getting</p>

<blockquote>
  <p>VariantInputs initialized with no merged manifest report on: DEFAULT.</p>
</blockquote>

<p>Then I followed exactly what is outlined in the <a href=""https://github.com/googlesamples/android-testing-templates/tree/master/AndroidTestingBlueprint"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-testing-templates/tree/master/AndroidTestingBlueprint</a></p>

<p>The error went away when I <strong>removed <code>release</code> buildType from the `buildTypes' block</strong> in the test module's Gradle file.
From this:</p>

<pre><code>buildTypes {
    release {
        minifyEnabled false
        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
    }
}
</code></pre>

<p>to</p>

<pre><code>buildTypes {
}
</code></pre>
",2196906,,2196906,,2018-08-24 21:19:52,2018-08-24 21:19:52,,,,2,,,
Android,43602828,2,,43602188,2017,,1,,"<p><code>getPurchases</code> needs an Integer that is representing the InApp Billing API. So your call</p>

<pre><code>Bundle ownedItems = mService.getPurchases(6, getPackageName(), ""inapp"", null);
</code></pre>

<p>must be handling the api version. If you developing InApp Billing version 3, it must be:</p>

<pre><code>Bundle ownedItems = mService.getPurchases(3, getPackageName(), ""inapp"", null);
</code></pre>

<p>Like described in API:</p>

<p><strong>Pass the In-app Billing API version (3), the package name of your calling app, and the purchase type (inapp or ""subs"") into the method. Here is an example:</strong></p>

<p><code>Bundle ownedItems = mService.getPurchases(3, getPackageName(), ""inapp"", null)</code>;</p>

<p>I wonder why it works, anyway I dont think that this is causing the problem.</p>

<p>The next thing is, the <code>getPurchases()</code> returns only not consumed items. If your items are consumed, it will not return these. Thats why history returns it. Like described in API:</p>

<pre><code>getPurchases()
</code></pre>

<p><strong>This method returns the current un-consumed products owned by the user, including both purchased items and items acquired by redeeming a promo code.</strong> </p>

<pre><code>getPurchaseHistory()
</code></pre>

<p><strong>This method returns the most recent purchase made by the user for each SKU, even if that purchase is expired, canceled, or consumed.</strong></p>

<p>My experience with inApp Billing is that this is a huge pain as it is not possible to test every cirumstances through a test account. It seems like a not finished part of android. But we have no other choice to follow exact the api, so I recommend to do it exactly like described.</p>

<p>API and Source Codes:</p>

<p><a href=""https://developer.android.com/google/play/billing/billing_integrate.html"" rel=""nofollow noreferrer"">https://developer.android.com/google/play/billing/billing_integrate.html</a></p>

<p><a href=""https://developer.android.com/google/play/billing/billing_reference.html"" rel=""nofollow noreferrer"">https://developer.android.com/google/play/billing/billing_reference.html</a></p>

<p><a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/aidl/com/android/vending/billing/IInAppBillingService.aidl"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/aidl/com/android/vending/billing/IInAppBillingService.aidl</a></p>
",1538986,,1538986,,2017-04-25 6:13:51,2017-04-25 6:13:51,,,,0,,,
Android,34156916,2,,33208014,2015,,1,,"<blockquote>
  <p>Android Studio display error at ""user"" and ""system"". I don't understand this error what does this mean.</p>
</blockquote>

<p>I guess, you don't have previously declared these variables.</p>

<p>I don't see any logs or whole code of this testing class, so I can only recommend you to check this <a href=""https://github.com/appoll/Espresso21/blob/95fa0f4806053af1ce09ecf9284d0f8af1ac0d80/app/src/androidTest/java/enough/paul/espresso21/ChooserIntent.java"" rel=""nofollow"">example</a></p>

<p>Here you would find all methods which you're looking for in one file.</p>

<p>Also please visit <a href=""https://github.com/googlesamples/android-testing/tree/master/ui/espresso"" rel=""nofollow"">Google Samples - Espresso Testing repository</a></p>
",4730812,,,,,2015-12-08 13:16:53,,,,0,,,
Android,43615569,2,,43535937,2017,,1,,"<p>I think it's an architecture subject. Rx is out of subject. For example for a repository, Rx is just a way to implement it, and by extension, its cache.</p>

<p>A Google repository provide some samples of architecture. One of them contains an example of architecture with a basic mvp, and a repository who manage cache :</p>

<p><a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp/"" rel=""nofollow noreferrer"">googlesamples/android-architecture/todo-mvp</a></p>

<p>Another example in the same repository with Rx :</p>

<p><a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-rxjava/"" rel=""nofollow noreferrer"">googlesamples/android-architecture/todo-mvp-rxjava</a></p>

<p>We can be seen here that these two examples share the same scheme of architecture :</p>

<p><a href=""https://i.stack.imgur.com/K27jv.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/K27jv.png"" alt=""enter image description here""></a></p>
",5581663,,,,,2017-04-25 15:55:58,,,,3,,,
Android,52220355,2,,52219302,2018,,1,,"<p>You can take a look at the <a href=""https://github.com/googlesamples/android-dynamic-features"" rel=""nofollow noreferrer"">dynamic features sample on GitHub</a>.</p>

<p>The sample uses a <code>BaseSplitActivity</code> which overrides <code>onAttachBaseContext</code> like this:</p>

<pre><code>override fun attachBaseContext(newBase: Context?) {
    super.attachBaseContext(newBase)
    SplitCompat.install(this)
}
</code></pre>

<p>This makes sure that the newly downloaded split is properly installed when the activity launches.</p>

<p>In case of assets you'll have to create a new package context <a href=""https://github.com/googlesamples/android-dynamic-features/blob/master/app/src/main/java/com/google/android/samples/dynamicfeatures/MainActivity.kt#L151"" rel=""nofollow noreferrer"">like this</a></p>

<pre><code>private fun displayAssets() {
    // Get the asset manager with a refreshed context, to access content of newly installed apk.
    val assetManager = createPackageContext(packageName, 0).assets
    // Now treat it like any other asset file.
    val assets = assetManager.open(""assets.txt"")
    // ...
}
</code></pre>
",422060,,,,,2018-09-07 10:14:17,,,,2,,,
Android,33998245,2,,33998202,2015,,1,,"<p>Google provides the <a href=""https://developers.google.com/vision/"" rel=""nofollow"">Mobile Vision API</a> that helps with facial processing. You can read more about the facial processing features <a href=""https://developers.google.com/vision/face-detection-concepts"" rel=""nofollow"">here</a>.</p>

<p>If you want a sample application using that API you can look <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker"" rel=""nofollow"">here</a>.</p>
",3238659,,,,,2015-11-30 12:04:23,,,,0,,,
Android,28201586,2,,28200818,2015,,1,,"<p>Play Services has a Low Consumption location API. You can found more info in <a href=""https://developer.android.com/training/location/receive-location-updates.html"" rel=""nofollow"">Android Developer Site</a></p>

<p><strong>UPDATE</strong></p>

<p><a href=""https://github.com/googlesamples/android-play-location"" rel=""nofollow"">Here</a> you can found a example of Play Location Service stored in Github. Look the <a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationUpdates"" rel=""nofollow"">LocationUpdates</a> example.</p>

<p>When you setup you Location Request you can change the priority, see more info <a href=""https://developer.android.com/training/location/receive-location-updates.html#location-request"" rel=""nofollow"">here</a>. I think that you use <code>PRIORITY_BALANCED_POWER_ACCURACY</code></p>
",766654,,766654,,2015-01-29 14:07:32,2015-01-29 14:07:32,,,,5,,,
Android,43615180,2,,43258773,2017,,1,,"<p>IMHO, it's better to consider a Contentprovider as a datasource, although the data can be stored in several ways (SQLite database, files, ...), to keep some independence between the architecture and the Android framework.</p>

<p>A Google repository provide some samples of architecture. One of them contains an example of architecture with a content provider and a repository :</p>

<p><a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-contentproviders/"" rel=""nofollow noreferrer"" title=""googlesamples/android-architecture/todo-mvp-contentproviders"">googlesamples/android-architecture/todo-mvp-contentproviders</a></p>

<p>Selected excerpts :</p>

<blockquote>
  <p>You could then use content providers to support additional features that are not covered by this sample, providing the following possible benefits:</p>
  
  <ul>
  <li>Allow you to securely share data stored in your app with other apps.</li>
  <li>Add support for custom searches in your app.</li>
  <li>Develop widgets which access data in your app.</li>
  </ul>
</blockquote>

<p><a href=""https://i.stack.imgur.com/Iwg9u.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/Iwg9u.png"" alt=""architecture todo-mvp-contentproviders""></a></p>
",5581663,,,,,2017-04-25 15:38:09,,,,0,,,
Android,38225916,2,,38225563,2016,,1,,"<p>This is a feature called <strong>GeoFencing</strong>.</p>

<p>Check the link for sample:</p>

<p><a href=""https://github.com/googlesamples/android-Geofencing"" rel=""nofollow"">https://github.com/googlesamples/android-Geofencing</a></p>

<p>Check google docs and guides for more info:</p>

<p><a href=""https://developers.google.com/android/reference/com/google/android/gms/location/Geofence"" rel=""nofollow"">https://developers.google.com/android/reference/com/google/android/gms/location/Geofence</a></p>

<p><a href=""https://developer.android.com/training/location/geofencing.html"" rel=""nofollow"">https://developer.android.com/training/location/geofencing.html</a></p>
",3582305,,,,,2016-07-06 14:00:19,,,,0,,,
Android,47360988,2,,41926094,2017,,1,,"<p>There are two places where you may want to do those settings:</p>

<p> If you want to do it before the preview starts, then the better place would be inside of the overrided method onConfigured within the createCameraPreviewSession() void (line 696 in the <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"" rel=""nofollow noreferrer"">Camera2BasicFragment</a> file provided in the Google's <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">Camera2Basic</a> sample:</p>

<pre><code>private void createCameraPreviewSession() {
    try {
        SurfaceTexture texture = mTextureView.getSurfaceTexture();
        assert texture != null;

        // We configure the size of default buffer to be the size of camera preview we want.
        texture.setDefaultBufferSize(mPreviewSize.getWidth(), mPreviewSize.getHeight());

        // This is the output Surface we need to start preview.
        Surface surface = new Surface(texture);

        // We set up a CaptureRequest.Builder with the output Surface.
        mPreviewRequestBuilder
                = mCameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_PREVIEW);
        mPreviewRequestBuilder.addTarget(surface);

        // Here, we create a CameraCaptureSession for camera preview.
        mCameraDevice.createCaptureSession(Arrays.asList(surface, mImageReader.getSurface()),
                new CameraCaptureSession.StateCallback() {

                    @Override
                    public void onConfigured(@NonNull CameraCaptureSession cameraCaptureSession) {
                        // The camera is already closed
                        if (null == mCameraDevice) {
                            return;
                        }

                        // When the session is ready, we start displaying the preview.
                        mCaptureSession = cameraCaptureSession;
                        try {


                            //Place here your custom camera settings


                            // Start displaying the camera preview.
                            mPreviewRequest = mPreviewRequestBuilder.build();
                            mCaptureSession.setRepeatingRequest(mPreviewRequest,
                                    mCaptureCallback, mBackgroundHandler);
                        } catch (CameraAccessException e) {
                            e.printStackTrace();
                        }
                    }

                    @Override
                    public void onConfigureFailed(
                            @NonNull CameraCaptureSession cameraCaptureSession) {
                        showToast(""Failed"");
                    }
                }, null
        );
    } catch (CameraAccessException e) {
        e.printStackTrace();
    }
}
</code></pre>

<p> If you want to do the settings after the preview has started and in runtime just call your <em>disableAutomatics()</em> from the UI or anywhere else and it should work fine.</p>

<p>Note that you don't have to close the older <em>CaptureSession</em> by calling its <em>CaptureSession.close()</em> method as explained in an answer to <a href=""https://stackoverflow.com/questions/35620400/changing-flash-setting-of-android-camera-2-at-runtime"">this other question</a> because the new replaces the older one.</p>

<hr>

<p>However I am not sure about setting the exposure time value manually as you did in your question</p>

<blockquote>
  <p>mPreviewRequestBuilder.set(CaptureRequest.SENSOR_EXPOSURE_TIME, 1000000L);</p>
</blockquote>

<p>because you may get unexpected results. What I know is that doing so is usually discouraged and it's preferred instead to let the camera adjust by its own and then call AE (auto-exposure) lock:</p>

<pre><code>mPreviewRequestBuilder.set(CaptureRequestCONTROL_AE_LOCK, true);
</code></pre>

<p>You can check the CONTROL_AE_LOCK reference <a href=""https://developer.android.com/reference/android/hardware/camera2/CaptureRequest.html#CONTROL_AE_MODE"" rel=""nofollow noreferrer"">here</a>.</p>

<p>But if your code needs a fixed exposure time then it should work.</p>
",7287236,,,,,2017-11-17 23:55:00,,,,0,,,
Android,37905903,2,,37905811,2016,,1,,"<p>This question is discussed many times. As I know, you can't do it automatically from Android 4.0.3. If you are using Android 2+, did you add following line to AndroidManifest.</p>

<pre><code>&lt;uses-permission android:name=""android.permission.ACCESS_FINE_LOCATION"" /&gt;
</code></pre>

<p>There is a different approach. That is use Google Settings API. </p>

<pre><code>com.google.android.gms:play-services:8.1.0
</code></pre>

<p>Check <a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationSettings"" rel=""nofollow noreferrer"">Google Samples</a></p>

<p>Check <a href=""https://stackoverflow.com/questions/4721449/how-can-i-enable-or-disable-the-gps-programmatically-on-android"">this</a> question as well.</p>
",982677,,-1,,2017-05-23 12:31:49,2016-06-19 9:48:33,,,,0,,,
Android,47414698,2,,46391543,2017,,1,,"<p>You are referring to the old Google Play Billing library (v3), which if you really want to implement you can find it as part of the TrivialDrive demo app below. You can copy parts that you need (aidl, util) and change your app as per demo sample.<br/>
<a href=""https://github.com/googlesamples/android-play-billing/tree/master/TrivialDrive"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-billing/tree/master/TrivialDrive</a></p>

<p>~~~</p>

<p>The new version of Play Billing library v1.0 is covered by Garbriele Mariotti's answer (above). If you happen to use a platform that doesn't support Maven, Gradle or AARs I will be making it available soon (UPDAT to follow) as an Eclipse based project that you may be able to import into your IDE the same way you wanted to import the old library downloaded through SDK Manager (which probably doesn't include it anymore as they dev team doens't want you to use it anymore).</p>

<p>If you just want to download it and look at it, you can download it from here: <br/>
<a href=""https://google.bintray.com/play-billing/com/android/billingclient/billing/1.0/"" rel=""nofollow noreferrer"">https://google.bintray.com/play-billing/com/android/billingclient/billing/1.0/</a></p>

<p>~~~</p>

<p>Google Play Billing 1.0 library for Eclipse available from here:<br/>
<a href=""https://github.com/dandar3/android-google-services-billing/tree/1.0"" rel=""nofollow noreferrer"">https://github.com/dandar3/android-google-services-billing/tree/1.0</a></p>
",308836,,308836,,2017-11-28 22:26:39,2017-11-28 22:26:39,,,,0,,,
Android,43421865,2,,41766196,2017,,1,,"<p>It is not related with the SurfaceView at all. It is a Camera API misconfiguration. You will have to make some additional changes inside your CameraSource.java file.
You can find it on <a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java"" rel=""nofollow noreferrer"">this GitHub repository</a></p>

<p>First, you need to know that it is an Exposure Problem. It refers to the light the camera allows to receive on the lens. You need to know if your Camera supports Exposure Compensation. You will have to query <a href=""https://developer.android.com/reference/android/hardware/Camera.Parameters.html#getMinExposureCompensation()"" rel=""nofollow noreferrer"">getMinExposureCompensation()</a> and <a href=""https://developer.android.com/reference/android/hardware/Camera.Parameters.html#getMaxExposureCompensation()"" rel=""nofollow noreferrer"">getMaxExposureCompensation()</a> from your Camera.Parameters instance. As the documentation explains, if both methods return 0, exposure compensation is not supported and there's nothing you can do.</p>

<p>Luckily most of the time this characteristic is supported by all phones. Now you can check the current camera exposure by calling <a href=""https://developer.android.com/reference/android/hardware/Camera.Parameters.html#getExposureCompensation()"" rel=""nofollow noreferrer"">getExposureCompensation()</a> which will return the default value (usually 0, which means exposure is not adjusted). Now <strong>to prevent dark images</strong>, you only have to set your new exposure between the min and max values using <a href=""https://developer.android.com/reference/android/hardware/Camera.Parameters.html#setExposureCompensation(int)"" rel=""nofollow noreferrer"">setExposureCompensation()</a> and apply the Camera.Parameters to your camera.</p>

<p>Finally, you can Lock the Exposure to avoid losing the configuration using <a href=""https://developer.android.com/reference/android/hardware/Camera.Parameters.html#setAutoExposureLock(boolean)"" rel=""nofollow noreferrer"">setAutoExposureLock()</a>, <a href=""https://developer.android.com/reference/android/hardware/Camera.Parameters.html#getAutoExposureLock()"" rel=""nofollow noreferrer"">getAutoExposureLock()</a> and most important: before setting the Exposure Lock you must be sure that <a href=""https://developer.android.com/reference/android/hardware/Camera.Parameters.html#isAutoExposureLockSupported()"" rel=""nofollow noreferrer"">isAutoExposureLockSupported()</a> returned true.</p>

<p>Good Luck!</p>
",4612755,,,,,2017-04-15 3:23:53,,,,0,,,
Android,42366771,2,,42366276,2017,,1,,"<blockquote>
  <p>just for recording video with its preview which can be saved into sd
  card</p>
</blockquote>

<p>If thats all you want you can simply use:</p>

<pre><code>static final int REQUEST_VIDEO_CAPTURE = 1;

Intent takeVideoIntent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);
if (takeVideoIntent.resolveActivity(getPackageManager()) != null) {
     startActivityForResult(takeVideoIntent, REQUEST_VIDEO_CAPTURE);
}
</code></pre>

<p><a href=""https://developer.android.com/training/camera/videobasics.html"" rel=""nofollow noreferrer"">Source</a></p>

<hr>

<p>If you want to implement that yourself with the help of camera2. I would suggest to have a look at the sourcecode of <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">googlesamples/android-Camera2Basic</a></p>

<p>Espacially at <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"" rel=""nofollow noreferrer"">Camera2BasicFragment.java</a></p>
",5183341,,,,,2017-02-21 12:01:27,,,,7,,,
Android,43430331,2,,43381177,2017,,1,,"<p>I figured it out! Here are the Google docs I followed...</p>

<p><a href=""https://developer.android.com/wear/preview/features/standalone-apps.html"" rel=""nofollow noreferrer"">https://developer.android.com/wear/preview/features/standalone-apps.html</a></p>

<p>Sample: <a href=""https://github.com/googlesamples/android-WearVerifyRemoteApp"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-WearVerifyRemoteApp</a></p>
",3995465,,,,,2017-04-15 19:26:22,,,,0,,,
Android,43502439,2,,43467964,2017,,1,,"<p>Use gradle <code>connectedCheck</code> command
You can find an example app here from google</p>

<p><a href=""https://github.com/googlesamples/android-testing-templates/tree/master/AndroidTestingBlueprint"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-testing-templates/tree/master/AndroidTestingBlueprint</a></p>

<p>There you can also read how to run the example tests on multiple devices from the command line / terminal, or from within Android Studio</p>

<p>You can also take a look at Spoon if you want to use an external tool plugin:
<a href=""https://github.com/square/spoon"" rel=""nofollow noreferrer"">https://github.com/square/spoon</a></p>

<p>good luck</p>
",3549911,,,,,2017-04-19 17:31:53,,,,3,,,
Android,43524437,2,,43361706,2017,,1,,"<p>The simple answer is: You can't.</p>

<p>Why? Android camera output frames in NV21 ByteBuffer. And you must generate your masks based on the landmarks points in a separated Bitmap, then join them.
Sorry but, that's how the Android Camera API work. Nothing can be done. You must do it manually.</p>

<p>Also, I wouldn't get the camera preview then convert it to YuvImage then to Bitmap. That process consumes <strong>a lot</strong> of resources and makes preview <strong>very very slow</strong>. Instead I would use this method which will be a lot faster and rotates your preview internally so you don't loose time doing it:</p>

<pre><code>outputFrame = new Frame.Builder().setImageData(mPendingFrameData, mPreviewSize.getWidth(), mPreviewSize.getHeight(), ImageFormat.NV21)
              .setId(mPendingFrameId)
              .setTimestampMillis(mPendingTimeMillis)
              .setRotation(mRotation)
              .build();
mDetector.receiveFrame(outputFrame);
</code></pre>

<p>All the code can be found in <a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java"" rel=""nofollow noreferrer"">CameraSource.java</a></p>
",4612755,,,,,2017-04-20 15:55:43,,,,0,,,
Android,52200027,2,,52193684,2018,,1,,"<p>MVP pattern in Android suggests that your View classes (Fragments, Activities) don't contain any presentation or business logic, but all logic is delegated to a Presenter class. The Presenter in turn calls usually <code>void</code> methods provided by the View when the View is initialised, an event occurs, or the View is destroyed. </p>

<p>So imagine a View and a Presenter implementing the following interfaces:</p>

<pre><code>public interface Contract {

    interface View {

        void initView();

        void setTextColor();

    }

    interface Presenter {

        void init();

        void onButtonClicked();

    }
} 
</code></pre>

<p>In our simplistic example the View would initialise the Presenter (dependency injection is out of scope of this post) and then call Presenter's <code>initView</code> method. The Presenter would be responsible for all initialisation logic like fetching data from network / storage and, if need be, update the View. When in turn the user clicks a button the View would delegate action to the Presenter by calling Presenter's <code>onButtonClicked()</code> method. The Presenter can do some processing and depending on the outcome maybe call View's <code>setTextColor()</code> method.</p>

<p>The most important reason for using MVP is to be able to test your logic with Junit and a mocking framework like Mockito. Your Presenter should be written in pure Java or Kotlin without any dependencies on the Android framework library. Then you can just test your Presenter by using the JVM and not having to hook up a device. This is all part of uncle Bob's <a href=""https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html"" rel=""nofollow noreferrer"">clean architecture guidelines</a>. </p>

<p>The two best resources for MVP are the Antonio Leiva's blog <a href=""https://antonioleiva.com/mvp-android/"" rel=""nofollow noreferrer"">post</a> and Google's architecture samples in <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">github</a> </p>
",2583402,,,,,2018-09-06 8:44:22,,,,0,,,
Android,34112071,2,,34111186,2015,,1,,"<p>Once you detect the event you are interested in on the wear side, you need to send a message to your phone app (using <a href=""https://developers.google.com/android/reference/com/google/android/gms/wearable/MessageApi"" rel=""nofollow"">MessageApi</a>) and then you need to have an implementation of <a href=""https://developers.google.com/android/reference/com/google/android/gms/wearable/WearableListenerService?hl=en"" rel=""nofollow"">WearableListenerService</a> on your phone app that can capture that message and trigger whatever you are interested in.</p>

<p>To send a message to your phone, you should use the <a href=""http://developer.android.com/training/wearables/data-layer/messages.html"" rel=""nofollow"">CapabilityApi</a>; basically your phone app should declare that it provides, say, ""alarm_capability"" (or whatever you want to call it) and then your wear, upon detecting the appropriate event, can ask the framework for the connected nodes that provide ""alarm_capability"". Framework will return the node corresponding to your phone and then you can simply use the <a href=""https://developers.google.com/android/reference/com/google/android/gms/wearable/MessageApi"" rel=""nofollow"">MessageApi</a> to send a message to that node.</p>

<p>All of this is pretty straightforward to do and there are a number of <a href=""https://github.com/googlesamples"" rel=""nofollow"">samples</a> on our GitHub repo that accomplish similar things (for example, <a href=""https://github.com/googlesamples/android-FindMyPhone"" rel=""nofollow"">FindMyPhone</a> is pretty close to what you want). You can look a those samples and also read bout the APIs and give it a try. An alternate approach is to use a library that simplifies these steps, for example you can use <a href=""https://github.com/googlesamples/android-WearCompanionLibrary"" rel=""nofollow"">WearCompanionLibrary</a>.</p>
",2765813,,,,,2015-12-05 23:14:50,,,,1,,,
Android,33993778,2,,33993577,2015,,1,,"<p>You can check this source:
<a href=""https://github.com/googlesamples/android-Camera2Raw"" rel=""nofollow"">Camera2Raw</a></p>
",1082692,,,,,2015-11-30 7:52:56,,,,1,,,
Android,52442239,2,,52441736,2018,,1,,"<p>Your issue is that <code>SeedDatabaseWorker</code> is still based on <strong><code>Worker()</code></strong> which is deprecated now, so you need to use <strong><code>Worker(Context, WorkerParameters)</code></strong> this constructor.</p>

<p>Check my answer from <a href=""https://stackoverflow.com/a/52432391/10271334"">another post</a>, it'll help you understand <code>WorkManager</code> library.</p>

<h2>Edit :</h2>

<p>You can now check <a href=""https://github.com/googlesamples/android-sunflower/blob/master/app/src/main/java/com/google/samples/apps/sunflower/workers/SeedDatabaseWorker.kt"" rel=""nofollow noreferrer"">Worker</a> from that Sunflower demo, it's updated.</p>
",10271334,,,,,2018-09-21 10:57:00,,,,4,,,
Android,52467435,2,,52467319,2018,,1,,"<p>Have a MutableLiveData</p>

<pre><code>final MutableLiveData&lt;List&lt;Ipe&gt;&gt; data = new MutableLiveData&lt;&gt;();
</code></pre>

<p>In onSucess</p>

<pre><code> public MutableLiveData&lt;List&lt;Ipe&gt;&gt; getStaticIps() {
   ipInterface= ApiConnection.getClient().create(IpStaticInterface.class);
   ipInterface.getIpes()
        .subscribeOn(Schedulers.io())
        .observeOn(AndroidSchedulers.mainThread())
        .subscribeWith(new SingleObserver&lt;IpStaticList&gt;() {
            @Override
            public void onSubscribe(Disposable d) {

            }

            @Override
            public void onSuccess(IpStaticList ipStaticList) {
                List&lt;Ipe&gt;ips=ipStaticList.getIpes();
                data.setValue(ips);
            }

            @Override
            public void onError(Throwable e) {
                Log.v(""this"",""Eror ""+ e.getMessage());
            }
        });
        return data;
  }
</code></pre>

<p>In repository expose this to viewmodel</p>

<pre><code> public LiveData&lt;List&lt;Ipe&gt;&gt; getIpStatics() {
 return repository.getStaticIps();
 }
</code></pre>

<p>In Activity you observe the livedata</p>

<pre><code> IpStaticViewModel viewmodel = ViewModelProviders.of(this
            .get(IpStaticViewModel.class)
  viewModel.getIpStatics().observe(this, new Observer&lt;List&lt;Ipe&gt;&gt;() {
        @Override
        public void onChanged(@Nullable List&lt;Ipe&gt; ipes) {
            if (ipes != null) {
                 // dosomething
            }
        }
    });
</code></pre>

<p>If you want to generalize your response in case you have a error or something have a look at <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/vo/Resource.kt"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/vo/Resource.kt</a></p>
",653856,,,,,2018-09-23 15:10:27,,,,0,,,
Android,34902758,2,,34902230,2016,,1,,"<p>Check out this <a href=""https://developers.google.com/fit/android/history#read_data"" rel=""nofollow"">official documentation</a> from Google on how to read the data from Fit:</p>

<pre><code>// Setting a start and end date using a range of 1 week before this moment.
Calendar cal = Calendar.getInstance();
Date now = new Date();
cal.setTime(now);
long endTime = cal.getTimeInMillis();
cal.add(Calendar.WEEK_OF_YEAR, -1);
long startTime = cal.getTimeInMillis();

java.text.DateFormat dateFormat = getDateInstance();
Log.i(TAG, ""Range Start: "" + dateFormat.format(startTime));
Log.i(TAG, ""Range End: "" + dateFormat.format(endTime));

DataReadRequest readRequest = new DataReadRequest.Builder()
        // The data request can specify multiple data types to return, effectively
        // combining multiple data queries into one call.
        // In this example, it's very unlikely that the request is for several hundred
        // datapoints each consisting of a few steps and a timestamp.  The more likely
        // scenario is wanting to see how many steps were walked per day, for 7 days.
        .aggregate(DataType.TYPE_STEP_COUNT_DELTA, DataType.AGGREGATE_STEP_COUNT_DELTA)
        // Analogous to a ""Group By"" in SQL, defines how data should be aggregated.
        // bucketByTime allows for a time span, whereas bucketBySession would allow
        // bucketing by ""sessions"", which would need to be defined in code.
        .bucketByTime(1, TimeUnit.DAYS)
        .setTimeRange(startTime, endTime, TimeUnit.MILLISECONDS)
        .build();
</code></pre>

<p><strong>History API Sample app on GitHub:</strong></p>

<p>Check the sample project on GitHub <a href=""https://github.com/googlesamples/android-fit/tree/master/BasicHistoryApi"" rel=""nofollow"">here</a>.</p>

<p>Direct link to <code>MainActivity.java</code> (in the above sample project) containing the required code: <a href=""https://github.com/googlesamples/android-fit/blob/master/BasicHistoryApi/app/src/main/java/com/google/android/gms/fit/samples/basichistoryapi/MainActivity.java"" rel=""nofollow"">Link</a></p>
",1957401,,1957401,,2016-01-20 15:42:22,2016-01-20 15:42:22,,,,4,,,
Android,44495913,2,,44485631,2017,,1,,"<p>It turned out to be a bug on the library
<a href=""https://github.com/googlesamples/android-architecture-components/issues/49"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components/issues/49</a></p>
",6801380,,,,,2017-06-12 9:27:06,,,,0,,,
Android,44099595,2,,44096913,2017,,1,,"<p>Use CMakelists to include and build your code into a shared library.  <a href=""https://developer.android.com/studio/projects/add-native-code.html"" rel=""nofollow noreferrer"">https://developer.android.com/studio/projects/add-native-code.html</a></p>

<p>Specifically, use CMakeLists in your GameCode/ and Android_Core/ directories, and a CMakeList in your root that calls 'add_subdirectory' for those two dirs.</p>

<p>That's the easy part.  Really, what you want is a native_activity example that draws to the screen using OpenGL ES 2+ : <a href=""https://github.com/googlesamples/android-ndk/tree/master/hello-gl2"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk/tree/master/hello-gl2</a></p>

<p>I would even go as far as recommending using the nVidia tools: <a href=""https://github.com/PolygonTek/BlueshiftEngine/tree/master/Engine/Source/Dependencies/nvidia"" rel=""nofollow noreferrer"">https://github.com/PolygonTek/BlueshiftEngine/tree/master/Engine/Source/Dependencies/nvidia</a> , escpecially the nv_file and nv_egl utilities. </p>
",7949696,,,,,2017-05-21 17:08:21,,,,0,,,
Android,35678286,2,,35678157,2016,,1,,"<p>You can view Android Navigation Drawer Sample by Google:
<a href=""https://github.com/googlesamples/android-NavigationDrawer"" rel=""nofollow"">https://github.com/googlesamples/android-NavigationDrawer</a></p>
",5652770,,,,,2016-02-28 3:16:14,,,,0,,,
Android,53276685,2,,53274574,2018,,1,,"<p>Your start is like you need.</p>

<pre><code>FusedLocationProviderClient fusedLocationProviderClient; //Global variable
fusedLocationProviderClient = LocationServices.getFusedLocationProviderClient(this); //initiate in onCreate
</code></pre>

<p>For getting location from another app as googlemaps you can use <code>mFusedLocationClient.getLastLocation()</code> it have listeners, <code>addOnSuccessListener</code> gives to you location, <code>addOnCompleteListener</code> and <code>task.getResult() == null</code> means that you need to do your own request like <code>mFusedLocationClient.requestLocationUpdates(getLocationRequest(), mLocationCallback, null);</code></p>

<p>and you need to remove your listener for example in onPause like <code>mFusedLocationClient.removeLocationUpdates(mLocationCallback)</code></p>

<p>you can look this examples <a href=""https://github.com/googlesamples/android-play-location"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-location</a>
and <a href=""https://developer.android.com/training/location/receive-location-updates?hl=es"" rel=""nofollow noreferrer"">https://developer.android.com/training/location/receive-location-updates?hl=es</a></p>
",7917629,,,,,2018-11-13 8:23:15,,,,2,,,
Android,46226877,2,,24118042,2017,,1,,"<p>Using this Google sample <a href=""https://github.com/googlesamples/android-CardEmulation"" rel=""nofollow noreferrer"">project</a>, I tried to add the suggestions by @Michael Roland (eg. adding android:apduServiceBanner, category and description).</p>

<p>As a result, the graphic shows up in the Tap and Pay Settings screen, but not the text. 
I logged an issue with the sample project, but do not expect any resolution.</p>

<p>The current workaround is to create a apduServiceBanner drawable that has the text built into the drawable.</p>
",923920,,2425802,,2018-04-10 22:06:29,2018-04-10 22:06:29,,,,0,,,
Android,45133332,2,,45132697,2017,,1,,"<blockquote>
  <p>What is the best approach to implement a service which executes every
  15 mins.</p>
</blockquote>

<p>Using the Job Scheduler. Information on job scheduling can be found at the <a href=""https://developer.android.com/topic/performance/scheduling.html"" rel=""nofollow noreferrer"">Intelligent Job-Scheduling documentation</a>. However, be aware that you can't be 100% sure that your service is going to run exactly every 15 minutes as its execution can be affected by the Doze mode and its <a href=""https://developer.android.com/training/monitoring-device-state/doze-standby.html#restrictions"" rel=""nofollow noreferrer"">restrictions</a>.</p>

<p>For the notification part, you <a href=""https://developer.android.com/training/notify-user/build-notification.html"" rel=""nofollow noreferrer"">build your notification</a> as you would normally do.</p>

<p>If you need more info, you may view the <a href=""https://www.youtube.com/watch?v=QdINLG5QrJc"" rel=""nofollow noreferrer"">Using the Android Job Scheduler</a> and <a href=""https://www.youtube.com/watch?v=XFN3MrnNhZA"" rel=""nofollow noreferrer"">Background work with JobScheduler</a> videos and check <a href=""https://github.com/googlesamples/android-JobScheduler"" rel=""nofollow noreferrer"">this</a> sample project. Also, one relevant question regarding the repetitive nature of the service can be found <a href=""https://stackoverflow.com/a/39089169"">here</a>.</p>
",6569284,,,,,2017-07-16 21:07:58,,,,1,,,
Android,45155219,2,,45110739,2017,,1,,"<p>There is a difference between being a device owner and a device administrator. You are setting one (device admin) and checking for another (device owner).</p>

<p>A device owner is typically set during device provisioning at the beginning of the Google Wizard. But it may also be set after going through the Google Wizard using the dpm command you mentioned. The dpm command can only set a device owner if there are no accounts on the device. The device owner is restricted when it can be set because of the control it has. A corporate owned device will typically be provisioned with an MDM/EMM as the device owner.</p>

<p>A device administrator is much much more limited in the control it has of a device. But it can be added at any point. Each Android release restricts more and more what a device admin can do ever since Android Enterprise (android for work [AfW]) was released in Lollipop.</p>

<p>The most complete kiosk solution will set a device up with an app as the device owner. Other solutions I've seen are using a custom launcher to lock down the device by whitelisting apps, but there are a lot of security holes with this implementation. </p>

<p>Look into the TestDPC app. Google provides source code to it and it will have most, if not everything of what you need. Play around with the control it gives you as a device owner. </p>

<p><a href=""https://developers.google.com/android/work/build-dpc"" rel=""nofollow noreferrer"">https://developers.google.com/android/work/build-dpc</a></p>

<p><a href=""https://github.com/googlesamples/android-testdpc"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-testdpc</a></p>

<p>My guess is that your app is not set up correctly as a device owner nor device admin. Specifically look to see that you have a DeviceAdminReceiver declared with the <code>android:permission=""android.permission.BIND_DEVICE_ADMIN""</code> in the manifest along with an xml resource file containing the policies it may use. More of your source code would help debug the issues you see.</p>
",6917917,,,,,2017-07-17 23:37:51,,,,1,,,
Android,45323407,2,,45307191,2017,,1,,"<p>Take a look at the Camera2Basic example that Google provides on GitHub: <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a></p>

<p>There is a method in the main fragment which chooses the optional preview size for a given device. This may be a better approach if you want to make your app more flexible, rather than hardcoding the size, but even if you would still rather stick with set sizes you can see how they use the results.</p>

<p>The summary is that you simply set the size of the, in their case, TextureView to whatever size preview you want.</p>

<p>The method name is 'chooseOptimalSize' and it includes this comment/explanation: </p>

<pre class=""lang-js prettyprint-override""><code>/**
     * Given {@code choices} of {@code Size}s supported by a camera, choose the smallest one that
     * is at least as large as the respective texture view size, and that is at most as large as the
     * respective max size, and whose aspect ratio matches with the specified value. If such size
     * doesn't exist, choose the largest one that is at most as large as the respective max size,
     * and whose aspect ratio matches with the specified value.
     *
     * @param choices           The list of sizes that the camera supports for the intended output
     *                          class
     * @param textureViewWidth  The width of the texture view relative to sensor coordinate
     * @param textureViewHeight The height of the texture view relative to sensor coordinate
     * @param maxWidth          The maximum width that can be chosen
     * @param maxHeight         The maximum height that can be chosen
     * @param aspectRatio       The aspect ratio
     * @return The optimal {@code Size}, or an arbitrary one if none were big enough
     */
</code></pre>
",334402,,,,,2017-07-26 9:51:54,,,,1,,,
Android,53469484,2,,53469126,2018,,1,,"<p>Your class <code>PlayerLifePoints_Functions</code> cannot use <code>findViewById</code> because it does not have content. Usually activities are started with <a href=""https://developer.android.com/reference/android/content/Intent"" rel=""nofollow noreferrer"">Intents</a> and they inflate a layout by overriding the <a href=""https://developer.android.com/guide/components/activities/intro-activities#oncreate"" rel=""nofollow noreferrer"">onCreate</a> method.</p>

<h1>If you just want to make it work, you can use:</h1>

<pre><code>v.getRootView().findViewById(v.getId()).getId());
</code></pre>

<p>In that case you do not need to extend from <code>AppCompatActivity</code></p>

<h2>Or better just get rid of the class:</h2>

<pre><code>view_lifepoints.setOnClickListener( View.OnClickListener {

  @Override
  public void onClick(View v) {

      TextView textView = (TextView) v;

      String lp = textView.getText().toString();
      int id = textView.getId();
      int playernumber =  Character.getNumericValue(String.valueOf(id).charAt(0));

      Log.d(""Test"", ""ID: "" + findViewById(v.getId()).getId());
  }

);
</code></pre>

<hr>

<p>In general:
I would recommend not putting your whole logic into a view, but more down into a lower layer. Having it in the activity would already be an improvement for prototyping. If your code grows, it may make sense to switch to <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp/"" rel=""nofollow noreferrer"">MVP</a> or <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvvm-live"" rel=""nofollow noreferrer"">MVVM</a>.</p>

<p>Google has some great resources to get you started:
<a href=""https://developer.android.com/guide/components/activities/intro-activities"" rel=""nofollow noreferrer"">https://developer.android.com/guide/components/activities/intro-activities</a>
<a href=""https://developer.android.com/topic/libraries/architecture/"" rel=""nofollow noreferrer"">https://developer.android.com/topic/libraries/architecture/</a></p>
",10702512,,,,,2018-11-25 16:24:07,,,,0,,,
Android,53467081,2,,53459165,2018,,1,,"<ul>
<li><p>For App Engine <strong>Standard</strong> environment:</p>

<p>You can generate a Service Account key file from default service
account. Follow the link <a href=""https://github.com/googlesamples/android-play-publisher-api/tree/master/v3/java"" rel=""nofollow noreferrer"">sample code</a> you provided, then click on
the <a href=""https://console.developers.google.com/"" rel=""nofollow noreferrer"">link</a> shown in the ""Getting Started"" section, you'll get in
the Google Developer Console. If logged in with the correct account
(you should see your project name at the top), then go to Credentials
-> Create credentials -> Service Account key. In the service account dropdown list, choose ""App Engine Default Service Account"", choose
JSON as key type and you should be good to go to follow the last
instructions on the Github <a href=""https://github.com/googlesamples/android-play-publisher-api/tree/master/v3/java#first-request-using-oauth2-service-accounts"" rel=""nofollow noreferrer"">page</a>.</p></li>
<li><p>For App Engine <strong>Flexible</strong> environment:</p>

<p>The default service account isn't listed in the Service Account page, as explained <a href=""https://cloud.google.com/appengine/docs/flexible/python/service-account"" rel=""nofollow noreferrer"">here</a>. You can't generate a service account key with it. You'd need to use a custom service account.</p></li>
</ul>
",4926605,,,,,2018-11-25 11:42:51,,,,1,,,
Android,45383196,2,,42367317,2017,,1,,"<p>In that situation, I think one could be guided by the <strong>tablet MVP example</strong> on GitHub, the <a href=""https://github.com/googlesamples/android-architecture/tree/dev-todo-mvp-tablet/"" rel=""nofollow noreferrer"">Android Architecture Blueprints</a>.</p>

<p><a href=""https://i.stack.imgur.com/6iYHA.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/6iYHA.png"" alt=""MVP tablet mode""></a></p>

<p><strong>Transferred to your case</strong>, your structure could be something like this</p>

<p><a href=""https://i.stack.imgur.com/oYZ9l.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/oYZ9l.jpg"" alt=""MVP diagramm""></a></p>

<p>The views are reporting (e.g who's been checked) to a common Presenter, who is manipulating the views through their particular Presenter.</p>
",5487324,,,,,2017-07-28 22:22:55,,,,0,,,
Android,45374280,2,,45373916,2017,,1,,"<p>Remove the</p>

<pre><code>&lt;uses-feature android:name=""android.hardware.camera2"" android:required=""true"" /&gt;
</code></pre>

<p>The android.hardware.camera is more than enough. </p>

<p>If you look into the camera basic sample you can see they declare only the android.hardware.camera feature.</p>

<p>Google Camera sample
<a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/AndroidManifest.xml"" rel=""nofollow noreferrer"" title=""Google Camera sample"">https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/AndroidManifest.xml</a></p>
",199498,,,,,2017-07-28 13:02:43,,,,1,,,
Android,36285719,2,,36283971,2016,,1,,"<p>You need to modify your build.gradle to specify what C++ library to link to.</p>

<pre><code>android.ndk {
    moduleName = ""hello-jni""
    stl        = ""stlport_static""
}
</code></pre>

<p>See some examples of build.gradle files using the experimental NDK support <a href=""https://github.com/googlesamples/android-ndk/blob/229cbe86238d401bb06166b8dfadec8198532589/hello-thirdparty/app/build.gradle"" rel=""nofollow"">here (hello-thirdparty)</a> and <a href=""https://github.com/googlesamples/android-ndk/blob/0f60ab4b8567a895f80de047f2819fc386e2fd80/endless-tunnel/app/build.gradle"" rel=""nofollow"">here (endless-tunnel)</a>.</p>
",2201317,,,,,2016-03-29 13:27:32,,,,0,,,
Android,36338233,2,,36311874,2016,,1,,"<p>Im working with BLE A&amp;D , to obatin the iformation i use:</p>

<blockquote>
  <p>To find UUID</p>
</blockquote>

<pre><code>  @SuppressLint(""NewApi"")
private void displayGattServicesService(List&lt;BluetoothGattService&gt; gattServices) {
    //  salida.append(""Buscando servicio"");
    if (gattServices == null)
        return;
    for (BluetoothGattService gattService : gattServices) {

        String uuid = gattService.getUuid().toString();

        List&lt;BluetoothGattCharacteristic&gt; gattCharacteristics = gattService
                .getCharacteristics();
        if (uuid.equals(""00001810-0000-1000-8000-00805f9b34fb"")) {
            //  salida.append(""Ecnontro"");
            for (BluetoothGattCharacteristic gattCharacteristic : gattCharacteristics) {
                String uuid1 = gattCharacteristic.getUuid().toString();
                if (uuid1.equals(""00002a35-0000-1000-8000-00805f9b34fb"")) {
                    //     salida.append(""Envio caracterisitca"");
                    mensaje(getResources().getString(R.string.Espere_res));
                    mBluetoothLeService.setCharacteristicNotification(
                            gattCharacteristic, true);
                }
            }
        }
    }
}
</code></pre>

<blockquote>
  <p>To set UUID</p>
</blockquote>

<pre><code>BluetoothLeService.ACTION_GATT_SERVICES_DISCOVERED.equals(action)) {

            // Show all the supported services and characteristics on the user interface.
            displayGattServicesService(mBluetoothLeService.getSupportedGattServices());
</code></pre>

<blockquote>
  <p>Use BleGatt Example <a href=""https://github.com/googlesamples/android-BluetoothLeGatt"" rel=""nofollow"">https://github.com/googlesamples/android-BluetoothLeGatt</a></p>
</blockquote>
",5248230,,,,,2016-03-31 15:56:34,,,,0,,,
Android,46329081,2,,8660646,2017,,1,,"<p>It's possible</p>

<p>Reference:
<a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample/MainActivity.java"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample/MainActivity.java</a></p>

<p>Basically you must cunsume the item to notify Google about this possibility.</p>

<pre><code>if (purchase.getSku().equals(SKU_GAS)) {
                // bought 1/4 tank of gas. So consume it.
                Log.d(TAG, ""Purchase is gas. Starting gas consumption."");
                try {
                    mHelper.consumeAsync(purchase, mConsumeFinishedListener);
                } catch (IabAsyncInProgressException e) {
                    complain(""Error consuming gas. Another async operation in progress."");
                    setWaitScreen(false);
                    return;
                }
            }
</code></pre>

<p>See the documentation about <strong>Consume a purchase</strong></p>

<p><a href=""https://developer.android.com/training/in-app-billing/purchase-iab-products.html#Consume"" rel=""nofollow noreferrer"">https://developer.android.com/training/in-app-billing/purchase-iab-products.html#Consume</a></p>
",3097425,,,,,2017-09-20 18:13:33,,,,0,,,
Android,36368806,2,,36365391,2016,,1,,"<p>You will need the static imports.</p>

<p>The official Google sample code uses static imports. Static imports are standard practice for fluent APIs.</p>

<p><a href=""https://github.com/googlesamples/android-testing-templates/blob/master/AndroidTestingBlueprint/app/src/androidTest/java/com/example/android/testing/blueprint/ui/espresso/EspressoTest.java"" rel=""nofollow"">Sample Espresso Test</a></p>
",1686989,,,,,2016-04-02 3:24:31,,,,0,,,
Android,46374050,2,,46343521,2017,,1,,"<p>Great answer and looking deep by @Kuffs!</p>

<p>Google will fix multiple calls soon: <a href=""https://issuetracker.google.com/issues/66054158"" rel=""nofollow noreferrer"">https://issuetracker.google.com/issues/66054158</a></p>

<p>However, your integration with billing flow should work even when onPurchasesUpdate was triggered multiple times, since it could happen anyway. For example, if somebody was buying in parallel on another device with the same @gmail account. And people in some countries (e.g. Spain) do share their @gmail accounts rather frequently with many friends and family members.</p>

<p>Please, check <a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive_v2/shared-module/src/main/java/com/example/billingmodule/billing/BillingManager.java"" rel=""nofollow noreferrer"">TrivialDrive_v2</a> implementation to get an idea, how handle such situations gracefully.</p>
",1390874,,,,,2017-09-22 22:29:34,,,,1,,,
Android,36401156,2,,36396391,2016,,1,,"<p>I tried your source code, It is working Fine.</p>

<p>You can also refer Source :   </p>

<p><a href=""http://developer.android.com/training/location/receive-location-updates.html#updates"" rel=""nofollow"">Location - developer.android.com</a></p>

<p><a href=""http://developer.android.com/training/location/receive-location-updates.html#updates"" rel=""nofollow"">LocationUpdates - developer.android.com</a></p>

<p><a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationUpdates/app/src/main/java/com/google/android/gms/location/sample/locationupdates/MainActivity.java"" rel=""nofollow"">Sample of location update from developer.android.com</a></p>

<p><a href=""https://github.com/googlesamples/android-play-location/blob/master/BasicLocationSample/app/src/main/java/com/google/android/gms/location/sample/basiclocationsample/MainActivity.java"" rel=""nofollow"">BasicLocationSample from developer.android.com</a></p>
",5993438,,5993438,,2016-04-04 11:27:43,2016-04-04 11:27:43,,,,0,,,
Android,46455651,2,,46362835,2017,,1,,"<p>If you only want to display the modified output, then I'm not sure why you have two outputs configured (the TextureView and the ImageReader).</p>

<p>Generally, if you want something like</p>

<pre><code>camera -&gt; in-app edits -&gt; display
</code></pre>

<p>You have several options, depending on the kinds of edits you want, and various tradeoffs between ease of coding, performance, and so on.</p>

<p>One of the most efficient options is to do your edits as an OpenGL shader.
In that case, a GLSurfaceView is probably the simplest option.
Create a SurfaceTexture object with a texture ID that's unused in the GLSurfaceView's EGL context, and pass a Surface created from the SurfaceTexture to the camera session and requests.
Then in the SurfaceView drawing method, call SurfaceTexture's updateTexImage() method, and then use the texture ID to render your output as you'd like it.</p>

<p>That does require a lot of OpenGL code, so if you're not familiar with it, that can be challenging.</p>

<p>You can also use RenderScript for a similar effect; there you'll have an output SurfaceView or TextureView, and then a RenderScript script that reads from an input Allocation from the Camera and writes to an output Allocation to the View; you can create such Allocations from a Surface.
The Google <a href=""https://github.com/googlesamples/android-HdrViewfinder/"" rel=""nofollow noreferrer"">HdrViewfinderDemo</a> camera2 sample app uses this approach. It's a lot less boilerplate.</p>

<p>Third, you can just use an ImageReader like you're doing now, but you'll have to do a lot of conversion yourself to write it to the screen.  The simplest (but slowest) option is to get a Canvas from a SurfaceView or a ImageView, and just write pixels to it one by one.  Or you can do that via the <a href=""https://developer.android.com/ndk/reference/native__window_8h.html"" rel=""nofollow noreferrer"">ANativeWindow</a> NDK, which is faster but requires writing JNI code and still requires you to do YUV->RGB conversions yourself (or use undocumented APIs to push YUV into the ANativeWindow and hope it works).</p>
",1344825,,,,,2017-09-27 19:17:50,,,,2,,,
Android,53775872,2,,43410175,2018,,1,,"<p>I've declared a method in <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer/blob/master/app/src/main/java/com/example/android/uamp/MediaSessionConnection.kt"" rel=""nofollow noreferrer""><code>MediaSessionConnection</code></a>:</p>

<pre>
<code>
    class MediaSessionConnection(
        val context: Context,
        private val serviceComponent: ComponentName
    ) {
      ...
      fun release() {
        mediaBrowser.disconnect()
        mediaController.sendCommand(""disconnect"", null, null)
      }
      ...
    }
</code>
</pre>

<p>And in <code>MusicService</code>:</p>

<pre>
<code>
    class MusicService : MediaBrowserServiceCompat() {

        override fun onCreate() {
            super.onCreate()
            ...
            mediaSessionConnector = MediaSessionConnector(mediaSession, object : DefaultPlaybackController() {
              override fun onCommand(player: Player?, command: String?, extras: Bundle?, cb: ResultReceiver?) {
                if (command == ""disconnect"") {
                  stopForeground(true)
                  stopSelf()
                }
              }

              override fun getCommands(): Array {
                return arrayOf(""disconnect"")
              }
            })
        }
    }
</code>
</pre>

<p>I do not claim,  that this is the correct way of stopping the service completely, but this is the solution that I've came up to after struggling some hours. </p>

<p>If <code>mediaBrowser.disconnect()</code> is not executed, then <code>stopSelf()</code> won't destroy the service (by telling <em>""destroy the service""</em> I anticipate <code>onDestroy()</code> to be called).</p>

<p>Without explicitly performing <code>stopForeground()</code> and <code>stopSelf()</code> simply performing <code>mediaBrowser.disconnect()</code> wouldn't destroy the service.</p>
",1083957,,1083957,,2018-12-14 11:24:19,2018-12-14 11:24:19,,,,0,,,
Android,46442616,2,,46428090,2017,,1,,"<p>Update Google Play Services on your devices.</p>

<p>Possibly the same problem as here: <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer/issues/97"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-UniversalMusicPlayer/issues/97</a></p>
",2241008,,,,,2017-09-27 8:08:49,,,,3,,,
Android,45203189,2,,45202858,2017,,1,,"<p>You can use the <code>defaultValue</code> field to explain how your app behaves if the property is not explicitly set by the managing app.</p>

<p>The XML file referenced in the manifest is meant to be used by the MDM to display a UI in their console so the IT admin can configure your app. If you set a <code>defaultValue</code> for a property the MDM pre-populates the corresponding field when your app is configured for the first time (e.g. display a checked checkbox for a boolean property that default to <code>true</code>).</p>

<p>For the admin, not configuring your app should be the same as configuring it with the default configuration. Therefore, to be consistent, your app should behave the same way whether a property is unset or set to the <code>defaultValue</code>.</p>

<p>To see how your configuration will look like in an MDM console you can use the <a href=""https://enterprise.google.com/android/experience"" rel=""nofollow noreferrer"">Android Management Experience demo</a>.</p>

<p><strong>Edit: More details on how the restriction schema and <code>defaultValue</code> can be retrieved</strong></p>

<p>The app's restriction schema defined in the XML file can be retrieved either</p>

<ul>
<li>using the <a href=""https://developers.google.com/android/work/play/emm-api/v1/products/getAppRestrictionsSchema"" rel=""nofollow noreferrer"">Google Play EMM API getAppRestrictionsSchema</a> method which returns the <code>defaultValue</code>s for each restriction</li>
<li>or by any app on the device using <a href=""https://developer.android.com/reference/android/content/RestrictionsManager.html#getManifestRestrictions(java.lang.String)"" rel=""nofollow noreferrer"">RestrictionsManager.getManifestRestrictions</a>, where the returned <code>RestrictionEntry</code>s have their values set to the <code>defaultValue</code> if specified in the XML file, or to a generic default value otherwise (<code>0</code> for <code>TYPE_INTEGER</code>, <code>false</code> for <code>TYPE_BOOLEAN</code>, etc). You can read the full logic of this method in AOSP's <a href=""https://android.googlesource.com/platform/frameworks/base/+/marshmallow-release/core/java/android/content/RestrictionsManager.java#597"" rel=""nofollow noreferrer"">RestrictionManager.java</a>, and see how it is used in TestDPC's <a href=""https://github.com/googlesamples/android-testdpc/blob/master/app/src/main/java/com/afwsamples/testdpc/profilepolicy/apprestrictions/ManageAppRestrictionsFragment.java#L339"" rel=""nofollow noreferrer"">ManageAppRestrictionsFragment.java</a>.</li>
</ul>
",4816506,,4816506,,2017-07-20 15:07:13,2017-07-20 15:07:13,,,,3,,,
Android,46493759,2,,46493575,2017,,1,,"<p>You should use <a href=""https://developer.android.com/google/play/billing/billing_reference.html#getPurchaseHistory"" rel=""nofollow noreferrer"">getPurchaseHistory()</a> method.
<a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/aidl/com/android/vending/billing/IInAppBillingService.aidl#L239-L264"" rel=""nofollow noreferrer"">Signature</a> of the method:</p>

<pre><code>Bundle getPurchaseHistory(int apiVersion,
                          String packageName,
                          String type,
                          String continuationToken,
                          Bundle extraParams);
</code></pre>

<p>Your code will look like this:</p>

<pre><code>Bundle purchaseHistoryBundle = service.getPurchaseHistory(6, BuildConfig.APPLICATION_ID, ""subs"", null, new Bundle());
</code></pre>

<p>In addition, <a href=""https://github.com/gorgon"" rel=""nofollow noreferrer"">guy from Google</a> suggests in <a href=""https://github.com/googlesamples/android-play-billing"" rel=""nofollow noreferrer"">that example</a> use <code>queryPurchaseHistoryAsync</code>method:</p>

<blockquote>
  <p>This library also allows to get purchase history even though it's not
  demonstrated inside the sample. Please use <a href=""https://developer.android.com/reference/com/android/billingclient/api/BillingClient.html#queryPurchaseHistoryAsync(java.lang.String,%20com.android.billingclient.api.PurchaseHistoryResponseListener)"" rel=""nofollow noreferrer"">this method</a> to get all
  purchases history (up to 1 record per SKU).</p>
</blockquote>
",3166697,,3166697,,2017-09-29 17:46:11,2017-09-29 17:46:11,,,,0,,,
Android,46479262,2,,44910631,2017,,1,,"<p><a href=""https://github.com/googlesamples/android-play-billing/tree/master/TrivialDrive_v2"" rel=""nofollow noreferrer"">TrivialDrive_v2</a> demonstrates a new way of integration with Google Play Billing.</p>

<p>It's based on the latest release of <a href=""https://developer.android.com/google/play/billing/billing_library.html"" rel=""nofollow noreferrer"">Play Billing library</a> (currently 1.0) and tries to promote the best practices of integration with it.</p>

<p>TrivialDrive sample was kept for those that still use an integration via AIDL file (e.g. C++ developers).</p>
",1390874,,1390874,,2017-09-28 22:44:21,2017-09-28 22:44:21,,,,0,,,
Android,53895953,2,,53895716,2018,,1,,"<p>Yes, you can do that and it is actually the recommended way. In order to do so, I think you should leverage the use of two other Architecture Components that were introduced with Android Jetpack, not only <code>Room</code> database: <a href=""https://developer.android.com/topic/libraries/architecture/viewmodel"" rel=""nofollow noreferrer"">ViewModel</a> and <a href=""https://developer.android.com/topic/libraries/architecture/livedata"" rel=""nofollow noreferrer"">LiveData</a>, but it is not mandatory. </p>

<p>The important thing is to add an extra layer to your app called <code>Repository</code>:</p>

<blockquote>
  <p><strong>Repository</strong> modules handle data operations. They provide a clean API so
  that the rest of the app can retrieve this data easily. They know
  where to get the data from and what API calls to make when data is
  updated. You can consider repositories to be mediators between
  different data sources, such as persistent models, web services, and
  caches.</p>
</blockquote>

<p>So basically, the suggested architecture to handle this will look something like this:</p>

<p><a href=""https://i.stack.imgur.com/VCdAM.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/VCdAM.png"" alt=""Android recommended architecture""></a></p>

<p>With that in mind, an example of a Repository that retrieves User data from a web service and save it to a local Room Database will look something like this:</p>

<pre><code>public class UserRepository {
    private final Webservice webservice;
    private final UserDao userDao;
    private final Executor executor;

    public UserRepository(Webservice webservice, UserDao userDao, Executor executor) {
        this.webservice = webservice;
        this.userDao = userDao;
        this.executor = executor;
    }

    public LiveData&lt;User&gt; getUser(String userId) {
        refreshUser(userId);
        // Returns a LiveData object directly from the database.
        return userDao.load(userId);
    }

    private void refreshUser(final String userId) {
        // Runs in a background thread.
        executor.execute(() -&gt; {
            // Check if user data was fetched recently.
            boolean userExists = userDao.hasUser(FRESH_TIMEOUT);
            if (!userExists) {
                // Refreshes the data.
                Response&lt;User&gt; response = webservice.getUser(userId).execute();

                // Check for errors here.

                // Updates the database. The LiveData object automatically
                // refreshes, so we don't need to do anything else here.
                userDao.save(response.body());
            }
        });
    }
}
</code></pre>

<p>Then, your ViewModel will get the User Live Data doing something like this:</p>

<pre><code>...
user = userRepo.getUser(userId);
...
</code></pre>

<p>And it will provide that LiveData to the UI layer with a public method:</p>

<pre><code>...
public LiveData&lt;User&gt; getUser() {
        return this.user;
}
...
</code></pre>

<p>Finally, from your UI layer (an Activity or Fragment) you can <strong>observe</strong> the LiveData in the ViewModel and adapt the UI accordingly.</p>

<pre><code>viewModel.getUser().observe(this, user -&gt; {
      // Update UI.
});
</code></pre>

<p>For a more complete explanation I suggest that you take a look to:</p>

<ol>
<li><a href=""https://developer.android.com/jetpack/docs/guide"" rel=""nofollow noreferrer"">Guide to app architecture in Android`s Developers website.</a></li>
<li><a href=""https://github.com/googlesamples/android-architecture-components/tree/master/BasicSample"" rel=""nofollow noreferrer"">This Github project with a basic example.</a></li>
<li><a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample"" rel=""nofollow noreferrer"">This other Github project with a more complex example.</a></li>
</ol>
",10648865,,10648865,,2018-12-22 14:34:44,2018-12-22 14:34:44,,,,5,,,
Android,53914543,2,,53797110,2018,,1,,"<p>I had similar problem. You could try to use <a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java"" rel=""nofollow noreferrer"">SingleLiveEvent</a></p>

<p>Or, in my, more complicated case, i had to use custom observer. It would looks like this:</p>

<pre><code>public class CustomObserver implements Observer&lt;YourType&gt; {
    private MyViewModel mViewModel;

    public CustomObserver (){}

    public void setViewModel(MyViewModel model) {
        mViewModel = model;
    }

    @Override
    public void onChanged(@Nullable YourType object) {
        mViewModel.AddTicket(id).removeObserver(this); // removing previous 
        mmViewModel.refreshTickets(); // refreshing Data/UI
        // ... do the job here
        // in your case it`s: dismissLoadingAnimation();
    } 
}
</code></pre>

<p>And using it like: </p>

<pre><code>public void addTicket(View view){

     ticketViewModel.AddTicket(id).observe(this, myCustomObserver);
}
</code></pre>
",9381524,,9381524,,2018-12-24 14:30:44,2018-12-24 14:30:44,,,,0,,,
Android,55000999,2,,54969073,2019,,1,,"<p>This is the expected behaviour. If you want to avoid this you must set <code>message = """"</code> and keep an empty check before showing the toast. </p>

<p>A better way to use it is something like Event Wrapper or <a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java"" rel=""nofollow noreferrer"">SingleLiveEvent</a></p>

<p>Highly recommend you to read this <a href=""https://medium.com/androiddevelopers/livedata-with-snackbar-navigation-and-other-events-the-singleliveevent-case-ac2622673150"" rel=""nofollow noreferrer"">article</a>. This explains why you are facing this and what are your options in detail.</p>
",5285588,,,,,2019-03-05 10:47:13,,,,0,,,
Android,55070194,2,,55070009,2019,,1,,"<p>Take a look at the <a href=""https://github.com/googlesamples/android-Camera2Basic/tree/master/Application/src/main/java/com/example/android/camera2basic"" rel=""nofollow noreferrer"">Camera2Basic</a> sample to help out with the general flow of things.</p>

<p>In this particular case - a capture session can have multiple target output Surfaces (one for preview, one for still capture JPEGs, for example).  Each capture request can target any subset of those outputs (so the repeating request targets the preview output, while still captures target the JPEG output, etc).</p>

<p>So your capture request needs to have one or more Surfaces added as targets, and the Surfaces have to be one of the ones included in the session creation.</p>

<p>Since you only have one Surface in your session, just add</p>

<pre><code> captureRequestBuilder.addTarget(surface)
</code></pre>

<p>before the setRepeatingRequest call.</p>

<p>If you want to get a Java ByteBuffer of YUV data, you can add an <a href=""https://developer.android.com/reference/kotlin/android/media/ImageReader?hl=en"" rel=""nofollow noreferrer"">ImageReader</a> as an output target as well, for both the session and the capture request.
Note that only the YUV_420_888 flexible YUV format is guaranteed to be supported, so you'll have to manually adjust it if you really need something in an NV21 layout (on any given device, YUV_420_888 may be NV21 under the hood, but there's no guarantee about that).</p>
",1344825,,,,,2019-03-08 19:58:21,,,,2,,,
Android,55024255,2,,54949978,2019,,1,,"<p>You need to replace:</p>

<pre><code>geofencePendingIntent = PendingIntent.getService(context, 0, intent, PendingIntent.
            FLAG_UPDATE_CURRENT); 
</code></pre>

<p>with </p>

<pre><code>Intent intent = new Intent(this, GeofenceBroadcastReceiver.class); 
mGeofencePendingIntent = PendingIntent.getBroadcast(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
</code></pre>

<p>For support Android 8, you should to use BroadcastReceiver for receiving geofence intent, since to <a href=""https://developer.android.com/about/versions/oreo/background#services"" rel=""nofollow noreferrer"">Background Execution Limits</a> (service can't be run in background)</p>

<p>see for more details: <a href=""https://github.com/googlesamples/android-play-location/commit/5f83047c8a462d7c619f6275b624e219b4622322"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-location/commit/5f83047c8a462d7c619f6275b624e219b4622322</a></p>

<p>google sample how to use geofence: <a href=""https://github.com/googlesamples/android-play-location/tree/master/Geofencing"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-location/tree/master/Geofencing</a></p>
",2715054,,2715054,,2019-03-06 13:50:39,2019-03-06 13:50:39,,,,2,,,
Android,55136950,2,,55136846,2019,,1,,"<pre><code>@Override
public void onCreate() {
    mPrefs = PreferenceManager.getDefaultSharedPreferences(this);
    NotificationManager notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

    // Android O requires a Notification Channel.
    if (Build.VERSION.SDK_INT &gt;= 26) {
        CharSequence name = getString(R.string.app_name);
        // Create the channel for the notification
        @SuppressLint(""WrongConstant"")
        NotificationChannel mChannel = new NotificationChannel(CHANNEL_ID, name, NotificationManager.IMPORTANCE_LOW);
        // Set the Notification Channel for the Notification Manager.
        if (notificationManager != null) {
            notificationManager.createNotificationChannel(mChannel);
        }

        startForegroundService(new Intent(ForegroundService.this, ForegroundService.class));
        //We only need to call this for SDK 26+, since startForeground always has to be called after startForegroundService.
        startForeground(NOTIFICATION_ID, getNotification());
    }
    else {
        startService(new Intent(ForegroundService.this, ForegroundService.class));
    }
</code></pre>

<p>Also, this project is a good base to start with for implementing a ForegroundService:</p>

<p><a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationUpdatesForegroundService"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-location/tree/master/LocationUpdatesForegroundService</a></p>
",7434090,,7434090,,2019-03-13 8:11:54,2019-03-13 8:11:54,,,,8,,,
Android,55095429,2,,45717215,2019,,1,,"<p>Migrating your parent <code>ViewGroup</code> (whatever is <code>ConstraintLayout</code>, <code>RelativeLayout</code> or anything else) to <code>MotionLayout</code> you can achieve this using <a href=""https://developer.android.com/reference/android/support/constraint/motion/MotionLayout.html#setprogress"" rel=""nofollow noreferrer"">MotionLayout.progress</a> (<code>setProgress(float)</code>) and <a href=""https://developer.android.com/reference/android/support/constraint/motion/MotionLayout.html#loadlayoutdescription"" rel=""nofollow noreferrer"">loadLayoutDescription</a> which give you power to process manually progress of a scene transition described in a motion scene.</p>

<p>Please see examples <a href=""https://github.com/googlesamples/android-ConstraintLayoutExamples/tree/master/motionlayout"" rel=""nofollow noreferrer"">here.</a></p>
",3278271,,3278271,,2019-03-11 5:21:28,2019-03-11 5:21:28,,,,0,,,
Android,55142106,2,,55118369,2019,,1,,"<p>@hiren patel .. Have a look the example .. its working fine. </p>

<p><a href=""https://github.com/googlesamples/android-JobScheduler"" rel=""nofollow noreferrer"">Job Scheduler in Background</a></p>

<p>i think you need to schedule the scheduler before you kill or destroy..</p>

<ul>
<li>job scheduler having limitations</li>
<li>it wont work in offline.</li>
<li>its having time period 15 min, after 15 mins it automatically stops the service and we have to start or reschedule the job again..</li>
</ul>

<p>thank you..</p>
",5755569,,,,,2019-03-13 12:36:37,,,,1,,,
Android,55248702,2,,55248213,2019,,1,,"<p>I disagree with people who said that dagger is just library.</p>

<p><strong><a href=""https://en.wikipedia.org/wiki/Dependency_injection"" rel=""nofollow noreferrer"">Dependency Injection</a></strong> : Is a concept and a way to code, and dagger make it more easy to take advantage of dependency injection with annotations.</p>

<p>Also the <a href=""https://github.com/googlesamples/android-sunflower"" rel=""nofollow noreferrer"">Sun-Flower</a> project from google didn't use dagger while using MVVM pattern.</p>
",11161537,,,,,2019-03-19 19:29:55,,,,0,,,
Android,55294753,2,,55279965,2019,,1,,"<p>If your other device is a bluetooth module, in your case Arduino, right?</p>

<p>If so, check this tutorial describing connection between Android device and HC05 module. 
<a href=""http://arduino-er.blogspot.com/2016/04/android-bluetoothchat-example-link-with.html"" rel=""nofollow noreferrer"">bthc-05 to android tutorial</a></p>

<p>Also, based on this official sample: <a href=""https://github.com/googlesamples/android-BluetoothChat"" rel=""nofollow noreferrer"">google sample - bluetooth chat</a></p>

<p>Alternatively, you could also have the following method that makes your device discoverable. And install it on two phones. Then you should be able to discover the phones on each other atleast.</p>

<pre><code>protected void makeDiscoverable(){
    // Make local device discoverable
    Intent discoverableIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);
    discoverableIntent.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, DISCOVERABLE_DURATION);
    startActivityForResult(discoverableIntent, DISCOVERABLE_BT_REQUEST_CODE);
}
</code></pre>

<p>Maybe these help!</p>
",3360555,,,,,2019-03-22 7:27:35,,,,0,,,
Android,55241966,2,,52801616,2019,,1,,"<p>Having separate backstacks or not is a decision based on user experience but if you do want multiple backstacks for bottomnavigation then follow the link for correct approach by androidx developers.
<a href=""https://github.com/googlesamples/android-architecture-components/tree/master/NavigationAdvancedSample"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components/tree/master/NavigationAdvancedSample</a></p>
",6744813,,,,,2019-03-19 13:14:52,,,,0,,,
Android,55269769,2,,55269522,2019,,1,,"<p>If you want to rotate your activity you should remove <strong>android:screenOrientation=""portrait""</strong> and add <strong>android:configChanges=""orientation|keyboardHidden""</strong></p>

<pre><code>&lt;activity
    android:name="".activity.MainActivity""
    android:configChanges=""orientation|keyboardHidden""
    android:windowSoftInputMode=""stateUnspecified|adjustResize""&gt;&lt;/activity&gt;
</code></pre>

<p>Then override <strong>onConfigurationChanged()</strong> method in your activity to get callback when application is rotated</p>

<pre><code>class MainActivity extends AppCompatActivity {
    ...

    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);

        // Checks the orientation of the screen
        if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
            // App is rotated to landscape
        } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT){
            // App is rotated to portrait
        }
    }
}
</code></pre>

<p>In that case activity won't be re-created and you should handle updating UI components by yourself.
Take a look at <a href=""https://developer.android.com/guide/topics/resources/runtime-changes"" rel=""nofollow noreferrer"">original documentation</a> to get more details ;)</p>

<p><strong>Updated:</strong></p>

<p>If you want to hold Activity in portrait mode and detect just rotation look at:</p>

<ul>
<li><p><a href=""https://developer.android.com/guide/topics/sensors/sensors_motion"" rel=""nofollow noreferrer"">https://developer.android.com/guide/topics/sensors/sensors_motion</a></p></li>
<li><p><a href=""https://github.com/googlesamples/android-AccelerometerPlay/"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-AccelerometerPlay/</a> - example which probably would be useful for your case</p></li>
<li><p><a href=""https://developer.android.com/guide/topics/sensors/sensors_position"" rel=""nofollow noreferrer"">https://developer.android.com/guide/topics/sensors/sensors_position</a></p></li>
</ul>
",3816129,,3816129,,2019-03-20 21:01:01,2019-03-20 21:01:01,,,,3,,,
Android,55478586,2,,39491655,2019,,1,,"<p>With the release of the architecture components you should probably have a look at the <a href=""https://developer.android.com/topic/libraries/architecture/viewmodel"" rel=""nofollow noreferrer"">viewmodel architecture component</a>.<br>
In combination with live data you will be easily able to communicate between arbitrarily nested fragments.
You might also to take a look at the <a href=""https://github.com/googlesamples/android-architecture/tree/dev-todo-mvvm-live"" rel=""nofollow noreferrer"">todoapp</a> and how they handle events there.</p>
",7439718,,,,,2019-04-02 15:36:51,,,,0,,,
Android,55619010,2,,55618741,2019,,1,,"<p>The adapter has no way to know what <code>txvTitle</code> means, as it is specific to a single item in the <code>RecyclerView</code>.
Within a <code>ViewHolder</code> however, this property (if existent) is related to the view that is being ""prepared"".</p>

<p>Thus, updates to the view should only be done in the <code>ViewHolder</code> class.</p>

<p>Take a look at <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/PagingWithNetworkSample/app/src/main/java/com/android/example/paging/pagingwithnetwork/reddit"" rel=""nofollow noreferrer"">this</a> example.
In this example, a separate class is created which extends <code>RecyclerView.Viewholder(view)</code>.
Within this class, a method called <code>bind</code> is defined, which is passed the object (or model) that is used to populate the view. 
The <code>create</code> method inflates the layout of the view to be drawn in the <code>RecyclerView</code></p>
",6409815,,6409815,,2019-04-10 18:26:05,2019-04-10 18:26:05,,,,1,,,
Android,55638758,2,,55637838,2019,,1,,"<p>There are a lot of resources out there that show you how this can be done.
Take a look at this <a href=""https://www.andreasjakl.com/recyclerview-kotlin-style-click-listener-android/"" rel=""nofollow noreferrer"">blog post</a>.
Regarding your question of the context not being available in your adapter: just pass it in as a constructor argument. <s>This can be seen in <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/PagingWithNetworkSample"" rel=""nofollow noreferrer"">this example repository</a>. </s></p>

<p>Sharing the data between the two fragments could be done using a <a href=""https://developer.android.com/topic/libraries/architecture/viewmodel#sharing"" rel=""nofollow noreferrer""><code>SharedViewModel</code></a> </p>

<p>If you can't figure it out, feel free to ask more questions.</p>

<p><strong>EDIT</strong>
I also found <a href=""https://stackoverflow.com/a/40584425/6409815"">this answer</a> to a similar question, which might offer a solution that is more easy to implement than the blog post I mentioned.</p>
",6409815,,6409815,,2019-04-12 15:39:56,2019-04-12 15:39:56,,,,1,,,
Android,43560714,2,,43559225,2017,,1,,"<p>The old deprecated camera API still works on Android 21 and above. But you are right, using the new API is preferable, and gives you more options and better performance.</p>

<p>You can start with the official <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">Camera2Basic</a> sample.</p>
",192373,,,,,2017-04-22 15:01:22,,,,1,,,
Android,52933360,2,,52917472,2018,,1,,"<blockquote>
  <p>How can I create a complication slot to be displayed on my what face?</p>
</blockquote>

<p>The easiest way is to use a <a href=""https://developer.android.com/reference/android/support/wearable/complications/rendering/ComplicationDrawable"" rel=""nofollow noreferrer"">ComplicaitonDrawable</a>. It will handle all the logic of what to display (tilte, text, icon, etc) for you. It can also be styled to blend in with your watch face. Make sure to populate it with complication data whenever your watch face receives a callback:</p>

<pre><code>@Override
public void onComplicationDataUpdate(int id, ComplicationData data) {
    mComplicationDrawable.setComplicationData(data);
}
</code></pre>

<blockquote>
  <p>How can I set its position on the watch face?</p>
</blockquote>

<p>The <code>ComplicationDrawable</code> can easily be drawn anywhere on a canvas:</p>

<pre><code>mComplicationDrawable.setBounds(myComplicationBounds);
mComplicationDrawable.draw(canvas, currentTimeMillis);
</code></pre>

<blockquote>
  <p>Will I have to create an activity for that?</p>
</blockquote>

<p>You don't need an activity to set the position of the complication slot (unless you want the user to be able to select/change the position). </p>

<p>You do need a settings activity to let the user select a data provider for your complication slot. Google has been kind enough to provide a sample watch face that shows the recommended way to do this. It's available on <a href=""https://github.com/googlesamples/android-WatchFace"" rel=""nofollow noreferrer"">GitHub</a>.</p>
",543136,,,,,2018-10-22 15:58:32,,,,1,,,
Android,35565047,2,,35559165,2016,,1,,"<p><strong>Phone side:</strong>
I assume you already are communicating with the wear device via GoogleApiClient (Wearable.API). If you are, you can use the MessengeApi to send a custom message across to your Wear app. (Just remember to add capabilites for both.) Easy directions are <a href=""http://developer.android.com/training/wearables/data-layer/messages.html#SendMessage"" rel=""nofollow"">here</a>.</p>

<p><strong>Wear side:</strong>
Just implement the MessageListener interface in your main activity. When the message comes in via onMessageReceived(), you can call finish(). Easy directions are <a href=""http://developer.android.com/training/wearables/data-layer/messages.html#ReceiveMessage"" rel=""nofollow"">here</a>.</p>

<p>Finally, there is a Google Android Wear <a href=""https://github.com/googlesamples/android-DataLayer"" rel=""nofollow"">sample</a> for the DataLayer. This covers sending Messages with other stuff if you want to dig into it.</p>
",1631197,,,,,2016-02-22 22:17:33,,,,0,,,
Android,35563448,2,,25818668,2016,,1,,"<p>FFmpeg has removed support for libstagefright at <a href=""https://github.com/FFmpeg/FFmpeg/commit/72673ad7eae2d4f685f3c0a895558502bfe07c8e"" rel=""nofollow"">https://github.com/FFmpeg/FFmpeg/commit/72673ad7eae2d4f685f3c0a895558502bfe07c8e</a> (included in <code>n3.0</code>). Commit message:</p>

<pre><code>avcodec: Remove libstagefright

It serves absolutely no purpose other than to confuse potentional
Android developers about how to use hardware acceleration properly
on the the platform. The stagefright ""API"" is not public, and the
MediaCodec API is the proper way to do this.

Furthermore, stagefright support in avcodec needs a series of
magic incantations and version-specific stuff, such that
using it actually provides downsides compared just using the actual
Android frameworks properly, in that it is a lot more work and confusion
to get it even running. It also leads to a lot of misinformation, like
these sorts of comments (in [1]) that are absolutely incorrect.

[1] http://stackoverflow.com/a/29362353/3115956
</code></pre>

<p>so maybe it is not possible anymore.</p>

<p>You may have better chances with <a href=""https://github.com/googlesamples/android-ndk/tree/3cd41e1f5280443665ca98463c7a76e80bf0b96c/native-codec"" rel=""nofollow""><code>AMediaCodec</code></a> and <a href=""https://github.com/googlesamples/android-ndk/tree/3cd41e1f5280443665ca98463c7a76e80bf0b96c/native-media"" rel=""nofollow"">OpenMAX</a>.</p>
",895245,,895245,,2016-02-25 13:24:13,2016-02-25 13:24:13,,,,1,,,
Android,35567500,2,,35549225,2016,,1,,"<p>Depending whether user has credentials stored for the calling app, the result status code of a <code>CredentialsApi.request()</code> call will vary. Check out the <a href=""https://developers.google.com/identity/smartlock-passwords/android/overview"" rel=""nofollow"">API overview</a> for details, but a quick summary:</p>

<p>When a user has multiple stored credentials (possibly stored in one or more Google accounts on the device), the <code>RESOLUTION_REQUIRED</code> result is returned and can be resolved with a dialog showing the multiple saved credentials, allowing the user to pick one. <a href=""https://developers.google.com/identity/smartlock-passwords/android/retrieve-credentials#handle_multiple_saved_credentials"" rel=""nofollow"">Details</a></p>

<p>When no stored credentials are available, the <code>SIGN_IN_REQUIRED</code> result is returned and can be resolved with a dialog showing a list of email addresses (for email address auto-fill, along with name or picture if available). This does not require a device permission (very useful on Android M, which would otherwise require a runtime GET_ACCOUNTS prompt), and helps the user fill a sign-in or sign-up form easily. <a href=""https://developers.google.com/identity/smartlock-passwords/android/retrieve-hints"" rel=""nofollow"">Details</a></p>

<pre><code>Auth.CredentialsApi.request(apiClient, request).setResultCallback(
        new ResultCallback&lt;CredentialRequestResult&gt;() {
            public void onResult(CredentialRequestResult result) {
                Status status = result.getStatus();
                if (status.isSuccess()) {
                    // Successfully read credential without any user interaction, this
                    // means there was only a single credential and user has auto
                    // sign-in enabled.
                    processRetrievedCredential(result.getCredential(), false);
                } else if (status.getStatusCode() == CommonStatusCodes.RESOLUTION_REQUIRED) {
                    // This is the case where the user has multiple saved
                    // credentials and needs to pick one
                    resolveResult(status, RC_READ);
                } else if (status.getStatusCode() == CommonStatusCodes.SIGN_IN_REQUIRED) {
                    // User has no saved credentials, but a dialog to select email
                    // address (a ""hint"") is available (optional)
                    resolveResult(status, RC_HINT);
                }
            }
        });
</code></pre>

<p>For both results <code>hasResolution()</code> returns <code>true</code>, because both can be resolved, though the result is different, which is unfortunately confusing. We'll update documentation to better explain.</p>

<p>In either scenario, the user's selection will be returned in <code>onActivityResult()</code>, but the ""hints"" will only have the identifier (email address) set and no password.</p>

<pre><code>public void onActivityResult(int requestCode, int resultCode, Intent data) {
...
    if (resultCode == RESULT_OK) {
        Credential result = data.getParcelableExtra(Credential.EXTRA_KEY);
        if (requestCode == RC_HINT) {
            String email = result.getId(); // for auto-fill
        } else if (requestCode == RC_READ) {
            String email = result.getId(); // for auto sign-in
            String password = result.getPassword(); // only for saved credentials
</code></pre>

<p>The reason the email-only dialog is returned in a <code>CredentialsApi.request()</code> is to save an additional API call to fetch the email ""hint"" selector dialog described in the details above, in the case that an app would otherwise need to make the API calls sequentially. However, this is optional since for many app's UX it makes more sense to retrieve credentials at app start for auto sign-in, then request the email selector dialog separately later when user starts sign in or sign up, as illustrated in the <a href=""https://github.com/googlesamples/android-credentials/blob/master/credentials-quickstart/app/src/main/java/com/google/example/credentialsbasic/MainActivity.java"" rel=""nofollow"">sample code</a>.</p>
",5001016,,,,,2016-02-23 2:06:42,,,,2,,,
Android,39291659,2,,39248529,2016,,1,,"<p>Add espresso-web to your test project (see <a href=""https://google.github.io/android-testing-support-library/docs/espresso/web/"" rel=""nofollow"">https://google.github.io/android-testing-support-library/docs/espresso/web/</a> and follow the instructions to make sure JavaScript is enabled on your WebView):</p>

<pre><code>androidTestCompile 'com.android.support.test.espresso:espresso-web:2.2.2'
</code></pre>

<p>Then one way you can perform actions on the radio buttons is using a CSS selector like so:</p>

<pre><code>onWebView()
  .withElement(findElement(Locator.CSS_SELECTOR, ""input[value=\""City B\""]""))
  .perform(webClick());
</code></pre>

<p>If your radio buttons had unique IDs (like they should have), you can also select by ID:</p>

<pre><code>.withElement(findElement(Locator.ID, ""Location2""))
</code></pre>

<p>See this <a href=""https://github.com/googlesamples/android-testing/tree/master/ui/espresso/WebBasicSample"" rel=""nofollow"">https://github.com/googlesamples/android-testing/tree/master/ui/espresso/WebBasicSample</a> sample project where you can see the full working set up and easily try out different HTML code and selectors.</p>
",3527343,,,,,2016-09-02 11:46:13,,,,2,,,
Android,39277257,2,,39277072,2016,,1,,"<p>They do indeed use <code>MediaPlayer</code> as seen in the <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer/blob/master/mobile/src/main/java/com/example/android/uamp/playback/LocalPlayback.java"" rel=""nofollow"">LocalPlayback class</a></p>
",1676363,,,,,2016-09-01 17:06:06,,,,1,,,
Android,39297160,2,,39287810,2016,,1,,"<blockquote>
  <p>I have already turned off the animation as already mentioned over
  <a href=""https://google.github.io/android-testing-support-library/docs/espresso/setup/index.html"" rel=""nofollow"">https://google.github.io/android-testing-support-library/docs/espresso/setup/index.html</a></p>
</blockquote>

<p>This problem occurs not because of turned of animations, but because of <code>Espresso</code> framework character: <code>Espresso</code> depends on your actual application context.</p>

<blockquote>
  <p>Espresso for Android is perfect and fast test automation framework,
  but it has one important limitation - you are allowed to operate only
  inside your app under test context. </p>
  
  <p>That means that it is not possible to automate tests for such app
  features like:</p>
  
  <ul>
  <li>application push notifications </li>
  <li>contact synchronization </li>
  <li>navigating from another app to your app under test,</li>
  </ul>
  
  <p>since you have to deal with other apps from the mobile device -
  Notification Bar, Contacts or People app, etc.</p>
  
  <p>From: <a href=""http://qathread.blogspot.com/2015/05/espresso-uiautomator-perfect-tandem.html"" rel=""nofollow"">http://qathread.blogspot.com/2015/05/espresso-uiautomator-perfect-tandem.html</a></p>
</blockquote>

<p>It means that <code>Espresso</code> tests are based on UI thread and waiting when the main thread is idle().</p>

<blockquote>
  <p>Perhaps the main thread has not gone idle within a reasonable amount of time? There could be an animation or something constantly repainting the screen. Or the activity is doing network calls on creation? See the threaddump logs. For your reference the last time the event queue was idle before your activity launch request was 1472804618974 and now the last time the queue went idle was: 1472804618974. If these numbers are the same your activity might be hogging the event queue.</p>
</blockquote>

<p>This means that your main thread is actually  busy and Espresso can't perform any new actions, it's waiting for free idling resources to run.</p>

<p>To solve this problem you have these options:</p>

<ul>
<li><p>write your own custom <code>Espresso IdlingResource</code> to say Espresso when he can perform action, in other words: <code>IdlingResource</code> tells Espresso when the main thread is idle and ready to take a new actions.</p></li>
<li><p>exclude <code>appcompat</code> and <code>support-v4</code> from <code>espresso</code> libs : <a href=""https://github.com/googlesamples/android-testing/issues/56"" rel=""nofollow"">https://github.com/googlesamples/android-testing/issues/56</a></p></li>
<li><p>I suppose that you're running <code>Camera</code> using an Android <code>Intent</code>, so it isn't included in your actual app context, it's not displayed on your apps activity/fragment. If it is true, try to use <a href=""https://google.github.io/android-testing-support-library/docs/uiautomator/index.html"" rel=""nofollow""><code>UiAutomator</code></a> along with <a href=""https://google.github.io/android-testing-support-library/docs/espresso/index.html"" rel=""nofollow""><code>Espresso</code></a> framework. Read: <a href=""http://qathread.blogspot.com/2015/05/espresso-uiautomator-perfect-tandem.html"" rel=""nofollow"">http://qathread.blogspot.com/2015/05/espresso-uiautomator-perfect-tandem.html</a></p></li>
<li>instead of <code>Espresso</code> try to use <code>Robotium</code>, <code>Appium</code> or another instrumentation framework without this limitation.</li>
</ul>

<p>Already, I'm using along <code>Espresso</code>, <code>Robotium</code> and <code>UiAutomator</code>, so don't be afraid to work with mix of them.</p>

<p>Hope it help</p>
",4730812,,,,,2016-09-02 16:38:04,,,,0,,,
Android,48539101,2,,47830338,2018,,1,,"<p>From your question it appears you want to have a font available to your app which is downloaded programmatically when the app is run (rather than being bundled with the app).</p>

<p>You also said you are aware of the new <a href=""https://developer.android.com/guide/topics/ui/look-and-feel/downloadable-fonts.html"" rel=""nofollow noreferrer"">Downloadable Fonts</a> feature, but that ""that applies only to google fonts"".  This is not correct.  The <a href=""https://github.com/googlesamples/android-DownloadableFonts/tree/master/app"" rel=""nofollow noreferrer"">sample app</a> does use Google Play Services' built-in font provider.  However, according to the documentation, you can also use your <em>own</em> font provider backed by your <em>own</em> online font-providing server.</p>

<p>I haven't tried this, but I imagine your custom ""<code>FontsProvider</code>"" class (an extended <a href=""https://developer.android.com/reference/android/content/ContentProvider.html"" rel=""nofollow noreferrer""><code>ContentProvider</code></a>) would honor the <a href=""https://developer.android.com/reference/android/provider/FontsContract.html"" rel=""nofollow noreferrer""><code>FontsContract</code></a> introduced in API 26.  When it received a <a href=""https://developer.android.com/reference/android/provider/FontRequest.html"" rel=""nofollow noreferrer""><code>FontRequest</code></a>, it would find the font from its local cache (or alternatively on a server you're running), then return a <a href=""https://developer.android.com/reference/android/graphics/Typeface.html"" rel=""nofollow noreferrer""><code>Typeface</code></a> through a <a href=""https://developer.android.com/reference/android/provider/FontsContract.FontRequestCallback.html"" rel=""nofollow noreferrer""><code>FontsContract.FontRequestCallback</code></a> exactly as the Google Play Services one does.  (Again, look at the docs-- you have the option to require or not require a certificate.)</p>

<p>A custom <code>FontProvider</code> could be bundled within a third-party app (say a typeface company that provides fonts).  But I don't see why you couldn't add your own <code>FontProvider</code> within your own app, and have it contact your server and handle all the caching stuff yourself.</p>

<p>Incidentally, if you're curious about the API the Google Font service uses to offer information about the fonts (including links to the actual files), see <a href=""https://developers.google.com/fonts/docs/developer_api"" rel=""nofollow noreferrer"">here</a>.  In answering another font-related question, I wrote a <a href=""https://stackoverflow.com/questions/47051069/downloadable-fonts-cant-download-some-google-fonts/48248557#48248557"">very simple python program</a> that gets a list of all the fonts, then parses and filters it, which may be slightly helpful if you decide to write your own back end font provider service.</p>
",3035127,,,,,2018-01-31 9:50:17,,,,1,,,
Android,29992150,2,,29991138,2015,,1,,"<p>According to <a href=""https://developers.google.com/places/supported_types#table3"" rel=""nofollow"">place types</a> the closest you can get is the <code>establishment</code> filter. You are going to have to perform a search rather than an autocomplete in order to use the <code>restaurant</code> filter.</p>

<p>Using the Places API for Android <a href=""https://github.com/googlesamples/android-play-places/tree/master/PlaceComplete"" rel=""nofollow"">PlaceComplete</a> sample I tried passing in <code>Place.TYPE_ESTABLISHMENT</code> and <code>Place.TYPE_RESTAURANT</code> to  <code>AutocompleteFilter.create</code> to verify.</p>
",188779,,188779,,2015-05-01 18:30:23,2015-05-01 18:30:23,,,,0,,,
Android,39470182,2,,39469763,2016,,1,,"<p>What we did for a complex activity (30+ screens) was to divide each screen into View and Presenter components, where View battles with Android Views, and Presenter works out the logic (pulling and preparing data from controllers, network or local storage). But yeah, <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow"" title=""Architecture samples"">Google samples</a> contain information about pretty much everything you'll need to start. Either way you should spend more time designing and thinking about the structure rather than actually implementing it. Good luck :)</p>
",2102748,,,,,2016-09-13 12:31:26,,,,3,,,
Android,49403467,2,,48968213,2018,,1,,"<p>To run specific AndroidJUnit4 tests providing instrumentation runner is necessary to gradle.</p>

<p>try this format:</p>

<pre><code>./gradlew app:connectedAndroidTest -Pandroid.testInstrumentationRunnerArguments.class=com.example.android.testing.blueprint.ui.espresso.EspressoTest
</code></pre>

<p>Here is the list of all useful gradle commands <a href=""https://github.com/googlesamples/android-testing-templates/blob/master/AndroidTestingBlueprint/README.md#custom-gradle-command-line-arguments"" rel=""nofollow noreferrer"">{LINK}</a></p>
",1597616,,,,,2018-03-21 10:10:18,,,,1,,,
Android,40399886,2,,40398903,2016,,1,,"<p>Google demo of Camera2 Api. It will help you.
Link : <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a></p>
",5720915,,,,,2016-11-03 11:04:02,,,,0,,,
Android,41114107,2,,40931966,2016,,1,,"<p>I agree with you.
But I think you should try with JobScheduler once.
You will find official documentation 
<a href=""https://developer.android.com/reference/android/app/job/JobScheduler.html"" rel=""nofollow noreferrer"">https://developer.android.com/reference/android/app/job/JobScheduler.html</a>
Best example I find
<a href=""https://github.com/googlesamples/android-JobScheduler"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-JobScheduler</a>
I don't have test it.according to me you have to try this.</p>

<p><strong><em>EDIT</em></strong></p>

<p>If you want to run your application in doze mode in 6.0 or later, you have to white list your application
check out</p>

<p><a href=""https://www.bignerdranch.com/blog/diving-into-doze-mode-for-developers/"" rel=""nofollow noreferrer"">https://www.bignerdranch.com/blog/diving-into-doze-mode-for-developers/</a></p>

<p><a href=""https://developer.android.com/training/monitoring-device-state/doze-standby.html"" rel=""nofollow noreferrer"">https://developer.android.com/training/monitoring-device-state/doze-standby.html</a></p>

<p>Imtiyaz</p>
",2294560,,2294560,,2016-12-13 10:17:39,2016-12-13 10:17:39,,,,3,,,
Android,39683992,2,,39672385,2016,,1,,"<p>To work with in app-billing you have to use <a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/aidl/com/android/vending/billing/IInAppBillingService.aidl#L113"" rel=""nofollow"">IInAppBillingService</a>. First link is about this service API. The second link (training section) explains example with wrapper around IInAppBillingService, so <a href=""https://github.com/googlesamples/android-play-billing/blob/e19a6b4783313d51eff5111d4359ca75e1b3ec50/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample/util/IabHelper.java#L432"" rel=""nofollow"">underneath</a> it also uses <code>getBuyIntent()</code>.</p>
",5766983,,,,,2016-09-25 6:13:30,,,,0,,,
Android,50320073,2,,50317074,2018,,1,,"<blockquote>
  <p>Handler: The handler on which the callback should be invoked, or null to use the current thread's looper.</p>
</blockquote>

<p>In the camera2basic sample, <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java#L692"" rel=""nofollow noreferrer"">using</a> the current (Main) looper for preview CameraCaptureSession is good enough, because its callback is not involved in expensive tasks, and is called only once. The other callbacks that use backgroundThread, must be scheduled off the Main (UI) thread.</p>
",192373,,,,,2018-05-13 19:52:43,,,,0,,,
Android,49001651,2,,49001395,2018,,1,,"<p>You can achieve this by Google's <a href=""https://developers.google.com/android/reference/com/google/android/gms/location/ActivityRecognitionApi"" rel=""nofollow noreferrer"">ActivityRecognitionApi</a> API. It tells you about user's current activity, such as walking, driving, or standing still.</p>

<p>You can check out sample code here:
<a href=""https://github.com/googlesamples/android-play-location/tree/master/ActivityRecognition"" rel=""nofollow noreferrer"">ActivityRecognition</a></p>

<blockquote>
  <p>The Activity Recognition API is built on top of the sensors available in a device. Device sensors provide insights into what users are currently doing. However, with dozens of signals from multiple sensors and slight variations in how people do things, detecting what users are doing is not easy.</p>
  
  <p>The Activity Recognition API automatically detects activities by
  periodically reading short bursts of sensor data and processing them
  using machine learning models.</p>
</blockquote>
",6313469,,,,,2018-02-27 5:22:26,,,,0,,,
Android,32043994,2,,31836149,2015,,1,,"<p>What you are looking for is more along the collapsed version of the MediaStyle notification. While I'm not sure how to force it to stay collapsed, this should set you on the right path. I used a bit of the code found in the UniversalMusicPlayer that is part of the sample code provided for Android.</p>

<p>Specifically - You want to check out the MediaNotificationManager and MusicService classes. </p>

<p><a href=""https://github.com/googlesamples/android-UniversalMusicPlayer/blob/master/mobile/src/main/java/com/example/android/uamp/MediaNotificationManager.java"" rel=""nofollow"">https://github.com/googlesamples/android-UniversalMusicPlayer/blob/master/mobile/src/main/java/com/example/android/uamp/MediaNotificationManager.java</a></p>

<p>Both of which are a bit overly complex for what you are trying to achieve, but could be a good place to refer to. Specifically, the createNotification method (see a Play/Pause version below).</p>

<pre><code>private Notification createNotification() {
    if (mMetadata == null || mPlaybackState == null) {
        return null;
    }

    NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(mService);
    int playPauseButtonPosition = 0;


    addPlayPauseAction(notificationBuilder);

    MediaDescriptionCompat description = mMetadata.getDescription();

    String fetchArtUrl = null;
    Bitmap art = null;
    if (description.getIconUri() != null) {
        // This sample assumes the iconUri will be a valid URL formatted String, but
        // it can actually be any valid Android Uri formatted String.
        // async fetch the album art icon
        String artUrl = description.getIconUri().toString();
        art = ChannelImageCache.getInstance().getBigImage(artUrl);
        if (art == null) {
            fetchArtUrl = artUrl;
            // use a placeholder art while the remote art is being downloaded
            art = BitmapFactory.decodeResource(mService.getResources(),
                    R.drawable.ic_default_art);
        }
    }

    notificationBuilder
            .setStyle(new NotificationCompat.MediaStyle()
                    .setShowActionsInCompactView(
                            new int[]{playPauseButtonPosition})  // show only play/pause in compact view
                    .setMediaSession(mSession.getSessionToken()))
            .setColor(mNotificationColor)
            .setSmallIcon(R.drawable.ic_notification)
            .setVisibility(Notification.VISIBILITY_PUBLIC)
            .setUsesChronometer(true)
            .setContentIntent(createContentIntent(description))
            .setContentTitle(description.getTitle())
            .setContentText(description.getSubtitle())
            .setLargeIcon(art);

    setNotificationPlaybackState(notificationBuilder);
    if (fetchArtUrl != null) {
        fetchBitmapFromURLAsync(fetchArtUrl, notificationBuilder);
    }

    return notificationBuilder.build();
}

private void addPlayPauseAction(NotificationCompat.Builder builder) {
    String label;
    int icon;
    PendingIntent intent;
    if (mPlaybackState.getState() == PlaybackStateCompat.STATE_PLAYING) {
        label = mService.getString(R.string.mr_media_route_controller_pause);
        icon = R.drawable.uamp_ic_pause_white_24dp;
        intent = mPauseIntent;
    } else {
        label = mService.getString(R.string.mr_media_route_controller_play);
        icon = R.drawable.uamp_ic_play_arrow_white_24dp;
        intent = mPlayIntent;
    }
    builder.addAction(new NotificationCompat.Action(icon, label, intent));
}
</code></pre>

<p>This Notification will use a MediaSession in your service (where I am assuming you AACDecoder/AACPlayer is living). When you get your ID3 Metadata from the player, you'll want to update the Metadata and set it to the mediaSession.  </p>

<pre><code>private void updateMetadata() {

    final MediaMetadataCompat track = generateMediaMetadataCompat(currentMetaData);

    mediaSession.setMetadata(track);
}

    private MediaMetadataCompat generateMediaMetadataCompat(SomeMetadataModelObject streamMetadata)
{
    currentMediaMetadataCompat = new MediaMetadataCompat.Builder()
            .putString(MediaMetadataCompat.METADATA_KEY_MEDIA_ID, streamMetadata.getMediaId())
            .putString(MediaMetadataCompat.METADATA_KEY_ALBUM, streamMetadata.getAlbumName())
            .putString(MediaMetadataCompat.METADATA_KEY_ARTIST, streamMetadata.getArtistName())

            .putString(MediaMetadataCompat.METADATA_KEY_ALBUM_ART_URI, ""http://somealbumart.png"" )
            .putString(MediaMetadataCompat.METADATA_KEY_TITLE, streamMetadata.getSongTitle())

            .build();
    return currentMediaMetadataCompat;
}
</code></pre>
",1895707,,,,,2015-08-17 6:28:34,,,,1,,,
Android,50553324,2,,50535969,2018,,1,,"<p>I think I've identified the source of the confusion on Developer Payload now. Years back when I was coding with <code>InAppPurchasing</code> developer payloads was an additional parameter in the <code>launchPurchaseFlow</code> function, but the new <strong>Billing Library</strong> with its <code>launchBillingFlow</code> does not support the developer payload any more. It is apparently now classed as a legacy field. <a href=""https://github.com/googlesamples/android-play-billing/issues/78#issuecomment-332881979"" rel=""nofollow noreferrer"">See here for example.</a> And in <a href=""https://issuetracker.google.com/issues/63381481"" rel=""nofollow noreferrer"">this Google post</a>, we have confirmation:</p>

<blockquote>
  <p>Hi</p>
  
  <p>The field developerPayload is a legacy field, kept to maintain the compatibility with old implementations, but as mentioned on Purchasing In-app Billing Products page (<a href=""https://developer.android.com/training/in-app-billing/purchase-iab-products.html"" rel=""nofollow noreferrer"">https://developer.android.com/training/in-app-billing/purchase-iab-products.html</a>), this field isn't always available when completing tasks related to In-app Billing.
  And since the library was designed to represent the most updated development model, we decided to don't support developerPayload in our implementation and we have no plans to include this field into the library.</p>
  
  <p>If you rely any important implementation of your in-app billing logic on the developerPayload, we recommend you change this approach, because this field will be deprecated at some point (or soon).
  The recommended approaches is to use your own backend to validate and track important details about your orders. For more details, check the Security and Design page (<a href=""https://developer.android.com/google/play/billing/billing_best_practices.html"" rel=""nofollow noreferrer"">https://developer.android.com/google/play/billing/billing_best_practices.html</a>).</p>
  
  <p>Thanks</p>
</blockquote>
",1300214,,,,,2018-05-27 14:47:17,,,,0,,,
Android,40591302,2,,40591099,2016,,1,,"<p>You can iterate over all sizeq and try to minimize the difference of area between theses sizes and your preview size.</p>

<p>you can check <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java#L511-L518"" rel=""nofollow noreferrer"">this</a></p>
",6325994,,,,,2016-11-14 14:39:45,,,,2,,,
Android,40591400,2,,40590695,2016,,1,,"<p>If your <code>targetSdkVersion</code> is <code>&gt;22</code>, try requesting runtime permission &amp; request location update from <code>onRequestPermissionsResult</code>.</p>

<p>For runtime permission click <a href=""https://developer.android.com/training/permissions/requesting.html"" rel=""nofollow noreferrer"">Here</a>!</p>

<p>Also your code will only work if location services is enable in device setting.
Since you are neither checking location services status nor requesting to enable it.</p>

<p>Try using <code>FusedLocationProviderApi</code> you don't have to use intent, check <a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationUpdates"" rel=""nofollow noreferrer"">Here</a>!</p>
",3524134,,3524134,,2016-11-14 15:29:17,2016-11-14 15:29:17,,,,0,,,
Android,49512524,2,,49512408,2018,,1,,"<p>You can't directly set emoji in <code>TextView</code> 
Either you can use this  <a href=""https://developer.android.com/guide/topics/ui/look-and-feel/emoji-compat.html"" rel=""nofollow noreferrer"">https://developer.android.com/guide/topics/ui/look-and-feel/emoji-compat.html</a> </p>

<p>add this in gradle </p>

<pre><code>dependencies {
    ...
    compile ""com.android.support:support-emoji:27.1.0""
}
</code></pre>

<p>Implement this in your application code </p>

<pre><code>  public class MyApplication extends Application {
  @Override
   public void onCreate() {
     super.onCreate();
     FontRequest fontRequest = new FontRequest(
       ""com.example.fontprovider"",
       ""com.example"",
       ""emoji compat Font Query"", CERTIFICATES);
       EmojiCompat.Config config = new FontRequestEmojiCompatConfig(this, fontRequest);
       EmojiCompat.init(config);
   }
}
</code></pre>

<p>and change your <code>TextView</code> to  <code>android.support.text.emoji.widget.EmojiTextView</code></p>

<p>You can check this if you have any doubts <a href=""https://github.com/googlesamples/android-EmojiCompat"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-EmojiCompat</a> </p>

<p>or </p>

<p>You can try unicode directly like this </p>

<p><a href=""https://stackoverflow.com/a/26894146/3111083"">https://stackoverflow.com/a/26894146/3111083</a></p>
",3111083,,3111083,,2018-03-27 12:46:09,2018-03-27 12:46:09,,,,14,,,
Android,41002563,2,,40972081,2016,,1,,"<p>How are you drawing the output from your SurfaceTexture to begin with? Are you just using the TextureView class, or do you have an actual GLSurfaceView or similar and a set of OpenGL ES drawing calls to draw the preview with?</p>

<p>If you're using TextureView, then there's nothing you can do - it takes care of the drawing and you can't inject yourself in the middle.</p>

<p>With a GLSurfaceView, you're basically writing your own OpenGL program, which can do all sorts of image processing via fragment shaders and the like. But you'll need to learn the basics of OpenGL programming for that, or at least find a sample that sets up all the boilerplate.</p>

<p>If you're using camera2, you could also consider using RenderScript for your processing.  The official Google sample app, <a href=""https://github.com/googlesamples/android-HdrViewfinder"" rel=""nofollow noreferrer"">HdrViewfinder</a>, uses RS to do real-time processing on preview.</p>
",1344825,,,,,2016-12-06 18:43:14,,,,0,,,
Android,49854520,2,,26689961,2018,,1,,"<p>To include <strong>ttf</strong> file in your app is lead to increase your app size.</p>

<p><strong>Downloadable Font</strong> is best solution to use other fonts.
Use following references:</p>

<p><strong>document:</strong>
<a href=""https://developer.android.com/guide/topics/ui/look-and-feel/downloadable-fonts.html"" rel=""nofollow noreferrer"">https://developer.android.com/guide/topics/ui/look-and-feel/downloadable-fonts.html</a></p>

<p><strong>sample:</strong>
<a href=""https://github.com/googlesamples/android-DownloadableFonts"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-DownloadableFonts</a></p>

<p>and still you want to include fontFile then use following answer:
<a href=""https://stackoverflow.com/a/27588966/8240915"">https://stackoverflow.com/a/27588966/8240915</a></p>
",8240915,,,,,2018-04-16 10:00:37,,,,0,,,
Android,50746378,2,,50740757,2018,,1,,"<blockquote>
  <p>How can I navigate fromViewModel?</p>
</blockquote>

<p>The answer is please don't. ViewModel is designed to store and manage UI-related data. </p>

<p><strong>New Answer</strong></p>

<p>In my previous answers, I said that we shouldn't navigate from ViewModel, and the reason is because to navigate, ViewModel must have references to Activities/Fragments, which I believe (maybe not the best, but still I believe it) is never a good idea.</p>

<p>But, in recommended app architecture from Google, it mentions that we <strong>should drive UI from model</strong>. And after I think, what do they mean with this?</p>

<p>So I check a sample from ""android-architecture"", and I found some interesting way how Google did it.</p>

<p>Please check here: <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvvm-databinding"" rel=""nofollow noreferrer"">todo-mvvm-databinding</a></p>

<p>As it turns out, they indeed <strong>drive UI from model</strong>. But how?</p>

<ol>
<li>They created an interface <a href=""https://github.com/googlesamples/android-architecture/blob/todo-mvvm-databinding/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/tasks/TasksNavigator.java"" rel=""nofollow noreferrer"">TasksNavigator</a> that basically just a navigation interface.</li>
<li>Then in the <a href=""https://github.com/googlesamples/android-architecture/blob/todo-mvvm-databinding/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/tasks/TasksViewModel.java"" rel=""nofollow noreferrer"">TasksViewModel</a>, they have this reference to TaskNavigator so they can drive UI without having reference to Activities / Fragments directly.</li>
<li>Finally, TasksActivity implemented TasksNavigator to provide detail on each navigation action, and then set navigator to TasksViewModel.</li>
</ol>
",8667412,,8667412,,2018-10-03 0:37:21,2018-10-03 0:37:21,,,,6,,,
Android,50399452,2,,50399194,2018,,1,,"<p>This is accessing data synchronously from the LiveData:</p>

<pre><code>Log.d(""LISTSIZEVM"",  String.valueOf(mViewModel.getAll().getValue().size()));
</code></pre>

<p>But this data might no have arrived yet. </p>

<p>Try adding this query to your Dao, see <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/PersistenceContentProviderSample/app/src/main/java/com/example/android/contentprovidersample/data/CheeseDao.java"" rel=""nofollow noreferrer"">google samples</a>:</p>

<pre><code>@Query(""SELECT COUNT(column) FROM table"")
int getDataCount();
</code></pre>

<p>As pointed out by @CommonsWare this cannot be called from the main UI thread because it's a database opearation that will block the UI thread and will throw an error. You can either call this off the main thread, or return a <code>LiveData&lt;Integer&gt;</code> and observe the value, like you did with the list of data.</p>

<pre><code>@Query(""SELECT COUNT(column) FROM table"")
LiveData&lt;Integer&gt; getDataCount();
</code></pre>
",7765139,,7765139,,2018-05-17 19:56:31,2018-05-17 19:56:31,,,,12,,,
Android,49828362,2,,49785873,2018,,1,,"<p>Thanks to user <a href=""https://stackoverflow.com/users/6668797/twl"">TWL</a> who pointed me towards <a href=""https://github.com/googlesamples/android-instant-apps/tree/master/flavors"" rel=""nofollow noreferrer"">google samples for instant apps, with an example for flavors</a>. </p>

<p>We need flavor declarations in all the feature modules, application module and instant-app module as well. Library modules can be skipped as of today with plugin version 3.1.1. In other words, have this section in all feature and installed/instant modules:</p>

<pre><code>flavorDimensions ""dim""
productFlavors{
    a{
        dimension ""dim""
    }
    b{
        dimension ""dim""
    }
}
</code></pre>
",3117656,,,,,2018-04-14 5:46:14,,,,0,,,
Android,50766407,2,,48851904,2018,,1,,"<p>This can be your login class, maybe extending ViewModel, so it keeps alive on configuration changes:</p>

<pre><code> class LoginClass
    {
        var loginEvent = SingleLiveEvent&lt;LoginEvent&gt;()
        fun startLogin(user: String, password: String)
        {
            loginEvent.value= LoginEvent(LoginStatus.LoginStart,null,null)
            launch(UI) { 
                try{
                    bg{
                        //do login process
                    }.await()
                    loginEvent.value= LoginEvent(LoginStatus.LoginOk,null,null)
                }
                catch (error: Exception){
                    loginEvent.value= LoginEvent(LoginStatus.LoginFailed,error.message,null)
                }
            }
        }
        data class LoginEvent(var loginStatus: LoginStatus, var errorMessage: String?, var loginExtraData: Any?) 
        enum class LoginStatus
        {
            LoginStart,
            LoginOk,
            LoginFailed
        }
    }
</code></pre>

<p>You can observe the login status to react and change your UI accordingly:</p>

<pre><code>val myLoginClass = LoginClass()
myLoginClass.loginEvent.observe(this@LifecycleOwner, Observer {
    if(it==null)
        return@Observer
    when(it.loginStatus)
    {

        LoginClass.LoginStatus.LoginStart -&gt; {
            //show indeterinate progress bar, disable inputs, etc
        }
        LoginClass.LoginStatus.LoginOk -&gt; {
            //go to logged in activity
        }

        LoginClass.LoginStatus.LoginFailed -&gt; {
            //show login failed toast, hide progress bar, enable input, etc
        }
    }
})
</code></pre>

<p>To start login simply call the login method of your class:</p>

<pre><code>loginButton.onClick {
    myLoginClass.startLogin(""user"", ""password"")
}
</code></pre>

<p>Logically, you will need more than this, but you can use it as a skeleton.</p>

<p>SingleLiveEvent can be found here: <a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java</a></p>
",7117454,,,,,2018-06-08 18:21:38,,,,0,,,
Android,51406921,2,,51405949,2018,,1,,"<p>You might try clearing the list first and then add the new messages.</p>

<p><a href=""https://github.com/googlesamples/android-SwipeRefreshLayoutBasic/blob/7efe07bdbffd0ddd8e2ce00f24ecd555af53975c/Application/src/main/java/com/example/android/swiperefreshlayoutbasic/SwipeRefreshLayoutBasicFragment.java#L195"" rel=""nofollow noreferrer"">Android SwipeRefreshLayoutBasic</a></p>
",2592443,,,,,2018-07-18 16:29:06,,,,4,,,
Android,51420796,2,,23629148,2018,,1,,"<p>I have tried above solution but it won't work for me and i got the solution from my another code, so i just want to share so may other will get help. For google in-app code please check this <a href=""https://github.com/googlesamples/android-play-billing"" rel=""nofollow noreferrer"">google github project</a> </p>

<p>The difference is call <code>queryInventoryAsync()</code> with some more parameter that you have to pass and make sure that below method is call inside <code>onIabSetupFinished()</code> after <code>IabHelper</code> successfully initialized.</p>

<pre><code>runOnUiThread(new Runnable() {
     @Override
     public void run() {
        refreshItemList();
     }
});
</code></pre>

<p>Prepare skurequest</p>

<pre><code>private void refreshItemList() {
    List&lt;String&gt; itemSku = new ArrayList&lt;&gt;();
    List&lt;String&gt; subSku = new ArrayList&lt;&gt;();
    subSku.add(AppConstant.InApp.SKU_ONE_ID);
    mHelper.queryInventoryAsync(true, itemSku, subSku, mQotInventoryListener);
}
</code></pre>

<p>Below is the listener where you receive your <code>SkuDetails</code></p>

<pre><code>IabHelper.QueryInventoryFinishedListener mQotInventoryListener = new IabHelper.QueryInventoryFinishedListener() {
        @Override
        public void onQueryInventoryFinished(IabResult result, Inventory inv) {
            try {
                Log.d(TAG, ""mQotInventoryListener Query inventory finished."");

                // Have we been disposed of in the meantime? If so, quit.
                if (mHelper == null) return;

                // Is it a failure?
                if (result.isFailure()) {
                    Log.e(TAG, ""mQotInventoryListener Failed to query inventory: "" + result);
                    return;
                }

                Log.d(TAG, ""mQotInventoryListener Query inventory was successful."");
                try {
                    //Here you just pass SKU_ID that you want its detail
                    SkuDetails skuDetails = inv.getSkuDetails(AppConstant.InApp.SKU_ONE_ID);
                    if (skuDetails != null) {
                      Log.d(TAG, ""skuDetails are received""); 
                    } else {
                        Log.e(TAG, ""skuDetails are null"");
                    }

                } catch (Exception e) {
                    e.printStackTrace();
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    };
</code></pre>
",6533853,,,,,2018-07-19 10:52:59,,,,0,,,
Android,32283362,2,,32282920,2015,,1,,"<p>To Achieve this,  You will have to create your own embedded camera in your application rather than using a intent to open a camera application installed on your device. You can use the latest Camera API 2. </p>

<p><a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">Here</a> is the basic example which I customized for my applications need. And also there are 2 sample applications you can get straight from Android studio's sample projects.</p>

<p>Using this, you can Save all the images on the call back Method and also have a additional button or on Back Button Pressed, you can start the Uploading of those images.</p>

<p>This is the callback method,</p>

<pre><code>/**
 * This a callback object for the {@link ImageReader}. ""onImageAvailable"" will be called when a
 * still image is ready to be saved.
 */
private final ImageReader.OnImageAvailableListener mOnImageAvailableListener
        = new ImageReader.OnImageAvailableListener() {

    @Override
    public void onImageAvailable(ImageReader reader) {

        //mBackgroundHandler.post(new ImageSaver(reader.acquireNextImage(), mFile));
        // Do what ever you like, Original code does is, it save the image using a handler.
    }

};
</code></pre>

<p>Only Cavity here is, you will not get the Advanced features provided by a dedicated camera application and you do not want to write a advanced camera application, which is a different project and also beware of different manufacturer support Samsung S5 with Lollipop had some issue, But the code works after some minor changes to the code.</p>
",892788,,892788,,2015-08-29 6:47:39,2015-08-29 6:47:39,,,,0,,,
Android,51434923,2,,51434652,2018,,1,,"<p>This is how <code>ListView</code> or any <code>AdapterView</code> works . Same view will inflate for each item . Each widget which have <code>Adapter</code> implementation in android have there own way to access the item at particular position .</p>

<p>For instance if you want to get click on each position you can set <code>AdapterView.OnItemClickListener</code>.</p>

<pre><code>listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView&lt;?&gt; adapterView, View view, int position, long l) {
            // position is the item clicked
        }
    });
</code></pre>

<p>Also each <code>ListAdapter</code> class have methods to access items like <code>getItem(position)</code> from which you can return the object of your dataset for particular position .</p>

<p>From my understanding you should learn about <code>ListView</code> and <code>ViewHolder</code> pattern first .
You can read <a href=""https://developer.android.com/training/improving-layouts/smooth-scrolling"" rel=""nofollow noreferrer"">This Doc</a> or some similar one . If you do not understand the concept behind <code>ListView</code> then this answer can be way too big . SO its better you should check out some samples and Documentation.</p>

<p><strong>P.S</strong>:- Ditch <code>ListView</code> now and start using <code>RecyclerView</code> . Here is the <a href=""https://github.com/googlesamples/android-RecyclerView"" rel=""nofollow noreferrer"">Google-Sample</a> for <code>RecyclerView</code>.</p>
",4168607,,,,,2018-07-20 4:07:03,,,,0,,,
Android,50600010,2,,50599873,2018,,1,,"<p>Don't put multiple activities in a single navigation xml file. Navigation is meant to solve in-activity navigation, meaning it only supports fragments gracefully. To start another activity, just do it the good old way like <code>context.startActivity(intent)</code>. You can find more details in this google sample: </p>

<p><a href=""https://github.com/googlesamples/android-sunflower"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-sunflower</a></p>
",2235972,,,,,2018-05-30 8:35:33,,,,1,,,
Android,33339732,2,,33339287,2015,,1,,"<p><strong>Update</strong>: I think the problem is that you need another repositories{mavenCentral()} section outside the buildscript section. I always use a root script for this and I was not sure. All your script looks weird, read <a href=""http://tools.android.com/tech-docs/new-build-system/user-guide"" rel=""nofollow"">this</a>:</p>

<blockquote>
  <p>buildscript { ... } configures the code driving the build. In this
  case, this declares that it uses the Maven Central repository, and
  that there is a classpath dependency on a Maven artifact. This
  artifact is the library that contains the Android plugin for Gradle in
  version 0.11.1 Note: This only affects the code running the build, not
  the project. <strong>The project itself needs to declare its own repositories
  and dependencies.</strong> This will be covered later.</p>
</blockquote>

<p><strong>Previous response: other possible issues:</strong></p>

<p>Replace </p>

<pre><code>compileSdkVersion ""android-22""
</code></pre>

<p>by</p>

<pre><code>compileSdkVersion 22
</code></pre>

<p>And you need to install and use a higher build tools version 22.0.1+</p>

<blockquote>
  <p>Note: Always use a build tools version whose major revision number is
  <strong>higher or equal</strong> to that of your compilation target and target SDK.</p>
</blockquote>

<p>And  move the dependencies block outside the android block like <a href=""http://developer.android.com/tools/building/configuring-gradle.html"" rel=""nofollow"">here</a>.</p>

<blockquote>
  <p>The dependencies element is <strong>outside and after</strong> the android element.</p>
</blockquote>

<p>Further information about espresso <a href=""https://google.github.io/android-testing-support-library/docs/espresso/setup/index.html"" rel=""nofollow"">here</a>.</p>

<p>I don't know the exact problem sorry, try a <a href=""https://github.com/googlesamples/android-testing"" rel=""nofollow"">working sample</a> first, or wait a better response.</p>
",1009132,,1009132,,2015-10-26 9:01:24,2015-10-26 9:01:24,,,,4,,,
Android,42033188,2,,42000731,2017,,1,,"<p>You can try using <code>intented</code>. Take a look at googles documentation for intents <a href=""https://google.github.io/android-testing-support-library/docs/espresso/intents/"" rel=""nofollow noreferrer"">here</a> and the sample code <a href=""https://github.com/googlesamples/android-testing/blob/master/ui/espresso/IntentsBasicSample/app/src/androidTest/java/com/example/android/testing/espresso/BasicSample/DialerActivityTest.java#L113"" rel=""nofollow noreferrer"">here</a></p>
",31252,,,,,2017-02-03 21:21:08,,,,0,,,
Android,33396503,2,,30910254,2015,,1,,"<p>I believe that's because JUnit4-style test classes are not supposed to extend <code>ActivityInstrumentationTestCase2&lt;BaseActivity&gt;</code>. Simply omit that part and do not extend any class, see e.g. <a href=""https://github.com/googlesamples/android-testing/blob/master/runner/AndroidJunitRunnerSample/app/src/androidTest/java/com/example/android/testing/androidjunitrunnersample/CalculatorTest.java"" rel=""nofollow"">this example</a>.</p>
",1127485,,,,,2015-10-28 16:30:29,,,,0,,,
Android,51493802,2,,51489023,2018,,1,,"<p>Your solution is fine but as you say it won't scale well.</p>

<p>You can have a look at one of the <a href=""https://github.com/googlesamples/android-architecture-components/blob/5516724bd9f02c5bffb17945d9796e29ff95c76f/GithubBrowserSample/app/src/main/java/com/android/example/github/di/AppInjector.kt"" rel=""nofollow noreferrer"">Google Samples</a> where they implement a <code>HasSupportFragmentInjector</code> interface to determine whether they want to inject an Activity.</p>

<pre><code>private fun handleActivity(activity: Activity) {
    if (activity is HasSupportFragmentInjector) {
        AndroidInjection.inject(activity)
    }
    if (activity is FragmentActivity) {
        activity.supportFragmentManager
            .registerFragmentLifecycleCallbacks(
                object : FragmentManager.FragmentLifecycleCallbacks() {
                    override fun onFragmentCreated(
                        fm: FragmentManager,
                        f: Fragment,
                        savedInstanceState: Bundle?
                    ) {
                        if (f is Injectable) {
                            AndroidSupportInjection.inject(f)
                        }
                    }
                }, true
            )
    }
}
</code></pre>
",1837367,,,,,2018-07-24 8:19:57,,,,0,,,
Android,32391858,2,,32202685,2015,,1,,"<p>Sometimes detector dependencies are downloaded when the app runs for the first time and not when the app installs. I too faced the same issue, the problem is either your network connection is weak or you don't have enough storage for download say 10% of the total space though it does not take that much space but downloads from Google Play Services does require good amount of storage and don't forget to clear cache(Simple check try to update any application from playstore). Refer this <a href=""https://github.com/googlesamples/android-vision/issues/14"" rel=""nofollow"">Github thread</a> for more information.</p>
",4002813,,,,,2015-09-04 6:54:54,,,,0,,,
Android,51520861,2,,51365460,2018,,1,,"<p>Looking at the source for the <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/ui/common/DataBoundListAdapter.kt"" rel=""nofollow noreferrer"">DataBoundListAdapter</a> I can see that create binding is just a call from <code>onCreateViewHolder</code> which contains the information you need - <code>viewType: Int</code></p>

<p>The simplest option for you is to override what the method is doing in your own adapter, to pass the type information you need.</p>

<pre><code>@Override
DataBoundViewHolder&lt;V&gt; onCreateViewHolder(ViewGroup parent, int viewType) {
    //Note: no call to super
    V binding = createBindingByType(parent, viewType) //this is a new method
    return DataBoundViewHolder(binding)
}

private ChatMessageItemBinding createBindingByType(ViewGroup parent, int viewType) {
    @LayoutRes int layout;
    switch(viewType) {
        case ...:
            layout = R.layout.my_item;
            break;
        ...
    }
    return DataBindingUtil.inflate(LayoutInflater.from(parent.getContext()), layout, parent, false, dataBindingComponent);
}

@Override
protected ChatMessageItemBinding createBinding(ViewGroup parent) {
    throw new RuntimeException(""This method should not be called with MyAdapter"");
}
</code></pre>
",984830,,,,,2018-07-25 14:00:49,,,,0,,,
Android,51503007,2,,51498716,2018,,1,,"<p><code>LOCAL_LDLIBS</code> is for ndk-build but you're using CMake. A good starting place would be <a href=""https://github.com/googlesamples/android-ndk/blob/master/hello-jni/app/src/main/cpp/CMakeLists.txt"" rel=""nofollow noreferrer"">one of our samples</a> which shows you that you need to use <code>target_link_libraries</code>.</p>
",632035,,,,,2018-07-24 15:57:54,,,,2,,,
Android,42158818,2,,42158754,2017,,1,,"<p>It's free for both, Android &amp; iOS.<br>
I use the Barcode API from Mobile Vision and never had any issues.</p>

<p>Implementation Samples for <a href=""https://github.com/googlesamples/android-vision"" rel=""nofollow noreferrer"">Android</a> &amp; <a href=""https://github.com/googlesamples/ios-vision"" rel=""nofollow noreferrer"">iOS</a>  </p>
",6808319,,6808319,,2017-02-10 12:01:24,2017-02-10 12:01:24,,,,2,,,
Android,50911080,2,,50794726,2018,,1,,"<p>I'll answer your general question first:</p>

<blockquote>
  <p>And more generally , where should I put instance
  LiveData/MutableLiveData variable and why?</p>
</blockquote>

<p>The short answer is it depends. Usually, if you're working with LiveData only you'd pass the LiveData that comes from you repository straight to the ViewModel and the ViewModel would simply expose it to the View, with no need of creating an instance of it in the ViewModel. </p>

<p>But, if for any reason you'd need to modify the LiveData  in the ViewModel you should hold a reference to it in the ViewModel, you can clearly see it in this <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/BasicSample/app/src/main/java/com/example/android/persistence/DataRepository.java"" rel=""nofollow noreferrer"">google sample</a>:</p>

<pre><code> public LiveData&lt;ProductEntity&gt; loadProduct(final int productId) {
        return mDatabase.productDao().loadProduct(productId);
    }
</code></pre>

<p>The repository simply gets the LiveData provided by the Room Library and exposes it. The View model, gets the LiveData and exposes it to the View:</p>

<pre><code>public ProductViewModel(@NonNull Application application, DataRepository repository,
            final int productId) {
        super(application);
        mProductId = productId;
        mObservableProduct = repository.loadProduct(mProductId);
    }

public LiveData&lt;ProductEntity&gt; getObservableProduct() {
    return mObservableProduct;
}
</code></pre>

<p>You can hold to a reference of the result LiveData as seen above. But you could have passed it straight to the view:</p>

<pre><code>public LiveData&lt;ProductEntity&gt; getObservableProduct() {
    return repository.loadProduct(mProductId);
}
</code></pre>

<p>What I've been seeing lately is if you're working with Retrofit and a remote repository (or even with Room) you can work with RxJava (or Retrofit's native callbacks) and that way you'd  need an instance of LiveData in your ViewModel. </p>

<p>So the difference is that if you're working only with LiveData (from the data source to the view) you <strong>could</strong> hold a reference to your live data in the ViewModel. If your working half way through only you <strong>must</strong> have a LiveData in the view model.</p>

<p>Finally in you case you can hold the reference just like in the google sample.</p>
",7765139,,,,,2018-06-18 13:52:50,,,,2,,,
Android,42208145,2,,42162320,2017,,1,,"<p>These coordinates can be negative if the face extends beyond the top and/or the left edges of the image. Even though the head may not be entirely within the photo, the face detector will estimate the bounding box of the face beyond the image bounds based upon what is visible.</p>

<p>The coordinates should be correct relative to the image.  However, if you are drawing on a preview from the front-facing camera, note that this preview is displayed reversed (like a mirror image).  In this case, you'd need to reverse the coordinates on order to draw on the preview.  See an example of how this is done here:</p>

<p><a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/FaceTracker/app/src/main/java/com/google/android/gms/samples/vision/face/facetracker/ui/camera/GraphicOverlay.java#L101"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vision/blob/master/visionSamples/FaceTracker/app/src/main/java/com/google/android/gms/samples/vision/face/facetracker/ui/camera/GraphicOverlay.java#L101</a></p>
",5231007,,,,,2017-02-13 15:52:18,,,,0,,,
Android,32648758,2,,32648462,2015,,1,,"<p>The are making use of the<a href=""https://developers.google.com/android/reference/com/google/android/gms/location/SettingsApi"" rel=""nofollow"">SettingsApi</a> It allows you to check if the location services are available on the device and there is a complete example provided by google on <a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationSettings/app/src/main/java/com/google/android/gms/location/sample/locationsettings/MainActivity.java"" rel=""nofollow"">github</a> that shows how to use this API. The sample code will prompt the user to enable location if it's switched off. The dialog that pops up when you fire the intent is similar to what you see in Google Maps.</p>
",267540,,,,,2015-09-18 9:38:21,,,,1,,,
Android,42217905,2,,42199260,2017,,1,,"<p>Sometimes when we are learning a dependency injection framework like Dagger 2, the misconception can arise that the <code>new</code> keyword and static factories are to be avoided at all costs and that <em>every single object</em> should be injected. </p>

<p>In the case of Fragments, the <a href=""https://developer.android.com/guide/components/fragments.html#Creating"" rel=""nofollow noreferrer"">best practice</a> for instantiation is to use static factory methods. Even though a previous DI framework, Roboguice, encouraged injection of Fragments as properties of an Activity (<code>@Inject MeasurementFragment mf</code>), with Dagger 2 it may be better to try a different approach. The reason for this is that we need to co-ordinate with the <code>FragmentManager</code> for the Activity:</p>

<p>For a given Activity, Fragments are handled by a <code>FragmentManager</code>. When the Activity <code>onSaveInstanceState(Bundle outBundle)</code> is called (for instance, in conditions of low memory) the <code>FragmentManager</code> will save the instance state of each Fragment for restoration inside <code>onCreate(Bundle savedInstanceState);</code>.</p>

<p>This is why you often see in the Android examples:</p>

<pre><code>    if (savedInstanceState == null) {
        // During initial setup, plug in the details fragment.
        DetailsFragment details = new DetailsFragment();
        details.setArguments(getIntent().getExtras());
        getFragmentManager().beginTransaction().add(android.R.id.content, details).commit();
    }
</code></pre>

<p>The check for <code>saveInstanceState == null</code> is in case the Fragment is already present in the FragmentManager. In the case of restoring the Activity from a saved instance state you can use: </p>

<pre><code>fragmentManager.findFragmentByTag(String tag)
</code></pre>

<p>to get a handle on it. This means that simple property injection of a Fragment inside an Activity using Dagger 2 is not enough to account for the complex lifecycles of Fragments and Activities.</p>

<p>A better approach maybe to abandon the property injection of your Fragment inside your Activity and use static factories as recommended in the Developer's Guide. You would then inject the dependencies for your Fragment <em>inside the Fragment itself</em>. Something like this:</p>

<pre><code>class MeasurementFragment extends Fragment {

    @Inject Converter converter;

    static MeasurementFragment instantiate() {
        //if MeasurementFragment comes to require params in the future
        //you can pass them in here and use setArguments(Bundle params);
        return new MeasurementFragment(null); 
    }

    MeasurementFragment(){
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        DaggerMainActivityComponent.builder()
            .build()
            .inject(this);
    } 
}
</code></pre>

<p>Now when you use <code>fragmentManager.beginTransaction().add()</code> on the <code>MeasurementFragment</code> inside your Activity, injection will be performed on the commit when the Android system has invoked the lifecycle callbacks through to <code>onActivityCreated(Bundle bundle)</code>.</p>

<p>Here is what your Activity might look like with this approach:</p>

<pre><code>class MainActivity extends AppCompatActivity {

    public static final String MEASUREMENT_FRAG = ""MEASUREMENT_FRAG"";

    MeasurementFragment measureFrag;

    @Override
    protected void OnCreate(Bundle b){
       super(b);
       injectMembers();
       if (b == null) {
           measureFrag = MeasurementFragment.instantiate();
           getFragmentManager().beginTransaction().add(R.id.frag_container, measureFrag, MEASUREMENT_FRAG).commit();
       }
       else {
           //frag is already instantiated and added to container
           measureFrag = getFragmentManager().findFragmentByTag(MEASUREMENT_FRAG);
       }
    }

    @VisibleForTesting
    void injectMembers() {
       DaggerMainActivityComponent().create().inject(this);
    }
}
</code></pre>

<p>What I have outlined here is the approach to injecting members inside Fragments that is demonstrated in this popular <a href=""https://github.com/vinc3m1/nowdothis"" rel=""nofollow noreferrer"">Dagger 2 example on Github</a>. A step further is to make the Fragments as lightweight as possible and to totally eschew injecting dependencies inside them, as illustrated in the <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-dagger/"" rel=""nofollow noreferrer"">Google Android Architecture Blueprint for Dagger 2</a>.</p>
",5241933,,5241933,,2017-02-15 3:54:00,2017-02-15 3:54:00,,,,0,,,
Android,50941848,2,,50941681,2018,,1,,"<p>Getting location through gps is painful to user since it consumes a lot of battery as you indicated above. You can select your provider too, that is what is source of getting location, is it network or it is gps. These all depends on your location needs and some other logics of app. well to cut short it, I must say you need to learn location strategies. This will give you better understanding. Please look this <a href=""https://developer.android.com/guide/topics/location/strategies"" rel=""nofollow noreferrer"">here</a>. </p>

<p>I will recommend you to use google's fused location API. This give you better control on locations, and the best part of this API is that it is battery efficient and it is really fast and reliable. <a href=""https://developers.google.com/android/reference/com/google/android/gms/location/FusedLocationProviderApi"" rel=""nofollow noreferrer"">here</a> is a link if you want to learn about it. and for some more code snippts and helping material see <a href=""https://github.com/codepath/android_guides/wiki/Retrieving-Location-with-LocationServices-API"" rel=""nofollow noreferrer"">this</a>, <a href=""https://stackoverflow.com/questions/44992014/how-to-get-current-location-in-googlemap-using-fusedlocationproviderclient"">this</a> and <a href=""https://github.com/googlesamples/android-play-location/tree/master/BasicLocationSample"" rel=""nofollow noreferrer"">this</a> one is so advance also if you are using kotlin it has its demo code.  </p>

<p>Ask if there is any confusion.</p>
",6724458,,7083401,,2018-06-20 11:55:27,2018-06-20 11:55:27,,,,0,,,
Android,42854451,2,,42853827,2017,,1,,"<p>Problem 1. You can't bind a service to multiple activities in android.</p>

<p>Problem 2. You will need a MediaController for that.Have a look here : <a href=""https://developer.android.com/reference/android/widget/MediaController.html"" rel=""nofollow noreferrer"">https://developer.android.com/reference/android/widget/MediaController.html</a></p>

<p>For the first problem, you can create an Application class to which you will bind the service too. The application class will live as long as your app, while your activities will change, therefore you won't be able to bind it to one single activity. Have a look here : <a href=""https://developer.android.com/reference/android/app/Application.html"" rel=""nofollow noreferrer"">https://developer.android.com/reference/android/app/Application.html</a></p>

<p>For the second one, please have a look on the Google samples provided by them. The media player sample is here : <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-UniversalMusicPlayer</a></p>

<p>A good starting point with the android Media Player is here : <a href=""https://www.youtube.com/watch?v=XQwe30cZffg&amp;index=1&amp;list=PLw4z5K72qyXG54c-ZBKrqby3vz9g30dzr&amp;t=771s"" rel=""nofollow noreferrer"">https://www.youtube.com/watch?v=XQwe30cZffg&amp;index=1&amp;list=PLw4z5K72qyXG54c-ZBKrqby3vz9g30dzr&amp;t=771s</a></p>
",4536657,,,,,2017-03-17 10:01:03,,,,9,,,
Android,42960462,2,,42953373,2017,,1,,"<p><strong>Use one and only one <code>@Singleton</code> scoped component</strong></p>

<p>You should have one and only one <code>@Singleton</code> scoped component like this: </p>

<pre><code>@Singleton
@Component(modules={CommonModule.class, ExpModule.class})
public interface CommonComponent {

}
</code></pre>

<p><strong>Only specify Activities, Fragments, and Services as explicit injection targets for Components</strong></p>

<p>In an Android app, you should only list Activities, Fragments and Services as injection sites. You should configure Dagger 2 to inject the rest of your dependencies without having to resort to calling <code>component.inject(this)</code> inside them.</p>

<p>For example, if your <code>CommonClass</code> looks like this:</p>

<pre><code>public class CommonClass {
    @Inject Repository repository;

    public class CommonClass() {
         CommonComponentHolder.get().inject(this);
    }
}
</code></pre>

<p>Refactor it like this:</p>

<pre><code>public class CommonClass {
    private final Repository repository;

    @Inject
    public class CommonClass(Repository repository) {
         this.repository = repository;
    }
}
</code></pre>

<p>Now when you have an Activity or Fragment that needs <code>CommonClass</code> and you are injecting with <code>CommonComponent</code> or one of its sub-components or dependent components, they can obtain instances of <code>CommonClass</code> wired with the correct dependencies:</p>

<pre><code>public class MyActivity extends AppCompatActivity {

    @Inject CommonClass commonClass;

    public void onCreate(Bundle savedInstanceState) {
        CommonComponentHolder.getComponent().inject(this);
    }
}
</code></pre>

<p><strong>Use subcomponents or dependent components to specify the injection targets</strong></p>

<p>Now you have a <code>@Singleton</code> scoped component, you'll probably want to create a component for a narrower scope for your Activity or Fragment. You'll have to connect it to your <code>CommonComponent</code>, so use dependent components or subcomponents (subcomponents are preferred as of Dagger 2.10). Since you say you have already tried defining a <code>@ExpScope</code>, I think the missing piece is to make subcomponent or dependent component with the <code>@ExpScope</code> that injects your Activity or Fragment.</p>

<p>Something like the following for the top-level singleton component:</p>

<pre><code>@Singleton
@Component(modules={CommonModule.class, ExpModule.class})
public interface CommonComponent {
    ExpComponent.Builder exComponent();
}
</code></pre>

<p>And then for the subcomponent:</p>

<pre><code>@ExpScope
@Subcomponent(modules = {NarrowerScopedModule.class})
public interface ExpComponent {
    @Subcomponent.Builder
    public interface Builder {
        Builder narrowerScopedModule(NarrowerScopedModule narrowerScopedModule);
        ExpComponent build();
    }
}
</code></pre>

<p>There are good working examples of Android projects in the <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">Google Android Architecture Blueprints Github repo</a></p>
",5241933,,5241933,,2017-03-23 6:40:02,2017-03-23 6:40:02,,,,8,,,
Android,42196575,2,,42196234,2017,,1,,"<p>You should look into <strong>JobScheduler</strong></p>

<p>Here are some references.</p>

<p><a href=""https://developer.android.com/reference/android/app/job/JobScheduler.html"" rel=""nofollow noreferrer"">https://developer.android.com/reference/android/app/job/JobScheduler.html</a></p>

<p><a href=""http://www.vogella.com/tutorials/AndroidTaskScheduling/article.html"" rel=""nofollow noreferrer"">http://www.vogella.com/tutorials/AndroidTaskScheduling/article.html</a></p>

<p><a href=""https://github.com/googlesamples/android-JobScheduler/tree/master/Application/src/main/java/com/example/android/jobscheduler"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-JobScheduler/tree/master/Application/src/main/java/com/example/android/jobscheduler</a></p>
",958282,,,,,2017-02-13 4:11:38,,,,2,,,
Android,32706988,2,,32706112,2015,,1,,"<p>Google recently released a new <a href=""https://developers.google.com/vision/?hl=en"" rel=""nofollow"">Android Vision Api</a> that provides barcode functionality.</p>

<p>You can view sample code of the API here: <a href=""https://github.com/googlesamples/android-vision"" rel=""nofollow"">https://github.com/googlesamples/android-vision</a></p>
",371693,,,,,2015-09-22 1:29:42,,,,2,,,
Android,47292362,2,,47283709,2017,,1,,"<p>I think this is still an open issue, please see <a href=""https://github.com/googlesamples/android-vision/issues/62"" rel=""nofollow noreferrer"">link</a> for details. One workaround for this as stated by a developer:</p>

<blockquote>
  <p>Right, the barcode API generally doesn't support color-inverted codes. There's no parameter or option to control this at the moment. Though some APIs support them, I don't believe it's a common feature.</p>
  
  <p>For a workaround, you could preprocess the colors in the bitmap before passing them to the barcode API (perhaps inverting colors on alternate frames).</p>
</blockquote>

<p>Hope this helps.</p>
",5995040,,,,,2017-11-14 17:58:14,,,,0,,,
Android,50065157,2,,50063467,2018,,1,,"<p>Note: This error can happen if the resource directory name is incorrect.</p>

<p>Best procedure for creating the directory name:</p>

<ol>
<li>Doing: File -> New -> Android Resource Directory</li>
<li>Choose: Smallest Screen Width</li>
<li>Tap "">>"" and enter [The number of dips]</li>
</ol>

<p>Also, adding this line to the Gradle file solves similar errors:</p>

<pre><code>
dependencies {
    ...
    implementation 'com.android.support.constraint:constraint-layout:1.1.0'
}
</code></pre>

<p>Followed by a resync.</p>

<p><a href=""https://dl.google.com/dl/android/maven2/com/android/support/constraint/group-index.xml"" rel=""nofollow noreferrer"">Constraint Layout Versions</a></p>

<p><a href=""https://github.com/googlesamples/android-ConstraintLayoutExamples/archive/master.zip"" rel=""nofollow noreferrer"">Google Constraint Layout Sample</a></p>

<p><a href=""https://i.stack.imgur.com/yUYqW.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/yUYqW.png"" alt=""Project Downloaded from Google Drive""></a></p>

<p><a href=""https://i.stack.imgur.com/aYrWW.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/aYrWW.png"" alt=""Project Modified Layout Directory""></a></p>
",1600332,,1600332,,2018-04-28 12:16:50,2018-04-28 12:16:50,,,,4,,,
Android,47665641,2,,47663200,2017,,1,,"<p>Short answer:</p>

<p>No, it's baked into the <code>IdlingPolicies.dynamicIdlingResourceWarningPolicy</code> and not controlled by external configuration as of version 3.0.1. This policy controls the frequency of warning events that are posted to the handler. These events, in turn, cause the call to <code>isIdleNow()</code></p>

<p>Slightly longer answer:</p>

<p>It is like this for a very good reason. <code>isIdleNow()</code> is not a place to set your application state. At the time <code>isIdleNow()</code> is called the state should already be known. The state should be updated with the call to <code>ResourceCallback::onTransitionToIdle</code> and generally(99% of a time) not inside of <code>isIdleNow()</code></p>

<p>The documentation hints at it when it says that you should return immediately, but does not make it clear.</p>

<p>Updating the state in <code>isIdleNow()</code> makes it no better than just sleeping the thread conditionally. Actually, makes it even worse, as your tests are now 5 seconds slower on a per test basis. Which defeats the purpose of espresso as it kills the determinism of the test. And in my opinion determinism of espresso tests is what makes it so great thanks to the built-in main thread synchronization and idling resource interface.</p>

<p>With that being said there should not be a need to modify this timeout. Calling <code>ResourceCallback::onTransitionToIdle</code> will post this event to the handler and espresso will proceed immediately. </p>

<p>Unfortunately, there are lots of examples and even blogs that promote inefficient implementations.</p>

<p>These examples should be great sources of inspiration if you want a more conventional idling resource:</p>

<p><a href=""https://github.com/JakeWharton/okhttp-idling-resource/blob/master/src/main/java/com/jakewharton/espresso/OkHttp3IdlingResource.java"" rel=""nofollow noreferrer"">okhttp idling resource</a></p>

<p><code>DrawerActions$IdlingDrawerListener</code> bundled with espresso-contrib. <a href=""https://android.googlesource.com/platform/frameworks/testing/+/f69eb9ac2856f470cb79f57141f711ed3ceed99d/espresso/espresso-contrib/src/main/java/com/google/android/apps/common/testing/ui/espresso/contrib/DrawerActions.java#203https://android.googlesource.com/platform/frameworks/testing/+/f69eb9ac2856f470cb79f57141f711ed3ceed99d/espresso/espresso-contrib/src/main/java/com/google/android/apps/common/testing/ui/espresso/contrib/DrawerActions.java#203"" rel=""nofollow noreferrer"">here is the source</a>.</p>

<p><code>CountingTaskExecutorRule</code> from Room library, here is the <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/androidTest/java/com/android/example/github/util/TaskExecutorWithIdlingResourceRule.java"" rel=""nofollow noreferrer"">usage</a> of it.</p>
",4879701,,4879701,,2017-12-06 17:04:46,2017-12-06 17:04:46,,,,3,,,
Android,47530902,2,,46750600,2017,,1,,"<p>The <code>ActivityRecognitionApi</code> is really deprecated. Since version <strong>11.4.0</strong>, the <code>ActivityRecognitionClient</code> is to be used.</p>

<p><strong>Example Use:</strong></p>

<pre><code>ActivityRecognitionClient activityRecognitionClient = ActivityRecognition.getClient(context);
Task task = activityRecognitionClient.requestActivityUpdates(1000, pendingIntent);
</code></pre>

<p>For more info see the <a href=""https://developers.google.com/android/reference/com/google/android/gms/location/ActivityRecognitionClient"" rel=""nofollow noreferrer"">docs</a> or <a href=""https://github.com/googlesamples/android-play-location/blob/master/ActivityRecognition/app/src/main/java/com/google/android/gms/location/sample/activityrecognition/MainActivity.java"" rel=""nofollow noreferrer"">sample android app</a>.</p>
",1732709,,,,,2017-11-28 11:51:16,,,,1,,,
Android,47666303,2,,47666255,2017,,1,,"<p>You did not download the entire repository, or you may have set your project up incorrectly.  the ""<code>..</code>"" in <code>../version.gradle</code> is telling the code to go up a folder in the file system.</p>

<p><a href=""https://github.com/googlesamples/android-architecture-components/blob/master/versions.gradle"" rel=""nofollow noreferrer"">Here is the missing file.</a>  You may be able to just download it, and edit your gradle, or your might have to clone the whole project again.</p>
",2953647,,,,,2017-12-06 3:24:54,,,,1,,,
Android,31328133,2,,31323114,2015,,1,,"<p>Not all Android Wear devices provide a GPS unit. Instead, you should use the FusedLocationProviderApi from Google Play Services to request location updates. The nice part about this API is that if your phone and watch are together, it will use the GPS in the phone to save battery - it will only use the GPS on the wearable when it is disconnected from the phone. The FusedLocationProviderApi uses the same API as available on phones, so you can reuse most of your existing code.</p>

<p>Here is a blog post I wrote about this:
<a href=""http://android-developers.blogspot.com/2014/10/gps-on-android-wear-devices.html"" rel=""nofollow"">http://android-developers.blogspot.com/2014/10/gps-on-android-wear-devices.html</a></p>

<p>Documentation for FusedLocationProviderApi:
<a href=""https://developers.google.com/android/reference/com/google/android/gms/location/FusedLocationProviderApi"" rel=""nofollow"">https://developers.google.com/android/reference/com/google/android/gms/location/FusedLocationProviderApi</a></p>

<p>And a sample that implements this:
<a href=""https://github.com/googlesamples/android-SpeedTracker"" rel=""nofollow"">https://github.com/googlesamples/android-SpeedTracker</a></p>

<p>There is no emulator that provides the GPS functionality of the Sony SmartWatch 3.</p>
",2574733,,,,,2015-07-09 21:00:41,,,,4,,,
Android,31688008,2,,31686666,2015,,1,,"<p>You should be using the ViewHolder paradigm which is most easily implemented with <a href=""https://developer.android.com/reference/android/support/v7/widget/RecyclerView.html"" rel=""nofollow"">RecyclerView</a> when Adapters are involved. Online sample code available <a href=""https://developer.android.com/samples/RecyclerView/project.html"" rel=""nofollow"">here</a> and GitHub sample cloneable via AndroidStudio directly or <a href=""https://github.com/googlesamples/android-RecyclerView"" rel=""nofollow"">via Github</a>.</p>

<p>The HashMap solution will work, but why incur a HashMap lookup when you can simply hold a reference to the object? Also, RecyclerView natively handles different View TYPEs so you don't have to roll your own solution when you have section header rows which look differently from data rows.</p>

<p>===============================================</p>

<p>A more detailed explanation of <code>RecyclerView</code> follows based on snippets from the sample I linked to.</p>

<p>Have your <code>CustomAdapter</code> extend <code>RecyclerView</code>.</p>

<pre><code>public class CustomAdapter extends RecyclerView.Adapter&lt;CustomAdapter.ViewHolder&gt; {
</code></pre>

<p>Create a Custom <code>ViewHolder</code> class. It should almost always be a static class if embedded within your <code>CustomAdapter</code>.</p>

<pre><code>    public static class ViewHolder extends RecyclerView.ViewHolder {
        private final TextView textView;

        public ViewHolder(View v) {
            super(v);
            // Define click listener for the ViewHolder's View.
            v.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    Log.d(TAG, ""Element "" + getPosition() + "" clicked."");
                }
            });
            textView = (TextView) v.findViewById(R.id.textView);
</code></pre>

<p>Notice that the <code>ViewHolder</code> finds the views in the constructor since a <code>ViewHolder</code> instance is tied to a <code>View</code> instance. The <code>ViewHolder</code> should have references to any UI elements that you plan to update in an <code>onBind</code> callback. The <code>ViewHolder</code> object is then associated with the <code>View</code> by <code>RecyclerView</code> when you include the following code in your <code>CustomAdapter</code>.</p>

<pre><code>// Create new views (invoked by the layout manager)
@Override
public ViewHolder onCreateViewHolder(ViewGroup viewGroup, int viewType) {
    // Create a new view.
    View v = LayoutInflater.from(viewGroup.getContext())
            .inflate(R.layout.text_row_item, viewGroup, false);

    return new ViewHolder(v);
}
</code></pre>

<p>Notice how the <code>onCreateViewHolder</code> callback is given a <code>viewType</code> parameter. The current code always returns the same type of custom <code>ViewHolder</code>, but it could be providing different ViewHolder classes based on the type (this is how you support rows that support different views). The following code is then how you update your UI when the view is bound to a dataset.</p>

<pre><code>// Replace the contents of a view (invoked by the layout manager)
@Override
public void onBindViewHolder(ViewHolder viewHolder, final int position) {
    Log.d(TAG, ""Element "" + position + "" set."");

    // Get element from your dataset at this position and replace the contents of the view
    // with that element
    viewHolder.getTextView().setText(mDataSet[position]);
}
</code></pre>

<p>With these pieces in place <code>RecyclerView</code> will create and reuse your <code>Views</code> AND <code>ViewHolders</code> by corresponding type reducing view hierarchy look ups and potentially making your app much less ""janky"".</p>
",1375603,,1375603,,2015-07-29 18:05:35,2015-07-29 18:05:35,,,,4,,,
Android,31489502,2,,31489268,2015,,1,,"<p>Google Play Services 7 introduced a way to open the GPS directly from the app.
See <a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationSettings/app/src/main/java/com/google/android/gms/location/sample/locationsettings/MainActivity.java"" rel=""nofollow"">this sample</a> from google for more information. The specific code block is</p>

<pre><code>    protected void checkLocationSettings() {
    PendingResult&lt;LocationSettingsResult&gt; result =
            LocationServices.SettingsApi.checkLocationSettings(
                    mGoogleApiClient,
                    mLocationSettingsRequest
            );
    result.setResultCallback(this);
}

/**
 * The callback invoked when
 * {@link com.google.android.gms.location.SettingsApi#checkLocationSettings(GoogleApiClient,
 * LocationSettingsRequest)} is called. Examines the
 * {@link com.google.android.gms.location.LocationSettingsResult} object and determines if
 * location settings are adequate. If they are not, begins the process of presenting a location
 * settings dialog to the user.
 */
@Override
public void onResult(LocationSettingsResult locationSettingsResult) {
    final Status status = locationSettingsResult.getStatus();
    switch (status.getStatusCode()) {
        case LocationSettingsStatusCodes.SUCCESS:
            Log.i(TAG, ""All location settings are satisfied."");
            startLocationUpdates();
            break;
        case LocationSettingsStatusCodes.RESOLUTION_REQUIRED:
            Log.i(TAG, ""Location settings are not satisfied. Show the user a dialog to"" +
                    ""upgrade location settings "");

            try {
                // Show the dialog by calling startResolutionForResult(), and check the result
                // in onActivityResult().
                status.startResolutionForResult(MainActivity.this, REQUEST_CHECK_SETTINGS);
            } catch (IntentSender.SendIntentException e) {
                Log.i(TAG, ""PendingIntent unable to execute request."");
            }
            break;
        case LocationSettingsStatusCodes.SETTINGS_CHANGE_UNAVAILABLE:
            Log.i(TAG, ""Location settings are inadequate, and cannot be fixed here. Dialog "" +
                    ""not created."");
            break;
    }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (requestCode) {
        // Check for the integer request code originally supplied to startResolutionForResult().
        case REQUEST_CHECK_SETTINGS:
            switch (resultCode) {
                case Activity.RESULT_OK:
                    Log.i(TAG, ""User agreed to make required location settings changes."");
                    startLocationUpdates();
                    break;
                case Activity.RESULT_CANCELED:
                    Log.i(TAG, ""User chose not to make required location settings changes."");
                    break;
            }
            break;
    }
}
</code></pre>

<p><a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationSettings/app/src/main/java/com/google/android/gms/location/sample/locationsettings/MainActivity.java"" rel=""nofollow"">Credit</a> </p>
",,user2213590,,,,2015-07-18 8:57:40,,,,0,,,
Android,41222110,2,,41221284,2016,,1,,"<p>you may try to change <code>onMeasure</code> method inside your AutofitTextureView class</p>

<pre><code>public class AutoFitTextureView extends TextureView {

    int maxwidth = 0;
    int maxheight = 0;
    private int mRatioWidth = 0;
    private int mRatioHeight = 0;
    private Size previewSize;

    public AutoFitTextureView(Context context) {
        this(context, null);
    }

    public AutoFitTextureView(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public AutoFitTextureView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public void setAspectRatio(int width, int height, int maxwidth, int maxheight, Size preview) {
        if (width &lt; 0 || height &lt; 0) {
            throw new IllegalArgumentException(""Size cannot be negative."");
        }
        mRatioWidth = width;
        mRatioHeight = height;
        this.maxwidth = maxwidth;
        this.maxheight = maxheight;
        this.previewSize = preview;
        enterTheMatrix();
        requestLayout();
    }



    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);

        int width = MeasureSpec.getSize(widthMeasureSpec);
        int height = MeasureSpec.getSize(heightMeasureSpec);
        boolean isFullBleed = true;
        if (0 == mRatioWidth || 0 == mRatioHeight) {
            setMeasuredDimension(width, height);
        } else {
            setMeasuredDimension(height * mRatioWidth / mRatioHeight,height);
         }

    }


    private void adjustAspectRatio(int previewWidth,
                                   int previewHeight,
                                   int rotation) {
        Matrix txform = new Matrix();
        int viewWidth = getWidth();
        int viewHeight = getHeight();
        RectF rectView = new RectF(0, 0, viewWidth, viewHeight);
        float viewCenterX = rectView.centerX();
        float viewCenterY = rectView.centerY();
        RectF rectPreview = new RectF(0, 0, previewHeight, previewWidth);
        float previewCenterX = rectPreview.centerX();
        float previewCenterY = rectPreview.centerY();

        if (Surface.ROTATION_90 == rotation ||
                Surface.ROTATION_270 == rotation) {
            rectPreview.offset(viewCenterX - previewCenterX,
                    viewCenterY - previewCenterY);

            txform.setRectToRect(rectView, rectPreview,
                    Matrix.ScaleToFit.FILL);

            float scale = Math.max((float) viewHeight / previewHeight,
                    (float) viewWidth / previewWidth);

            txform.postScale(scale, scale, viewCenterX, viewCenterY);
            txform.postRotate(90 * (rotation - 2), viewCenterX,
                    viewCenterY);
        } else {
            if (Surface.ROTATION_180 == rotation) {
                txform.postRotate(180, viewCenterX, viewCenterY);
            }
        }

        if (LollipopCamera.type == 1) {
            txform.postScale(-1, 1, viewCenterX, viewCenterY);
        }

        setTransform(txform);
    }

    private void enterTheMatrix() {
        if (previewSize != null) {
            adjustAspectRatio(mRatioWidth,
                    mRatioHeight,
                    ((Activity) getContext()).getWindowManager().getDefaultDisplay().getRotation());
        }
    }
}
</code></pre>

<p>this is before applying above method
<a href=""https://i.stack.imgur.com/6PgUb.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/6PgUb.png"" alt=""enter image description here""></a>
<br /><br /> and this is after applying above method 
<a href=""https://i.stack.imgur.com/CM9z5.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/CM9z5.png"" alt=""enter image description here""></a>
<br /><a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow noreferrer"">Camera2Video google sample</a></p>

<p>and i also removed thse two lines in the <code>fragment_camera2_video.xml</code></p>

<pre><code> android:layout_below=""@id/texture""
    android:background=""#4285f4""
</code></pre>

<p>I am calling setAspectRation from my camera Fragment as follows</p>

<pre><code>  mPreviewSize = chooseOptimalSize(map.getOutputSizes(ImageFormat.JPEG),
                        rotatedPreviewWidth, rotatedPreviewHeight, maxPreviewWidth,
                        maxPreviewHeight, largest);

                // We fit the aspect ratio of TextureView to the size of preview we picked.
                int orientation = getResources().getConfiguration().orientation;
                if (orientation == Configuration.ORIENTATION_LANDSCAPE) {
                    mTextureView.setAspectRatio(
                            mPreviewSize.getWidth(), mPreviewSize.getHeight(), universal_width, universal_height, largest);
                } else {
                    mTextureView.setAspectRatio(
                            mPreviewSize.getHeight(), mPreviewSize.getWidth(), universal_width, universal_height, largest);
                }
</code></pre>
",5794116,,5794116,,2017-07-14 6:39:12,2017-07-14 6:39:12,,,,8,,,
Android,41413853,2,,41385783,2017,,1,,"<blockquote>
  <p>passing context to the presenter beats the purpose of using Google Dagger</p>
</blockquote>

<p>If Android apps had a single entry point (like a <code>main(String [] args)</code> method) then it would be possible and desirable to inject all dependencies, including Context, using Dagger alone. In other words, you wouldn't have to have this system where a Dagger Component is initialized with a Context as a parameter. If this was the case then passing a Context to the presenter would, in some way, beat the purpose of using Dagger 2.</p>

<p>However, the instances of Application and Activity that constitute an app are not able to be instantiated directly. Although some of these classes may have public constructors, you cannot obtain a fully-functional instance through instantiation. Instead, these classes are instantiated are supplied with a Context and other dependencies (such as a FragmentManager) by the system.  </p>

<p>Likewise, having the Context from the Application or Activity as a dependency for the repository/data or model is not a preventable violation separation of concerns between model and view.</p>

<blockquote>
  <p>I would like to know if this is the correct way of implementing MVP using Google Dagger 2</p>
</blockquote>

<p>For this I think you will have to compare what you have done with other sample MVP projects. Here is the <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-dagger/"" rel=""nofollow noreferrer"">official one from Google</a></p>

<p>Also, you will have to decide if you have really fulfilled the three salient features of <a href=""https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93presenter"" rel=""nofollow noreferrer"">MVP</a>:</p>

<blockquote>
  <ol>
  <li>The model is an interface defining the data to be displayed or otherwise acted upon in the user interface.</li>
  <li>The presenter acts upon the model and the view. It retrieves data from repositories (the model), and formats it for display in the view.</li>
  <li>The view is a passive interface that displays data (the model) and routes user commands (events) to the presenter to act upon that data.</li>
  </ol>
</blockquote>

<p>Rather than worrying about whether you have the 'correct solution' for MVP in Android, I think the most important thing is for you yourself to be able to understand and justify how your app fulfills the criteria of MVP and achieves separation of concerns within in the constraints of the Android architecture.</p>
",5241933,,5241933,,2017-01-01 10:23:53,2017-01-01 10:23:53,,,,0,,,
Android,31399045,2,,31397477,2015,,1,,"<p>You may clone samples at <a href=""https://github.com/googlesamples/android-ndk.git"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk.git</a>, according to android studio doc <a href=""http://tools.android.com/tech-docs/android-ndk-preview"" rel=""nofollow noreferrer"">http://tools.android.com/tech-docs/android-ndk-preview</a>.</p>

<p>You had errors compiling the samples until I append </p>

<pre><code>tasks.withType(JavaCompile) {
    sourceCompatibility = JavaVersion.VERSION_1_7
    targetCompatibility = JavaVersion.VERSION_1_7
}
</code></pre>

<p>to build.gradle (app).</p>

<p><a href=""https://stackoverflow.com/questions/31371440/android-studio-new-gradle-build-ndk-sample-app-error/31398811#31398811"">Android Studio: New gradle build NDK sample app error</a></p>
",3079823,,-1,,2017-05-23 11:44:00,2015-07-14 6:18:05,,,,0,,,
Android,31494321,2,,31493900,2015,,1,,"<p>I'm not sure I understand the question exactly, but I think there is an official Android sample that does exactly that:</p>

<p><a href=""https://github.com/googlesamples/android-SlidingTabsColors/"" rel=""nofollow"">https://github.com/googlesamples/android-SlidingTabsColors/</a></p>

<p>This is at least a reasonable starting point..</p>
",3029413,,,,,2015-07-18 18:38:00,,,,0,,,
Android,41409103,2,,41112281,2016,,1,,"<p>There looks to be at least 2 different issues right now affecting <code>PdfRenderer</code> behaviour.</p>

<p>First one is related to bug in v2.2 of gradle plugin (<a href=""https://code.google.com/p/android/issues/detail?id=224273"" rel=""nofollow noreferrer"">https://code.google.com/p/android/issues/detail?id=224273</a>) that affects treatment of following gradle config that's required to ensure pdf is not compressed (as mentioned in <a href=""https://github.com/googlesamples/android-PdfRendererBasic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-PdfRendererBasic</a>).  This is required as <code>PdfRenderer</code> needs a <code>ParcelFileDescriptor</code> that is seekable (so file cannot be compressed). You can reproduce this issue with google's <code>PdfRendererBasic</code> sample by using 2.2 version of gradle plugin.  A fix for this is to revert to v2.1.2 of plugin. </p>

<pre><code>android {
    aaptOptions {
        noCompress ""pdf""
    }
}
</code></pre>

<p>The other issue doesn't seem to be occurring in <code>PdfRendererBasic</code> sample but is in other apps (including mine!) and seems to be related to packaging of apk (<a href=""https://stackoverflow.com/questions/35345596/android-studio-pdfrendererbasic-unable-to-replace-sample-pdf"">Android Studio - PDFRendererBasic - Unable to replace sample.pdf?</a> contains detailed discussion on issue).  </p>

<p>One suggestion in last linked SO article was to read from <code>raw</code> folder instead....however this didn't work for me for some reason.  What I had to do in the end was ready pdf from SD card using something like following</p>

<pre><code>    String pdfPath = Environment.getExternalStorageDirectory() + ""/sample.pdf"";
    mFileDescriptor = ParcelFileDescriptor.open(new File(pdfPath), ParcelFileDescriptor.MODE_READ_ONLY);

    // This is the PdfRenderer we use to render the PDF.
    mPdfRenderer = new PdfRenderer(mFileDescriptor);
</code></pre>
",793861,,-1,,2017-05-23 12:18:09,2016-12-31 14:26:02,,,,0,,,
Android,49547765,2,,49541019,2018,,1,,"<p>It looks like your trying to access the <a href=""https://developers.google.com/android-publisher/api-ref/reviews/list"" rel=""nofollow noreferrer"">Review.list()</a> method.</p>

<p>Try putting this after your value for <code>service</code></p>

<pre><code>reviews_list = service.reviews().list(packageName=package_name).execute()
</code></pre>

<p>For reference there is a similar example in the python directory of the <a href=""https://github.com/googlesamples/android-play-publisher-api/tree/master/v2/python"" rel=""nofollow noreferrer"">android-play-publisher-api</a> repository.</p>

<p>A similar method is run at <a href=""https://github.com/googlesamples/android-play-publisher-api/blob/master/v2/python/basic_list_apks_service_account.py#L66"" rel=""nofollow noreferrer"">this point</a> in the code for the <a href=""https://developers.google.com/android-publisher/api-ref/edits/apks/list"" rel=""nofollow noreferrer"">Edits.apks: list</a> method</p>
",1844376,,,,,2018-03-29 3:54:34,,,,3,,,
Android,47517685,2,,47517469,2017,,1,,"<p>You can't get fingerprint template or image from android Fingerprint API. Fingerprint data are stored in a secure place by android system and are not accessible.</p>

<p>But you can ask the system to authenticate the user.</p>

<p>Here<a href=""https://github.com/googlesamples/android-FingerprintDialog"" rel=""nofollow noreferrer"">sample code</a></p>

<p>The doc, in section<a href=""https://developer.android.com/about/versions/marshmallow/android-6.0.html"" rel=""nofollow noreferrer"">Fingerprint Authentication</a></p>
",5955784,,,,,2017-11-27 18:39:30,,,,0,,,
Android,50202803,2,,50201721,2018,,1,,"<p>Changing from MutableLiveData which always resends the previous set values to new subscribers, to SingleLiveEvent which doesn't have this behaviour, solved the problem.</p>

<p>The class can be found here: <a href=""https://github.com/googlesamples/android-architecture/tree/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture/tree/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp</a></p>
",4020474,,,,,2018-05-06 17:50:19,,,,0,,,
Android,31858505,2,,30444150,2015,,1,,"<p>I think the cardstream java code is a great set of java methods that one can use in your app. While there are no javadocs for cardstream you can read the descriptions of the method in the code itself as the method descriptions are written above the individual methods.</p>

<p>I would however make sure that your app can use cardstream before you import it into your code.</p>

<p>For example, if I look at the code, I can see that cardstream is just manipulating a linearLayout and not really adding cards to a recyclerview / listview. </p>

<p>The mainactivity displays the layout from here <a href=""https://github.com/googlesamples/android-play-places/blob/master/PlacePicker/Application/src/main/res/layout/activity_main.xml"" rel=""nofollow"">https://github.com/googlesamples/android-play-places/blob/master/PlacePicker/Application/src/main/res/layout/activity_main.xml</a>: </p>

<pre><code>&lt;fragment
    android:id=""@+id/fragment_cardstream""
    android:name=""com.example.google.playservices.placepicker.cardstream.CardStreamFragment""
    xmlns:android=""http://schemas.android.com/apk/res/android""
    xmlns:tools=""http://schemas.android.com/tools""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""
    tools:context="".MainActivity""
    tools:layout=""@layout/cardstream""/&gt;
</code></pre>

<p>The fragment then pulls the layout from here:</p>

<p><a href=""https://github.com/googlesamples/android-play-places/blob/master/PlacePicker/Application/src/main/res/layout/cardstream.xml"" rel=""nofollow"">https://github.com/googlesamples/android-play-places/blob/master/PlacePicker/Application/src/main/res/layout/cardstream.xml</a></p>

<pre><code>&lt;ScrollView xmlns:android=""http://schemas.android.com/apk/res/android""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""
    android:fillViewport=""true""&gt;

    &lt;com.example.google.playservices.placepicker.cardstream.CardStreamLinearLayout
        style=""@style/CardStream""
        android:id=""@+id/card_stream""
        android:layout_width=""match_parent""
        android:layout_height=""match_parent""/&gt;

&lt;/ScrollView&gt;
</code></pre>

<p>The layout here that the fragment uses is a cardStreamLinearLayout.</p>

<p>If your app just want to addViews / removeView for a few cards from a linearLayout, then this library is great. But most android apps will want to add on a 'stream' of cards, so it doesn't really make sense from an efficiency perspective to add them onto the linearLayout as that would really be inefficient.</p>

<p>There are tools available on android like listview or recyclerview which would provide a better experience as they are optimised to do so.</p>
",3178944,,,,,2015-08-06 14:31:27,,,,0,,,
Android,48184858,2,,48176187,2018,,1,,"<p>There are complete code samples and documentation for doing this in Java <a href=""https://developers.google.com/android-publisher/libraries"" rel=""nofollow noreferrer"">here</a></p>

<p>In the <a href=""https://github.com/googlesamples/android-play-publisher-api/blob/master/v2/java/src/com/google/play/developerapi/samples/AndroidPublisherHelper.java"" rel=""nofollow noreferrer"">Java source code</a> this authorizes like this</p>

<pre><code>private static Credential authorizeWithServiceAccount(String serviceAccountEmail)
            throws GeneralSecurityException, IOException {
        log.info(String.format(""Authorizing using Service Account: %s"", serviceAccountEmail));

        // Build service account credential.
        GoogleCredential credential = new GoogleCredential.Builder()
                .setTransport(HTTP_TRANSPORT)
                .setJsonFactory(JSON_FACTORY)
                .setServiceAccountId(serviceAccountEmail)
                .setServiceAccountScopes(
                        Collections.singleton(AndroidPublisherScopes.ANDROIDPUBLISHER))
                .setServiceAccountPrivateKeyFromP12File(new File(SRC_RESOURCES_KEY_P12))
                .build();
        return credential;
    }
</code></pre>
",7635471,,7635471,,2018-01-11 11:00:22,2018-01-11 11:00:22,,,,4,,,
Android,39458286,2,,39439437,2016,,1,,"<p>You can control the size of the preview widget.
Change this line <a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/ocr-reader/app/src/main/res/layout/ocr_capture.xml#L12"" rel=""nofollow"">https://github.com/googlesamples/android-vision/blob/master/visionSamples/ocr-reader/app/src/main/res/layout/ocr_capture.xml#L12</a> to whatever you want.</p>

<p>This is the Android documentation about the possible values you can use for <code>layout_width</code> and <code>layout_height</code> properties <a href=""https://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html"" rel=""nofollow"">https://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html</a></p>
",1750600,,,,,2016-09-12 20:25:23,,,,4,,,
Android,48712165,2,,48712071,2018,,1,,"<blockquote>
  <p>i see some people using asyncTask but i dont think this is the corret way or using another library like RXjava</p>
</blockquote>

<p>It is correct </p>

<blockquote>
  <p>where i can call it? </p>
</blockquote>

<p>On a separate thread. The simplest non-Android example would be</p>

<pre><code>// works (pre-java8)
Thread t = new Thread() {
    @Override
    public void run() {
        mAppDatabase.userDao().insert(u);
    }
};
t.start();
</code></pre>

<p>The <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/BasicRxJavaSample"" rel=""nofollow noreferrer"">Android example architecture</a> code is a good starting point for doing RX work. </p>

<p>Kotlin also provides simpler threading syntax</p>
",2308683,,,,,2018-02-09 18:39:52,,,,3,,,
Android,48723201,2,,48611150,2018,,1,,"<p>Using a listener is not recommended. The android-architecture project uses a <a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java"" rel=""nofollow noreferrer"">SingleLiveEvent</a> class for events like navigation or displaying a <code>Snackbar</code>. You can use the same class for showing a dialog.</p>

<p>In your <code>OverviewViewModel</code> you can add another field:</p>

<pre><code>final SingleLiveEvent&lt;Void&gt; tokenLiveData = SingleLiveEvent&lt;Void&gt;();
</code></pre>

<p>in your <code>onFaliure</code> callback you can use:</p>

<pre><code>tokenLiveData.call()
</code></pre>

<p>instead of the callback.</p>

<p>In your activity subscribe to <code>tokenLiveData</code> and show a dialog when it emits a value.</p>
",1011435,,,,,2018-02-10 16:52:58,,,,0,,,
Android,39794428,2,,39597354,2016,,1,,"<p>It looks like you're talking about the sample app, the source for which you can find here. Notice the TODO on line 335 (in onTap) -- unfortunately, the sample code just returns a random barcode result:</p>

<p><a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/BarcodeCaptureActivity.java"" rel=""nofollow"">https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/BarcodeCaptureActivity.java</a></p>

<p>Try modifying the sample to select the barcode whose bounding rectangle contains the tap point.</p>
",6905314,,,,,2016-09-30 14:55:50,,,,3,,,
Android,48735981,2,,48723474,2018,,1,,"<p>Let's say from ActivityA you click a button which starts ActivityB:</p>

<pre><code>Intent intent = new Intent(this, ActivityB.class);
                intent.putExtra(""MY_EXTRA"", ""MY EXTRA VALUE"");
</code></pre>

<p>A test which checks that you're sending the right data to ActivityB would be:</p>

<pre><code>@Rule
public IntentsTestRule&lt;ActivityA&gt; intentsTestRule = new IntentsTestRule&lt;&gt;(ActivityA.class);

@Test
public void testIntents() {
    //from ActivityA, click the button which starts the ActivityB
    onView(withText(""ClickMe"")).perform(click());

    //validate intent and check its data
    intended(allOf(
            toPackage(""com.your.package.name""),
            hasExtra(""MY_EXTRA"", ""MY EXTRA VALUE"")
    ));
}
</code></pre>

<p>Check out the examples provided by google: <a href=""https://github.com/googlesamples/android-testing/tree/master/ui/espresso/IntentsBasicSample"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-testing/tree/master/ui/espresso/IntentsBasicSample</a> </p>

<p>and some documentation here: <a href=""https://developer.android.com/training/testing/espresso/intents.html"" rel=""nofollow noreferrer"">https://developer.android.com/training/testing/espresso/intents.html</a>.</p>
",5940488,,5940488,,2018-02-12 9:00:07,2018-02-12 9:00:07,,,,0,,,
Android,39034002,2,,39033804,2016,,1,,"<p>Android has Bluetooth support, but it only allow to send ot receive data from stream. There is a very good sample project from Google: <a href=""https://github.com/googlesamples/android-BluetoothChat"" rel=""nofollow"">https://github.com/googlesamples/android-BluetoothChat</a> . The only drawback of this sample is that it use Handler to nitify about Bluetooth events. I changed it a bit so it use another Thread and from it calls methods of interface you set, take a look at project: <a href=""https://github.com/AlexShutov/LEDLights"" rel=""nofollow"">https://github.com/AlexShutov/LEDLights</a> . This is ordinary Bluetooth, not BLE, hope it will help</p>
",6175778,,,,,2016-08-19 8:02:58,,,,0,,,
Android,39080706,2,,39080538,2016,,1,,"<p>There's a Sample app provided by Google, please see the Sample <a href=""https://github.com/googlesamples/android-RuntimePermissions"" rel=""nofollow"">here on Github</a>.</p>

<p>Spacifically see the code of <a href=""https://github.com/googlesamples/android-RuntimePermissions/blob/master/Application/src/main/java/com/example/android/system/runtimepermissions/MainActivity.java"" rel=""nofollow"">MainActivity</a> for how to check for multiple permissions.</p>

<p>Hope it helps!</p>
",1791546,,,,,2016-08-22 13:20:47,,,,0,,,
Android,34290455,2,,24647146,2015,,1,,"<p>Go through this Google Places Api <a href=""https://github.com/googlesamples/android-play-places/blob/master/PlaceComplete/Application/src/main/java/com/example/google/playservices/placecomplete/MainActivity.java"" rel=""nofollow"">Sample</a> which describes a way of doing so.</p>

<p>It has a method <code>formatPlaceDetails</code> that Format details of the place for display. It does not support HTML tags directly, they need to be encoded first.</p>

<pre><code>private static Spanned formatPlaceDetails(Resources res, CharSequence name, String id,
            CharSequence address, CharSequence phoneNumber, Uri websiteUri) {
        Log.e(TAG, res.getString(R.string.place_details, name, id, address, phoneNumber,
                websiteUri));
        return Html.fromHtml(res.getString(R.string.place_details, name, id, address, phoneNumber,
                websiteUri));

    }
</code></pre>

<p><strong>string.xml</strong></p>

<pre><code>&lt;string name=""place_details""&gt;&amp;lt;b&amp;gt;%1$s&amp;lt;/b&amp;gt;&amp;lt;br/&amp;gt;&amp;lt;i&amp;gt;Place Id: %2$s&amp;lt;/i&amp;gt;&amp;lt;br/&amp;gt;Address: %3$s&amp;lt;br/&amp;gt;Phone: %4$s&amp;lt;br/&amp;gt;Website: %5$s&lt;/string&gt;
</code></pre>
",3140227,,,,,2015-12-15 13:24:36,,,,0,,,
Android,43155128,2,,43150975,2017,,1,,"<p>If you are interested in implementing MVP in Android, please refer to the <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-dagger/"" rel=""nofollow noreferrer"">Google Android Architecture Blueprints</a>.</p>

<p>With respect to your question:</p>

<blockquote>
  <p>Because Model will decide which method should be worked in presenter and according to choosed method the presenter will invoke view methods.</p>
</blockquote>

<p>This isn't the usual way of doing MVP. In MVP, the model is passive and the presenter is the agent. </p>

<p><a href=""https://i.stack.imgur.com/WaWeK.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/WaWeK.png"" alt=""model view presenter""></a></p>

<p><em>(Diagram from <a href=""https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93presenter"" rel=""nofollow noreferrer"">MVP Wikipedia page</a>)</em></p>

<p>As per the diagram above, the presenter manipulates the model, and the model doesn't know or care about the presenter. When it is necessary for the model to notify the presenter of state change events it is done through <em>the presenter</em> registering for callbacks from the model. This is also clear in the Blueprint example:</p>

<pre><code>@Inject
TasksPresenter(TasksRepository tasksRepository, TasksContract.View tasksView) {
    mTasksRepository = tasksRepository;
    mTasksView = tasksView;
}
</code></pre>

<p>The presenter takes a dependency on the model (the tasks repository) but the tasks repository doesn't know or care about who is consuming it. While the linked example doesn't show a state-change event propagating from the model layer to the presenter, if there was one it probably be done through registering a callback inside the presenter layer. Something like the following:</p>

<pre><code>mTasksRepository.registerStateChangeEvent(this);
</code></pre>

<p>Likewise, the example also shows loading similar to yours and correctly places this inside the presenter:</p>

<pre><code>private void loadStatistics() {
    mStatisticsView.setProgressIndicator(true);

    // The network request might be handled in a different thread so make sure Espresso knows
    // that the app is busy until the response is handled.
    EspressoIdlingResource.increment(); // App is busy until further notice

    mTasksRepository.getTasks(new TasksDataSource.LoadTasksCallback() {
    //snip    
</code></pre>

<p>Because <code>mTasksRepository</code> doesn't take any dependencies that relate to the view or presenter and is manipulated as a patient by the presenter, we still maintain separation of concerns.</p>
",5241933,,5241933,,2017-04-02 2:08:26,2017-04-02 2:08:26,,,,2,,,
Android,51742045,2,,51538443,2018,,1,,"<p>As per the answer given by google this is intended behaviour.<br>
<a href=""https://issuetracker.google.com/issues/111819103"" rel=""nofollow noreferrer"">https://issuetracker.google.com/issues/111819103</a></p>

<p>They gave 3 options </p>

<ol>
<li>Use android.view.ViewOutlineProvider (as per example here <a href=""https://github.com/googlesamples/android-ClippingBasic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ClippingBasic</a>).</li>
<li>Replace the ImageView with a BitmapShader, which is fast (each pixel is drawn once) and more portable way as BitmapShader is supported in API level 1.
Paint paint = new Paint();
paint.setColor(Color.BLACK);
paint.setStyle(Paint.Style.FILL);
Bitmap bm = BitmapFactory.decodeResource(getResources(), R.drawable.spiderman);
Shader shader = new BitmapShader(bm, Shader.TileMode.CLAMP, Shader.TileMode.CLAMP);
paint.setShader(shader);
Path corners = new Path();
corners.addRoundRect(bounds, radii, Path.Direction.CW);
canvas.drawPath(corners, paint);</li>
<li>Draw an inverse path with SRC_OVER on top of the ImageView. This works if background is solid color and it is slower, because some pixels are drawn twice.</li>
</ol>

<p>Of these the first can't be used to render convex complex path as is answered in <a href=""https://issuetracker.google.com/issues/37064491"" rel=""nofollow noreferrer"">https://issuetracker.google.com/issues/37064491</a></p>

<p>Trying the other two options and post the results here. </p>
",944412,,,,,2018-08-08 8:28:42,,,,0,,,
Android,34601777,2,,29385090,2016,,1,,"<p>I had this problem and solved it by following the steps in this blog:
<a href=""http://ph0b.com/new-android-studio-ndk-support/"" rel=""nofollow"">http://ph0b.com/new-android-studio-ndk-support/</a></p>

<p>and looking at the source code of this project:
<a href=""https://github.com/googlesamples/android-ndk/tree/master/hello-jni"" rel=""nofollow"">https://github.com/googlesamples/android-ndk/tree/master/hello-jni</a></p>

<p>I hope that helps.</p>
",550471,,,,,2016-01-04 23:31:42,,,,0,,,
Android,43165263,2,,43163138,2017,,1,,"<p>The situation you are experiencing may be a consequence of organising your Modules and Components in an unusual way. In particular, grouping laterally (one Component injects all the Presenters) rather than vertically (one component injects the functionality related to <code>SelectOpponentActivity</code>) is problematic.</p>

<p>A good example to follow is in the <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">Google Android Architecture Blueprints GitHub repo</a>. If you peruse the code there, you will see that they have organised functionality related to Tasks inside one Java package together with a separate Component, Module, Presenter etc. This has the nice advantage of being able to restrict accessibility of the constructors of the classes contained therein and fulfilling Effective Java Item 13: <em>Minimize the accesibility of classes and members.</em></p>

<p>Likewise, you've grouped all your modules together into a Presenter Module and an Interactor Module. The advice from the Dagger 2 official documentation is to <a href=""https://google.github.io/dagger/testing.html"" rel=""nofollow noreferrer"">organise Modules first for testability</a> and then along functional lines. Again, you can refer to the Blueprint example for how to do this. </p>

<p>Finally, note that there is unavoidably some boilerplate involved in using most DI frameworks like Dagger 2. In a sense, you are exchanging a bigger problem (""how do I deal with all of these constructors?"") with much smaller and more manageable problems (""how do I group my Components"" etc.).</p>

<p><strong>Update</strong>
There is a library called Auto Dagger2 that can generate components for you. See <a href=""https://github.com/lukaspili/Auto-Dagger2"" rel=""nofollow noreferrer"">this Github repo</a>. Here is an example of an annotation:</p>

<pre><code>@AutoComponent
@Singleton
public class ExampleApplication extends Application { 
}
</code></pre>

<p>Which generates the following code:</p>

<pre><code>@Component
@Singleton
public interface ExampleApplicationComponent { 
}
</code></pre>

<p>Also check out <a href=""https://github.com/google/auto/"" rel=""nofollow noreferrer"">Google Auto</a> if you are interested in code generation tools.</p>
",5241933,,5241933,,2017-04-04 2:10:27,2017-04-04 2:10:27,,,,6,,,
Android,34610668,2,,34608703,2016,,1,,"<p><code>SupportPlaceAutocompleteFragment</code> requires <strong><em>Google Play Services 8.4</em></strong> and you are using Google Play Services 7.5.0</p>

<p>Use : 
<code>compile 'com.google.android.gms:play-services:8.4.0'</code></p>

<p>or</p>

<p><code>compile 'com.google.android.gms:play-services-maps:8.4.0'
compile 'com.google.android.gms:play-services-location:8.4.0'
compile 'com.google.android.gms:play-services-analytics:8.4.0'
compile 'com.google.android.gms:play-services-gcm:8.4.0'
compile 'com.google.android.gms:play-services-ads:8.4.0'</code></p>

<p>Reference : <a href=""http://googlegeodevelopers.blogspot.in/2015/12/autocomplete-widget-and-updated-place.html"" rel=""nofollow"">New AutoComplete Widget</a>.</p>

<p>Here is <a href=""https://github.com/googlesamples/android-play-places"" rel=""nofollow"">Sample Project</a> for implementing the same.</p>
",3140227,,3140227,,2016-01-05 11:35:52,2016-01-05 11:35:52,,,,0,,,
Android,48242576,2,,48242382,2018,,1,,"<p>You can't use <code>this</code> when you are calling Glide from inside another class in this case <code>AllUsersViewHolder</code>. You need to pass the context somehow and use that in place of <code>this</code>. You can technically get the context from <code>mView.getContext()</code>. Regardless of all that, you are using the <code>ViewHolder</code> pattern wrong. All the text assigning that you are doing needs to be done in <code>populateViewHolder</code> function using <code>viewHolder.&lt;layout&gt;.setText(text)</code>. Look at this recycler view <a href=""https://github.com/googlesamples/android-RecyclerView"" rel=""nofollow noreferrer"">sample</a> for help</p>
",9119277,,,,,2018-01-13 17:47:13,,,,1,,,
Android,48273831,2,,48273544,2018,,1,,"<p>Yes. <code>Dagger2</code> works in unit tests and instrumented tests. An example is here: <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-dagger"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture/tree/todo-mvp-dagger</a></p>

<p>Here is an example of a module used in a mock variant which can be used for unit/ui testing:</p>

<pre><code>@Module
abstract public class TasksRepositoryModule {

    private static final int THREAD_COUNT = 3;

    @Singleton
    @Binds
    @Local
    abstract TasksDataSource provideTasksLocalDataSource(TasksLocalDataSource dataSource);

    @Singleton
    @Binds
    @Remote
    abstract TasksDataSource provideTasksRemoteDataSource(FakeTasksRemoteDataSource dataSource);

    @Singleton
    @Provides
    static ToDoDatabase provideDb(Application context) {
        return Room.databaseBuilder(context.getApplicationContext(), ToDoDatabase.class, ""Tasks.db"")
                .build();
    }

    @Singleton
    @Provides
    static TasksDao provideTasksDao(ToDoDatabase db) {
        return db.taskDao();
    }

    @Singleton
    @Provides
    static AppExecutors provideAppExecutors() {
        return new AppExecutors(new DiskIOThreadExecutor(),
                Executors.newFixedThreadPool(THREAD_COUNT),
                new AppExecutors.MainThreadExecutor());
    }
}
</code></pre>

<p><a href=""https://github.com/googlesamples/android-architecture/blob/todo-mvp-dagger/todoapp/app/src/mock/java/com/example/android/architecture/blueprints/todoapp/data/source/TasksRepositoryModule.java#L24"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture/blob/todo-mvp-dagger/todoapp/app/src/mock/java/com/example/android/architecture/blueprints/todoapp/data/source/TasksRepositoryModule.java#L24</a></p>
",3268303,,5164673,,2018-01-27 16:58:54,2018-01-27 16:58:54,,,,0,,,
Android,52577475,2,,52577362,2018,,1,,"<p>I would say that this is possible after the introduction of Android <a href=""https://developer.android.com/reference/android/app/NativeActivity"" rel=""nofollow noreferrer""><code>NativeActivity</code></a></p>

<p>This is the example Google provides on how this is done:
<a href=""https://github.com/googlesamples/android-ndk/tree/master/native-activity"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk/tree/master/native-activity</a></p>

<p>It depends though what you want to achieve because there are some Android API's that are not available in C/C++. But more and more are added check <a href=""https://developer.android.com/ndk/reference/"" rel=""nofollow noreferrer"">here</a>.</p>

<p>For more NDK related staff go thourgh <a href=""https://developer.android.com/ndk"" rel=""nofollow noreferrer"">Android NDK Documentation</a></p>
",944070,,944070,,2019-03-04 18:02:55,2019-03-04 18:02:55,,,,0,,,
Android,44233597,2,,44213150,2017,,1,,"<p>Please take a look at the official sample apps from Google, such as <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">Camera2Basic</a>, or the new <a href=""https://github.com/google/cameraview"" rel=""nofollow noreferrer"">CameraView</a> library.  They handle aspect ratio issues such as what you're seeing.</p>
",1344825,,,,,2017-05-29 1:35:43,,,,2,,,
Android,52643751,2,,52474488,2018,,1,,"<p>one can pass arguments with <a href=""https://developer.android.com/studio/command-line/adb#am"" rel=""nofollow noreferrer"">adb am instrument</a>:</p>

<pre><code>adb push ./app/build/outputs/apk/debug/com.&lt;package_name&gt;-debug.apk /data/local/tmp/com.&lt;package_name&gt;.debug
adb shell pm install -t -r ""/data/local/tmp/com.&lt;package_name&gt;.debug""
adb push ./app/build/outputs/apk/androidTest/debug/com.&lt;package_name&gt;-debug-androidTest.apk /data/local/tmp/com.&lt;package_name&gt;.debug.test
adb shell pm install -t -r ""/data/local/tmp/com.&lt;package_name&gt;.debug.test""
adb shell am instrument -w -r -e debug true -e class 'com.&lt;package_name&gt;.ExampleInstrumentedTest' com.&lt;package_name&gt;.debug.test/android.support.test.runner.AndroidJUnitRunner
Waiting for application to come online: com.&lt;package_name&gt;.debug.test | com.&lt;package_name&gt;.debug
Connecting to com.&lt;package_name&gt;.debug
</code></pre>

<p>maybe better use a <a href=""https://developer.android.com/training/testing/junit-rules"" rel=""nofollow noreferrer"">TestRule</a> to mock parameter input. </p>

<p>one can also pass <code>android.testInstrumentationRunnerArguments.class</code> alike:</p>

<pre><code>./gradlew app:connectedAndroidTest -P android.testInstrumentationRunnerArguments.class=com.&lt;package_name&gt;.ExampleInstrumentedTest#someMethodToTest
</code></pre>

<p>or pass further arguments alike</p>

<pre><code>-Pandroid.testInstrumentationRunnerArguments.argument1=make_test_fail
</code></pre>

<p>while one can run whole groups of tests (eg. <code>EspressoTest</code>) alike:</p>

<pre><code>./gradlew app:connectedAndroidTest -Pandroid.testInstrumentationRunnerArguments.class=com.example.android.testing.blueprint.ui.espresso.EspressoTest
</code></pre>

<p>see the <a href=""https://github.com/googlesamples/android-testing-templates/tree/master/AndroidTestingBlueprint"" rel=""nofollow noreferrer"">Android Testing Blueprint</a>.</p>
",549372,,549372,,2018-10-05 1:48:42,2018-10-05 1:48:42,,,,0,,,
Android,34069687,2,,28165753,2015,,1,,"<p>This is now possible using <code>com.android.test</code> plugin. Works fine for Java and resources stuff.</p>

<p>An example by Google can be found <a href=""https://github.com/googlesamples/android-testing-templates/blob/master/AndroidTestingBlueprint/module-flavor1-androidTest-only/build.gradle"" rel=""nofollow"">here</a>.</p>

<p>Basically you create a separate module for testing and define which module and flavor should be tested. I've just checked it and it has some issues with working with the IDE, but runs fine with gradle command line.</p>
",1756721,,,,,2015-12-03 15:22:26,,,,0,,,
Android,52963515,2,,52963418,2018,,1,,"<p>The Fingerprint Authentication is offered from Android 6.0+. It is not supported for lower versions. </p>

<p>Refer this example for Fingerprint Authentication (for above android 6.0)</p>

<p><a href=""https://github.com/googlesamples/android-FingerprintDialog"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-FingerprintDialog</a></p>

<p>I also found a easy tutorial that might help you in this regard.</p>

<p><a href=""https://dzone.com/articles/android-fingerprint-authentication-tutorial"" rel=""nofollow noreferrer"">https://dzone.com/articles/android-fingerprint-authentication-tutorial</a></p>

<p>For previous android version each company such as Samsung, Motorola, HTC created its own API and SDK to access to fingerprint sensor.</p>

<p>For instance Samsung provide a SDK <a href=""http://developer.samsung.com/galaxy#pass"" rel=""nofollow noreferrer"">http://developer.samsung.com/galaxy#pass</a></p>

<blockquote>
  <p>Pass SDK allows you to use fingerprint recognition features in your application. With Pass SDK, you can provide reinforced security, since you can identify whether the current user actually is the authentic owner of the device.</p>
</blockquote>
",8850875,,,,,2018-10-24 7:48:24,,,,1,,,
Android,44247207,2,,43923586,2017,,1,,"<p>To answer the original question on how to use getBuyIntentExtraParams, I found out that you need to copy the actual aidl file from google and replace your aidl file.. Do not copy the code inside google's aidl and replace your code. </p>

<p>Latest aidl file from google: <a href=""https://github.com/googlesamples/android-play-billing/blob/0154723d8c97011fb5ce0163d55b496cb5ebccb7/TrivialDrive/app/src/main/aidl/com/android/vending/billing/IInAppBillingService.aidl"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-billing/blob/0154723d8c97011fb5ce0163d55b496cb5ebccb7/TrivialDrive/app/src/main/aidl/com/android/vending/billing/IInAppBillingService.aidl</a></p>
",7999135,,,,,2017-05-29 16:47:24,,,,0,,,
Android,48375721,2,,48005850,2018,,1,,"<p><a href=""https://github.com/googlesamples/android-RuntimePermissions/"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-RuntimePermissions/</a></p>

<p>is the root directory of one android project which has <code>Application</code> as module.
Open root android project as show as below</p>

<p><a href=""https://i.stack.imgur.com/UfjsX.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/UfjsX.png"" alt=""Click ok button to open root project""></a></p>

<p>Click <strong>ok</strong> button to open <code>root project</code></p>

<p>But the issue is Application module doesn't have build.gradle file. So it won't load as a module.
Create one build.gradle file inside Application folder and paste the below code</p>

<pre><code>    apply plugin: 'com.android.application'

android {
    compileSdkVersion 26
    buildToolsVersion ""26.0.2""
    defaultConfig {
        applicationId ""com.example.android.system.runtimepermissions""
        minSdkVersion 15
        targetSdkVersion 26
        versionCode 1
        versionName ""1.0""
        testInstrumentationRunner ""android.support.test.runner.AndroidJUnitRunner""
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
}

dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2', {
        exclude group: 'com.android.support', module: 'support-annotations'
    })
    compile ""com.android.support:support-v13:26.0.0""
    compile ""com.android.support:appcompat-v7:26.0.0""
    compile 'com.android.support:design:26.0.0'
    testCompile 'junit:junit:4.12'
}
repositories {
    mavenCentral()
}
</code></pre>

<p>There are some error inside styles.xml about resource not found. Please correct it and use.</p>

<p><a href=""https://github.com/googlesamples/android-RuntimePermissions/tree/master/kotlinApp"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-RuntimePermissions/tree/master/kotlinApp</a></p>

<p><code>kotlinApp</code> is another folder which have no connection with above project. It is another android project which have <code>app</code> as module
Open kotlinApp android project as show as below :</p>

<p><a href=""https://i.stack.imgur.com/XHfy2.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/XHfy2.png"" alt=""Open kotlinApp project""></a></p>

<p>Click <strong>ok</strong> button to open <code>kotlinApp</code> android project</p>

<p>In short, this repository consist of two android project. One is <strong>root folder</strong> and another is <strong>kotlinApp</strong> <strong>folder</strong>.</p>
",3451344,,3451344,,2018-01-22 6:51:33,2018-01-22 6:51:33,,,,0,,,
Android,52607257,2,,52607101,2018,,1,,"<p>In <a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationUpdatesPendingIntent/app/src/main/java/com/google/android/gms/location/sample/locationupdatespendingintent/MainActivity.java"" rel=""nofollow noreferrer"">LocationUpdatesPendingIntent</a> there is a small disclaimer:</p>

<pre><code>    // Sets the maximum time when batched location updates are delivered. Updates may be
    // delivered sooner than this interval.
    mLocationRequest.setMaxWaitTime(MAX_WAIT_TIME);
</code></pre>
",6748991,,,,,2018-10-02 11:16:20,,,,1,,,
Android,43485466,2,,31973415,2017,,1,,"<blockquote>
  <p>Just to give another option as this solution didn't work for me.</p>
</blockquote>

<p>I found this really useful thread where it propose some workarounds related to the memory leak in MapView:</p>

<p><a href=""https://github.com/googlesamples/android-play-location/issues/26"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-location/issues/26</a></p>

<p>For me, the most interesting things from this thread (that worked for me) is:</p>

<blockquote>
  <p>1) Make sure to unregister your callbacks:</p>
</blockquote>

<pre><code>if (googleApiClient != null) {
        googleApiClient.unregisterConnectionCallbacks(this);
        googleApiClient.unregisterConnectionFailedListener(this);

        if (googleApiClient.isConnected()) {
                LocationServices.FusedLocationApi.removeLocationUpdates(googleApiClient, this);
        }

        googleApiClient.disconnect();
        googleApiClient = null;
 }
</code></pre>

<blockquote>
  <p>2) Use a WeakReference for LocationListener</p>
</blockquote>

<pre><code>public class WeakLocationListener implements LocationListener {

    private final WeakReference&lt;LocationListener&gt; locationListenerRef;

    public WeakLocationListener(@NonNull LocationListener locationListener) {
        locationListenerRef = new WeakReference&lt;&gt;(locationListener);
    }

    @Override
    public void onLocationChanged(android.location.Location location) {
        if (locationListenerRef.get() == null) {
            return;
        }
        locationListenerRef.get().onLocationChanged(location);
    }

}
</code></pre>

<p>Hope it helps!</p>
",3212266,,,,,2017-04-19 2:47:21,,,,0,,,
Android,26617199,2,,26488015,2014,,1,,"<p><strong>1. ActionBarDrawerToggle: deprecation, new version style for Lollipop and updated samples</strong></p>

<p><a href=""http://developer.android.com/reference/android/support/v4/widget/DrawerLayout.html"" rel=""nofollow noreferrer"">DrawerLayout</a> has a nested interface <a href=""http://developer.android.com/reference/android/support/v4/widget/DrawerLayout.DrawerListener.html"" rel=""nofollow noreferrer"">DrawerListener</a> implemented by:</p>

<ol>
<li><a href=""http://developer.android.com/reference/android/support/v4/app/ActionBarDrawerToggle.html"" rel=""nofollow noreferrer"">android.support.v4.app.ActionBarDrawerToggle (deprecated on API 21)</a>.</li>
<li><a href=""http://developer.android.com/reference/android/support/v7/app/ActionBarDrawerToggle.html"" rel=""nofollow noreferrer"">android.support.v7.app.ActionBarDrawerToggle (recommended  version)</a>.</li>
</ol>

<p>The new <a href=""http://developer.android.com/tools/support-library/features.html#v7-appcompat"" rel=""nofollow noreferrer"">support-v7-appcompat</a> version is compatible with <a href=""https://www.android.com/versions/lollipop-5-0/"" rel=""nofollow noreferrer"">Android Lollipop</a> and <a href=""https://developer.android.com/design/material/index.html"" rel=""nofollow noreferrer"">Material Design</a> style.</p>

<p>See <a href=""https://stackoverflow.com/a/27086157/1009132"">this response</a> to update it, or the <a href=""https://github.com/google/iosched"" rel=""nofollow noreferrer"">Google I/O app implementation</a> and <a href=""https://github.com/googlesamples/android-NavigationDrawer"" rel=""nofollow noreferrer"">Google sample</a>.</p>

<p>Requires latest SDK version, appcompat-v7.21.0.+, support-v4.21.0.+ and Android Support Repository.</p>

<hr>

<p><strong>2. Travis configuration: Latest SDK tools, platform-tools, build-tools and extra-m2repository required</strong></p>

<p>Add <code>extra-android-m2repository</code> and  <code>build-tools-21.1.1</code> to <code>android: components:</code>.</p>

<p><a href=""http://docs.travis-ci.com/user/languages/android/#CI-Environment-for-Android-Projects"" rel=""nofollow noreferrer"">Travis CI for Android projects</a> uses tools 23.0.2 by default, Lollipop requires <a href=""http://developer.android.com/tools/revisions/platforms.html#5.0"" rel=""nofollow noreferrer"">SDK tools 23.0.5</a>. </p>

<blockquote>
  <p>Important: To download the most recent Android system components from
  the Android SDK Manager, you must first update the SDK Tools to the
  most recent release and restart the SDK Manager. If you do not, the
  latest Android system components will not be available for download.</p>
</blockquote>

<p>You need update SDK <code>tools</code> first so you get the latest revisions of the other components. Tools v23.0.5 requires <code>platform-tools</code> v19+ to be updated and v21+ to work. Plus platform, sys-img, etc. Try this:</p>

<pre><code>android:
  components:
    # Uncomment the lines below if you want to
    # use the latest revision of Android SDK Tools
    - platform-tools
    - tools
    - build-tools-21.1.1
    - android-21
    - extra-android-support
    - extra-android-m2repository
    - extra-google-m2repository
    - extra-google-google_play_services
    - sys-img-armeabi-v7a-android-21
  licenses:
    - 'android-sdk-license-5be876d5'
</code></pre>

<hr>

<p><strong>3. Important: Gradle based projects require extra-android-m2repository no extra-android-support</strong></p>

<p><code>extra-android-m2repository</code> contains the artifacts (.aar files) for gradle/android studio.</p>

<blockquote>
  <p>Note: If you're developing with Android Studio, select and install
  the Android Support Repository item instead (of Android Support
  Library on Eclipse).</p>
</blockquote>

<p>Further info for Android Studio: <a href=""https://developer.android.com/tools/support-library/setup.html"" rel=""nofollow noreferrer"">https://developer.android.com/tools/support-library/setup.html</a></p>

<hr>

<p><strong>4. The missing DrawerLayoutImpl class contained in android.support:support-v4:21.0.2 internal .jar</strong></p>

<p><img src=""https://i.stack.imgur.com/BQBHk.png"" alt=""Missing DrawerLayoutImpl""></p>

<p>You can try to change <code>21.0.+</code> to <code>21.0.2</code>. I'm not sure about Travis-ci dependency resolution workflow.</p>

<pre><code>compile 'com.android.support:support-v4:21.0.2'

compile 'com.android.support:appcompat-v7:21.0.2'
</code></pre>

<p>I dont know but perhaps it copies other android.support version  without the inner missing class and jar.</p>

<p>Check if the internal jar is there by adding something as this to your build:</p>

<pre><code>export MOD_NAME= yourapplicationmodulename

'cat ${TRAVIS_BUILD_DIR}/${MOD_NAME}/build/intermediates/tmp/dex/debug/libraryList.txt'
</code></pre>

<p>If you use 21.0.+ and download the m2repository 21.0.0 version but then looks for updated versions on maven it foundd Android Support Library, revision 21.0.1 without the aar, so try the new 21.0.2 version.</p>

<hr>

<p><strong>5. Espresso or Double Espresso, DrawerActions, espresso-contrib jar and other dependencies</strong></p>

<p>About <code>Espresso</code> and other transitive dependencies to old support libraries, you could try to upgrade them or exclude the android.support <a href=""http://mvnrepository.com/artifact/com.jakewharton.espresso/espresso-support-v4/1.1-r2"" rel=""nofollow noreferrer"">dependencies</a>:</p>

<pre><code>configurations {
    compile.exclude group: 'com.android.support'
}
</code></pre>

<p>I'm not familiar with <code>Double espresso</code>, a pure Gradle port of the Espresso testing utility for Android but Jake Wharton writes <a href=""https://github.com/JakeWharton/double-espresso/"" rel=""nofollow noreferrer"">here</a> (<a href=""https://code.google.com/p/android/issues/detail?id=65445"" rel=""nofollow noreferrer"">Related issue</a>):</p>

<blockquote>
  <p>Duplicated Dependencies</p>
  
  <p>Due to a bug in the current Android plugin, you may need to exclude
  dependencies which are duplicated in both the app and test app.</p>
  
  <p>For example, if you have a dependency on Dagger you will need to
  manually exclude it from the test dependency for the time being.</p>
  
  <p>androidTestCompile('com.jakewharton.espresso:espresso:1.1-r3') {<br>
  exclude group: 'com.squareup.dagger' } The following are the
  dependencies of Espresso which may need to be temporarily excluded:</p>
  
  <p>com.squareup.dagger:dagger:1.2.1 ... and those of the 'support-v4'
  module:</p>
  
  <p>com.android.support:support-v4:21.0.0 &lt;-----------</p>
</blockquote>

<p>About <a href=""https://code.google.com/p/android-test-kit/wiki/Espresso"" rel=""nofollow noreferrer"">Espresso</a>, I read that supports up to kitkat but I don't know if Lollipop is now  fully supported and I found a related issue about <a href=""https://code.google.com/p/android-test-kit/issues/detail?id=65&amp;thanks=65&amp;ts=1396432619"" rel=""nofollow noreferrer"">Espresso.registerIdlingResources(instance)</a> and I quote from <a href=""https://code.google.com/p/android-test-kit/wiki/Espresso#To_use_Espresso_without_dependencies"" rel=""nofollow noreferrer"">here</a>:</p>

<blockquote>
  <p>Sometimes you want to use a version of Espresso where you are in
  control of the dependencies For example, Espresso utilizes Hamcrest
  Matchers and therefore has an explicit dependency on it. To avoid
  errors while Dexing your test code <strong>you can use the no dependencies
  version of Espresso and explicitly declare your dependencies</strong></p>
  
  <p>If you need any functionality from the contrib library, such as
  <strong>DrawerActions</strong>, copy the <strong>espresso-contrib jar</strong> from <a href=""https://code.google.com/p/android-test-kit/source/browse/#git%2Fbin%2Fespresso-contrib-dependencies"" rel=""nofollow noreferrer"">here</a>.
  Espresso actions for using a <strong>DrawerLayout</strong>.</p>
</blockquote>

<hr>

<p><strong>6. ProGuard shrinking step: update rules for API 21 changes</strong></p>

<p>I'm using <a href=""https://github.com/google/iosched"" rel=""nofollow noreferrer"">Google I/O app implementation</a> as I saw you are doing to learn Material Design and all this stuff. They recently <a href=""https://github.com/ardock/iosched/blob/master/android/src/main/java/com/google/samples/apps/iosched/ui/BaseActivity.java#L375"" rel=""nofollow noreferrer"">updated the app, added app-compat and fixed nav drawer</a> but I think they didn't update ProGuard rules. If you are using a similar configuration, I suggest you update it and check the aapt rules to be sure missing classes are kept.</p>

<p>As an experimental sample, I'm learning it too, I added the <a href=""http://developer.android.com/reference/android/view/View.html#View(android.content.Context,%20android.util.AttributeSet,%20int,%20int)"" rel=""nofollow noreferrer"">new API 21 View constructor</a> and <code>includedescriptorclasses</code> </p>

<pre><code># Added includedescriptorclasses for unkept android.support descriptors
-keep,includedescriptorclasses public class * extends android.view.View {
public &lt;init&gt;(android.content.Context);
public &lt;init&gt;(android.content.Context, android.util.AttributeSet);
public &lt;init&gt;(android.content.Context, android.util.AttributeSet, int);
public &lt;init&gt;(android.content.Context, android.util.AttributeSet, int, int); # Added in API 21
public void set*(...);
</code></pre>

<p>And 43 of 44 notes about unkept descriptors were solved, included </p>

<blockquote>
  <p>Note: the configuration keeps the entry point 'android.support.v4.widget.DrawerLayout { void setDrawerListener(android.support.v4.widget.DrawerLayout$DrawerListener); }', but not the descriptor class 'android.support.v4.widget.DrawerLayout$DrawerListener'</p>
</blockquote>
",1009132,,-1,,2017-05-23 12:22:48,2015-10-27 9:19:13,,,,4,,,
Android,44665454,2,,44570999,2017,,1,,"<p>If you want to add the text to your <strong>own</strong> watch face, I would use the <a href=""https://developer.android.com/reference/android/support/wearable/complications/rendering/TextRenderer.html"" rel=""nofollow noreferrer"">TextRenderer</a> class in the wearable support library. It renders text on a canvas within specified bounds and readjusts the text to make it fit. It is usually intended for complication data, but you could use it on your own non-complication data.</p>

<p>You might think about exposing your data to the complication framework, so you could let any other watch face (not just your own) display your data. You can add a tap event, so a user can click into your app from the other watch faces. It is actually quite easy, check out the <a href=""https://codelabs.developers.google.com/codelabs/data-providers/index.html?index=..%2F..%2Findex#0"" rel=""nofollow noreferrer"">Google I/O code lab</a> on how to do it.</p>

<p>If you do go that route (exposing data to the complication framework), you could also add support for displaying complication data (and now your data) on your own watch face. There is a code lab for that too (<a href=""https://codelabs.developers.google.com/codelabs/complications/index.html?index=..%2F..%2Findex#0"" rel=""nofollow noreferrer"">here</a>), i.e., displaying complication data on your watch face.</p>

<p>Finally, if you just want to see the source code in a project that supports complications, you can check out the Analog watch face in the Google's <a href=""https://github.com/googlesamples/android-WatchFace"" rel=""nofollow noreferrer"">github repo for watch faces</a>.</p>
",1631197,,,,,2017-06-21 1:30:11,,,,1,,,
Android,35078237,2,,35078121,2016,,1,,"<p>Yes it can be possible, but is not so easy. First you need to read documentation </p>

<p><a href=""http://developer.android.com/guide/topics/connectivity/bluetooth.html"" rel=""nofollow"">Android bluetooth</a></p>

<p>and later try find some example which will resemble your needs.</p>

<p><a href=""https://github.com/googlesamples/android-BluetoothChat"" rel=""nofollow"">Example : bluetooth chat</a></p>

<p>Comment : I did communication android with special hardware (I think FTDI Chip), but with Xamarin .NET. Some things will be the same. Mostly it is done so that the UI, creating communication and data transfer are in a separate Thread. In reading thread you have endless cycle in which the reading bytes from the input stream and save it into temp buffer (impeding receipt and you will not lose bytes). Later moves to MainBufferu and work with them.</p>

<p><strong>UPDATE</strong></p>

<p>You have to read the documentation and explore example. I can not describe everything here. I can roughly describe the lifecycle of how I dealt with itself:
When you have paired the device (<strong>you get BluetoothDevice</strong>) start ConnectThread which opens RfcommSocket and try Connect on it. If it is OK, than start ConnectedThread where you have endless cycle of reading data from InputStream. In cycle You put your data into a temp buffer and once in a while  moved data into MainBuffer where do you take them for processing. If you want send data via Bluetooth, you will just write to the OutputStream in ConnectedThread.</p>
",4069108,,4069108,,2016-02-11 7:11:14,2016-02-11 7:11:14,,,,0,,,
Android,31725277,2,,31646148,2015,,1,,"<p>There's an <a href=""https://github.com/googlesamples/android-BluetoothLeGatt"" rel=""nofollow"">Android Open Source Project</a> example that show how to get data from a BLE device, that will be easier if you start with this !</p>
",3343174,,,,,2015-07-30 13:34:10,,,,6,,,
Android,41712084,2,,41711704,2017,,1,,"<p>Ok, I found this  <a href=""https://github.com/googlesamples/android-vision/issues/65"" rel=""nofollow noreferrer"">camera2 with mobile vision? #65</a></p>

<blockquote>
  <p>There are no near term plans for a camera2 version of the CameraSource class in the official API. However, given how the API is structured, an alternate version of CameraSource could be written by the developer community that uses camera2. All of the existing APIs for working with frames and detectors are sufficient to support a camera2 implementation as well.</p>
</blockquote>
",2301721,,,,,2017-01-18 5:35:30,,,,0,,,
Android,35059265,2,,35058192,2016,,1,,"<p>Since this Library uses Android Vision , Why don't you try to implement you own code using the android-vision project as a sample , it will you a lot more control and flexibility also the sample is fairly easy to understand and directly from google. </p>

<p>You can find the Overview <a href=""https://developers.google.com/vision/barcodes-overview"" rel=""nofollow"">here</a></p>

<p>and the sample project on github <a href=""https://github.com/googlesamples/android-vision"" rel=""nofollow"">here</a></p>

<p>I tried Running the Barcodereader sample and it works perfectly(for QR as well as barcodes) , MainActivity and the BarcodeCaptureActivity is mainly what you'll need edit for your custom implementation.</p>
",4175607,,4407266,,2016-01-28 11:08:54,2016-01-28 11:08:54,,,,0,,,
Android,48433139,2,,48422327,2018,,1,,"<p>I already had this doubt one day and I was not finding a solution for that (I was getting crazy), so I found the solution reading the <a href=""https://developer.android.com/guide/index.html?hl=pt-br"" rel=""nofollow noreferrer"">android developer official guide</a>. I noticed I was doing something like your question and I was on the wrong road, cause any looping running on the currently Activity will always blocks the UI interation.</p>

<p><strong>Solution:</strong></p>

<p>The solution for this problem is creat at least two runnable classes (extends Threads), to be both runnable in a new Thread different from the currently Activity.</p>

<p>Create the first runnable class only to management the lifecycle of the connection and another to exchange of messages between the rfid devices and the smartphone.</p>

<p>I recommend you to study this simple <a href=""https://github.com/googlesamples/android-BluetoothChat"" rel=""nofollow noreferrer"">BluetoothChat example</a> and maybe you will have your questions answereds.</p>

<p>I hope this tips helps you!</p>

<p>Regards,
Renan Schroeder</p>
",8868923,,,,,2018-01-24 23:02:19,,,,1,,,
Android,32199938,2,,32199094,2015,,1,,"<p>You should have a structure like this:</p>

<pre><code>root
  module
    src
      main
      test
</code></pre>

<p>And all you need in your <code>build.gradle</code> is (without setting source sets):</p>

<pre><code>dependencies {
    // Unit testing dependencies.
    testCompile 'junit:junit:4.12'
    testCompile 'com.squareup.okhttp:mockwebserver:2.4.0'
}
</code></pre>

<p>You can check in the official repo from Google:</p>

<ul>
<li><a href=""https://github.com/googlesamples/android-testing/tree/master/unit/BasicSample/app"" rel=""nofollow"">A collection of samples demonstrating different frameworks</a> </li>
<li><a href=""https://github.com/googlesamples/android-testing-templates/tree/master/AndroidTestingBlueprint"" rel=""nofollow"">collection of Google's Android testing tools</a></li>
</ul>

<p>If you would like to use unit test and Instrumentation tests you should have:</p>

<pre><code>root
  module
    src
      main
      test
      androidTest
</code></pre>

<p>In this case your build.gradle should be:</p>

<pre><code>dependencies {

    // Dependencies for local unit tests
    testCompile 'junit:junit:4.12'
    testCompile 'org.mockito:mockito-all:1.10.19'
    testCompile 'org.hamcrest:hamcrest-all:1.3'

    // Android Testing Support Library's runner and rules
    androidTestCompile 'com.android.support.test:runner:0.3'
    androidTestCompile 'com.android.support.test:rules:0.3'

}
</code></pre>
",2016562,,,,,2015-08-25 9:10:07,,,,2,,,
Android,32215828,2,,17567119,2015,,1,,"<p>the native-audio sample is updated to playback in low latency path; a new sample <a href=""https://github.com/googlesamples/android-ndk/tree/master/audio-echo"" rel=""nofollow"">audio-echo</a> is created to loop back audio in low latency path on Android.</p>
",4496512,,,,,2015-08-25 23:40:57,,,,0,,,
Android,32356466,2,,32349454,2015,,1,,"<p>If you are drawing graphics over a live camera preview, you need to take a few things into account:</p>

<ol>
<li>the device's rotation</li>
<li>the scale of the view relative to the size of the preview image</li>
<li>whether you are using the front facing camera (which will mirror the image)</li>
</ol>

<p>The sample code for the face tracker demo has utility methods (translateX, translateY, scaleX, scaleY) to help with this:</p>

<p><a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/FaceTracker/app/src/main/java/com/google/android/gms/samples/vision/face/facetracker/FaceGraphic.java#L99"" rel=""nofollow"">https://github.com/googlesamples/android-vision/blob/master/visionSamples/FaceTracker/app/src/main/java/com/google/android/gms/samples/vision/face/facetracker/FaceGraphic.java#L99</a></p>

<p><a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/FaceTracker/app/src/main/java/com/google/android/gms/samples/vision/face/facetracker/ui/camera/GraphicOverlay.java#L100"" rel=""nofollow"">https://github.com/googlesamples/android-vision/blob/master/visionSamples/FaceTracker/app/src/main/java/com/google/android/gms/samples/vision/face/facetracker/ui/camera/GraphicOverlay.java#L100</a></p>
",5231007,,,,,2015-09-02 14:52:15,,,,0,,,
Android,41705928,2,,41705353,2017,,1,,"<p>You can check out Google Sample for Camera2 API here <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">Github repo for Camera2 API</a></p>

<p>And to make and activity full screen check <a href=""https://stackoverflow.com/questions/2868047/fullscreen-activity-in-android"">this</a> out</p>
",4855680,,-1,,2017-05-23 12:33:35,2017-01-17 20:02:23,,,,0,,,
Android,51345841,2,,51345699,2018,,1,,"<p><strong>NDK Package</strong></p>

<p>Android Studio only includes the default tools and SDK, so download and install the NDK package separately. There are two ways to do this. The first and easiest is the automatic installation option in the SDK Tools tab. This is a large download (~1GB) so be sure to have a good internet connection and/or patience.</p>

<p><a href=""https://i.stack.imgur.com/sdSnH.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/sdSnH.png"" alt=""enter image description here""></a></p>

<p>The second way is to download the NDK manually from the <a href=""http://developer.android.com/ndk/downloads/index.html"" rel=""nofollow noreferrer"">NDK Downloads page</a>. This saves some time because of the smaller download size (&lt;.5 GB) but will need some setting up. Download the appropriate NDK package for your platform and follow the installation instructions. You can put the extracted package anywhere you want, but remember this location as you will need it later.</p>

<p><a href=""https://i.stack.imgur.com/TRNrw.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/TRNrw.png"" alt=""enter image description here""></a></p>

<p><strong>Hello World</strong></p>

<p>Lets run a test project to see if the NDK installation works. The NDK package folder contains samples but they dont seem to work out of the box in Android Studio without extra configuration. Instead well import samples that work from the welcome screen. These <a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow noreferrer"">NDK samples from GitHub</a> can also be downloaded or cloned directly. This collection of samples has better compatibility with the latest version of Android Studio.</p>

<p><a href=""https://i.stack.imgur.com/JylRR.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/JylRR.png"" alt=""enter image description here""></a></p>

<p>Select Import an Android code sample and type hello in the search box to filter the list. Choose Hello JNI from the filtered list under the Ndk category. Click Next to edit the app name and project location, then click Finish.</p>

<p><strong>JNI</strong></p>

<p>After the code has loaded and Gradle has synced, lets take a look at the resulting project structure. You might have noticed what appears to be a discrepancy in the projects name. Why is it called HelloJNI and not HelloNDK? What is JNI and how does it differ from the NDK? The Java Native Interface is a framework that enables Java applications to interact with native code. The JNI and the NDK work together to bring native support to Android apps. The NDK is part of the Android framework while the JNI is available to any Java application, not just Android apps.</p>

<p>Inside the project is a folder named jni which will hold all the native C or C++ source code of the app. The JNI provides a two-way interface. The C/C++ code is able to call Java code, including the standard Android libraries, and the Java code is able to call native functions defined in C/C++ code. Native code is governed by the same sandbox and security rules as Java code so the app will not have full unrestricted access to hardware. For a more detailed discussion on the JNI, read the JNI articles from the <a href=""http://developer.android.com/training/articles/perf-jni.html"" rel=""nofollow noreferrer"">Android Developer website</a>.</p>
",2148964,,,,,2018-07-15 6:23:28,,,,2,,,
Android,50535140,2,,44485631,2018,,1,,"<p>I had this problem with an entity (all fields were properly-initialized <code>var</code>s like a lot of the answers here are suggesting) that included a list of related, non-primitive items like the OP in this <a href=""https://stackoverflow.com/q/44580702/1145905"">SO question</a> had. For example:</p>

<pre><code>@Entity(tableName = ""fruits"")
data class CachedFruitEntity(
        @PrimaryKey var id: Long = 0L,
        @Embedded(prefix = ""buyer_"") var buyerEntity: CachedBuyerEntity? = null
        @TypeConverters(VendorsConverter::class)
        var vendorEntities: List&lt;CachedVendorEntity?&gt; = listOf()))
</code></pre>

<p>That is, it has an embedded field, and it took me a while to realize that what I actually needed was a type converter for the vendor entity list instead (the compiler wasn't throwing the usual <code>Error:(58, 31) error: Cannot figure out how to save this field into database. You can consider adding a type converter for it.</code> So my solution was very similar to <a href=""https://stackoverflow.com/a/48260739/1145905"">this answer</a></p>

<p>This <a href=""https://github.com/googlesamples/android-architecture-components/issues/43"" rel=""nofollow noreferrer"">google architecture components github thread</a> has more info on this misleading error, but not sure if the issue has been fixed yet. </p>
",1145905,,,,,2018-05-25 18:40:54,,,,0,,,
Android,33231923,2,,33110132,2015,,1,,"<p>Just remove the <code>androidTestCompile 'com.android.support.test:testing-support-lib:0.1'</code> from your <code>build.gradle</code>. Take a look on example <a href=""https://github.com/googlesamples/android-testing/blob/master/ui/espresso/BasicSample/app/build.gradle"" rel=""nofollow"">here</a>.</p>
",2980933,,,,,2015-10-20 8:42:13,,,,0,,,
Android,41712772,2,,37559401,2017,,1,,"<p>Please have a look </p>

<p><a href=""https://github.com/googlesamples/android-vision/issues/65"" rel=""nofollow noreferrer"">camera2 with mobile vision? #65</a></p>

<p>Ok, I found this  </p>

<blockquote>
  <p>There are no near term plans for a camera2 version of the CameraSource class in the official API. However, given how the API is structured, an alternate version of CameraSource could be written by the developer community that uses camera2. All of the existing APIs for working with frames and detectors are sufficient to support a camera2 implementation as well.</p>
</blockquote>
",2301721,,,,,2017-01-18 6:30:54,,,,1,,,
Android,32604420,2,,32600076,2015,,1,,"<p>Take a look at <code>FingerprintManager</code> whic was added in API 23 (Android 6). <a href=""https://developer.android.com/reference/android/hardware/fingerprint/FingerprintManager.html"" rel=""nofollow"">https://developer.android.com/reference/android/hardware/fingerprint/FingerprintManager.html</a></p>

<p>Also there is a demo project located here: <a href=""https://github.com/googlesamples/android-FingerprintDialog"" rel=""nofollow"">https://github.com/googlesamples/android-FingerprintDialog</a></p>
",2642024,,,,,2015-09-16 9:18:10,,,,0,,,
Android,48471158,2,,48416405,2018,,1,,"<p>I would create a device policy controller app that is provisioned on the device as a device owner using Android Enterprise (Android for Work) APIs.
<a href=""https://developers.google.com/android/work/dpc/build-dpc"" rel=""nofollow noreferrer"">https://developers.google.com/android/work/dpc/build-dpc</a></p>

<p>As a device owner, you can set your app in lock task mode which is generally used for kiosks.
<a href=""https://developer.android.com/work/cosu.html"" rel=""nofollow noreferrer"">https://developer.android.com/work/cosu.html</a></p>

<p>Then, you can set user restrictions:<br>
<a href=""https://developer.android.com/reference/android/app/admin/DevicePolicyManager.html#addUserRestriction(android.content.ComponentName,%20java.lang.String)"" rel=""nofollow noreferrer"">addUserRestriction</a> api<br>
<a href=""https://developer.android.com/reference/android/os/UserManager.html#Constants"" rel=""nofollow noreferrer"">user restrictions list</a><br>
The user restrictions don't cover everything in the settings app, but the coverage is pretty good.</p>

<p>Then I would provision it using NFC or QR code reader from the Google Setup Wizard welcome screen.
<a href=""https://github.com/googlesamples/android-NfcProvisioning"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-NfcProvisioning</a></p>

<p>You might want to also look at existing open source EMM/MDM implementations that already exist such as WSO2.</p>

<p>Other references:<br>
<a href=""https://stackoverflow.com/questions/46727461/how-to-enable-task-locking-in-android-5-0-production-devices/"">How to enable task locking in Android 5.0 production devices</a><br>
<a href=""https://stackoverflow.com/questions/46811159/how-to-make-sure-there-is-only-one-app/"">How to make sure there is only one app</a></p>
",6917917,,,,,2018-01-26 23:49:13,,,,1,,,
Android,52332687,2,,52332326,2018,,1,,"<p>You can check google sample project, specifically this class </p>

<p><a href=""https://github.com/googlesamples/android-architecture/blob/todo-mvvm-databinding/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/addedittask/AddEditTaskViewModel.java"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture/blob/todo-mvvm-databinding/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/addedittask/AddEditTaskViewModel.java</a></p>

<p>Usually you would trigger the network operation in the model view, while the code for implementing the network logic is written in a different class (<code>ApiManager</code> for example), and then get the results in your ViewModel </p>

<ul>
<li><p><code>LoginViewModel</code> will have an object of some network manager class </p></li>
<li><p>When you click login, the viewmodel will call <code>networkManager.performLogin()</code></p></li>
<li><p>Results are then passed to the viewmodel (RxJava is handy in here). </p></li>
<li><p>In your ViewModel do whatever processing you need when you receive the results </p></li>
</ul>
",1380466,,,,,2018-09-14 13:07:15,,,,3,,,
Android,48666213,2,,48665795,2018,,1,,"<p>You can disable your EditText fields using the following instructions:</p>

<p><a href=""https://stackoverflow.com/a/33582335/3268303"">https://stackoverflow.com/a/33582335/3268303</a></p>

<p>Applications will normally share add/edit screens, but not necessarily view/edit.</p>

<p>An example of add/edit sharing is here:</p>

<p><a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/addedittask"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture/tree/todo-mvp/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/addedittask</a></p>

<pre><code>public class AddEditTaskPresenter implements AddEditTaskContract.Presenter,
    TasksDataSource.GetTaskCallback {

@NonNull
private final TasksDataSource mTasksRepository;

@NonNull
private final AddEditTaskContract.View mAddTaskView;

@Nullable
private String mTaskId;

private boolean mIsDataMissing;

/**
 * Creates a presenter for the add/edit view.
 *
 * @param taskId ID of the task to edit or null for a new task
 * @param tasksRepository a repository of data for tasks
 * @param addTaskView the add/edit view
 * @param shouldLoadDataFromRepo whether data needs to be loaded or not (for config changes)
 */
public AddEditTaskPresenter(@Nullable String taskId, @NonNull TasksDataSource tasksRepository,
        @NonNull AddEditTaskContract.View addTaskView, boolean shouldLoadDataFromRepo) {
    mTaskId = taskId;
    mTasksRepository = checkNotNull(tasksRepository);
    mAddTaskView = checkNotNull(addTaskView);
    mIsDataMissing = shouldLoadDataFromRepo;

    mAddTaskView.setPresenter(this);
}

@Override
public void start() {
    if (!isNewTask() &amp;&amp; mIsDataMissing) {
        populateTask();
    }
}

@Override
public void saveTask(String title, String description) {
    if (isNewTask()) {
        createTask(title, description);
    } else {
        updateTask(title, description);
    }
}

@Override
public void populateTask() {
    if (isNewTask()) {
        throw new RuntimeException(""populateTask() was called but task is new."");
    }
    mTasksRepository.getTask(mTaskId, this);
}

@Override
public void onTaskLoaded(Task task) {
    // The view may not be able to handle UI updates anymore
    if (mAddTaskView.isActive()) {
        mAddTaskView.setTitle(task.getTitle());
        mAddTaskView.setDescription(task.getDescription());
    }
    mIsDataMissing = false;
}

@Override
public void onDataNotAvailable() {
    // The view may not be able to handle UI updates anymore
    if (mAddTaskView.isActive()) {
        mAddTaskView.showEmptyTaskError();
    }
}

@Override
public boolean isDataMissing() {
    return mIsDataMissing;
}

private boolean isNewTask() {
    return mTaskId == null;
}

private void createTask(String title, String description) {
    Task newTask = new Task(title, description);
    if (newTask.isEmpty()) {
        mAddTaskView.showEmptyTaskError();
    } else {
        mTasksRepository.saveTask(newTask);
        mAddTaskView.showTasksList();
    }
}

private void updateTask(String title, String description) {
    if (isNewTask()) {
        throw new RuntimeException(""updateTask() was called but task is new."");
    }
    mTasksRepository.saveTask(new Task(title, description, mTaskId));
    mAddTaskView.showTasksList(); // After an edit, go back to the list.
}
}
</code></pre>
",3268303,,3268303,,2018-02-07 14:34:15,2018-02-07 14:34:15,,,,3,,,
Android,44689559,2,,44689013,2017,,1,,"<p>Fragments should not be dependencies for your ViewModel - the ViewModel is supposed to have a greater scope than that of the Fragment. </p>

<p>Please see <a href=""https://github.com/googlesamples/android-architecture-components"" rel=""nofollow noreferrer"">this GitHub repo</a> with a sample project that uses Android architecture components with Dagger 2.</p>
",5241933,,5241933,,2017-06-22 10:53:18,2017-06-22 10:53:18,,,,3,,,
Android,39615406,2,,35362813,2016,,1,,"<p>Had to integrate Unity and PayPal in the same app; Unity worked alright but when I added the PayPal SDK, I could no longer communicate to it and the app crashed.</p>

<p>Following shawn's answer, I came across <a href=""https://github.com/googlesamples/android-ndk/blob/master/hello-jni/app/build.gradle"" rel=""nofollow"">this gradle</a>, and tried adding the productFlavors. My gradle ended up looking like this:</p>

<pre><code>productFlavors {
    arm7 {
        // in the future, ndk.abiFilter might also work
        ndk {
            abiFilter 'armeabi-v7a'
        }
    }
    all {
        ndk {
            abiFilters 'mips', 'mips64', 'x86', 'x86_64'
        }
    }
}
</code></pre>

<p>Because the other flavors didn't work on all devices.</p>
",2819864,,,,,2016-09-21 11:32:11,,,,0,,,
Android,44705844,2,,44652828,2017,,1,,"<p>No, there's no built-in rotation for YUV output. To minimize overhead, it's always produced as-is from the image sensor.  You can read the SENSOR_ORIENTATION field to determine how the image sensor is placed on the device; typically the long edge of the image sensor lines up with the long edge of the Android device, but that still leaves two rotations that are valid.</p>

<p>Also, if your goal is to have the image 'upright', then you also need to read what the device's orientation is from the accelerometer, and add that in to the rotation.</p>

<p>You're doing a copy already getting the frame from the Image into the Allocation, so doing a 90/180/270 degree rotation then is relatively straightforward, though memory-bandwidth-intensive. </p>

<p>You can also take a look at one of Google's sample apps, <a href=""https://github.com/googlesamples/android-HdrViewfinder"" rel=""nofollow noreferrer"">HdrViewfinderDemo</a>, which pipes camera data into RenderScript without the intermediate copy you're doing, and then converts to RGB to draw to a SurfaceView.  It doesn't have a rotation in it now, but you could adjust the lookup done via rsGetElementAtYuv_uchar_* to do 90-increments.</p>
",1344825,,,,,2017-06-22 17:26:20,,,,0,,,
Android,34337226,2,,34336878,2015,,1,,"<p>I believe you need to set the buffer size to a supported preview size:</p>

<pre><code>textureView.getSurfaceTexture().setDefaultBufferSize(1280,720);
</code></pre>

<p>and then you can scale the TextureView so that it fits your screen, even if the preview size is smaller. The <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow"">Camera2Video</a> sample has an example. Specifically look at <code>configureTransform</code> in <a href=""https://github.com/googlesamples/android-Camera2Video/blob/master/Application/src/main/java/com/example/android/camera2video/Camera2VideoFragment.java"" rel=""nofollow"">Camera2VideoFragment</a>:</p>

<pre><code>/**
 * Configures the necessary {@link android.graphics.Matrix} transformation to `mTextureView`.
 * This method should not to be called until the camera preview size is determined in
 * openCamera, or until the size of `mTextureView` is fixed.
 *
 * @param viewWidth  The width of `mTextureView`
 * @param viewHeight The height of `mTextureView`
 */
private void configureTransform(int viewWidth, int viewHeight) {
    Activity activity = getActivity();
    if (null == mTextureView || null == mPreviewSize || null == activity) {
        return;
    }
    int rotation = activity.getWindowManager().getDefaultDisplay().getRotation();
    Matrix matrix = new Matrix();
    RectF viewRect = new RectF(0, 0, viewWidth, viewHeight);
    RectF bufferRect = new RectF(0, 0, mPreviewSize.getHeight(), mPreviewSize.getWidth());
    float centerX = viewRect.centerX();
    float centerY = viewRect.centerY();
    if (Surface.ROTATION_90 == rotation || Surface.ROTATION_270 == rotation) {
        bufferRect.offset(centerX - bufferRect.centerX(), centerY - bufferRect.centerY());
        matrix.setRectToRect(viewRect, bufferRect, Matrix.ScaleToFit.FILL);
        float scale = Math.max(
                (float) viewHeight / mPreviewSize.getHeight(),
                (float) viewWidth / mPreviewSize.getWidth());
        matrix.postScale(scale, scale, centerX, centerY);
        matrix.postRotate(90 * (rotation - 2), centerX, centerY);
    }
    mTextureView.setTransform(matrix);
}
</code></pre>
",244745,,244745,,2015-12-17 16:26:22,2015-12-17 16:26:22,,,,11,,,
Android,34338668,2,,34337393,2015,,1,,"<p>Actions that you add to a notification are for the device that the notification was created on, so if you create a notification on your phone, when you click on it on your watch, the action will be sent back to your phone to be executed.</p>

<p>If you want to open your activity on your watch, you cannot achieve that by sending a notification from your phone in the manner you have done. You have a couple of options: for example you can send a message from your phone to your watch and then have the wear side of your app catch that message and put out a ""local"" notification on the watch; then the actions on that notification are local to your watch and you can open your desired activity via the actions in that notification. If you directly want to open an activity on your watch from your phone (i.e. you don't need a notification to show up on your watch), then you can handle the message that I talked about on your watch and instead of creating a notification there, simply open the desired activity.You may find the <a href=""https://github.com/googlesamples/android-WearCompanionLibrary"" rel=""nofollow"">WearCompanionLibrary</a> useful in handling some of these cases.</p>
",2765813,,,,,2015-12-17 15:48:02,,,,1,,,
Android,43939528,2,,43939275,2017,,1,,"<p>The method you are calling has the signature:</p>

<p><code>queryInventoryAsync(boolean,List&lt;String&gt;,List&lt;String&gt;,QueryInventoryFinishedListener)</code></p>

<p>(4 parameters)</p>

<p>You are calling it with only 3 parameters.</p>

<p>If you check the sample code on <a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample/util/IabHelper.java"" rel=""nofollow noreferrer"">Github</a>, you will see that there is no method with only 3 parameters.</p>
",1027277,,1027277,,2017-05-12 14:39:13,2017-05-12 14:39:13,,,,4,,,
Android,40602582,2,,26462811,2016,,1,,"<p>I was going through the solutions available on web to take screenshot, So I found some really helpful which I would like to share here:</p>

<p>1) Here is the <a href=""https://github.com/mtsahakis/MediaProjectionDemo"" rel=""nofollow noreferrer"">MediaProjectionAPIDemo</a> available on github</p>

<p>2) Here is another <a href=""https://github.com/googlesamples/android-ScreenCapture"" rel=""nofollow noreferrer"">Project</a> using MediaProjectionAPI available on github</p>

<p>3) Another <a href=""https://github.com/openstf/minicap"" rel=""nofollow noreferrer"">solution</a> which require NDK to stream real time Screen Capture </p>

<p>4) And at last, <a href=""https://code.google.com/archive/p/android-screenshot-library/wikis/UserGuide.wiki"" rel=""nofollow noreferrer"">here</a> is Android Screenshot library </p>

<p>Hope it will help you to take off :-)</p>
",345138,,,,,2016-11-15 5:22:05,,,,0,,,
Android,34703914,2,,34702809,2016,,1,,"<p>Yes, it is doable:</p>

<ol>
<li>Send a message to your watch (using MessageApi)</li>
<li>Have a WearableListenerService in your app on the watch so your application on the watch can capture the message even if it is not running</li>
<li>In that service, start the desired activity.</li>
</ol>

<p>You can, alternatively, use <a href=""https://github.com/googlesamples/android-WearCompanionLibrary"" rel=""nofollow"">WearCompanionLibrary</a> that does all of this for you in a simple API.</p>
",2765813,,,,,2016-01-10 9:28:38,,,,7,,,
Android,31040012,2,,30213210,2015,,1,,"<p>I (and many others) have also noticed this. Unfortunately, it looks like address is not supported. See here:</p>

<p><a href=""https://github.com/googlesamples/android-play-places/issues/6#issuecomment-114951775"" rel=""nofollow"">https://github.com/googlesamples/android-play-places/issues/6#issuecomment-114951775</a></p>
",5044492,,,,,2015-06-25 2:02:29,,,,1,,,
Android,48669966,2,,48669622,2018,,1,,"<p>I believe the google example is flawed. The sample will result in a memory leak if activity is destroyed. A better approach would be using a local broadcast receiver or an Event Bus or RxJava/RxAndroid<br>
<a href=""https://github.com/googlesamples/android-play-location/issues/60"" rel=""nofollow noreferrer"">Issue is already reported here</a></p>
",7639117,,,,,2018-02-07 17:31:28,,,,1,,,
Android,40786663,2,,31864043,2016,,1,,"<p>I've recently implemented something similar. To achieve this, I set up an Android JNI project with OpenCV and use the OpenCV camera reading capability to store the frames. A pointer to the frame data can then be passed to the CCV Image wrapper for use with the CCV library functions. CCV has minimal dependencies and the easiest way to get up and running is to include the source code of the modules you require in your JNI directory of the project.</p>

<p>To set up a project with OpenCV you can follow <a href=""http://docs.opencv.org/2.4/doc/tutorials/introduction/android_binary_package/dev_with_OCV_on_Android.html"" rel=""nofollow noreferrer"">this tutorial.</a> The OpenCV SDK has a sample project for a simple camera reader. The Android GitHub page contains a sample HelloJNI project <a href=""https://github.com/googlesamples/android-ndk/tree/master/hello-jni"" rel=""nofollow noreferrer"">here</a> which shows how to set up your Android project with both Java and C/C++ using JNI. The CCV source can then be added to the C/C++ source directory so that your C/C++ functions have access to the library.</p>

<p>Once you have the project set up with OpenCV libraries and JNI functionality, it is a matter of saving the frame data with OpenCV and passing a pointer of it to the C code. Store each frame as a <code>Mat</code> object, the <code>Mat</code> object can then be passed to your C/C++ code like this: (Note this is only an extract showing the key code segments required)</p>

<pre><code>package your.namespace.here;

import org.opencv.core.Core;
import org.opencv.core.Mat;

public class MainActivity{

    // Store frames in this object for later processing
    Mat frame;

    static {
        // Load the c file name with JNI bindings, e.g. here we load test.c
        System.loadLibrary(""test"");
    }

    // Declare the JNI function wrapper
    public native int ccvTest( long input, long output);

    // OpenCV methods here to store the frame, see 
    // OpenCV4Android - tutorial-1-camerapreview for full 
    // code description.
    //...

    // This function to be called after each frame is stored.
    // output can then be converted to Bitmap and displayed in ImageView
    // or used for further processing with OpenCV.
    public Mat processFrame(){
        Mat output = new Mat();
        ccvTest(frame.getNativeObjAddr(), output.getNativeObjAddr());
        return output;
    }
}
</code></pre>

<p>Using the HelloJNI template, a sample C file (for this example we call it test.c) with a call to one of the CCV library functions would look like this:</p>

<pre><code>#include &lt;string.h&gt;
#include &lt;jni.h&gt;

#ifdef __cplusplus
extern ""C"" {
#endif
// ccv files to include should be compiled using c compiler
#include ""ccv/lib/ccv.h""
#ifdef __cplusplus
}
#endif

#ifdef __cplusplus
extern ""C"" {
#endif

JNIEXPORT void JNICALL
Java_your_namespace_here_MainActivity_ccvTest( JNIEnv* env,
                                              jobject thiz,
                                              jlong input, jlong output)
{

    Mat* in_p  = (Mat*)input;
    Mat* out_p  = (Mat*)output;
    Mat &amp;rgb = *in_p;
    ccv_dense_matrix_t* image = 0;

    // Pass the Mat data to the CCV Image wrapper
    ccv_read(rgb.data, &amp;image, CCV_IO_BGR_RAW | CCV_IO_ANY_RAW |     CCV_IO_GRAY, rgb.rows, rgb.cols, rgb.step[0]);

    // Now the Mat is in ccv image format, you can pass
    // the image pointer to any ccv function you like.

    //
    // Put your calls to CCV library here..
    //

}
#ifdef __cplusplus
}
#endif
</code></pre>

<p>The tree structure of the project may look similar to this, with all of the ccv source in the jni/ccv folder:</p>

<p><a href=""https://i.stack.imgur.com/nqmVW.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/nqmVW.png"" alt=""enter image description here""></a></p>

<p>This set up is useful as it allows you to hook into the functionality of both OpenCV and CCV. Hope this helps.</p>
",1897312,,1897312,,2016-11-24 12:44:49,2016-11-24 12:44:49,,,,0,,,
Android,49475881,2,,49470466,2018,,1,,"<p>I faced the same issue. Basically you want to write logic in the <code>Repository</code> which decides if to fetch data from server or local database. 
Fortunately this is very common issue, hence Google made <a href=""https://github.com/googlesamples/android-architecture-components/blob/88747993139224a4bb6dbe985adf652d557de621/GithubBrowserSample/app/src/main/java/com/android/example/github/repository/NetworkBoundResource.kt"" rel=""nofollow noreferrer"">NetworkBoundResource</a> class.</p>

<p><code>NetworkBoundResource</code> is a plain class which does the job of data flow between local database and your web-service using the power of <code>MediatorLiveData</code>. </p>

<p>Read more at: <a href=""https://proandroiddev.com/building-modern-apps-using-the-android-architecture-guidelines-3238fff96f14"" rel=""nofollow noreferrer"">https://proandroiddev.com/building-modern-apps-using-the-android-architecture-guidelines-3238fff96f14</a></p>

<p>and official document: <a href=""https://developer.android.com/jetpack/docs/guide"" rel=""nofollow noreferrer"">https://developer.android.com/jetpack/docs/guide</a></p>
",1904141,,10121709,,2018-11-02 11:23:38,2018-11-02 11:23:38,,,,5,,,
Android,52700117,2,,52699729,2018,,1,,"<p>You can check google samples: <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/test/java/com/android/example/github/api/GithubServiceTest.kt"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/test/java/com/android/example/github/api/GithubServiceTest.kt</a></p>

<p>You can use product flavors for mock your response or user MockWebServer library or replace your retrofit interface with you implementation what return json from assets</p>

<p>upd: I misunderstood the question. I agree with Phowner Biring</p>
",8331109,,,,,2018-10-08 10:18:45,,,,0,,,
Android,40849410,2,,40849143,2016,,1,,"<p>Please see the ReadMe of the project, specifically to <a href=""https://github.com/googlesamples/android-architecture#opening-a-sample-in-android-studio"" rel=""nofollow noreferrer"">this section</a> (Opening a sample in Android Studio).</p>

<p>Since they don't have any project on master branch you need to checkout a different branch (see this <a href=""https://github.com/googlesamples/android-architecture/wiki/Samples-at-a-glance"" rel=""nofollow noreferrer"">link</a>).</p>

<p>Hope this helps!!</p>
",6621592,,,,,2016-11-28 16:45:53,,,,1,,,
Android,40897662,2,,40896558,2016,,1,,"<p>What are you are looking for is <a href=""https://source.android.com/devices/sensors/batching.html"" rel=""nofollow noreferrer"">Sensor Batching</a>.</p>

<blockquote>
  <p>That allows you to get continuous sensor data even without keeping the device awake. It basically stores the sensor events in a hw based queue right in the chip itself and only sends them to your app (service,..) at predefined intervals in batches. This allows you to do a 24/7 monitoring without draining the battery significantly. Please note that only supported chipsets can do that (you can find details in Android docs), in case of older phones you need to fallback to the hideous wakelock keeping method in order to get your data. <a href=""https://stackoverflow.com/a/30390540/6817568"">Source</a></p>
</blockquote>

<p>Also <a href=""https://github.com/googlesamples/android-BatchStepSensor"" rel=""nofollow noreferrer"">there</a> is example how to use BatchStepSensor</p>
",6817568,,-1,,2017-05-23 12:34:14,2016-11-30 20:33:38,,,,0,,,
Android,49704739,2,,49689151,2018,,1,,"<p>I assume you are trying to search for that line in order to override the Dagger 2 request for injection and inject your own test doubles.</p>

<p>This is probably the wrong way to do things. </p>

<p>The best way to perform automated UI tests against Activities and Fragments is to isolate the depenedencies you want inside Dagger 2 modules and then use build variants to swap these with test doubles. </p>

<p>There is an example of this in the <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-dagger/"" rel=""nofollow noreferrer"">Google Android Architecture Blueprints</a></p>

<p>If this doesn't work, you could try using a setter on the injector like in <a href=""https://duckduckgo.com/?q=daggermock&amp;atb=v41-4&amp;ia=software"" rel=""nofollow noreferrer"">DaggerMock</a></p>
",5241933,,,,,2018-04-07 6:50:12,,,,1,,,
Android,49756310,2,,49756166,2018,,1,,"<p>If I take the <a href=""https://github.com/googlesamples/android-architecture-components/blob/5ec49a4bcdada748b4968138c4182deef3741123/GithubBrowserSample/app/build.gradle"" rel=""nofollow noreferrer"">Google GithubBrowserSample into account which has the following task in its build.gradle</a>:</p>

<pre><code>task fullCoverageReport(type: JacocoReport) {
    dependsOn 'createDebugCoverageReport'
    dependsOn 'testDebugUnitTest'
    reports {
        xml.enabled = true
        html.enabled = true
    }

    def fileFilter = ['**/R.class', '**/R$*.class', '**/BuildConfig.*', '**/Manifest*.*',
                      '**/*Test*.*', 'android/**/*.*',
                      '**/*_MembersInjector.class',
                      '**/Dagger*Component.class',
                      '**/Dagger*Component$Builder.class',
                      '**/*_*Factory.class',
                      '**/*ComponentImpl.class',
                      '**/*SubComponentBuilder.class']
    def debugTree = fileTree(dir: ""${buildDir}/intermediates/classes/debug"", excludes: fileFilter)
    def mainSrc = ""${project.projectDir}/src/main/java""

    sourceDirectories = files([mainSrc])
    classDirectories = files([debugTree])
    executionData = fileTree(dir: ""$buildDir"", includes: [
            ""jacoco/testDebugUnitTest.exec"",
            ""outputs/code-coverage/connected/*coverage.ec""
    ])
}
</code></pre>

<p>You could most likely add a file filter such as <code>io.realm.*RealmProxy.class</code>.</p>
",2413303,,,,,2018-04-10 14:32:14,,,,0,,,
Android,30305402,2,,30305297,2015,,1,,"<p>Asserting that a new activity has been launched is as easy as asserting that a view belonging to that new activity is displayed on the screen. </p>

<p>Check <a href=""https://github.com/googlesamples/android-testing/tree/master/ui/espresso"" rel=""nofollow noreferrer"">this</a> for more samples. Additional info: </p>

<blockquote>
  <p>By default, Espresso waits for UI events in the current message queue to process and default AsyncTasks* to complete before it moves on to the next test operation. This should address the majority of application/test synchronization in your application.</p>
</blockquote>

<p>Thus, given your ""really simple"" test case, I'm assuming there's no waiting on custom resource loading and asserting that a view is displayed should be enough.</p>
",1368705,,667348,,2019-02-13 13:58:53,2019-02-13 13:58:53,,,,2,,,
Android,40470788,2,,40470695,2016,,1,,"<p>Google has published <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">a collection of samples</a> to discuss and showcase different architectural tools and patterns for Android apps.</p>

<p>To begin, very usefull to you to understand <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp/"" rel=""nofollow noreferrer"">how this one works</a>. And adapt to your sample.</p>

<p>[...] This sample is the base for many of the variants. It showcases a simple implementation of the Model-View-Presenter pattern with no architectural frameworks. It uses manual dependency injection to provide a repository with local and remote data sources. Asynchronous tasks are handled with callbacks [...]</p>

<p><a href=""https://i.stack.imgur.com/VjxHm.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/VjxHm.png"" alt=""enter image description here""></a></p>
",5581663,,,,,2016-11-07 17:14:14,,,,2,,,
Android,42419041,2,,42418550,2017,,1,,"<p>I think it is the issue with the Image Format of Your <strong>Uploadable Image</strong> usually *.raw has the largest size. You should try to upload the jpg/png images. When saving the images just use <strong>Filename.jpg</strong> as the file name and the image will get saved .ready for upload .You may delete the file once it is uploaded. the changes won't get reflected to your gallery till the <strong><em>the Media Store</em></strong> probe <em>{ service }</em> get updated. You can use this <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a> as a reference to build your app</p>
",6410011,,,,,2017-02-23 14:50:11,,,,0,,,
Android,50264568,2,,50264477,2018,,1,,"<p>You can refer source of camera2 basic:
<a href=""https://github.com/googlesamples/android-Camera2Basic/tree/master/kotlinApp"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic/tree/master/kotlinApp</a></p>

<p>Or
<a href=""https://stackoverflow.com/questions/49547673/why-camera2-api-working-not-correct"">Why Camera2 API working not correct?</a></p>
",1497597,,,,,2018-05-10 2:23:45,,,,0,,,
Android,43648795,2,,43620089,2017,,1,,"<p>When you add android:configChanges=""orientation|screenSize"" and avoid the restart the system will call onConfigurationChanged() on your activity.</p>

<p>In here you can handle anything you want to that might be important for your application, for example resizing the video view for the new orientation.</p>

<p>If you don't do this the system will use the old view dimensions which no longer match the display.</p>

<p>See this answer for an example of how to resize a video view: <a href=""https://stackoverflow.com/a/14113271/334402"">https://stackoverflow.com/a/14113271/334402</a></p>

<p>Google's Camerea2Vdieo example (<a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Video</a>) shows one approach to resize a video when a surface has changed - they do not stop the activity restarting but the principles are the same, in that you detect the 'window' has changed and then measure the new size and reset accordingly:</p>

<p>Detecting the change using a SurfaceTextureListener:</p>

<pre class=""lang-js prettyprint-override""><code>/**
     * {@link TextureView.SurfaceTextureListener} handles several lifecycle events on a
     * {@link TextureView}.
     */
    private TextureView.SurfaceTextureListener mSurfaceTextureListener
            = new TextureView.SurfaceTextureListener() {

        @Override
        public void onSurfaceTextureAvailable(SurfaceTexture surfaceTexture,
                                              int width, int height) {
            openCamera(width, height);
        }

        @Override
        public void onSurfaceTextureSizeChanged(SurfaceTexture surfaceTexture,
                                                int width, int height) {
            configureTransform(width, height);
        }

        @Override
        public boolean onSurfaceTextureDestroyed(SurfaceTexture surfaceTexture) {
            return true;
        }

        @Override
        public void onSurfaceTextureUpdated(SurfaceTexture surfaceTexture) {
        }

    };
</code></pre>

<p>The transformation of the texture is done in configureTransform which you can see at the link above.</p>
",334402,,-1,,2017-05-23 12:02:14,2017-04-27 18:22:10,,,,3,,,
Android,42498001,2,,28766018,2017,,1,,"<p>I opened a new issue in the official Google immersive sample project code. Hope they will provide an official way to handle toolbar in immersive mode. </p>

<p><a href=""https://github.com/googlesamples/android-BasicImmersiveMode/issues/1"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-BasicImmersiveMode/issues/1</a></p>
",2378095,,,,,2017-02-28 0:00:14,,,,0,,,
Android,42448872,2,,42420540,2017,,1,,"<p>So apparently this only happens to DataMatrix due to the lack of finder patterns. For the rest of Barcodes it works everywhere on the screen.</p>

<p><a href=""https://github.com/googlesamples/android-vision/issues/194"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vision/issues/194</a></p>
",1652657,,,,,2017-02-24 21:48:10,,,,0,,,
Android,42576961,2,,37086806,2017,,1,,"<p><strong>Open the project on Android Studio and let it solve the problems for you</strong></p>

<p>It immediately shows at the left bottom:</p>

<p><a href=""https://i.stack.imgur.com/Cm4LG.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/Cm4LG.png"" alt=""enter image description here""></a></p>

<p>Then click that link, and it will fix the right files for you.</p>

<p>This ended up fixing the Gradle version as mentioned at: <a href=""https://stackoverflow.com/a/37091489/895245"">https://stackoverflow.com/a/37091489/895245</a> but it also fixed further errors, so it is the easiest thing to do.</p>

<p>Tested on <a href=""https://github.com/googlesamples/android-vulkan-tutorials/tree/7ba478ac2e0d9006c9e2e261446003a4449b8aa3/tutorial05_triangle"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vulkan-tutorials/tree/7ba478ac2e0d9006c9e2e261446003a4449b8aa3/tutorial05_triangle</a> , Android Studio 2.3, Ubuntu 14.04.</p>
",895245,,-1,,2017-05-23 12:18:21,2017-03-03 10:53:23,,,,0,,,
Android,42577323,2,,42577096,2017,,1,,"<p>Firstly, switch to <code>FusedLocationApi</code> instead of LocationManager which is old now. You need to use <code>requestLocationUpdates()</code> method of FusedLocationAPI.</p>

<p>Go through the google samples for details:
<a href=""https://github.com/googlesamples/android-play-location"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-location</a></p>
",2191999,,,,,2017-03-03 11:10:26,,,,0,,,
Android,43760847,2,,43694696,2017,,1,,"<p>Finally, I found the Google example for <a href=""https://github.com/googlesamples/android-Camera2Basic/"" rel=""nofollow noreferrer"">Camera2</a>. the GLSurfaceView seems an implementation of this project. I compared the two projects and I created the necessary classes to take photo.</p>
",767440,,,,,2017-05-03 13:01:50,,,,0,,,
Android,51078253,2,,51076495,2018,,1,,"<p>You can follow this sample provided by Google. It contains a chain of image processing. All related <code>Worker</code> is working under <code>ImageOperations.java</code> as a chain of work.</p>

<p><a href=""https://github.com/googlesamples/android-architecture-components/blob/master/WorkManagerSample/app/src/main/java/com/example/background/ImageOperations.java"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components/blob/master/WorkManagerSample/app/src/main/java/com/example/background/ImageOperations.java</a></p>
",5311266,,,,,2018-06-28 8:34:29,,,,0,,,
Android,44145483,2,,44023646,2017,,1,,"<p>It looks like you are missing: </p>

<pre><code>manager.setProfileEnabled(componentName);
</code></pre>

<p>I recommend looking a little closer at some of the examples below. I'm not sure what <code>isProfileActive()</code> does. I would use: </p>

<pre><code>manager.isProfileOwnerApp(getApplicationContext().getPackage())
</code></pre>

<p>When you create a managed profile, the managed profile's apps and data are separate from the user's apps/data that created the managed profile (in most cases, personal versus work). If you open your app from the original user's context, it will try to set up a work profile again. To see your app as the profile owner, you need to open it in your managed profile's context (your app will be ""badge"", have a little briefcase on it). Additionally, data like your certificates will be restricted to your managed profile.</p>

<ul>
<li><a href=""https://developer.android.com/work/managed-profiles.html"" rel=""nofollow noreferrer"">https://developer.android.com/work/managed-profiles.html</a></li>
<li><a href=""https://developers.google.com/android/work/build-dpc"" rel=""nofollow noreferrer"">https://developers.google.com/android/work/build-dpc</a></li>
</ul>

<p>A good initial example to follow:
<a href=""https://github.com/googlesamples/android-BasicManagedProfile"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-BasicManagedProfile</a></p>

<p>A much more complex, but more complete example. It can be configured as a device owner or profile owner:
<a href=""https://github.com/googlesamples/android-testdpc"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-testdpc</a></p>
",6917917,,1841194,,2017-08-15 5:53:00,2017-08-15 5:53:00,,,,0,,,
Android,44148377,2,,44127950,2017,,1,,"<p>We did not produce a GATT client sample specific to Android Things because the existing Android samples already covered this case pretty well. You can use the standard Android BLE APIs without any changes, so have a look at the existing <a href=""https://github.com/googlesamples/android-BluetoothLeGatt"" rel=""nofollow noreferrer"">Android BluetoothLeGatt Sample</a>.</p>

<p>Additionally, if you find it helpful, I personally built an Android <a href=""https://github.com/devunwired/accessory-samples/tree/master/BluetoothGatt"" rel=""nofollow noreferrer"">BLE GATT sample</a> a few years back that talks specifically to the SensorTag. It was a previous version of the hardware, but the overall concepts should remain the same.</p>
",246461,,,,,2017-05-24 3:20:13,,,,2,,,
Android,52303562,2,,52264580,2018,,1,,"<p>A TextureView will by default just stretch whatever images you give it into its view dimensions.  So if you give it a 1920x1080 buffer (16:9 aspect ratio) but its dimensions are 1600x1200 (4:3), you'll get a vertically squished image shown.</p>

<p>Take a look at the <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/AutoFitTextureView.java"" rel=""nofollow noreferrer"">AutoFitTextureView</a> in the Camera2Basic sample from Google.
It tries to ensure that its aspect ratio matches that of the camera, but it does require you to set its layout parameters correctly (and it has to be in a layout container that allows its children some flexibility in sizing).</p>
",1344825,,,,,2018-09-12 21:13:01,,,,0,,,
Android,32961245,2,,32736708,2015,,1,,"<p><em>Although you have done lots of research but my answers to you are as follows:</em>
<strong>1</strong>.</p>

<blockquote>
  <p>Yes,we can but Bluetooth low energy will work similarly as of normal
  bluetooth for chat and so there will be no difference between the two
  as serial data transfer is not properly applicable now for BLE
  devices.</p>
</blockquote>

<p><strong>2</strong>.</p>

<blockquote>
  <p>Yes,it can because Ble is just the hardware ie. Bluetooth v4 while it
  supports normal bluetooth functions.Chat is possible but chat would be
  like normal bluetooth chat.They have their own set of APIs for BLE
  programming. You just need to include their API add-ons into your
  Android apps to access the BLE features but if you don""t then it acts as normal bluetooth devices.</p>
</blockquote>

<p><strong>3</strong>.</p>

<blockquote>
  <p>there is no such good resource available but still you can check out
  normal bluetooth chat by
  google:<a href=""https://github.com/googlesamples/android-BluetoothChat"" rel=""nofollow"">https://github.com/googlesamples/android-BluetoothChat</a> You can
  use this for normal bluetooth chat and then customize it as per
  bluetooth low energy libraries for android.</p>
</blockquote>

<p>Ble technology is used for ibeacon,smartwatches and others as its connectivity covers longer distance Ble Chat functionality is still a big question for the android developers as google has not provided  sufficient material for it while in iOS they have successfully used AirChat with the help of Bluetooth v4 for Ble kind of chatting.</p>
",5412225,,5412225,,2015-10-06 3:41:51,2015-10-06 3:41:51,,,,4,,,
Android,53078867,2,,49808178,2018,,1,,"<p>I was also getting this exact error ""Failed to find class com/google/ar/core/SessionCreateJniHelper using custom class loader"" followed by ""Failed to load SessionCreateJniHelper class"", when embedding <a href=""https://github.com/google-ar/arcore-android-sdk/tree/master/samples/hello_ar_c"" rel=""nofollow noreferrer"">arore-android-sdk/samples/hello_ar_c</a> sample over to the <a href=""https://github.com/googlesamples/android-ndk/tree/master/native-activity"" rel=""nofollow noreferrer"">android-ndk/native-activity</a> sample framework (while using Android Studio).</p>

<p>The issue in this scenario was the android:hasCode=""false"" directive in AndroidManifest.xml that the <a href=""https://github.com/googlesamples/android-ndk/blob/master/native-activity/app/src/main/AndroidManifest.xml#L14"" rel=""nofollow noreferrer"">NativeActivity sample adds</a>. Even if one does not have any Java code in a NativeActivity-based application, linking in ARCore does add Java code, so in that case android:hasCode=""false"" directive needs to be removed.</p>
",10584598,,,,,2018-10-31 8:07:34,,,,0,,,
Android,35192809,2,,35190080,2016,,1,,"<blockquote>
  <p>in Android 6.0, you can use Intent same as previous version of android
  OS which open default storage explorer with recent files you can also
  change its to <strong><em>show external storage</em></strong> using option menu there is
  also navigation drawer for more options like photos,image,videos,Audio
  filters etc. below is code</p>
</blockquote>

<pre><code>public void openFileEx() {
        Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
        intent.setType(""*/*"");
        startActivityForResult(intent, 15);
    }
</code></pre>

<hr>

<p><strong><em>but you have to ask for permission of <code>android.permission.READ_EXTERNAL_STORAGE</code> in android 6.0 Marshmallow for read file from external storage like below</em></strong></p>

<pre><code>if (Build.VERSION.SDK_INT &lt; 23) {
                    openFileEx();
                } else {
                    if (ActivityCompat.checkSelfPermission(MainActivity.this, Manifest.permission.READ_EXTERNAL_STORAGE)
                            != PackageManager.PERMISSION_GRANTED) {
                        requestContactsPermissions();
                    } else {
                        openFileEx();
                    }
                }
</code></pre>

<hr>

<pre><code>public void requestContactsPermissions() {
        if (ActivityCompat.shouldShowRequestPermissionRationale(this,
                Manifest.permission.READ_EXTERNAL_STORAGE)) {
            Log.i(""PERMISIOM"",
                    ""Displaying contacts permission rationale to provide additional context."");
            ActivityCompat.requestPermissions(MainActivity.this,
                    new String[]{Manifest.permission.READ_EXTERNAL_STORAGE},
                    11);
        } else {
            // Contact permissions have not been granted yet. Request them directly.
            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.READ_EXTERNAL_STORAGE}, 11);
        }
    }
</code></pre>

<hr>

<p><em>you can also check for more permission using above code, Here is sample of <a href=""https://github.com/googlesamples/android-RuntimePermissions"" rel=""nofollow"">android-RuntimePermissions</a> on Github.</em> </p>
",1168654,,,,,2016-02-04 4:57:39,,,,0,,,
Android,43766165,2,,43765499,2017,,1,,"<p>Unfortunately there is no way to handle exceptions from not your own native code. </p>

<p>I had the similar issue with google-vision. And I reported the issue to google vision github <a href=""https://github.com/googlesamples/android-vision"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vision</a></p>

<p>Sadly but this library has some bugs. In my case it was the bug in the barcode text parser.
It will be cool if you report your problem too.</p>

<p>It may be interesting that there is a way to catch exception from your own native code: <a href=""https://stackoverflow.com/questions/8415032/catching-exceptions-thrown-from-native-code-running-on-android"">Catching exceptions thrown from native code running on Android</a></p>
",7958563,,-1,,2017-05-23 12:02:23,2017-05-03 17:08:10,,,,4,,,
Android,45005181,2,,45004976,2017,,1,,"<p>You just need to read <a href=""https://developer.android.com/training/swipe/index.html"" rel=""nofollow noreferrer"">docs on SwipeRefreshLayout</a></p>

<p>First, add SwipeRefreshLayout to your activity layout:</p>

<pre><code>&lt;android.support.v4.widget.SwipeRefreshLayout
    xmlns:android=""http://schemas.android.com/apk/res/android""
    android:id=""@+id/swiperefresh""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""&gt;

    // here is your content

&lt;/android.support.v4.widget.SwipeRefreshLayout&gt;
</code></pre>

<p>Then find instance of swipe refresh layout in your activity:</p>

<pre><code>mSwipeRefreshLayout = (SwipeRefreshLayout) findViewById(R.id.swipeRefresh);
</code></pre>

<p>And set refresh listener in which trigger your update method</p>

<pre><code>/*
 * Sets up a SwipeRefreshLayout.OnRefreshListener that is invoked when the user
 * performs a swipe-to-refresh gesture.
 */
mSwipeRefreshLayout.setOnRefreshListener(
    new SwipeRefreshLayout.OnRefreshListener() {
        @Override
        public void onRefresh() {
            Log.i(LOG_TAG, ""onRefresh called from SwipeRefreshLayout"");

            // This method performs the actual data-refresh operation.
            // The method calls setRefreshing(false) when it's finished.
            myUpdateOperation();
        }
    }
);
</code></pre>

<p>For more information read docs, link in the beginning of the answer.</p>

<p>Also you might look at google samples:</p>

<ul>
<li><a href=""https://github.com/googlesamples/android-SwipeRefreshLayoutBasic/#readme"" rel=""nofollow noreferrer"">SwipeRefreshLayoutBasic</a></li>
<li><a href=""https://github.com/googlesamples/android-SwipeRefreshListFragment/#readme"" rel=""nofollow noreferrer"">SwipeRefreshListFragment</a></li>
</ul>

<p>List of all google samples you can find <a href=""https://developer.android.com/samples/index.html"" rel=""nofollow noreferrer"">here</a></p>

<p>Hope it helps</p>
",1533933,,,,,2017-07-10 6:34:01,,,,4,,,
Android,44791228,2,,44790666,2017,,1,,"<p>1.- The drawer (NavigationView) is a ViewGroup, you can add a Fragment inside of it and then do whatever you want.</p>

<pre><code>&lt;android.support.design.widget.NavigationView
        android:id=""@+id/nav_view""
        android:layout_width=""wrap_content""
        android:layout_height=""match_parent""
        android:layout_gravity=""start""
        android:fitsSystemWindows=""true""
        android:background=""@drawable/side_nav_bar""&gt;

        &lt;fragment
            android:id=""@+id/drawerFragment""
            android:name=""cl.cutiko.someapp.views.main.drawer.DrawerFragment""
            android:layout_width=""match_parent""
            android:layout_height=""match_parent"" /&gt;

&lt;/android.support.design.widget.NavigationView&gt;
</code></pre>

<p>2.- If you want to use the default implementation then you don't need to have each function in a fragment, you can use a Presenter and return the result of the presenter to the View. See MVP design pattern <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp/"" rel=""nofollow noreferrer"">here</a> </p>
",4017501,,,,,2017-06-27 23:00:10,,,,2,,,
Android,53414410,2,,52816240,2018,,1,,"<p>It seems there actually is no real solution to your problem. But after going through some Google articles it actually seems that in-app purchases are not intended to be refunded, except in some very rare edge-cases. This would mean refund-behavior is not intended as far as I can tell.</p>

<p>Source: <a href=""https://github.com/googlesamples/android-play-billing/issues/113"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-billing/issues/113</a></p>
",8573969,,,,,2018-11-21 14:36:01,,,,0,,,
Android,34389232,2,,34389053,2015,,1,,"<p>The constructor for BrowseAdapter calls the parent constructor (<a href=""https://github.com/android/platform_frameworks_base/blob/marshmallow-release/core/java/android/widget/ArrayAdapter.java#L154-164"" rel=""nofollow"">see ArrayAdapter.java lines 154-164</a>). The parent constructor creates a list of items (<a href=""https://github.com/android/platform_frameworks_base/blob/marshmallow-release/core/java/android/widget/ArrayAdapter.java#L180"" rel=""nofollow"">see lines 175-182</a>).</p>

<p>Items are added to the adapter which adds them to the list (<a href=""https://github.com/googlesamples/android-UniversalMusicPlayer/blob/master/mobile/src/main/java/com/example/android/uamp/ui/MediaBrowserFragment.java#L119-121"" rel=""nofollow"">MediaBrowserFragment lines 119-121</a>). <code>getItem(int position)</code> then returns the item in the list (see <a href=""https://github.com/android/platform_frameworks_base/blob/marshmallow-release/core/java/android/widget/ArrayAdapter.java#L343-345"" rel=""nofollow"">343-345</a>).</p>
",1048340,,1048340,,2015-12-21 8:42:25,2015-12-21 8:42:25,,,,5,,,
Android,52405455,2,,10106837,2018,,1,,"<p>Since API level 21 there is <code>KeyguardManager.createConfirmDeviceCredentialIntent</code> that can be used to authenticate current user with the device lock pin.</p>

<p>See the <a href=""https://github.com/googlesamples/android-ConfirmCredential"" rel=""nofollow noreferrer"">usage example</a>.</p>
",1064513,,,,,2018-09-19 12:03:44,,,,0,,,
Android,52421704,2,,52289534,2018,,1,,"<p>Why don't you try out this sample: <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Video</a></p>

<p>I think it will definitely fulfill all of your requirements and you can always reach out to me if you're unable to relate to the code in the sample mentioned above.</p>

<p><strong>This sample uses the Camera2 API as well as what you want is the conversion from raw YUV frames, which can be done using it. So, I hope that you wont have any issues or problems if you would go through the given sample once and use its code for recording MP4 videos in your desired app.</strong></p>

<p><strong>For instance -</strong>
<strong>a)</strong> In this, you will have to implement a <a href=""https://developer.android.com/reference/android/hardware/camera2/CameraDevice.StateCallback"" rel=""nofollow noreferrer"">CameraDevice.StateCallback</a> to receive events about changes of the state of the camera device. Override its methods to set your CameraDevice instance, start the preview, and stop and release the camera.</p>

<p><strong>b)</strong> When starting the preview, set up the <strong>MediaRecorder</strong> to accept video format.</p>

<p><strong>c)</strong> Then, set up a <a href=""https://developer.android.com/reference/android/hardware/camera2/CaptureRequest.Builder"" rel=""nofollow noreferrer"">CaptureRequest.Builder</a> using createCaptureRequest(CameraDevice.TEMPLATE_RECORD) on your CameraDevice instance.</p>

<p><strong>d)</strong> Then, implement a <a href=""https://developer.android.com/reference/android/hardware/camera2/CameraCaptureSession.StateCallback"" rel=""nofollow noreferrer"">CameraCaptureSession.StateCallback</a>, using the method createCaptureSession(surfaces, new CameraCaptureSession.StateCallback(){}) on your CameraDevice instance, where surfaces is a list consisting of the surface view of your TextureView and the surface of your <strong>MediaRecorder</strong> instance.</p>

<p><strong>e)</strong> Use start() and stop() methods on your <strong>MediaRecorder</strong> instance to actually start and stop the recording.</p>

<p><strong>f)</strong> Lastly, set up and clean up your camera device in onResume() and onPause().</p>

<p>Happy coding.</p>
",9008357,,9008357,,2018-09-20 14:09:33,2018-09-20 14:09:33,,,,9,,,
Android,52366143,2,,52364938,2018,,1,,"<p>The approach the Google team came up with in the architecture components samples is to use a custom annotation in order to provide ViewModel classes through dagger.</p>

<p>In Java the Annotation looks as follows.</p>

<pre><code>import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

import androidx.lifecycle.ViewModel;
import dagger.MapKey;

@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
@MapKey
@interface ViewModelKey {
    Class&lt;? extends ViewModel&gt; value();
}
</code></pre>

<p>This uses MapKey from Dagger, where any annotated ViewModel will be composed into a Map which can then be used in your ViewModelFactory.</p>

<p>In the Google samples the ViewModelFactory looks as follows, where using constructor injection you can access the map of ViewModel providers.</p>

<pre><code>public class ViewModelFactory implements ViewModelProvider.Factory {

    private final Map&lt;Class&lt;? extends ViewModel&gt;, Provider&lt;ViewModel&gt;&gt; viewModels;

    @Inject
    public ViewModelFactory(Map&lt;Class&lt;? extends ViewModel&gt;, Provider&lt;ViewModel&gt;&gt; viewModels) {
        this.viewModels = viewModels;
    }

    @NonNull
    @Override
    public &lt;T extends ViewModel&gt; T create(@NonNull Class&lt;T&gt; modelClass) {
        Provider&lt;ViewModel&gt; viewModelProvider = viewModels.get(modelClass);

        if (viewModelProvider == null) {
            throw new IllegalArgumentException(""model class "" + modelClass + "" not found"");
        }

        //noinspection unchecked
        return (T) viewModelProvider.get();
    }
}
</code></pre>

<p>In your example your would end up with the following in order to provide the MyCatchViewModel. Other ViewModels could then be provided by following the same pattern.</p>

<pre><code>@Module
public abstract class ViewModelModule {
    @Binds
    @IntoMap
    @ViewModelKey(MyCatchViewModel.class)
    abstract ViewModel myCatchViewModel(MyCatchViewModel myCatchViewModel);
}
</code></pre>

<p>For a complete example you can check out the GithubBrowserSample sample from Google. <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/di/ViewModelModule.kt"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/di/ViewModelModule.kt</a></p>
",9549299,,,,,2018-09-17 10:55:21,,,,4,,,
Android,44419653,2,,42091283,2017,,1,,"<p>I'm not sure if I'm misunderstanding your question, but I'll try to take a crack at it. For my below explanation, I'll reference <a href=""https://github.com/googlesamples/android-instant-apps"" rel=""nofollow noreferrer"">this code sample by Google</a> several times. I <strong>HIGHLY</strong> suggest cloning that repo and playing around with it, since I think it will answer your question.</p>

<blockquote>
  <p>if we use libraries like dagger, butterknife, ... all modules would be dependent on other modules</p>
</blockquote>

<p>As mentioned by others, any libraries that will be used by all of your Features  will go into your Base Feature.</p>

<blockquote>
  <p>if our modules contain (views) as required, how should a transition to another view (from another module) be implemented without importing this module?</p>
</blockquote>

<p><a href=""https://stackoverflow.com/a/44262396/1759443"">This answer</a> covers the overview of it - but this part seems to be the root of your question so I'll try to dig in a little deeper.</p>

<p>Let's say Feature1 (<code>BrowseActivity</code>) wants to open up Feature2 (<code>ItemDetailActivity</code>). Instead of Feature1 calling <code>startActivity(ItemDetailActivity.class)</code> directly, it will have to use the method call below (this is because Feature1 doesn't have access to Feature2's <code>ItemDetailActivity.class</code> since they do NOT depend on each other).
<a href=""https://github.com/googlesamples/android-instant-apps/blob/master/multi-feature-module/main/src/main/java/com/example/android/unsplash/MainActivity.java#L186"" rel=""nofollow noreferrer"">Here is the code sample provided by Google</a></p>

<pre><code>Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(""https://example.com/itemdetail""));
intent.setPackage(getPackageName());
intent.addCategory(Intent.CATEGORY_BROWSABLE);
startActivity(intent);
</code></pre>

<p>Now the missing part is that in Feature2's <code>AndroidManifest</code> you need to declare that <code>ItemDetailActivity</code> is listening for the <code>https://example.com/itemdetail</code> link. <a href=""https://github.com/googlesamples/android-instant-apps/blob/master/multi-feature-module/detail/src/main/AndroidManifest.xml#L21"" rel=""nofollow noreferrer"">Here is the relevant code sample from Google</a></p>

<pre><code>&lt;activity android:name="".ItemDetailActivity""&gt;
    &lt;intent-filter&gt;
      &lt;action android:name=""android.intent.action.MAIN"" /&gt;
      &lt;category android:name=""android.intent.category.LAUNCHER"" /&gt;
    &lt;/intent-filter&gt;
    &lt;intent-filter android:autoVerify=""true""&gt;
      &lt;action android:name=""android.intent.action.VIEW"" /&gt;
      &lt;category android:name=""android.intent.category.DEFAULT"" /&gt;
      &lt;category android:name=""android.intent.category.BROWSABLE"" /&gt;
      &lt;data android:scheme=""http"" /&gt;
      &lt;data android:scheme=""https"" /&gt;
      &lt;data android:host=""example.com"" /&gt;
      &lt;!-- IMPORTANT --&gt;
      &lt;data android:pathPrefix=""/itemdetail""/&gt;
    &lt;/intent-filter&gt;
    &lt;meta-data
      android:name=""default-url""
      android:value=""https://www.example.com/itemdetail"" /&gt;
&lt;/activity&gt;
</code></pre>

<p>For any more info, read up on <a href=""https://developer.android.com/training/app-links/index.html"" rel=""nofollow noreferrer"">Digital Asset Links</a> as well as general <a href=""https://developer.android.com/training/app-indexing/deep-linking.html"" rel=""nofollow noreferrer"">Deep Linking</a></p>
",1759443,,,,,2017-06-07 17:54:46,,,,0,,,
Android,44049240,2,,44011869,2017,,1,,"<p>First, start hacking away at the Hello-JNI example from Google:
<a href=""https://github.com/googlesamples/android-ndk/tree/master/hello-jni"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk/tree/master/hello-jni</a></p>

<p>Use that as a test bed.</p>

<p>Then, create a Java Class with <code>public native</code> methods that let you interact with your library.  Something of a high level API, probably to pass a file name or buffer to SHPOpenLL and return a pointer to the ShapeFile context (<code>ShapeHandle</code>).  Looks like your library is written in C, so you should be able to write a similar interface to query the shapefile passing a (jint) c-style cast of your <code>ShapeHandle</code> pointer.</p>

<p>Next, you need to play around with <code>javah</code> to generate the header for your shapefile interface.  Once the header is generated, you can use it to implement your interface in a .cc file.  From there you will basically make Java calls to your C interface and it will return jobjects. (jint, jbool, jstring, etc...)</p>

<hr>

<p>I'm looking at the ShapeLib that you want to use and while it's easy enough, there will be some gotchas.</p>

<ul>
<li>You will need to implement <a href=""https://github.com/sw897/shapelib/blob/master/shapefil.h#L282"" rel=""nofollow noreferrer"">SAHooks</a> for file I/O.  I suggest looking at <a href=""https://github.com/PolygonTek/BlueshiftEngine/tree/master/Engine/Source/Dependencies/nvidia/nv_file"" rel=""nofollow noreferrer"">NVFile</a> for an example how to  access APK files (or downloaded files). You will need to init it using activity.context.assetmanager.  Then use nv_file to wrap FRead/FSeek/etc...</li>
<li>Passing info back to java is going to be tough.  Personally, I would build a Java class to hold the shape information and fill it out on the <code>C</code> side.  However, you might be tempted to query these parameters from the <code>SHPObject</code> one at a time.  Will be slow, but less error prone.</li>
</ul>

<p>E.g. </p>

<pre><code>// Java 
MyJavaShapeObject obj = new MyJavaShapeObject();
_c_retrieveShapeObj((jint)pShapeFile, obj);

// C
java_blah_blah_c_retrieveShapeObj(JNIEnv* env, jclass activity, jint theShapeFile, jobject theObj){
    ShapeHandle pShapeFileHandle = (ShapeHandle)theShapeFile; // c style conversion
    // http://stackoverflow.com/questions/11647646/how-to-use-the-jni-to-change-the-fields-of-a-java-class
    // http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/functions.html#wp16613
    // http://stackoverflow.com/a/36759159/7949696
} 
</code></pre>
",7949696,,,,,2017-05-18 13:33:25,,,,0,,,
Android,44427693,2,,44404906,2017,,1,,"<p>You should use; </p>

<ol>
<li><code>Database.beginTransaction()</code> before insert operation.</li>
<li><code>Database.setTransactionSuccessful()</code> after insert operation.</li>
<li><code>Database.endTransaction()</code> finally.</li>
</ol>

<p>Sample code:</p>

<pre><code>private static void insertData(AppDatabase db, List&lt;ProductEntity&gt; products, List&lt;CommentEntity&gt; comments) {
    db.beginTransaction();
    try {
        db.productDao().insertAll(products);
        db.commentDao().insertAll(comments);
        db.setTransactionSuccessful();
    } finally {
        db.endTransaction();
    }
}
</code></pre>

<p><a href=""https://github.com/googlesamples/android-architecture-components/blob/master/BasicSample/app/src/main/java/com/example/android/persistence/db/DatabaseInitUtil.java"" rel=""nofollow noreferrer"">Sample reference</a></p>
",1460509,,,,,2017-06-08 5:58:02,,,,1,,,
Android,44422987,2,,44415839,2017,,1,,"<p><a href=""https://github.com/googlesamples/android-instant-apps/tree/master/hello"" rel=""nofollow noreferrer"">This sample project</a> seems to be pretty close to what you're trying to achieve. Perhaps you don't need the <code>application project("":apk"")</code> in your <code>base/build.gradle</code> since you only have one feature (and that is the base split). You could also try removing <code>base = true</code>.</p>

<p><a href=""https://developer.android.com/topic/instant-apps/overview.html#features"" rel=""nofollow noreferrer"">This section of the docs</a> covers your use case - but it sounds like everything is set up correctly.</p>

<p>Could you also add your <code>AndroidManifests</code> to your original post?</p>
",1759443,,,,,2017-06-07 21:22:09,,,,7,,,
Android,53162076,2,,53129294,2018,,1,,"<p><strong>Permissions</strong></p>

<p>If you do not want to inject JS I think your solution isn't far off. Just a bit of state management can help this.</p>

<p>You need to have the AndroidManifiest and Android Permission checks at compile time and the first runtime a user uses your app because you want to allow a user to specifically allow/deny this functionality dynamically during the experience. Not constantly fiddle around with Android app settings / permissions. Going to and from settings would be rather tedious. I also presume this UX is what you are trying to avoid.</p>

<p>Thus you should do runtime checking on permissions within WebChromeClients onPermissionRequest (which is basically what you have) for when each time this is fired. You can use a state variable, or a white list of domains stored in the state to allow a user allows to limit this functionality and even lock it to specific domains. You can also check specifically for RESOURCE_VIDEO_CAPTURE, etc.</p>

<p>For an example you can see how I do domain locking in my GitHub example here: <a href=""https://github.com/marcusbelcher/android-getUserMedia-test"" rel=""nofollow noreferrer"">https://github.com/marcusbelcher/android-getUserMedia-test</a> see line 106 and 116. You can use a variable/state logic to block specific requests here. This is the request per session when someone fires off getUserMedia. </p>

<p>This is the only place at runtime you can deny/allow. More info is here: </p>

<p><a href=""https://github.com/googlesamples/android-PermissionRequest"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-PermissionRequest</a></p>

<p><a href=""https://developer.android.com/reference/android/webkit/PermissionRequest"" rel=""nofollow noreferrer"">https://developer.android.com/reference/android/webkit/PermissionRequest</a></p>

<p><strong>JS Overrides</strong></p>

<p>If you can / want to inject JS you can inject and override getUserMedia inside the DOM via <code>navigator.mediaDevices.getUserMedia = undefined</code>. You could move the reference temporarily <code>window.t = navigator.mediaDevices.getUserMedia; navigator.mediaDevices.getUserMedia = null;</code> and reverse this when you would like. </p>

<p>More info is here:</p>

<p><a href=""https://stackoverflow.com/questions/5649111/android-webview-loading-javascript-file-in-assets-folder"">Android webview, loading javascript file in assets folder</a></p>

<p><a href=""https://medium.com/appunite-edu-collection/webview-with-injected-js-script-13eb1e0257c9"" rel=""nofollow noreferrer"">https://medium.com/appunite-edu-collection/webview-with-injected-js-script-13eb1e0257c9</a></p>
",1336754,,1336754,,2018-11-05 21:23:18,2018-11-05 21:23:18,,,,1,,,
Android,50004075,2,,49994694,2018,,1,,"<p>If you do it properly it will allow you in Developer console to upload both.
Read this for general requirements:
<a href=""https://developer.android.com/google/play/publishing/multiple-apks.html"" rel=""nofollow noreferrer"">https://developer.android.com/google/play/publishing/multiple-apks.html</a></p>

<p>This is also an example, note the application folder which is for the mobile and wearable folder which is for the Wear device. See the details in Android manifest and build gradle files, you need to follow them exactly.</p>

<p><a href=""https://github.com/googlesamples/android-WatchFace"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-WatchFace</a></p>
",3041972,,,,,2018-04-24 14:20:58,,,,0,,,
Android,50025685,2,,50014807,2018,,1,,"<p>Yes, <a href=""https://developer.android.com/reference/android/media/MediaCodec.html#configure(android.media.MediaFormat,%20android.view.Surface,%20android.media.MediaCrypto,%20int)"" rel=""nofollow noreferrer"">you can configure</a> a MediaCodec decoder with an output surface and use GLSurfaceView to apply changes through shaders, this is the best way because you use just the necessary memory, especially for color transformation (you can't know in advance what color your decoder use), and for YUV2RGB transformation.</p>

<p>You can take a look <a href=""https://developer.android.com/reference/android/media/MediaCodec.html"" rel=""nofollow noreferrer"">here</a> or <a href=""https://github.com/googlesamples/android-ndk/tree/master/native-codec"" rel=""nofollow noreferrer"">here</a> if you want to do it in native</p>
",5458344,,,,,2018-04-25 15:08:05,,,,0,,,
Android,35273916,2,,35188948,2016,,1,,"<p>We have no plans to expose the underlying camera in the official API.  But there's an open source version of this class that you can use and modify:</p>

<p><a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java"" rel=""nofollow"">https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java</a></p>
",5231007,,,,,2016-02-08 16:00:51,,,,0,,,
Android,50175492,2,,50111818,2018,,1,,"<p>This might be related to the fact that the attestation API has been marked as deprecated. The new one doesn't depend on the google client API, you should check <a href=""https://developer.android.com/training/safetynet/attestation"" rel=""nofollow noreferrer"">this</a>. Also Google released an example app using the new api, you can check <a href=""https://github.com/googlesamples/android-play-safetynet"" rel=""nofollow noreferrer"">here</a>.</p>
",3109410,,,,,2018-05-04 12:54:51,,,,0,,,
Android,45994451,2,,45994279,2017,,1,,"<p>You can use</p>

<ol>
<li><a href=""https://developer.android.com/reference/android/app/job/JobScheduler.html"" rel=""nofollow noreferrer"">JobScheduler</a></li>
</ol>

<blockquote>
  <p>This API allows you to run scheduled service and the android system
  will batch all the services from different applications and run them
  together in some particular timeframe</p>
</blockquote>

<ol start=""2"">
<li><a href=""https://github.com/firebase/firebase-jobdispatcher-android"" rel=""nofollow noreferrer"">Firebase Job Dispatcher</a></li>
</ol>

<blockquote>
  <p>The Firebase JobDispatcher is a library for scheduling background jobs
  in your Android app. It provides a JobScheduler-compatible API that
  works on all recent versions of Android (API level 9+) that have
  Google Play services installed.</p>
</blockquote>

<p>for reference you can use following links</p>

<p><a href=""https://medium.com/@kevalpatel2106/how-to-handle-background-services-in-android-o-f96783e65268"" rel=""nofollow noreferrer"">reference 1</a><br>
<a href=""http://www.vogella.com/tutorials/AndroidTaskScheduling/article.html"" rel=""nofollow noreferrer"">reference 2</a><br>
<a href=""https://github.com/googlesamples/android-JobScheduler"" rel=""nofollow noreferrer"">reference 3</a><br>
<a href=""https://medium.com/google-developers/scheduling-jobs-like-a-pro-with-jobscheduler-286ef8510129"" rel=""nofollow noreferrer"">referennce 4</a><br>
<a href=""https://medium.com/@anshuljain/become-a-pro-at-scheduling-tasks-in-android-1b955f75f430"" rel=""nofollow noreferrer"">reference 5</a><br>
<a href=""https://stackoverflow.com/questions/37720015/firebase-jobdispatcher-how-does-it-work-compared-to-previous-apis-jobschedule"">reference 6</a></p>
",3134215,,,,,2017-09-01 6:32:22,,,,0,,,
Android,31821256,2,,16667903,2015,,1,,"<p>Now that Android Studio is in the stable channel, it is pretty straightforward to get the <a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow"">android-ndk samples</a> running.  These samples use the <a href=""http://tools.android.com/tech-docs/new-build-system/gradle-experimental"" rel=""nofollow"">ndk experimental plugin</a> and are newer than the ones linked to from the Android NDK online documentation.  Once you know they work you can study the build.gradle, local.properties and gradle-wrapper.properties files and modify your project accordingly.  Following are the steps to get them working.</p>

<ol>
<li><p>Go to settings, Appearance &amp; Behavior, System Settings, Android SDK, selected the SDK Tools tab, and check Android NDK version 1.0.0 at the bottom of the list.  This will download the NDK.</p></li>
<li><p>Point to the location of the newly downloaded NDK.  Note that it will be placed in the sdk/ndk-bundle directory.  Do this by selecting File, Project Structure, SDK Location (on left), and supplying a path under Android NDK location.  This will add an ndk entry to local.properties similar to this:  </p>

<blockquote>
  <p>Mac/Linux: ndk.dir=/Android/sdk/ndk-bundle<br>
  Windows: ndk.dir=C:\Android\sdk\ndk-bundle</p>
</blockquote></li>
</ol>

<p>I have successfully built and deployed all projects in the repository this way, except gles3gni, native-codec and builder.  I'm using the following:  </p>

<p>Android Studio 1.3 build AI-141.2117773<br>
android-ndk samples published July 28, 2015 (link above)<br>
SDK Tools 24.3.3<br>
NDK r10e extracted to C:\Android\sdk\ndk-bundle<br>
Gradle 2.5<br>
Gradle plugin 0.2.0<br>
Windows 8.1 64 bit  </p>
",3549440,,3549440,,2015-08-05 0:45:41,2015-08-05 0:45:41,,,,0,,,
Android,36001337,2,,33479004,2016,,1,,"<p>use the formula below to get device rotation.</p>

<pre><code>private int getOrientation(int rotation) {
    return (ORIENTATIONS.get(rotation) + mSensorOrientation + 270) % 360;
}
</code></pre>

<p>SensorOrientation is a field assigned from </p>

<pre><code>characteristics.get(CameraCharacteristics.SENSOR_ORIENTATION) 
</code></pre>

<p>Solution suggested by google engineer: yaraki</p>

<p><a href=""https://github.com/googlesamples/android-Camera2Basic/issues/24"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Basic/issues/24</a></p>
",5399875,,,,,2016-03-15 1:52:34,,,,1,,,
Android,36008757,2,,35892170,2016,,1,,"<p>You could stub the intent like the <a href=""https://github.com/googlesamples/android-testing/blob/master/ui/espresso/IntentsAdvancedSample/app/src/androidTest/java/com/example/android/testing/espresso/intents/AdvancedSample/ImageViewerActivityTest.java"" rel=""nofollow"">official samples</a> demonstrated with the ACTION_IMAGE_CAPTURE intent:</p>

<pre><code>@Before
public void stubCameraIntent() {
    ActivityResult result = createImageCaptureActivityResultStub();

    // Stub the Intent.
    intending(hasAction(MediaStore.ACTION_IMAGE_CAPTURE)).respondWith(result);
}
</code></pre>

<p>In your case that could be something like this:</p>

<pre><code>@Before
public void stubNextIntent() {
    intended(hasComponent(NextActivity.class.getName()));
}
</code></pre>

<p><a href=""http://collectiveidea.com/blog/archives/2015/06/11/testing-for-android-intents-using-espresso/"" rel=""nofollow"">this tutorial</a> might be interesting for you</p>
",1531708,,,,,2016-03-15 10:34:11,,,,0,,,
Android,50402901,2,,50217980,2018,,1,,"<p>You cannot play NAL units or raw H.264 stream with ExoPlayer. <br>The picture data must exist within a <a href=""https://google.github.io/ExoPlayer/supported-formats.html"" rel=""nofollow noreferrer""><strong>supported</strong> container/format</a>.</p>

<p>It's not clear what your mysterious C++ code is doing, is it an <a href=""https://developer.android.com/studio/projects/add-native-code"" rel=""nofollow noreferrer""><strong>NDK</strong></a> setup? What's its role in Android decoding? Are you saying you're unable to pass <em>[from the C++ function]</em> a data array into some Android function as function parameter? Is it something like this <a href=""https://stackoverflow.com/questions/31878117/write-int-to-binary-buffer-android-and-read-with-c""><strong>Java to C++</strong> setup</a>? It's not clear what your real problem is...</p>

<p>If you insist on Exoplayer, I can tell you that FLV is the one (on containers list) that might be the best option since it can be built in real-time (re-muxing). You first create an FLV header that holds <code>SPS</code> and <code>PPS</code> data then followed by keyframe (extracted H264 data from the first NAL). You'll have to get familiar with FLV bytes structure, but each frame header is around 13 bytes followed by NAL data, repeat for each frame until end. This woud be realtime transcoding.</p>

<p>As a second option, for Android, you could just use <a href=""https://developer.android.com/reference/android/media/MediaCodec"" rel=""nofollow noreferrer""><strong><code>MediaCodec</code></strong></a> to decode the H264 as extracted from the NAL units. Here is a <a href=""https://github.com/googlesamples/android-BasicMediaDecoder"" rel=""nofollow noreferrer""><strong>useful example source</strong></a>. Just use as:</p>

<pre><code>MediaCodec.createDecoderByType(""video/avc""); //then later give NAL units
</code></pre>

<p>Study also functions of this other <a href=""https://github.com/Consti10/myMediaCodecPlayer-for-FPV/blob/master/Android%204.4/MyMediaCodecFPVPlayer/app/src/main/java/com/example/wilson/mymediacodecfpvplayer/UdpReceiverDecoderThread.java"" rel=""nofollow noreferrer""><strong>source</strong></a> for ideas of how it works to via Android's own decoder.</p>

<p>Other starting points:</p>

<ul>
<li><p><a href=""https://stackoverflow.com/questions/32739047/android-decode-raw-h264-stream-with-mediacodec"">Android Decode raw h264 stream with MediaCodec
(NAL units)</a>.</p></li>
<li><p><a href=""https://stackoverflow.com/questions/49444446/decode-h264-raw-stream-using-mediacodec"">Decode H264 raw stream using mediacodec
</a></p></li>
</ul>
",2057709,,2057709,,2018-05-18 2:25:35,2018-05-18 2:25:35,,,,7,,,
Android,32300841,2,,32258675,2015,,1,,"<p>We have recently open sourced the CameraSource class.  See here:</p>

<p><a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java"" rel=""nofollow"">https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java</a></p>

<p>This version includes a fix for the picture size issue.  It will automatically select the highest resolution that the camera supports which matches the aspect ratio of the preview.</p>
",5231007,,5231007,,2015-12-22 18:05:32,2015-12-22 18:05:32,,,,2,,,
Android,32296783,2,,30999337,2015,,1,,"<p>Have a look on this <a href=""https://github.com/googlesamples/android-ndk/issues/34"" rel=""nofollow"">https://github.com/googlesamples/android-ndk/issues/34</a></p>

<p>Edit your <code>app/build.gradle</code> file like this:</p>

<pre><code>model {
    android {
        ...
    }
    ...
    compileOptions.with {
        sourceCompatibility = JavaVersion.VERSION_1_7
        targetCompatibility = JavaVersion.VERSION_1_7
    }
}
</code></pre>
",2090096,,,,,2015-08-30 12:54:56,,,,0,,,
Android,36157334,2,,36156839,2016,,1,,"<p>From google examples:</p>

<p><a href=""https://github.com/googlesamples/android-AppUsageStatistics"" rel=""nofollow"">https://github.com/googlesamples/android-AppUsageStatistics</a></p>

<pre><code>public List&lt;UsageStats&gt; getUsageStatistics(int intervalType) {
        // Get the app statistics since one year ago from the current time.
        Calendar cal = Calendar.getInstance();
        cal.add(Calendar.YEAR, -1);

        List&lt;UsageStats&gt; queryUsageStats = mUsageStatsManager
                .queryUsageStats(intervalType, cal.getTimeInMillis(),
                        System.currentTimeMillis());

        if (queryUsageStats.size() == 0) {
            Log.i(TAG, ""The user may not allow the access to apps usage. "");
            Toast.makeText(getActivity(),
                    getString(R.string.explanation_access_to_appusage_is_not_enabled),
                    Toast.LENGTH_LONG).show();
            mOpenUsageSettingButton.setVisibility(View.VISIBLE);
            mOpenUsageSettingButton.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    startActivity(new Intent(Settings.ACTION_USAGE_ACCESS_SETTINGS));
                }
            });
        }
        return queryUsageStats;
    }
</code></pre>

<p>And them you can use this:</p>

<p><a href=""http://developer.android.com/intl/es/reference/android/app/usage/UsageStats.html#getLastTimeUsed()"" rel=""nofollow"">http://developer.android.com/intl/es/reference/android/app/usage/UsageStats.html#getLastTimeUsed()</a></p>

<pre><code>if( mUsageStats.getPackageName().equals(""YOUR PACKAGE NAME"")){
    mUsageStats.getLastTimeUsed();
}
</code></pre>
",5902927,,5902927,,2016-03-22 14:38:30,2016-03-22 14:38:30,,,,4,,,
Android,32578130,2,,32368832,2015,,1,,"<p>You should study <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Basic</a> sample. There shows a way to control the flash with</p>

<pre><code>mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AE_MODE,
                                    CaptureRequest.CONTROL_AE_MODE_ON_AUTO_FLASH);
</code></pre>

<p>I've been studing a way to get all the frames shown in the preview texture to do some image processing, if you find a way please let me know =D.</p>
",2395325,,,,,2015-09-15 5:09:34,,,,0,,,
Android,36652360,2,,36567079,2016,,1,,"<p>I took reference from third party google sample <a href=""https://github.com/googlesamples/android-ndk/tree/master/hello-thirdparty"" rel=""nofollow"">https://github.com/googlesamples/android-ndk/tree/master/hello-thirdparty</a> which is basically for <strong>static lib(.a)</strong> and this is how I resolved my problem with gradle experimental plugin: </p>

<p>My build.gradle file:</p>

<pre><code>apply plugin: 'com.android.model.application'

model {
    android {
        compileSdkVersion = 23
        buildToolsVersion = ""23.0.2""

        defaultConfig.with {
            applicationId = ""com.example.spartan.hello""
            minSdkVersion.apiLevel = 18
            targetSdkVersion.apiLevel = 23
            versionCode = 1
            versionName = ""1.0""
        }
    }
    android.buildTypes {
        release {
            minifyEnabled = false
            proguardFiles.add(file('proguard-android.txt'))
        }
    }

    repositories {
        libs(PrebuiltLibraries) {
            libavcodec {
                headers.srcDir ""/home/spartan/AndroidStudioProjects/Hello/app/src/main/jni/include""
                binaries.withType(SharedLibraryBinary) {
                    sharedLibraryFile = file(""/home/spartan/AndroidStudioProjects/Hello/app/src/main/jniLibs/${targetPlatform.getName()}/libavcodec-57.so"")
                }
            }                

        }
    }

    android.ndk {
        moduleName = ""tutorial01""

        def jniPath = ""/home/spartan/AndroidStudioProjects/Hello/app/src/main/jniLibs""
        cppFlags.add(""-I${file(jniPath)}"".toString())
        file(jniPath).eachDirRecurse { dir -&gt;
            cppFlags.add(""-I${file(dir)}"".toString())
        }
        ldLibs.addAll([""log"", ""android"",""jnigraphics""])
        stl = ""gnustl_shared""
    }


    android.sources {
        main {
            jni {
                dependencies {
                    library ""libavcodec"" linkage ""shared""
                }
            }
        }
    }

    android.productFlavors {
        create (""armv7"") {
            ndk.abiFilters.add(""armeabi-v7a"")
        }
    }

    android.sources {
        main {
            jni {
                source {
                    srcDirs = ['src/main/none']
                }

            }

        }
    }

}

dependencies {
    compile fileTree(include: ['*.jar'], dir: 'libs')
    testCompile 'junit:junit:4.12'
    compile 'com.android.support:appcompat-v7:23.2.1'
}
</code></pre>

<p>In my case I copied <strong>.so</strong> in <strong>jniLibs</strong> and include folder of <strong>.h</strong> files in <strong>jni</strong> folder and there is no need to add -l in android.ndk because I already added in <strong>headers.srcDir</strong>(I just added here to mention).</p>

<p>So here I competently replaced my <strong>Android.mk</strong> with  <strong>repositories</strong> and its really simple.</p>
",3863689,,,,,2016-04-15 16:26:58,,,,0,,,
Android,54261334,2,,52590101,2019,,1,,"<p>Even though <a href=""https://developer.android.com/training/testing/unit-testing/local-unit-tests"" rel=""nofollow noreferrer"">the documentation</a> says </p>

<blockquote>
  <p>In your app's top-level build.gradle file, specify the following libraries as dependencies:</p>
</blockquote>

<p>... I haven't found an example that works that way. </p>

<p>In fact, <a href=""https://github.com/googlesamples/android-testing/blob/master/unit/BasicUnitAndroidTest/build.gradle"" rel=""nofollow noreferrer"">this GoogleSamples Android Unit Test example</a> specifies: </p>

<blockquote>
  <p>// NOTE: Do not place your application dependencies here; they belong in the individual module build.gradle files</p>
</blockquote>

<p>So, move that line to the <strong>module</strong> build.gradle, <strong>not the top-level</strong> build.gradle</p>
",1703677,,,,,2019-01-18 20:56:51,,,,0,,,
Android,53969863,2,,53968778,2018,,1,,"<p>There is quite some code going into using those Android tutorials that is not mentioned there. I suggest using the import sample from menu from Android Studio. This one is possibly what you need to play with:</p>

<p><a href=""https://github.com/googlesamples/android-BasicGestureDetect/"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-BasicGestureDetect/</a></p>

<p>I have embedded that Android Tutorial code below in BasicGestureDetectFragment.java if you use the guthyb code above. In ""moveLog"" method you can do whathever you like with the dx values. I have also put a code under this that shows you how to creat an app dragging a picture. Just add ""ic_launcher.png"" to image folder under res folder so that you can have an image and move it. I suggest coding with Corona SDK that is a lot simpler than Android.</p>

<pre><code>/*
* Copyright (C) 2013 The Android Open Source Project
*
* Licensed under the Apache License, Version 2.0 (the ""License"");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an ""AS IS"" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/

package com.example.android.basicgesturedetect;

import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.view.MotionEventCompat;
import android.view.GestureDetector;
import android.view.MenuItem;
import android.view.MotionEvent;
import android.view.View;

import com.example.android.common.logger.Log;
import com.example.android.common.logger.LogFragment;

import static android.view.MotionEvent.INVALID_POINTER_ID;

public class BasicGestureDetectFragment extends Fragment{
    private int mActivePointerId = INVALID_POINTER_ID;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setHasOptionsMenu(true);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        View gestureView = getActivity().findViewById(R.id.sample_output);

        gestureView.setFocusable(true);

        // BEGIN_INCLUDE(init_detector)

        // First create the GestureListener that will include all our callbacks.
        // Then create the GestureDetector, which takes that listener as an argument.
        GestureDetector.SimpleOnGestureListener gestureListener = new GestureListener();
        final GestureDetector gd = new GestureDetector(getActivity(), gestureListener);

        /* For the view where gestures will occur, create an onTouchListener that sends
         * all motion events to the gesture detector.  When the gesture detector
         * actually detects an event, it will use the callbacks you created in the
         * SimpleOnGestureListener to alert your application.
        */


        gestureView.setOnTouchListener(new View.OnTouchListener() {
            float mLastTouchX;
            float mLastTouchY;
            float mPosX;
            float mPosY;
            @Override
            public boolean onTouch(View view, MotionEvent motionEvent) {
                gd.onTouchEvent(motionEvent);

                //**********
                final int action = MotionEventCompat.getActionMasked(motionEvent);
                switch (action) {
                    case MotionEvent.ACTION_DOWN: {
                        final int pointerIndex = MotionEventCompat.getActionIndex(motionEvent);
                        final float x = MotionEventCompat.getX(motionEvent, pointerIndex);
                        final float y = MotionEventCompat.getY(motionEvent, pointerIndex);

                        // Remember where we started (for dragging)
                        mLastTouchX = x;
                        mLastTouchY = y;
                        // Save the ID of this pointer (for dragging)
                        mActivePointerId = MotionEventCompat.getPointerId(motionEvent, 0);
                        break;
                    }
                    case MotionEvent.ACTION_MOVE: {
                        // Find the index of the active pointer and fetch its position
                        final int pointerIndex =
                                MotionEventCompat.findPointerIndex(motionEvent, mActivePointerId);

                        final float x = MotionEventCompat.getX(motionEvent, pointerIndex);
                        final float y = MotionEventCompat.getY(motionEvent, pointerIndex);

                        // Calculate the distance moved
                        final float dx = x - mLastTouchX;
                        final float dy = y - mLastTouchY;

                        mPosX += dx;
                        mPosY += dy;
                        moveLog(dx);

                        //invalidate();

                        // Remember this touch position for the next move event
                        mLastTouchX = x;
                        mLastTouchY = y;

                        break;
                    }

                    case MotionEvent.ACTION_UP: {
                        mActivePointerId = INVALID_POINTER_ID;
                        break;
                    }

                    case MotionEvent.ACTION_CANCEL: {
                        mActivePointerId = INVALID_POINTER_ID;
                        break;
                    }

                    case MotionEvent.ACTION_POINTER_UP: {

                        final int pointerIndex = MotionEventCompat.getActionIndex(motionEvent);
                        final int pointerId = MotionEventCompat.getPointerId(motionEvent, pointerIndex);

                        if (pointerId == mActivePointerId) {
                            // This was our active pointer going up. Choose a new
                            // active pointer and adjust accordingly.
                            final int newPointerIndex = pointerIndex == 0 ? 1 : 0;
                            mLastTouchX = MotionEventCompat.getX(motionEvent, newPointerIndex);
                            mLastTouchY = MotionEventCompat.getY(motionEvent, newPointerIndex);
                            mActivePointerId = MotionEventCompat.getPointerId(motionEvent, newPointerIndex);
                        }
                        break;
                    }
                }

                //**********
                return false;
            }
        });
        // END_INCLUDE(init_detector)
    }


    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        if (item.getItemId() == R.id.sample_action) {
            clearLog();
        }
        return true;
    }

    public void clearLog() {
        LogFragment logFragment =  ((LogFragment) getActivity().getSupportFragmentManager()
                .findFragmentById(R.id.log_fragment));
        logFragment.getLogView().setText("""");
    }
    public void moveLog(float x) {
        //do whatever you like
    }
}
</code></pre>

<ul>
<li>Image Drag App</li>
</ul>

<p>Just start a blank app under Android Studio:
1 - Change activity_main.xml to this:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;RelativeLayout xmlns:android=""http://schemas.android.com/apk/res/android""
    xmlns:tools=""http://schemas.android.com/tools""
    android:id=""@+id/main""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent"" &gt;

    &lt;ImageView
        android:id=""@+id/image""
        android:layout_width=""150dp""
        android:layout_height=""150dp""
        android:layout_alignParentLeft=""true""
        android:layout_alignParentTop=""true""
        android:contentDescription=""@string/app_name""
        android:src=""@drawable/ic_launcher"" /&gt;

&lt;/RelativeLayout&gt;
</code></pre>

<p>and MainActivity.java to this. 
(Leave the package name as your own: package com.jorc.move.myapplication;)</p>

<pre><code>package com.jorc.move.myapplication;

import android.annotation.SuppressLint;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ImageView;
import android.widget.RelativeLayout;
import android.widget.Toast;

public class MainActivity extends AppCompatActivity {
    private ViewGroup mainLayout;
    private ImageView image;

    private int xDelta;
    private int yDelta;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mainLayout = (RelativeLayout) findViewById(R.id.main);
        image = (ImageView) findViewById(R.id.image);

        image.setOnTouchListener(onTouchListener());
    }

    private View.OnTouchListener onTouchListener() {
        return new View.OnTouchListener() {

            @SuppressLint(""ClickableViewAccessibility"")
            @Override
            public boolean onTouch(View view, MotionEvent event) {

                final int x = (int) event.getRawX();
                final int y = (int) event.getRawY();

                switch (event.getAction() &amp; MotionEvent.ACTION_MASK) {

                    case MotionEvent.ACTION_DOWN:
                        RelativeLayout.LayoutParams lParams = (RelativeLayout.LayoutParams)
                                view.getLayoutParams();

                        xDelta = x - lParams.leftMargin;
                        yDelta = y - lParams.topMargin;
                        break;

                    case MotionEvent.ACTION_UP:
                        Toast.makeText(MainActivity.this,
                                ""thanks for new location!"", Toast.LENGTH_SHORT)
                                .show();
                        break;

                    case MotionEvent.ACTION_MOVE:
                        RelativeLayout.LayoutParams layoutParams = (RelativeLayout.LayoutParams) view
                                .getLayoutParams();
                        layoutParams.leftMargin = x - xDelta;
                        layoutParams.topMargin = y - yDelta;
                        layoutParams.rightMargin = 0;
                        layoutParams.bottomMargin = 0;
                        view.setLayoutParams(layoutParams);
                        break;
                }
                mainLayout.invalidate();
                return true;
            }
        };
    }
}
</code></pre>
",3041972,,3041972,,2018-12-30 9:32:17,2018-12-30 9:32:17,,,,6,,,
Android,46143363,2,,40740239,2017,,1,,"<p>You can see implementation of <a href=""https://github.com/googlesamples/android-ActivitySceneTransitionBasic/blob/master/Application/src/main/java/com/example/android/activityscenetransitionbasic/SquareFrameLayout.java#L26"" rel=""nofollow noreferrer""><code>SquareFrameLayout</code></a> from android developers website:</p>

<pre>    
<code>
    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        final int widthSize = MeasureSpec.getSize(widthMeasureSpec);
        final int heightSize = MeasureSpec.getSize(heightMeasureSpec);

        if (widthSize == 0 && heightSize == 0) {
            // If there are no constraints on size, let FrameLayout measure
            super.onMeasure(widthMeasureSpec, heightMeasureSpec);

            // Now use the smallest of the measured dimensions for both dimensions
            final int minSize = Math.min(getMeasuredWidth(), getMeasuredHeight());
            setMeasuredDimension(minSize, minSize);
            return;
        }

        final int size;
        if (widthSize == 0 || heightSize == 0) {
            // If one of the dimensions has no restriction on size, set both dimensions to be the
            // on that does
            size = Math.max(widthSize, heightSize);
        } else {
            // Both dimensions have restrictions on size, set both dimensions to be the
            // smallest of the two
            size = Math.min(widthSize, heightSize);
        }

        final int newMeasureSpec = MeasureSpec.makeMeasureSpec(size, MeasureSpec.EXACTLY);
        super.onMeasure(newMeasureSpec, newMeasureSpec);
    }
</code>
</pre>
",1083957,,1083957,,2018-05-08 14:56:48,2018-05-08 14:56:48,,,,2,,,
Android,32329783,2,,32324926,2015,,1,,"<p><a href=""https://github.com/googlesamples/android-HorizontalPaging/"" rel=""nofollow"">https://github.com/googlesamples/android-HorizontalPaging/</a></p>

<p>This has the link to something similar to what you have shown in the images. Let me know if there is something additional you are looking for, and I will link the relevant libraries.</p>

<p>Basically the difference between ViewPager and recyclerView is that, in recyclerView you are switching between many item, while in ViewPager you are switching between many fragments or independent pages itself.</p>

<p>I see you are using this <a href=""https://github.com/lsjwzh/RecyclerViewPager"" rel=""nofollow"">https://github.com/lsjwzh/RecyclerViewPager</a>, is there any particular use case you have in mind?</p>
",4989390,,,,,2015-09-01 10:53:24,,,,0,,,
Android,41813453,2,,41813004,2017,,1,,"<p>You are looking for a 'CircularReveal' animation.  You can use built-in one such as <a href=""https://github.com/googlesamples/android-RevealEffectBasic"" rel=""nofollow noreferrer"">ViewAnimationUtils.createCircularReveal()</a> but this will require a min-SDK of 21.  If you need the animation on older versions of Android, <a href=""https://github.com/ozodrukh/CircularReveal"" rel=""nofollow noreferrer"">there are several libraries</a> that are easy to use that achieve this.</p>

<p>As far as using the CircularReveal, just follow the documentation or find a tutorial online.  Typically, you will set an initial circle (size and coordinates) and an end circle (size and coordinates) and when the animation is triggered it will animate the little circle into the big circle.</p>
",6754511,,,,,2017-01-23 18:46:04,,,,1,,,
Android,50629533,2,,50618369,2018,,1,,"<p>Let's go by parts:</p>

<blockquote>
  <p>Now how do I notify from Repository.kt to MainViewModel that I have
  latest data to update ?</p>
</blockquote>

<p>You can use an observer pattern, just like the one you're using from the MainViewModel to the UI. If your using retrofit you can use a call adapter to return RxJava's Observables (or Singles, Flowables and so on) from your Retrofit calls, so for example you could have something like this:</p>

<pre><code>  @Headers({""Content-Type: application/json"", ""Accept: application/json""})
  @POST(""/sign_in"")
  Single&lt;Response&lt;LoginResponse&gt;&gt; traditionalLoginUser(
            @Body LoginRequest request,
            @Header(""Authorization"") String authToken);
</code></pre>

<p>This is a typical Retrofit interface that returns a Single, you can then observe this single in your repository or simply pass it along to the ViewModel to be observed there.</p>

<p>You can also add a call adapter for LiveData (there's one implemented by google <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/util/LiveDataCallAdapterFactory.kt"" rel=""nofollow noreferrer"">here</a>) and use LiveData instead of RxJava. I personally don't like to use LiveData for the Network Layer, though.</p>

<blockquote>
  <p>do I need to use RXJava to pass the data from Repository.KT to
  MainViewModel.KT, in that case how do I use it to pass user data?</p>
</blockquote>

<p>You can use RxJava, yes. I've actually been working in a sample app that does exactly that. The basic idea is that you use the repository to get the data from your API and pass the Observable along to the ViewModel. What I like to do in the ViewModel is to treat any possible erros by subscribing to the observable (or other rx entity) in there and receiving the data. As we can't necessarily treat erros on LiveData as we do with RxJava we can wrap the LiveData to propagate the error to the view as a state of our wrapper(this is actually found in this google <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/vo/Resource.kt"" rel=""nofollow noreferrer"">sample</a>).</p>

<p>So for example, in my repository I have this:</p>

<pre><code>fun getUsersNotPaged(page: Int, pageSize: Int): Single&lt;SOResponse&lt;User&gt;&gt; {
        return remoteDataSource.apiService.getTopUsers(page, pageSize)

    }
</code></pre>

<p>Then in my View model I do like this:</p>

<pre><code>var userList: MutableLiveData&lt;LiveResource&lt;SOResponse&lt;User&gt;&gt;&gt; = MutableLiveData()

 fun getUserListNotPaged(page: Int, pageSize: Int): MutableLiveData&lt;LiveResource&lt;SOResponse&lt;User&gt;&gt;&gt; {
        val result = usersRepository
                .getUsersNotPaged(page, pageSize)
                .subscribeOn(Schedulers.io())
                .observeOn(AndroidSchedulers.mainThread())
                .subscribe({ result -&gt;
                    userList.postValue(LiveResource(LiveResourceStatus.SUCCESS, result, null))
                }, { error -&gt;
                    userList.postValue(LiveResource(LiveResourceStatus.ERROR, null, error.localizedMessage))
                })


        return userList
    }
</code></pre>

<p>And in my view:</p>

<pre><code> viewModel.getUserListNotPaged(1, 20).observe(this, Observer {
            it?.data?.let {
                Toast.makeText(this.context, ""Here"", Toast.LENGTH_SHORT).show()

            }
        })
</code></pre>

<p>I've used LiveResource to wrap my RxJava response and errors. </p>

<p>You can also use the <code>ReactiveStrems</code> extension to convert an Rx <code>Publisher</code> into a <code>LiveData</code>, but you need to handle the cases when an error happens in the <code>ViewModel</code> and guarantee there's no error to the resulting <code>LiveData</code>. Something like this:</p>

<pre><code>fun getUserListNotPaged(page: Int, pageSize: Int): LiveData&lt;SOResponse&lt;User&gt;&gt; {
        val result = usersRepository
                .getUsersNotPaged(page, pageSize)
                .subscribeOn(Schedulers.io())
                .observeOn(AndroidSchedulers.mainThread())
                .onErrorReturn {
                   SOResponse&lt;User&gt;()
                }
                .toFlowable()

        return LiveDataReactiveStreams.fromPublisher(result)
    }
</code></pre>

<p>In this case, whenever there is an error I simply return an empty response.</p>

<blockquote>
  <p>Does Android Latest Architecture do support any observer to accomplish
  this?</p>
</blockquote>

<p>Yeah, as you could see you can use <code>LiveData</code> all over the place or only half way through the process (from the VM to the UI only). Some people don't agree on using <code>LiveData</code> with HTTP calls <a href=""https://github.com/square/retrofit/issues/2354"" rel=""nofollow noreferrer"">though</a> (I'm one of them lol).</p>
",7765139,,7765139,,2018-05-31 17:18:36,2018-05-31 17:18:36,,,,7,,,
Android,45628082,2,,45628008,2017,,1,,"<p>You can check this FragmentedPodcast Episode talking about Instant Apps <a href=""http://fragmentedpodcast.com/episodes/90/"" rel=""nofollow noreferrer"">Fragmented Podcast Episode 90</a> also find more about it in the show notes.</p>

<p>Here are the <a href=""https://github.com/googlesamples/android-instant-apps"" rel=""nofollow noreferrer"">Google Samples Repository</a> for Instant Apps.</p>
",1992823,,,,,2017-08-11 6:09:09,,,,0,,,
Android,45605696,2,,45605433,2017,,1,,"<p>You can use Google's MOBILE VISION API for face detection .</p>

<p>check <a href=""https://developers.google.com/vision/android/face-tracker-tutorial"" rel=""nofollow noreferrer"">here</a> for documentation and check <a href=""https://github.com/googlesamples/android-vision"" rel=""nofollow noreferrer"">here</a>  for sample source code , application using this api .</p>

<p>some basics creating detector</p>

<pre><code>FaceDetector detector = new FaceDetector.Builder()
        .build(getApplicationContext());

detector.setProcessor(
    new MultiProcessor.Builder&lt;Face&gt;()
        .build(new GraphicFaceTrackerFactory()));

//Create a camera source to capture video images from the camera, 
    mCameraSource = new CameraSource.Builder()
            .setRequestedPreviewSize(640, 480)
            .setFacing(CameraSource.CAMERA_FACING_BACK)
            .setRequestedFps(30.0f)
            .build(getApplicationContext(), detector);
</code></pre>
",3872374,,,,,2017-08-10 6:09:21,,,,3,,,
Android,35748076,2,,33671697,2016,,1,,"<p><em>I also searching for not C++ but javascript in Android Studio. 
I found this sample.</em></p>

<p>Teapot
Teapot is an Android C++ sample that draws a Teapot mesh using GLES 2.0 API and NativeActivity.</p>

<p>This sample uses the new Gradle Experimental Android plugin with C++ support.</p>

<p>Pre-requisites</p>

<p>Android Studio 1.3+ with NDK bundle.
<a href=""https://github.com/googlesamples/android-ndk/tree/master/Teapot"" rel=""nofollow"">https://github.com/googlesamples/android-ndk/tree/master/Teapot</a></p>
",6007907,,,,,2016-03-02 13:05:44,,,,1,,,
Android,45620594,2,,45599717,2017,,1,,"<p>If you already have CMakeList.txt for your project at correct level then you can just add .cpp filenames to your target.</p>

<pre><code>add_library(libraryName SHADERD myClass.cpp
</code></pre>

<p>You can see <a href=""https://github.com/googlesamples/android-ndk/blob/master/hello-libs/app/src/main/cpp/CMakeLists.txt"" rel=""nofollow noreferrer"">NDK samples</a> for more details (adding android libraries etc.)</p>

<p>If you have never written CMake file then lookup appropriate documentation for it.</p>
",62056,,,,,2017-08-10 18:00:44,,,,1,,,
Android,45766541,2,,45723230,2017,,1,,"<p>I would separate the concepts in your mind and work on them individually. Once you become fluent/masterful in both concepts, you can try combining them. </p>

<p>For example, try building a simple multiple activity/fragment application the MVP design pattern. With MVP, you'll be writing two-way interface contracts between the Presenter (an object that contains view logic and controls the view, as well as handles behavior that the view collects and forwards through), and the View (a view object, typically a native component like Fragment or Activity that is responsible for displaying a view and handling user input like touch events). </p>

<p>With Dagger2, you'll be learning the dependency injection design pattern/architectural style. You will build modules that combine to form components and then use those components to inject objects. </p>

<p>Combining the two begins with understanding each concept on it's own. </p>

<p>Check out the Google Architectural Blueprint repository for examples of MVP and Dagger2. <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture</a> </p>
",2836797,,5241933,,2017-08-21 3:29:51,2017-08-21 3:29:51,,,,0,,,
Android,45801006,2,,45366037,2017,,1,,"<p>It seems there is no way to change placeholder text with either auto complete activity or even with PlaceAutocompleteFragment because it also use autocomplete activity inside. The only way is using AutoCompleteTextView that you have full control on it. Google provides full sample code that is also easy to integrate and provide good UX. </p>

<p><a href=""https://github.com/googlesamples/android-play-places/tree/master/PlaceCompleteAdapter"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-places/tree/master/PlaceCompleteAdapter</a></p>

<p>I create a feature request <a href=""https://issuetracker.google.com/issues/64892097"" rel=""nofollow noreferrer"">here</a>, hopefully it will be supported in the future. </p>
",578309,,,,,2017-08-21 15:38:34,,,,0,,,
Android,54080196,2,,54028535,2019,,1,,"<p>First of all, as you can see in <a href=""https://github.com/googlesamples/android-PictureInPicture"" rel=""nofollow noreferrer"">google sample codes</a>, it does not need to make the launch mode of PIP <code>Activity</code> singleTask. However, you need to move the launcher task to front which is not in PIP mode, in order to disabling PIP state.</p>

<p>By calling bellow snippet in the <code>onCreate()</code> method of the target <code>Activity</code> which is called from notifications, you can achieve this.</p>

<pre><code>public static void moveLauncherTaskToFront(Context context) {
    ActivityManager activityManager = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
    assert activityManager != null;
    final List&lt;ActivityManager.AppTask&gt; appTasks = activityManager.getAppTasks();
    for (ActivityManager.AppTask task : appTasks) {
        final Intent baseIntent = task.getTaskInfo().baseIntent;
        final Set&lt;String&gt; categories = baseIntent.getCategories();
        if (categories != null &amp;&amp; categories.contains(Intent.CATEGORY_LAUNCHER)) {
            task.moveToFront();
            return;
        }
    }
}
</code></pre>

<p>---------------------- <strong>Before</strong> ---------------------------------------------- <strong>After</strong> ------------------------</p>

<p><a href=""https://i.stack.imgur.com/xxgr7.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/xxgr7.gif"" alt=""enter image description here""></a>   <a href=""https://i.stack.imgur.com/chLyQ.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/chLyQ.gif"" alt=""enter image description here""></a></p>
",1631967,,,,,2019-01-07 18:56:58,,,,1,,,
Android,54060828,2,,34288925,2019,,1,,"<p>In <strong>androidx library</strong>, EditTextPreference has <strong>app:useSimpleSummaryProvider</strong> attribute. Using the attribute you won't need to extend any class or listen any changes on SharedPreferences. You can check the sample code at <a href=""https://github.com/googlesamples/android-preferences/blob/master/app/src/main/res/xml/dialogs.xml"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-preferences/blob/master/app/src/main/res/xml/dialogs.xml</a></p>
",10673554,,,,,2019-01-06 10:57:07,,,,1,,,
Android,36844647,2,,36841521,2016,,1,,"<p>Your build.gradle disables the built-in call to ndk-build here:</p>

<pre><code>jni.srcDirs = []
</code></pre>

<p>Are you sure the library is actually being built? If you do not see HelloJNI.so under the 'jniLibs' or 'libs' directory, you are not actually building any native code.</p>

<p>You don't really need the Android.mk file for a project this simple, but if you want to go this route ph0b has a <a href=""http://ph0b.com/android-studio-gradle-and-ndk-integration/"" rel=""nofollow"">great tutorial</a> on using Android.mk with gradle. You would need to add a call to ndk-build from your build.gradle with something like this snippet from ph0b's tutorial:</p>

<pre><code>// call regular ndk-build(.cmd) script from app directory
task ndkBuild(type: Exec) {
    if (Os.isFamily(Os.FAMILY_WINDOWS)) {
        commandLine 'ndk-build.cmd', '-C', file('src/main').absolutePath
    } else {
        commandLine 'ndk-build', '-C', file('src/main').absolutePath
    }
}
</code></pre>

<p>If you choose to go with the experimental gradle support, the <a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow"">NDK samples</a> document how to build and use native code with build.gradle. The <a href=""https://github.com/googlesamples/android-ndk/blob/master/hello-jni/app/build.gradle"" rel=""nofollow"">build.gradle file from hello-jni</a> is a good place to start.</p>
",2201317,,,,,2016-04-25 15:17:42,,,,1,,,
Android,54097352,2,,54080801,2019,,1,,"<blockquote>
  <p>In other words, can I declare the allowed permissions in the manifest
  file of the instant app module (instant/AndroidManifest.xml) even
  though the base app uses many more permissions?</p>
</blockquote>

<p>Yes, you can declare permissions that only exist in your com.android.feature modules. It is done no different than in your main manifest, see an example from <a href=""https://github.com/googlesamples/android-instant-apps/blob/e4d4087004ca63fe40dcfb9b6fcbb205fe690501/analytics/feature/src/main/AndroidManifest.xml"" rel=""nofollow noreferrer"">googlesamples/android-instant-apps/analytics/feature/AndroidManifest.xml</a></p>

<p><em>note: if this feature is also a part of the installed-app via <code>implementation project(':feature')</code> in the application module's gradle, then its manifest contents will be merged, permissions included, so you don't need to duplicate those permissions.</em></p>

<p>But as your permissions diversify between your instant and installed apps, you may run into <a href=""https://stackoverflow.com/questions/45975231/google-play-console-error-non-upgradable-to-installed-app"">Google Play Console error - Non-upgradable to installed app</a> errors that you'll have to watch out for. Just make sure that your permissions, uses-feature, and uses-implied-feature (ie <a href=""https://developer.android.com/google/play/filters#manifest-filters"" rel=""nofollow noreferrer"">Play filters</a>) are synced between them so that the targetable devices for your installed app is not narrower than your instant app.</p>
",6668797,,,,,2019-01-08 18:06:49,,,,0,,,
Android,35876587,2,,35875775,2016,,1,,"<p>You'll need to rebuild the library for Android. For that, you need the Android NDK. The <a href=""http://developer.android.com/ndk/guides/index.html"" rel=""nofollow"">Getting Started</a> page has links to much of the documentation you'll need to set this up. If you get stuck, try looking at the <a href=""https://github.com/googlesamples/android-ndk/tree/android-mk"" rel=""nofollow"">NDK samples</a>. The <a href=""https://github.com/googlesamples/android-ndk/tree/android-mk/hello-jni"" rel=""nofollow"">hello-jni</a> example is particularly useful when you're new to the NDK. </p>

<p>There is new support coming out for C++ development in Android Studio, but right now much of the build system is experimental. If you're interested in using the experimental support, you should refer to the <a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow"">NDK samples here</a> instead.</p>
",2201317,,,,,2016-03-08 19:41:47,,,,0,,,
Android,45890245,2,,45851214,2017,,1,,"<p>An Instant App is meant to be a feature or one of many features of your Main App (installed app). The experience between your instant app and your installed app is supposed to be the same <a href=""https://developer.android.com/topic/instant-apps/ux-best-practices.html"" rel=""nofollow noreferrer"">UX best practices for apps on Google Play Instant</a>. If you route your users from the instant app to an entirely different app that may or may not contain the same features (activities), then this is not recommended.</p>

<p>To apply your productivity app example, consisting of routine, diary, etc.; each feature of your Instant App would cater to each of those parts. For example:</p>

<ul>
<li><p><a href=""http://www.example.com/check-routine"" rel=""nofollow noreferrer"">http://www.example.com/check-routine</a> > launches the Instant App (feature) for your routine activity.</p></li>
<li><p><a href=""http://www.example.com/write-diary"" rel=""nofollow noreferrer"">http://www.example.com/write-diary</a> > launches the Instant App (feature) for your diary activity.</p></li>
</ul>

<p>Then once users have installed your main app, any of those links would now open the main app and bring them to the same respective activities.</p>

<p>For more information on multi-feature Instant Apps, see the doc and <em>hello-feature-module</em> sample: </p>

<ul>
<li><p><a href=""https://developer.android.com/topic/instant-apps/getting-started/structure.html#structure_of_an_instant_app_with_multiple_features"" rel=""nofollow noreferrer"">Create your first instant app</a></p></li>
<li><p><a href=""https://github.com/googlesamples/android-instant-apps/tree/master/hello-feature-module"" rel=""nofollow noreferrer"">Google samples/android-instant-apps</a> </p></li>
</ul>
",6668797,,2638235,,2018-12-06 10:58:48,2018-12-06 10:58:48,,,,0,,,
Android,51123695,2,,51122246,2018,,1,,"<p>You have this problem specifically <em>because</em> your Repository implementation is incorrect.</p>

<pre><code>public LiveData&lt;List&lt;Article&gt;&gt; getArticles(int page) {
    Log.d(TAG, ""getArticles"");
    if (NetworkUtils.isOnline(mContext)) {
        Log.d(TAG, ""isOnline"");
        mArticles = loadFromNetwork(page);
    } else {
        Log.d(TAG, ""is NOT Online"");
        mArticles = loadFromDB(page);
    }
}
</code></pre>

<p>If you check the code for <a href=""https://github.com/googlesamples/android-architecture-components/blob/d7cd7a9414ef1eeba52a79ec76f6d9827cd50a36/GithubBrowserSample/app/src/main/java/com/android/example/github/repository/NetworkBoundResource.kt"" rel=""nofollow noreferrer"">NetworkBoundResource</a>, the trick is that you have a single LiveData that binds together the ability to both load from network, and to load from database.</p>

<p>In your case, you are replacing the database's auto-updating query results whenever you have network access - which is why you can't update the MainActivity.</p>

<p>The easiest way (without using a MediatorLiveData) is to have two separate functions on Repository: one for <code>fetchFromNetwork</code>, and one for <code>fetchFromDatabase</code>. The MainActivity should always fetch from database, while the Service always triggers load from network (and inserts it directly into database via a Dao).</p>

<p>This way, the <code>observe</code> function in MainActivity will receive the latest data when Service inserts the data into DB on background thread.</p>
",2413303,,,,,2018-07-01 13:26:33,,,,6,,,
Android,32987291,2,,32818562,2015,,1,,"<p>Ideally, you should have had the <code>android:screenOrientation=""landscape""</code> included under the Activity, which tells me you have an outdated sample project in your hands.</p>

<p>Please make sure you are running the latest version of the Sample projects.</p>

<p>Either open the project via</p>

<blockquote>
  <p>File > New > Import Sample > type MediaRecorder</p>
</blockquote>

<p>or </p>

<p><code>git clone https://github.com/googlesamples/android-MediaRecorder.git</code></p>

<p>Just tested the sample code with Android 5.1 (API level 22) and it was working fine both on a tablet and a smartphone.</p>

<p>Please keep <code>android:theme=""@style/AppTheme""</code> under Application and don't change it, as that is not what the sample code provides. Template styles are defined under </p>

<blockquote>
  <p>res > values > template-styles.xml</p>
</blockquote>

<p>and it is defined for both tablet and smartphone.</p>
",2759296,,,,,2015-10-07 8:25:22,,,,1,,,
Android,33002408,2,,32999813,2015,,1,,"<p>You might take a look at this thread: <a href=""https://github.com/googlesamples/android-vision/issues/23"" rel=""nofollow"">https://github.com/googlesamples/android-vision/issues/23</a></p>
",5231007,,,,,2015-10-07 21:05:52,,,,2,,,
Android,54465349,2,,54465215,2019,,1,,"<p>You are missing the line</p>

<pre><code>apply plugin: 'com.android.application'
</code></pre>

<p>at the very beginning of your app-level <code>build.gradle</code> file.</p>

<p><a href=""https://developer.android.com/studio/build/#module-level"" rel=""nofollow noreferrer"">More info</a></p>

<p>An <a href=""https://github.com/googlesamples/android-AppShortcuts/blob/master/app/build.gradle"" rel=""nofollow noreferrer"">example on github</a></p>

<p>You should also have this dependency in the project-level <code>build.gradle</code>:</p>

<pre><code>dependencies {
    ...
    classpath 'com.android.tools.build:gradle:3.3.0'
    ...
}
</code></pre>

<p>UPDATE #1</p>

<p>You must add the google repository:</p>

<pre><code>allprojects {
    repositories {
        google()
        jcenter()
    }
}
</code></pre>
",6271180,,6271180,,2019-02-05 15:50:36,2019-02-05 15:50:36,,,,12,,,
Android,54409448,2,,54194629,2019,,1,,"<p>I have been working with GeoFence for such a long time, I had the same question and I got the answer by myself after trying different solutions, So basically, GeoFence only get triggers if any app in the phone is fetching the location for some x duration. If you test the GeoFence sample app provided by google then you can see that the app works only when you open the Google maps application, its because Google Maps is the only app in the device that requests locations passively.</p>

<p>For Prove you can clone GeoFence sample and the LocationUpdateForGroundService sample from this below link <a href=""https://github.com/googlesamples/android-play-location"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-location</a> Run both of them GeoFence and LocationUpdateForGroundService at the same time, You will notice by changing the lat and long from the emulator that now you dont need to open Google maps any more because now there is another app which is requesting location.</p>

<p>So do create a foreground service in the GeoFence application and use Fuse Location Client to request location updates for some x duration.</p>
",10980981,,,,,2019-01-28 20:03:37,,,,2,,,
Android,54508853,2,,54508117,2019,,1,,"<p>I think it depends on project size. Also in different companies team use different approaches. </p>

<blockquote>
  <p>I prefer to use in a small project <a href=""https://github.com/googlesamples/android-architecture-components"" rel=""nofollow noreferrer"">second type</a> of package managing.</p>
</blockquote>

<p>If you want to reuse ModelView component, just keep them in feature packages. And maybe with this type:</p>

<pre><code>/db
    feature1/
    feature2/
/model
    feature1/
    feature2/
/ui
/persistence
    feature1/
    feature2/
</code></pre>
",7750432,,7750432,,2019-02-05 20:14:00,2019-02-05 20:14:00,,,,0,,,
Android,51145843,2,,51134284,2018,,1,,"<p>I checked this repo <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/test/java/com/android/example/github/api/GithubServiceTest.kt"" rel=""nofollow noreferrer"">GithubBrowserSample</a> Google sample. Retrofit baseUrl needs to be set by <code>MockWebServer#url(String)</code></p>

<p>Like this, not my URL.</p>

<pre><code>val retrofit = Retrofit.Builder()
        .baseUrl(server.url(""/""))
        .client(okHttpClient)
        .addConverterFactory(GsonConverterFactory.create())
        .build()
</code></pre>
",2423899,,,,,2018-07-03 2:24:12,,,,0,,,
Android,54562915,2,,54562648,2019,,1,,"<p>You may check <a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationUpdates/app/src/main/java/com/google/android/gms/location/sample/locationupdates/MainActivity.java"" rel=""nofollow noreferrer"">here</a>. It is <strong><em>GitHub</em></strong> from <strong><em>Google Devs</em></strong> and they show how they handle location. Also, you can find other examples <a href=""https://github.com/googlesamples/android-play-location"" rel=""nofollow noreferrer"">there</a></p>
",7750432,,7750432,,2019-02-06 21:42:31,2019-02-06 21:42:31,,,,0,,,
Android,54779808,2,,54779594,2019,,1,,"<p>It would be easier to generate hash through this code.</p>

<p>Just call below line and print your signature.</p>

<p><code>ArrayList&lt;String&gt; sigList = (new AppSignatureHelper(this)).getAppSignatures()</code></p>

<p>Code Reference: <a href=""https://github.com/googlesamples/android-credentials/blob/master/sms-verification/android/app/src/main/java/com/google/samples/smartlock/sms_verify/AppSignatureHelper.java"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-credentials/blob/master/sms-verification/android/app/src/main/java/com/google/samples/smartlock/sms_verify/AppSignatureHelper.java</a></p>

<p><strong>Update:</strong></p>

<p>Hash code for debug and release version will be different.
Make sure you are using release specific app hash code for otp message with required format.</p>

<p>AppSignatureHelper will provide hash code using which apk is signed. Build release apk and print hash code in log to get release specific hash code.</p>

<p><strong>Update:</strong></p>

<p>Another approach of generating through command mentioned in : <a href=""https://developers.google.com/identity/sms-retriever/verify#computing_your_apps_hash_string"" rel=""nofollow noreferrer"">https://developers.google.com/identity/sms-retriever/verify#computing_your_apps_hash_string</a></p>

<p>However if you are using windows, it may not work as you it dont have binary (command) like xxd or tr.
in that case, you have to download those exe from somewhere else.</p>

<p>If you are using git then you can find them at ""C:\Program Files\Git\usr\bin\"", in that case follow this steps.</p>

<ol>
<li>Add path ""C:\Program Files\Git\usr\bin\"" in your environment variables.</li>
<li>Restart your command prompt. so xxd and tr starts working in prompt.</li>
<li>apply mentioned command in link. </li>
</ol>

<p><code>keytool -exportcert -alias MY_ANDROID_KEY -keystore MY_PRODUCTION_KEY | xxd -p | tr -d ""[:space:]"" | echo -n MY_PACKAGE_NAME</code>cat<code>| sha256sum | tr -d ""[:space:]-"" | xxd -r -p | base64 | cut -c1-11</code></p>

<p>Where in command</p>

<ul>
<li>replace MY_ANDROID_KEY with your key alias</li>
<li>replace MY_PRODUCTION_KEY with your keystore path (some xyz.jks) </li>
<li><p>replace MY_PACKAGE_NAME with your package name</p>

<ol start=""4"">
<li>you will get 11 character long hash key. Hurray.</li>
</ol></li>
</ul>

<p>Here, if you are facing error like <code>tr: write error: Illegal seek</code>,
you can call cammand up to tr like -></p>

<p><code>keytool -exportcert -alias MY_ANDROID_KEY -keystore MY_PRODUCTION_KEY | xxd -p | tr -d ""[:space:]""</code></p>

<p>in this case you will get around 1800+ character long signature string. 
pass package and signature string to hash method of AppSignatureHelper, it will return your key.</p>

<p>(Here, If at the end you are using <code>AppSignatureHelper</code>, i suggest to go for that first approach only)</p>
",4753486,,4753486,,2019-02-21 5:51:36,2019-02-21 5:51:36,,,,10,,,
Android,54541901,2,,54541118,2019,,1,,"<p>If you try the official video recording sample, <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow noreferrer"">Camera2Video</a>, does it also record poor video?  </p>

<p>If so, there's likely a device bug that causes it to ignore the configured video quality.  If Camera2Video works OK, then see what it does differently from your own app.</p>
",1344825,,,,,2019-02-05 19:42:47,,,,1,,,
Android,33114486,2,,33112538,2015,,1,,"<p>After checking Google's sample application, the icon for starring appears to be pure white: <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer/blob/master/mobile/src/main/res/drawable-hdpi/ic_star_off.png"" rel=""nofollow"">https://github.com/googlesamples/android-UniversalMusicPlayer/blob/master/mobile/src/main/res/drawable-hdpi/ic_star_off.png</a>.  I have verified that if you make your icon pure white it will automatically be changed to black for use in Auto.  My best guess is that because Google wrote the stuff for Wear first they assumed that everyone's icons would be white already.</p>
",992439,,,,,2015-10-13 23:54:38,,,,0,,,
Android,51235561,2,,51234910,2018,,1,,"<p>You can find tons of samples and examples on github. For an example checkout this fitness app.<br>
<a href=""https://github.com/googlesamples/android-fit"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-fit</a> </p>

<p>Please use those sample codes in compliance with the License.</p>
",7992142,,,,,2018-07-08 20:02:48,,,,0,,,
Android,33100153,2,,33099586,2015,,1,,"<p>Maybe you can take a look at the googlesamples repositories at GitHub.
There is one for android-nearby and iOS-nearby. </p>

<p><a href=""https://github.com/googlesamples?utf8="" rel=""nofollow"">https://github.com/googlesamples?utf8=</a>&amp;query=nearby
<a href=""https://github.com/googlesamples/android-nearby/issues"" rel=""nofollow"">https://github.com/googlesamples/android-nearby/issues</a></p>
",2249138,,,,,2015-10-13 10:20:52,,,,0,,,
Android,51268335,2,,51266360,2018,,1,,"<blockquote>
  <p>I have checked over and over and still cant find the error. What is wrong with the ""on""</p>
</blockquote>

<p>Nothing is wrong with ""on"", it's just SQLite standard (lib) doesn't have Conflict Clause.</p>

<p>You will have to run conflict clause queries via 'ContentValues' as below</p>

<pre><code>ContentValues args = new ContentValues();
args.put(""name"", name);
args.put(""token"", token);
database.insertWithOnConflict(""table_name"", ""name"", args, SQLiteDatabase.CONFLICT_REPLACE)
</code></pre>

<p>Have a look at the following links, it will help you out.</p>

<p><a href=""https://developer.android.com/reference/android/database/sqlite/SQLiteDatabase#CONFLICT_REPLACE"" rel=""nofollow noreferrer"">SQLite Android Official</a></p>

<p><a href=""https://stackoverflow.com/questions/22644531/using-insertwithonconflict-for-update-or-insert"">Link 2</a></p>

<p><a href=""https://github.com/googlesamples/android-architecture-components/blob/master/PersistenceMigrationsSample/app/src/androidTestRoom2/java/com/example/android/persistence/migrations/MigrationTest.java"" rel=""nofollow noreferrer"">Android Sample App</a></p>
",4825703,,,,,2018-07-10 14:52:15,,,,0,,,
Android,43190609,2,,43155911,2017,,1,,"<p>Having tried before to maintain the structure of an iOS app in Android, with a far simpler domain that Camera2, I would suggest it is probably more trouble than it is worth.</p>

<p>Android and iOS have some quite particular architectural patterns and you may find that you are really swimming against the tide in one if you try to match the structure of the other.</p>

<p>Camers2 in particular is really quite involved - I would take a look at the example on GitHub (like below) and use this as a starting point. However, take a good look at the issues list and questions tagged with Camera2 on Stack overflow as there are definitely still issues with it that you really don't want to rediscover yourself if you can avoid it:</p>

<ul>
<li><a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a></li>
</ul>
",334402,,,,,2017-04-03 17:16:43,,,,0,,,
Android,43259296,2,,38359040,2017,,1,,"<p>With stock Android, currently all Fingerprints are considered equal.
<a href=""https://github.com/googlesamples/android-FingerprintDialog/issues/20"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-FingerprintDialog/issues/20</a></p>

<p>As <strong>mariotaku</strong> says at the bottom there is a way with the hidden API to tell Fingerprints apart. But this could likely break in future releases.</p>

<blockquote>
  <p><code>/**
   * Obtain the Fingerprint associated with this operation. Applications are strongly
   * discouraged from associating specific fingers with specific applications or operations.
   *
   * @hide
   */
  public Fingerprint getFingerprint() { return mFingerprint; }</code></p>
</blockquote>

<p>Not the <code>@hide</code> in the code block. Meaning this function is not available <em>publicly</em> so you would have to use reflection to access it.</p>

<h2>Side note:</h2>

<p>According to this link, there is the ability to use different fingerprint gestures to launch different apps on newer Huawei phones.
<a href=""https://www.reddit.com/r/Nexus6P/comments/42p8ba/different_fingerprint_launches_different_app/"" rel=""nofollow noreferrer"">https://www.reddit.com/r/Nexus6P/comments/42p8ba/different_fingerprint_launches_different_app/</a></p>

<p>Upon further inspection, this is actually nothing to do with reading different fingerprints but rather using gestures on the fingerprint sensor to perform different actions. These gestures can be performed with any finger, not only the ones registered as authentication fingerprints.
<a href=""http://www.androidcentral.com/how-enable-fingerprint-gestures-honor-6x"" rel=""nofollow noreferrer"">http://www.androidcentral.com/how-enable-fingerprint-gestures-honor-6x</a></p>
",2734961,,,,,2017-04-06 15:20:20,,,,0,,,
Android,51777939,2,,30155227,2018,,1,,"<pre><code>@Before
public void registerIdlingResource() {
    IdlingPolicies.setMasterPolicyTimeout(60 * 1000 * 3, TimeUnit.MILLISECONDS);
    IdlingPolicies.setIdlingResourceTimeout(60 * 1000 * 3, TimeUnit.MILLISECONDS);
    mIdlingResource = BooleanIdlingResource.getIdlingResource();
    // To prove that the test fails, omit this call:
    IdlingRegistry.getInstance().register(mIdlingResource);
}
</code></pre>

<p>I test on my project, It works.
Just setup before register idling resources.
please check:</p>

<p><a href=""https://github.com/googlesamples/android-testing/tree/master/ui/espresso/IdlingResourceSample"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-testing/tree/master/ui/espresso/IdlingResourceSample</a>
and</p>

<p><a href=""https://developer.android.com/reference/android/support/test/espresso/IdlingPolicies"" rel=""nofollow noreferrer"">https://developer.android.com/reference/android/support/test/espresso/IdlingPolicies</a></p>
",6323891,,6323891,,2018-08-13 3:51:16,2018-08-13 3:51:16,,,,3,,,
Android,47826780,2,,46231746,2017,,2,,"<p><strong>Good news! ProGuard is now supported in multi-feature instant app. The fix has been added to the Android Studio 3.2 Canary 14 and newer builds.</strong></p>

<p>To enable code shrinking for the entire app project, you must do so from the base modules <code>build.gradle</code> file. That is, you can include custom <strong>ProGuard</strong> rules in a dynamic feature module, but the minifyEnabled property in dynamic feature module build configurations is ignored.</p>

<p><a href=""https://developer.android.com/guide/app-bundle/configure"" rel=""nofollow noreferrer"">https://developer.android.com/guide/app-bundle/configure</a></p>

<p>Sample project can be seen at <a href=""https://github.com/googlesamples/android-instant-apps/tree/master/multi-feature-module"" rel=""nofollow noreferrer"">multi-feature-module project</a>. </p>

<p>Please report <a href=""https://issuetracker.google.com/issues/65710224"" rel=""nofollow noreferrer"">AIA Team</a> if you encounter any issues.</p>
",2638235,,2638235,,2018-05-29 5:12:08,2018-05-29 5:12:08,,,,0,,,
Android,46637319,2,,46636607,2017,,2,,"<p>In android we call it as App Shortcuts it will be supported from Android N and above. You can refer to <a href=""https://github.com/googlesamples/android-AppShortcuts"" rel=""nofollow noreferrer"">github link</a> by Google for sample </p>
",5539802,,,,,2017-10-09 0:18:49,,,,0,,,
Android,47861216,2,,47839512,2017,,2,,"<p>OK, so I found the answer and it wasn't anywhere near what I thought. My translation of the <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/viewmodel/GithubViewModelFactory.java"" rel=""nofollow noreferrer"">GithubViewModelFactory</a> into Kotlin included the following constructor:</p>

<pre><code>@Singleton
class MetaverseViewModelFactory @Inject constructor(
        creators: Map&lt;KClass&lt;out ViewModel&gt;, Provider&lt;ViewModel&gt;&gt;
): ViewModelProvider.Factory {
    private val creators: Map&lt;Class&lt;out ViewModel&gt;, Provider&lt;ViewModel&gt;&gt; =
            creators.mapKeys { it.key.java }
    //...
}
</code></pre>

<p>This was due to the <code>ViewModelKey</code> in Kotlin being able to use <code>KClass</code> only instead of <code>Class</code>. It turns out that kapt takes care of this and the correct factory should look like:</p>

<pre><code>@Singleton
class MetaverseViewModelFactory @Inject constructor(
        private val creators: Map&lt;Class&lt;out ViewModel&gt;, @JvmSuppressWildcards Provider&lt;ViewModel&gt;&gt;
): ViewModelProvider.Factory {
    //...
}
</code></pre>

<p>Note the additional <code>@JvmSupressWildcards</code> to also avoid turning <code>Provider&lt;ViewModel&gt;</code> into <code>Provider&lt;? extends ViewModel&gt;</code></p>
",3456952,,,,,2017-12-18 1:59:36,,,,0,,,
Android,30252848,2,,30164176,2015,,2,,"<p>More specific, relevant code is below</p>

<pre><code>class MainActivity extends Activity implements ResultCallback&lt;LocationSettingsResult&gt; {
    protected void checkLocationSettings() {
        PendingResult&lt;LocationSettingsResult&gt; result =
                LocationServices.SettingsApi.checkLocationSettings(
                        mGoogleApiClient,
                        mLocationSettingsRequest
                );
        result.setResultCallback(this);
    }

    @Override
    public void onResult(LocationSettingsResult locationSettingsResult) {
        final Status status = locationSettingsResult.getStatus();
        switch (status.getStatusCode()) {
            case LocationSettingsStatusCodes.SUCCESS:
                Log.i(TAG, ""All location settings are satisfied."");
                startLocationUpdates();
                break;
            case LocationSettingsStatusCodes.RESOLUTION_REQUIRED:
                Log.i(TAG, ""Location settings are not satisfied. Show the user a dialog to"" +
                        ""upgrade location settings "");
                try {
                    // Show the dialog by calling startResolutionForResult(), and check the result
                    // in onActivityResult().
                    status.startResolutionForResult(MainActivity.this, REQUEST_CHECK_SETTINGS);
                } catch (IntentSender.SendIntentException e) {
                    Log.i(TAG, ""PendingIntent unable to execute request."");
                }
                break;
            case LocationSettingsStatusCodes.SETTINGS_CHANGE_UNAVAILABLE:
                Log.i(TAG, ""Location settings are inadequate, and cannot be fixed here. Dialog "" +
                        ""not created."");
                break;
        }
    }
}
// This code is from https://github.com/googlesamples/android-play-location/blob/master/LocationSettings/app/src/main/java/com/google/android/gms/location/sample/locationsettings/MainActivity.java
</code></pre>

<p>In the result callback of LocationSettingsStatusCodes#RESOLUTION_REQUIRED, Status.startResolutionForResult will do the trick.</p>
",1019366,,1019366,,2015-09-24 19:54:46,2015-09-24 19:54:46,,,,0,,,
Android,48913928,2,,48892551,2018,,2,,"<p>If you have a <code>BaseFragment</code> defined like this:</p>

<pre><code>public class BaseFragment&lt;T extends ViewModel&gt; extends Fragment {

    @Inject
    protected T viewModel;

}
</code></pre>

<p>You can use the <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/androidTest/java/com/android/example/github/util/ViewModelUtil.java"" rel=""nofollow noreferrer"">ViewModelUtils</a> class from the Architecture Components's Github browser sample to create <code>ViewModel</code> factories.</p>

<pre><code>/**
 * Creates a one off view model factory for the given view model instance.
 */
public class ViewModelUtil {
    private ViewModelUtil() {}
    public static &lt;T extends ViewModel&gt; ViewModelProvider.Factory createFor(T model) {
        return new ViewModelProvider.Factory() {
            @Override
            public &lt;T extends ViewModel&gt; T create(Class&lt;T&gt; modelClass) {
                if (modelClass.isAssignableFrom(model.getClass())) {
                    return (T) model;
                }
                throw new IllegalArgumentException(""unexpected model class "" + modelClass);
            }
        };
    }
}
</code></pre>

<p>In the <code>onActivityCreated</code> method of the <code>BaseFragment</code> you can add</p>

<pre><code>    @Override
    public void onActivityCreated(@Nullable final Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        ViewModelProvider.Factory viewModelFactory = ViewModelUtil.createFor(viewModel);
        ViewModelProviders.of(this, viewModelFactory).get(viewModel.getClass());
    }
</code></pre>

<p>The code for this technique is from <a href=""https://mag.n26.com/reducing-viewmodel-provision-boilerplate-in-googles-githubbrowsersample-549818ee72f0"" rel=""nofollow noreferrer"">this blog post</a>.</p>
",1011435,,,,,2018-02-21 19:26:04,,,,1,,,
Android,46909007,2,,46908920,2017,,2,,"<p>I haven't encountered any issues in regards to Kotlin and Android Instant Apps.</p>

<p>Several of the publicly available Android Instant Apps sample apps are written in Kotlin.</p>

<p>See <a href=""https://github.com/googlesamples/android-instant-apps/tree/master/hello-kotlin"" rel=""nofollow noreferrer"">hello-kotlin</a> and <a href=""https://github.com/googlesamples/android-instant-apps"" rel=""nofollow noreferrer"">browse through the samples</a> for implementation details.</p>
",422060,,,,,2017-10-24 11:10:40,,,,2,,,
Android,47544058,2,,47540528,2017,,2,,"<p>That zip file is the instant app. It can contain multiple APKs, one for each feature module, one for the base, and potentially some configuration APKs. It's ok if it only contains one APK. That will be the base.</p>

<p>Each of the APKs in the zip will have an AndroidManifest.xml, which you can view easily using APK Analyzer. They should each have a packageName, and they should all match, and that value is the package name of the instant app.</p>

<p>The installed app's package name is in the usual place, in that APK's AndroidManifest.xml.</p>

<p>The <a href=""https://github.com/googlesamples/android-instant-apps"" rel=""nofollow noreferrer"">samples</a> demonstrate the recommended way to structure your project, and that will produce and instant and an installed app with the same package name.</p>
",407058,,,,,2017-11-29 2:25:20,,,,1,,,
Android,38482606,2,,38482427,2016,,2,,"<p>You can use this library</p>

<ol>
<li><a href=""http://openframeworks.cc/"" rel=""nofollow"">OpenFrameworks for Android</a></li>
<li><a href=""http://openimaj.org/"" rel=""nofollow"">OpenIMAJ</a></li>
<li><a href=""https://developers.google.com/vision/"" rel=""nofollow"">Google Android Vision API</a></li>
</ol>

<p>I would recommend OpenFrameworks, install open frameworks for android studio <a href=""http://openframeworks.cc/setup/android-studio/"" rel=""nofollow"">http://openframeworks.cc/setup/android-studio/</a>  and openframeworks android examples <a href=""https://github.com/openframeworks/openFrameworks/tree/master/examples/android"" rel=""nofollow"">https://github.com/openframeworks/openFrameworks/tree/master/examples/android</a> </p>

<p>or you can use Microsoft Cognitive services, new alternative for computer vision, ocr, ai etc.</p>

<p><a href=""https://www.microsoft.com/cognitive-services/en-us/computer-vision-api"" rel=""nofollow"">https://www.microsoft.com/cognitive-services/en-us/computer-vision-api</a> , android examples <a href=""https://github.com/Microsoft/ProjectOxford-ClientSDK/tree/master/Vision/Android"" rel=""nofollow"">https://github.com/Microsoft/ProjectOxford-ClientSDK/tree/master/Vision/Android</a></p>

<p>Android vision api examples <a href=""https://github.com/googlesamples/android-vision"" rel=""nofollow"">https://github.com/googlesamples/android-vision</a></p>
",2647294,,2647294,,2016-07-21 5:53:19,2016-07-21 5:53:19,,,,0,,,
Android,47170397,2,,47160241,2017,,2,,"<p>Let say a simple scenario using your login idea, user login fail and the app need to make a simple Toast or SnackBar to show the related information such as ""Your username and password is incorrect"". The code you need is </p>

<p>Toast (Required <code>Context</code>)</p>

<pre><code>Toast.makeText(context, text, duration).show();
</code></pre>

<p>Snackbar (Required <code>View</code>)</p>

<pre><code>Snackbar.make(findViewById(R.id.myCoordinatorLayout),
                                R.string.email_archived, Snackbar.LENGTH_SHORT);
</code></pre>

<p>If you want to use it inside your ViewModel (I am not familiar with Kotlin)</p>

<pre><code>  @Suppress(""PARAMETER_NAME_CHANGED_ON_OVERRIDE"")
    void function login(final View view) {
      // here I am calling API and on success
      repo.login(result -&gt; {
           if(result.statusCode == 401)
           Toast.makeText(view.getContext(), ""Login failed..."", duration).show();
      });
    }
</code></pre>

<p>You are going to find the reference of the activity in the reverse way, which make more complex code and hard to maintain since every time you need to get the reference of <strong>the activity or context to do something related to the view or activity in the view model instead of the Activity</strong></p>

<p>From the <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/ui/search/SearchFragment.java"" rel=""nofollow noreferrer"">google sample</a>, you can see <code>doSearch()</code> function is called when the input is done. And after the search result fetched , the binding will put the latest result back to this observer , and now it is the activity job to update the result in the adapter. </p>

<pre><code>private void initSearchInputListener() {
        binding.get().input.setOnEditorActionListener((v, actionId, event) -&gt; {
            if (actionId == EditorInfo.IME_ACTION_SEARCH) {
                doSearch(v);
                return true;
            }
            return false;
        });
        binding.get().input.setOnKeyListener((v, keyCode, event) -&gt; {
            if ((event.getAction() == KeyEvent.ACTION_DOWN)
                    &amp;&amp; (keyCode == KeyEvent.KEYCODE_ENTER)) {
                doSearch(v);
                return true;
            }
            return false;
        });
    }

    private void doSearch(View v) {
        String query = binding.get().input.getText().toString();
        // Dismiss keyboard
        dismissKeyboard(v.getWindowToken());
        binding.get().setQuery(query);
        searchViewModel.setQuery(query);
    }

private void initRecyclerView() {

        binding.get().repoList.addOnScrollListener(new RecyclerView.OnScrollListener() {
            @Override
            public void onScrolled(RecyclerView recyclerView, int dx, int dy) {
                LinearLayoutManager layoutManager = (LinearLayoutManager)
                        recyclerView.getLayoutManager();
                int lastPosition = layoutManager
                        .findLastVisibleItemPosition();
                if (lastPosition == adapter.get().getItemCount() - 1) {
                    searchViewModel.loadNextPage();
                }
            }
        });
        searchViewModel.getResults().observe(this, result -&gt; {
            binding.get().setSearchResource(result);
            binding.get().setResultCount((result == null || result.data == null)
                    ? 0 : result.data.size());
            adapter.get().replace(result == null ? null : result.data);
            binding.get().executePendingBindings();
        });

        searchViewModel.getLoadMoreStatus().observe(this, loadingMore -&gt; {
            if (loadingMore == null) {
                binding.get().setLoadingMore(false);
            } else {
                binding.get().setLoadingMore(loadingMore.isRunning());
                String error = loadingMore.getErrorMessageIfNotHandled();
                if (error != null) {
                    Snackbar.make(binding.get().loadMoreBar, error, Snackbar.LENGTH_LONG).show();
                }
            }
            binding.get().executePendingBindings();
        });
    }
</code></pre>

<p>Also, according to the answer from @Emanuel S, you will see his argument </p>

<blockquote>
  <p>WeakReference to a NavigationController which holds the Context of the
  Activity. This is a common used pattern for handling context-bound
  stuff inside a ViewModel.</p>
  
  <p>I highly decline this for several reasons. First: that usually means
  that you have to keep a reference to your NavigationController which
  fixes the context leak, but doesnt solve the architecture at all.</p>
  
  <p>The best way (in my oppinion) is using LiveData which is lifecycle
  aware and can do all the wanted stuff.</p>
</blockquote>

<p>Another question you may think about it if you implement ui action inside the viewmodel  , if you get a NullPointerException in your view or context or do some enhancement about it, which class you will find first ? ViewModel or Activity ? Since the first one you hold the UI action , the second one you hold the data binding. Both may be possible in the troubleshoot. </p>
",2877822,,,,,2017-11-08 2:04:50,,,,0,,,
Android,47558694,2,,9870435,2017,,2,,"<p><strong>Android NDK official <code>hello-libs</code> CMake example</strong></p>

<p><a href=""https://github.com/googlesamples/android-ndk/tree/840858984e1bb8a7fab37c1b7c571efbe7d6eb75/hello-libs"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk/tree/840858984e1bb8a7fab37c1b7c571efbe7d6eb75/hello-libs</a></p>

<p>Just worked for me on Ubuntu 17.10 host, Android Studio 3, Android SDK 26, NDK 15.2. so I strongly recommend that you base your project on it.</p>

<p>The shared library is called <code>libgperf</code>, the key code parts are:</p>

<ul>
<li><p><a href=""https://github.com/googlesamples/android-ndk/blob/840858984e1bb8a7fab37c1b7c571efbe7d6eb75/hello-libs/app/src/main/cpp/CMakeLists.txt"" rel=""nofollow noreferrer"">hello-libs/app/src/main/cpp/CMakeLists.txt</a>: </p>

<pre><code>// -L
add_library(lib_gperf SHARED IMPORTED)
set_target_properties(lib_gperf PROPERTIES IMPORTED_LOCATION
          ${distribution_DIR}/gperf/lib/${ANDROID_ABI}/libgperf.so)

// -I
target_include_directories(hello-libs PRIVATE
                           ${distribution_DIR}/gperf/include)
// -lgperf
target_link_libraries(hello-libs
                      lib_gperf)
</code></pre></li>
<li><p>on C++ code, use: <code>#include &lt;gperf.h&gt;</code></p></li>
<li><p>header location: <code>hello-libs/distribution/gperf/include/gperf.h</code></p></li>
<li><p>lib location: <code>distribution/gperf/lib/arm64-v8a/libgperf.so</code></p></li>
<li><p><a href=""https://github.com/googlesamples/android-ndk/blob/840858984e1bb8a7fab37c1b7c571efbe7d6eb75/hello-libs/app/build.gradle"" rel=""nofollow noreferrer"">app/build.gradle</a>:</p>

<pre><code>android {
    sourceSets {
        main {
            // let gradle pack the shared library into apk
            jniLibs.srcDirs = ['../distribution/gperf/lib']
</code></pre>

<p>Then, if you look under <code>/data/app</code> on the device, <code>libgperf.so</code> will be there as well.</p></li>
<li><p>If you only support some architectures, see: <a href=""https://stackoverflow.com/questions/33278152/gradle-build-ndk-target-only-arm/47558314#47558314"">Gradle Build NDK target only ARM</a></p></li>
</ul>

<p>The example git tracks the prebuilt shared libraries, but it also contains the build system to actually build them as well: <a href=""https://github.com/googlesamples/android-ndk/tree/840858984e1bb8a7fab37c1b7c571efbe7d6eb75/hello-libs/gen-libs"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk/tree/840858984e1bb8a7fab37c1b7c571efbe7d6eb75/hello-libs/gen-libs</a></p>
",895245,,895245,,2017-11-30 10:50:41,2017-11-30 10:50:41,,,,0,,,
Android,37435200,2,,37434494,2016,,2,,"<p>There might be edge cases where that approach would fail, but I don't have a perfect answer to your question why.</p>

<p>In contrast, I have a proper approach on how to implement a version that will most certainly work:</p>

<p>Looking at the <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">Google API demos for the Camera 2</a>, I found some sample code that should be helpful to you to make sure it will fit all screen sized correctly:</p>

<pre><code>/**
 * Given {@code choices} of {@code Size}s supported by a camera, choose the smallest one that
 * is at least as large as the respective texture view size, and that is at most as large as the
 * respective max size, and whose aspect ratio matches with the specified value. If such size
 * doesn't exist, choose the largest one that is at most as large as the respective max size,
 * and whose aspect ratio matches with the specified value.
 *
 * @param choices           The list of sizes that the camera supports for the intended output
 *                          class
 * @param textureViewWidth  The width of the texture view relative to sensor coordinate
 * @param textureViewHeight The height of the texture view relative to sensor coordinate
 * @param maxWidth          The maximum width that can be chosen
 * @param maxHeight         The maximum height that can be chosen
 * @param aspectRatio       The aspect ratio
 * @return The optimal {@code Size}, or an arbitrary one if none were big enough
 */
private static Size chooseOptimalSize(Size[] choices, int textureViewWidth,
        int textureViewHeight, int maxWidth, int maxHeight, Size aspectRatio) {

    // Collect the supported resolutions that are at least as big as the preview Surface
    List&lt;Size&gt; bigEnough = new ArrayList&lt;&gt;();
    // Collect the supported resolutions that are smaller than the preview Surface
    List&lt;Size&gt; notBigEnough = new ArrayList&lt;&gt;();
    int w = aspectRatio.getWidth();
    int h = aspectRatio.getHeight();
    for (Size option : choices) {
        if (option.getWidth() &lt;= maxWidth &amp;&amp; option.getHeight() &lt;= maxHeight &amp;&amp;
                option.getHeight() == option.getWidth() * h / w) {
            if (option.getWidth() &gt;= textureViewWidth &amp;&amp;
                option.getHeight() &gt;= textureViewHeight) {
                bigEnough.add(option);
            } else {
                notBigEnough.add(option);
            }
        }
    }

    // Pick the smallest of those big enough. If there is no one big enough, pick the
    // largest of those not big enough.
    if (bigEnough.size() &gt; 0) {
        return Collections.min(bigEnough, new CompareSizesByArea());
    } else if (notBigEnough.size() &gt; 0) {
        return Collections.max(notBigEnough, new CompareSizesByArea());
    } else {
        Log.e(TAG, ""Couldn't find any suitable preview size"");
        return choices[0];
    }
}
</code></pre>

<p><a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java#L384"" rel=""nofollow"">Source</a></p>

<p>Also you should take a look at the whole <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"" rel=""nofollow"">Camera2BasicFragment.java</a> and <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/AutoFitTextureView.java"" rel=""nofollow"">AutoFitTextureView.java</a> classes for proper implementation.</p>
",2759296,,,,,2016-05-25 11:03:55,,,,2,,,
Android,38363398,2,,38325383,2016,,2,,"<p>Are you sure your GPS is turned on? You can try going through this sample project by Google <a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationUpdates/app/src/main/java/com/google/android/gms/location/sample/locationupdates/MainActivity.java"" rel=""nofollow"">Google</a> on GitHub. In this project they have also provided code for checking if Location services are enabled. If they are not, user will be given a message so they can activate their location services.</p>

<pre><code>/*
 * Copyright (C) 2012 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the ""License"");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.example.mapdemo;

import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.GoogleMap.OnMyLocationButtonClickListener;
import com.google.android.gms.maps.OnMapReadyCallback;
import com.google.android.gms.maps.SupportMapFragment;

import android.Manifest;
import android.content.pm.PackageManager;
import android.os.Bundle;
import android.support.annotation.NonNull;
import android.support.v4.app.ActivityCompat;
import android.support.v4.content.ContextCompat;
import android.support.v7.app.AppCompatActivity;
import android.widget.Toast;

/**
 * This demo shows how GMS Location can be used to check for changes to the users location.  The
 * ""My Location"" button uses GMS Location to set the blue dot representing the users location.
 * Permission for {@link android.Manifest.permission#ACCESS_FINE_LOCATION} is requested at run
 * time. If the permission has not been granted, the Activity is finished with an error message.
 */
public class MyLocationDemoActivity extends AppCompatActivity
        implements
        OnMyLocationButtonClickListener,
        OnMapReadyCallback,
        ActivityCompat.OnRequestPermissionsResultCallback {

    /**
     * Request code for location permission request.
     *
     * @see #onRequestPermissionsResult(int, String[], int[])
     */
    private static final int LOCATION_PERMISSION_REQUEST_CODE = 1;

    /**
     * Flag indicating whether a requested permission has been denied after returning in
     * {@link #onRequestPermissionsResult(int, String[], int[])}.
     */
    private boolean mPermissionDenied = false;

    private GoogleMap mMap;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.my_location_demo);

        SupportMapFragment mapFragment =
                (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map);
        mapFragment.getMapAsync(this);
    }

    @Override
    public void onMapReady(GoogleMap map) {
        mMap = map;

        mMap.setOnMyLocationButtonClickListener(this);
        enableMyLocation();
    }

    /**
     * Enables the My Location layer if the fine location permission has been granted.
     */
    private void enableMyLocation() {
        if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION)
                != PackageManager.PERMISSION_GRANTED) {
            // Permission to access the location is missing.
            PermissionUtils.requestPermission(this, LOCATION_PERMISSION_REQUEST_CODE,
                    Manifest.permission.ACCESS_FINE_LOCATION, true);
        } else if (mMap != null) {
            // Access to the location has been granted to the app.
            mMap.setMyLocationEnabled(true);
        }
    }

    @Override
    public boolean onMyLocationButtonClick() {
        Toast.makeText(this, ""MyLocation button clicked"", Toast.LENGTH_SHORT).show();
        // Return false so that we don't consume the event and the default behavior still occurs
        // (the camera animates to the user's current position).
        return false;
    }


    @Override
    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions,
            @NonNull int[] grantResults) {
        if (requestCode != LOCATION_PERMISSION_REQUEST_CODE) {
            return;
        }

        if (PermissionUtils.isPermissionGranted(permissions, grantResults,
                Manifest.permission.ACCESS_FINE_LOCATION)) {
            // Enable the my location layer if the permission has been granted.
            enableMyLocation();
        } else {
            // Display the missing permission error dialog when the fragments resume.
            mPermissionDenied = true;
        }
    }

    @Override
    protected void onResumeFragments() {
        super.onResumeFragments();
        if (mPermissionDenied) {
            // Permission was not granted, display error dialog.
            showMissingPermissionError();
            mPermissionDenied = false;
        }
    }

    /**
     * Displays a dialog with error message explaining that the location permission is missing.
     */
    private void showMissingPermissionError() {
        PermissionUtils.PermissionDeniedDialog
                .newInstance(true).show(getSupportFragmentManager(), ""dialog"");
    }

}
</code></pre>
",985213,,,,,2016-07-13 23:39:21,,,,0,,,
Android,28479262,2,,28321007,2015,,2,,"<p>You have <a href=""https://github.com/googlesamples/android-play-publisher-api/blob/master/v2/java/src/com/google/play/developerapi/samples/BasicUploadApk.java"" rel=""nofollow"">here</a> an example of how they're sending an apk, following the <a href=""https://developers.google.com/resources/api-libraries/documentation/androidpublisher/v2/java/latest/com/google/api/services/androidpublisher/AndroidPublisher.html"" rel=""nofollow"">API doc</a>, 
you should arrive to something like that </p>

<pre><code>Edits edits = service.edits();
Insert editRequest = edits
.insert(ApplicationConfig.PACKAGE_NAME,
   null /** no content */);
AppEdit edit = editRequest.execute();

Upload uploadRequest = edits
.images()
.upload(ApplicationConfig.PACKAGE_NAME,
   editId,
   ""fr-FR"",
   ""Your image type"",
   mediaContent); // Your image as an AbstractInputStreamContent
Image image = uploadRequest.execute();
</code></pre>

<p>For the mediaContent var, <a href=""http://javadoc.google-api-java-client.googlecode.com/hg/1.4.1-beta/com/google/api/client/http/AbstractInputStreamContent.html"" rel=""nofollow"">here's</a> the link to the API </p>

<p>Hope that'll help you :)</p>
",3008340,,,,,2015-02-12 13:55:25,,,,0,,,
Android,37504598,2,,37461396,2016,,2,,"<p>If you already have a service that extends <a href=""https://developer.android.com/reference/android/service/media/MediaBrowserService.html"" rel=""nofollow""><code>MediaBrowserService</code></a>, you can retrieve any metadata in <a href=""https://developer.android.com/reference/android/service/media/MediaBrowserService.html#onLoadChildren(java.lang.String,%20android.service.media.MediaBrowserService.Result%3Cjava.util.List%3Candroid.media.browse.MediaBrowser.MediaItem%3E%3E)"" rel=""nofollow""><code>onLoadChildren</code></a>.</p>

<p>In your onLoadChildren you should use <a href=""https://developer.android.com/reference/android/media/MediaMetadata.html"" rel=""nofollow""><code>MediaMetadata</code></a>:</p>

<blockquote>
  <p>Contains metadata about an item, such as the title, artist, etc.</p>
</blockquote>

<p>From which you can retrieve things like artist, title, etc, using <a href=""https://developer.android.com/reference/android/media/MediaDescription.html"" rel=""nofollow""><code>MediaDescription</code></a>:</p>

<blockquote>
  <p>A simple set of metadata for a media item suitable for display.</p>
</blockquote>

<pre><code>@Override
public void onLoadChildren(final String parentMediaId, final Result&lt;List&lt;MediaItem&gt;&gt; result) {
  for (MediaMetadata track : mMusicProvider.getMusicsByGenre(genre)) {
      // once you have an instance of MediaMetadata, you can retrieve any data you want:
      MediaDescription simpleData = track.getDescription();
      // or retrieving with a key from its info Bundle:
      // android.media.metadata.MEDIA_ID
      // android.media.metadata.TRACK_NUMBER
      // android.media.metadata.ALBUM
      // android.media.metadata.GENRE
      // android.media.metadata.TITLE
      // android.media.metadata.ARTIST
      // android.media.metadata.NUM_TRACKS
      // android.media.metadata.DURATION
      // android.media.metadata.ALBUM_ART_URI
      track.getString( ... );
  }
}
</code></pre>

<h2>You can see a clearer implementation of this in <a href=""https://github.com/googlesamples/android-MediaBrowserService"" rel=""nofollow"">this sample</a>.</h2>
",2819864,,,,,2016-05-28 23:14:26,,,,1,,,
Android,38143046,2,,38142784,2016,,2,,"<p>First of all: Don't reinvent the wheel and use successful libraries for API / database handling. This will save you tons of (debugging) time. Have a look at the <a href=""http://android-arsenal.com/"" rel=""nofollow"">Android Arsenal</a> for the libraries fitting your needs. For a clean architecture have a look at <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow"">these samples</a>.</p>
",321106,,,,,2016-07-01 10:27:02,,,,0,,,
Android,38951166,2,,36341822,2016,,2,,"<p>Update Android Studio to 2.2 resolved the problem.</p>

<p>""There are other choices now like the the ndk with cmake which doesn't require the experimental plugin <a href=""https://github.com/googlesamples/android-ndk/tree/master-cmake/hello-jni"" rel=""nofollow"">https://github.com/googlesamples/android-ndk/tree/master-cmake/hello-jni</a> .""</p>

<p><a href=""https://github.com/realm/realm-java/issues/2539"" rel=""nofollow"">found here</a></p>
",1870830,,,,,2016-08-15 7:44:05,,,,0,,,
Android,29402007,2,,8264805,2015,,2,,"<p>If you are using Android 5.0 > it became a lot easier, functionallity changed, but you can use the same code. </p>

<pre><code>//Some Vars
public static final int NOTIFICATION_ID = 1; //this can be any int


//Building the Notification
NotificationCompat.Builder builder = new NotificationCompat.Builder(this);
builder.setSmallIcon(R.drawable.ic_stat_notification);
builder.setContentTitle(""BasicNotifications Sample"");
builder.setContentText(""Time to learn about notifications!"");

NotificationManager notificationManager = (NotificationManager) getSystemService(
            NOTIFICATION_SERVICE);
notificationManager.notify(NOTIFICATION_ID, builder.build());
</code></pre>

<p>Make sure you are in an application context, if not you may need to pass the context and change your sourcecode as follows</p>

<pre><code>NotificationCompat.Builder builder = new NotificationCompat.Builder(context);
...
..
.

NotificationManager notificationManager = (NotificationManager) context.getSystemService(
            context.NOTIFICATION_SERVICE);
</code></pre>

<p><strong>You can see the full-source-code at:</strong>
<a href=""https://github.com/googlesamples/android-BasicNotifications/blob/master/Application/src/main/java/com/example/android/basicnotifications/MainActivity.java#L73"" rel=""nofollow"">https://github.com/googlesamples/android-BasicNotifications/blob/master/Application/src/main/java/com/example/android/basicnotifications/MainActivity.java#L73</a></p>
",1767754,,,,,2015-04-01 22:31:53,,,,1,,,
Android,47990497,2,,47990462,2017,,2,,"<p>You could use a custom live event that is triggered only once. This discussion has already took place on <a href=""https://github.com/googlesamples/android-architecture-components/issues/63"" rel=""nofollow noreferrer"">Android's Architecture Google Samples Repository</a>. Here's a <a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java"" rel=""nofollow noreferrer"">proposed solution</a> I like. </p>

<p>In case you need it in kotlin, there it goes:</p>

<pre><code>class SingleLiveEvent&lt;T&gt;: MutableLiveData&lt;T&gt;() {

    private val pending = AtomicBoolean(false)

    @MainThread
    override fun observe(owner: LifecycleOwner, observer: Observer&lt;T&gt;) {
        if (hasActiveObservers()) {
            Log.w(TAG, ""Multiple observers registered but only one will be notified of changes."")
        }

        // Observe the internal MutableLiveData
        super.observe(owner, Observer&lt;T&gt; { t -&gt;
            if (pending.compareAndSet(true, false)) {
                observer.onChanged(t)
            }
        })
    }

    @MainThread
    override fun setValue(@Nullable t: T?) {
        pending.set(true)
        super.setValue(t)
    }

    /**
     * Used for cases where T is Void, to make calls cleaner.
     */
    @MainThread
    fun call() {
        value = null
    }

    companion object {

        private val TAG = ""SingleLiveEvent""
    }
}
</code></pre>

<p>Using this it won't trigger you dialogs twice unless you call <code>yourLiveData.value = newValue</code> again.</p>

<p>Hope it helps.</p>
",4244598,,4244598,,2017-12-27 10:37:03,2017-12-27 10:37:03,,,,3,,,
Android,38641032,2,,38556827,2016,,2,,"<p>I got this message when I tried to grok MVP + Dagger example from this <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-dagger/todoapp"" rel=""nofollow"">googlesample</a></p>

<p>After a while I renamed a file <a href=""https://github.com/googlesamples/android-architecture/blob/todo-mvp-dagger/todoapp/app/src/mock/java/com/example/android/architecture/blueprints/todoapp/data/FakeTasksRemoteDataSource.java"" rel=""nofollow"">FakeTasksRemoteDataSource.java</a> in my project and Verify Apps fell silent.</p>

<p>So, I think you need to check the file names (and variables) for ""stop words"", like ""fake"" etc.</p>
",3260226,,3260226,,2016-07-28 17:56:21,2016-07-28 17:56:21,,,,3,,,
Android,39635140,2,,39620739,2016,,2,,"<p>As Gerry pointed out, the latest changes to the audio-echo sample project (<a href=""https://github.com/googlesamples/android-ndk/pull/298"" rel=""nofollow"">https://github.com/googlesamples/android-ndk/pull/298</a>) include changes that worked for me. I added this to the bottom of my CMakeLists.txt file. </p>

<pre><code># Android Studio CMake does not pack stl shared libraries, so app needs to pack
# the right shared lib into APK. The following code find right stl type and copy
# the needed shared lib into app's app/src/main/jniLibs, android studio assembles
# it into the final APK
# Helper function to retrieve shared stl path and name in NDK
# stl_path: the path to the NDK's shared lib path; empty if not using shared stl
function(get_stl_info stl_path stl_name)
   # assume app not uses shared stl lib
   set(${stl_path} """" PARENT_SCOPE)
   if(NOT ${ANDROID_STL} MATCHES ""_shared"")
       return()
   endif()

   # using shared lib, config lib name and path
   if(""${ANDROID_STL}"" MATCHES ""c\\\+\\\+_"")
       # app uses c++_shared for stl type
       set(stlPath ""llvm-libc++/libs/${ANDROID_ABI}"")
       set(stlName ""libc++_shared.so"")
   elseif(${ANDROID_STL} MATCHES ""gnustl_"")
       set(stlPath ""gnu-libstdc++/4.9/libs/${ANDROID_ABI}"")
       set(stlName ""libgnustl_shared.so"")
   else()
       # this sample not supporting other stl types
       message(FATAL_ERROR ""Not Suppored STL type: ${ANDROID_STL}"")
       return()
   endif()

   set(${stl_path} ${ANDROID_NDK}/sources/cxx-stl/${stlPath} PARENT_SCOPE)
   set(${stl_name} ${stlName} PARENT_SCOPE)
endfunction()

# force copying needed shared stl lib into ${project}/app/src/main/jniLibs
# so it will be packed into APK
get_stl_info(ndk_stl_path  ndk_stl_name)
if(NOT ${ndk_stl_path} STREQUAL """")
    set(jniLibs_dir ""${CMAKE_CURRENT_SOURCE_DIR}/../jniLibs"")
    add_custom_command(TARGET mylibrary PRE_BUILD
                   COMMAND ""${CMAKE_COMMAND}"" -E
                   copy ${ndk_stl_path}/${ndk_stl_name}
                   ""${jniLibs_dir}/${ANDROID_ABI}/${ndk_stl_name}""
                   COMMENT ""Copying Shared library to the packing directory"")
endif()
</code></pre>

<p>I guess it's a workaround that we'll be able to do without some day... Note you have to change the line <code>add_custom_command(TARGET mylibrary PRE_BUILD</code> and replace <code>mylibrary</code> with your target name.</p>
",1602875,,,,,2016-09-22 9:24:58,,,,0,,,
Android,49134052,2,,49127661,2018,,2,,"<p>Dagger is a dependency injection framework. While being useful for implementing different architecture approaches it is rarely a required component. If you want to get familiar with Dagger 2 basics I'd recommend you this <a href=""https://android.jlelse.eu/dagger-2-part-i-basic-principles-graph-dependencies-scopes-3dfd032ccd82"" rel=""nofollow noreferrer"">article</a>.</p>

<p>A good example of MVVM on Android is <a href=""https://developer.android.com/topic/libraries/architecture/index.html"" rel=""nofollow noreferrer"">architecture components</a> library.</p>

<p>Here is a <a href=""https://github.com/googlesamples/android-architecture-components"" rel=""nofollow noreferrer"">repository</a> with a number of sample apps, going from <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/BasicSample"" rel=""nofollow noreferrer"">Basic Sample</a>, that is not using Dagger to more complex examples with Dagger and other useful technologies. </p>
",1735198,,,,,2018-03-06 15:10:19,,,,0,,,
Android,40067582,2,,39202936,2016,,2,,"<p>For now, you could also put your shared libs into directory, and configure jniLibs to point to that directory, that will pack it. One sample is here: <a href=""https://github.com/googlesamples/android-ndk/tree/master/hello-libs"" rel=""nofollow"">https://github.com/googlesamples/android-ndk/tree/master/hello-libs</a>, follow gperf see if that helps. This way app not depending on the generated build folders. When android studio added packing libs, the jniLibs workaround is not necessary anymore</p>
",4496512,,,,,2016-10-16 6:35:10,,,,0,,,
Android,37685381,2,,37371844,2016,,2,,"<p>As @Vietnt134 have already answered, Android Mobile Vision is temporarily disabled. </p>

<p>You can follow this topic to know if something knew came up:
<a href=""https://github.com/googlesamples/android-vision/issues/98"" rel=""nofollow"">https://github.com/googlesamples/android-vision/issues/98</a> </p>

<p>People are pretty mad with Google about this. I hope they solve this quickly.</p>
",2300034,,,,,2016-06-07 17:13:26,,,,0,,,
Android,40235769,2,,40235371,2016,,2,,"<p>Taken from <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer/blob/master/mobile/src/main/java/com/example/android/uamp/MusicService.java"" rel=""nofollow"">MusicPlayer.java</a>: </p>

<blockquote>
  <p>This class provides a MediaBrowser through a service. It exposes the
  media library to a browsing client, through the onGetRoot and
  onLoadChildren methods</p>
</blockquote>

<p><strong>onGetRoot(..)</strong>: Returns the root id if the client package has permission to access media information (Returns null if the client is not allowed). <a href=""https://developer.android.com/reference/android/service/media/MediaBrowserService.html#onGetRoot(java.lang.String,%20int,%20android.os.Bundle)"" rel=""nofollow"">Source</a></p>

<p><strong>onLoadChildren</strong>: Returns a list of children of a media item. <a href=""https://developer.android.com/reference/android/service/media/MediaBrowserService.html#onLoadChildren(java.lang.String,%20android.service.media.MediaBrowserService.Result%3Cjava.util.List%3Candroid.media.browse.MediaBrowser.MediaItem%3E%3E)"" rel=""nofollow"">Source</a></p>

<p>To get a idea of the implementation of both check the implementation in <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer/blob/master/mobile/src/main/java/com/example/android/uamp/MusicService.java"" rel=""nofollow"">MusicPlayer.java</a></p>
",5183341,,,,,2016-10-25 9:05:22,,,,0,,,
Android,49637333,2,,48170499,2018,,2,,"<p>Pushed up a kotlin fork of <a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationUpdatesPendingIntent"" rel=""nofollow noreferrer"">this</a> google android/java example project using Kotlin instead of java <a href=""https://github.com/googlesamples/android-play-location/pull/141"" rel=""nofollow noreferrer"">here</a> (Untested, could have bugs)</p>

<p>Strings and dimension value files are excluded below. Hardcode your own or look at <a href=""https://github.com/googlesamples/android-play-location/pull/141"" rel=""nofollow noreferrer"">fork</a></p>

<p>MainActivity.kt
    </p>

<pre><code>    /**
 * Copyright 2017 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the ""License"");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.google.android.gms.location.sample.locationupdatespendingintent

import android.Manifest
import android.app.PendingIntent
import android.content.Intent
import android.content.SharedPreferences
import android.content.pm.PackageManager
import android.net.Uri
import android.os.Bundle
import android.preference.PreferenceManager
import android.provider.Settings
import android.support.design.widget.Snackbar
import android.support.v4.app.ActivityCompat
import android.support.v4.app.FragmentActivity
import android.util.Log
import android.view.View
import android.widget.Button
import android.widget.TextView

import com.google.android.gms.location.FusedLocationProviderClient
import com.google.android.gms.location.LocationRequest
import com.google.android.gms.location.LocationServices


/**
 * The only activity in this sample. Displays UI widgets for requesting and removing location
 * updates, and for the batched location updates that are reported.
 *
 * Location updates requested through this activity continue even when the activity is not in the
 * foreground. Note: apps running on ""O"" devices (regardless of targetSdkVersion) may receive
 * updates less frequently than the interval specified in the [LocationRequest] when the app
 * is no longer in the foreground.
 */
class MainActivity : FragmentActivity(), SharedPreferences.OnSharedPreferenceChangeListener {

    /**
     * Stores parameters for requests to the FusedLocationProviderApi.
     */
    val mLocationRequest = LocationRequest()

    /**
     * Provides access to the Fused Location Provider API.
     */
    private var mFusedLocationClient: FusedLocationProviderClient? = null

    // UI Widgets.
    private var mRequestUpdatesButton: Button? = null
    private var mRemoveUpdatesButton: Button? = null
    private var mLocationUpdatesResultView: TextView? = null


    // Note: for apps targeting API level 25 (""Nougat"") or lower, either
    // PendingIntent.getService() or PendingIntent.getBroadcast() may be used when requesting
    // location updates. For apps targeting API level O, only
    // PendingIntent.getBroadcast() should be used. This is due to the limits placed on services
    // started in the background in ""O"".
    // TODO(developer): uncomment to use PendingIntent.getService().
    //        Intent intent = new Intent(this, LocationUpdatesIntentService.class);
    //        intent.setAction(LocationUpdatesIntentService.ACTION_PROCESS_UPDATES);
    //        return PendingIntent.getService(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
    private val pendingIntent: PendingIntent
        get() {
            val intent = Intent(this, LocationUpdatesBroadcastReceiver::class.java)
            intent.action = LocationUpdatesBroadcastReceiver.ACTION_PROCESS_UPDATES
            return PendingIntent.getBroadcast(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT)
        }

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        mFusedLocationClient = LocationServices.getFusedLocationProviderClient(this)

        mRequestUpdatesButton = findViewById(R.id.remove_updates_button)
        mRemoveUpdatesButton = findViewById(R.id.request_updates_button)
        mLocationUpdatesResultView = findViewById(R.id.location_updates_result)

        // Check if the user revoked runtime permissions.
        if (!checkPermissions()) {
            requestPermissions()
        }


        createLocationRequest()
    }

    override fun onStart() {
        super.onStart()
        PreferenceManager.getDefaultSharedPreferences(this)
                .registerOnSharedPreferenceChangeListener(this)
    }


    override fun onResume() {
        super.onResume()
        updateButtonsState(Utils.getRequestingLocationUpdates(this))
        mLocationUpdatesResultView?.text = Utils.getLocationUpdatesResult(this)
    }

    override fun onStop() {
        PreferenceManager.getDefaultSharedPreferences(this)
                .unregisterOnSharedPreferenceChangeListener(this)
        super.onStop()
    }

    /**
     * Sets up the location request. Android has two location request settings:
     * `ACCESS_COARSE_LOCATION` and `ACCESS_FINE_LOCATION`. These settings control
     * the accuracy of the current location. This sample uses ACCESS_FINE_LOCATION, as defined in
     * the AndroidManifest.xml.
     *
     *
     * When the ACCESS_FINE_LOCATION setting is specified, combined with a fast update
     * interval (5 seconds), the Fused Location Provider API returns location updates that are
     * accurate to within a few feet.
     *
     *
     * These settings are appropriate for mapping applications that show real-time location
     * updates.
     */
    private fun createLocationRequest() {

        // Sets the desired interval for active location updates. This interval is
        // inexact. You may not receive updates at all if no location sources are available, or
        // you may receive them slower than requested. You may also receive updates faster than
        // requested if other applications are requesting location at a faster interval.
        // Note: apps running on ""O"" devices (regardless of targetSdkVersion) may receive updates
        // less frequently than this interval when the app is no longer in the foreground.
        mLocationRequest.interval = UPDATE_INTERVAL

        // Sets the fastest rate for active location updates. This interval is exact, and your
        // application will never receive updates faster than this value.
        mLocationRequest.fastestInterval = FASTEST_UPDATE_INTERVAL

        mLocationRequest.priority = LocationRequest.PRIORITY_HIGH_ACCURACY

        // Sets the maximum time when batched location updates are delivered. Updates may be
        // delivered sooner than this interval.
        mLocationRequest.maxWaitTime = MAX_WAIT_TIME
    }

    /**
     * Return the current state of the permissions needed.
     */
    private fun checkPermissions(): Boolean {
        val permissionState = ActivityCompat.checkSelfPermission(this,
                Manifest.permission.ACCESS_FINE_LOCATION)
        return permissionState == PackageManager.PERMISSION_GRANTED
    }

    private fun requestPermissions() {
        val shouldProvideRationale = ActivityCompat.shouldShowRequestPermissionRationale(this,
                Manifest.permission.ACCESS_FINE_LOCATION)

        // Provide an additional rationale to the user. This would happen if the user denied the
        // request previously, but didn't check the ""Don't ask again"" checkbox.
        if (shouldProvideRationale) {
            Log.i(TAG, ""Displaying permission rationale to provide additional context."")
            Snackbar.make(
                    findViewById(R.id.activity_main),
                    R.string.permission_rationale,
                    Snackbar.LENGTH_INDEFINITE)
                    .setAction(R.string.ok) {
                        // Request permission
                        ActivityCompat.requestPermissions(this@MainActivity,
                                arrayOf(Manifest.permission.ACCESS_FINE_LOCATION),
                                REQUEST_PERMISSIONS_REQUEST_CODE)
                    }
                    .show()
        } else {
            Log.i(TAG, ""Requesting permission"")
            // Request permission. It's possible this can be auto answered if device policy
            // sets the permission in a given state or the user denied the permission
            // previously and checked ""Never ask again"".
            ActivityCompat.requestPermissions(this@MainActivity,
                    arrayOf(Manifest.permission.ACCESS_FINE_LOCATION),
                    REQUEST_PERMISSIONS_REQUEST_CODE)
        }
    }

    /**
     * Callback received when a permissions request has been completed.
     */
    override fun onRequestPermissionsResult(requestCode: Int, permissions: Array&lt;String&gt;,
                                            grantResults: IntArray) {
        Log.i(TAG, ""onRequestPermissionResult"")
        if (requestCode == REQUEST_PERMISSIONS_REQUEST_CODE) {
            if (grantResults.size &lt;= 0) {
                // If user interaction was interrupted, the permission request is cancelled and you
                // receive empty arrays.
                Log.i(TAG, ""User interaction was cancelled."")
            } else if (grantResults[0] == PackageManager.PERMISSION_GRANTED) {
                // Permission was granted.
                requestLocationUpdates(null)
            } else {
                // Permission denied.

                // Notify the user via a SnackBar that they have rejected a core permission for the
                // app, which makes the Activity useless. In a real app, core permissions would
                // typically be best requested during a welcome-screen flow.

                // Additionally, it is important to remember that a permission might have been
                // rejected without asking the user for permission (device policy or ""Never ask
                // again"" prompts). Therefore, a user interface affordance is typically implemented
                // when permissions are denied. Otherwise, your app could appear unresponsive to
                // touches or interactions which have required permissions.
                Snackbar.make(
                        findViewById(R.id.activity_main),
                        R.string.permission_denied_explanation,
                        Snackbar.LENGTH_INDEFINITE)
                        .setAction(R.string.settings) {
                            // Build intent that displays the App settings screen.
                            val intent = Intent()
                            intent.action = Settings.ACTION_APPLICATION_DETAILS_SETTINGS
                            val uri = Uri.fromParts(""package"",
                                    BuildConfig.APPLICATION_ID, null)
                            intent.data = uri
                            intent.flags = Intent.FLAG_ACTIVITY_NEW_TASK
                            startActivity(intent)
                        }
                        .show()
            }
        }
    }

    override fun onSharedPreferenceChanged(sharedPreferences: SharedPreferences, s: String) {
        if (s == Utils.KEY_LOCATION_UPDATES_RESULT) {
            mLocationUpdatesResultView?.text = Utils.getLocationUpdatesResult(this)
        } else if (s == Utils.KEY_LOCATION_UPDATES_REQUESTED) {
            updateButtonsState(Utils.getRequestingLocationUpdates(this))
        }
    }

    /**
     * Handles the Request Updates button and requests start of location updates.
     */
    fun requestLocationUpdates(view: View?) {
        try {
            Log.i(TAG, ""Starting location updates"")
            Utils.setRequestingLocationUpdates(this, true)
            mFusedLocationClient?.requestLocationUpdates(mLocationRequest, pendingIntent)
        } catch (e: SecurityException) {
            Utils.setRequestingLocationUpdates(this, false)
            e.printStackTrace()
        }

    }

    /**
     * Handles the Remove Updates button, and requests removal of location updates.
     */
    fun removeLocationUpdates(view: View) {
        Log.i(TAG, ""Removing location updates"")
        Utils.setRequestingLocationUpdates(this, false)
        mFusedLocationClient?.removeLocationUpdates(pendingIntent)
    }

    /**
     * Ensures that only one button is enabled at any time. The Start Updates button is enabled
     * if the user is not requesting location updates. The Stop Updates button is enabled if the
     * user is requesting location updates.
     */
    private fun updateButtonsState(requestingLocationUpdates: Boolean) {
        if (requestingLocationUpdates) {
            mRequestUpdatesButton?.isEnabled = false
            mRemoveUpdatesButton?.isEnabled = true
        } else {
            mRequestUpdatesButton?.isEnabled = true
            mRemoveUpdatesButton?.isEnabled = false
        }
    }

    companion object {

        private val TAG = MainActivity::class.java.getSimpleName()
        private val REQUEST_PERMISSIONS_REQUEST_CODE = 34
        /**
         * The desired interval for location updates. Inexact. Updates may be more or less frequent.
         */
        private val UPDATE_INTERVAL: Long = 60000 // Every 60 seconds.

        /**
         * The fastest rate for active location updates. Updates will never be more frequent
         * than this value, but they may be less frequent.
         */
        private val FASTEST_UPDATE_INTERVAL: Long = 30000 // Every 30 seconds

        /**
         * The max time before batched results are delivered by location services. Results may be
         * delivered sooner than this interval.
         */
        private val MAX_WAIT_TIME = UPDATE_INTERVAL * 5 // Every 5 minutes.
    }
}
</code></pre>

<p>activity_main.xml listeners here triggers methods in MainActivity.kt
    </p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;LinearLayout xmlns:android=""http://schemas.android.com/apk/res/android""
    xmlns:tools=""http://schemas.android.com/tools""
    android:id=""@+id/activity_main""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""
    android:orientation=""vertical""
    android:paddingBottom=""@dimen/activity_vertical_margin""
    android:paddingLeft=""@dimen/activity_horizontal_margin""
    android:paddingRight=""@dimen/activity_horizontal_margin""
    android:paddingTop=""@dimen/activity_vertical_margin""
    tools:context=""com.google.android.gms.location.sample.locationupdatespendingintent.MainActivity""&gt;

    &lt;TextView
        android:id=""@+id/using_batched_location_view""
        android:layout_width=""wrap_content""
        android:layout_height=""wrap_content""
        android:text=""@string/batched_location_updates""
        android:layout_marginBottom=""@dimen/default_margin""
        android:textSize=""@dimen/text_large"" /&gt;

    &lt;Button
        android:id=""@+id/request_updates_button""
        android:layout_width=""match_parent""
        android:layout_height=""wrap_content""
        android:onClick=""requestLocationUpdates""
        android:text=""@string/request_updates"" /&gt;

    &lt;Button
        android:id=""@+id/remove_updates_button""
        android:layout_width=""match_parent""
        android:layout_height=""wrap_content""
        android:onClick=""removeLocationUpdates""
        android:layout_marginBottom=""@dimen/default_margin""
        android:text=""@string/remove_updates"" /&gt;

    &lt;TextView
        android:id=""@+id/location_updates_result""
        android:layout_width=""wrap_content""
        android:layout_height=""wrap_content"" /&gt;
&lt;/LinearLayout&gt;
</code></pre>

<p>LocationUpdatesIntentService.kt
    </p>

<pre><code>   /**
 * Copyright 2017 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the ""License"");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.google.android.gms.location.sample.locationupdatespendingintent

import android.app.IntentService
import android.content.Context
import android.content.Intent
import android.location.Location
import android.util.Log

import com.google.android.gms.location.LocationResult


/**
 * Handles incoming location updates and displays a notification with the location data.
 *
 * For apps targeting API level 25 (""Nougat"") or lower, location updates may be requested
 * using [android.app.PendingIntent.getService] or
 * [android.app.PendingIntent.getBroadcast]. For apps targeting
 * API level O, only `getBroadcast` should be used.
 *
 * Note: Apps running on ""O"" devices (regardless of targetSdkVersion) may receive updates
 * less frequently than the interval specified in the
 * [com.google.android.gms.location.LocationRequest] when the app is no longer in the
 * foreground.
 */
class LocationUpdatesIntentService : IntentService(TAG) {

    override fun onHandleIntent(intent: Intent?) {
        if (intent != null) {
            val action = intent.action
            if (ACTION_PROCESS_UPDATES == action) {
                val result = LocationResult.extractResult(intent)
                if (result != null) {
                    val locations = result.locations
                    Utils.setLocationUpdatesResult(this, locations)
                    Utils.sendNotification(this, Utils.getLocationResultTitle(this, locations))
                    Log.i(TAG, Utils.getLocationUpdatesResult(this))
                }
            }
        }
    }

    companion object {

        private val ACTION_PROCESS_UPDATES = ""com.google.android.gms.location.sample.locationupdatespendingintent.action"" + "".PROCESS_UPDATES""
        private val TAG = LocationUpdatesIntentService::class.java.simpleName
    }
}
</code></pre>

<p>LocationUpdatesBroadcastReceiver.kt
    </p>

<pre><code>    /**
 * Copyright 2017 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the ""License"");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.google.android.gms.location.sample.locationupdatespendingintent

import android.content.BroadcastReceiver
import android.content.Context
import android.content.Intent
import android.location.Location
import android.util.Log

import com.google.android.gms.location.LocationResult

/**
 * Receiver for handling location updates.
 *
 * For apps targeting API level O
 * [android.app.PendingIntent.getBroadcast] should be used when
 * requesting location updates. Due to limits on background services,
 * [android.app.PendingIntent.getService] should not be used.
 *
 * Note: Apps running on ""O"" devices (regardless of targetSdkVersion) may receive updates
 * less frequently than the interval specified in the
 * [com.google.android.gms.location.LocationRequest] when the app is no longer in the
 * foreground.
 */
class LocationUpdatesBroadcastReceiver : BroadcastReceiver() {

    override fun onReceive(context: Context, intent: Intent?) {
        if (intent != null) {
            val action = intent.action
            if (ACTION_PROCESS_UPDATES == action) {
                val result = LocationResult.extractResult(intent)
                if (result != null) {
                    val locations = result.locations
                    Utils.setLocationUpdatesResult(context, locations)
                    Utils.sendNotification(context, Utils.getLocationResultTitle(context, locations))
                    Log.i(TAG, Utils.getLocationUpdatesResult(context))
                }
            }
        }
    }

    companion object {
        private val TAG = ""LUBroadcastReceiver""

        internal val ACTION_PROCESS_UPDATES = ""com.google.android.gms.location.sample.locationupdatespendingintent.action"" + "".PROCESS_UPDATES""
    }
}
</code></pre>

<p>AndroidManifest.xml define service and receiver here.</p>

<pre><code>   &lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;manifest xmlns:android=""http://schemas.android.com/apk/res/android""
    package=""com.google.android.gms.location.sample.locationupdatespendingintent""&gt;

    &lt;uses-permission android:name=""android.permission.ACCESS_FINE_LOCATION"" /&gt;

    &lt;application
        android:allowBackup=""true""
        android:icon=""@mipmap/ic_launcher""
        android:label=""@string/app_name""
        android:supportsRtl=""true""
        android:theme=""@style/AppTheme""&gt;
        &lt;activity android:name="".MainActivity""&gt;
            &lt;intent-filter&gt;
                &lt;action android:name=""android.intent.action.MAIN"" /&gt;

                &lt;category android:name=""android.intent.category.LAUNCHER"" /&gt;
            &lt;/intent-filter&gt;
        &lt;/activity&gt;

        &lt;service
            android:name="".LocationUpdatesIntentService""
            android:exported=""false"" /&gt;

        &lt;receiver android:name="".LocationUpdatesBroadcastReceiver""
            android:exported=""true""&gt;
            &lt;intent-filter&gt;
                &lt;action android:name=""com.google.android.gms.location.sample.locationupdatespendingintent.LocationUpdatesBroadcastReceiver.ACTION_PROCESS_UPDATES"" /&gt;
            &lt;/intent-filter&gt;
        &lt;/receiver&gt;
    &lt;/application&gt;

&lt;/manifest&gt;
</code></pre>
",2333802,,2333802,,2018-04-04 22:10:14,2018-04-04 22:10:14,,,,0,,,
Android,31225752,2,,31225443,2015,,2,,"<p>For organizing your source files take a look at some open source projects to get an idea about organizing your file structure. An example is the Google sample project <a href=""https://github.com/googlesamples/android-topeka/tree/master/app/src/main/java/com/google/samples/apps/topeka"" rel=""nofollow"">android-topeka</a>.</p>

<p>This project groups the source code into sub-folders in the following structure:</p>

<pre><code>/source
  /activity
  /adapter
  /fragment
  /helper
  /model
  /persistence
  /widget
</code></pre>
",4517878,,,,,2015-07-04 22:55:56,,,,0,,,
Android,49373871,2,,49353779,2018,,2,,"<p>I was not properly computing my App's Hash String:</p>

<p><a href=""https://developers.google.com/identity/sms-retriever/verify#computing_your_apps_hash_string"" rel=""nofollow noreferrer"">https://developers.google.com/identity/sms-retriever/verify#computing_your_apps_hash_string</a></p>

<p>This is a six-step process:</p>

<ol>
<li><p>Get your app's public key certificate as a lower-case hex string.
For example, to get the hex string from your keystore, type the
following command: </p>

<p><code>keytool -alias MyAndroidKey -exportcert -keystore MyProduction.keystore | xxd -p | tr -d ""[:space:]""</code></p></li>
<li><p>Append the hex
string to your app's package name, separated by a single space.</p></li>
<li><p>Compute the SHA-256 sum of the combined string. Be sure to remove
any leading or trailing whitespace from the string before computing
the SHA-256 sum. </p></li>
<li>Base64-encode the binary value of the SHA-256 sum.
You might need to decode the SHA-256 sum from its output format
first. </li>
<li>Your app's hash string is the first 11 characters of the
base64-encoded hash.</li>
</ol>

<p>Once computed, you have to send a specially-crafted SMS message to your device starting with a <code>&lt;#&gt;</code> and ending with this app hash string; just any old SMS message will not do.</p>

<p>Note that the command-line steps using <code>keytool</code> above to extract my App's hash string never did work for me; I had to use the <a href=""https://github.com/googlesamples/android-credentials/blob/master/sms-verification/android/app/src/main/java/com/google/samples/smartlock/sms_verify/AppSignatureHelper.java"" rel=""nofollow noreferrer"">helper class Google provided</a>.</p>
",61072,,,,,2018-03-19 23:11:03,,,,3,,,
Android,50457516,2,,14292863,2018,,2,,"<p>Time saver for people who are facing the same issue (Mockito + Final Class) on Android + Kotlin. As in Kotlin classes are final by default. I found a solution in one of Google Android samples with Architecture component. Solution picked from here : <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample</a></p>

<p>Create following annotations :</p>

<pre><code>/**
 * This annotation allows us to open some classes for mocking purposes while they are final in
 * release builds.
 */
@Target(AnnotationTarget.ANNOTATION_CLASS)
annotation class OpenClass

/**
 * Annotate a class with [OpenForTesting] if you want it to be extendable in debug builds.
 */
@OpenClass
@Target(AnnotationTarget.CLASS)
annotation class OpenForTesting
</code></pre>

<p>Modify your gradle file. Take example from here : <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/build.gradle"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/build.gradle</a></p>

<pre><code>apply plugin: 'kotlin-allopen'

allOpen {
    // allows mocking for classes w/o directly opening them for release builds
    annotation 'com.android.example.github.testing.OpenClass'
}
</code></pre>

<p>Now you can annotate any class to make it open for testing :</p>

<pre><code>@OpenForTesting
class RepoRepository 
</code></pre>
",940841,,,,,2018-05-21 22:47:39,,,,2,,,
Android,41638092,2,,40976486,2017,,2,,"<p>Remove from your <code>build.gradle</code>:</p>

<pre><code>compile('com.android.support.test.espresso:espresso-core:2.2.2') {
        exclude module: 'support-annotations'
}
</code></pre>

<p>See <a href=""https://github.com/googlesamples/android-testing/blob/master/ui/espresso/IdlingResourceSample/app/build.gradle#L47"" rel=""nofollow noreferrer"">this</a>, You need to add <code>compile 'com.android.support.test.espresso:espresso-idling-resource:2.2.2'</code> instead of whole Espresso-core lib.</p>
",1597616,,,,,2017-01-13 15:32:36,,,,0,,,
Android,28056617,2,,28034982,2015,,2,,"<p>The APIs or controls exposed by MediaController are the most common uses cases concerned with remote control from either the lockscreen, notifications or headset media buttons. </p>

<ol>
<li><p>The <a href=""http://developer.android.com/reference/android/media/session/MediaController.html#sendCommand(java.lang.String,%20android.os.Bundle,%20android.os.ResultReceiver)"" rel=""nofollow"">MediaController#sendCommand(String command, Bundle args, ResultReceiver cb)</a> was designed for app specific custom commands between your application UI and the service managing the MediaSession. This is well suited for the specific usecase you have in mind w.r.t EQ settings. </p></li>
<li><p><a href=""http://developer.android.com/reference/android/media/session/MediaController.TransportControls.html#sendCustomAction(java.lang.String,%20android.os.Bundle)"" rel=""nofollow"">MediaController.TransportControls#sendCustomAction(...)</a> on the other hand is for any PlaybackState.CustomAction(s) which can be displayed by other apps. An example of a CustomAction would be say marking an item as a favorite. (You can see how this is implemented in the MusicService class in the <a href=""http://github.com/googlesamples/android-MediaBrowserService"" rel=""nofollow"">MediaBrowserService</a> sample)</p></li>
</ol>

<p>Also note that there is a <a href=""https://developer.android.com/reference/android/media/VolumeProvider.html"" rel=""nofollow"">VolumeProvider</a> class that can be set on the session to receive callbacks about changes/set. In the absence of this, the session handles updates to volume.</p>
",80221,,80221,,2015-01-20 22:59:00,2015-01-20 22:59:00,,,,3,,,
Android,37441172,2,,34198994,2016,,2,,"<p>If you used the Google Camera2Basic Sample App - <a href=""https://github.com/googlesamples/android-Camera2Basic/issues/42"" rel=""nofollow noreferrer"">issue #42</a> seems to describe the problem. The solution is to review your use of <code>onResume</code> method in your <code>Fragment</code> - and call <code>closeCamera()</code> before you call <code>openCamera()</code> in the <code>onResume()</code>.  Seems to fix the problem in my testing of <code>Camera2Basic</code>.</p>
",2588732,,2219237,,2017-01-04 7:43:18,2017-01-04 7:43:18,,,,0,,,
Android,28576705,2,,24819546,2015,,2,,"<p>You can do this with the Google Play Developer API but it looks pretty painful.</p>

<p><a href=""https://developers.google.com/android-publisher/edits/overview"" rel=""nofollow"">https://developers.google.com/android-publisher/edits/overview</a></p>

<p><a href=""https://github.com/googlesamples/android-play-publisher-api/blob/master/v2/java/src/com/google/play/developerapi/samples/ListApks.java"" rel=""nofollow"">https://github.com/googlesamples/android-play-publisher-api/blob/master/v2/java/src/com/google/play/developerapi/samples/ListApks.java</a></p>
",192798,,,,,2015-02-18 5:36:57,,,,0,,,
Android,51669670,2,,51626868,2018,,2,,"<p>If one of your devices isn't connected to internet, you could :</p>

<p><strong>Option 1 :</strong>
use <a href=""https://developers.google.com/nearby/connections/overview"" rel=""nofollow noreferrer"">Google Nearby Connections API</a> , the API choose the best way to communicate (eg: Bluetooth, Wifi...).</p>

<p>See <a href=""https://github.com/googlesamples/android-nearby/tree/master/connections"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-nearby/tree/master/connections</a></p>

<p><strong>Option 2 :</strong>
Use <a href=""https://developer.android.com/reference/java/net/Socket"" rel=""nofollow noreferrer"">Socket</a> to communicate but your devices need to be on the same network. If they aren't connected to the same network, you can connect them using <a href=""https://developer.android.com/reference/android/net/wifi/p2p/package-summary"" rel=""nofollow noreferrer"">WIFI P2P</a>.</p>
",7995997,,7995997,,2018-08-03 9:43:15,2018-08-03 9:43:15,,,,0,,,
Android,32759692,2,,22967839,2015,,2,,"<p>I had this error:</p>

<p>"" ...\Application\build\intermediates\exploded-aar\com.google.android.gms\play-services-base\7.3.0\res\drawable-xxhdpi\common_signin_btn_icon_disabled_focus_light.9.png ERROR: Unable to open PNG file "" </p>

<p>Android studio was unable to open the common_signin_btn_icon_disabled_focus_light.9.png file.</p>

<p>To solve this I moved the project folder directory up a level or two to reduce path length. Everything worked perfectly after that.</p>

<p>I used ""D:\the_project_folder"". Worked for me. No more compile errors.</p>

<p>thanks to this link:</p>

<p><a href=""https://github.com/googlesamples/android-XYZTouristAttractions/issues/2"" rel=""nofollow"">https://github.com/googlesamples/android-XYZTouristAttractions/issues/2</a></p>

<p>Cheers!</p>
",5326518,,,,,2015-09-24 11:02:00,,,,1,,,
Android,33617426,2,,5498051,2015,,2,,"<p>There is now an google API for that call <a href=""https://developers.google.com/vision/?hl=en"" rel=""nofollow"">Mobile vision</a>.</p>

<p>Code sample:
<a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/barcode-reader"" rel=""nofollow"">https://github.com/googlesamples/android-vision/tree/master/visionSamples/barcode-reader</a></p>
",1245894,,,,,2015-11-09 20:13:56,,,,0,,,
Android,38698234,2,,38696068,2016,,2,,"<p>There are two ways to solve this issue. </p>

<p>1) One could update the value of <code>targetSdkVersion</code> to lower than 23 in a file ""build.gradle"". Thanks to <strong>Beyka</strong>.</p>

<p>2) Since Android 6.0 ""dangerous"" permissions should not only be included in the manifest file, but also asked for confirmation while App is running (Requesting Permissions at Run Time). Location provider should be asked only after getting runtime permission from the user. Thanks to <strong>Prerak Sola</strong>.</p>

<p>These are great resources and examples how to do that:</p>

<ul>
<li><a href=""https://developer.android.com/training/permissions/requesting.html"" rel=""nofollow"">https://developer.android.com/training/permissions/requesting.html</a></li>
<li><a href=""https://github.com/googlesamples/android-RuntimePermissions/blob/master/Application/src/main/java/com/example/android/system/runtimepermissions/MainActivity.java"" rel=""nofollow"">https://github.com/googlesamples/android-RuntimePermissions/blob/master/Application/src/main/java/com/example/android/system/runtimepermissions/MainActivity.java</a></li>
</ul>
",755640,,755640,,2016-08-02 4:57:11,2016-08-02 4:57:11,,,,0,,,
Android,34150980,2,,34000017,2015,,2,,"<p>First of all, Espresso allows you to use Hamcrest matchers in tests.</p>

<p><a href=""http://www.marcphilipp.de/downloads/posts/2013-01-02-hamcrest-quick-reference/Hamcrest-1.3.pdf"" rel=""nofollow"">Hamcrest 1.3 Quick Reference</a>.</p>

<p>The most useful for catching the programmatically added views are <code>withChild</code>, <code>withParent</code>, <code>hasSibling</code>, and <code>hasDescendant</code>.</p>

<p>To make it more clear, I would give a simple example from my app: </p>

<pre><code>onView(withId(R.id.action_bar_details))
        .check(matches(withChild(withChild(withText(""Details"")))));
</code></pre>

<p>Secondly, for <code>RecyclerView</code> tests in Espresso use <code>onData</code> methods instead <code>onView</code>.</p>

<p><a href=""https://google.github.io/android-testing-support-library/downloads/espresso-cheat-sheet-2.1.0.pdf"" rel=""nofollow"">Espresso  2.1. Espresso Cheat Sheet Master</a></p>

<p>Another example from my app - using <code>onData</code> method</p>

<pre><code>onData(anything()).inAdapterView(withId(R.id.listView)).atPosition(getRandomPosition()).
                onChildView(withId(R.id.item)).check(matches(isDisplayed()));
</code></pre>

<p>Finally, check these great Googles repository for get more examples</p>

<ol>
<li><a href=""https://github.com/googlesamples/android-testing/"" rel=""nofollow"">GoogleSample</a></li>
<li><a href=""https://github.com/googlecodelabs/android-testing/"" rel=""nofollow"">GoogleCodeLabs</a></li>
</ol>
",4730812,,-1,,2016-09-28 12:44:57,2016-09-28 12:44:57,,,,0,,,
Android,52034489,2,,52032384,2018,,2,,"<p>Try using a <a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java"" rel=""nofollow noreferrer"">SingleLiveEvent</a> </p>

<p>Here is the code for it from <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">Googles architecture samples repo</a> (in case it ever gets removed from the repo):</p>

<pre><code>import android.arch.lifecycle.LifecycleOwner;
import android.arch.lifecycle.MutableLiveData;
import android.arch.lifecycle.Observer;
import android.support.annotation.MainThread;
import android.support.annotation.Nullable;
import android.util.Log;

import java.util.concurrent.atomic.AtomicBoolean;

/**
 * A lifecycle-aware observable that sends only new updates after subscription, used for events like
 * navigation and Snackbar messages.
 * &lt;p&gt;
 * This avoids a common problem with events: on configuration change (like rotation) an update
 * can be emitted if the observer is active. This LiveData only calls the observable if there's an
 * explicit call to setValue() or call().
 * &lt;p&gt;
 * Note that only one observer is going to be notified of changes.
 */
public class SingleLiveEvent&lt;T&gt; extends MutableLiveData&lt;T&gt; {

    private static final String TAG = ""SingleLiveEvent"";

    private final AtomicBoolean mPending = new AtomicBoolean(false);

    @MainThread
    public void observe(LifecycleOwner owner, final Observer&lt;T&gt; observer) {

        if (hasActiveObservers()) {
            Log.w(TAG, ""Multiple observers registered but only one will be notified of changes."");
        }

        // Observe the internal MutableLiveData
        super.observe(owner, new Observer&lt;T&gt;() {
            @Override
            public void onChanged(@Nullable T t) {
                if (mPending.compareAndSet(true, false)) {
                    observer.onChanged(t);
                }
            }
        });
    }

    @MainThread
    public void setValue(@Nullable T t) {
        mPending.set(true);
        super.setValue(t);
    }

    /**
     * Used for cases where T is Void, to make calls cleaner.
     */
    @MainThread
    public void call() {
        setValue(null);
    }
}
</code></pre>
",2590478,,,,,2018-08-27 7:26:11,,,,0,,,
Android,34535862,2,,31621905,2015,,2,,"<p>I'm the product manager for Smart Lock at Google. We added some functionality to support this in the 8.3 release of Play Services APIs (November 2015).</p>

<p>In the past the <a href=""https://developers.google.com/identity/smartlock-passwords/android/retrieve-hints"" rel=""nofollow"">""hint"" dialog</a> to allow the user to pick an email address with one tap to sign in or sign up had the title ""Choose an Account"", which, as noted in the question, caused some user confusion. In 8.3, we changed the default text to be ""Sign in with"" and allowed customization by the calling app to ""Sign up with"". Complete customization of the dialog text is not possible since it is rendered by Play Services and must be localized, but in UX research we found that ""Sign up with"" had the same user acceptance and completion as ""Prefill sign up form with"" and other variants but gave the developer more latitude in the scenarios where the dialog could be used. (aside: in testing, we found most users don't read the text at the top of the dialog at all!)</p>

<p>Sample code: build a <code>CredentialPickerConfig</code> with <code>setForNewAccount(true)</code> for account creation and supply this to <code>setHintPickerConfig()</code> when building a <code>HintRequest</code> for the <code>getHintPickerIntent()</code> method added to the <code>Auth.CredentialsApi</code> in Play Services 8.3.</p>

<pre><code>import com.google.android.gms.auth.api.Auth;
import com.google.android.gms.auth.api.credentials.CredentialPickerConfig;
import com.google.android.gms.auth.api.credentials.HintRequest;

CredentialPickerConfig selectorConfig = new CredentialPickerConfig.Builder()
        .setForNewAccount(true).build();
HintRequest hintRequest = new HintRequest.Builder()
        .setHintPickerConfig(selectorConfig).build();
PendingIntent intent = Auth.CredentialsApi.getHintPickerIntent(apiClient, hintRequest);
try {
    startIntentSenderForResult(intent.getIntentSender(), RESOLVE_HINT, null, 0, 0, 0);
} catch (IntentSender.SendIntentException e) {
    Log.e(TAG, ""Intent failure"", e);
}
</code></pre>

<p>Check out the sample code on Github for details on setting up the <code>apiClient</code> and integrating the rest of the API. Leave a comment if you have questions or feedback.</p>

<p><a href=""https://github.com/googlesamples/android-credentials"" rel=""nofollow"">https://github.com/googlesamples/android-credentials</a></p>
",5001016,,,,,2015-12-30 19:24:13,,,,0,,,
Android,29178620,2,,29178472,2015,,2,,"<p>I like how I post a question just before finding the answer... </p>

<p>The above code works fine, I just didn't set an interval.  on the LocationRequest, just call setInterval(whatever needed)... goodnight.</p>

<p><a href=""https://github.com/googlesamples/android-play-location"" rel=""nofollow"">https://github.com/googlesamples/android-play-location</a></p>
",3311886,,,,,2015-03-21 2:33:26,,,,1,,,
Android,32517143,2,,32516539,2015,,2,,"<p>In Camera2 API, </p>

<p>Quoting from the documentation of <code>CameraCaptureSession</code>,</p>

<blockquote>
  <p>If a new session is created by the camera device, then the previous
  session     is closed, and its associated onClosed callback will 
  be invoked. All of the session methods will throw an
  IllegalStateException if called once the session is closed.</p>
</blockquote>

<p>So, as the documentation implies, you are calling a closed session. find this out. I can help a bit more of you put more code.</p>

<p>And also, I hope that you are imitating the Camera2 API sample code.If not I suggest you to have a look at <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">it</a>.</p>
",892788,,,,,2015-09-11 6:42:34,,,,0,,,
Android,42336619,2,,42336304,2017,,2,,"<p>First of all, the crash is probably because your Java code is trying to load the c++ shared library and fails, because the library was not built due to the NDK errors. So take care of the errors first.</p>

<p>Second, did you configure your Android.mk properly? Have a look here, for example (it is for Eclipse and not Android Studio, but the mk file is the same): <a href=""https://blog.jayway.com/2011/10/13/getting-started-with-android-ndk/"" rel=""nofollow noreferrer"">Getting started with Android NDK</a>. Looking at an existing simple project can also help: <a href=""https://github.com/googlesamples/android-ndk/tree/master/hello-jni"" rel=""nofollow noreferrer"">hello-jni</a>.</p>
",944017,,,,,2017-02-20 4:37:41,,,,0,,,
Android,33992352,2,,33991074,2015,,2,,"<p>You can read the tutorial <a href=""http://developer.android.com/training/wearables/data-layer/messages.html"" rel=""nofollow"">here</a> for a good introduction and steps that you need to follow to set this up; first, your phone needs to advertise a certain capability that it has (say, it can transcribe voice messages) in an xml file. Then all other nodes on the wear network can query the framework for the nodes(s) that provide that capability and finally, each can send a message to those nodes. A good number of our samples on GitHub have been updated to use CapabilityApi (e.g. <a href=""https://github.com/googlesamples/android-DataLayer"" rel=""nofollow"">android-DataLayer</a> sample) so you can look at them and see how things are set up. Finally, you can use <a href=""https://github.com/googlesamples/android-WearCompanionLibrary"" rel=""nofollow"">WearCompanionLibrary</a> that provides that functionality for you if you want or willing to use a library.</p>
",2765813,,,,,2015-11-30 6:05:10,,,,7,,,
Android,34498183,2,,34498147,2015,,2,,"<pre><code> Runtime Error: java.lang.NullPointerException: Attempt to invoke virtual method 'double android.location.Location.getLatitude()' on a null object reference
</code></pre>

<p>The location is null, it has not been initialised.</p>

<p>Check that location is not null:</p>

<pre><code>if(location!= null){
    double latitude = location.getLatitude();
    double longitude = location.getLongitude();
}
</code></pre>

<p>Also you should be wrapping all your location services code into a try and catch and be checking for null pointer references and connections, GPS providers etc. Have a look here  <a href=""https://github.com/googlesamples/android-play-location/tree/master/BasicLocationSample"" rel=""nofollow"">BasicLocationSample</a>.</p>
",3956566,,3956566,,2015-12-28 17:50:06,2015-12-28 17:50:06,,,,1,,,
Android,52833633,2,,52833331,2018,,2,,"<p>Use Broadcast receiver to get location in version 8.0...i have test it was working for me       </p>

<pre><code> private PendingIntent getPendingIntent() {
        // Note: for apps targeting API level 25 (""Nougat"") or lower, either
        // PendingIntent.getService() or PendingIntent.getBroadcast() may be used when requesting
        // location updates. For apps targeting API level O, only
        // PendingIntent.getBroadcast() should be used. This is due to the limits placed on services
        // started in the background in ""O"".

        // TODO(developer): uncomment to use PendingIntent.getService().
//        Intent intent = new Intent(this, LocationUpdatesIntentService.class);
//        intent.setAction(LocationUpdatesIntentService.ACTION_PROCESS_UPDATES);
//        return PendingIntent.getService(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);

        Intent intent = new Intent(this, LocationUpdatesBroadcastReceiver.class);
        intent.setAction(LocationUpdatesBroadcastReceiver.ACTION_PROCESS_UPDATES);
        return PendingIntent.getBroadcast(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
    }
</code></pre>

<blockquote>
  <p><strong>Reference :</strong> <a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationUpdatesPendingIntent/app/src/main/java/com/google/android/gms/location/sample/locationupdatespendingintent/MainActivity.java"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-location/blob/master/LocationUpdatesPendingIntent/app/src/main/java/com/google/android/gms/location/sample/locationupdatespendingintent/MainActivity.java</a></p>
  
  <p><strong>Note:</strong> Some of device is not working like OPPO,Vivo, due to security reason.. In this case you have to go to <code>Security permissions</code> ->
  <code>autostart</code> -> then enable autostart from there.</p>
</blockquote>
",6473867,,,,,2018-10-16 10:43:37,,,,3,,,
Android,45064361,2,,26599824,2017,,2,,"<p>This was covered in one of the <a href=""https://www.youtube.com/watch?v=4L4fLrWDvAU"" rel=""nofollow noreferrer"">Google I/O 2016 talks</a>. The source for the transition which you can copy into your code is found <a href=""https://github.com/googlesamples/android-unsplash/blob/master/app/src/main/java/com/example/android/unsplash/transition/TextResize.java"" rel=""nofollow noreferrer"">here</a>. If your IDE complains the <code>addTarget(TextView.class);</code> requires API 21, just remove the constructor and add the target either dynamically or in your xml. </p>

<p>i.e. (note this is in Kotlin)</p>

<pre><code>val textResizeTransition = TextResize().addTarget(view.findViewById(R.id.text_view))
</code></pre>
",5849894,,5849894,,2017-07-12 18:02:36,2017-07-12 18:02:36,,,,0,,,
Android,36173086,2,,29695720,2016,,2,,"<p>Began from Android 5.0, you can use <strong><a href=""http://developer.android.com/reference/android/app/KeyguardManager.html#createConfirmDeviceCredentialIntent(java.lang.CharSequence,%20java.lang.CharSequence)"" rel=""nofollow"">KeyguardManager.createConfirmDeviceCredentialIntent()</a></strong></p>

<p>This method will create an Intent, which can be used to start system authentication(pin/pattern/password).</p>

<p>For more information, refer <a href=""http://developer.android.com/about/versions/marshmallow/android-6.0.html#confirm-credential"" rel=""nofollow"">doc</a> and <a href=""https://github.com/googlesamples/android-ConfirmCredential"" rel=""nofollow"">Confirm Credential sample</a>.</p>
",1093344,,,,,2016-03-23 8:28:15,,,,0,,,
Android,36173661,2,,27107033,2016,,2,,"<p>Began from Android 5.0, you can use <a href=""http://developer.android.com/reference/android/app/KeyguardManager.html#createConfirmDeviceCredentialIntent(java.lang.CharSequence,%20java.lang.CharSequence)"" rel=""nofollow"">KeyguardManager.createConfirmDeviceCredentialIntent()</a></p>

<p>This method will create an Intent, which can be used to start system authentication (pin / pattern / password).</p>

<p>For more information, refer <a href=""http://developer.android.com/about/versions/marshmallow/android-6.0.html#Confirm-credential"" rel=""nofollow"">doc</a> and <a href=""https://github.com/googlesamples/android-ConfirmCredential"" rel=""nofollow"">Confirm Credential sample</a>.</p>
",1093344,,,,,2016-03-23 8:58:46,,,,0,,,
Android,53607016,2,,46900310,2018,,2,,"<p>The HintRequest api provided by google has not fully accomplished its feature and is quite buggy , Its works fine in  google devices as said by developers ""OEM issue that their pixel or nexus phone working well."" </p>

<p><a href=""https://issuetracker.google.com/issues/77884951"" rel=""nofollow noreferrer"">https://issuetracker.google.com/issues/77884951</a> .</p>

<p><a href=""https://github.com/googlesamples/android-credentials/issues/27"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-credentials/issues/27</a></p>

<p>Many apps are still using it with handling the exceptional cases with own logic such as myntra verify number feature which is there on the profile page. </p>
",6496837,,,,,2018-12-04 6:38:09,,,,2,,,
Android,54880171,2,,53865978,2019,,2,,"<p>Follow these steps to get the key for production:</p>

<ol>
<li>Go to the <strong>Build</strong> option.</li>
<li>In the options, choose <strong>Select Build Variant</strong>.</li>
<li>Then in the left corner, a dialog will open, from there Change Build Variant from <strong>debug</strong> to <strong>release</strong>.</li>
<li>Click on run, then this dialog will open:
<img src=""https://i.stack.imgur.com/OIOw5.png"" alt=""Then this dialog will open(point 4 pic.)""></li>
<li>Click on <strong>Run</strong>, next click on <strong>Continue Anyway</strong>, then click on <strong>Yes</strong> then in the dialog <img src=""https://i.stack.imgur.com/HReo2.png"" alt=""In this dialog Click on the **+** in left bottom"">.</li>
<li>Then fill these details: <img src=""https://i.stack.imgur.com/Wy9oe.png"" alt=""Then fill these details""></li>
<li>Now go to <strong>Build Types</strong> and follow this image: <img src=""https://i.stack.imgur.com/WVLXi.png"" alt=""Then go to build types and follow the image""></li>
<li>And click <strong>ok</strong>.</li>
</ol>

<p>Now when you run the commands to get the hash through <a href=""https://github.com/googlesamples/android-credentials/blob/master/sms-verification/android/app/src/main/java/com/google/samples/smartlock/sms_verify/AppSignatureHelper.java"" rel=""nofollow noreferrer"">AppSignatureHelper Class</a>, that key will be your production key.</p>
",7440113,,7117697,,2019-02-26 13:47:18,2019-02-26 13:47:18,,,,0,,,
Android,54900398,2,,54900268,2019,,2,,"<p>This is the Android <a href=""https://codelabs.developers.google.com/codelabs/android-lifecycles/#0"" rel=""nofollow noreferrer"">lifecycle-aware components codelab</a>. It will do exatelly what you ask for. Here is the <a href=""https://developer.android.com/topic/libraries/architecture/index.html"" rel=""nofollow noreferrer"">Architecture components</a> part of the Android Jetpack and it is a set of Android libraries that help you structure your app in a way that is robust, testable, and maintainable.</p>

<p>Here is also the <a href=""https://github.com/googlesamples/android-sunflower"" rel=""nofollow noreferrer"">android-sunflower</a> A gardening app illustrating Android development best practices with Android Jetpack.</p>
",538837,,538837,,2019-02-27 7:46:24,2019-02-27 7:46:24,,,,1,,,
Android,45343959,2,,40155591,2017,,2,,"<p>I've dug some into the problem and my findings is that code that used to work for Andrdoi 5.x might work if the application is set to be the device owner. </p>

<p>Solution:</p>

<p>The solution is to add the device as deviceOwner. This will allow for static IP to be set using the 5.x hacks as referenced by Mogi. A good example of how this is done is using the example found here:</p>

<p><a href=""https://github.com/googlesamples/android-DeviceOwner/"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-DeviceOwner/</a></p>

<p>Using adb shell and running the command:</p>

<pre><code>dpm set-device-owner com.example.android.deviceowner/.DeviceOwnerReceiver
</code></pre>

<p>will make it ready to be allowed to do its job.</p>
",217672,,217672,,2017-07-28 7:01:42,2017-07-28 7:01:42,,,,0,,,
Android,53686081,2,,53685773,2018,,2,,"<p>I believe that's a typo in the documentation. Instead, you should use <code>BillingResponse.OK</code>: <a href=""https://developer.android.com/reference/com/android/billingclient/api/BillingClient.BillingResponse#ok"" rel=""nofollow noreferrer"">https://developer.android.com/reference/com/android/billingclient/api/BillingClient.BillingResponse#ok</a></p>

<p>You can see it in use in this example:
<a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive_v2/shared-module/src/main/java/com/example/billingmodule/billing/BillingManager.java#L126"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive_v2/shared-module/src/main/java/com/example/billingmodule/billing/BillingManager.java#L126</a></p>
",8298909,,,,,2018-12-08 19:20:49,,,,0,,,
Android,46438563,2,,45834449,2017,,2,,"<p>It turns out that notifications can be auto-bundled on 24+ devices. So the manually created summary notification is no longer needed. 
Please refer to <a href=""https://github.com/googlesamples/android-WearNotifications/blob/fd7cdc51a76e6beb7d7b428a8c30ab745e3bbfb8/Application/src/main/java/com/example/android/wearable/wear/wearnotifications/MainActivity.java#L310"" rel=""nofollow noreferrer"">The Example Project</a></p>
",679563,,,,,2017-09-27 2:28:43,,,,0,,,
Android,46476343,2,,46470190,2017,,2,,"<p>Just inside your activity's onCreate or even better onResume (this will prevent potential problems with lost purchases when switching between apps) in addition to successful onBillingSetupFinished callback.</p>

<p>For all similar questions, please check the latest <a href=""https://github.com/googlesamples/android-play-billing/tree/master/TrivialDrive_v2"" rel=""nofollow noreferrer"">TrivialDrive_v2</a>. </p>

<p>E.g. queryPurchase is triggered <a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive_v2/shared-module/src/main/java/com/example/billingmodule/BaseGamePlayActivity.java#L160"" rel=""nofollow noreferrer"">here</a> and <a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive_v2/shared-module/src/main/java/com/example/billingmodule/billing/BillingManager.java#L116"" rel=""nofollow noreferrer"">here</a> there.</p>
",1390874,,,,,2017-09-28 18:48:27,,,,3,,,
Android,38651904,2,,38642622,2016,,2,,"<p>You must update your IabHelper files with last SDK from:</p>

<p><a href=""https://github.com/googlesamples/android-play-billing/tree/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample/util"" rel=""nofollow"">https://github.com/googlesamples/android-play-billing/tree/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample/util</a></p>

<p>When you overwrite old files, Eclipse or Android Studio will display errors and you have to fix them, for example add try catch, or add one parameter to queryInventory function.</p>

<p>Remember update package name in new files if you changed it.</p>

<p><strong>EDIT:</strong> Also finally I need update google_play_services.jar lib included in my project. After update this notification alert has hidden. I was using an older google play service lib. Now I am using rev 28 version.</p>
",3793100,,3793100,,2016-08-03 15:42:35,2016-08-03 15:42:35,,,,2,,,
Android,36496055,2,,36495011,2016,,2,,"<p>@komal It always take time to get the Location , depending upon the provider and the place . GPS take signal from min 3 satellite and do   uses trilateration  , so depending upon the signal strength and ur location it could take time . Even Google Map app take upto 10 sec to get Lat/Lng sometime. You should use <a href=""http://developer.android.com/training/location/receive-location-updates.html"" rel=""nofollow"">FusedLocationProvider</a> from Google Play services  </p>

<p>Try this demo <a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationUpdates"" rel=""nofollow"">https://github.com/googlesamples/android-play-location/tree/master/LocationUpdates</a></p>
",907664,,,,,2016-04-08 9:25:22,,,,2,,,
Android,45216102,2,,45215637,2017,,2,,"<p><em>here is a constructor with two parameters, one is activity and another is Listener, now I want to get the location in background service with using the same class</em></p>

<p>It actually needs a context not activity exactly. </p>

<p>Anyways, you can follow the google samples of location</p>

<p><a href=""https://github.com/googlesamples/android-play-location"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-location</a></p>
",1281180,,,,,2017-07-20 13:24:15,,,,1,,,
Android,53928702,2,,53927058,2018,,2,,"<p>This is the <code>AutoFitTextView</code> class which I pulled from Google sample. You can take a look at <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/AutoFitTextureView.java"" rel=""nofollow noreferrer"">here</a>. It aims to show <strong>camera view</strong> and config the ratio base on the physical size of device.</p>

<pre><code>public class AutoFitTextureView extends TextureView {

    private int mRatioWidth = 0;
    private int mRatioHeight = 0;

    // Some codes here...

    public void setAspectRatio(int width, int height) {
        if (width &lt; 0 || height &lt; 0) {
            throw new IllegalArgumentException(""Size cannot be negative."");
        }
        mRatioWidth = width;
        mRatioHeight = height;
        requestLayout();
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        int width = MeasureSpec.getSize(widthMeasureSpec);
        int height = MeasureSpec.getSize(heightMeasureSpec);
        if (0 == mRatioWidth || 0 == mRatioHeight) {
            setMeasuredDimension(width, height);
        } else {
            if (width &lt; height * mRatioWidth / mRatioHeight) {
                setMeasuredDimension(width, width * mRatioHeight / mRatioWidth);
            } else {
                setMeasuredDimension(height * mRatioWidth / mRatioHeight, height);
            }
        }
    }
}
</code></pre>

<p>There are 2 points in this class:</p>

<ol>
<li><strong>You can't ensure the ratio works properly in every device</strong>. However, we are able to choose optimized size which is already defined in this <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"" rel=""nofollow noreferrer"">class</a>.</li>
<li><strong>This condition is wrong:</strong> <code>if (width &lt; height * mRatioWidth / mRatioHeight)</code>. It should be <em>></em> because when width is bigger than height, we calculate and set measure dimension base on width (not height).</li>
</ol>

<p><strong>UPDATED</strong></p>

<p>If you just want every device will work properly in a particular ratio, then set hard ratio for it (for instance: 4/3)</p>

<p>You can achieve that by replacing those lines of code:</p>

<pre><code>mPreviewSize = chooseOptimalSize(map.getOutputSizes(SurfaceTexture.class),
                        rotatedPreviewWidth, rotatedPreviewHeight, maxPreviewWidth,
                        maxPreviewHeight, largest);

-&gt; previewSize = Size(4, 3)
</code></pre>
",5460066,,5460066,,2018-12-26 8:26:44,2018-12-26 8:26:44,,,,10,,,
Android,45295417,2,,45291486,2017,,2,,"<p>The key point is <strong>verify that the signing certificate is issued to <code>attest.android.com</code> by a trusted Certificate Authority</strong></p>

<p>Any trusted CA will issue a fake certificate to <code>attest.android.com</code>. See what happens if they engage in bad practices <a href=""https://security.googleblog.com/2016/10/distrusting-wosign-and-startcom.html?m=1"" rel=""nofollow noreferrer"">https://security.googleblog.com/2016/10/distrusting-wosign-and-startcom.html?m=1</a></p>

<p>See Google's <a href=""https://developer.android.com/training/safetynet/attestation.html#verify-compat-check"" rel=""nofollow noreferrer"">doc</a></p>

<blockquote>
  <p><strong>Verify the compatibility check response</strong></p>
  
  <p>You should take steps to make sure that the compatibility check response actually came from the SafetyNet service and includes data that matches your request data.</p>
  
  <p><em>Caution: You should send the entire JWS response to your own server, using a secure connection, for verification. We don't recommend that you perform the verification directly in your app because, in that case, there is no guarantee that the verification logic itself hasn't been modified.</em></p>
  
  <p>Follow these steps to verify the origin of the JWS message:</p>
  
  <ol>
  <li><p>Extract the SSL certificate chain from the JWS message.</p></li>
  <li><p><strong>Validate the SSL certificate chain and use SSL hostname matching to verify that the leaf certificate was issued to the hostname attest.android.com.</strong></p></li>
  <li><p>Use the certificate to verify the signature of the JWS message.</p></li>
  <li><p>Check the data of the JWS message to make sure it matches the data within your original request. In particular, make sure that the nonce, timestamp, package name, and the SHA-256 hashes match.</p></li>
  </ol>
</blockquote>

<p>The second dot requires to validate the certificate chain. It is assumed that it is used a Trust Manager containing the root certificate of the Certificate Authority</p>

<p>I have inspected Google's sample code in <a href=""https://github.com/googlesamples/android-play-safetynet/blob/master/server/java/src/main/java/OfflineVerify.java"" rel=""nofollow noreferrer"">OfflineVerify</a> to ensure the existence of a TrustManager because it is not explictly said, and it is effectively used during JWS verification. It uses the default system TrustManager, but you can use a custom one</p>

<p>Note that is used JWS (Json Web Signature), not JWT. A JWT is usually an authentication token signed with JWS</p>
",6371459,,,,,2017-07-25 6:25:13,,,,2,,,
Android,45297563,2,,44503704,2017,,2,,"<p>There were 2 issues with my tests:</p>

<ol>
<li>The first problem was in getting / initialising <code>UiDevice</code> instance in static block (as a static field in util class). I moved it into <code>@Before</code>and it helped to resolve the issue partially. </li>
<li>Another problem was occurring while searching for an element using a package name obtained from the <code>UiDevice</code>. I replaced getting package with <code>InstrumentationRegistry.getTargetContext().getPackageName();</code> as it's done in <a href=""https://github.com/googlesamples/android-testing-templates/blob/master/AndroidTestingBlueprint/app/src/androidTest/java/com/example/android/testing/blueprint/ui/uiautomator/UiAutomatorTest.java"" rel=""nofollow noreferrer"">google samples</a>. </li>
</ol>
",2870138,,,,,2017-07-25 8:13:48,,,,1,,,
Android,45290061,2,,45198979,2017,,2,,"<p>Creating an API 26 (aka O) emulator allowed me to successfully install the Instant App, while otherwise following the guide. Hat-tip to donly from <a href=""https://github.com/googlesamples/android-instant-apps/issues/21"" rel=""nofollow noreferrer"">Github project android-instant-apps</a> 
Workarounds I tried unsuccessfully first:</p>

<ul>
<li>Uninstalling ""<strong>Google Play Services for Instant Apps</strong>"" (from the other answer)</li>
<li>Downgrading to Android Studio 3.0 Canary 5</li>
<li>Using a physical device that can run instant apps (Galaxy S6 SM-G920V, Android 7.0)</li>
</ul>
",2701057,,2638235,,2018-03-19 8:06:28,2018-03-19 8:06:28,,,,0,,,
Android,32408132,2,,6353188,2015,,2,,"<p>This use-case may be a good fit for the recently released Nearby API. See the Nearby Messages <a href=""https://developers.google.com/nearby/messages/overview"" rel=""nofollow"">developer overview</a></p>

<p>Nearby has its own runtime permission saving you from adding BLUETOOTH_ADMIN or similar to your manifest. It works across iOS and Android by utilizing multiple technologies (Classic Bluetooth, BLE, ultrasound). There's an option to use only the ultrasonic modem which reduces the range to about 5 feet.</p>

<p>I've included a partial example below, you can find a more complete sample on <a href=""https://github.com/googlesamples/android-nearby/blob/master/messages/NearbyDevices/app/src/main/java/com/google/android/gms/nearby/messages/samples/nearbydevices/MainFragment.java"" rel=""nofollow"">github</a></p>

<pre><code>// Call this when the user clicks ""find players"" or similar
// In the ResultCallback you'll want to trigger the permission
// dialog
Nearby.Messages.getPermissionStatus(client)
  .setResultCallback(new ResultCallback&lt;Status&gt;() {
    public void onResult(Status status) {
      // Request Nearby runtime permission if missing
      // ... see github sample for details
      // If you already have the Nearby permission,
      // call publishAndSubscribe()
    }
  });

void publishAndSubscribe() {
  // You can put whatever you want in the message up to a modest
  // size limit (currently 100KB). Smaller will be faster, though.
  Message msg = ""your device identifier/MAC/etc."".getBytes();
  Nearby.Messages.publish(googleApiClient, msg)
      .setResultCallback(...);

  MessageListener listener = new MessageListener() {
    public void onFound(Message msg) {
      Log.i(TAG, ""You found another device "" + new String(msg));
    }
  });

  Nearby.Messages.subscribe(googleApiClient, listener)
    .setResultCallback(...);
}
</code></pre>

<p><em>Disclaimer</em> I work on the Nearby API</p>
",5302459,,,,,2015-09-04 23:58:05,,,,0,,,
Android,54980053,2,,54967251,2019,,2,,"<ol>
<li><p>Download opencv Android package (e.g. <a href=""https://netix.dl.sourceforge.net/project/opencvlibrary/4.0.1/opencv-4.0.1-android-sdk.zip"" rel=""nofollow noreferrer"">opencv-4.0.1-android-sdk</a>) and unpack to, say, <code>~/android</code>.</p></li>
<li><p>To the bottom of <a href=""https://github.com/googlesamples/android-ndk/blob/master/endless-tunnel/app/src/main/cpp/CMakeLists.txt"" rel=""nofollow noreferrer""><strong>CMakeLists.txt</strong></a>, add</p>

<pre><code>set( OpenCV_DIR ""~/android/OpenCV-android-sdk/sdk/native/jni"" )
find_package( OpenCV REQUIRED )
target_link_libraries(game opencv_java)

get_target_property(__src opencv_java IMPORTED_LOCATION_RELEASE )
add_custom_command(TARGET game POST_BUILD COMMAND
  ${CMAKE_COMMAND} -E copy ${__src} ${CMAKE_LIBRARY_OUTPUT_DIRECTORY}
)
</code></pre></li>
</ol>

<p>The package will define the following variables:</p>

<p><strong>OpenCV_LIBS                     :</strong> The list of all imported targets for OpenCV modules.</p>

<p><strong>OpenCV_INCLUDE_DIRS             :</strong> The list of OpenCV include directories. With CMake >= 2.8.11 you don't even need to write </p>

<pre><code>include_directories(${OpenCV_INCLUDE_DIRS})
</code></pre>

<p>This version of prebuilt OpenCV SDK defines also</p>

<p><strong>OpenCV_VERSION                  :</strong> The version of this OpenCV build: <strong>""4.0.1""</strong></p>

<p><strong>OpenCV_ANDROID_NATIVE_API_LEVEL :</strong> Minimum required level of Android API: <strong>""16""</strong>.</p>

<p>This means that your app manifest needs <strong>minSdkVersion</strong> 16 or higher (the original sample needs a fix <a href=""https://github.com/googlesamples/android-ndk/blob/master/endless-tunnel/app/build.gradle#L24"" rel=""nofollow noreferrer"">here</a>).</p>

<p>Instead of the shared library that contains all OpenCV functionality, you can use static libraries (<strong>opencv_imgcodecs</strong>, <strong>opencv_stitching</strong>, <em>et al</em>). These static libraries assume the default <strong>ANDROID_STL=c++_static</strong>.</p>

<p>For best results, use NDK <strong>r.18</strong> or <strong>r.19</strong>.</p>

<p><em>I have opened a <a href=""https://github.com/android-ndk/ndk/issues/928"" rel=""nofollow noreferrer"">feature request</a> for Android NDK to provide better support for imported shared libraries</em>.</p>
",192373,,192373,,2019-03-10 16:24:21,2019-03-10 16:24:21,,,,10,,,
Android,53874815,2,,53874556,2018,,2,,"<p>You should checkout out the <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/ocr-reader"" rel=""nofollow noreferrer"">ocr-reader</a> Google sample. It's quick to run and not too difficult to get what you're looking for. What you would need to do is modify the <code>OcrDetectorProcess</code> that comes with the sample to break down the text into individual words, then you can easily calculate the boundaries and center points of each word. Here's some code to get you started:</p>

<pre><code>@Override
public void receiveDetections(Detector.Detections&lt;TextBlock&gt; detections) {
    mGraphicOverlay.clear();

    // Get all detected items.
    SparseArray&lt;TextBlock&gt; items = detections.getDetectedItems();
    for (int i = 0; i &lt; items.size(); ++i) {
        TextBlock item = items.valueAt(i);

        // Get individual lines in each item.
        List&lt;Line&gt; lines = (List&lt;Line&gt;) item.getComponents();
        for (Line line : lines) {

            // Get individual ""words"" in each line.
            List&lt;Element&gt; elements = (List&lt;Element&gt;) line.getComponents();
            for (Element e : elements) {

                // Now get the position of each element.
                Rect rect = e.getBoundingBox();
                Point[] points = e.getCornerPoints();
                int centerX = (points[0].x + points[2].x) / 2;
                int centerY = (points[0].y + points[2].y) / 2;

                // DO STUFF

            }
        }
    }
}
</code></pre>
",2694189,,,,,2018-12-20 19:21:39,,,,1,,,
Android,45315101,2,,45275041,2017,,2,,"<p><strong>UPDATE</strong>   Theyve again updated the <a href=""https://developer.android.com/topic/instant-apps/faqs.html"" rel=""nofollow noreferrer"">Instant Apps FAQ</a> on how to do this. </p>

<blockquote>
  <p>For devices running Android 8.0 (API level 26) or higher, the instant
  app's data is transferred automatically when the APK installation
  begins, if the installed app is configured to use targetSandboxVersion
  2.</p>
  
  <p>For installed apps not configured to use targetSandboxVersion 2, or
  devices running Android 7.1 (API level 25) or lower, please consider
  using the Cookie API (Sample) or Storage API (Sample) to transfer the
  data.</p>
</blockquote>

<p>For Oreo 8.0 and higher, it should be automatically handled.</p>

<p>But for 7.0 and below, you've got 2 options (#1 is recommended):</p>

<ol>
<li><a href=""https://developers.google.com/android/reference/com/google/android/gms/instantapps/PackageManagerCompat#setInstantAppCookie(byte[])"" rel=""nofollow noreferrer"">PackageManagerCompat#setInstantAppCookie()</a>, the cookie has a size limit, but it is the simplest and most suitable for shared preferences.</li>
<li><a href=""https://developers.google.com/android/reference/com/google/android/gms/instantapps/InstantAppsClient#getInstantAppData()"" rel=""nofollow noreferrer"">InstantAppsClient#getInstantAppData()</a>, creates a ZIP of the data that you'll have to extract and parse once it's moved over to the installed-app side, a bit more complicated.</li>
</ol>

<p>The FAQ lists a sample for each option:</p>

<ul>
<li><a href=""https://github.com/googlesamples/android-instant-apps/tree/master/cookie-api"" rel=""nofollow noreferrer"">googlesamples/android-instant-apps/cookie-api</a></li>
<li><a href=""https://github.com/googlesamples/android-instant-apps/tree/master/storage-api"" rel=""nofollow noreferrer"">googlesamples/android-instant-apps/storage-api</a></li>
</ul>

<p>The Storage API/ZIP sample does not show you how to parse the ZIP files and what file type/format to expect from SharedPreferences files, so you'll have to implement that yourself, but here are some related posts:</p>

<ul>
<li><a href=""https://stackoverflow.com/questions/23869228/how-to-read-file-from-zip-using-inputstream"">How to read file from ZIP using InputStream?</a></li>
<li><a href=""https://stackoverflow.com/questions/27917809/how-to-transfer-sharedpreferences-file-from-internal-storage-to-external-storage"">How to transfer sharedpreferences file from internal storage to external storage?</a></li>
</ul>
",6668797,,6668797,,2019-01-12 0:04:45,2019-01-12 0:04:45,,,,0,,,
Android,41895453,2,,41672850,2017,,2,,"<p>This is the code that I am using in one of my production application which also takes care of android api versions <a href=""https://github.com/googlesamples/android-ImmersiveMode/blob/master/Application/src/main/java/com/example/android/immersivemode/ImmersiveModeFragment.java"" rel=""nofollow noreferrer"">ImmersiveModeFragment.java</a>.
It also takes care when you leave your app and resume it again. You can download the sample and try with all the features that an immersive app should have.</p>
",2870088,,2870088,,2017-01-28 13:53:26,2017-01-28 13:53:26,,,,0,,,
Android,55494418,2,,55480988,2019,,2,,"<p>I haven't run into the issue myself but here's an article that talks about supporting Direct Boot mode.</p>

<p><a href=""https://developer.android.com/training/articles/direct-boot"" rel=""nofollow noreferrer"">https://developer.android.com/training/articles/direct-boot</a></p>

<p>Here's also a Github link from Google showing how you can access a device's encrypted storage. In the AlarmStorage class.</p>

<p><a href=""https://github.com/googlesamples/android-DirectBoot/"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-DirectBoot/</a></p>
",421399,,,,,2019-04-03 11:47:35,,,,0,,,
Android,55414507,2,,55372259,2019,,2,,"<p>You have to use <a href=""https://github.com/googlesamples/android-viewpager2/blob/master/app/src/main/java/com/example/androidx/viewpager2/TabLayoutMediator.java"" rel=""nofollow noreferrer"">this</a> <code>TabLayoutMediator</code> that mimics <code>tabLayout.setupWithViewPager()</code> and sets up the <code>ViewPager2</code> with <code>Tablayout</code>. Otherwise you will have to write your own adapter that will combine both parties. </p>
",557179,,,,,2019-03-29 9:42:44,,,,1,,,
Android,55467587,2,,55467059,2019,,2,,"<p>Previously developers used to to build multiple APKs to target different API versions &amp; device types.</p>

<p>But with Android App Bundle I just upload the single artifact with all of our application resources and the tooling takes care of what needs to be built and delivered to the app user base. I was able to reduce app size by nearly between 60% to 70%.</p>

<p>Nowadays many famous apps like Airbnb , LinkedIn, Twitter use dynamic app delivery for its users. </p>

<p><a href=""https://joebirch.co/2018/08/23/exploring-the-android-app-bundle/"" rel=""nofollow noreferrer"">Have a look at this amazing post on Dynamic App Delivery by Joe Birch</a></p>

<p><a href=""https://developer.android.com/guide/app-bundle"" rel=""nofollow noreferrer"">Android developer guide on Dynamic App Delivery</a></p>

<p><a href=""https://www.raywenderlich.com/9043-android-app-bundles-getting-started"" rel=""nofollow noreferrer"">How to use App Bundles to reduce the size of the app </a></p>

<p><a href=""https://github.com/googlesamples/android-dynamic-features"" rel=""nofollow noreferrer"">Google Samples Android Dynamic Feature Modules</a></p>
",9652613,,9652613,,2019-04-02 6:55:42,2019-04-02 6:55:42,,,,2,,,
Android,55649243,2,,53313044,2019,,2,,"<p>Based on this class on google sample <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/PagingWithNetworkSample/app/src/main/java/com/android/example/paging/pagingwithnetwork/reddit/repository/NetworkState.kt"" rel=""nofollow noreferrer"">Network State</a>. Modify it to handle empty content in initialLoad.</p>

<pre><code>@Suppress(""DataClassPrivateConstructor"")
data class NetworkState private constructor(
    val status: Status,
    val msg: String? = null
) {

    enum class Status {
        RUNNING,
        SUCCESS_LOADED, // New
        SUCCESS_EMPTY, // New
        FAILED
    }

    companion object {

        val EMPTY = NetworkState(Status.SUCCESS_EMPTY) // New
        val LOADED = NetworkState(Status.SUCCESS_LOADED) // New
        val LOADING = NetworkState(Status.RUNNING)
        fun error(msg: String?) = NetworkState(Status.FAILED, msg)
    }
}
</code></pre>

<p>Usage as follow:</p>

<pre><code>class DataSource: PageKeyedDataSource&lt;Long, Item&gt;() {

    val initialLoad: MutableLiveData&lt;NetworkState&gt; = MutableLiveData()

    override fun loadInitial(params: LoadInitialParams&lt;Long&gt;, callback: LoadInitialCallback&lt;Long, Item&gt;) {
        initialLoad.postValue(NetworkState.LOADING)
        apiCallSource.subscribe({ items -&gt;
            if (items.isEmpty()) {
                initialLoad.postValue(NetworkState.EMPTY)
            } else {
                initialLoad.postValue(NetworkState.LOADED)
            }
        }, { error -&gt; 
            // handle error
        })
    }
}
</code></pre>

<p>And this is how the activity handle it:</p>

<pre><code>class activity: AppCompatActivity() {

    val viewModel = // init viewmodel

    override fun onCreate(savedInstanceState: Bundle?) {
        viewModel.refreshState.observe(this, Observer { networkState -&gt;
            if (it == NetworkState.LOADING) {
                // Show loading
            } else {
                // Hide loading

                if (it.status == NetworkState.Status.SUCCESS_EMPTY) {
                    // Show empty state for initial load
                }
            }
        }
    }
}
</code></pre>

<p>For more details on how to connect <em>DataSource</em> with <em>Activity</em>, see this <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/PagingWithNetworkSample"" rel=""nofollow noreferrer"">sample</a></p>
",7658268,,,,,2019-04-12 10:06:06,,,,0,,,
Android,44575660,2,,44570359,2017,,2,,"<blockquote>
  <p>My assumption is no (on the grounds that not all Things platforms will have a suitable GPU)</p>
</blockquote>

<p>I'll be more specific when I know what a <em>""suitable"" GPU</em> is, but if there are some of those (see below) among the supported <a href=""https://developer.android.com/things/hardware/developer-kits.html#hardware_platforms"" rel=""nofollow noreferrer"">hardware platformes</a> the assumption isn't correct.</p>

<blockquote>
  <p>but I was hoping perhaps that people had tried it or otherwise know whether RenderScript Compute works on Android Things.</p>
</blockquote>

<p>I tried <a href=""https://github.com/googlesamples/android-RenderScriptIntrinsic/"" rel=""nofollow noreferrer"">this sample</a> on a <em>RPi3</em> and it worked, although the question if the computation was parallelized across both CPU <strong>and GPU</strong> left open.</p>

<p><a href=""https://i.stack.imgur.com/liDJx.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/liDJx.jpg"" alt=""enter image description here""></a></p>
",3290339,,3290339,,2017-06-18 17:03:23,2017-06-18 17:03:23,,,,2,,,
Android,35553445,2,,32834746,2016,,2,,"<p>If the ""onSurfaceTextureSizeChanged(SurfaceTexture texture, int width, int height)"" is fired, call the following method:</p>

<pre><code>/**
     * Configures the necessary {@link android.graphics.Matrix} transformation to `mTextureView`.
     * This method should be called after the camera preview size is determined in
     * setUpCameraOutputs and also the size of `mTextureView` is fixed.
     *
     * @param viewWidth  The width of `mTextureView`
     * @param viewHeight The height of `mTextureView`
     */
    private void configureTransform(int viewWidth, int viewHeight) {
        Activity activity = getActivity();
        if (null == mTextureView || null == mPreviewSize || null == activity) {
            return;
        }
        int rotation = activity.getWindowManager().getDefaultDisplay().getRotation();
        Matrix matrix = new Matrix();
        RectF viewRect = new RectF(0, 0, viewWidth, viewHeight);
        RectF bufferRect = new RectF(0, 0, mPreviewSize.getHeight(), mPreviewSize.getWidth());
        float centerX = viewRect.centerX();
        float centerY = viewRect.centerY();
        if (Surface.ROTATION_90 == rotation || Surface.ROTATION_270 == rotation) {
            bufferRect.offset(centerX - bufferRect.centerX(), centerY - bufferRect.centerY());
            matrix.setRectToRect(viewRect, bufferRect, Matrix.ScaleToFit.FILL);
            float scale = Math.max(
                    (float) viewHeight / mPreviewSize.getHeight(),
                    (float) viewWidth / mPreviewSize.getWidth());
            matrix.postScale(scale, scale, centerX, centerY);
            matrix.postRotate(90 * (rotation - 2), centerX, centerY);
        } else if (Surface.ROTATION_180 == rotation) {
            matrix.postRotate(180, centerX, centerY);
        }
        mTextureView.setTransform(matrix);
    }
</code></pre>

<p>For more info, have a look to the following file:
<a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java</a></p>
",4291264,,,,,2016-02-22 12:17:20,,,,4,,,
Android,35523650,2,,35523627,2016,,2,,"<blockquote>
  <p>Why do I get this error?</p>
</blockquote>

<p>Presumably, the layout that inflated into <code>view</code> has a <code>TextureView</code>, not an <code>AutoFitTextureView</code>.</p>

<blockquote>
  <p>And why does it work fine in Google's Sample App?</p>
</blockquote>

<p>Because Google's sample app's <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/res/layout/fragment_camera2_basic.xml"" rel=""nofollow"">layout</a> has an <code>AutoFitTextureView</code>.</p>
",115145,,,,,2016-02-20 13:04:42,,,,1,,,
Android,39469923,2,,39469763,2016,,2,,"<p>You can create refer to google's <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow"">android-architecture</a> .According to me you should create three different presenter for your each view and then bind them.you should check <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp/"" rel=""nofollow"">this part</a> of sample,which has very basic design</p>
",3833705,,,,,2016-09-13 12:18:35,,,,0,,,
Android,39480018,2,,39480017,2016,,2,,"<p>Here is the code you need:</p>

<pre><code>ComponentName componentName =
  new ComponentName(getApplicationContext(), MyService.class);
</code></pre>

<p>I actually wrote a sample that demonstrates how to do this on GitHub <a href=""https://github.com/googlesamples/android-WatchFace"" rel=""nofollow"">here</a>.</p>

<p>The class the does the work is <a href=""http://%20https://github.com/googlesamples/android-WatchFace/blob/master/Wearable/src/main/java/com/example/android/wearable/watchface/provider/UpdateComplicationDataService.java"" rel=""nofollow"">UpdateComplicationDataService.java class</a>.</p>

<p>Here is the full code excerpt if interested:</p>

<pre><code>ComponentName componentName =
  new ComponentName(getApplicationContext(), MyService.class);

ProviderUpdateRequester providerUpdateRequester = 
  new ProviderUpdateRequester(getApplicationContext(), componentName);

// This method only updates the specific complication id, you could
// update all with providerUpdateRequester.requestUpdateAll().
providerUpdateRequester.requestUpdate(complicationId);
</code></pre>
",1631197,,1631197,,2016-10-10 18:12:13,2016-10-10 18:12:13,,,,0,,,
Android,21413175,2,,21406246,2014,,2,,"<p>Probably you have animation inside your activity, which blocks espresso execution. You have to disable it - see  <a href=""https://github.com/googlesamples/android-testing/tree/master/ui/espresso/BasicSample"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-testing/tree/master/ui/espresso/BasicSample</a></p>
",2980933,,2980933,,2019-01-09 12:42:18,2019-01-09 12:42:18,,,,3,,,
Android,31035452,2,,30994528,2015,,2,,"<p>How does the bluetooth device read the position? I'm assuming some code constantly monitors the playbackstate to get the current position?</p>

<p>To prevent you from constantly having to update the <code>PlaybackState</code>, the playback state contains the necessary values to compute the approximate current position of the stream.</p>

<p>When setting the playbackState, you provide values such as speed, current position and the update time. </p>

<p><code>PlaybackState.Buider.setState(int state, long position, float playbackSpeed, long updateTime)</code></p>

<p>Given the assertion that unless the playback state changes and it is currently playing, you can calculate the currentPosition from the lastUpdate time, speed and the previousPosition.</p>

<pre><code>long timeDelta = SystemClock.elapsedRealtime() - lastPlaybackState.getLastPositionUpdateTime();
long currentPosition = (int) timeDelta * lastPlaybackState.getPlaybackSpeed();
</code></pre>

<p>You can take a look at how uAmp does this in <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer/blob/f3154af7ac972ee9b7b1fd32ca3c935e02268a18/mobile/src/main/java/com/example/android/uamp/ui/FullScreenPlayerActivity.java#L398-L413"" rel=""nofollow noreferrer"">FullScreenPlayerActivity</a>. The specific method is <code>updateProgress(..)</code></p>
",80221,,990745,,2019-02-14 3:23:32,2019-02-14 3:23:32,,,,4,,,
Android,41032503,2,,41032145,2016,,2,,"<p>If you look at the contents of the <code>music.json</code>, the <code>source</code> and <code>image</code> paths are relative paths, stored in the <code>http://storage.googleapis.com/automotive-media</code> directory.</p>

<p>In your case, there is no <code>https://api.myjson.com/bins/Jazz_In_Paris.mp3</code>, so any attempt to play that track will obviously fail. As seen in <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer/blob/39fa286313639b5ce069e755c18762aaa1f59ea9/mobile/src/main/java/com/example/android/uamp/model/RemoteJSONSource.java#L93"" rel=""nofollow noreferrer"">the source code</a>, the relative source and image name logic is only used when the values do not start with <code>http</code>.</p>

<p>You can temporarily prefix all of the sources and images with <code>http://storage.googleapis.com/automotive-media/</code> to reuse the existing values until you host your own content.</p>
",1676363,,,,,2016-12-08 5:40:18,,,,8,,,
Android,50739616,2,,50507202,2018,,2,,"<p>At time of writing, Slices are not displayed anywhere in the Android system or Google apps yet as per the <a href=""https://developer.android.com/guide/slices/"" rel=""nofollow noreferrer"">docs</a>:</p>

<blockquote>
  <p>Slices will start appearing soon for users, but you can start building today.</p>
</blockquote>

<p>As you noted, the actual implementation to render/display a Slice, called <a href=""https://developer.android.com/reference/androidx/slice/widget/SliceView"" rel=""nofollow noreferrer""><code>SliceView</code></a>, is already available, however no apps have actually implemented this yet (at least not to my knowledge). You could implement this yourself but there isn't much point if you only intend to display your own Slices (you could just use regular views then). The main use-case to implement <code>SliceView</code> yourself would be if you were a launcher type app and were looking to display Slices from other applications.</p>

<p>The <a href=""https://github.com/googlesamples/android-SliceViewer"" rel=""nofollow noreferrer"">Slice Viewer app</a> demonstrates an implementation of <code>SliceView</code> but its main purpose for now is to let you build and test your Slices in preparation for other apps implementing <code>SliceView</code>.</p>

<p>At Google I/O 2018, in the <a href=""https://youtu.be/a7IVH5aNwwc?t=2m53s"" rel=""nofollow noreferrer"">Slices session</a>, it was announced that the first system area for Slices to show will be Google Search to enhance app predictions. In the session, it was announced that this will be launching some time in 2018.</p>
",268156,,,,,2018-06-07 11:04:18,,,,0,,,
Android,41931372,2,,36293866,2017,,2,,"<p>You can check UIMode like in google example:</p>

<p><a href=""https://github.com/googlesamples/android-UniversalMusicPlayer/blob/master/mobile/src/main/java/com/example/android/uamp/utils/CarHelper.java#L106"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-UniversalMusicPlayer/blob/master/mobile/src/main/java/com/example/android/uamp/utils/CarHelper.java#L106</a></p>

<pre><code>public static boolean isCarUiMode(Context c) {
    UiModeManager uiModeManager = (UiModeManager) c.getSystemService(Context.UI_MODE_SERVICE);
    if (uiModeManager.getCurrentModeType() == Configuration.UI_MODE_TYPE_CAR) {
        LogHelper.d(TAG, ""Running in Car mode"");
        return true;
    } else {
        LogHelper.d(TAG, ""Running on a non-Car mode"");
        return false;
    }
}
</code></pre>

<p>Then before run alarm check <code>isCarUiMode</code> result</p>
",959086,,,,,2017-01-30 8:14:59,,,,2,,,
Android,51397179,2,,51396910,2018,,2,,"<p>I gone through your GitHub project link, your CSV file has more than <strong>22K</strong> entries.
Other thing is you are <strong>not reading data from Room</strong>, you have just inserted those objects and updating adapter with ArrayList.</p>

<p>First of all you should <strong>not</strong> perform this <strong>CPU Intensive</strong> operation on main thread, This is <strong>blocking UI</strong> for long time. [Just tested code on my device]</p>

<p>Use worker thread or any other threading mechanism like <strong>RxJava</strong> to perform this <strong>CPU Intensive</strong> operation. Then return result to <strong>Main Thread</strong> and update your UI.</p>

<p>Taking this further, considering 22K entries you should consider using <strong>pagination</strong> provided with Android architecture libraries</p>

<p>Perform <code>private void readData()</code> operation on another thread, Create List of your objects and insert to database all at once. using another dao method like below</p>

<pre><code>@Insert
void insertAll(List&lt;BabyName&gt; babyNames);
</code></pre>

<p>Observe <code>List&lt;BabyName&gt;</code> in Activity using <code>database.babyDao().getAllData();</code> method and in that observer set BabyNames to adapter as <code>adapter.setBabyNames(names)</code> and call <code>adapter.notifyDatasetChanged()</code> </p>

<p>This is how you can observe LiveData - example <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/BasicSample/app/src/main/java/com/example/android/persistence/ui/ProductFragment.java"" rel=""nofollow noreferrer"">ProductFragment</a></p>

<pre><code>// Observe product data
model.getObservableProduct().observe(this, new Observer&lt;ProductEntity&gt;() {
    @Override
    public void onChanged(@Nullable ProductEntity productEntity) {
        model.setProduct(productEntity);
       // Update adapter data and notify dataset changed here
    }
});
</code></pre>

<p>If you want to follow <strong>Android Architecture Guidelines</strong> considering you are using <strong>Room</strong> Database, go with MVVM architecture. You will start task for CSV Processing once the app is open and UI will observe for database changes using <code>LiveData</code>. So when your csv processing is completed and Database is updated you can view all those in your UI</p>

<p>Refer this for Pagination support - <a href=""https://developer.android.com/topic/libraries/architecture/paging/"" rel=""nofollow noreferrer"">Android Pagination</a></p>

<p><strong>Edit 1</strong></p>

<p>I have create <a href=""https://github.com/vivekpanchal/BabyApp/pull/2"" rel=""nofollow noreferrer"">Pull Request</a> on <strong>GitHub</strong> which fixes this problem.
Now app is running as expected.</p>

<p><strong>It fixes following issues</strong></p>

<ul>
<li><strong>CSV Processing</strong> In Background</li>
<li>BabyDao with required <strong>LiveData</strong> Methods</li>
<li>MainActivity with Observing Baby List</li>
<li>MainActivity processing CSV in background if already not inserted</li>
<li>RecyclerView working properly - <strong>LayoutManager bug fixed</strong></li>
</ul>
",3624647,,3624647,,2018-07-18 12:01:58,2018-07-18 12:01:58,,,,17,,,
Android,51380884,2,,51380811,2018,,2,,"<p>If you use LiveData to retrieve data from Room, it's executed in worker thread. For, other queries you can use Executors and Repository pattern. You can check out this page for <a href=""https://developer.android.com/jetpack/docs/guide"" rel=""nofollow noreferrer"">guide to app architecture</a>.</p>

<p>You can check out this <a href=""https://github.com/googlesamples/android-architecture-components/"" rel=""nofollow noreferrer"">link</a> for Rx and other architecture component samples.</p>

<hr>

<p>Analysis note by the question author:</p>

<p>In the sample they <strong>use a <code>Completable</code> to wrap the <em>Room</em> delete call</strong> and then <strong>schedule it onto the <code>io()</code> scheduler</strong>, reacting to the empty complete and any errors. That specific code can be found <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/BasicRxJavaSampleKotlin/app/src/main/java/com/example/android/observability"" rel=""nofollow noreferrer"">here</a>.</p>
",5457853,,3231532,,2018-07-17 16:07:09,2018-07-17 16:07:09,,,,6,,,
Android,50781937,2,,50781163,2018,,2,,"<p>There are a number of problems here:</p>

<pre><code>class MainTripsFragmentAdapter @Inject constructor(
    fragmentManager: FragmentManager,
    private val mainCurrentTripsFragment: MainCurrentTripsFragment,
    private val mainHistoryTripsFragment: MainHistoryTripsFragment
) : FragmentPagerAdapter(fragmentManager) {

    override fun getItem(position: Int) = when (position) { 
        0 -&gt; mainCurrentTripsFragment  //no!!
        1 -&gt; mainHistoryTripsFragment
        else -&gt; mainCurrentTripsFragment
    }

    override fun getCount() = 2
}
</code></pre>

<p><code>getItem</code> in the <code>PagerAdapter</code> means ""create item"". When you use a <code>PagerAdapter</code> you delegate <em>creation</em> of Fragments to the adapter. You shouldn't write code to cache and store the Fragments, this is the job of the <code>FragmentManager</code>.</p>

<p>Instead your <code>FragmentAdapter</code> should look something like this:</p>

<pre><code>    override fun getItem(position: Int) = when (position) { 
        0 -&gt; MainCurrentTripsFragment.instantiate()
        1 -&gt; MainHistoryTripsFragment.instantiate()
        else -&gt; MainCurrentTripsFragment.instantiate()
    }
</code></pre>

<p>Where the <code>instantiate</code> method is declared inside a companion object inside your Fragments:</p>

<pre><code>class MainCurrentTripsFragment: Fragment() {
    companion object {
        @JvmStatic
        fun instantiate(args: Bundle?) {
            val frag = MainCurrentTripsFragment()
            frag.arguments = args
        }
    }
}
</code></pre>

<p>That is the standard idiom for using a <code>PagerAdapter</code> with Fragments in Android. You shouldn't provide PagerAdapters or Fragments as dependencies in your object graph. In fact, many Android classes controlled by the OS like <code>FragmentManager</code>, <code>Activity</code>, <code>Fragment</code>, <code>BroadcastReceiver</code>, <code>Service</code> are not good candidates for becoming dependencies in your object graph using Dagger 2.</p>

<p>A common error when starting to use Dagger 2 is try and inject <em>everything</em>, as if newing up anything manually is wrong. This is just not possible in Android. </p>

<p>Please take the Fragments, the FragmentManager, the PagerAdapter etc out of your modules. Don't try to provide these or bind these using Dagger 2. Then use Dagger 2 to inject domain layer or data layer objects like repositories, Retrofit services etc. If you get stuck, you can always post another question. </p>

<p>And have a look at the offical <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-dagger/"" rel=""nofollow noreferrer"">Google Android Architecture blueprints</a>. Your solution should, ideally, look something like them.</p>
",5241933,,,,,2018-06-10 8:36:05,,,,3,,,
Android,32489015,2,,31743477,2015,,2,,"<p>I guess there is some issue with the permissions.</p>

<p>Use the new <a href=""https://developer.android.com/reference/android/media/projection/MediaProjection.html"" rel=""nofollow"">MediaProjection</a> apis to do it.</p>

<p>Refer <a href=""https://github.com/googlesamples/android-ScreenCapture"" rel=""nofollow"">https://github.com/googlesamples/android-ScreenCapture</a> for source code.</p>
",2027272,,,,,2015-09-09 20:56:02,,,,1,,,
Android,50793392,2,,50792908,2018,,2,,"<p>I would suggest you use the <strong>native feature <code>PdfRenderer</code> instead of <code>webview</code>.</strong><br>
From android <strong>OS 5.0(lollipop)</strong> on-wards you can use this class to show pdf's within the app. If you want to support OS lower than that you can use a library as there is no native support</p>

<p>Read more about the class from the docs <a href=""https://developer.android.com/reference/android/graphics/pdf/PdfRenderer"" rel=""nofollow noreferrer"">here</a>, you can  also refer this <a href=""https://github.com/googlesamples/android-PdfRendererBasic"" rel=""nofollow noreferrer"">example</a> provided by google</p>
",3114032,,,,,2018-06-11 8:29:14,,,,4,,,
Android,51487480,2,,51486170,2018,,2,,"<p>1) </p>

<p>As you did not provide code details about your Service and its related components, this answer is abstract.</p>

<p>To separate the ViewModel from the Service, create an Activity that will access the ViewModel; you will have an Activity, a ViewModel, and a Service. </p>

<p>This means that you will create a bound Service (<a href=""https://developer.android.com/guide/components/services#CreatingBoundService"" rel=""nofollow noreferrer"">https://developer.android.com/guide/components/services#CreatingBoundService</a> and, more specifically, <a href=""https://developer.android.com/guide/components/bound-services"" rel=""nofollow noreferrer"">https://developer.android.com/guide/components/bound-services</a>). A bound Service provides an interface that an Activity can use to interact with the Service. </p>

<p>A good example of a bound Service is Google's Location Update Service: <a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationUpdatesForegroundService/app/src/main/java/com/google/android/gms/location/sample/locationupdatesforegroundservice"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-location/tree/master/LocationUpdatesForegroundService/app/src/main/java/com/google/android/gms/location/sample/locationupdatesforegroundservice</a> </p>

<p>In your instance, the Service will be tasked with originating data and transmitting that data to the Activity which will then provide that data to the ViewModel. </p>

<p>To transmit data from the Service to the ViewModel, I suggest using Greenrobot's EventBus (<a href=""http://greenrobot.org/eventbus/documentation/how-to-get-started/"" rel=""nofollow noreferrer"">http://greenrobot.org/eventbus/documentation/how-to-get-started/</a>). </p>

<p>Whenever you want the Service to transmit data to the ViewModel, a single-line call to EventBus in your Service will transmit the data to the Subscribers in the Activity that are listening for that type of data. </p>

<p>The Activity, upon receipt of data, will then update the ViewModel with the data. Any Observers registered with the ViewModel will then receive the latest data. </p>

<p>2) </p>

<p>The Separation of Concerns principle militates in favor of separating the ViewModel from the repository. The ViewModel should be concerned with only keeping state of data that will be displayed to the user, and keeping such state across configuration changes. </p>
",8083653,,,,,2018-07-23 21:31:55,,,,4,,,
Android,42013567,2,,41985926,2017,,2,,"<p>Note that the aspect ratio of the camera sensor and the aspect ratio of your device screen most often do not match - sensors are generally 4:3 ratio and screens are generally around 16:9.  Though there is wide variation in both.</p>

<p>Since the aspect ratios don't match, you'll need to decide if you're going to have black bars, or zoom the camera preview so that it fills the screen (but some part of the image is not visible).</p>

<p>In any case, to have the preview be full-screen, you just need to have the TextureView (or SurfaceView) be the entire layout. So basically, edit this layout file: <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/res/layout/fragment_camera2_basic.xml"" rel=""nofollow noreferrer"">fragment_camera2_basic.xml</a>, remove all the other Views, and remove references to them in the source code.  Or change them to be on top of the TextureView, not next to - this is all standard Android UI layout stuff. And you'll need to make your Activity be <a href=""https://developer.android.com/training/system-ui/immersive.html"" rel=""nofollow noreferrer"">full-screen</a>.</p>

<p>By default, AutoFillTextureView will try to maintain aspect ratio, so it'll produce black bars.  If you want no black bars, then you'll have to change AutoFillTextureView, which is not straightforward, and I won't get into it here.</p>
",1344825,,,,,2017-02-02 22:32:25,,,,3,,,
Android,51479126,2,,51478764,2018,,2,,"<p>you can use <a href=""https://developer.android.com/reference/android/arch/paging/PagedList.BoundaryCallback"" rel=""nofollow noreferrer"">BoundryCallback</a> to get notified on certain points of your DB list</p>

<p>here is a sample from Google <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/PagingWithNetworkSample"" rel=""nofollow noreferrer"">link</a></p>

<p>here is my playground with paging <a href=""https://github.com/worldsnas/PagingLibraryTest"" rel=""nofollow noreferrer"">link</a></p>
",7295690,,,,,2018-07-23 12:43:19,,,,2,,,
Android,32391107,2,,10418792,2015,,2,,"<p>I know I am quite late to answer here but all the folks looking for an updated answer to this question, no more a need to depend on third party apis, Google offers <a href=""http://android-developers.blogspot.in/2015/08/barcode-detection-in-google-play.html"" rel=""nofollow"">Barcode Scanning APIs</a> via Google Play Services 7.8. Refer to <a href=""https://search-codelabs.appspot.com/codelabs/bar-codes#1"" rel=""nofollow"">CodeLabs</a>, <a href=""https://developers.google.com/vision/?utm_campaign=barcode-815&amp;utm_source=dac&amp;utm_medium=blog"" rel=""nofollow"">Documentation</a>, <a href=""https://github.com/googlesamples/android-vision"" rel=""nofollow"">Github Sample</a> for more information.</p>
",4002813,,,,,2015-09-04 6:04:03,,,,0,,,
Android,33411810,2,,31853912,2015,,2,,"<p>From the application's manifest I can see that you try create a Profile Owner Application, no a Device Owner Application. It is because Device Owner Application's receiver should contain the following intent filter:</p>

<pre><code>&lt;intent-filter&gt;
    &lt;action android:name=""android.app.action.PROFILE_PROVISIONING_COMPLETE""/&gt;
&lt;/intent-filter&gt;
</code></pre>

<p>Not like in yours manifest:</p>

<pre><code>&lt;intent-filter&gt;
    &lt;action android:name=""android.app.action.DEVICE_ADMIN_ENABLED""/&gt;
&lt;/intent-filter&gt;
</code></pre>

<p>Your intent filter is appropriate for Profile Owner App, no a Device Owner App.
Please see <a href=""https://github.com/googlesamples/android-DeviceOwner"" rel=""nofollow"">Android Device Owner Sample</a> source code.</p>

<p>Because <a href=""http://developer.android.com/reference/android/app/admin/DevicePolicyManager.html#setLockTaskPackages%28android.content.ComponentName,%20java.lang.String[]%29"" rel=""nofollow"">setLockTaskPackages</a> method is allowed only for Device Owner Application, no a Profile Owner Application, you get an exception.</p>

<p>How do you check against if your application is a Device Owner Application, you should use <a href=""http://developer.android.com/reference/android/app/admin/DevicePolicyManager.html#isDeviceOwnerApp%28java.lang.String%29"" rel=""nofollow"">isDeviceOwnerApp</a> method.</p>
",3204044,,3204044,,2015-10-29 10:49:59,2015-10-29 10:49:59,,,,0,,,
Android,42123925,2,,42081701,2017,,2,,"<p>The camera2 sample application HdrViewfinder, which uses RenderScript to do some image processing, may be helpful for how to connect up the camera and RenderScript: <a href=""https://github.com/googlesamples/android-HdrViewfinder"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-HdrViewfinder</a></p>

<p>It doesn't do YUV->RGB conversion, IIRC, and I think yuv2rgb.rs may be intended for a different YUV colorspace than what the camera produces (due to backwards-compatibility concerns - it existed before camera2).  But it gets you to the point where you can write your own RS script to apply to camera data.</p>
",1344825,,,,,2017-02-08 21:26:54,,,,1,,,
Android,32661823,2,,32655324,2015,,2,,"<p>Yes, the API doesn't include a GUI component.  However, the sample apps have example GUIs for displaying the camera preview, tracking the barcode, and drawing overlay graphics.</p>

<p>I would guess that the reason that you aren't detecting anything with the sample app is that the vision libraries weren't successfully downloaded to your device.  This will happen if the device is in a ""low storage"" state.  We recently updated the samples to check for this condition and provide feedback to the user.  For example:</p>

<pre><code>    // Check for low storage.  If there is low storage, the native library will not be
    // downloaded, so detection will not become operational.
    IntentFilter lowstorageFilter = new IntentFilter(Intent.ACTION_DEVICE_STORAGE_LOW);
    boolean hasLowStorage = registerReceiver(null, lowstorageFilter) != null;

    if (hasLowStorage) {
        Toast.makeText(this, R.string.low_storage_error, Toast.LENGTH_LONG).show();
        Log.w(TAG, getString(R.string.low_storage_error));
    }
</code></pre>

<p><a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/photo-demo/app/src/main/java/com/google/android/gms/samples/vision/face/photo/PhotoViewerActivity.java#L91"" rel=""nofollow"">https://github.com/googlesamples/android-vision/blob/master/visionSamples/photo-demo/app/src/main/java/com/google/android/gms/samples/vision/face/photo/PhotoViewerActivity.java#L91</a></p>

<p>This is something that we are working on improving.</p>
",5231007,,,,,2015-09-18 22:15:09,,,,1,,,
Android,32659445,2,,32654087,2015,,2,,"<p>The issue was that the camera API does not support opening the camera multiple times.  Turning on the flashlight and starting CameraSource both require separate calls to open the camera.  If you try to do both, the one that is requested last will fail.</p>

<p>The good news is that we recently open sourced the CameraSource implementation.  This new version includes an option for turning on the flashlight, which should fix this issue.  See here:</p>

<p><a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java"" rel=""nofollow"">https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java</a></p>
",5231007,,5231007,,2015-09-28 16:42:18,2015-09-28 16:42:18,,,,1,,,
Android,50946325,2,,50946050,2018,,2,,"<p>From the <a href=""https://developer.android.com/topic/libraries/architecture/viewmodel"" rel=""nofollow noreferrer"">documentation</a>:</p>

<blockquote>
  <p>Caution: A ViewModel must never reference a view, Lifecycle, or any class that may hold a reference to the activity context.</p>
</blockquote>

<p>This is because a <code>ViewModel</code> survives configuration changes. Let's say you have an activity and you rotate the device. The activity is killed and a new instance is created. If you put views in the viewmodel, then the activity won't be garbage collected because the views hold the reference to the previous activity. Also, the views themselves will be recreated but you're keeping old views in the viewmodel. Basically don't put any views, context, activity in the viewmodel.</p>

<p>If you want a simple example showcasing MVVM with repository pattern then you can check out my sample repo on gitlab: <a href=""https://gitlab.com/rafid059/music-api-test"" rel=""nofollow noreferrer"">https://gitlab.com/rafid059/music-api-test</a></p>

<p>There's also a great sample from google: <a href=""https://github.com/googlesamples/android-sunflower/"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-sunflower/</a></p>
",2235972,,,,,2018-06-20 10:43:24,,,,7,,,
Android,32661898,2,,32652175,2015,,2,,"<p>I would guess that the reason that you aren't detecting anything with the sample app is that the vision libraries weren't successfully downloaded to your device. This will happen if the device is in a ""low storage"" state. We recently updated the samples to check for this condition and provide feedback to the user. For example:</p>

<pre><code>// Check for low storage.  If there is low storage, the native library will not be
// downloaded, so detection will not become operational.
IntentFilter lowstorageFilter = new IntentFilter(Intent.ACTION_DEVICE_STORAGE_LOW);
boolean hasLowStorage = registerReceiver(null, lowstorageFilter) != null;

if (hasLowStorage) {
    Toast.makeText(this, R.string.low_storage_error, Toast.LENGTH_LONG).show();
    Log.w(TAG, getString(R.string.low_storage_error));
}
</code></pre>

<p><a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/photo-demo/app/src/main/java/com/google/android/gms/samples/vision/face/photo/PhotoViewerActivity.java#L91"" rel=""nofollow"">https://github.com/googlesamples/android-vision/blob/master/visionSamples/photo-demo/app/src/main/java/com/google/android/gms/samples/vision/face/photo/PhotoViewerActivity.java#L91</a></p>

<p>If you are encountering this, freeing up space on the device should do the trick.</p>
",5231007,,,,,2015-09-18 22:23:01,,,,0,,,
Android,47666873,2,,47603099,2017,,2,,"<p>Please have a look at:<br>
<a href=""https://github.com/googlesamples/android-instant-apps/tree/master/install-api"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-instant-apps/tree/master/install-api</a><br>
and<br>
<a href=""https://github.com/googlesamples/android-instant-apps/blob/master/install-api/features/install/src/main/java/com/instantappsamples/feature/install/InstallApiActivity.kt"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-instant-apps/blob/master/install-api/features/install/src/main/java/com/instantappsamples/feature/install/InstallApiActivity.kt</a></p>

<ul>
<li>This sample app demonstrates how to use the <a href=""https://developer.android.com/topic/instant-apps/reference.html#showinstallprompt"" rel=""nofollow noreferrer"">Install API</a>. The API triggers the Intent to install the app on device.</li>
<li>The call also accepts the Intent, which is triggered after the installation is complete.</li>
<li>The sample also shows the correct structure to implement <code>showInstallPrompt</code> method along with <code>postInstallIntent</code>. </li>
</ul>

<p>Refer the sample code snippet:</p>

<pre><code>private val postInstallIntent = Intent(Intent.ACTION_VIEW,
        Uri.parse(""https://install-api.instantappsample.com/"")).
        addCategory(Intent.CATEGORY_BROWSABLE).
        putExtras(Bundle().apply {
            putString(""The key to"", ""sending data via intent"")
        })

override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    setContentView(R.layout.activity_install)

    val isInstantApp = InstantApps.isInstantApp(this)

    findViewById&lt;Button&gt;(R.id.start_installation).apply {
        isEnabled = isInstantApp
        // Show the installation prompt only for an instant app.
        if (isInstantApp) {
            setOnClickListener {
                InstantApps.showInstallPrompt(this@InstallApiActivity,
                        postInstallIntent,
                        REQUEST_CODE,
                        REFERRER)
            } }
    } }
</code></pre>
",8782189,,,,,2017-12-06 4:38:32,,,,3,,,
Android,38648310,2,,37643801,2016,,2,,"<p>From my experience it has to do with file that you are passing to the PdfRenderer.
If you are able to open that same file with other app/library from exactly same directory that you are saving that means you should be able to open it with PdfRenderer.</p>

<p>Official issue here <a href=""https://github.com/googlesamples/android-PdfRendererBasic/issues/1"" rel=""nofollow"">https://github.com/googlesamples/android-PdfRendererBasic/issues/1</a> was closed, and original reporter hasn't reopened it. </p>

<p>Can you try exactly same sample with your own PDF file? If it doesn't work, than there is a bug with library, and I would suggest you to reopen that issue with file that doesn't work. Also feel free to try other files with your solution(very simple files).</p>
",464328,,,,,2016-07-28 23:29:00,,,,0,,,
Android,29425821,2,,27529852,2015,,2,,"<p>Before using any feature of Camera2 API, first you need to check if that feature is supported by device or not. For your case, you can check like below:</p>

<pre><code>// CONTROL_AE_STATE can be null on some devices
                        Integer aeState = result.get(CaptureResult.CONTROL_AE_STATE);
                        if (aeState == null ||
                                aeState == CaptureResult.CONTROL_AE_STATE_CONVERGED) {
                            mState = STATE_WAITING_NON_PRECAPTURE;
                            captureStillPicture();
                        } else {
                            runPrecaptureSequence();
                        }
</code></pre>

<p>For more details you can check official sample code from Google here: <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Basic</a> </p>
",631803,,,,,2015-04-03 3:32:35,,,,0,,,
Android,29503138,2,,27443221,2015,,2,,"<p>Here's a good implementation of WearableListView using v1.1.0 of the wearable support library that still supports the proper zooming behavior (directly from the official Google samples):</p>

<p><a href=""https://github.com/googlesamples/android-WatchFace/blob/master/Wearable/src/main/java/com/example/android/wearable/watchface/DigitalWatchFaceWearableConfigActivity.java#L249"" rel=""nofollow"">android-WatchFace/DigitalWatchFaceWearableConfigActivity.java</a></p>
",268156,,,,,2015-04-07 23:24:16,,,,1,,,
Android,47655405,2,,46537927,2017,,2,,"<p>A very good question, and it is not as simple as it seems!
<a href=""https://github.com/googlesamples/android-architecture/tree/dev-todo-mvvm-live/"" rel=""nofollow noreferrer"">You can see an example from Google team here</a>.</p>

<p>They solved the problem with the help of the factory.
There it is pass (of course) the Application context (not Activity context !). </p>

<p>A small problem - and so much boilerplate code!</p>

<p>My decision:</p>

<pre><code>public class MainApplication extends Application {
public void onCreate() {
AppSharedPref sharedPref = AppSharedPref.getInstance(PreferenceManager.getDefaultSharedPreferences(this));
AppRepository.getInstance(sharedPref);
</code></pre>

<p>Repository is  singltone (a lot of code is skipped for brevity):</p>

<pre><code>public class AppRepository implements AppDataSource {
public static AppRepository getInstance(@NonNull AppSharedPref sharedPref) {
if (INSTANCE == null) {
   INSTANCE = new AppRepository(sharedPref);
}
return INSTANCE;
}
</code></pre>

<p>In ViewModel call:</p>

<pre><code>public class MyViewModel extends AndroidViewModel {

// constructor
public MyViewModel(@NonNull Application application) {
   repository = AppRepository.getInstance(.....);
}
</code></pre>
",345810,,345810,,2017-12-05 17:37:47,2017-12-05 17:37:47,,,,0,,,
Android,47656500,2,,47507583,2017,,2,,"<p>i just saw the google example and how they did it, and i realized that you need to fix:</p>

<pre><code>@Module public class DatabaseModule {

@Provides
@Singleton
MyDatabase provideMyDatabase(Application context) {
    return Room.databaseBuilder(context.getApplicationContext(), MyDatabase.class, ""MyDB"").build();
}

@Provides
@Singleton
MyDao provideMyDao(MyDatabase myDatabase) {
    return myDatabase.myDao();
}
</code></pre>

<p>}</p>

<p>to check if database already exist, with this code:</p>

<pre><code>  /**
 * Check whether the database already exists and expose it via {@link #getDatabaseCreated()}
 */
private void updateDatabaseCreated(final Context context) {
    if (context.getDatabasePath(DATABASE_NAME).exists()) {
        setDatabaseCreated();
    }
}

private void setDatabaseCreated(){
    mIsDatabaseCreated.postValue(true);
}


public LiveData&lt;Boolean&gt; getDatabaseCreated() {
    return mIsDatabaseCreated;
}
</code></pre>

<p>anyway here is a link to github google sample about this:
<a href=""https://github.com/googlesamples/android-architecture-components/blob/master/BasicSample/app/src/main/java/com/example/android/persistence/db/AppDatabase.java"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components/blob/master/BasicSample/app/src/main/java/com/example/android/persistence/db/AppDatabase.java</a></p>
",4637826,,4637826,,2017-12-05 15:05:03,2017-12-05 15:05:03,,,,0,,,
Android,41395944,2,,41287535,2016,,2,,"<p>A Good example goes here so check it out, worth reading as this includes more than 1 way to include MVP architecture.
<a href=""https://github.com/googlesamples/android-architecture/blob/master/README.md"" rel=""nofollow noreferrer"">MVP Google Samples</a></p>
",4517450,,,,,2016-12-30 12:01:41,,,,1,,,
Android,39675899,2,,39671277,2016,,2,,"<p>Since you are running the app on Android 6.0, implementing Runtime permission is mandatory for <code>WRITE_EXTERNAL_STORAGE</code>. This is the reason behind the crash.</p>

<p>Here are few links that get you started with implementing Runtime Permissions <a href=""https://developer.android.com/training/permissions/index.html"" rel=""nofollow"">https://developer.android.com/training/permissions/index.html</a>
<a href=""https://github.com/googlesamples/android-RuntimePermissions"" rel=""nofollow"">https://github.com/googlesamples/android-RuntimePermissions</a>
<a href=""http://www.androidwarriors.com/2016/05/runtime-permissions-android-m-example.html"" rel=""nofollow"">http://www.androidwarriors.com/2016/05/runtime-permissions-android-m-example.html</a></p>
",4402462,,,,,2016-09-24 11:37:41,,,,4,,,
Android,39677931,2,,39576566,2016,,2,,"<p>I would suggest you to check out <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow"">Android Architecture Blueprints</a> repository. It is provided by Google, you have example of MVP and MVVM architecture implementations with/without Dagger2 and RxJava. You can also check out <a href=""http://hannesdorfmann.com/mosby/mvp/"" rel=""nofollow"">Mosby</a> library. If you are beginner it is IMO better to learn on some proven implementation than overenginer your solution.</p>
",3734457,,3734457,,2016-09-24 15:37:41,2016-09-24 15:37:41,,,,0,,,
Android,44178673,2,,44157859,2017,,2,,"<p><em>It's not a bug, it's a feature</em></p>

<p>The problems that would emerge from allowing mixing scopes in the manner you have suggested are similar to <a href=""https://stackoverflow.com/questions/225929/what-is-the-exact-problem-with-multiple-inheritance#226056"">the problems of multiple inheritance in OO languages</a>.</p>

<p>Consider the following component structure (the diamond problem):</p>

<pre><code>    A
   / \
  B   C
   \ /
    D
</code></pre>

<p><code>D</code> sub-component of both <code>B</code> and <code>C</code>. Since siblings <code>B</code> and <code>C</code> are independent of each other they are free to expose an arbitrary dependency <code>Foo</code> to sub-components. Assume that <code>Foo</code> is required for the module set in component <code>D</code>. Which <code>Foo</code> should <code>D</code> now use? The one from <code>B</code> or the one from <code>C</code>? </p>

<p>The situation is even more complex if you allow scopes. A scope in Dagger 2 is for marking lifecycle. In other words, it says ""I will maintain a reference to these bindings at this point"". Hence, your <code>@Singleton</code> scoped bindings must be grouped in a Component for which you maintain a reference at the level of your Application subclass. It does nothing, for instance, to initialise a <code>@AppScoped</code> Component as a local variable within a method or as a field of an Activity - it will be discarded with the method stack or destroyed when the Activity is destroyed. </p>

<p>Returning to the above example, assume that <code>B</code> and <code>C</code> have different scopes. The <code>Foo</code> bound in <code>B</code> is <code>@BScoped</code>. So it should only live as long as <code>B</code>. But it is possible for <code>D</code> to get the <code>@CScoped Foo</code> from <code>C</code>. So we can no longer ascertain that <code>B</code> is exposing a <code>@BScoped Foo</code> to its subcomponent - we have allowed the possibility of <code>Foo</code> to escape its scope. This is in addition to the processing problems presented by not restricting ourselves to directed acyclic graphs. As you are probably aware, many problems in computer science become easier to solve once we disallow cycles.</p>

<p>The fact that you get the error message for your set up only when you add scope annotations and it disappears when you remove them is not indicative that there is a bug in Dagger 2 or something lacking. It simply means that without scope annotations you only have the illusion of a Component hierarchy since all Components are effectively equal. Again, even if you think you have somehow made a diamond through combination of non-scoped and scoped components, it will not truly be a diamond because there is no real hierarchy in the non-scoped Components.</p>

<p>Your proposed architecture is well-intentioned in that you are trying to achieve separation of <em>layers</em>. However, Dagger 2 components are for grouping <em>lifecycle</em>, not layers. To illustrate, most Android apps will have app-scoped dependencies, such as a <code>GSON</code>, a <code>SharedPreferences</code> etc. These dependencies that live and die together and last for the whole lifecycle of your app are normally bound in the module set for a <code>@Singleton</code> component. You could also call it <code>@PerApp</code> or <code>@AppScoped</code> - it really doesn't matter as long as you retain a reference to the component in your sub-class of <code>Application</code>.</p>

<p>Underneath this in your <a href=""https://en.wikipedia.org/wiki/Directed_acyclic_graph"" rel=""nofollow noreferrer"">directed acyclic graph</a> (the DAG in DAGger) you can put what you want. Some people make a <code>@UserScope</code> which lasts just as long as the app has a signed-in user. Others skip this step and move straight to <code>@PerActivity</code> or <code>@ActivityScoped</code> components. The module sets for the <code>@PerActivity</code> components should bind members that have the lifecycle of a single activity e.g., the Activity's Context.</p>

<p>At this point it's better to group by <em>functionality</em> like in the <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-dagger/"" rel=""nofollow noreferrer"">Google Android Architecture Blueprint</a>. Although your components at this level will inject dependencies from different layers (the model layer and the presentation layer) these can be separated by <a href=""https://google.github.io/dagger//testing.html"" rel=""nofollow noreferrer"">judicious use of modules</a>. Additionally, you can group the members will be in the same Java package which means you can use access modifiers to fulfil Effective Java Item 13: Minimise the accessibility of classes and members.</p>
",5241933,,5241933,,2017-05-29 2:52:45,2017-05-29 2:52:45,,,,3,,,
Android,34600758,2,,34596710,2016,,2,,"<p>In Play Services 8+, no resolution (confirmation UI) is required to save a Google Sign-In to the user's Google Account using the Smart Lock API (i.e., the credential's type is set to <code>IdentityProviders.GOOGLE</code> and the email address matches one signed in on the device, and the user has not disabled saving in settings). Note that you cannot set both an account type and password on a credential object when saving with the API -- if a user has a password simply store that for authentication purposes.</p>

<p>An API call with a credential of this type should save automatically and be available immediately, so just check that this credential is available when making a <code>Auth.CredentialsApi.request()</code> using a  <code>CredentialRequest</code> built with <code>.setAccountTypes(IdentityProviders.GOOGLE)</code> and that the saved credential is shown on <a href=""https://passwords.google.com"" rel=""nofollow"">passwords.google.com</a> and has ""with Google"" in place of a password.</p>

<p>When retrieving this credential, you can use it to know that you've got a user with an existing account and they signed in with Google previously. You then can customize the auth UI for this returning user, or simply trigger a Google Sign-In flow for the user automatically and give them a returning user experience when the app starts using the <code>Auth.GoogleSignInApi.silentSignIn()</code> method in the latest version of the Google Sign-In library. Here's a full <a href=""https://github.com/googlesamples/android-credentials/blob/master/credentials-signin/app/src/main/java/com/google/example/credentialssignin/MainActivity.java"" rel=""nofollow"">code example</a>.</p>
",5001016,,5001016,,2016-01-15 13:51:41,2016-01-15 13:51:41,,,,5,,,
Android,34601789,2,,34597234,2016,,2,,"<p>You can check out the <a href=""https://developers.google.com/places/android-api/placepicker"" rel=""nofollow"">PlacePicker API</a> that's native uses the <a href=""https://developers.google.com/places/android-api/"" rel=""nofollow"">Google Places API for Android</a>. For samples, Google provided it in their <a href=""https://github.com/googlesamples/android-play-places"" rel=""nofollow"">googlesamples</a> github repo, you can check those out!</p>
",5637321,,,,,2016-01-04 23:33:14,,,,0,,,
Android,34619093,2,,20210565,2016,,2,,"<p>use the fusion API that google developer have developed with fusion of GPS Sensor,Magnetometer,Accelerometer also using Wifi or cell location to calculate or estimate the location. It is also able to give location updates also inside the building accurately.</p>

<pre><code>package com.example.ashis.gpslocation;

import android.app.Activity;
import android.location.Location;
import android.os.Bundle;
import android.support.v7.app.ActionBarActivity;
import android.support.v7.app.AppCompatActivity;
import android.util.Log;
import android.widget.TextView;
import android.widget.Toast;

import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.GooglePlayServicesUtil;
import com.google.android.gms.common.api.GoogleApiClient;
import com.google.android.gms.common.api.GoogleApiClient.ConnectionCallbacks;
import com.google.android.gms.common.api.GoogleApiClient.OnConnectionFailedListener;
import com.google.android.gms.location.LocationListener;
import com.google.android.gms.location.LocationRequest;
import com.google.android.gms.location.LocationServices;

import java.util.concurrent.Executors;
import java.util.concurrent.TimeUnit;

/**
 * Location sample.
 *
 * Demonstrates use of the Location API to retrieve the last known location for a device.
 * This sample uses Google Play services (GoogleApiClient) but does not need to authenticate a user.
 * See https://github.com/googlesamples/android-google-accounts/tree/master/QuickStart if you are
 * also using APIs that need authentication.
 */

public class MainActivity extends Activity implements LocationListener,
        GoogleApiClient.ConnectionCallbacks,
        GoogleApiClient.OnConnectionFailedListener {

    private static final long ONE_MIN = 500;
    private static final long TWO_MIN = 500;
    private static final long FIVE_MIN = 500;
    private static final long POLLING_FREQ = 1000 * 20;
    private static final long FASTEST_UPDATE_FREQ = 1000 * 5;
    private static final float MIN_ACCURACY = 1.0f;
    private static final float MIN_LAST_READ_ACCURACY = 1;

    private LocationRequest mLocationRequest;
    private Location mBestReading;
TextView tv;
    private GoogleApiClient mGoogleApiClient;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        if (!servicesAvailable()) {
            finish();
        }

        setContentView(R.layout.activity_main);
tv= (TextView) findViewById(R.id.tv1);
        mLocationRequest = LocationRequest.create();
        mLocationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);
        mLocationRequest.setInterval(POLLING_FREQ);
        mLocationRequest.setFastestInterval(FASTEST_UPDATE_FREQ);

        mGoogleApiClient = new GoogleApiClient.Builder(this)
                .addApi(LocationServices.API)
                .addConnectionCallbacks(this)
                .addOnConnectionFailedListener(this)
                .build();


        if (mGoogleApiClient != null) {
            mGoogleApiClient.connect();
        }
    }

    @Override
    protected void onResume() {
        super.onResume();

        if (mGoogleApiClient != null) {
            mGoogleApiClient.connect();
        }
    }

    @Override
    protected void onPause() {d
        super.onPause();

        if (mGoogleApiClient != null &amp;&amp; mGoogleApiClient.isConnected()) {
            mGoogleApiClient.disconnect();
        }
    }


        tv.setText(location + """");
        // Determine whether new location is better than current best
        // estimate
        if (null == mBestReading || location.getAccuracy() &lt; mBestReading.getAccuracy()) {
            mBestReading = location;


            if (mBestReading.getAccuracy() &lt; MIN_ACCURACY) {
                LocationServices.FusedLocationApi.removeLocationUpdates(mGoogleApiClient, this);
            }
        }
    }

    @Override
    public void onConnected(Bundle dataBundle) {
        // Get first reading. Get additional location updates if necessary
        if (servicesAvailable()) {

            // Get best last location measurement meeting criteria
            mBestReading = bestLastKnownLocation(MIN_LAST_READ_ACCURACY, FIVE_MIN);

            if (null == mBestReading
                    || mBestReading.getAccuracy() &gt; MIN_LAST_READ_ACCURACY
                    || mBestReading.getTime() &lt; System.currentTimeMillis() - TWO_MIN) {

                LocationServices.FusedLocationApi.requestLocationUpdates(mGoogleApiClient, mLocationRequest, this);

               //Schedule a runnable to unregister location listeners

                    @Override
                    public void run() {
                        LocationServices.FusedLocationApi.removeLocationUpdates(mGoogleApiClient, MainActivity.this);

                    }

                }, ONE_MIN, TimeUnit.MILLISECONDS);

            }

        }
    }

    @Override
    public void onConnectionSuspended(int i) {

    }


    private Location bestLastKnownLocation(float minAccuracy, long minTime) {
        Location bestResult = null;
        float bestAccuracy = Float.MAX_VALUE;
        long bestTime = Long.MIN_VALUE;

        // Get the best most recent location currently available
        Location mCurrentLocation = LocationServices.FusedLocationApi.getLastLocation(mGoogleApiClient);
        //tv.setText(mCurrentLocation+"""");
        if (mCurrentLocation != null) {
            float accuracy = mCurrentLocation.getAccuracy();
            long time = mCurrentLocation.getTime();

            if (accuracy &lt; bestAccuracy) {
                bestResult = mCurrentLocation;
                bestAccuracy = accuracy;
                bestTime = time;
            }
        }

        // Return best reading or null
        if (bestAccuracy &gt; minAccuracy || bestTime &lt; minTime) {
            return null;
        }
        else {
            return bestResult;
        }
    }

    @Override
    public void onConnectionFailed(ConnectionResult connectionResult) {

    }

    private boolean servicesAvailable() {
        int resultCode = GooglePlayServicesUtil.isGooglePlayServicesAvailable(this);

        if (ConnectionResult.SUCCESS == resultCode) {
            return true;
        }
        else {
            GooglePlayServicesUtil.getErrorDialog(resultCode, this, 0).show();
            return false;
        }
    }
}
</code></pre>
",3231608,,,,,2016-01-05 18:46:41,,,,2,,,
Android,43468945,2,,43468627,2017,,2,,"<p>I would suggest you to take a look at this GitHub <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture</a> made by Google developers. It provides samples to build Android apps using different architectural concepts and tools. Hope it helps.</p>
",7871886,,,,,2017-04-18 9:52:22,,,,0,,,
Android,34630087,2,,34629012,2016,,2,,"<p>I recommend that you use <code>GoogleApiClient</code> because LocationClient is no longer supported in newer versions of play-services they removed it starting Google Play Services 6.5.87 if I am not mistaken. Here is the link for the <a href=""https://github.com/googlesamples/android-play-location/tree/master/BasicLocationSample"" rel=""nofollow"">example implementation</a>. If you really want to use LocationClient, which I do not recommend, you can use an older version of the <code>play-services</code></p>
",5653411,,,,,2016-01-06 9:51:46,,,,0,,,
Android,48389346,2,,48355277,2018,,2,,"<p>As mentioned by keyboardsurfer, your dependency assumption is in the right direction.</p>

<ul>
<li><p><strong>Base</strong> is at the root and acts like a library shared by all the
non-base feature modules, so its shared dependencies should be set with
<code>api</code> so that modules that depend on it can also access them. (though, base doesn't have to act only like a library, it can
also be a feature APK itself)</p></li>
<li><p><strong>Features</strong>, as an instant app, each one extends out to the end as its own APK, so there's no reason it should be leaking its dependencies to any other modules and therefore dependencies should be set with <code>implementation</code> here.</p></li>
</ul>

<p>Within the <a href=""https://github.com/googlesamples/android-instant-apps"" rel=""nofollow noreferrer"">Google Samples</a>, the cookie-api and install-api are some samples that more clearly demonstrate the <a href=""https://developer.android.com/studio/build/gradle-plugin-3-0-0-migration.html#new_configurations"" rel=""nofollow noreferrer"">dependency configuration usage</a> as how I explained above.</p>
",6668797,,6668797,,2018-09-21 21:28:06,2018-09-21 21:28:06,,,,0,,,
Android,52154674,2,,51797699,2018,,2,,"<p>Apps targeting Android 7.0+ do not receive CONNECTIVITY_ACTION broadcasts if they register to receive them in their manifest, and processes that depend on this broadcast will not start.</p>

<p>So, if you want to do some work when internet connection is available. You can use <a href=""https://developer.android.com/topic/performance/background-optimization#sched-jobs"" rel=""nofollow noreferrer"">Job scheduler</a> or <a href=""https://developer.android.com/topic/libraries/architecture/workmanager/"" rel=""nofollow noreferrer"">work manager</a>.</p>

<p>For example, here is sample code for job scheduler.</p>

<pre><code>public static final int MY_BACKGROUND_JOB = 0;
...
public static void scheduleJob(Context context) {
  JobScheduler js =
      (JobScheduler) context.getSystemService(Context.JOB_SCHEDULER_SERVICE);
  JobInfo job = new JobInfo.Builder(
    MY_BACKGROUND_JOB,
    new ComponentName(context, MyJobService.class))
      .setRequiredNetworkType(JobInfo.NETWORK_TYPE_UNMETERED)
      .setRequiresCharging(true)
      .build();
  js.schedule(job);
}
</code></pre>

<p>When the conditions for your job are met, your app receives a callback to run the onStartJob() method in the specified JobService.class</p>

<p><a href=""https://github.com/googlesamples/android-jobscheduler"" rel=""nofollow noreferrer"">Android JobScheduler Sample</a></p>

<p>Also, registering broadcasts in the activity's onCreate and unregistering it in onDestroy will not work for your case as you will not receive the broadcast after the app is killed.</p>
",6393514,,6393514,,2018-09-05 1:37:41,2018-09-05 1:37:41,,,,1,,,
Android,48439022,2,,48438754,2018,,2,,"<p>The <code>Presenter</code> acts as the bridge or the middle man between <code>View</code> and <code>Model</code>, so <strong>it must be called on the View</strong>. </p>

<p><code>onActivityResult</code> will be as is on your <code>fragment</code>. and then, if you need to save the result from the scan, that's the time you need to call the <code>presenter</code>.</p>

<blockquote>
  <p>A presenter typically hosts business logic associated with a particular feature, and the corresponding view handles the Android UI work. The view contains almost no logic; it converts the presenter's commands to UI actions, and listens for user actions, which are then passed to the presenter.</p>
</blockquote>

<p><em>Reference: <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp/"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture/tree/todo-mvp/</a></em></p>

<p>You might be mistaken the <code>onActivityResult</code> is where the business logic is, <strong>it is not</strong>. That's why you need to pass it to the <code>presenter</code> when you get the result so the presenter will process (business logic) it and then give it to your repository that will save it.</p>
",9038584,,9038584,,2018-01-25 9:03:46,2018-01-25 9:03:46,,,,5,,,
Android,41674292,2,,41660420,2017,,2,,"<p>To explain it simple, if you want to call a Java function from C++, you should implement a jni Callback.</p>

<p>You could follow the hello-jniCallback project from this <a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow noreferrer"">android ndk examples repository</a>.</p>

<p>Most of the examples are written in C rather than in C++, so you should do some changes.
For example those functions in C like:</p>

<p><code>FindClass(env, someString)</code></p>

<p>In C++ you should use: </p>

<p><code>env-&gt;FindClass(someString)</code> </p>
",7086415,,7086415,,2017-01-16 10:45:38,2017-01-16 10:45:38,,,,7,,,
Android,41679756,2,,3320534,2017,,2,,"<p>Here is a dedicated project for <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">Android Architecture blueprints</a> with well documented source codes. All of them are based on the MVP pattern with several twists. Also check the <a href=""https://github.com/googlesamples/android-architecture/wiki/Samples-at-a-glance"" rel=""nofollow noreferrer"">comparison</a> of the various solutions based on lines-of-code, testability, cost of learning, their support for increasing data complexity. It depends on the particularly developed app and the context (time to market, developers, future plans, etc.) which blueprint fits best.</p>
",189849,,,,,2017-01-16 15:30:34,,,,0,,,
Android,41561262,2,,41462665,2017,,2,,"<p>You need to implement your own <code>VideoRecorder</code> so that you can modify as per your own requirement.</p>

<p>set video resolution,</p>

<pre><code>mVideoRecorder.setVideoSize(720, 480);
</code></pre>

<p>set Max Duration,</p>

<pre><code>mVideoRecorder.setMaxDuration(30000);
</code></pre>

<p>Try this</p>

<p><code>videorecord.xml</code></p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;LinearLayout xmlns:android=""http://schemas.android.com/apk/res/android""
    android:layout_width=""fill_parent""
    android:layout_height=""fill_parent""
    android:orientation=""vertical""&gt;

    &lt;VideoView
    android:id=""@+id/videoRecorder""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent"" /&gt;
&lt;/LinearLayout&gt;
</code></pre>

<p><code>VideoRecorderExample.java</code></p>

<pre><code>import android.app.Activity;
import android.hardware.Camera;
import android.media.MediaRecorder;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.view.MotionEvent;
import android.view.SurfaceHolder;
import android.widget.VideoView;


public class VideoRecorderExample extends Activity implements
    SurfaceHolder.Callback {
    public static final String IS_FRONT_CAMERA = ""FRONT_CAMERA"";
    private static final String TAG = VideoRecorderExample.class.getSimpleName();
    private Boolean mRecording = false;
    private Boolean isFrontCamera = false;
    private VideoView mVideoView = null;
    private MediaRecorder mVideoRecorder = null;
    private Camera mCamera;

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.videorecord);
    mVideoView = (VideoView) findViewById(R.id.videoRecorder);

    isFrontCamera = getIntent().getExtras().getBoolean(IS_FRONT_CAMERA, true);

    final SurfaceHolder holder = mVideoView.getHolder();
    holder.addCallback(this);
    holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
    try {
        startRecording(holder);
    } catch (Exception e) {
        Log.e(TAG, e.toString());
        e.printStackTrace();
    }
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,
                           int height) {
    Log.e(TAG, ""W x H = "" + width + ""x"" + height);
    }

    private void stopRecording() throws Exception {
    mRecording = false;
    if (mVideoRecorder != null) {
        mVideoRecorder.stop();
        mVideoRecorder.release();
        mVideoRecorder = null;
    }
    if (mCamera != null) {
        mCamera.reconnect();
        mCamera.stopPreview();
        mCamera.release();
        mCamera = null;
    }
    }

    @Override
    protected void onDestroy() {
    try {
        stopRecording();
    } catch (Exception e) {
        Log.e(TAG, e.toString());
        e.printStackTrace();
    }
    super.onDestroy();

    }

    private void startRecording(SurfaceHolder holder) throws Exception {
    if (mVideoRecorder != null) {
        mVideoRecorder.stop();
        mVideoRecorder.release();
        mVideoRecorder = null;
    }
    if (mCamera != null) {
        mCamera.reconnect();
        mCamera.stopPreview();
        mCamera.release();
        mCamera = null;
    }

    String uniqueOutFile = Environment.getExternalStorageDirectory().toString() + ""/"" + System.currentTimeMillis() + "".3gp"";

    try {
        if (isFrontCamera) {
            mCamera = Camera.open(1);
        } else {
            mCamera = Camera.open();
        }

        mCamera.setPreviewDisplay(holder);
        Camera.Parameters parameters = mCamera.getParameters();
        parameters.setPreviewSize(640, 480);
        mCamera.setParameters(parameters);
        mCamera.startPreview();
        mCamera.unlock();

        mVideoRecorder = new MediaRecorder();
        mVideoRecorder.setCamera(mCamera);
        mVideoRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
        mVideoRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        mVideoRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
        mVideoRecorder.setVideoSize(720, 480);
        mVideoRecorder.setVideoFrameRate(20);
        mVideoRecorder.setVideoEncodingBitRate(3000000);
        mVideoRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264);
        mVideoRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_WB);
        mVideoRecorder.setAudioSamplingRate(16000);
        mVideoRecorder.setMaxDuration(30000);
        mVideoRecorder.setPreviewDisplay(holder.getSurface());
        mVideoRecorder.setOutputFile(uniqueOutFile);
        mVideoRecorder.prepare();
        mVideoRecorder.start();
        mRecording = true;
    } catch (Exception e) {
        Log.e(TAG, e.toString());
        e.printStackTrace();
    }
    }
}
</code></pre>

<p>For camera2.</p>

<p>Try this code it will supported with camera2.</p>

<pre><code>public class Camera2VideoFragment extends Fragment
    implements View.OnClickListener, FragmentCompat.OnRequestPermissionsResultCallback {

    private static final int SENSOR_ORIENTATION_DEFAULT_DEGREES = 90;
    private static final int SENSOR_ORIENTATION_INVERSE_DEGREES = 270;
    private static final SparseIntArray DEFAULT_ORIENTATIONS = new SparseIntArray();
    private static final SparseIntArray INVERSE_ORIENTATIONS = new SparseIntArray();

    private static final String TAG = ""Camera2VideoFragment"";
    private static final int REQUEST_VIDEO_PERMISSIONS = 1;
    private static final String FRAGMENT_DIALOG = ""dialog"";

    private static final String[] VIDEO_PERMISSIONS = {
        Manifest.permission.CAMERA,
        Manifest.permission.RECORD_AUDIO,
    };

    static {
    DEFAULT_ORIENTATIONS.append(Surface.ROTATION_0, 90);
    DEFAULT_ORIENTATIONS.append(Surface.ROTATION_90, 0);
    DEFAULT_ORIENTATIONS.append(Surface.ROTATION_180, 270);
    DEFAULT_ORIENTATIONS.append(Surface.ROTATION_270, 180);
    }

    static {
    INVERSE_ORIENTATIONS.append(Surface.ROTATION_0, 270);
    INVERSE_ORIENTATIONS.append(Surface.ROTATION_90, 180);
    INVERSE_ORIENTATIONS.append(Surface.ROTATION_180, 90);
    INVERSE_ORIENTATIONS.append(Surface.ROTATION_270, 0);
    }

    /**
     * An {@link AutoFitTextureView} for camera preview.
     */
    private AutoFitTextureView mTextureView;

    private Button mButtonVideo;

    private CameraDevice mCameraDevice;

    private CameraCaptureSession mPreviewSession;


    private TextureView.SurfaceTextureListener mSurfaceTextureListener
        = new TextureView.SurfaceTextureListener() {

    @Override
    public void onSurfaceTextureAvailable(SurfaceTexture surfaceTexture,
                                          int width, int height) {
        openCamera(width, height);
    }

    @Override
    public void onSurfaceTextureSizeChanged(SurfaceTexture surfaceTexture,
                                            int width, int height) {
        configureTransform(width, height);
    }

    @Override
    public boolean onSurfaceTextureDestroyed(SurfaceTexture surfaceTexture) {
        return true;
    }

    @Override
    public void onSurfaceTextureUpdated(SurfaceTexture surfaceTexture) {
    }

    };

    private Size mPreviewSize;


    private Size mVideoSize;

    private MediaRecorder mMediaRecorder;

    private boolean mIsRecordingVideo;

    private HandlerThread mBackgroundThread;

    private Handler mBackgroundHandler;

    /**
     * A {@link Semaphore} to prevent the app from exiting before closing the camera.
     */
    private Semaphore mCameraOpenCloseLock = new Semaphore(1);

    /**
     * {@link CameraDevice.StateCallback} is called when {@link CameraDevice} changes its status.
     */
    private CameraDevice.StateCallback mStateCallback = new CameraDevice.StateCallback() {

    @Override
    public void onOpened(CameraDevice cameraDevice) {
        mCameraDevice = cameraDevice;
        startPreview();
        mCameraOpenCloseLock.release();
        if (null != mTextureView) {
            configureTransform(mTextureView.getWidth(), mTextureView.getHeight());
        }
    }

    @Override
    public void onDisconnected(CameraDevice cameraDevice) {
        mCameraOpenCloseLock.release();
        cameraDevice.close();
        mCameraDevice = null;
    }

    @Override
    public void onError(CameraDevice cameraDevice, int error) {
        mCameraOpenCloseLock.release();
        cameraDevice.close();
        mCameraDevice = null;
        Activity activity = getActivity();
        if (null != activity) {
            activity.finish();
        }
    }

    };
    private Integer mSensorOrientation;
    private String mNextVideoAbsolutePath;
    private CaptureRequest.Builder mPreviewBuilder;
    private Surface mRecorderSurface;

    public static Camera2VideoFragment newInstance() {
    return new Camera2VideoFragment();
    }

    /**
     * In this sample, we choose a video size with 3x4 aspect ratio. Also, we don't use sizes
     * larger than 1080p, since MediaRecorder cannot handle such a high-resolution video.
     *
     * @param choices The list of available sizes
     * @return The video size
     */
    private static Size chooseVideoSize(Size[] choices) {
    for (Size size : choices) {
        if (size.getWidth() == size.getHeight() * 4 / 3 &amp;&amp; size.getWidth() &lt;= 1080) {
            return size;
        }
    }
    Log.e(TAG, ""Couldn't find any suitable video size"");
    return choices[choices.length - 1];
    }

    /**
     * Given {@code choices} of {@code Size}s supported by a camera, chooses the smallest one whose
     * width and height are at least as large as the respective requested values, and whose aspect
     * ratio matches with the specified value.
     *
     * @param choices     The list of sizes that the camera supports for the intended output class
     * @param width       The minimum desired width
     * @param height      The minimum desired height
     * @param aspectRatio The aspect ratio
     * @return The optimal {@code Size}, or an arbitrary one if none were big enough
     */
    private static Size chooseOptimalSize(Size[] choices, int width, int height, Size aspectRatio) {
    // Collect the supported resolutions that are at least as big as the preview Surface
    List&lt;Size&gt; bigEnough = new ArrayList&lt;Size&gt;();
    int w = aspectRatio.getWidth();
    int h = aspectRatio.getHeight();
    for (Size option : choices) {
        if (option.getHeight() == option.getWidth() * h / w &amp;&amp;
                option.getWidth() &gt;= width &amp;&amp; option.getHeight() &gt;= height) {
            bigEnough.add(option);
        }
    }

    // Pick the smallest of those, assuming we found any
    if (bigEnough.size() &gt; 0) {
        return Collections.min(bigEnough, new CompareSizesByArea());
    } else {
        Log.e(TAG, ""Couldn't find any suitable preview size"");
        return choices[0];
    }
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {
    return inflater.inflate(R.layout.fragment_camera2_video, container, false);
    }

    @Override
    public void onViewCreated(final View view, Bundle savedInstanceState) {
    mTextureView = (AutoFitTextureView) view.findViewById(R.id.texture);
    mButtonVideo = (Button) view.findViewById(R.id.video);
    mButtonVideo.setOnClickListener(this);
    view.findViewById(R.id.info).setOnClickListener(this);
    }

    @Override
    public void onResume() {
    super.onResume();
    startBackgroundThread();
    if (mTextureView.isAvailable()) {
        openCamera(mTextureView.getWidth(), mTextureView.getHeight());
    } else {
        mTextureView.setSurfaceTextureListener(mSurfaceTextureListener);
    }
    }

    @Override
    public void onPause() {
    closeCamera();
    stopBackgroundThread();
    super.onPause();
    }

    @Override
    public void onClick(View view) {
    switch (view.getId()) {
        case R.id.video: {
            if (mIsRecordingVideo) {
                stopRecordingVideo();
            } else {
                startRecordingVideo();
            }
            break;
        }
        case R.id.info: {
            Activity activity = getActivity();
            if (null != activity) {
                new AlertDialog.Builder(activity)
                        .setMessage(R.string.intro_message)
                        .setPositiveButton(android.R.string.ok, null)
                        .show();
            }
            break;
        }
    }
    }

    /**
     * Starts a background thread and its {@link Handler}.
     */
    private void startBackgroundThread() {
    mBackgroundThread = new HandlerThread(""CameraBackground"");
    mBackgroundThread.start();
    mBackgroundHandler = new Handler(mBackgroundThread.getLooper());
    }

    /**
     * Stops the background thread and its {@link Handler}.
     */
    private void stopBackgroundThread() {
    mBackgroundThread.quitSafely();
    try {
        mBackgroundThread.join();
        mBackgroundThread = null;
        mBackgroundHandler = null;
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
    }

    /**
     * Gets whether you should show UI with rationale for requesting permissions.
     *
     * @param permissions The permissions your app wants to request.
     * @return Whether you can show permission rationale UI.
     */
    private boolean shouldShowRequestPermissionRationale(String[] permissions) {
    for (String permission : permissions) {
        if (FragmentCompat.shouldShowRequestPermissionRationale(this, permission)) {
            return true;
        }
    }
    return false;
    }

    /**
     * Requests permissions needed for recording video.
     */
    private void requestVideoPermissions() {
    if (shouldShowRequestPermissionRationale(VIDEO_PERMISSIONS)) {
        new ConfirmationDialog().show(getChildFragmentManager(), FRAGMENT_DIALOG);
    } else {
        FragmentCompat.requestPermissions(this, VIDEO_PERMISSIONS, REQUEST_VIDEO_PERMISSIONS);
    }
    }

    @Override
    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions,
                                       @NonNull int[] grantResults) {
    Log.d(TAG, ""onRequestPermissionsResult"");
    if (requestCode == REQUEST_VIDEO_PERMISSIONS) {
        if (grantResults.length == VIDEO_PERMISSIONS.length) {
            for (int result : grantResults) {
                if (result != PackageManager.PERMISSION_GRANTED) {
                    ErrorDialog.newInstance(getString(R.string.permission_request))
                            .show(getChildFragmentManager(), FRAGMENT_DIALOG);
                    break;
                }
            }
        } else {
            ErrorDialog.newInstance(getString(R.string.permission_request))
                    .show(getChildFragmentManager(), FRAGMENT_DIALOG);
        }
    } else {
        super.onRequestPermissionsResult(requestCode, permissions, grantResults);
    }
    }

    private boolean hasPermissionsGranted(String[] permissions) {
    for (String permission : permissions) {
        if (ActivityCompat.checkSelfPermission(getActivity(), permission)
                != PackageManager.PERMISSION_GRANTED) {
            return false;
        }
    }
    return true;
    }

    /**
     * Tries to open a {@link CameraDevice}. The result is listened by `mStateCallback`.
     */
    private void openCamera(int width, int height) {
    if (!hasPermissionsGranted(VIDEO_PERMISSIONS)) {
        requestVideoPermissions();
        return;
    }
    final Activity activity = getActivity();
    if (null == activity || activity.isFinishing()) {
        return;
    }
    CameraManager manager = (CameraManager) activity.getSystemService(Context.CAMERA_SERVICE);
    try {
        Log.d(TAG, ""tryAcquire"");
        if (!mCameraOpenCloseLock.tryAcquire(2500, TimeUnit.MILLISECONDS)) {
            throw new RuntimeException(""Time out waiting to lock camera opening."");
        }
        String cameraId = manager.getCameraIdList()[0];

        // Choose the sizes for camera preview and video recording
        CameraCharacteristics characteristics = manager.getCameraCharacteristics(cameraId);
        StreamConfigurationMap map = characteristics
                .get(CameraCharacteristics.SCALER_STREAM_CONFIGURATION_MAP);
        mSensorOrientation = characteristics.get(CameraCharacteristics.SENSOR_ORIENTATION);
        mVideoSize = chooseVideoSize(map.getOutputSizes(MediaRecorder.class));
        mPreviewSize = chooseOptimalSize(map.getOutputSizes(SurfaceTexture.class),
                width, height, mVideoSize);

        int orientation = getResources().getConfiguration().orientation;
        if (orientation == Configuration.ORIENTATION_LANDSCAPE) {
            mTextureView.setAspectRatio(mPreviewSize.getWidth(), mPreviewSize.getHeight());
        } else {
            mTextureView.setAspectRatio(mPreviewSize.getHeight(), mPreviewSize.getWidth());
        }
        configureTransform(width, height);
        mMediaRecorder = new MediaRecorder();
        manager.openCamera(cameraId, mStateCallback, null);
    } catch (CameraAccessException e) {
        Toast.makeText(activity, ""Cannot access the camera."", Toast.LENGTH_SHORT).show();
        activity.finish();
    } catch (NullPointerException e) {
        // Currently an NPE is thrown when the Camera2API is used but not supported on the
        // device this code runs.
        ErrorDialog.newInstance(getString(R.string.camera_error))
                .show(getChildFragmentManager(), FRAGMENT_DIALOG);
    } catch (InterruptedException e) {
        throw new RuntimeException(""Interrupted while trying to lock camera opening."");
    }
    }

    private void closeCamera() {
    try {
        mCameraOpenCloseLock.acquire();
        closePreviewSession();
        if (null != mCameraDevice) {
            mCameraDevice.close();
            mCameraDevice = null;
        }
        if (null != mMediaRecorder) {
            mMediaRecorder.release();
            mMediaRecorder = null;
        }
    } catch (InterruptedException e) {
        throw new RuntimeException(""Interrupted while trying to lock camera closing."");
    } finally {
        mCameraOpenCloseLock.release();
    }
    }

    /**
     * Start the camera preview.
     */
    private void startPreview() {
    if (null == mCameraDevice || !mTextureView.isAvailable() || null == mPreviewSize) {
        return;
    }
    try {
        closePreviewSession();
        SurfaceTexture texture = mTextureView.getSurfaceTexture();
        assert texture != null;
        texture.setDefaultBufferSize(mPreviewSize.getWidth(), mPreviewSize.getHeight());
        mPreviewBuilder = mCameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_PREVIEW);

        Surface previewSurface = new Surface(texture);
        mPreviewBuilder.addTarget(previewSurface);

        mCameraDevice.createCaptureSession(Arrays.asList(previewSurface), new CameraCaptureSession.StateCallback() {

            @Override
            public void onConfigured(CameraCaptureSession cameraCaptureSession) {
                mPreviewSession = cameraCaptureSession;
                updatePreview();
            }

            @Override
            public void onConfigureFailed(CameraCaptureSession cameraCaptureSession) {
                Activity activity = getActivity();
                if (null != activity) {
                    Toast.makeText(activity, ""Failed"", Toast.LENGTH_SHORT).show();
                }
            }
        }, mBackgroundHandler);
    } catch (CameraAccessException e) {
        e.printStackTrace();
    }
    }

    /**
     * Update the camera preview. {@link #startPreview()} needs to be called in advance.
     */
    private void updatePreview() {
    if (null == mCameraDevice) {
        return;
    }
    try {
        setUpCaptureRequestBuilder(mPreviewBuilder);
        HandlerThread thread = new HandlerThread(""CameraPreview"");
        thread.start();
        mPreviewSession.setRepeatingRequest(mPreviewBuilder.build(), null, mBackgroundHandler);
    } catch (CameraAccessException e) {
        e.printStackTrace();
    }
    }

    private void setUpCaptureRequestBuilder(CaptureRequest.Builder builder) {
    builder.set(CaptureRequest.CONTROL_MODE, CameraMetadata.CONTROL_MODE_AUTO);
    }

    /**
     * Configures the necessary {@link android.graphics.Matrix} transformation to `mTextureView`.
     * This method should not to be called until the camera preview size is determined in
     * openCamera, or until the size of `mTextureView` is fixed.
     *
     * @param viewWidth  The width of `mTextureView`
     * @param viewHeight The height of `mTextureView`
     */
    private void configureTransform(int viewWidth, int viewHeight) {
    Activity activity = getActivity();
    if (null == mTextureView || null == mPreviewSize || null == activity) {
        return;
    }
    int rotation = activity.getWindowManager().getDefaultDisplay().getRotation();
    Matrix matrix = new Matrix();
    RectF viewRect = new RectF(0, 0, viewWidth, viewHeight);
    RectF bufferRect = new RectF(0, 0, mPreviewSize.getHeight(), mPreviewSize.getWidth());
    float centerX = viewRect.centerX();
    float centerY = viewRect.centerY();
    if (Surface.ROTATION_90 == rotation || Surface.ROTATION_270 == rotation) {
        bufferRect.offset(centerX - bufferRect.centerX(), centerY - bufferRect.centerY());
        matrix.setRectToRect(viewRect, bufferRect, Matrix.ScaleToFit.FILL);
        float scale = Math.max(
                (float) viewHeight / mPreviewSize.getHeight(),
                (float) viewWidth / mPreviewSize.getWidth());
        matrix.postScale(scale, scale, centerX, centerY);
        matrix.postRotate(90 * (rotation - 2), centerX, centerY);
    }
    mTextureView.setTransform(matrix);
    }

    private void setUpMediaRecorder() throws IOException {
    final Activity activity = getActivity();
    if (null == activity) {
        return;
    }
    mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.SURFACE);
    mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
    if (mNextVideoAbsolutePath == null || mNextVideoAbsolutePath.isEmpty()) {
        mNextVideoAbsolutePath = getVideoFilePath(getActivity());
    }
    mMediaRecorder.setOutputFile(mNextVideoAbsolutePath);
    mMediaRecorder.setVideoEncodingBitRate(10000000);
    mMediaRecorder.setVideoFrameRate(30);
    mMediaRecorder.setVideoSize(mVideoSize.getWidth(), mVideoSize.getHeight());
    mMediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264);
    mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);
    int rotation = activity.getWindowManager().getDefaultDisplay().getRotation();
    switch (mSensorOrientation) {
        case SENSOR_ORIENTATION_DEFAULT_DEGREES:
            mMediaRecorder.setOrientationHint(DEFAULT_ORIENTATIONS.get(rotation));
            break;
        case SENSOR_ORIENTATION_INVERSE_DEGREES:
            mMediaRecorder.setOrientationHint(INVERSE_ORIENTATIONS.get(rotation));
            break;
    }
    mMediaRecorder.prepare();
    }

    private String getVideoFilePath(Context context) {
    return context.getExternalFilesDir(null).getAbsolutePath() + ""/""
            + System.currentTimeMillis() + "".mp4"";
    }

    private void startRecordingVideo() {
    if (null == mCameraDevice || !mTextureView.isAvailable() || null == mPreviewSize) {
        return;
    }
    try {
        closePreviewSession();
        setUpMediaRecorder();
        SurfaceTexture texture = mTextureView.getSurfaceTexture();
        assert texture != null;
        texture.setDefaultBufferSize(mPreviewSize.getWidth(), mPreviewSize.getHeight());
        mPreviewBuilder = mCameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_RECORD);
        List&lt;Surface&gt; surfaces = new ArrayList&lt;&gt;();

        // Set up Surface for the camera preview
        Surface previewSurface = new Surface(texture);
        surfaces.add(previewSurface);
        mPreviewBuilder.addTarget(previewSurface);

        // Set up Surface for the MediaRecorder
        mRecorderSurface = mMediaRecorder.getSurface();
        surfaces.add(mRecorderSurface);
        mPreviewBuilder.addTarget(mRecorderSurface);

        // Start a capture session
        // Once the session starts, we can update the UI and start recording
        mCameraDevice.createCaptureSession(surfaces, new CameraCaptureSession.StateCallback() {

            @Override
            public void onConfigured(@NonNull CameraCaptureSession cameraCaptureSession) {
                mPreviewSession = cameraCaptureSession;
                updatePreview();
                getActivity().runOnUiThread(new Runnable() {
                    @Override
                    public void run() {
                        // UI
                        mButtonVideo.setText(R.string.stop);
                        mIsRecordingVideo = true;

                        // Start recording
                        mMediaRecorder.start();
                    }
                });
            }

            @Override
            public void onConfigureFailed(@NonNull CameraCaptureSession cameraCaptureSession) {
                Activity activity = getActivity();
                if (null != activity) {
                    Toast.makeText(activity, ""Failed"", Toast.LENGTH_SHORT).show();
                }
            }
        }, mBackgroundHandler);
    } catch (CameraAccessException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    }

    private void closePreviewSession() {
    if (mPreviewSession != null) {
        mPreviewSession.close();
        mPreviewSession = null;
    }
    }

    private void stopRecordingVideo() {
    // UI
    mIsRecordingVideo = false;
    mButtonVideo.setText(R.string.record);
    // Stop recording
    mMediaRecorder.stop();
    mMediaRecorder.reset();

    Activity activity = getActivity();
    if (null != activity) {
        Toast.makeText(activity, ""Video saved: "" + mNextVideoAbsolutePath,
                Toast.LENGTH_SHORT).show();
        Log.d(TAG, ""Video saved: "" + mNextVideoAbsolutePath);
    }
    mNextVideoAbsolutePath = null;
    startPreview();
    }

    /**
     * Compares two {@code Size}s based on their areas.
     */
    static class CompareSizesByArea implements Comparator&lt;Size&gt; {

    @Override
    public int compare(Size lhs, Size rhs) {
        // We cast here to ensure the multiplications won't overflow
        return Long.signum((long) lhs.getWidth() * lhs.getHeight() -
                (long) rhs.getWidth() * rhs.getHeight());
    }

    }

    public static class ErrorDialog extends DialogFragment {

    private static final String ARG_MESSAGE = ""message"";

    public static ErrorDialog newInstance(String message) {
        ErrorDialog dialog = new ErrorDialog();
        Bundle args = new Bundle();
        args.putString(ARG_MESSAGE, message);
        dialog.setArguments(args);
        return dialog;
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        final Activity activity = getActivity();
        return new AlertDialog.Builder(activity)
                .setMessage(getArguments().getString(ARG_MESSAGE))
                .setPositiveButton(android.R.string.ok, new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialogInterface, int i) {
                        activity.finish();
                    }
                })
                .create();
    }

    }

    public static class ConfirmationDialog extends DialogFragment {

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        final Fragment parent = getParentFragment();
        return new AlertDialog.Builder(getActivity())
                .setMessage(R.string.permission_request)
                .setPositiveButton(android.R.string.ok, new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        FragmentCompat.requestPermissions(parent, VIDEO_PERMISSIONS,
                                REQUEST_VIDEO_PERMISSIONS);
                    }
                })
                .setNegativeButton(android.R.string.cancel,
                        new DialogInterface.OnClickListener() {
                            @Override
                            public void onClick(DialogInterface dialog, int which) {
                                parent.getActivity().finish();
                            }
                        })
                .create();
    }

    }

}
</code></pre>

<p>Reference from: <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow noreferrer"">Camera2 Video</a></p>
",2257754,,2257754,,2017-01-10 8:29:01,2017-01-10 8:29:01,,,,5,,,
Android,32215914,2,,24729488,2015,,2,,"<p>You may try to use Java function interface:<br>
        AudioManager myAudioMgr = (AudioManager) getSystemService(Context.AUDIO_SERVICE);<br>
        nativeSampleRate  =  myAudioMgr.getProperty(AudioManager.PROPERTY_OUTPUT_SAMPLE_RATE);</p>

<p>to retrieve the hardware default sample rate on your phone, use that to create the player.<br>
   Also try to use:
        nativeSampleBufSize =myAudioMgr.getProperty(AudioManager.PROPERTY_OUTPUT_FRAMES_PER_BUFFER);  </p>

<p>to get default audio buffer size( it is in frames ) and use that for your playback.</p>

<p>You could look at the JNI sample code <a href=""https://github.com/googlesamples/android-ndk/tree/master/audio-echo"" rel=""nofollow"">audio-echo</a> if JNI is ok for you. </p>
",4496512,,,,,2015-08-25 23:52:13,,,,4,,,
Android,50258894,2,,50256122,2018,,2,,"<p>There are still steps to take to make the app available as an instant app. See <a href=""http://g.co/instantapps"" rel=""nofollow noreferrer"">http://g.co/instantapps</a></p>

<p>For a sample of a single feature module instant app <a href=""https://github.com/googlesamples/android-instant-apps/tree/master/hello-kotlin"" rel=""nofollow noreferrer"">see this sample</a>.</p>

<p>But the app size doesn't have to be reduced further.</p>
",422060,,,,,2018-05-09 17:22:12,,,,0,,,
Android,50886150,2,,50885434,2018,,2,,"<p>You can use the official <a href=""https://github.com/googlesamples/android-ndk/tree/master/hello-libs"" rel=""nofollow noreferrer"">hello-libs sample</a>.</p>

<p>In the nutshell, you use </p>

<pre><code>add_library(libexample_static)

add_library(mynativelib SHARED main_jni.cpp)
target_link_libraries(mynativelib
                      libexample_static
                      log)
</code></pre>
",192373,,,,,2018-06-16 8:10:00,,,,0,,,
Android,32216037,2,,22088854,2015,,2,,"<p>you might check out <a href=""https://github.com/googlesamples/android-ndk/tree/master/audio-echo"" rel=""nofollow"">audio-echo</a>sample, in README.md, irregularity of the callback is a factor mentioned there too. Put your audio into the platform fast audio path will improve the callback irregularity, it is platform dependent, might worth a try.</p>
",4496512,,,,,2015-08-26 0:06:59,,,,0,,,
Android,29861971,2,,29848140,2015,,2,,"<p>As per the <a href=""https://github.com/googlesamples/android-XYZTouristAttractions/issues/2"" rel=""nofollow noreferrer"">issue</a> filed on github, the problem is the path length being too long (also see <a href=""https://stackoverflow.com/questions/24875555/android-studio-wear-app-error-unable-to-open-png"">this stackoverflow</a> question for a similar problem).</p>
",268156,,-1,,2017-05-23 10:28:04,2015-04-25 6:45:12,,,,2,,,
Android,39334949,2,,39203674,2016,,2,,"<p>Once your managed product is purchased and you do not use consume, a user owns it forever. So at startup check owned products and draw UI accordingly. A very good <a href=""https://github.com/googlesamples/android-play-billing/tree/master/TrivialDrive"" rel=""nofollow"">example</a>.</p>
",5766983,,,,,2016-09-05 16:59:10,,,,0,,,
Android,53023213,2,,51438926,2018,,2,,"<p>Don't change the <code>object</code> keyword to <code>class</code>. The <a href=""https://kotlinlang.org/docs/reference/object-declarations.html#object-declarations"" rel=""nofollow noreferrer"">object declaration</a> guarantees the Singleton pattern.</p>

<p>After automatics conversion of <code>TypeConverter</code> java file to kotlin file, you should mark all inner converter functions with <a href=""https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#static-methods"" rel=""nofollow noreferrer""><code>@JvmStatic</code></a> so <em>Room</em> can use them as regular static functions.</p>

<p>Take a look at the official <a href=""https://github.com/googlesamples/android-architecture-components"" rel=""nofollow noreferrer"">Android Architecture Components samples</a>, specifically the <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/db/GithubTypeConverters.kt"" rel=""nofollow noreferrer"">GithubTypeConverters.kt</a>. Also, <a href=""https://gist.github.com/tinmegali/d4a477785f01e57066915a44543db6ed"" rel=""nofollow noreferrer"">this discussion</a> can be useful. And this is my <code>DateTypeConverter.kt</code>:</p>

<pre><code>object DateTypeConverter {

    @TypeConverter
    @JvmStatic
    fun toDate(timestamp: Long?) = timestamp?.let { Date(timestamp) }

    @TypeConverter
    @JvmStatic
    fun toTimestamp(date: Date?) = date?.time

}
</code></pre>
",4071001,,,,,2018-10-27 15:03:14,,,,1,,,
Android,48671621,2,,48671257,2018,,2,,"<p>On delete/update click you will need to update your model (your repository). The repository will emit a new <code>LiveData</code> item, the adapter will be updated and <code>DiffUtils</code> will do it's job. It will either remove or update the item.</p>

<p>For example a delete action:</p>

<ul>
<li>Set a click listener to the Delete button</li>
<li>From the listener call <code>viewModel.deleteItem(id)</code> (this is your <code>ZoneListViewModel</code>)</li>
<li>In the <code>ViewModel</code> call <code>repository.deleteItem(id)</code></li>
<li>In the repository use Room to delete the item</li>
<li>Room will emit a new value with the updated list (without the deleted item).</li>
<li>The Adapter observes this list and together with <code>DiffUtils</code> will remove the item.</li>
</ul>

<p>Here is an example from <a href=""https://github.com/googlesamples/android-architecture/tree/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/tasks"" rel=""nofollow noreferrer"">android-architecture-blueprints</a></p>
",1011435,,,,,2018-02-07 19:14:15,,,,0,,,
Android,30811697,2,,28019657,2015,,2,,"<p>If you still have the need, you can use the new Espresso-Intent that mocks the activity result that you can use to test this flow.  <a href=""https://github.com/googlesamples/android-testing/tree/master/ui/espresso/IntentsBasicSample"" rel=""nofollow noreferrer"">See the sample from Android Testing</a></p>
",133616,,3627736,,2017-05-30 10:35:52,2017-05-30 10:35:52,,,,2,,,
Android,49329396,2,,49329197,2018,,2,,"<p>Ive worked a lot in this field (in getting frequent location updates ""forever""). If you need several location updates per hour, the only way to do this is to make your service to be in Foreground (with START_STICKY - see sample for this). The service can live almost ""forever"" if it keeps in the foreground (even in <a href=""https://developer.android.com/training/monitoring-device-state/doze-standby.html?hl=es-419"" rel=""nofollow noreferrer"">Doze Mode</a>). In Doze Mode is possible that the location updates stops because some sensors ""sleep"" but the service must not be affected in Doze Mode.</p>

<p>You can refer to the next google sample: <a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationUpdatesForegroundService"" rel=""nofollow noreferrer"">Location Updates in Foreground Sample</a></p>

<p><strong>NOTE:</strong> Keep in mind that a foreground service can also be killed by Android if it needs too (low memory, etc), but a foreground will be one last things to be shutdown by Android.</p>
",9444065,,9444065,,2018-03-16 21:16:24,2018-03-16 21:16:24,,,,2,,,
Android,43939515,2,,43939275,2017,,2,,"<p>the method <code>queryInventoryAsync()</code> holds one or four paramters. If you look into the source code see the following desciption:</p>

<pre><code>   /**
     * Asynchronous wrapper for inventory query. This will perform an inventory
     * query as described in {@link #queryInventory}, but will do so asynchronously
     * and call back the specified listener upon completion. This method is safe to
     * call from a UI thread.
     *
     * @param querySkuDetails as in {@link #queryInventory}
     * @param moreItemSkus as in {@link #queryInventory}
     * @param moreSubsSkus as in {@link #queryInventory}
     * @param listener The listener to notify when the refresh operation completes.
     */

public void queryInventoryAsync(final boolean querySkuDetails, final List&lt;String&gt; moreItemSkus,
            final List&lt;String&gt; moreSubsSkus, final QueryInventoryFinishedListener listener)
throws IabAsyncInProgressException.....
</code></pre>

<p>and for the single paramter, there is no description (its declared in the one above):</p>

<pre><code> public void queryInventoryAsync(QueryInventoryFinishedListener listener)
        throws IabAsyncInProgressException{
        queryInventoryAsync(false, null, null, listener);
}
</code></pre>

<p>The documentation of InApp Billing and the <code>IABHelper</code> class is absolutely poor, but I guess its enough to call only <code>queryInventoryAsync(QueryInventoryFinishedListener listener)</code> and you will get all informations inside the listener. </p>

<p>The listener returns <code>IabResult result</code> and <code>Inventory inv</code> . These hold all information you need.</p>

<p>IABHelper on GitHub:</p>

<p><a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample/util/IabHelper.java"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample/util/IabHelper.java</a></p>
",1538986,,1538986,,2017-05-12 16:44:11,2017-05-12 16:44:11,,,,0,,,
Android,40010960,2,,40009781,2016,,2,,"<p>app/build.gradle's default has higher priority over Application.mk; use    </p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>android {
    defaultConfig {
      ndk {
            abiFilters 'armeabi', 'armeabi-v7a' // more could be added
      }
  }
}</code></pre>
</div>
</div>
</p>

<p>as in <a href=""https://github.com/googlesamples/android-ndk/blob/master/teapots/classic-teapot/build.gradle"" rel=""nofollow"">https://github.com/googlesamples/android-ndk/blob/master/teapots/classic-teapot/build.gradle</a>.</p>
",4496512,,,,,2016-10-13 1:42:02,,,,1,,,
Android,40014071,2,,39260293,2016,,2,,"<p>Yeah, this is because Android Studio IDE need get the files to display in IDE before compile: expose different behavior between command line and IDE build.  In <a href=""https://github.com/googlesamples/android-ndk/blob/master/webp/view/build.gradle"" rel=""nofollow"">here</a> I hack to download the needed repo earlier than anything else, so Android Studio will not complain. But it is not pretty... and long android studio start up time...</p>
",4496512,,,,,2016-10-13 6:45:59,,,,0,,,
Android,49530498,2,,49510515,2018,,2,,"<p>In Camera2Basic example, the <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/kotlinApp/Application/src/main/java/com/example/android/camera2basic/ImageSaver.kt"" rel=""nofollow noreferrer"">ImageSaver</a> does not rotate the captured JPEG with regards to device orientation. Instead, <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/59b9889259b31189469709216b6b1363e96281c2/kotlinApp/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.kt#L619"" rel=""nofollow noreferrer"">Camera2BasicFragment.captureStillPicture()</a> sets <a href=""https://developer.android.com/reference/android/hardware/camera2/CaptureRequest.html#JPEG_ORIENTATION"" rel=""nofollow noreferrer"">CaptureRequest.JPEG_ORIENTATION</a>, which is only a <em>recommendation</em> for the camera firmware.</p>

<blockquote>
  <p>Camera devices may either encode this value into the JPEG EXIF header, or rotate the image data to match this orientation. When the image data is rotated, the thumbnail data will also be rotated.</p>
</blockquote>

<p>Most often, this recommendation 'only' sets the header, but some devices miss even that. See a recent <a href=""https://medium.com/@kenodoggy/solving-image-rotation-on-android-using-camera2-api-7b3ed3518ab6"" rel=""nofollow noreferrer"">article</a> on this feature and its reliability.</p>

<p>Please note that the EXIF orientation tag is not respected by all viewer software, therefore often the stock Camera applications do rotate the actual JPEG to default orientation.</p>

<p>Your code that loads the captured picture to <strong>ImageView</strong> currently ignores this tag. You can use <a href=""https://developer.android.com/reference/android/media/ExifInterface.html#getAttributeInt(java.lang.String,%20int)"" rel=""nofollow noreferrer"">ExifInterface.getAttributeInt(TAG_ORIENTATION)</a> to extract the orientation from the file or input stream. Or, if you capture an image and immediately display it, you can get device orientation directly from the sensor. Now it's time to decide if the camera stored the image as portrait (i.e. width is smaller than height), or as landscape, in which case it's your duty to rotate it for display. Don't rotate the bitmap according to this orientation. Instead, you can call <strong>imagePreview</strong>.<a href=""https://developer.android.com/reference/android/widget/ImageView.html#setImageMatrix(android.graphics.Matrix)"" rel=""nofollow noreferrer"">setImageMatrix()</a> to display the image correctly.</p>

<p>By the way, please don't decode the JPEG to full-scale bitmap in memory if you only need it to be passed to your <strong>ImageView</strong>: this may consume too much RAM. The easiest one-liner is to call <a href=""https://developer.android.com/reference/android/widget/ImageView.html#setImageURI(android.net.Uri)"" rel=""nofollow noreferrer"">setImageURI()</a> instead.</p>
",192373,,192373,,2018-03-29 12:47:40,2018-03-29 12:47:40,,,,2,,,
Android,49476165,2,,49476044,2018,,2,,"<p>Try making the id non-nullable:</p>

<pre><code> @PrimaryKey(autoGenerate = true)
    var wID: Long = 0
</code></pre>

<p><strong>EDIT:</strong>
I've found this in the sample code <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/PersistenceContentProviderSample/app/src/main/java/com/example/android/contentprovidersample/data/CheeseDao.java"" rel=""nofollow noreferrer"">here</a>.
you can make your @Insert methods return the id of the inserted row object, so you could do this:</p>

<p>In your Dao:</p>

<pre><code>@Insert(onConflict = OnConflictStrategy.REPLACE)
fun insert(weatherEntry: WeatherEntry) : Long
</code></pre>

<p>In your refresh data method:</p>

<pre><code>private fun refreshData(location: String): Flowable&lt;MutableList&lt;WeatherEntry&gt;&gt; {

        return remoteDataSource.getWeatherEntries(location,true).doOnNext({

            // Clear cache
            caches.clear()
            // Clear data in local storage
            localDataSource.deleteAllWeatherEntries()
        }).flatMap(({ Flowable.fromIterable(it) })).doOnNext({ entry -&gt;

            val entryID = localDataSource.insertWeatherEntry(entry)
            entry.wID = entryID
            caches.add(entry)
        }).toList().toFlowable()
    }
</code></pre>
",7765139,,7295614,,2018-03-26 9:50:05,2018-03-26 9:50:05,,,,16,,,
Android,39485923,2,,39467278,2016,,2,,"<blockquote>
  <p>Starting in 2.2, Android Studio on 64 bit OS, supports building C/C++
  via CMake and ndk-build through stable gradle.</p>
  
  <p>In both cases, Gradle is configured to point at the external build
  system.  It interrogates the external build system to determine a list
  of all C/C++ sources that are being built in the project and uses this
  list to populate the Studio project, enabling editing and debugging
  inside Studio while still using the external build system to compile
  and link the C/C++ sources.</p>
  
  <p>There is a set of maintained CMake NDK samples
  <a href=""https://github.com/googlesamples/android-ndk/tree/master-cmake"" rel=""nofollow noreferrer"">here</a>.</p>
</blockquote>

<p>ref: <a href=""http://tools.android.com/tech-docs/external-c-builds"" rel=""nofollow noreferrer"">http://tools.android.com/tech-docs/external-c-builds</a></p>

<p>See: <a href=""https://stackoverflow.com/questions/19207721/build-android-ndk-project-with-cmake"">Build Android NDK project with Cmake</a></p>
",,user6169399,-1,user6169399,2017-05-23 10:29:18,2016-09-14 8:39:35,,,,2,,,
Android,30310186,2,,30307117,2015,,2,,"<p>I have put together a sample of how to create the search bar and a couple of other toolbar examples.  it is under FloatingSearchToolbar file.  You would need to have the view over the main toolbar and set the floating toolbar to be View.GONE. </p>

<p><a href=""https://github.com/EugeneHoran/Android-Hard-Toolbar-with-many-different-elements"" rel=""nofollow"">https://github.com/EugeneHoran/Android-Hard-Toolbar-with-many-different-elements</a> </p>

<p>As for the animation you would need to configure a view animation from the top right corner. The view animation below is from a sample from google which could be found on.  </p>

<p><a href=""https://github.com/googlesamples/android-RevealEffectBasic/"" rel=""nofollow"">https://github.com/googlesamples/android-RevealEffectBasic/</a></p>

<pre><code> Animator animator = ViewAnimationUtils.createCircularReveal(
                View v **Your view here**,
                0,
                0,
                0,
                (float) Math.hypot(shape.getWidth(), shape.getHeight()));
</code></pre>
",3904085,,,,,2015-05-18 18:14:15,,,,0,,,
Android,49686495,2,,48972343,2018,,2,,"<p>Firstly, thanks to <a href=""https://stackoverflow.com/users/3624647/adityakamble49"">@adityakamble49</a> for answering to my question, credit goes to him !
You can maintain abstraction using Repository by giving LiveData as return value and using <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/repository/NetworkBoundResource.java"" rel=""nofollow noreferrer"">NetworkBoundResource</a> you can decide if you need to fetch from Network or you can use cached data (DB / DataHolder). NetworkBoundResource is a clean way to implement common functionality (using Generics) in abstract class and provide explicit behavior in extended class(es). </p>

<p>Sharing my viewPoint on <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/repository/NetworkBoundResource.kt"" rel=""nofollow noreferrer""><strong>NetworkBoundResource</strong></a> class vs <a href=""https://github.com/yigit/android-priority-jobqueue"" rel=""nofollow noreferrer""><strong>android-priority-jobqueue</strong></a> so it helps us decide which one to use in vairous scenarios.</p>

<p><strong>NetworkBoundResource</strong> - Use when app need to fetch data from local DB or network but also display error to user when fetch fails (e.g. no network). Pull to Refrsh on a screen is a good use case where user expects to see updated data or otherwise see error toast/dialog if fetch fails.</p>

<p><strong>android-priority-jobqueue</strong> - There are many scenarios when an action need to be preserved until it completes successfully (rather than display error and forget). JobQueue helps a lot in such scenarios to maintain pending jobs (for associated triggers) in background queue and later process them when network is avialable. E.g. A note created by user in offline mode is added to JobQueue which gets synched later when device comes online. Such scenario can't be addressed with NetworkBoundResource. </p>

<p>A NetworkBoundResource candidate operation shouldn't be handled using JobQueue (and vice versa) as it could flood the JobQueue with too many operations and many of them could be duplicate e.g. multiple Pull To Refresh actions on same screen leading to multiple Jobs, which is wrong. Welcoming others viewpoints !!!</p>
",1992013,,1992013,,2018-12-23 13:40:27,2018-12-23 13:40:27,,,,2,,,
Android,39995221,2,,39994548,2016,,2,,"<p>You could refer <a href=""https://developers.google.com/android/reference/com/google/android/gms/location/FusedLocationProviderApi"" rel=""nofollow"">Fused Location API</a> and it's high accuracy option. The documentation <a href=""https://developer.android.com/training/location/change-location-settings.html"" rel=""nofollow"">says</a>,</p>

<blockquote>
  <p>PRIORITY_HIGH_ACCURACY - Use this setting to request the most precise location possible. With this setting, the location services are more likely to use GPS to determine the location.</p>
</blockquote>

<p>Now i'v also tested (indoor, near balcony) on old device (Samsung Galaxy S3). I'm receiving location updates between 5m and 15m accuracy. The tested code from, <a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationUpdates/app/src/main/java/com/google/android/gms/location/sample/locationupdates/MainActivity.java"" rel=""nofollow"">googlesamples/android-play-location</a></p>
",1281180,,,,,2016-10-12 9:32:41,,,,0,,,
Android,41284080,2,,41283917,2016,,2,,"<p>You need to update your google play service of device.</p>

<p>You can see this <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer/issues/97"" rel=""nofollow noreferrer"">Bug report</a> which already has been addressed</p>

<p>and possibility you will have to update your <code>gcm</code> dependency then appropriate modifications of code will also required mean the deprecated methods will be needed to replaced with new one in the project for e.g <code>GoogleApiAvailability</code> to register token etc so also make sure you are using the latest <code>gcm</code> dependency in your project</p>
",4936904,,4936904,,2016-12-22 13:20:57,2016-12-22 13:20:57,,,,0,,,
Android,50138447,2,,50066035,2018,,2,,"<p>CameraSource.java is available <a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java"" rel=""nofollow noreferrer"">on GitHub</a> under a permissive <a href=""http://www.apache.org/licenses/LICENSE-2.0"" rel=""nofollow noreferrer"">Apache license</a>. Feel free to add auto-focus and zoom.</p>
",192373,,192373,,2018-05-03 6:28:08,2018-05-03 6:28:08,,,,2,,,
Android,52089111,2,,52087947,2018,,2,,"<p>It's always a good idea to isolate your code depending on the responsibilities. It's gives us several advantages when it's come to code  readability and maintainability.</p>

<p>Since you have asked for MVC pattern but here we have a very good example of MVP pattern which is explained on the following link of Google samples regarding clean architecture in Android projects.</p>

<p>Link: <a href=""https://github.com/googlesamples/android-architecture/blob/todo-mvp/README.md"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture/blob/todo-mvp/README.md</a></p>

<p><img src=""https://i.stack.imgur.com/QhVU2.png"" alt=""enter image description here""></p>

<p>Components:</p>

<p>Model: More of your business entities/Pojo
Views: More of your fragments and activities
Repository: Data source for the information. It can be one of your database, cache, remote server, file system etc.
Presentor: It's a layer which get data from one of your repository and send result back to your views.</p>

<p>I have tried to implement similar pattern in one of my learning project.</p>

<p>Link: <a href=""https://github.com/amol-kamble/movie-finder/tree/master/app/src/main"" rel=""nofollow noreferrer"">https://github.com/amol-kamble/movie-finder/tree/master/app/src/main</a></p>
",3148606,,,,,2018-08-30 4:11:02,,,,1,,,
Android,34023082,2,,33800924,2015,,2,,"<p>Try the other way around. Do not use espresso-core but just espresso-web. Example:  </p>

<p><a href=""https://github.com/googlesamples/android-testing/blob/master/ui/espresso/WebBasicSample/app/build.gradle"" rel=""nofollow"">Espresso Official Test Kit Blog Example</a></p>
",2953225,,,,,2015-12-01 14:43:00,,,,2,,,
Android,52103533,2,,52087976,2018,,2,,"<p><a href=""https://stackoverflow.com/a/52090287/1426891"">As Thomas Broyer described</a>, you've got two separate directions to set up: You want the Dagger graph to know how to get to your Application instance, and you want to get access to certain bindings out of the dependency graph.</p>

<p>The <code>@BindsInstance</code> line in the Builder creates a binding for Application set to the instance you pass in. It sounds like you understand this part.</p>

<p>However, after you've created your Component, presumably you want to <em>use</em> it. Let's say you want to get fully-injected instances of classes Dep1, Dep2, and Dep3 out of your graph. One way you could do this is to create methods on your Component that get the instances:</p>

<pre><code>@Singleton @Component(/* ... */) interface AppComponent {
    // [builder snipped out here]

    fun getDep1(): Dep1
    fun getDep2(): Dep2
    fun getDep3(): Dep3
}
</code></pre>

<p>And then you call those as part of your App creation.</p>

<pre><code>var appComponent = DaggerAppComponent.builder().application(githubApp).build()
var dep1 = appComponent.getDep1()
var dep2 = appComponent.getDep2()
var dep3 = appComponent.getDep3()
// Use dep1, dep2, and dep3 here.
</code></pre>

<p>However, you can also create a single-arg method, which is typically a <code>void</code> method called <code>inject</code>. This populates all of the <code>@Inject</code>-annotated fields and calls all of the <code>@Inject</code>-annotated methods on the instance you pass in. If GitHubApp has <code>@Inject</code>-annotated-fields (<a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/GithubApp.kt#L28-L30"" rel=""nofollow noreferrer"">and it does</a>), the call to <code>inject</code> lets you skip defining all of the getters on the Component. That reduces all of the above code to:</p>

<pre><code>DaggerAppComponent.builder().application(githubApp)
    .build().inject(githubApp)
</code></pre>

<p>...which is what you see in the demo.</p>
",1426891,,,,,2018-08-30 18:45:59,,,,3,,,
Android,43451369,2,,43451231,2017,,2,,"<blockquote>
  <p>So isn't it superfluous in this case to link against the appcompat v7 when the project itself requires v23? </p>
</blockquote>

<p>With a <code>minSdkVersion</code> of 23, you do not need <code>appcompat-v7</code>, but you will then need to not use anything from it (e.g., <code>AppCompatActivity</code>, <code>Theme.AppCompat</code>).</p>

<p>Google likes everyone to use <code>appcompat-v7</code>, but it adds ~1MB of bloat to your app for little added value, particularly with a <code>minSdkVersion</code> of 23.</p>

<blockquote>
  <p>The second thing I'm not sure about is linking against constraint layout. HelloJNI does this as well but I don't know why. </p>
</blockquote>

<p>Google has converted many of their templates and examples over to use <code>ConstraintLayout</code>.</p>

<blockquote>
  <p>From my research it looks like constraint layout allows apps to do some advanced layout tricks but of course HelloJNI doesn't do that... so why does it still link against constraint layout?</p>
</blockquote>

<p>Because they are using <code>ConstraintLayout</code> in <a href=""https://github.com/googlesamples/android-ndk/blob/master/hello-jni/app/src/main/res/layout/activity_hello_jni.xml"" rel=""nofollow noreferrer"">a layout resource</a>... that itself is unused. If I had to guess, they copied their JNI code into a new project created by a template that added the layout resource, dependency upon the <code>constraint</code> artifact, dependency upon <code>appcompat-v7</code>, etc.</p>

<blockquote>
  <p>I don't need to link against appcompat v7 because my app targets v9</p>
</blockquote>

<p><strike>Your app has <code>targetSdkVersion</code> of 25, not 9.</strike></p>
",115145,,115145,,2017-04-17 12:38:17,2017-04-17 12:38:17,,,,2,,,
Android,32535983,2,,17041010,2015,,2,,"<p>The accepted answer was correct at the time. But in recent times things have changed with the availability of the <a href=""https://developers.google.com/android/reference/com/google/android/gms/location/SettingsApi"" rel=""nofollow"">SettingsApi</a> It allows you to check if the location services are available on the device and there is a complete example provided by google on <a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationSettings/app/src/main/java/com/google/android/gms/location/sample/locationsettings/MainActivity.java"" rel=""nofollow"">github</a> that shows how to use this API. The sample code will prompt the user to enable location if it's switched off.</p>
",267540,,,,,2015-09-12 6:36:14,,,,0,,,
Android,32540342,2,,32453165,2015,,2,,"<p>Check the following...</p>

<ul>
<li><p>Set a callback on the response to subscribe and call startResolutionForResult on the Status object if the Status was APP_NOT_OPTED_IN . See <a href=""https://github.com/googlesamples/android-nearby/blob/master/messages/NearbyDevices/app/src/main/java/com/google/android/gms/nearby/messages/samples/nearbydevices/MainFragment.java#L507"" rel=""nofollow"">github example</a></p></li>
<li><p>Make sure you've enabled the Nearby API in the Developer Console for your app. Step 3 <a href=""https://developers.google.com/nearby/messages/android/get-started"" rel=""nofollow"">here</a></p></li>
<li><p>Use Strategy.BLE_ONLY in the call to subscribe</p></li>
<li><p>Finally, if none of these help, try a stand-alone BLE scanning app just to make sure the beacon is actually broadcasting.</p></li>
</ul>

<p>If you want to post a more complete code sample, one of our engineers can take a look</p>

<p>(I work on the Nearby API)</p>
",5302459,,5302459,,2015-10-10 14:22:14,2015-10-10 14:22:14,,,,4,,,
Android,32570433,2,,32570075,2015,,2,,"<p>Did you check this:<br>
<a href=""https://developer.android.com/ndk/samples/sample_hellojni.html"" rel=""nofollow noreferrer"">https://developer.android.com/ndk/samples/sample_hellojni.html</a>
I basically learned from there.
Or:<br>
1. <a href=""https://github.com/sureshjoshi/android-ndk-swig-example"" rel=""nofollow noreferrer"">https://github.com/sureshjoshi/android-ndk-swig-example</a>. <br>
2. <a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk</a>.<br>
A simple search would have gotten you in all these places.
<br>
<strong>EDIT</strong>
Now, once you are done with this and it works well next you call from C/C++:<br>
<a href=""https://stackoverflow.com/questions/5198105/calling-a-java-method-from-c-in-android"">Calling a java method from c++ in Android</a>. The
Snippet that should help you is:<br></p>

<pre><code>#include &lt;string.h&gt;
#include &lt;jni.h&gt;
//other imports

jstring get_package_MainActivity_getJniString( JNIEnv* env, jobject obj){

    jstring jstr = (*env)-&gt;NewStringUTF(env, ""MainActivity class"");
    jclass clazz = (*env)-&gt;FindClass(env, ""com/org/android/ui/activities/MainActivity"");
    jmethodID mCurrentActivityId = (*env)-&gt;GetMethodID(env, clazz, ""getCurrentActivityName"", ""(Ljava/lang/String;)Ljava/lang/String;"");
    jobject result = (*env)-&gt;CallObjectMethod(env, obj, mCurrentActivityId, jstr);

    const char* str = (*env)-&gt;GetStringUTFChars(env,(jstring) result, NULL); // should be released but what a heck, it's a tutorial :)
    printf(""%s\n"", str);

    return (*env)-&gt;NewStringUTF(env, str);
}
</code></pre>
",900246,,-1,,2017-05-23 10:29:54,2015-09-14 19:32:51,,,,1,,,
Android,43826462,2,,43715276,2017,,2,,"<p>In addition to the good comments you received above, you should group your classes by feature in packages and put the Dagger 2 <code>Component</code> and <code>Module</code> classes in that package.</p>

<p>Refer to the Google Android Architecture Blueprints <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-dagger/"" rel=""nofollow noreferrer"">Dagger/MVP sample</a>. </p>

<p>There is a root package for the Application class and the app-scoped module and component. From that root package, there are the following sub-packages grouped by feature:</p>

<pre><code>addedittask 
statistics
taskdetail  
tasks
util
</code></pre>

<p>Inside the package there are the following classes:</p>

<pre><code>TaskDetailActivity.java
TaskDetailComponent.java
TaskDetailContract.java
TaskDetailFragment.java 
TaskDetailPresenter.java
TaskDetailPresenterModule.java
</code></pre>

<p>The benefit of doing this is you can use <a href=""http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html"" rel=""nofollow noreferrer"">access control</a> to prevent unintended usages of your classes. This fulfils Effective Java Item 13 - <em>Minimize the accesibility of classes and members</em>.</p>
",5241933,,,,,2017-05-06 23:47:37,,,,0,,,
Android,53091560,2,,53090722,2018,,2,,"<p>Yes, you definitely can get the date and time of purchase, order id, state, purchase token and so on. All information about purchase data is described here: </p>

<p>(Table 7) <a href=""https://developer.android.com/google/play/billing/billing_reference"" rel=""nofollow noreferrer"">https://developer.android.com/google/play/billing/billing_reference</a>  </p>

<p>Concerning server verification, official doc says</p>

<blockquote>
  <p>Successful purchases also generate a purchase token, which is a unique identifier representing the user and the product ID for the in-app product they purchased. Your apps can store the purchase token locally or, ideally, pass it to your secure backend server where it can be used to verify the purchase and protect against fraud.</p>
</blockquote>

<p>The process steps of server verification you need to implement:
<a href=""https://developer.android.com/google/play/billing/billing_library_overview#Verify-purchase"" rel=""nofollow noreferrer"">https://developer.android.com/google/play/billing/billing_library_overview#Verify-purchase</a></p>

<p>Google Play In-app Billing samples for more clarity:
<a href=""https://github.com/googlesamples/android-play-billing"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-billing</a> </p>
",4715901,,,,,2018-10-31 20:35:30,,,,2,,,
Android,27268418,2,,26925384,2014,,2,,"<p>you can view this example may this will help you</p>

<p>Android Camera2Basic Sample</p>

<p>This sample demonstrates the basic use of Camera2 API. Check the source code to see how you can display camera preview and take pictures.
Pre-requisites</p>

<pre><code>Android SDK v21
Android Build Tools v21.1.1
Android Support Repository
</code></pre>

<p><a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Basic</a></p>

<p>Please check this Github Repo for Android L (API 21) Camera Preview Library PkmX/lcamera</p>
",3690456,,,,,2014-12-03 9:50:44,,,,0,,,
Android,35990784,2,,35972523,2016,,2,,"<p>Check out the face tracker sample code, which is similar.  It also handles getting camera permissions and activity pause/resume:</p>

<p><a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/FaceTracker/app/src/main/java/com/google/android/gms/samples/vision/face/facetracker/FaceTrackerActivity.java"" rel=""nofollow"">https://github.com/googlesamples/android-vision/blob/master/visionSamples/FaceTracker/app/src/main/java/com/google/android/gms/samples/vision/face/facetracker/FaceTrackerActivity.java</a></p>

<p>What problems are you encountering?</p>

<p>Note that the ""prominentFaceOnly"" option will only detect faces that appear relatively large in the camera preview (i.e., face is around 35% or more of the width of the preview image). </p>
",5231007,,,,,2016-03-14 14:51:37,,,,0,,,
Android,52396338,2,,52381029,2018,,2,,"<p>The <a href=""https://github.com/googlesamples/android-BasicAndroidKeyStore/blob/master/Application/src/main/java/com/example/android/basicandroidkeystore/BasicAndroidKeyStoreFragment.java#L213"" rel=""nofollow noreferrer"">example code</a> that you pointed to from <a href=""https://github.com/googlesamples/android-BasicAndroidKeyStore/"" rel=""nofollow noreferrer"">BasicAndroidKeyStore</a> does not log the public key as <a href=""https://developer.android.com/reference/java/security/KeyPair.html#getPublic()"" rel=""nofollow noreferrer"">getPublic()</a> from the KeyPair class only returns a reference the the public key object, not the public key itself.</p>

<pre><code>Log.d(TAG, ""Public Key reference is: "" + kp.getPublic().toString());
</code></pre>

<p>Logs:</p>

<blockquote>
  <p>D/KeyStoreFragment: Public Key reference is: android.security.keystore.AndroidKeyStoreRSAPublicKey@b8004e8f</p>
</blockquote>

<p>The same goes for <a href=""https://developer.android.com/reference/java/security/KeyPair.html#getPrivate()"" rel=""nofollow noreferrer"">getPrivate()</a>.</p>

<pre><code>Log.d(TAG, ""Private Key reference is: "" + kp.getPrivate().toString());
</code></pre>

<p>Logs:</p>

<blockquote>
  <p>D/KeyStoreFragment: Private Key reference is
  android.security.keystore.AndroidKeyStoreRSAPrivateKey@5da42c27</p>
</blockquote>

<hr>

<p>Now, as you point out in your comment, <code>kp.getPublic().getEncoded()</code> will return the actual public key, but a public key's original purpose is not meant to be secret.</p>

<p>The private key is meant to be secret and while using a hardware-backed keystore with keys supported in the device's secure hardware, the secret keys are stored safely in the TEE/SE and cannot be extracted by the app itself or another bad actor with root privileges. You can see it in this example:</p>

<pre><code>Log.d(TAG, ""Private Key is "" + Arrays.toString(kp.getPrivate().getEncoded()));
</code></pre>

<p>Logs:</p>

<blockquote>
  <p>D/KeyStoreFragment: Private Key is null</p>
</blockquote>

<hr>

<p>To verify your keys are supported by your device's secure hardware, you can use some variation of this code to suit your needs. You can paste this snippet after the same <a href=""https://github.com/googlesamples/android-BasicAndroidKeyStore/blob/master/Application/src/main/java/com/example/android/basicandroidkeystore/BasicAndroidKeyStoreFragment.java#L213"" rel=""nofollow noreferrer"">Log.d</a> mentioned above in the example app's createKeys() method.</p>

<pre><code>    KeyFactory factory = KeyFactory.getInstance(kp.getPrivate().getAlgorithm(), ""AndroidKeyStore"");
    KeyInfo keyInfo = null;
    try {
        keyInfo = factory.getKeySpec(kp.getPrivate(), KeyInfo.class);
    } catch (InvalidKeySpecException e) {
        e.printStackTrace();
    }
    if (keyInfo.isInsideSecureHardware())
        Log.d(TAG, ""Key is supported in secure hardware"");
    else
        Log.d(TAG, ""Key is not supported in secure hardware"");
</code></pre>
",6917917,,6917917,,2018-09-24 4:04:01,2018-09-24 4:04:01,,,,5,,,
Android,52752045,2,,52208752,2018,,2,,"<p>This location update gets varies as per the android version. Recently Android introduce <a href=""https://developer.android.com/about/versions/oreo/background-location-limits"" rel=""nofollow noreferrer"">background location limits</a> in <strong>oreo</strong> which says: </p>

<blockquote>
  <p>While your app is in the foreground, you should receive location
  updates as frequently as you requested. When your app goes in the
  background, your app will receive location updates only a few times
  each hour (the location update interval may be adjusted in the future
  based on system impact and feedback from developers).</p>
</blockquote>

<p>Android recommend to use fused location APIs for below reason, you must consider it for your scenario which says:</p>

<blockquote>
  <p>If your app needs access to location history that contains
  time-frequent updates, use the batched version of the Fused Location
  Provider API elements, such as the FusedLocationProviderApi interface.
  When your app is running in the background, this API receives the
  user's location more frequently than the non-batched API. Keep in
  mind, however, that your app still receives updates in batches only a
  few times each hour.</p>
</blockquote>

<p>Please refer below links for and better approach:</p>

<p><a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationUpdatesForegroundService/app"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-location/tree/master/LocationUpdatesForegroundService/app</a></p>

<p><a href=""https://codelabs.developers.google.com/codelabs/background-location-updates-android-o/index.html#0"" rel=""nofollow noreferrer"">https://codelabs.developers.google.com/codelabs/background-location-updates-android-o/index.html#0</a></p>

<p><strong>Note: The ""O"" background location limits only kick in when your app is no longer in the foreground.</strong></p>

<p>Please let me know if above two links not working for you.</p>
",5106574,,,,,2018-10-11 4:07:40,,,,2,,,
Android,52756343,2,,45456592,2018,,2,,"<p>You can migrate data from InstantApp to installed app using StorageApi, example is here: <a href=""https://github.com/googlesamples/android-instant-apps/blob/master/storage-api/features/storage/src/main/java/com/instantappsample/feature/storage/storage/StorageApiActivity.kt"" rel=""nofollow noreferrer"">google sample storage api</a>. Just access 
<code>InstantApps.getInstantAppsClient(this).instantAppData</code> and you have it, <code>addOnSuccessListener</code> and here you go. </p>
",5904585,,,,,2018-10-11 9:10:38,,,,0,,,
Android,44459068,2,,44428389,2017,,2,,"<blockquote>
  <p>if sections.getValue() is null I have to call api for data and insert
  in into the database</p>
</blockquote>

<p>You can handle this at <code>onChange</code> method:</p>

<pre><code>sections.observe(this, new Observer&lt;List&lt;Section&gt;&gt;() {
    @Override
    public void onChanged(@Nullable List&lt;Section&gt; sections){
         if(sections == null || sections.size() == 0) {
             // No data in your database, call your api for data
         } else {
             // One or more items retrieved, no need to call your api for data.
         }
    }
});
</code></pre>

<p>But you should better put this Database/Table initialization logic to a repository class. Check out <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/BasicSample"" rel=""nofollow noreferrer"">Google's sample</a>. See <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/BasicSample/app/src/main/java/com/example/android/persistence/db/DatabaseCreator.java"" rel=""nofollow noreferrer"">DatabaseCreator</a> class.</p>
",1460509,,1460509,,2017-06-09 13:34:05,2017-06-09 13:34:05,,,,1,,,
Android,49895540,2,,47636886,2018,,2,,"<p>Check out <a href=""https://www.youtube.com/watch?v=4L4fLrWDvAU&amp;feature=youtu.be"" rel=""nofollow noreferrer"">this video from Google I/O</a>, and <a href=""https://github.com/googlesamples/android-unsplash"" rel=""nofollow noreferrer"">sample app on GitHub</a></p>

<p><a href=""https://github.com/googlesamples/android-unsplash/blob/master/app/src/main/java/com/example/android/unsplash/ui/DetailSharedElementEnterCallback.java"" rel=""nofollow noreferrer"">DetailSharedElementEnterCallback</a> contains remapping</p>
",3801650,,,,,2018-04-18 9:04:55,,,,0,,,
Android,49960414,2,,4749593,2018,,2,,"<p>This is an ancient question but I noticed that the directory MimeType had not actually been specified properly in any of the answers.  I found this in the Google code sample for SAF (Storage Access Framework) <a href=""https://github.com/googlesamples/android-StorageProvider"" rel=""nofollow noreferrer"">android-StorageProvider</a>:</p>

<pre><code>DocumentsContract.Document.MIME_TYPE_DIR
</code></pre>

<p>Which is this string:</p>

<pre><code>vnd.android.document/directory
</code></pre>

<p>So for the initial question:</p>

<pre><code>    Uri uri = Uri.parse(getFilesDir().getPath());
    int OPEN_REQUEST = 1337;
    Intent intent = new Intent(Intent.ACTION_OPEN_DOCUMENT);
    intent.addCategory(Intent.CATEGORY_OPENABLE);
    intent.setDataAndType(uri, DocumentsContract.Document.MIME_TYPE_DIR);

    startActivityForResult(intent, OPEN_REQUEST);
</code></pre>

<p>But the Storage Access Framework will navigate through the directories for you. So you may only need to do this:</p>

<pre><code>    int OPEN_REQUEST = 1337;
    Intent intent = new Intent(Intent.ACTION_OPEN_DOCUMENT);
    intent.addCategory(Intent.CATEGORY_OPENABLE);
    intent.setType(""*/*"");

    startActivityForResult(intent, OPEN_REQUEST);
</code></pre>
",7949386,,,,,2018-04-21 21:32:11,,,,0,,,
Android,44842236,2,,44841963,2017,,2,,"<p>You cannot save a fingerprint image or template. It is stated by Android in the <a href=""https://developer.android.com/about/versions/marshmallow/android-6.0.html"" rel=""nofollow noreferrer"">Fingerprint Section</a>.</p>

<p>The Fingerprint data is stored by android system in the phone at a secure location which is not accessible. You can write an app that gets and stores fingerprint to authenticate the user. You can go through this sample that demonstrates to use registered fingerprints to authenticate the user in your app. </p>

<p><a href=""https://github.com/googlesamples/android-FingerprintDialog"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-FingerprintDialog</a></p>

<p>If you need fingerprint authentication for about 300 users, your best bet would be implementing an <a href=""https://en.wikipedia.org/wiki/Automated_fingerprint_identification"" rel=""nofollow noreferrer"">AFIS</a> solutions. You can also check out this <a href=""https://github.com/lethalskillzz/Android-Fingerprint-Attendance-Client"" rel=""nofollow noreferrer"">github repo</a>, but I cannot guarantee it's veracity. </p>

<p>Stating this <a href=""https://stackoverflow.com/a/33473549/7461132"">answer</a>, there's some fingerprint scanners compatible with Android Platform and with SDK for Android. These SDKs allow to get fingerprint image or template. Scanners are plugged on USB port so you can't charge tablet and use fingerprint scanner simultaneous. For instance:</p>

<p><a href=""http://www.dermalog.com/en/products_solutions/fingerprintscanner/"" rel=""nofollow noreferrer"">http://www.dermalog.com/en/products_solutions/fingerprintscanner/</a></p>

<p><a href=""http://www.futronic-tech.com/product_fs80h.html"" rel=""nofollow noreferrer"">http://www.futronic-tech.com/product_fs80h.html</a></p>

<p><a href=""http://www.crossmatch.com/authentication-hardware/"" rel=""nofollow noreferrer"">http://www.crossmatch.com/authentication-hardware/</a></p>

<p>There's also some devices with integrated fingerprint scanner and with SDK to get fingerprint image or template. But this would be out of scope for programming.</p>
",7461132,,7461132,,2017-07-02 13:57:19,2017-07-02 13:57:19,,,,4,,,
Android,44849010,2,,44829710,2017,,2,,"<p>I don't think capturing photos via the <code>MediaStore.ACTION_IMAGE_CAPTURE</code> intent will work at the moment unfortunately. Even if the activity could start, it requires write access to external storage to actually send back the full image and external storage is not available to Instant Apps (see <a href=""https://developer.android.com/topic/instant-apps/prepare.html#restricted_features"" rel=""nofollow noreferrer"">restrictions</a>). <a href=""https://developer.android.com/reference/android/support/v4/content/FileProvider.html"" rel=""nofollow noreferrer""><code>FileProvider</code></a> is also not support on Instant Apps at the moment in case the capture intent could write to internal storage (I'm not sure about that).</p>

<p>The permission <code>android.permission.CAMERA</code> is supported though, you will just need to use the <a href=""https://developer.android.com/reference/android/hardware/camera2/package-summary.html"" rel=""nofollow noreferrer"">camera2 APIs</a>. There is a code sample you can try out <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">here</a>.</p>
",268156,,,,,2017-06-30 14:37:09,,,,1,,,
Android,44859727,2,,44859713,2017,,2,,"<p>Fingerprint Authentication is only available from Android 6.0</p>

<p>Here is an example:
<a href=""https://github.com/googlesamples/android-FingerprintDialog"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-FingerprintDialog</a></p>
",4845438,,,,,2017-07-01 10:10:41,,,,4,,,
Android,45989022,2,,45857714,2017,,2,,"<p>As you can check in the google sample -
<a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample/MainActivity.java"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample/MainActivity.java</a></p>

<p>consumeAsync() is called twice:</p>

<p>-When the purchase is complete, in <code>OnIabPurchaseFinishedListener</code></p>

<p>-When the inventory is queried at the start of the activity, in <code>QueryInventoryFinishedListener</code></p>

<p>You also need to call it when the purchase was successful as well as when you query the inventory and find a consumable item in there (because if the item is consumed, then it won't appear in the inventory)</p>
",6806175,,,,,2017-08-31 19:45:39,,,,0,,,
Android,41467938,2,,41467418,2017,,2,,"<p>Call <code>Purchase#isAutoRenewing</code> method. If this method is missing, you may need to update your reference IAB files: </p>

<pre><code>    if (purchase != null &amp;&amp; purchase.getPurchaseState() == 0) {
        // User is subscribed
        Log.d(TAG, ""Subscribed."");
        if (purchase.isAutoRenewing()){
            return true;
        }
</code></pre>

<p><a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample/util/Purchase.java"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample/util/Purchase.java</a></p>
",794088,,,,,2017-01-04 15:50:59,,,,0,,,
Android,53573907,2,,53573598,2018,,2,,"<p>You can't access SD cards and other removable media even with File permission granted. If I remember correctly since KitKat unless user enabled access in built-in documents app.</p>

<p>You need to use <a href=""https://developer.android.com/guide/topics/providers/document-provider#client"" rel=""nofollow noreferrer"">DocumentsProvider</a> or obtain yet another permission/uri through <a href=""https://developer.android.com/reference/android/os/storage/StorageVolume.html#createAccessIntent(java.lang.String)"" rel=""nofollow noreferrer"">StorageVolume</a> and parse it with <a href=""https://developer.android.com/reference/android/provider/DocumentsContract"" rel=""nofollow noreferrer"">DocumentsContract</a> (<a href=""https://github.com/googlesamples/android-ScopedDirectoryAccess"" rel=""nofollow noreferrer"">sample project</a>).</p>

<p>Edit: based on your exception:</p>

<pre><code> /storage/emulated/03b3d97bd-5186-4506-97dc-9994b7ce0761
</code></pre>

<p>Default external directory is <code>/storage/emulated/0</code>, looks like You forgot to add a separator after directory name:</p>

<pre><code>output = new FileOutputStream(Environment.getExternalStorageDirectory() +""/""+ image_uuid);
</code></pre>
",9241978,,9241978,,2018-12-01 18:59:01,2018-12-01 18:59:01,,,,8,,,
Android,32081995,2,,32014978,2015,,2,,"<p>I tried the newest <code>NearBy API demo</code> and succeed.</p>

<p>You can just go <a href=""https://github.com/googlesamples/android-nearby/tree/master/messages/NearbyDevices"" rel=""nofollow noreferrer"">here</a> and clone it. Open it in Android Studio, and follow the following steps:</p>

<ul>
<li><p>Create a project on <a href=""https://console.developers.google.com/"" rel=""nofollow noreferrer"">Google Developer Console</a>. Or, use an existing
project.</p></li>
<li><p>Click on <code>APIs &amp; auth -&gt; APIs</code>, and enable <code>Nearby Messages API</code>.</p></li>
<li><p>Click on <code>Credentials</code>, then click on Create new key, and pick Android
key. Then register your Android app's SHA1 certificate fingerprint
and package name for your app. Use
<code>com.google.android.gms.nearby.messages.samples.nearbydevices</code> for the
package name. </p></li>
<li><p>You can get SHA1 by using: <code>keytool -exportcert -alias androiddebugkey -keystore ~/.android/debug.keystore -list -v</code> and the password by default is <code>android</code>.</p></li>
</ul>

<p><a href=""https://i.stack.imgur.com/51sOY.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/51sOY.jpg"" alt=""enter image description here""></a></p>

<ul>
<li>Copy the API key generated, and paste it in AndroidManifest.xml.</li>
</ul>

<p><a href=""https://i.stack.imgur.com/JFB6sl.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/JFB6sl.png"" alt=""enter image description here""></a></p>

<p><a href=""https://i.stack.imgur.com/ixEC2.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/ixEC2.jpg"" alt=""enter image description here""></a></p>
",4186942,,,,,2015-08-18 20:25:52,,,,3,,,
Android,46138158,2,,46062532,2017,,2,,"<p>For display only, one easy approach is to use a <a href=""https://developer.android.com/reference/android/opengl/GLSurfaceView.html"" rel=""nofollow noreferrer""><code>GLSurfaceView</code></a>, a <a href=""https://developer.android.com/reference/android/graphics/SurfaceTexture.html"" rel=""nofollow noreferrer""><code>SurfaceTexture</code></a> to render the video frames, and a <a href=""https://developer.android.com/reference/android/media/MediaPlayer.html"" rel=""nofollow noreferrer""><code>MediaPlayer</code></a>. Prokash's answer links to an open source library that shows how to accomplish that. There are a number of other examples around if you search those terms together. Taking that route, you draw video frames to an OpenGL texture and create OpenGL shaders to manipulate how the texture is rendered. (I would suggest asking Prokash for further details and accepting his answer if this is enough to fill your requirements.)</p>

<p>Similarly, you could use the OpenGL tools with <a href=""https://developer.android.com/reference/android/media/MediaCodec.html"" rel=""nofollow noreferrer""><code>MediaCodec</code></a> and <a href=""https://developer.android.com/reference/android/media/MediaExtractor.html"" rel=""nofollow noreferrer""><code>MediaExtractor</code></a> to decode video frames. The <code>MediaCodec</code> would be configured to output to a <code>SurfaceTexture</code>, so you would not need to do much more than code some boilerplate to get the output buffers rendered. The filtering process would be the same as with a <code>MediaPlayer</code>. There are a number of examples using <code>MediaCodec</code> as a decoder available, e.g. <a href=""https://github.com/googlesamples/android-BasicMediaDecoder"" rel=""nofollow noreferrer"">here</a> and <a href=""https://github.com/taehwandev/MediaCodecExample"" rel=""nofollow noreferrer"">here</a>. It should be fairly straightforward to substitute the <code>TextureView</code> or <code>SurfaceView</code> used in those examples with the <code>GLSurfaceView</code> of Prokash's example.</p>

<p>The advantage of this approach is that you have access to all the separate tracks in the media file. Because of that, you should be able to filter the video track with OpenGL and straight copy other tracks for export. You would use a <code>MediaCodec</code> in encode mode with the <code>Surface</code> from the <code>GLSurfaceView</code> as input and a <a href=""https://developer.android.com/reference/android/media/MediaMuxer.html"" rel=""nofollow noreferrer""><code>MediaMuxer</code></a> to put it all back together. You can see several relevant examples at <a href=""http://bigflake.com/mediacodec/#DecodeEditEncodeTest"" rel=""nofollow noreferrer"">BigFlake</a>.</p>

<p>You can use a <code>MediaCodec</code> without a <code>Surface</code> to access decoded byte data directly and manipulate it that way. <a href=""https://github.com/grishka/android-video-transcoder"" rel=""nofollow noreferrer"">This example</a> illustrates that approach. You can manipulate the data and send it to an encoder for export or render it as you see fit. There is some extra complexity in dealing with the raw byte data. Note that I like this example because it illustrates dealing with the audio and video tracks separately.</p>

<p>You can also use <a href=""https://www.ffmpeg.org/"" rel=""nofollow noreferrer"">FFMpeg</a>, either in native code or via one of the Java wrappers out there. This option is more geared towards export than immediate playback. See <a href=""https://github.com/guardianproject/android-ffmpeg-java"" rel=""nofollow noreferrer"">here</a> or <a href=""https://github.com/WritingMinds/ffmpeg-android-java"" rel=""nofollow noreferrer"">here</a> for some libraries that attempt to make FFMpeg available to Java. They are basically wrappers around the command line interface. You would need to do some extra work to manage playback via FFMpeg, but it is definitely doable.</p>

<p>If you have questions, feel free to ask, and I will try to expound upon whatever option makes the most sense for your use case.</p>
",2617694,,,,,2017-09-10 7:05:07,,,,1,,,
Android,54220660,2,,54219704,2019,,2,,"<p>You can create an app with instant experience without associated URL.
<a href=""https://github.com/googlesamples/android-instant-apps/tree/master/urlless"" rel=""nofollow noreferrer"">This sample</a>.</p>

<p>For an app with instant experience you no longer need the <code>com.android.instantapp</code> plugin unless you want to use dynamic feature modules at this point.</p>

<p>When onDemand modules leave beta, you can start using the <code>com.android.dynamic-feature</code> plugin in combination with the <a href=""https://developer.android.com/guide/app-bundle/playcore"" rel=""nofollow noreferrer"">PlayCore API</a> to download a module.</p>

<p>Until then you'll have to use the <code>com.android.feature</code> and <code>com.android.instantapp</code> plugin to download multiple feature modules.</p>
",422060,,,,,2019-01-16 15:46:40,,,,5,,,
Android,36152632,2,,36152512,2016,,2,,"<p><strong>Problem</strong></p>

<pre><code>The location obtained may be null if the last know location could not be found due to various reasons. Read about it in the docs [here][2]
</code></pre>

<p><strong>Reason/How i debugged it</strong></p>

<ol>
<li><p><code>getFromLocation</code> does not throws a nullpointer according to documentation hence the problem is in your location object.</p>

<p><a href=""http://developer.android.com/reference/android/location/Geocoder.html#getFromLocation(double,%20double,%20int)"" rel=""nofollow"">Read here about this method</a></p></li>
</ol>

<p><strong>Remedy</strong></p>

<pre><code>Location location = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
</code></pre>

<p>Check if the location obtained in the above step is NOT NULL and then proceed with the geocoder.</p>

<p><strong>Code snippet</strong></p>

<pre><code>...
else if (locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)) {
    Location location = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
    if(location == null) {
       log.d(""TAG"", ""The location could not be found"");
       return; 
    }
    //else, proceed with geocoding.
    Geocoder geocoder = new Geocoder(this, Locale.getDefault());
</code></pre>

<p><strong>Fetching the location - An example</strong></p>

<p><a href=""http://developer.android.com/training/location/retrieve-current.html"" rel=""nofollow"">Read here</a></p>

<p><strong>Complete code</strong></p>

<p><a href=""https://github.com/googlesamples/android-play-location"" rel=""nofollow"">View it here</a></p>
",1270865,,1270865,,2016-03-22 11:53:43,2016-03-22 11:53:43,,,,10,,,
Android,35733401,2,,35727102,2016,,2,,"<p>The <a href=""https://developers.google.com/android/reference/com/google/android/gms/wearable/CapabilityApi"" rel=""nofollow"">CapabilityApi</a> should work. There are two ways to get a list of connected nodes based on capability including a callback for changes:</p>

<ol>
<li>Callback for Node changes: <a href=""https://developers.google.com/android/reference/com/google/android/gms/wearable/CapabilityApi.CapabilityListener"" rel=""nofollow"">CapabilityApi.CapabilityListener</a></li>
<li>Requesting current Nodes: <a href=""https://developers.google.com/android/reference/com/google/android/gms/wearable/CapabilityApi.html#getCapability(com.google.android.gms.common.api.GoogleApiClient,%20java.lang.String,%20int)"" rel=""nofollow"">Wearable.CapabilityApi.getCapability()</a></li>
</ol>

<p><strong>More details:</strong></p>

<p>Below is a snippet from Google's <a href=""https://github.com/googlesamples/android-RuntimePermissionsWear"" rel=""nofollow"">RuntimePermissionsWear</a> sample's <a href=""https://github.com/googlesamples/android-RuntimePermissionsWear/blob/master/Wearable/src/main/java/com/example/android/wearable/runtimepermissions/MainWearActivity.java"" rel=""nofollow"">MainWearActivity.java</a> file. In the <strong>onConnected()</strong> method, it sets up a listener for changes in the nodes and requests a list of current nodes (covers both scenarios).</p>

<p>Please note, this sample uses a custom capability (both for phone and wear), so you might change that part. If you are using a custom capability, it must be declared in the <strong>wear.xml</strong> file. (<a href=""https://github.com/googlesamples/android-RuntimePermissionsWear/blob/master/Application/src/main/res/values/wear.xml"" rel=""nofollow"">Here</a> is the one from the phone for the sample in case you are curious.)</p>

<pre><code>    // Set up listeners for capability and message changes.
    Wearable.CapabilityApi.addCapabilityListener(
            mGoogleApiClient,
            this,
            Constants.CAPABILITY_PHONE_APP); // custom capability
    ...

    // Initial check of capabilities to find the phone.
    PendingResult&lt;CapabilityApi.GetCapabilityResult&gt; pendingResult =
            Wearable.CapabilityApi.getCapability(
                    mGoogleApiClient,
                    Constants.CAPABILITY_PHONE_APP, // custom capability
                    CapabilityApi.FILTER_REACHABLE);

    pendingResult.setResultCallback(new ResultCallback&lt;CapabilityApi.GetCapabilityResult&gt;() {
        @Override
        public void onResult(CapabilityApi.GetCapabilityResult getCapabilityResult) {

            if (getCapabilityResult.getStatus().isSuccess()) {
                CapabilityInfo capabilityInfo = getCapabilityResult.getCapability();
                // Realistically, there is only on phone node with this capability, but you should check for multiple nodes to be safe (if wearable, many more possibilities)
                mPhoneNodeId = pickBestNodeId(capabilityInfo.getNodes());

            } else {
                Log.d(TAG, ""Failed CapabilityApi result: ""
                        + getCapabilityResult.getStatus());
            }
        }
    });
</code></pre>
",1631197,,1631197,,2016-03-01 21:22:56,2016-03-01 21:22:56,,,,4,,,
Android,35768627,2,,35768279,2016,,2,,"<p>You need to create a camera instance and link it to your detector (which already is linked to your processor)</p>

<pre><code>mCameraSource = new CameraSource.Builder(context, barcodeDetector)
                   .setFacing(CameraSource.CAMERA_FACING_BACK)
                   .setRequestedFps(15.0f)
                   .build();
</code></pre>

<p>To link the camera to your SurfaceView and start it use code like this (when the SurfaceView is availble) </p>

<pre><code>mCameraSource.start(mSurfaceView.getHolder());
</code></pre>

<p>You have a working example provided <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/barcode-reader"" rel=""nofollow"">here</a> by Google.</p>

<p>For TextureView  use manual detection</p>

<pre><code>public void onSurfaceTextureUpdated(SurfaceTexture surface) {
          // Invoked every time there's a new Camera preview frame
           mTextureView.getBitmap(bitmap);
           Frame frame = new Frame.Builder().setBitmap(bitmap).build();
           SparseArray&lt;Barcode&gt; barcodes = barcodeDetector.detect(frame);
      }
</code></pre>
",5763690,,5763690,,2016-03-03 10:21:49,2016-03-03 10:21:49,,,,5,,,
Android,54005982,2,,54005880,2019,,2,,"<p>have you tried using a <code>WorkManager</code> instead of having to use the Broadcast Receivers? See details <a href=""https://developer.android.com/topic/libraries/architecture/workmanager/"" rel=""nofollow noreferrer"">here</a>. And an app demo <a href=""https://github.com/googlesamples/android-sunflower"" rel=""nofollow noreferrer"">here</a>.</p>
",6769882,,,,,2019-01-02 12:01:09,,,,3,,,
Android,45774580,2,,45721090,2017,,2,,"<p>You should first notify your Notification with no image or place holder, then load your bitmap with an AsyncTask, or use Picasso and Target callback.</p>

<p>Give to your task the builder that you used for the first notify, when bitmap is loaded, add it to the builder, and then re-notify your Notification.</p>

<p>If there's a risk that content had changed before complete image loading, store a variable that identify your current content to show, that you can check before renotify.</p>

<p>You can follow that exemple of MediaNotificationManager provide by google <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer/blob/master/mobile/src/main/java/com/example/android/uamp/MediaNotificationManager.java"" rel=""nofollow noreferrer"">UniversalMusicPlayer</a> project.</p>

<p>In your case : </p>

<pre><code>// CONSTRUCT THE NOTIFICATION DETAILS
builder.setAutoCancel(true);
builder.setSmallIcon(R.drawable.ic_launcher);
builder.setContentTitle(""Some Title"");
builder.setContentText(""Some Content Text"");
//builder.setLargeIcon(bitmap); // replace this line with place holder drawable from resources
builder.setContentIntent(pendingIntent);

manager.notify(NOTIFICATION_ID, builder.build());

currentLoadImageTask = new LoadImageTask(manager, builder);
currentLoadImageTask.execute(""https://graph.facebook.com/YOUR_USER_ID/picture?type=large"");

// ...

static class LoadImageTask extends AsyncTask&lt;String, Void, Bitmap&gt; {

    final NotificationManager manager;
    final NotificationCompat.Builder builder;

    public LoadImageTask(final NotificationManager manager, final NotificationCompat.Builder builder) {
        this.manager = manager;
        this.builder = builder;
    }

    @Override
    protected Bitmap doInBackground(final String... strings) {
        if (strings == null || strings.length == 0) {
            return null;
        }
        try {
            final URL url = new URL(strings[0]);
            final HttpURLConnection connection = (HttpURLConnection) url.openConnection();
            connection.setDoInput(true);
            connection.connect();
            final InputStream input = connection.getInputStream();
            return BitmapFactory.decodeStream(input);
        } catch (IOException e) {
            e.printStackTrace();
            return null;
        }
    }

    @Override
    protected void onPostExecute(final Bitmap bitmap) {
        if (bitmap == null || manager == null || builder == null) {
            return;
        }
        builder.setLargeIcon(bitmap);
        manager.notify(NOTIFICATION_ID, builder.build());
    }
}
</code></pre>

<p>With picasso : </p>

<pre><code>// CONSTRUCT THE NOTIFICATION DETAILS
builder.setAutoCancel(true);
builder.setSmallIcon(R.drawable.ic_launcher);
builder.setContentTitle(""Some Title"");
builder.setContentText(""Some Content Text"");
//builder.setLargeIcon(bitmap); // replace this line with place holder drawable from resources
builder.setContentIntent(pendingIntent);

manager.notify(NOTIFICATION_ID, builder.build());

// ...

Picasso.with(context)
    .load(""https://graph.facebook.com/YOUR_USER_ID/picture?type=large"")
    .resize(250, 250)
    .into(new Target() {
        @Override
        public void onBitmapLoaded(final Bitmap bitmap, final Picasso.LoadedFrom from) {
            builder.setLargeIcon(bitmap);
            manager.notify(NOTIFICATION_ID, builder.build());
        }

        @Override
        public void onBitmapFailed(final Drawable errorDrawable) {
             // Do nothing
        }

        @Override
        public void onPrepareLoad(final Drawable placeHolderDrawable) {
             // Do nothing
        }
    });
</code></pre>

<p>If not in UiThread you can create a Runnable and execute it in Looper</p>

<pre><code> final Handler uiHandler = new Handler(Looper.getMainLooper())
 uiHandler.post(new Runnable() {
      @Override
      public void run() {
           // Call from here
      }
 });
</code></pre>

<p>Picasso is much better simply because using cache.</p>

<p>And I highly recommend you to resize every bitmap you set in notification because it can easily provoc OutOfMemoryException if you dont.</p>
",1469481,,1469481,,2017-08-20 18:30:17,2017-08-20 18:30:17,,,,7,,,
Android,45790999,2,,45617293,2017,,2,,"<p>I solved this problem using GridLayoutManager instead of StaggeredGridLayoutManager thanks to Chris in this <a href=""https://groups.google.com/forum/#!category-topic/google-admob-ads-sdk/android/S9ke0zZRw10"" rel=""nofollow noreferrer"">google groups answer</a>.</p>

<p>Here is Solution</p>

<pre><code>  public static final int ITEMS_PER_AD = 8;

  private GridLayoutManager mLayoutManager;

  // The Native Express ad height.
  private static final int NATIVE_EXPRESS_AD_HEIGHT = 150;

 // The Native Express ad unit ID.
 private static final String AD_UNIT_ID = ""ca-app-pub-3940256099942544/1072772517"";

 // The RecyclerView that holds and displays Native Express ads and menu items.
 private RecyclerView mRecyclerView;

 // List of Native Express ads and MenuItems that populate the RecyclerView.
 private List&lt;Object&gt; mRecyclerViewItems = new ArrayList&lt;&gt;();

 @Override
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mLayoutManager = new GridLayoutManager(this, 2);
    mLayoutManager.setSpanSizeLookup(new 
    GridLayoutManager.SpanSizeLookup() {
    @Override
    public int getSpanSize(int position) {
        if (position % MainActivity.ITEMS_PER_AD == 0) {
            return 2;
        }
        return 1;
    }
    });

    mRecyclerView = (RecyclerView) findViewById(R.id.recycler_view);

    // Use this setting to improve performance if you know that changes
    // in content do not change the layout size of the RecyclerView.
    mRecyclerView.setHasFixedSize(true);

    // Specify a linear layout manager.
    mRecyclerView.setLayoutManager(mLayoutManager);

   // Update the RecyclerView item's list with menu items and Native Express ads.
   addMenuItemsFromJson();
   addNativeExpressAds();
   setUpAndLoadNativeExpressAds();

   // Specify an adapter.
   RecyclerView.Adapter adapter = new RecyclerViewAdapter(this, mRecyclerViewItems);
   mRecyclerView.setAdapter(adapter);
}
</code></pre>

<p>If you can follow the <a href=""https://github.com/googlesamples/android-ads/tree/master/advanced/NativeExpressRecyclerViewExample"" rel=""nofollow noreferrer"">this sample project</a>, you can find other class and layout. Because this is modified version of this project.
I hope this solution works others like me.</p>
",2739748,,,,,2017-08-21 6:57:56,,,,2,,,
Android,41830890,2,,41699572,2017,,2,,"<blockquote>
  <p>What kind of app is this ""provider app""?</p>
</blockquote>

<p>The configurations provider app is another app running on the device. This app is typically controlled by an administrator. The administrator communicates the configuration changes to the provider app, and this app, in turn, changes the configurations on the managed app.</p>

<p>Take a look at the BasicManagedProfile sample: <a href=""https://github.com/googlesamples/android-BasicManagedProfile"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-BasicManagedProfile</a>. This is exactly this kind of app.</p>

<blockquote>
  <p>Are there any Android API this app should implement in order to act as
  a configurations provider?</p>
</blockquote>

<p>Yes, this app should ask for provisioning the managed profile:</p>

<pre><code>Intent intent = new Intent(ACTION_PROVISION_MANAGED_PROFILE);
intent.putExtra(EXTRA_PROVISIONING_DEVICE_ADMIN_PACKAGE_NAME,
                        activity.getApplicationContext().getPackageName());
if (intent.resolveActivity(activity.getPackageManager()) != null) {
    startActivityForResult(intent, REQUEST_PROVISION_MANAGED_PROFILE);
    activity.finish();
} else {
    Toast.makeText(activity, ""Device provisioning is not enabled. Stopping."",
                                                  Toast.LENGTH_SHORT).show();
}
</code></pre>

<blockquote>
  <p>How does this companion app hooks the configuration changes into the
  RestrictionsManager, so that the managed app to be able to retrieve
  them?</p>
</blockquote>

<p>It uses the DevicePolicyManager to enforce restrictions on the managed app:</p>

<pre><code>DevicePolicyManager manager = (DevicePolicyManager) getActivity().getSystemService(Context.DEVICE_POLICY_SERVICE);

Bundle settings = new Bundle();
settings.putBoolean(""downloadOnCellular"", true);

manager.setApplicationRestrictions(
        BasicDeviceAdminReceiver.getComponentName(getActivity()),
        PACKAGE_NAME_MANAGED_APP, settings);
</code></pre>

<p>Again, take a look at how this is done in the sample project.</p>
",1271435,,1271435,,2017-01-27 12:43:26,2017-01-27 12:43:26,,,,0,,,
Android,35859087,2,,35858981,2016,,2,,"<p>Read through <a href=""http://developer.android.com/training/permissions/requesting.html"" rel=""nofollow"">Runtime permissions - Android M</a> and <a href=""https://github.com/googlesamples/android-RuntimePermissions"" rel=""nofollow"">its reference project</a>.</p>

<p>Permissions flow has changed requiring the permissions to be asked at runtime, preferably, as and when required. With the same.. permissions have also been categorised into <a href=""http://developer.android.com/guide/topics/security/permissions.html#normal-dangerous"" rel=""nofollow"">Normal and Dangerous</a> which will also lead to permission groups.  </p>
",2450263,,,,,2016-03-08 4:39:13,,,,0,,,
Android,45856128,2,,45854762,2017,,2,,"<p>There are many libraries available which add a face mask on camera preview. Almost all of them use OpenCV. Check out these libraries.</p>

<ul>
<li><a href=""https://github.com/hardik-trivedi/FaceFilter"" rel=""nofollow noreferrer"">FaceFilter</a></li>
<li><a href=""https://github.com/marsbroshok/face-replace"" rel=""nofollow noreferrer"">Face Replace</a></li>
<li><a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker"" rel=""nofollow noreferrer"">FaceTracker</a></li>
<li><a href=""https://github.com/CyberAgent/android-gpuimage"" rel=""nofollow noreferrer"">Android GPUimage</a></li>
</ul>

<p>The <a href=""https://github.com/CyberAgent/android-gpuimage"" rel=""nofollow noreferrer"">Android GPUimage</a> seems to add image on Camera Preview. A similar <a href=""https://stackoverflow.com/questions/39154572/save-applied-filter-in-camera-preview-with-gpuimage"">question</a> used this library to add face mask on camera preview. You can take a look into the answer posted on the question. </p>

<p>The FaceFilter library does the same work, but on a captured image. However you can see the <a href=""https://trivedihardik.wordpress.com/2017/02/13/android-mobile-vision-api-face-filter-implementation/"" rel=""nofollow noreferrer"">tutorial</a> for the library posted by the author and integrate it with face detection. There are several tutorials for face detection. This <a href=""https://code.tutsplus.com/tutorials/an-introduction-to-face-detection-on-android--cms-25212"" rel=""nofollow noreferrer"">tutorial</a> explains how to implement face detection, while also overlaying graphics on it. Although there is not much on the overlaid graphics in the tutorial, it might solve your question.</p>
",7461132,,7461132,,2017-08-24 8:56:58,2017-08-24 8:56:58,,,,4,,,
Android,35913469,2,,6391870,2016,,2,,"<h2>UPDATE android-N (march-2016)</h2>

<p>Please visit <a href=""http://developer.android.com/intl/in/preview/features/notification-updates.html"" rel=""nofollow"">Notifications Updates</a> link for more details.</p>

<ul>
<li>Direct Reply</li>
<li>Bundled Notifications</li>
<li>Custom Views</li>
</ul>

<blockquote>
  <p>Android N also allows you to bundle similar notifications to appear as
  a single notification. To make this possible, Android N uses the
  existing <code>NotificationCompat.Builder.setGroup()</code> method. Users can
  expand each of the notifications, and perform actions such as reply
  and dismiss on each of the notifications, individually from the
  notification shade.</p>
  
  <p>This is a pre-existing sample which shows a simple service that sends
  notifications using NotificationCompat. Each unread conversation from
  a user is sent as a distinct notification.</p>
  
  <p>This sample has been updated to take advantage of new notification
  features available in Android N.</p>
</blockquote>

<p><a href=""https://github.com/googlesamples/android-ActiveNotifications"" rel=""nofollow"">sample code</a>.</p>
",2826147,,3165447,,2016-08-13 9:17:50,2016-08-13 9:17:50,,,,1,,,
Android,54486846,2,,24258574,2019,,2,,"<p>This question is quite old however it comes first when you search for ""Best way to reorder list items in Android"" and it remained without an answer.</p>

<p>The OP asked for <code>ListView</code> as at the time of the question they were the most commonly used. Today, it is better to use the <code>RecyclerView</code> as it offers many advantages over the <code>ListView</code>. One of these advantages is what we need to implement the reordering, ie. <code>ItemTouchHelper</code>.</p>

<p>To see how the <code>RecyclerView</code> is implemented you can have a look at this example :
<a href=""https://github.com/googlesamples/android-RecyclerView"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-RecyclerView</a></p>

<p>The part to implement the reordering is to attach to the <code>RecyclerView</code> as follow:</p>

<pre><code>mRecyclerView = (RecyclerView) rootView.findViewById(R.id.recyclerView);

ItemTouchHelper touchHelper = new ItemTouchHelper(new ItemTouchHelper.Callback() {
            public boolean onMove(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder, RecyclerView.ViewHolder target) {

                Collections.swap(dataList, viewHolder.getAdapterPosition(), target.getAdapterPosition());
                mAdapter.notifyItemMoved(viewHolder.getAdapterPosition(), target.getAdapterPosition());
                return true;
            }

            @Override
            public void onSwiped(RecyclerView.ViewHolder viewHolder, int direction) {
                // no-op
            }

            @Override
            public int getMovementFlags(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder) {
                return makeFlag(ItemTouchHelper.ACTION_STATE_DRAG,
                        ItemTouchHelper.DOWN | ItemTouchHelper.UP | ItemTouchHelper.START | ItemTouchHelper.END);
            }
});
touchHelper.attachToRecyclerView(mRecyclerView);
</code></pre>
",1382540,,,,,2019-02-01 20:38:11,,,,1,,,
Android,33065170,2,,32879356,2015,,2,,"<p>I had the same problem. The solution from @Mindshifter worked for me, but you can have a look here for more comments (and I've posted a similar solution there too):</p>

<p><a href=""https://github.com/googlesamples/android-vision/issues/23"" rel=""nofollow"">https://github.com/googlesamples/android-vision/issues/23</a></p>
",3598006,,,,,2015-10-11 12:52:07,,,,0,,,
Android,33184025,2,,33183706,2015,,2,,"<p>This is a very good tutorial...
<a href=""http://code.tutsplus.com/tutorials/create-a-music-player-on-android-project-setup--mobile-22764"" rel=""nofollow"">http://code.tutsplus.com/tutorials/create-a-music-player-on-android-project-setup--mobile-22764</a></p>

<p>A search an Google and I find this:
<a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""nofollow"">https://github.com/googlesamples/android-UniversalMusicPlayer</a>
That's for download and is very good. </p>
",5364144,,5364144,,2015-10-17 7:52:06,2015-10-17 7:52:06,,,,4,,,
Android,33779582,2,,33779062,2015,,2,,"<p>We can use <a href=""http://developer.android.com/reference/android/hardware/camera2/CameraManager.html"" rel=""nofollow""><code>CameraManager</code></a> to iterate all the cameras that are available in the system, each with a designated cameraId. Using the cameraId, we can get the properties of the specified camera device. Those properties are represented by class CameraCharacteristics. Things like ""is it front or back camera"", ""output resolutions supported"" can be queried there.</p>

<p>You can get official sample application <a href=""http://developer.android.com/samples/Camera2Basic/index.html"" rel=""nofollow"">here</a></p>

<p><a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"" rel=""nofollow"">This</a> example found in Google Git repo will demo for you checking the permission before launching camera in new Marshmallow using <a href=""http://developer.android.com/reference/android/hardware/camera2/package-summary.html"" rel=""nofollow""><code>Camera2 API</code></a> </p>

<p>Give a look at this <a href=""http://pierrchen.blogspot.com.au/2015/01/android-camera2-api-explained.html"" rel=""nofollow"">article</a> for more about it.</p>
",4694013,,4694013,,2015-11-18 12:16:41,2015-11-18 12:16:41,,,,0,,,
Android,43283016,2,,43282599,2017,,2,,"<p>An answer is to use the 'intended' method after your test code to verify that the activity result meets your requirements. That looks like this:</p>

<pre class=""lang-java prettyprint-override""><code>@Test
public void typeNumber_ValidInput_InitiatesCall() {
    // Types a phone number into the dialer edit text field and presses the call button.
    onView(withId(R.id.edit_text_caller_number))
            .perform(typeText(VALID_PHONE_NUMBER), closeSoftKeyboard());
    onView(withId(R.id.button_call_number)).perform(click());

    // Verify that an intent to the dialer was sent with the correct action, phone
    // number and package. Think of Intents intended API as the equivalent to Mockito's verify.
    intended(allOf(
            hasAction(Intent.ACTION_CALL),
            hasData(INTENT_DATA_PHONE_NUMBER),
            toPackage(PACKAGE_ANDROID_DIALER)));
}
</code></pre>

<p>However, as part of a fully automated test, you'll need to stub out the response to the activity too so that it can run without actual blocking user input required. You'll need to set up intent stubbing before running tests:</p>

<pre class=""lang-java prettyprint-override""><code>@Before
    public void stubAllExternalIntents() {
        // By default Espresso Intents does not stub any Intents. Stubbing needs to be setup before
        // every test run. In this case all external Intents will be blocked.
        intending(not(isInternal())).respondWith(new ActivityResult(Activity.RESULT_OK, null));
    }
</code></pre>

<p>Then you can write the corresponding part of the test like this:</p>

<pre class=""lang-java prettyprint-override""><code>@Test
    public void pickContactButton_click_SelectsPhoneNumber() {
        // Stub all Intents to ContactsActivity to return VALID_PHONE_NUMBER. Note that the Activity
        // is never launched and result is stubbed.
        intending(hasComponent(hasShortClassName("".ContactsActivity"")))
                .respondWith(new ActivityResult(Activity.RESULT_OK,
                        ContactsActivity.createResultData(VALID_PHONE_NUMBER)));

        // Click the pick contact button.
        onView(withId(R.id.button_pick_contact)).perform(click());

        // Check that the number is displayed in the UI.
        onView(withId(R.id.edit_text_caller_number))
                .check(matches(withText(VALID_PHONE_NUMBER)));
    }
</code></pre>

<p>If you need to verify with actual user input from another application (like the phone dialer), that is outside the scope of Espresso. Since I currently work with a vendor that helps with these kinds of cases, I hesitate to name names and tools, but lots of people do need to write tests that simulate the real end-to-end experience.</p>

<p>Mike Evans has a great write-up about testing intents <a href=""http://michaelevans.org/blog/2015/09/15/testing-intents-with-espresso-intents/"" rel=""nofollow noreferrer"">here</a> and there's always the android documentation <a href=""https://github.com/googlesamples/android-testing/blob/master/ui/espresso/IntentsBasicSample/app/src/androidTest/java/com/example/android/testing/espresso/BasicSample/DialerActivityTest.java"" rel=""nofollow noreferrer"">here</a>.</p>
",3195307,,,,,2017-04-07 16:28:06,,,,1,,,
Android,47884837,2,,47884549,2017,,3,,"<blockquote>
  <p>What would be directory structure of Application in MVP?</p>
</blockquote>

<ul>
<li>There is no predefined structure for that. What makes your code readable or what structure you are following, you can use same for MVP also.</li>
</ul>

<blockquote>
  <p>Activity should be a Presenter or View?</p>
</blockquote>

<ul>
<li>View is the UI layer which displays the data and notifies the Presenter about user actions. So Activity will always be a view.</li>
</ul>

<hr>

<p>If you are looking for a good example of MVP implementation, there is one <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">GitHub Repo</a> for MVP developed by Android itself. Which you should look into.</p>

<p>Where </p>

<p><a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp/"" rel=""nofollow noreferrer"">todomvp</a>   </p>

<ul>
<li>Demonstrates a basic ModelViewPresenter (MVP) architecture and provides a foundation on which the other samples are built. This sample also acts as a reference point for comparing and contrasting the other samples in this project.</li>
</ul>

<p><a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-clean/"" rel=""nofollow noreferrer"">todomvpclean</a> </p>

<ul>
<li>Uses concepts from Clean Architecture.</li>
</ul>

<p><a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-dagger/"" rel=""nofollow noreferrer"">todomvpdagger</a></p>

<ul>
<li>Uses Dagger 2 to add support for dependency injection.</li>
</ul>

<p><a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-rxjava/"" rel=""nofollow noreferrer"">todomvprxjava</a></p>

<ul>
<li>Uses RxJava 2 to implement concurrency, and abstract the data layer.</li>
</ul>

<p><a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvvm-databinding/"" rel=""nofollow noreferrer"">todomvvmdatabinding</a>  </p>

<ul>
<li>Based on the todo-databinding sample, this version incorporates the ModelViewViewModel pattern.</li>
</ul>

<p><a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvvm-live/"" rel=""nofollow noreferrer"">todomvvmlive</a> </p>

<ul>
<li>Uses ViewModels and LiveData from Architecture Components and the Data Binding library with an MVVM architecture.</li>
</ul>
",550966,,550966,,2017-12-19 11:02:05,2017-12-19 11:02:05,,,,4,,,
Android,47097901,2,,44288546,2017,,3,,"<p>For Lollipop and above you can use the <a href=""https://developer.android.com/reference/android/media/projection/MediaProjection.html"" rel=""nofollow noreferrer"">MediaProjection</a> API of Google to take the screenshot but you need to ask for the permission from the user.</p>

<p>You can find the sample screen capture code using MediaProjection <a href=""https://github.com/googlesamples/android-ScreenCapture"" rel=""nofollow noreferrer"">Here</a></p>

<p>For the devices less then Lollipop you need root permission for it.</p>
",3887560,,,,,2017-11-03 14:16:33,,,,0,,,
Android,38245477,2,,38245342,2016,,3,,"<p>It is possible to do this if the device has a functioning fingerprint scanner. Look at this example provided by Google.</p>

<p><a href=""https://github.com/googlesamples/android-FingerprintDialog"" rel=""nofollow"">https://github.com/googlesamples/android-FingerprintDialog</a></p>

<p>It was literally one of the first Google answers. Apart from that, please work on keeping the question in proper English.</p>
",4961317,,,,,2016-07-07 12:27:35,,,,0,,,
Android,38429638,2,,38427019,2016,,3,,"<p>from NDK changelog:</p>

<blockquote>
  <p>Android NDK, Revision 11 (March 2016)</p>
  
  <p>The samples are no longer included in the NDK package. They are instead available on <a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow"">GitHub</a>.</p>
</blockquote>
",4758618,,3115956,,2016-07-18 6:52:57,2016-07-18 6:52:57,,,,0,,,
Android,28765850,2,,28764222,2015,,3,,"<blockquote>
  <p>The Google Play services location APIs are preferred over the Android
  framework location APIs (android.location) as a way of adding location
  awareness to your app. If you are currently using the Android
  framework location APIs, you are strongly encouraged to switch to the
  Google Play services location APIs as soon as possible.    </p>
</blockquote>

<p>Source: <a href=""http://developer.android.com/training/location/index.html"" rel=""nofollow"">Making Your App Location-Aware</a></p>

<p>I have used it and found the following to be quite efficient, esp in terms of nuking the battery vs obtaining the location frequently, accurately:</p>

<p><em>1.</em>  Use <a href=""http://developer.android.com/reference/com/google/android/gms/location/FusedLocationProviderApi.html"" rel=""nofollow"">Fused Location Provider</a>, <a href=""http://developer.android.com/reference/com/google/android/gms/common/api/GoogleApiClient.html"" rel=""nofollow"">GoogleApiClient</a>:  </p>

<pre><code>   mGoogleApiClient = new GoogleApiClient.Builder(this)
           .addConnectionCallbacks(this)
           .addOnConnectionFailedListener(this)
           .addApi(LocationServices.API)
           .build();
           mGoogleApiClient.connect();  
</code></pre>

<p><em>2.</em>  Use <a href=""http://developer.android.com/reference/com/google/android/gms/location/LocationRequest.html"" rel=""nofollow"">LocationRequest</a> according to the requirement:  </p>

<pre><code>mLocationRequest = new LocationRequest();    
mLocationRequest.setFastestInterval(120000);
    //there are other options associated with this objects
    // including types of priority
    mLocationRequest.setPriority(LocationRequest.PRIORITY_BALANCED_POWER_ACCURACY);
</code></pre>

<p><em>3.</em>  Set the LocationServices to use a <code>this</code> if class implements <code>LocationListener</code> or define a new one in:  </p>

<pre><code>LocationServices.FusedLocationApi.requestLocationUpdates(
                     mGoogleApiClient, mLocationRequest, this);
</code></pre>

<p>All components are under the package  </p>

<pre><code>com.google.android.gms  
</code></pre>

<p><a href=""http://developer.android.com/reference/com/google/android/gms/location/package-summary.html"" rel=""nofollow"">gms/location/package-summary</a></p>

<p>Reference: <a href=""https://github.com/googlesamples/android-play-location"" rel=""nofollow"">googlesamples/android-play-location</a></p>
",2450263,,,,,2015-02-27 13:05:30,,,,3,,,
Android,47571737,2,,24357687,2017,,3,,"<p><strong>Android NDK official <code>hello-libs</code> CMake example</strong></p>

<p><a href=""https://github.com/googlesamples/android-ndk/tree/840858984e1bb8a7fab37c1b7c571efbe7d6eb75/hello-libs"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk/tree/840858984e1bb8a7fab37c1b7c571efbe7d6eb75/hello-libs</a></p>

<p>Just worked for me on Ubuntu 17.10 host, Android Studio 3, Android SDK 26, so I strongly recommend that you base your project on it.</p>

<p>The shared library is called <code>libgperf</code>, the key code parts are:</p>

<ul>
<li><p><a href=""https://github.com/googlesamples/android-ndk/blob/840858984e1bb8a7fab37c1b7c571efbe7d6eb75/hello-libs/app/src/main/cpp/CMakeLists.txt"" rel=""nofollow noreferrer"">hello-libs/app/src/main/cpp/CMakeLists.txt</a>: </p>

<pre><code>// -L
add_library(lib_gperf SHARED IMPORTED)
set_target_properties(lib_gperf PROPERTIES IMPORTED_LOCATION
          ${distribution_DIR}/gperf/lib/${ANDROID_ABI}/libgperf.so)

// -I
target_include_directories(hello-libs PRIVATE
                           ${distribution_DIR}/gperf/include)
// -lgperf
target_link_libraries(hello-libs
                      lib_gperf)
</code></pre></li>
<li><p><a href=""https://github.com/googlesamples/android-ndk/blob/840858984e1bb8a7fab37c1b7c571efbe7d6eb75/hello-libs/app/build.gradle"" rel=""nofollow noreferrer"">app/build.gradle</a>:</p>

<pre><code>android {
    sourceSets {
        main {
            // let gradle pack the shared library into apk
            jniLibs.srcDirs = ['../distribution/gperf/lib']
</code></pre>

<p>Then, if you look under <code>/data/app</code> on the device, <code>libgperf.so</code> will be there as well.</p></li>
<li><p>on C++ code, use: <code>#include &lt;gperf.h&gt;</code></p></li>
<li><p>header location: <code>hello-libs/distribution/gperf/include/gperf.h</code></p></li>
<li><p>lib location: <code>distribution/gperf/lib/arm64-v8a/libgperf.so</code></p></li>
<li><p>If you only support some architectures, see: <a href=""https://stackoverflow.com/questions/33278152/gradle-build-ndk-target-only-arm/47558314#47558314"">Gradle Build NDK target only ARM</a></p></li>
</ul>

<p>The example git tracks the prebuilt shared libraries, but it also contains the build system to actually build them as well: <a href=""https://github.com/googlesamples/android-ndk/tree/840858984e1bb8a7fab37c1b7c571efbe7d6eb75/hello-libs/gen-libs"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk/tree/840858984e1bb8a7fab37c1b7c571efbe7d6eb75/hello-libs/gen-libs</a></p>
",895245,,,,,2017-11-30 10:56:08,,,,0,,,
Android,47446145,2,,47383674,2017,,3,,"<p>I solved this problem referencing this, <a href=""https://github.com/googlesamples/android-ndk/issues/450"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk/issues/450</a></p>
",4665928,,,,,2017-11-23 1:09:10,,,,0,,,
Android,49395289,2,,49395231,2018,,3,,"<p>You might want to implement Autofill Service <a href=""https://developer.android.com/guide/topics/text/autofill-services.html"" rel=""nofollow noreferrer"">https://developer.android.com/guide/topics/text/autofill-services.html</a></p>

<p>There is a ready to use sample app which will get you started <a href=""https://github.com/googlesamples/android-AutofillFramework"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-AutofillFramework</a></p>

<p>Android will invoke <code>onFillRequest()</code> method giving your service a chance to show autofill suggestions. Here is a sample code from above link:</p>

<pre><code>@Override
public void onFillRequest(FillRequest request, CancellationSignal cancellationSignal, FillCallback callback) {
    // Get the structure from the request
    List&lt;FillContext&gt; context = request.getFillContexts();
    AssistStructure structure = context.get(context.size() - 1).getStructure();

    // Traverse the structure looking for nodes to fill out.
    ParsedStructure parsedStructure = parseStructure(structure);

    // Fetch user data that matches the fields.
    UserData userData = fetchUserData(parsedStructure);

    // Build the presentation of the datasets
    RemoteViews usernamePresentation = new RemoteViews(getPackageName(), android.R.layout.simple_list_item_1);
    usernamePresentation.setTextViewText(android.R.id.text1, ""my_username"");
    RemoteViews passwordPresentation = new RemoteViews(getPackageName(), android.R.layout.simple_list_item_1);
    passwordPresentation.setTextViewText(android.R.id.text1, ""Password for my_username"");

    // Add a dataset to the response
    FillResponse fillResponse = new FillResponse.Builder()
            .addDataset(new Dataset.Builder()
                    .setValue(parsedStructure.usernameId,
                            AutofillValue.forText(userData.username), usernamePresentation)
                    .setValue(parsedStructure.passwordId,
                            AutofillValue.forText(userData.password), passwordPresentation)
                    .build())
            .build();

    // If there are no errors, call onSuccess() and pass the response
    callback.onSuccess(fillResponse);
}

class ParsedStructure {
    AutofillId usernameId;
    AutofillId passwordId;
}

class UserData {
    String username;
    String password;
}
</code></pre>
",826606,,826606,,2018-03-20 22:45:40,2018-03-20 22:45:40,,,,1,,,
Android,49268772,2,,48455844,2018,,3,,"<p>The Transaction Object with Payee in it, will be produced by the @Embedded annotation, independently of being additional columns in your DAO query.</p>

<p>There are other scenarios related to your question:</p>

<ul>
<li>Entities that need completely independent queries. A MediatorLiveData with more than one Source will be required.</li>
<li>Entities with one-to-many relation that cannot be fulfilled with the default SELECT * FROM query, generated by the @Relation annotation. A Transformations.switchMap can be used as explained below (I found your question while searching for this).</li>
</ul>

<p>Using global executor pools, as demonstrated in Google GithubBrowserSample sample with the <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/AppExecutors.java"" rel=""nofollow noreferrer"">AppExecutor</a> class, the nested query in the repository class will end up like this:</p>

<pre><code>public LiveData&lt;QuotationCustomer&gt; loadQuotationDetails(int quotationId) {
    LiveData&lt;QuotationCustomer&gt; quotationLiveData =
            quotationDao.getQuotationCustomer(quotationId);
    LiveData&lt;QuotationCustomer&gt; result =
            Transformations.switchMap(quotationLiveData, quotation -&gt; {
        MutableLiveData&lt;QuotationCustomer&gt; mutableResult = new MutableLiveData&lt;&gt;();
        appExecutors.diskIO().execute(() -&gt; {
            quotation.quotationDetList = 
                    quotationDetDao.getQuotationDetsByQuotationIdSync(quotationId);
            mutableResult.postValue(quotation);
        });
        return mutableResult;
    });
    return result;
}
</code></pre>

<p>In the previous code sample, the getQuotationDetsByQuotationIdSync DAO method is returning a plain List (not a LiveData>) and the QuotationCustomer POJO extends an @Entity annotated class and has the quotationDetList property defined as follows:</p>

<pre><code>@Ignore
public List&lt;QuotationDetProductUnit&gt; quotationDetList;
</code></pre>

<p>In your case, replace QuotationCustomer by Payee and QuotationDetProductUnit by Transaction.</p>
",8228407,,,,,2018-03-14 2:13:05,,,,2,,,
Android,40425249,2,,40387715,2016,,3,,"<p>From my understanding you saving your prefs to the normal user locked storage and trying to move it from there to the device locked storage at boot time. That won't work since at boot time the user storage is locked. 
You need to save your shared prefs directly to the device storage context and use the migration procedure only in the upgrade from the older devices case.</p>

<p>See this <a href=""https://github.com/googlesamples/android-DirectBoot/blob/737ab9a214debbf3c940360b834077ccc3035ff3/Application/src/main/java/com/example/android/directboot/alarms/AlarmStorage.java"" rel=""nofollow noreferrer"">google example</a> for a correct handling of direct boot.</p>
",6809537,,,,,2016-11-04 14:31:49,,,,1,,,
Android,32100941,2,,32099530,2015,,3,,"<p><strong>Based on the documentation here:</strong> <a href=""https://developers.google.com/android/reference/com/google/android/gms/vision/package-summary"" rel=""nofollow"">https://developers.google.com/android/reference/com/google/android/gms/vision/package-summary</a> <strong>and here:</strong> <a href=""https://developers.google.com/android/reference/com/google/android/gms/vision/Detector#isOperational()"" rel=""nofollow"">https://developers.google.com/android/reference/com/google/android/gms/vision/Detector#isOperational()</a></p>

<h2>Documentation:</h2>

<blockquote>
  <p><strong>public boolean  isOperational()</strong> </p>
  
  <p>Indicates whether the detector has all of the required dependencies
  available locally in order to do detection.</p>
  
  <p>When an app is first installed, it may be necessary to download
  required files. If this returns false, those files are not yet
  available. Usually this download is taken care of at application
  install time, but this is not guaranteed. In some cases the download
  may have been delayed. </p>
  
  <p>If your code has added a processor, an indication of the detector
  operational state is also indicated with the detectorIsOperational()
  method. You can check this in your app as it processes detection
  results, and can convey this state to the user if appropriate.</p>
  
  <p>Returns true if the detector is operational, false if the dependency
  download is in progress</p>
</blockquote>

<p><strong>and</strong></p>

<blockquote>
  <p><strong>public boolean  detectorIsOperational()</strong> </p>
  
  <p>Returns true if the detector is operational, false if it is not
  operational. In the non-operational case, the detector will return no
  results.</p>
  
  <p>A detector may be non-operational for a while when starting an app for
  the first time, if a download is required to obtain the associated
  library and model files required to do detection.</p>
</blockquote>

<p>It looks like your device needs to finish downloading the libraries through Google Play Services in order for your application to work right away.</p>

<h2>Based on the Google Samples(a comment in the source):</h2>

<pre><code>        // Note: The first time that an app using the barcode or face API is installed on a
        // device, GMS will download a native libraries to the device in order to do detection.
        // Usually this completes before the app is run for the first time.  But if that
        // download has not yet completed, then the above call will not detect any barcodes
        // and/or faces.
        //
        // isOperational() can be used to check if the required native libraries are currently
        // available.  The detectors will automatically become operational once the library
        // downloads complete on device.
</code></pre>

<p><a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/multi-tracker/app/src/main/java/com/google/android/gms/samples/vision/face/multitracker/MultiTrackerActivity.java#L156"" rel=""nofollow"">https://github.com/googlesamples/android-vision/blob/master/visionSamples/multi-tracker/app/src/main/java/com/google/android/gms/samples/vision/face/multitracker/MultiTrackerActivity.java#L156</a></p>
",950427,,322642,,2015-08-29 10:56:08,2015-08-29 10:56:08,,,,1,,,
Android,32134285,2,,32134187,2015,,3,,"<p>This is <code>deprecated</code>. You can't switch on/off location programmatically. Better I suggest you to use the latest version of <code>GooglePlayService</code>. Using <code>PlayService</code> you can check at anytime whether the <code>location</code> is enabled or not. If it's not enabled then the <code>AlertDialog</code> to enable it. Without even leaving your application you can enable GPS. If it's not enabled then you can do whatever the operation you want to perform. You can find the more details from this <a href=""http://android-developers.blogspot.in/2015/03/google-play-services-70-places-everyone.html"" rel=""nofollow"">post</a></p>

<p>Basically your <code>Activity</code> should implement <code>ResultCallback&lt;LocationSettingsResult&gt;</code></p>

<p>And register <code>PendingIntent</code> like below,</p>

<pre><code>PendingResult&lt;LocationSettingsResult&gt; result =
            LocationServices.SettingsApi.checkLocationSettings(
                    mGoogleApiClient,
                    mLocationSettingsRequest
            );
    result.setResultCallback(this);
</code></pre>

<p>Now you have a <code>onResult</code> callback in that you can perform what you want to do</p>

<pre><code>@Override
public void onResult(LocationSettingsResult locationSettingsResult) {
    final Status status = locationSettingsResult.getStatus();
    switch (status.getStatusCode()) {
        case LocationSettingsStatusCodes.SUCCESS:
            Log.i(TAG, ""All location settings are satisfied."");
            startLocationUpdates();
            break;
        case LocationSettingsStatusCodes.RESOLUTION_REQUIRED:
            Log.i(TAG, ""Location settings are not satisfied. Show the user a dialog to"" +
                    ""upgrade location settings "");
            try {
                // Show the dialog by calling startResolutionForResult(), and check the result
                // in onActivityResult().
                status.startResolutionForResult(MainActivity.this, REQUEST_CHECK_SETTINGS);
            } catch (IntentSender.SendIntentException e) {
                Log.i(TAG, ""PendingIntent unable to execute request."");
            }
            break;
        case LocationSettingsStatusCodes.SETTINGS_CHANGE_UNAVAILABLE:
            Log.i(TAG, ""Location settings are inadequate, and cannot be fixed here. Dialog "" +
                    ""not created."");
            break;
    }
}
// This code is from https://github.com/googlesamples/android-play-location/blob/master/LocationSettings/app/src/main/java/com/google/android/gms/location/sample/locationsettings/MainActivity.java
</code></pre>

<p>Please find the sample google project in <a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationSettings"" rel=""nofollow"">Github</a></p>
",3475831,,3475831,,2015-08-21 7:15:00,2015-08-21 7:15:00,,,,0,,,
Android,32150276,2,,32146987,2015,,3,,"<p>We recently updated the <a href=""https://github.com/googlesamples/android-ndk/tree/master/native-audio"" rel=""nofollow"">native-audio sample</a> to toggle on fastpath audio when available.</p>

<p><a href=""https://github.com/googlesamples/android-ndk/issues/new"" rel=""nofollow"">Feedbacks are welcome</a> if you run into any issue.</p>
",656408,,,,,2015-08-21 22:40:22,,,,1,,,
Android,33464380,2,,33214469,2015,,3,,"<p>I created an issue in the github project for the sample provided by google (link to the issue <a href=""https://github.com/googlesamples/android-ConfirmCredential/issues/4"" rel=""nofollow"">here</a>). The response I got is that I must use the IV that was generated when the value was encrypted. (same as in the solution provided by @Qianqian)</p>

<pre><code>cipher.init(Cipher.DECRYPT_MODE, secretKey, new IvParameterSpec(encryptCipher.getIV()));
byte[] decryptedBytes = cipher.doFinal(encryptedBytes);
</code></pre>

<p>I created a sample application that shows how to do this. It is available on github, <a href=""https://github.com/Zlate87/android-fingerprint-example"" rel=""nofollow"">here</a>.</p>

<p>Hope this is useful to someone.</p>
",859225,,,,,2015-11-01 16:25:00,,,,1,,,
Android,43078276,2,,43071830,2017,,3,,"<p>Components are for grouping objects of a similar lifecycle. While Components may happen to correspond to a particular set of functionality (like a <code>TaskComponent</code> for injecting a <code>TaskActivity</code> and a <code>TaskPresenter</code>) it is not always possible or desirable to insist on only one Component per set of functionality (for instance, insisting on only one <code>TaskComponent</code> for all task related activities and dependencies). </p>

<p>Instead, in Dagger 2 re-usability is available through Modules which you can very easily swap in and out of Components. Within the constraints of the advice for organising your Modules for testability in the <a href=""https://google.github.io/dagger/testing.html"" rel=""nofollow noreferrer"">Dagger 2 official documentation</a> you are able to organise Modules congruent with your functionality (e.g., a <code>TaskModule</code> for all-task related dependencies). Then, because Components are so lightweight, you can make as many as you like to deal with the different lifecycles of your Activities and so on. Remember also that you can compose Modules using the <code>Class&lt;?&gt; [] includes()</code> method inside the <code>Module</code> <code>@interface</code>.</p>

<p>In your particular scenario, you want to share the <code>Task</code> object from a <code>TaskDetailActivity</code>. If you held a reference to the <code>Task</code> within your <code>TaskDetailActivity</code> then that reference will no longer be available when <code>TaskDetailActivity</code> is destroyed. While you could try some solution of holding binding the <code>Task</code> in a Module and then maintaining a reference to that Module at the app-scope level, you would essentially be doing the same as the <code>UserScope</code> at the app-scoped level in the article you have linked. Any kind of solution for sharing the <code>Task</code> object between Activity using Dagger 2 would necessarily involve maintaining a reference to the object at the app-scoped level. </p>

<p>Using Dagger 2 doesn't mean that the <code>new</code> keyword or serialization/deserialization of <code>Parcelables</code> is now wrong and so if your first intuition is to use <code>Intent</code> to communicate then I would say that you are right. If you need a more robust solution than directly communicating the <code>Task</code>, then you could extract a <code>TaskRepository</code> and transmit an <code>Intent</code> between Activity that contains the <code>id</code> of the <code>Task</code> you wish to retrieve. Indeed, some of the <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">Google Android Architecture Blueprints</a> have a solution just like this.</p>
",5241933,,5241933,,2017-03-29 1:55:33,2017-03-29 1:55:33,,,,2,,,
Android,43595592,2,,43535937,2017,,3,,"<p>Your problem doesn't sound like it's related to <code>RecyclerView.Adapter</code> -- and actually you shouldn't try to solve it within your <code>Adapter</code>: the responsibility of the adapter is to act as a bridge (or ""adapter"" ;-) ) between your data and view component. Giving it more responsibility would turn it into something that is not interchangeable with other <code>Adapter</code> implementations (you don't want this!).</p>

<p>You should probably find a clean way to abstract your data persistence. The in-memory cache should go into that abstraction. You mentioned the repository pattern, this would be good choice IMHO.</p>

<p>Your architecture should roughly look like this:</p>

<pre><code>adapter -&gt; repository -&gt; |-&gt; cache
                         |-&gt; database
</code></pre>

<p>The repository combines the logic for data access (your DAO) and the cache handling (your CacheManager). The repository would always first check the cache and then fetch data from the database. It also updates the cache if non-cached data is fetched. Furthermore, it registers for updates on the database. As soon as the database notifies for changed data, the repository has the chance to update the cache and/or propagate the notification to the view. The important part is that the interface of the repository hides all this logic; it only offers access to data.</p>

<p>You then need to find a way to make your adapter work with your repository. I'd suggest Android's <code>Loader</code> mechanics. By this you get asynchronous loading and correct lifecycle handling for free. Also this nicely decouples adapter and repository.</p>

<p>If you need some inspirations on how to apply the repository pattern, have a look into the <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">googlesamples/android-architecture</a> Github. The <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-clean/"" rel=""nofollow noreferrer"">Clean Architecture branch</a> could be a good fit for you.</p>

<p>On a side note: try to find real (unique) keys of your data. Using the position within the data list is usually a bad idea and depending on the structure of your data will result in strange side effects in the view.</p>
",786434,,,,,2017-04-24 18:47:50,,,,4,,,
Android,47087195,2,,23393010,2017,,3,,"<p>A noob-friendly guide to make Android interact with a LED-lamp.</p>

<p>Step 1. 
Get an tool to scan your BLE device. I used ""Bluetooth LE Lab"" for Win10, but this one will do it as well: <a href=""https://play.google.com/store/apps/details?id=com.macdom.ble.blescanner"" rel=""nofollow noreferrer"">https://play.google.com/store/apps/details?id=com.macdom.ble.blescanner</a></p>

<p>Step 2. 
Analyse the behavior of the BLE device by entering data, I recommend to enter hex values. </p>

<p>Step 3. 
Get the sample of the Android docs. <a href=""https://github.com/googlesamples/android-BluetoothLeGatt"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-BluetoothLeGatt</a></p>

<p>Step 4. 
Modify the UUIDs you find in <code>SampleGattAttributes</code></p>

<p>My config: </p>

<pre><code>    public static String CUSTOM_SERVICE = ""0000ffe5-0000-1000-8000-00805f9b34fb"";
    public static String CLIENT_CHARACTERISTIC_CONFIG = ""0000ffe9-0000-1000-8000-00805f9b34fb"";

    private static HashMap&lt;String, String&gt; attributes = new HashMap();

    static {
        attributes.put(CUSTOM_SERVICE, CLIENT_CHARACTERISTIC_CONFIG);
        attributes.put(CLIENT_CHARACTERISTIC_CONFIG, ""LED"");
    }
</code></pre>

<p><a href=""https://i.stack.imgur.com/UP6lL.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/UP6lL.png"" alt=""enter image description here""></a></p>

<p>Step 5. 
In BluetoothService.java modify <code>onServicesDiscovered</code>:</p>

<pre><code>@Override
public void onServicesDiscovered(BluetoothGatt gatt, int status) {
    if (status == BluetoothGatt.GATT_SUCCESS) {

        for (BluetoothGattService gattService : gatt.getServices()) {
            Log.i(TAG, ""onServicesDiscovered: ---------------------"");
            Log.i(TAG, ""onServicesDiscovered: service="" + gattService.getUuid());
            for (BluetoothGattCharacteristic characteristic : gattService.getCharacteristics()) {
                Log.i(TAG, ""onServicesDiscovered: characteristic="" + characteristic.getUuid());

                if (characteristic.getUuid().toString().equals(""0000ffe9-0000-1000-8000-00805f9b34fb"")) {

                    Log.w(TAG, ""onServicesDiscovered: found LED"");

                    String originalString = ""560D0F0600F0AA"";

                    byte[] b = hexStringToByteArray(originalString);

                    characteristic.setValue(b); // call this BEFORE(!) you 'write' any stuff to the server
                    mBluetoothGatt.writeCharacteristic(characteristic);

                    Log.i(TAG, ""onServicesDiscovered: , write bytes?! "" + Utils.byteToHexStr(b));
                }
            }
        }

        broadcastUpdate(ACTION_GATT_SERVICES_DISCOVERED);
    } else {
        Log.w(TAG, ""onServicesDiscovered received: "" + status);
    }
}
</code></pre>

<p>Convert the byte-String using this function:</p>

<pre><code>public static byte[] hexStringToByteArray(String s) {
int len = s.length();
byte[] data = new byte[len / 2];
for (int i = 0; i &lt; len; i += 2) {
    data[i / 2] = (byte) ((Character.digit(s.charAt(i), 16) &lt;&lt; 4)
            + Character.digit(s.charAt(i + 1), 16));
}
return data;
}
</code></pre>

<p>PS: The above code is far away from production, but I hope it helps those, who are new to BLE. </p>
",2533290,,,,,2017-11-03 1:41:40,,,,1,,,
Android,52051577,2,,43917823,2018,,3,,"<p>I've been struggling with the same sort of problem, as I want to implement a camera preview stream into a <em>square</em> TextureView.</p>

<p>Working with the <code>SCALER_CROP_REGION</code> seemed like the obvious place to resolve issues with incompatible aspect ratios, but I don't think that operation will ever actually change the aspect ratio of the result, hence it doesn't prevent stretching/warping behaviour. (<a href=""https://developer.android.com/reference/android/hardware/camera2/CaptureRequest.html#SCALER_CROP_REGION"" rel=""nofollow noreferrer"">the docs talk about this</a>)</p>

<p>I've made progress by implementing a similar transform to the one in the Camera2Basic example project - see the function <code>configureTransform</code> in <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"" rel=""nofollow noreferrer"">Camera2BasicFragment</a>).</p>

<p>Using this sort of view-level scaling matrix, you can manage the scaling/cropping of the camera preview without altering the size of your view.</p>
",3268060,,,,,2018-08-28 6:39:38,,,,0,,,
Android,52058582,2,,52029984,2018,,3,,"<p><strong>Here is a knowledge base to get started, you should make your own project and implement these software architectures in order to adopt the one that works for you and your project:</strong></p>

<p><a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">Android Architecture Blueprints</a></p>

<p><a href=""https://i.stack.imgur.com/72yfM.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/72yfM.png"" alt=""Android Architecture Blueprints""></a></p>

<p><a href=""http://hannesdorfmann.com/android/mosby3-mvi-1"" rel=""nofollow noreferrer"">Reactive Apps with MODEL-VIEW-INTENT - PART1 - Model</a></p>

<p><a href=""https://i.stack.imgur.com/ItwJT.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/ItwJT.gif"" alt=""enter image description here""></a></p>
",7668027,,,,,2018-08-28 13:01:17,,,,0,,,
Android,25995765,2,,25993623,2014,,3,,"<p>Not really sure what you are asking for, but here are two samples. One if for an Android NFC reader app and one is for an Android HCE app.</p>

<p><a href=""https://github.com/googlesamples/android-CardReader"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-CardReader</a></p>

<p><a href=""https://github.com/googlesamples/android-CardEmulation"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-CardEmulation</a></p>

<p>Please clarify your question if I did not understand you correctly.</p>

<p>CardReader</p>

<p>This sample demonstrates how to implement a low-level NFC card reader, for reading cards that do not contain NDEF or Android Beam data. This sample is designed to read the virtual loyalty card implemented in the CardEmulation sample.</p>

<p>In particular, this sample demonstrates how to disable Android Beam, select which AIDs the reader is interested in, and establish communication with the card. See Host-based Card Emulation for more information on the HCE APIs.</p>

<p>CardEmulation</p>

<p>This sample demonstrates how to emulate an NFC card, using the Host Card Emulation feature added in Android 4.4. This sample makes the device appear as a loyalty card whenever the screen is on and the user taps their device on an appropriately configured NFC reader.</p>

<p>The CardReader sample can be used to read the loyalty card implemented in this sample.</p>
",4052132,,-1,,2019-03-12 1:25:20,2019-03-12 1:25:20,,,,2,,,
Android,43506843,2,,43460985,2017,,3,,"<p>I think I can answer my own question: I was creating my Camera2 Fragment after the <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"" rel=""nofollow noreferrer"">Android's Camera2 example</a>. However, I didn't really consider the method <code>configureTransform</code> to be important as, opposite to the example code, my application is forced to landscape mode anyway. It turned out that this assumption was wrong. Since having <code>configureTransform</code> reintegrated in my code I haven't experienced any more hiccups.</p>

<p>Update: The original example within the Android documentation pages doesn't seem to exist anymore. I've updated the link which is now pointing to the code on Github.</p>
",2001687,,2001687,,2018-09-15 14:05:32,2018-09-15 14:05:32,,,,5,,,
Android,34928261,2,,34925543,2016,,3,,"<p>You cannot open an activity on a wear device using a notification that was created on a phone; all the actions/intents refer to the originator of the notification (i.e. phone if phone created the notification). You need to do a bit of work to create the effect that you want; basically need to have a wear app as well and instead of creating a notification on the phone for wear, send a message, from your phone to the wear device and have teh wear app on your wear device capture that message and create a notification on the wear device. Then that notification can open an activity (since it was originated on your wear device). As a sample app, take a look at the <a href=""https://github.com/googlesamples/android-SynchronizedNotifications"" rel=""nofollow"">SynchronizedNotifications</a> that does this.</p>
",2765813,,,,,2016-01-21 15:52:02,,,,0,,,
Android,35370982,2,,35368974,2016,,3,,"<p>Check out the many Android NDK samples developed by Google. You can find them <a href=""https://github.com/googlesamples/android-ndk/tree/388a1c0f387b72e768d49476da9628547502b5e2"" rel=""nofollow"">here</a>.</p>

<p>The <a href=""https://github.com/googlesamples/android-ndk/tree/388a1c0f387b72e768d49476da9628547502b5e2/hello-gl2"" rel=""nofollow"">hello-gl2</a> example is a good place to start.</p>

<p><a href=""https://github.com/googlesamples/android-ndk/blob/388a1c0f387b72e768d49476da9628547502b5e2/hello-gl2/app/src/main/jni/gl_code.cpp"" rel=""nofollow"">gl_code.cpp</a> shows you how to create JNI code which can be called from Java. Pay particular attention to this part of the code, which defines two methods and makes them visible to the Java layer:</p>

<pre><code>extern ""C"" {
  JNIEXPORT void JNICALL Java_com_android_gl2jni_GL2JNILib_init(JNIEnv * env,
    jobject obj,  jint width, jint height);
  JNIEXPORT void JNICALL Java_com_android_gl2jni_GL2JNILib_step(JNIEnv * env, 
    jobject obj);
};

JNIEXPORT void JNICALL Java_com_android_gl2jni_GL2JNILib_init(JNIEnv * env, jobject obj,  jint width, jint height)
{
  setupGraphics(width, height);
}

JNIEXPORT void JNICALL Java_com_android_gl2jni_GL2JNILib_step(JNIEnv * env, jobject obj)
{
  renderFrame();
}
</code></pre>

<p><a href=""https://github.com/googlesamples/android-ndk/blob/388a1c0f387b72e768d49476da9628547502b5e2/hello-gl2/app/src/main/java/com/android/gl2jni/GL2JNILib.java"" rel=""nofollow"">GL2JNILib.java</a> shows you how to call the methods defined in gl_code.cpp from Java. </p>

<pre><code>public class GL2JNILib {

  static {
    System.loadLibrary(""gl2jni"");
   }

  /**
   * @param width the current view width
   * @param height the current view height
   */
   public static native void init(int width, int height);
   public static native void step();
}
</code></pre>

<p><strong>UPDATE:</strong></p>

<p>To build a C++ module which relies on the live555 library, you'll need to add the following section to Android.mk:</p>

<pre><code>include $(CLEAR_VARS)
LOCAL_MODULE := your_module
LOCAL_SRC_FILES := your_module_file.cpp
LOCAL_SHARED_LIBRARIES := live555
include $(BUILD_SHARED_LIBRARY)
</code></pre>

<p>See this documentation for reference:</p>

<ul>
<li><a href=""http://developer.android.com/ndk/guides/android_mk.html"" rel=""nofollow"">Android.mk (LOCAL_SHARED_LIBRARIES)</a></li>
<li><a href=""http://developer.android.com/ndk/guides/prebuilts.html"" rel=""nofollow"">Using prebuilt libraries (syntax is the same for downstream modules)</a></li>
</ul>
",2201317,,2201317,,2016-02-18 3:07:07,2016-02-18 3:07:07,,,,1,,,
Android,53276863,2,,53276698,2018,,3,,"<p>Basically it means that you try to retrieve location via <code>mFusedLocationClient.getLastLocation()</code> and there is no location on device at this time. So you need to request location updates , like <code>mFusedLocationClient.requestLocationUpdates</code>.
This links will be useful <a href=""https://developer.android.com/training/location/receive-location-updates?hl=es"" rel=""nofollow noreferrer"">https://developer.android.com/training/location/receive-location-updates?hl=es</a> and <a href=""https://github.com/googlesamples/android-play-location"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-location</a></p>
",7917629,,,,,2018-11-13 8:35:39,,,,9,,,
Android,36228003,2,,32471255,2016,,3,,"<p>The above answers work around gradle's prior insufficient NDK integration. This answer illustrates new gradle integration with the NDK.</p>

<p>Take a look at this proposed <a href=""https://github.com/googlesamples/android-ndk/pull/116"" rel=""nofollow noreferrer"">sample</a> written against gradle 2.9 and the android plugin 0.6.0-alpha1. In constrast to how the question is posed, this answer contains a separate project for the library. This functionality can be explored to allow gradle to build that library before it is used by the app project. The other answers rely on the presumption that the library had already been built.</p>

<p>The :secondlib <code>com.android.model.application</code> builds libsecondlib.so (loaded in Java code with System.loadLibrary(""secondlib""). The name 'secondlib' is poorly named. I like to think of it as a .so ""wrapper"" for all other native libraries linked for use by the app.</p>

<p>That shared library is statically linked against firstlib.a as built by the :firstlib <code>com.android.model.native</code>.</p>

<p>The headers are exported from the :firstlib to any dependent projects (:secondlib in this example) as per the <code>exportedHeaders</code> clause. This way dependent projects know how to link against the .so/.a. This replaces the CFlags+=""-I/path/to/headers"" syntax in a prior answer.</p>

<p>:secondlib links against :firstlib statically as per the following clause:</p>

<pre><code>android.sources {
    main {
         jni {
             dependencies {
                 project "":firstlib"" buildType ""debug"" linkage ""static""
             }
         }
         // TODO(proppy): show jniLibs dependencies on .so
    }
}
</code></pre>

<p>As shown by the comment, the example is incomplete. The finishing syntax is shown in the 'NDK Dependencies' section of the <a href=""http://tools.android.com/tech-docs/new-build-system/gradle-experimental"" rel=""nofollow noreferrer"">experimental android plugin documentation</a>. Within that document the syntax for how to statically link instead of dynamically link should be clear.</p>

<p>There are currently some shortcomings (e.g. the buildType of the dependency shown above is by default 'debug' and not the current buildType being built).</p>

<p>EDIT: Here is a work-in-progress sample of the new dependencies syntax in app/build.gradle pulled out of one of my projects:</p>

<pre><code>  android.sources {
    main {
      jni {
        //for exportedHeaders
        dependencies { project "":libfoo"" linkage ""shared"" }
      }
      jniLibs {
        //Where the swig wrapped library .so is. I use swig to create code to interface with libfoo.so within :app
        source { srcDirs 'libs' }
        //for file in $(model.repositories.libs.libfoo)
        dependencies { library ""libfoo"" }
      }
    }
  }

  repositories {
    libs(PrebuiltLibraries) {
      libevdev {
        //headers already available from our libfoo project via exportedHeaders
        //headers.srcDir ""../libfoo/src/main/jni/""
        binaries.withType(SharedLibraryBinary) {
          sharedLibraryFile = file(""../libfoo/build/intermediates/binaries/debug/lib/${targetPlatform.getName()}/libfoo.so"")
        }
      }
    }
  }
</code></pre>
",1185900,,1185900,,2016-11-25 19:46:35,2016-11-25 19:46:35,,,,3,,,
Android,27890329,2,,27885600,2015,,3,,"<p>i hate answering my own question, but i always do:).</p>

<p>so from an example of google <a href=""https://github.com/googlesamples/android-SwipeRefreshMultipleViews"" rel=""nofollow"">SwipeRefreshMultipleViews</a>, with a little change in class <code>MultiSwipeRefreshLayout</code> i managed to solve the problem.</p>

<pre><code>&lt;RelativeLayout xmlns:android=""http://schemas.android.com/apk/res/android""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""
    android:background=""@color/black""&gt;

    &lt;android.support.v7.widget.Toolbar xmlns:app=""http://schemas.android.com/apk/res-auto""
        android:id=""@+id/main_toolbar""
        android:layout_width=""match_parent""
        android:layout_height=""?attr/actionBarSize""
        android:background=""@color/dark_blue""
        app:theme=""@style/Theme.AppCompat""
        android:layout_alignParentTop=""true""/&gt;

    &lt;com.mehdok.slidingtabs.SlidingTabLayout
        android:id=""@+id/main_sliding_tabs""
        android:background=""@color/blue""   
        android:layout_width=""match_parent""
        android:layout_height=""wrap_content""
        android:layout_below=""@id/main_toolbar"" /&gt;

    &lt;fr.castorflex.android.smoothprogressbar.SmoothProgressBar
        xmlns:android=""http://schemas.android.com/apk/res/android""
            xmlns:app=""http://schemas.android.com/apk/res-auto""
        android:layout_width=""match_parent""
            android:layout_height=""4dp""
        android:indeterminate=""true""
            app:spb_sections_count=""4""
        app:spb_color=""@color/white""
            app:spb_speed=""0.5""
        app:spb_stroke_width=""4dp""
            app:spb_stroke_separator_length=""4dp""
        app:spb_reversed=""false""
            app:spb_mirror_mode=""false""
        app:spb_progressiveStart_activated=""false""
            app:spb_progressiveStart_speed=""1.5""
        app:spb_progressiveStop_speed=""3.4""
        android:layout_below=""@id/main_toolbar""
        android:visibility=""gone""
        android:id=""@+id/downloadBar""/&gt;

    &lt;com.mehdok.views.MultiSwipeRefreshLayout
        android:id=""@+id/swiperefresh""
        android:layout_width=""match_parent""
        android:layout_height=""match_parent""
        android:layout_below=""@id/main_sliding_tabs""&gt;

    &lt;android.support.v4.view.ViewPager
                android:id=""@+id/main_pager""
                android:layout_width=""match_parent""
        android:layout_height=""match_parent""
        &gt;
        &lt;/android.support.v4.view.ViewPager&gt;
        &lt;/com.mehdok.views.MultiSwipeRefreshLayout&gt;

&lt;/RelativeLayout&gt;
</code></pre>

<p>the java part</p>

<pre><code>public class MultiSwipeRefreshLayout extends SwipeRefreshLayout {

    private GridView[] mSwipeableChildren;
    private int visibleView = 0;

    public MultiSwipeRefreshLayout(Context context) {
        super(context);
        mSwipeableChildren = new GridView[3];
    }

    public MultiSwipeRefreshLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
        mSwipeableChildren = new GridView[3];
    }


    public void addGridView(GridView v, int i)
    {
        mSwipeableChildren[i] = v;
    }


    /**
     * This method controls when the swipe-to-refresh gesture is triggered. By returning false here
     * we are signifying that the view is in a state where a refresh gesture can start.
     *
     * &lt;p&gt;As {@link android.support.v4.widget.SwipeRefreshLayout} only supports one direct child by
     * default, we need to manually iterate through our swipeable children to see if any are in a
     * state to trigger the gesture. If so we return false to start the gesture.
     */
    @Override
    public boolean canChildScrollUp() {
        if (mSwipeableChildren != null &amp;&amp; mSwipeableChildren.length &gt; 0) {
                for(int i = 0; i &lt; 3; i++)
                {
                        if((i == visibleView) &amp;&amp; mSwipeableChildren[i] != null &amp;&amp; !canViewScrollUp(mSwipeableChildren[i]))
                        {
                                return false;
                        }
                }               
        }

        return true;
    }



    /**
     * Utility method to check whether a {@link View} can scroll up from it's current position.
     * Handles platform version differences, providing backwards compatible functionality where
     * needed.
     */
    private static boolean canViewScrollUp(GridView view)
    {
        return view.getChildCount() &gt; 0 &amp;&amp;
                (view.getFirstVisiblePosition() &gt; 0
                        || view.getChildAt(0).getTop() &lt; view.getPaddingTop());
    }

    public void setVisibleView(int i)
    {
        visibleView = i;
    }

}
</code></pre>
",884076,,884076,,2016-05-19 10:47:49,2016-05-19 10:47:49,,,,8,,,
Android,36542843,2,,36444252,2016,,3,,"<p>Based on this sample <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">android-Camera2Basic</a></p>

<p>I've applied some change and this is result:</p>

<p><strong>Camera2BasicFragmentFront.java</strong> </p>

<p><a href=""http://pastebin.com/Krsgyd6L"" rel=""nofollow"">Source</a></p>

<p><strong>Camera2BasicFragment.java</strong></p>

<p><a href=""http://pastebin.com/Q8LMeCQR"" rel=""nofollow"">Source</a></p>

<p><strong>AutoFitTextureView.java</strong></p>

<p><a href=""http://pastebin.com/38j7vzqb"" rel=""nofollow"">Source</a></p>

<p><strong>fragment_camera2_basic.xml</strong> (Make sure to replace com.YourPackage.AutoFitTextureView)</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;&lt;!--
 Copyright 2014 The Android Open Source Project
 Licensed under the Apache License, Version 2.0 (the ""License"");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at
     http://www.apache.org/licenses/LICENSE-2.0
 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an ""AS IS"" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
--&gt;
&lt;RelativeLayout xmlns:android=""http://schemas.android.com/apk/res/android""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""&gt;

    &lt;com.YourPackage.AutoFitTextureView
        android:id=""@+id/texture""
        android:layout_width=""wrap_content""
        android:layout_height=""wrap_content""
        android:layout_alignParentStart=""true""
        android:layout_alignParentTop=""true"" /&gt;

&lt;/RelativeLayout&gt;
</code></pre>

<p><strong>activity_main.xml</strong></p>

<pre><code>&lt;RelativeLayout android:layout_width=""match_parent""
    android:layout_height=""match_parent""
    xmlns:android=""http://schemas.android.com/apk/res/android""&gt;
&lt;FrameLayout xmlns:android=""http://schemas.android.com/apk/res/android""
    xmlns:tools=""http://schemas.android.com/tools""
    android:id=""@+id/container""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent"" &gt;
&lt;/FrameLayout&gt;
&lt;FrameLayout
android:id=""@+id/containerFront""
android:layout_width=""200dp""
android:layout_height=""200dp"" /&gt;
&lt;/RelativeLayout&gt;
</code></pre>

<p>Than in MainActivity.java:</p>

<pre><code>public class MainActivity extends AppCompatActivity{
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        if (null == savedInstanceState) {
            getFragmentManager().beginTransaction()
                    .replace(R.id.container, Camera2BasicFragment.newInstance())
                    .commit();
            getFragmentManager().beginTransaction()
                    .replace(R.id.containerFront, Camera2BasicFragmentFront.newInstance())
                    .commit();
        }
    }
}
</code></pre>

<p>And use this permission to <strong>Manifest.xml</strong></p>

<pre><code>&lt;uses-permission android:name=""android.permission.CAMERA"" /&gt;
&lt;uses-feature android:name=""android.hardware.camera"" /&gt;
&lt;uses-feature android:name=""android.hardware.camera.autofocus"" /&gt;
</code></pre>

<p>That's all enjoy!</p>

<p>P.S
Java classes also contain method to save photo!</p>
",4529790,,,,,2016-04-11 7:52:41,,,,2,,,
Android,50625719,2,,50352358,2018,,3,,"<p>I'm doing exactly an exercise about endless scroll on apps and learning <strong>RxJava</strong>.</p>

<p>I was <em>gandalfing</em> around StackOverflow and other site, in search of a good samples and guides.</p>

<p>So far I found <a href=""https://gist.github.com/dustin-graham/52eaaab1cb3a41aba444"" rel=""nofollow noreferrer"">this one</a>, which I also report here (of course, copyright goes to the gist owner).</p>

<p><strong>ApiService.class</strong></p>

<pre><code>public static Observable&lt;List&lt;String&gt;&gt; paginatedThings(final Observable&lt;Void&gt; onNextObservable) {
        return Observable.create(new Observable.OnSubscribe&lt;List&lt;String&gt;&gt;() {
            @Override
            public void call(final Subscriber&lt;? super List&lt;String&gt;&gt; subscriber) {

            onNextObservable.subscribe(new Observer&lt;Void&gt;() {
                int latestPage = -1;
                @Override
                public void onCompleted() {
                    subscriber.onCompleted();
                }

                @Override
                public void onError(Throwable e) {
                    subscriber.onError(e);
                }

                @Override
                public void onNext(Void aVoid) {
                    latestPage++;
                    List&lt;String&gt; pageItems = new ArrayList&lt;String&gt;();
                    for (int i = 0; i &lt; 10; i++) {
                        pageItems.add(""page "" + latestPage + "" item "" + i);
                    }
                    subscriber.onNext(pageItems);
                }
            });
        }
    });
}
</code></pre>

<p><strong>ReactiveList.java</strong></p>

<pre><code>import android.app.Activity;
import android.os.Bundle;
import android.support.v7.widget.LinearLayoutManager;
import android.support.v7.widget.RecyclerView;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

import com.example.rxandroid.api.RepresentativeApi;

import java.util.ArrayList;
import java.util.List;
import java.util.concurrent.TimeUnit;

import butterknife.ButterKnife;
import butterknife.InjectView;
import rx.Observable;
import rx.Observer;
import rx.Subscriber;
import rx.android.schedulers.AndroidSchedulers;
import rx.subscriptions.CompositeSubscription;
import timber.log.Timber;

import static rx.android.app.AppObservable.bindActivity;

/**
 * Created by Dustin on 2/14/15.
 */
public class ReactiveList extends Activity {

    @InjectView(R.id.reactiveList)
    RecyclerView reactiveList;

    private ReactiveRecyclerAdapter adapter = new ReactiveRecyclerAdapter();
    private LinearLayoutManager layoutManager;

    private CompositeSubscription subscriptions = new CompositeSubscription();

    private List&lt;String&gt; mockItems = new ArrayList&lt;&gt;();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.reactive_list);
        ButterKnife.inject(this);

        for (int i = 0; i &lt; 100; i++) {
            mockItems.add(String.valueOf(i));
        }

        reactiveList.setHasFixedSize(true);
        reactiveList.setAdapter(adapter);
        layoutManager = new LinearLayoutManager(this);
        reactiveList.setLayoutManager(layoutManager);

        adapter.addAll(mockItems);

        Observable&lt;Void&gt; pageDetector = Observable.create(new Observable.OnSubscribe&lt;Void&gt;() {
            @Override
            public void call(final Subscriber&lt;? super Void&gt; subscriber) {
                reactiveList.setOnScrollListener(new RecyclerView.OnScrollListener() {
                    int pastVisibleItems, visibleItemCount, totalItemCount;
                    @Override
                    public void onScrolled(RecyclerView recyclerView, int dx, int dy) {
                        visibleItemCount = layoutManager.getChildCount();
                        totalItemCount = layoutManager.getItemCount();
                        pastVisibleItems = layoutManager.findFirstVisibleItemPosition();

                        if ((visibleItemCount+pastVisibleItems) &gt;= totalItemCount) {
                            subscriber.onNext(null);
                        }
                    }
                });
            }
        }).debounce(400, TimeUnit.MILLISECONDS);

        bindActivity(this, pageDetector);
        Observable&lt;List&lt;String&gt;&gt; listItemObservable = RepresentativeApi.paginatedThings(pageDetector);
        bindActivity(this, listItemObservable);
        subscriptions.add(listItemObservable.observeOn(AndroidSchedulers.mainThread()).subscribe(new Observer&lt;List&lt;String&gt;&gt;() {
            @Override
            public void onCompleted() {
                Timber.d(""completed"");
            }

            @Override
            public void onError(Throwable e) {
                Timber.e(""error: "" + e.getMessage());
            }

            @Override
            public void onNext(List&lt;String&gt; strings) {
                adapter.addAll(strings);
            }
        }));
    }

    public static class ReactiveRecyclerAdapter extends RecyclerView.Adapter&lt;ReactiveRecyclerAdapter.ReactiveViewHolder&gt; {

        private List&lt;String&gt; items = new ArrayList&lt;&gt;();

        public void addAll(List&lt;String&gt; moreItems) {
            items.addAll(moreItems);
            notifyDataSetChanged();
        }

        @Override
        public ReactiveViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {
            View v = LayoutInflater.from(parent.getContext()).inflate(android.R.layout.simple_list_item_1,parent,false);
            ReactiveViewHolder vh = new ReactiveViewHolder(v);
            return vh;
        }

        @Override
        public void onBindViewHolder(ReactiveViewHolder holder, int position) {
            String item = items.get(position);
            holder.label.setText(item);
        }

        @Override
        public int getItemCount() {
            return items.size();
        }

        public static class ReactiveViewHolder extends RecyclerView.ViewHolder {

            TextView label;
            public ReactiveViewHolder(View itemView) {
                super(itemView);
                label = (TextView) itemView.findViewById(android.R.id.text1);
            }
        }
    }
}
</code></pre>

<p>And if you are interested on other tools, give a look at <a href=""https://developer.android.com/topic/libraries/architecture/"" rel=""nofollow noreferrer"">Google Architecture</a>.</p>

<p>The goal is to simplify app code (and why not, coders life): you will find the <a href=""https://developer.android.com/topic/libraries/architecture/paging/"" rel=""nofollow noreferrer"">Paging library</a> which you can use to solve endless scroll (I'm currently studying this too). By the way, it uses <strong>RxJava2</strong>.</p>

<p>If you want, there is an example on this <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/PagingWithNetworkSample"" rel=""nofollow noreferrer"">GitHub repo</a> and it is done with Kotlin(!).</p>

<p>Conclusion: endless scroll can be very tricky and I strongly advice to take your time to learn and understand how it works, be it with libraries or not.</p>
",2013835,,,,,2018-05-31 13:40:06,,,,1,,,
Android,35004160,2,,20367402,2016,,3,,"<p><strong>Official example</strong></p>

<p>In Android SDK 23 under <code>samples/android-23/sensors/BatchStepSensor</code>, run with:</p>

<pre><code>./gradlew clean
./gradlew assembleDebug
./gradlew installDebug
</code></pre>

<p>Then turn on the app, enable one of the step sensors, and walk around with your phone to see the counter increment. </p>

<p>Source at: <a href=""https://github.com/googlesamples/android-BatchStepSensor"" rel=""nofollow"">https://github.com/googlesamples/android-BatchStepSensor</a></p>
",895245,,895245,,2016-08-23 7:21:59,2016-08-23 7:21:59,,,,0,,,
Android,44911261,2,,44910631,2017,,3,,"<p>A little searching shows that Trival Drive V2 sample has a shared build.gradle file:</p>

<p><a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive_v2/shared-module/build.gradle"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive_v2/shared-module/build.gradle</a></p>

<p>which has the following line:</p>

<pre><code>compile 'com.android.billingclient:billing:dp-1'
</code></pre>

<p>Looking at the documentation here:</p>

<p><a href=""https://developer.android.com/google/play/billing/billing_library.html"" rel=""nofollow noreferrer"">https://developer.android.com/google/play/billing/billing_library.html</a></p>

<p>Shows that Google just released a new version of the Billing Library release dp-1:</p>

<blockquote>
  <p>Starting with Play Billing Library release dp-1 (June 2017), the minimum
  supported API level is Android 2.2 (API level 8). The minimum supported
  In-app Billing API is version 3.</p>
</blockquote>

<p>And specifically calls out changes to the minimum support Android API and In-app Billing API.</p>

<p>Given the Trivial Drive V2 sample app(s) has a Wear 2.0 example - this version has billing support on Wear 2.0 apps.</p>
",295004,,295004,,2017-07-04 17:18:09,2017-07-04 17:18:09,,,,6,,,
Android,53307250,2,,50158868,2018,,3,,"<p>I understand that this answer is probably too late, but maybe it can help someone in future.</p>

<p>Position of item in RecyclerView is determined by the position of corresponding data object (of type T) inside PagedList&lt;T&gt;. PagedList is designed to look alike good old List&lt;T&gt;, but can be thought of as an ""endless"" list of elements.</p>

<p>PagedList gets its elements by pages on demand through something called DataSource.Factory. A Factory is used because DataSource by itself can only grow in one direction. If you need to prepend elements in PagedList, or change or remove existing elements you must invalidate the DataSource and a new instance will be created through DataSource.Factory.</p>

<p>So, to insert your data elements where you want them you should implement your own DataSource and DataSource.Factory by subclassing these base classes. </p>

<p>Note: Room, data persistence library from AndroidX, provides facilities to automatically generate instances of these classes for your data. You can write SQL query like this:</p>

<pre><code>SELECT * FROM messages WHERE threadId=:threadId ORDER BY timestamp DESC
</code></pre>

<p>then get DataSource.Factory from this, use the factory to create LivaData&lt;PagedList&lt;Message&gt;&gt; and finally use the paged list to display messages in a RecyclerView in a chat application. Then, when you insert, update or remove data inside DB these changes will automatically propagate to the UI. This can be very useful. </p>

<p>I recommend you to read a few related examples a do codelabs:</p>

<ul>
<li><a href=""https://codelabs.developers.google.com/codelabs/android-paging/#0"" rel=""nofollow noreferrer"">https://codelabs.developers.google.com/codelabs/android-paging/#0</a></li>
<li><a href=""https://github.com/googlesamples/android-architecture-components/tree/master/PagingSample"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components/tree/master/PagingSample</a></li>
<li><a href=""https://github.com/googlesamples/android-architecture-components/tree/master/PagingWithNetworkSample"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components/tree/master/PagingWithNetworkSample</a></li>
</ul>
",3378767,,,,,2018-11-14 19:12:54,,,,0,,,
Android,39277253,2,,37859211,2016,,3,,"<p>You have to do it yourself. See the example here:</p>

<p><a href=""https://github.com/googlesamples/android-FingerprintDialog/blob/master/Application/src/main/java/com/example/android/fingerprintdialog/FingerprintAuthenticationDialogFragment.java"" rel=""nofollow"">https://github.com/googlesamples/android-FingerprintDialog/blob/master/Application/src/main/java/com/example/android/fingerprintdialog/FingerprintAuthenticationDialogFragment.java</a></p>

<p>In the onError() method it will call the goToBackup method, which will change the dialog to a password dialog.</p>

<p>I'm not sure how Samsung did it and what was your intention, but the current Android Fingerprint API cannot fallback to any other device authentication, so you have to use your own fall back (see the second bullet):</p>

<p><a href=""https://developer.android.com/training/articles/keystore.html#UserAuthentication"" rel=""nofollow"">https://developer.android.com/training/articles/keystore.html#UserAuthentication</a></p>
",1067763,,,,,2016-09-01 17:05:57,,,,0,,,
Android,50314958,2,,48173679,2018,,3,,"<p>There is great sample @yigit related to the Paging library which also shows how to handle progress bar, error and Retry in Recyclerview. So Basically he is creating a <code>Listing.kt</code> data class which consist of the <code>NetworkState</code> and <code>PagedList</code> Like below</p>

<p><strong>Listing.kt</strong>
</p>

<pre><code>data class Listing&lt;T&gt;(
        // the LiveData of paged lists for the UI to observe
        val pagedList: LiveData&lt;PagedList&lt;T&gt;&gt;,
        // represents the network request status to show to the user
        val networkState: LiveData&lt;NetworkState&gt;,
        // represents the refresh status to show to the user. Separate from networkState, this
        // value is importantly only when refresh is requested.
        val refreshState: LiveData&lt;NetworkState&gt;,
        // refreshes the whole data and fetches it from scratch.
        val refresh: () -&gt; Unit,
        // retries any failed requests.
        val retry: () -&gt; Unit)
</code></pre>

<p><strong>NetworkState.kt</strong>
</p>

<pre><code>enum class Status {
    RUNNING,
    SUCCESS,
    FAILED
}

@Suppress(""DataClassPrivateConstructor"")
data class NetworkState private constructor(
        val status: Status,
        val msg: String? = null) {
    companion object {
        val LOADED = NetworkState(Status.SUCCESS)
        val LOADING = NetworkState(Status.RUNNING)
        fun error(msg: String?) = NetworkState(Status.FAILED, msg)
    }
}
</code></pre>

<p><strong>RedditPostRepository.kt</strong>
</p>

<pre><code>interface RedditPostRepository {
    fun postsOfSubreddit(subReddit: String, pageSize: Int): Listing&lt;RedditPost&gt;

    enum class Type {
        IN_MEMORY_BY_ITEM,
        IN_MEMORY_BY_PAGE,
        DB
    }
}
</code></pre>

<p>The <code>SubRedditViewModel.k</code> observe the <code>Listing&lt;RedditPost&gt;</code> from <code>RedditPostRepository.kt</code> notify to UI about the state and data and UI updates the view accordingly. To know more about how the <code>NetworkState</code> propagate from  <strong>Datasource to ViewModel</strong> Look at the <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/PagingWithNetworkSample/app/src/main/java/com/android/example/paging/pagingwithnetwork/reddit/repository/inMemory/byPage/PageKeyedSubredditDataSource.kt"" rel=""nofollow noreferrer"">PageKeyedSubredditDataSource.kt</a> and <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/PagingWithNetworkSample/app/src/main/java/com/android/example/paging/pagingwithnetwork/reddit/repository/inMemory/byPage/SubRedditDataSourceFactory.kt"" rel=""nofollow noreferrer"">SubRedditDataSourceFactory.kt</a>  </p>

<p>Here is the <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/PagingWithNetworkSample"" rel=""nofollow noreferrer"">Link</a> to the Google sample by @yigit.</p>
",3983816,,3983816,,2018-12-04 2:41:11,2018-12-04 2:41:11,,,,3,,,
Android,41730541,2,,41730394,2017,,3,,"<p>Your media player instance is going to live on the main thread, which is the UI thread. This is not recommended.</p>

<p>I would probably create a service that would create a new thread holding the media player. Each of your activities could then bind to the service to control the media player.</p>

<p>See section <a href=""https://developer.android.com/guide/components/services.html"" rel=""nofollow noreferrer"">Extending the service class</a>.</p>

<p>You can also look at <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""nofollow noreferrer"">the media player sample</a>.</p>
",1245894,,,,,2017-01-18 22:23:25,,,,5,,,
Android,50679302,2,,50678667,2018,,3,,"<p>The problem is the one stated in the error, you can't have dynamically defined arguments for your <code>@Query</code> annotation. If you want to define the name of the table somewhere else, use string concatenation. You can do it like this:</p>

<pre><code>@Query(""SELECT * FROM "" + Table.USER_TABLE)
fun getAll(): List&lt;User&gt;
</code></pre>

<p>This is how they do it in this <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/PersistenceContentProviderSample/app/src/main/java/com/example/android/contentprovidersample/data/CheeseDao.java"" rel=""nofollow noreferrer"">google</a> sample.</p>
",7765139,,,,,2018-06-04 11:14:33,,,,2,,,
Android,49865438,2,,49864119,2018,,3,,"<p>Your approach to passing bitmap data to another activity is wrong. First of all, you should check <a href=""https://developer.android.com/guide/components/activities/activity-lifecycle.html"" rel=""nofollow noreferrer"">Android Activity Lifecycle</a>. When you start different Activity, let's call it B from A, the A Activity will be destroyed and all resources will be destroyed. On the Android Activity LifeCycle documentation, they mentioned this: </p>

<blockquote>
  <p>The onDestroy() callback releases all resources that have not yet been
  released by earlier callbacks such as onStop().</p>
</blockquote>

<p>So, you cannot access the variables after activity destroyed. What you should do is, you should save the bitmap to the file and pass the file URI via the intent extra and get the URI from another activity's onCreate callback.</p>

<p>You can use FileProvider to save the file, and pass the provider URI via intent which is the best ""<strong><em>Android kind</em></strong>"" approach, or you can save the file's path to the shared preferences, and read it from another activity which is not stable and not the best practice.</p>

<p>Let's use FileProvider: 
You can check the <a href=""https://developer.android.com/reference/android/support/v4/content/FileProvider.html#ProviderDefinition"" rel=""nofollow noreferrer"">Android Documentation about FileProvider</a> to define it. </p>

<pre><code>// Assume that you added Captures path to your FileProvider's paths.
// Create temporary image file.
String fileName = ""IMG_"" + new SimpleDateFormat(""yyyyMMdd-HHmmss"").format(new Date()) + "".jpg"";  
File captureDirectory = new File(getFilesDir(), ""Captures"");
if( !captureDirectory.isDirectory() ) captureDirectory.mkdirs();
File mediaFile = new File(captureDirectory, fileName);

Uri fileUri = FileProvider.getUriForFile(this,
                    ""com.mydomain.fileprovider"",
                    mediaFile);  

// Save the Bitmap.
public void onImageAvailable(ImageReader imageReader) {
    Image mImage = imageReader.acquireLatestImage();
    ByteBuffer buffer = mImage.getPlanes()[0].getBuffer();
    byte[] bytes = new byte[buffer.remaining()];
    buffer.get(bytes);
    OutputStream output = null;
    try {
        output = getContentResolver().openOutputStream(fileUri);
        output.write(bytes);
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        mImage.close();
        if (output != null) {
            try {
                output.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
}

// Pass the file uri via intent.
Intent displayIntent = new Intent(this, DisplayActivity.class);
displayIntent.putExtra(""FILE_URI"", mediaFile);
startActivity(displayIntent);

// Read the uri from started activity and show the bitmap
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_display);

    ... 
    bundleExtras = getIntent().getExtras();
    if(bundleExtras != null){
        Uri savedBitmapUri = bundleExtras.getParcelable(""FILE_URI"");
        mImageView_Preview.setImageURI(savedBitmapUri);
    }
    else{
        // Uri not inside the intent data.
    }
    ...
}
</code></pre>

<p>You should not load all bytes to the memory as a Bitmap. You can just save the captured image to the file and pass its file Uri created from your application's FileProvider and show the file Uri with one line code. </p>

<p>Basic optimizations: 
 - You can create the file in the cache directory<br>
 - You can remove the file after completing your task with using <a href=""https://developer.android.com/reference/android/support/v4/content/FileProvider.html#Permissions"" rel=""nofollow noreferrer"">FileProvider
   permissions</a>.
 - You can do the saving job on the background thread like Google did in <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">android-Camera2Basic</a> sample. 
 - And more...</p>
",2774420,,,,,2018-04-16 20:09:02,,,,13,,,
Android,51390062,2,,51381845,2018,,3,,"<p>First I would like to point you to
<a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">Android Architecture Blueprints</a> on GitHub:  </p>

<blockquote>
  <p>The focus of this project is on demonstrating how to structure your
  code, design your architecture, and the eventual impact of adopting
  these patterns on testing and maintaining your app. You can use the
  techniques demonstrated here in many different ways to build apps.
  Your own particular priorities will impact how you implement the
  concepts in these projects, so you should not consider these samples
  to be canonical examples.</p>
</blockquote>

<p>These are the official examples of different architectures in Android, you should definitely check that out as an inspiration for you own projects.</p>

<p>a. Your updated version is the correct way to do this - to retrieve a list of items, invoke the repository method once and store the return value in the <code>ViewModel</code>. Use <code>LiveData&lt;List&lt;Item&gt;&gt;</code> as a return value in your DAO and Room will automatically notify your <code>Observer</code> in the <code>Fragment</code> of any changes.</p>

<p>b. <code>ViewModel</code> can have the <code>updateItem(item: Item)</code> method. The <code>onClickListener</code> should be placed in the <code>Fragment</code>. You might want to do some validation in the <code>Fragment</code> as well before invoking the <code>updateItem</code> method. Also it is important to not hold any <code>View</code> references in the <code>ViewModel</code>.<br>
To notify the <code>Fragment</code> about the update status, you might consider having another <code>LiveData</code> field in the <code>ViewModel</code> (for example <code>errorMessage: LiveData&lt;Int&gt;</code>) and assign it the <code>R. id</code> of the string resource you would like to display. This way you move the logic of determining the specific message to display from the <code>Fragment</code> to the <code>ViewModel</code>.</p>

<p>c. You only need some arguments in the <code>ViewModel</code>. For instance, when you have an id extra argument passed to the <code>Fragment</code> in a <code>Bundle</code>, you would init the <code>ViewModel</code> with this id to load the item.</p>

<p>d. Passing the <code>Item</code> can definitely be a good approach. You can also consider creating a Presenter to separate some logic out of the <code>Fragment</code> (so it does not work with the <code>Item</code>). You will find more information and examples on the GitHub link above.</p>

<p>So I think there are different approaches to choose from depending on the app you are developing. Testing is very important and after implementing one approach you will find how it affects the ease of writing your tests. But this is how I see the answers for your questions.</p>
",8402591,,,,,2018-07-17 20:56:03,,,,4,,,
Android,51494050,2,,51489023,2018,,3,,"<p>The way to do this is quite simple.
If You look at Google Samples You will have a clear direction. Like <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample"" rel=""nofollow noreferrer"">GitHubBrowserSample</a></p>

<p>So You will create an <code>interface Injectable</code> like this, basically a marker interface.</p>

<pre><code>/**
 * Marks an activity / fragment injectable.
 */
interface Injectable
</code></pre>

<p>Each activity or fragment will implement this interface for example like this (in Kotlin)</p>

<pre><code>open class BaseActivity : AppCompatActivity(),Injectable {

@Inject
lateinit var viewModelFactory: ViewModelProvider.Factory
lateinit var baseActivityViewModel: BaseActivityViewModel

override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    AndroidInjection.inject(this)
    baseActivityViewModel = ViewModelProviders.of(this, viewModelFactory)
            .get(BaseActivityViewModel::class.java)
}
</code></pre>

<p>}</p>

<p>Important lines are : </p>

<p><code>open class BaseActivity : AppCompatActivity(),Injectable</code></p>

<pre><code>AndroidInjection.inject(this)
</code></pre>

<p>Create an Activity module to contribute Activity object</p>

<pre><code>/**
 * Module to contribute all the activities.
 */
@Module
abstract class ActivityModule {

    @ContributesAndroidInjector
    internal abstract fun contributeSplashActivity(): SplashActivity

}
</code></pre>

<p>and finally <code>DaggerInjector</code> to enable injection</p>

<pre><code>/**
 * Helper to inject all the activities and fragments that are marked Injectable.
 */

object DaggerInjector {

    fun injectAll(application: TurtleApp) {
        DaggerAppComponent.builder()
                .application(application)
                .build().inject(application)
        application
                .registerActivityLifecycleCallbacks(object : Application.ActivityLifecycleCallbacks {
                    override fun onActivityCreated(activity: Activity, savedInstanceState: Bundle?) {
                        injectComponents(activity)
                    }

                    override fun onActivityStarted(activity: Activity) {

                    }

                    override fun onActivityResumed(activity: Activity) {

                    }

                    override fun onActivityPaused(activity: Activity) {

                    }

                    override fun onActivityStopped(activity: Activity) {

                    }

                    override fun onActivitySaveInstanceState(activity: Activity, outState: Bundle) {

                    }

                    override fun onActivityDestroyed(activity: Activity) {

                    }
                })
    }

    private fun injectComponents(activity: Activity) {
        if (activity is Injectable) {
            AndroidInjection.inject(activity)
        }
//        (activity as? FragmentActivity)?.supportFragmentManager?.registerFragmentLifecycleCallbacks(
//                object : FragmentManager.FragmentLifecycleCallbacks() {
//                    override fun onFragmentCreated(fm: FragmentManager?, f: Fragment?,
//                                                   savedInstanceState: Bundle?) {
//                        if (f is Injectable) {
//                            AndroidSupportInjection.inject(f)
//                        }
//                    }
//                }, true)
    }
}
</code></pre>

<p>Uncomment the code to enable <code>Fragment</code> injection.</p>
",1801202,,,,,2018-07-24 8:33:43,,,,1,,,
Android,32393148,2,,32155107,2015,,3,,"<p>This is possible now with the new <a href=""http://android-developers.blogspot.in/2015/08/barcode-detection-in-google-play.html"" rel=""nofollow"">Barcode Scanning Apis</a> available from Google Play Services 7.8 version. It has method to detect barcode passed as a bitmap.
Get path of image from gallery and convert it to bitmap and pass it like below:</p>

<pre><code>     Frame frame = new Frame.Builder().setBitmap(bitmap).build();
     BarcodeDetector barcodeDetector = new BarcodeDetector.Builder(context)
                    .build();
if(barcode.isOperational()){
    SparseArray&lt;Barcode&gt; sparseArray = barcodeDetector.detect(frame);
                if(sparseArray != null &amp;&amp; sparseArray.size() &gt; 0){
                    for (int i = 0; i &lt; sparseArray.size(); i++){
                                        Log.d(LOG_TAG, ""Value: "" + sparseArray.valueAt(i).rawValue + ""----"" + sparseArray.valueAt(i).displayValue);
                                        Toast.makeText(LOG_TAG, sparseArray.valueAt(i).rawValue, Toast.LENGTH_SHORT).show();

                                    }
                }else {
                    Log.e(LOG_TAG,""SparseArray null or empty"");
                }

}else{
    Log.e(LOG_TAG, ""Detector dependencies are not yet downloaded"");
}
</code></pre>

<p>In your build.gradle file, include the following under dependencies section:
compile 'com.google.android.gms:play-services:7.8.+'</p>

<p>Following Manifest permissions are must:</p>

<pre><code>&lt;uses-feature android:name=""android.hardware.camera"" /&gt;
    &lt;uses-feature android:name=""android.hardware.camera.autofocus"" /&gt;

    &lt;uses-permission android:name=""android.permission.INTERNET"" /&gt;
    &lt;uses-permission android:name=""android.permission.ACCESS_NETWORK_STATE"" /&gt;
    &lt;uses-permission android:name=""android.permission.CAMERA"" /&gt;
    &lt;uses-permission android:name=""com.google.android.providers.gsf.permission.READ_GSERVICES"" /&gt;
    &lt;uses-permission android:name=""android.permission.WRITE_EXTERNAL_STORAGE"" /&gt;
    &lt;uses-permission android:name=""android.permission.READ_EXTERNAL_STORAGE"" /&gt;
</code></pre>

<p>Meta data for google play services:</p>

<pre><code>&lt;meta-data
            android:name=""com.google.android.gms.version""
            android:value=""@integer/google_play_services_version"" /&gt;
</code></pre>

<p>Meta data for first time install/run time dependencies to be downloaded for getting barcode detector operational.</p>

<pre><code>&lt;meta-data
            android:name=""com.google.android.gms.vision.DEPENDENCIES""
            android:value=""barcode"" /&gt;
</code></pre>

<p>For detailed usage of this api, Refer <a href=""https://github.com/googlesamples/android-vision"" rel=""nofollow"">Github Sample</a>, follow <a href=""https://search-codelabs.appspot.com/codelabs/bar-codes"" rel=""nofollow"">Code Lab</a>, <a href=""https://developers.google.com/android/reference/com/google/android/gms/vision/package-summary"" rel=""nofollow"">Documentation</a>.</p>
",4002813,,,,,2015-09-04 8:08:56,,,,1,,,
Android,50931287,2,,16859727,2018,,3,,"<p><strong>Follow this solution if you are using Android Studio.</strong></p>

<p><strong>First</strong>, download OpenGL Mathematics library <a href=""https://glm.g-truc.net/0.9.9/index.html"" rel=""nofollow noreferrer"">here</a></p>

<p><strong>Second</strong>, extract and copy folder ""../glm/glm"" to your project location at ""../app/src/main/cpp""</p>

<p><strong>Third</strong>, on CMakeList.txt, add the following:</p>

<pre><code># Import the CMakeLists.txt for the glm library
add_subdirectory(glm) # if your CMakeLists is at '../cpp'
# add_subdirectory(src/main/cpp/glm) # if your CMakeLists is at '../app'

# add lib dependencies
target_link_libraries(
# Specifies the target library.
native-lib
# Links the target library to the log library included in the NDK.
GLESv2
glm)
</code></pre>

<p><strong>Fourth</strong>, on 'buidl.griddle' (Mobile App), make sure you have right path to your CMakeList </p>

<pre><code> externalNativeBuild {
        cmake {
            path ""src/main/cpp/CMakeLists.txt""
        }
 }
</code></pre>

<p><strong>Fifth</strong>, include glm headers to your source file:</p>

<pre><code>// open GL libs
#include &lt;GLES2/gl2.h&gt;
#include &lt;glm/glm.hpp&gt;
#include &lt;glm/gtc/matrix_transform.hpp&gt;
#include &lt;glm/gtc/type_ptr.hpp&gt;
#include &lt;glm/gtx/rotate_vector.hpp&gt;
#include &lt;glm/gtx/closest_point.hpp&gt;
</code></pre>

<p>Sample is available at android-ndk, see <a href=""https://github.com/googlesamples/android-ndk/tree/master/endless-tunnel"" rel=""nofollow noreferrer"">Android Endless Tunnel Game</a></p>
",8209516,,,,,2018-06-19 14:49:48,,,,0,,,
Android,51552283,2,,51548108,2018,,3,,"<p>i dont work with room but familiar with rxjava you can design your repository like that</p>

<p>your room interfac </p>

<pre><code>@Query(SELECT * FROM Users WHERE id = :userId)
Single&lt;User&gt; getUserById(String userId);
</code></pre>

<p><strong>when use :</strong><br>
<strong>Maybe</strong>  When there is no user in the database and the query returns no rows, Maybe will complete.</p>

<p><strong>Flowable</strong> Every time the user data is updated, the Flowable object will emit automatically, allowing you to update the UI based on the latest dat </p>

<p><strong>Single</strong> When there is no user in the database and the query returns no rows, Single will trigger onError(EmptyResultSetException.class)</p>

<p>read more about Room and  RxJava  this <a href=""https://medium.com/google-developers/room-rxjava-acb0cd4f3757"" rel=""nofollow noreferrer"">link</a></p>

<p>to achieve "" if there is not data in db call  web services "" create your repository methode like that </p>

<pre><code>public Single&lt;User&gt; getUserById(String userId){
 return  db.getUserById(userId)
              /// if there is no user in the database get data from api
             .onErrorResumeNext(api.getUserById(userId)
              .subscribeOn(Schedulers.io())
              //check your request
              .filter(statusPojo::getStatus)
               // save data to room
              .switchMap(data -&gt; {
              //sava data to db
              return Observable.just(data)
              })
           );

}
</code></pre>

<p>finally call repository method from interactor to  passed obsrevable to interactor then to presentation layout</p>

<p>more detail : you can inject Api and DB to your repository </p>

<p><strong>update_Answer</strong> for reactive db 
if you want get last update on UI just do it :</p>

<p>your room interface: </p>

<pre><code>@Query(SELECT * FROM Users WHERE id = :userId)
Flowable&lt;User&gt; getUserById(String userId);
</code></pre>

<p>repository :</p>

<pre><code>   @Override
public Flowable&lt;User&gt; getUser(int id) {
    getUserFromNet(id);
         //first emit cache data in db and after request complete   emit last update from net 
        return db.getUserById(id);

 }


 private Flowable&lt;User&gt; getUserFromNet(int id){
      api.getUserById(userId)
          .subscribeOn(Schedulers.io())
          .observeOn(Schedulers.io())
          //check your request
          .filter(statusPojo::getStatus)
           // save data to room
          .subscribe(new DisposableObserver&lt;User&gt;() {
                @Override
                public void onNext(User user) {
                     // save data to room
                }

                @Override
                public void onError(Throwable e) {
                    Timber.e(e);
                }

                @Override
                public void onComplete() {


                }
            });
}
</code></pre>

<p><strong>update_Answer2</strong> for reactive db and "" if there is not data in db call web services ""
according this <a href=""https://github.com/googlesamples/android-architecture-components/issues/84"" rel=""nofollow noreferrer"">issue</a> is better use return a <code>Flowable &lt;List&lt;T&gt;&gt;</code></p>

<p>and check list size instead of <code>Flowable&lt;T&gt;</code> white <code>swichIfEmpity</code> because if don't any user in db <code>Flowable&lt;T&gt;</code> do'nt call <code>onNext()</code> and don't emite <code>FlowableEmpity();</code></p>

<pre><code>private Flowable&lt;List&lt;User&gt;&gt;  getUser(int id){
       return db.getUserById(id).
         /// if there is no user in the database get data from 
           .flatMp(userList-&gt; 
           if(userList.size==0)
          api.getUserById(userId)
          .subscribeOn(Schedulers.io())
          //check your request
          .filter(statusPojo::getStatus)
           // save data to room
          .subscribe(new DisposableObserver&lt;User&gt;() {
                @Override
                public void onNext(User user) {
                     // save data to room
                }

                @Override
                public void onError(Throwable e) {
                    Timber.e(e);
                }

                @Override
                public void onComplete() {


                }
            });
                return Flowable.just(data)
                );
}
</code></pre>
",6685154,,6685154,,2018-08-10 10:32:10,2018-08-10 10:32:10,,,,10,,,
Android,31062980,2,,31062804,2015,,3,,"<p>Maybe you should take a look at Topeka .
<a href=""http://android-developers.blogspot.co.uk/2015/06/more-material-design-with-topeka-for_16.html"" rel=""nofollow"">http://android-developers.blogspot.co.uk/2015/06/more-material-design-with-topeka-for_16.html</a></p>

<p>Available at GitHub:
<a href=""https://github.com/googlesamples/android-topeka"" rel=""nofollow"">https://github.com/googlesamples/android-topeka</a></p>
",4109713,,,,,2015-06-26 0:27:12,,,,1,,,
Android,48009944,2,,27515487,2017,,3,,"<p>I had a similar problem regarding the saved image.</p>

<p>I used something similar to what is described here <a href=""https://github.com/googlesamples/android-vision/issues/124"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vision/issues/124</a> by user kinghsumit (the comment from Sep 15, 2016).</p>

<p>I'll copy it here, just in case.</p>

<pre><code>private CameraSource.PictureCallback mPicture = new CameraSource.PictureCallback() {
    @Override
    public void onPictureTaken(byte[] bytes) {
       int orientation = Exif.getOrientation(bytes);
       Bitmap   bitmap = BitmapFactory.decodeByteArray(bytes, 0, bytes.length);
       switch(orientation) {
           case 90:
               bitmapPicture= rotateImage(bitmap, 90);
               break;
           case 180:
               bitmapPicture= rotateImage(bitmap, 180);
               break;
           case 270:
               bitmapPicture= rotateImage(bitmap, 270);
               break;
           case 0:
               // if orientation is zero we don't need to rotate this
           default:
               break;
       }
       //write your code here to save bitmap 
   }
}

public static Bitmap rotateImage(Bitmap source, float angle) {
    Matrix matrix = new Matrix();
    matrix.postRotate(angle);
    return Bitmap.createBitmap(source, 0, 0, source.getWidth(), source.getHeight(), matrix, true);
}
</code></pre>

<p>Below class is used to get orientation from byte[] data.</p>

<pre><code>public class Exif {
    private static final String TAG = ""CameraExif"";

    // Returns the degrees in clockwise. Values are 0, 90, 180, or 270.
    public static int getOrientation(byte[] jpeg) {
        if (jpeg == null) {
            return 0;
        }

        int offset = 0;
        int length = 0;

        // ISO/IEC 10918-1:1993(E)
        while (offset + 3 &lt; jpeg.length &amp;&amp; (jpeg[offset++] &amp; 0xFF) == 0xFF) {
            int marker = jpeg[offset] &amp; 0xFF;

            // Check if the marker is a padding.
            if (marker == 0xFF) {
                continue;
            }
            offset++;

            // Check if the marker is SOI or TEM.
            if (marker == 0xD8 || marker == 0x01) {
                continue;
            }
            // Check if the marker is EOI or SOS.
            if (marker == 0xD9 || marker == 0xDA) {
                break;
            }

            // Get the length and check if it is reasonable.
            length = pack(jpeg, offset, 2, false);
            if (length &lt; 2 || offset + length &gt; jpeg.length) {
                Log.e(TAG, ""Invalid length"");
                return 0;
            }

            // Break if the marker is EXIF in APP1.
            if (marker == 0xE1 &amp;&amp; length &gt;= 8 &amp;&amp;
                    pack(jpeg, offset + 2, 4, false) == 0x45786966 &amp;&amp;
                    pack(jpeg, offset + 6, 2, false) == 0) {
                offset += 8;
                length -= 8;
                break;
            }

            // Skip other markers.
            offset += length;
            length = 0;
        }

        // JEITA CP-3451 Exif Version 2.2
        if (length &gt; 8) {
            // Identify the byte order.
            int tag = pack(jpeg, offset, 4, false);
            if (tag != 0x49492A00 &amp;&amp; tag != 0x4D4D002A) {
                Log.e(TAG, ""Invalid byte order"");
                return 0;
            }
            boolean littleEndian = (tag == 0x49492A00);

            // Get the offset and check if it is reasonable.
            int count = pack(jpeg, offset + 4, 4, littleEndian) + 2;
            if (count &lt; 10 || count &gt; length) {
                Log.e(TAG, ""Invalid offset"");
                return 0;
            }
            offset += count;
            length -= count;

            // Get the count and go through all the elements.
            count = pack(jpeg, offset - 2, 2, littleEndian);
            while (count-- &gt; 0 &amp;&amp; length &gt;= 12) {
                // Get the tag and check if it is orientation.
                tag = pack(jpeg, offset, 2, littleEndian);
                if (tag == 0x0112) {
                    // We do not really care about type and count, do we?
                    int orientation = pack(jpeg, offset + 8, 2, littleEndian);
                    switch (orientation) {
                        case 1:
                            return 0;
                        case 3:
                            return 180;
                        case 6:
                            return 90;
                        case 8:
                            return 270;
                    }
                    Log.i(TAG, ""Unsupported orientation"");
                    return 0;
                }
                offset += 12;
                length -= 12;
            }
        }

        Log.i(TAG, ""Orientation not found"");
        return 0;
    }

    private static int pack(byte[] bytes, int offset, int length, boolean littleEndian) {
        int step = 1;
        if (littleEndian) {
            offset += length - 1;
            step = -1;
        }

        int value = 0;
        while (length-- &gt; 0) {
            value = (value &lt;&lt; 8) | (bytes[offset] &amp; 0xFF);
            offset += step;
        }
        return value;
    }
}
</code></pre>

<p>It worked for me, except for the Nexus 5x, but that's because that device has a peculiar issue due to its construction.</p>

<p>I hope this helps you!</p>
",7829835,,,,,2017-12-28 15:18:01,,,,3,,,
Android,47589558,2,,47582970,2017,,3,,"<p>With the latest release (AndroidThings DP 6) you can use the Camera v2 APIs</p>

<p><a href=""https://android-developers.googleblog.com/2017/11/android-things-developer-preview-6.html"" rel=""nofollow noreferrer"">https://android-developers.googleblog.com/2017/11/android-things-developer-preview-6.html</a></p>

<p>This should work: <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a></p>

<p>You need to make sure you have the flag set to true in the manifest</p>

<pre><code>&lt;activity

    ...
    android:hardwareAccelerated=""true""&gt;
</code></pre>

<blockquote>
  <p>the Camera2Basic sample using the Camera2 API and TextureView now works on both NXP and Raspberry Pi based devices (with the hardwareAccelerated flag set to true)</p>
</blockquote>
",413127,,,,,2017-12-01 8:44:47,,,,6,,,
Android,29667336,2,,29459630,2015,,3,,"<p>Ensure that you have added the required values to your AndroidManifest.xml</p>

<p>Permission:</p>

<pre><code>&lt;uses-permission android:name=""com.google.android.providers.gsf.permission.READ_GSERVICES""/&gt;
</code></pre>

<p>Meta-Data:</p>

<pre><code>&lt;meta-data
            android:name=""com.google.android.geo.API_KEY""
            android:value=""ADD_YOUR_API_KEY_HERE""/&gt;
</code></pre>

<p>Take a look at the Sample AndroidManifest.xml <a href=""https://github.com/googlesamples/android-play-places/blob/master/PlaceComplete/Application/src/main/AndroidManifest.xml"" rel=""nofollow"">here</a></p>
",2469765,,,,,2015-04-16 6:51:12,,,,2,,,
Android,44167821,2,,44135586,2017,,3,,"<p>This sample from Google <a href=""https://github.com/googlesamples/android-HdrViewfinder"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-HdrViewfinder</a> gives the basic of what you need to do.</p>

<p>Summary:</p>

<p>1) Add a <em>Surface</em> to the output of the camera</p>

<p>2) Listen to updates to this surface, in the above example it happens in <em>ViewfinderProcessor.java</em></p>

<p>The above example uses 2 surfaces for a fake HDR preview but you should easily be able to clean the example up to only use 1 surface. Also the example uses a custom Render Script kernel for processing, you don't need to use that. You can easily catch the buffer type <em>Allocation</em> in ViewfinderProcessor.java to get a byte array as in the old Camera API.</p>
",4027806,,,,,2017-05-24 20:22:58,,,,2,,,
Android,48248557,2,,47051069,2018,,3,,"<p>It's definitely weird.  I observed that many (but not all) of those fonts don't have a ""latin"" or ""latin-ext"" subset, so that seemed a way to auto-filter them.  I threw together a little python2 script that asks the API for the whole font list, then filters them for ""latin"" and outputs whats left as a new font-families resource file, which you can redirect to <code>family_names.xml</code>.</p>

<p>Usage:     <code>fontlist.py &lt;API_KEY&gt;</code></p>

<pre><code>#!/usr/bin/python
# fontlist.py by fat-tire
#
# Collects Google provider latin &amp; latin-ext font families and creates a replacement for
# https://github.com/googlesamples/android-DownloadableFonts/blob/master/app/src/main/res/values/family_names.xml
#
# See https://developers.google.com/fonts/docs/developer_api for more info on the Google Fonts API
#
# Usage:     fontlist.py &lt;API_KEY&gt; &gt; family_names.xml

import sys, urllib2, json

if len(sys.argv) != 2:
    print ""Usage:""
    print ""  fontlist.py &lt;API_KEY&gt; &gt; family_names.xml""
    print ""No Google Fonts API key?  Get one at https://developers.google.com/fonts/docs/developer_api#APIKey""
    sys.exit(0)

APIKEY=sys.argv[1]
url=""https://www.googleapis.com/webfonts/v1/webfonts?key=""

opener = urllib2.build_opener()
try:
    request = urllib2.Request(url + APIKEY)
    conn = opener.open(request)
except Exception, e:
    print ""Whoopsie.  Got a "" + str(e.code) + "" "" + str(e.reason) + "" error.  You sure that API is legit?""
    sys.exit(1)
data = json.loads(conn.read())

count = 0
items = data[""items""]

print ""&lt;?xml version=\""1.0\"" encoding=\""utf-8\""?&gt;""
print ""&lt;!-- Collected from "" + url+APIKEY + "" --&gt;""
print """"""&lt;resources&gt;
    &lt;string-array name=""family_names""&gt;""""""
for key in items:
    if ""latin"" in key[""subsets""]:
        print "" ""*10 + ""&lt;item&gt;"" + key[""family""] + ""&lt;/item&gt;""
        count = count + 1
print """"""    &lt;!--Total:  """""" + str(count) + """"""--&gt;
    &lt;/array&gt;
&lt;/resources&gt;""""""
sys.exit(0)
</code></pre>

<p>This script outputs a <a href=""https://gist.github.com/fat-tire/fb5a4e3617c4738e73af9318ed6720d5"" rel=""nofollow noreferrer"">family_names.xml</a> which is interesting.  If you compare it to the <a href=""https://github.com/googlesamples/android-DownloadableFonts/blob/master/app/src/main/res/values/family_names.xml"" rel=""nofollow noreferrer"">one provided by google</a>, it does black-out most of the fonts listed in the question. But it doesn't get all of them, including the ""Zilla"", ""Ubuntu"", ""Barcode"" and ""Encode"" fonts.  Maybe there's something these fonts also have in common that can be used to filter the list further?</p>

<p>Interestingly, the generated list also includes new fonts NOT in the github list, including:</p>

<ul>
<li>VolKorn SC</li>
<li>Spectral</li>
<li>Spectral SC</li>
<li>Sedgewick Ave</li>
<li>Sedgewick Ave Display</li>
</ul>

<p>....""Barlow"", ""Bellefair"", and a bunch more.  And some of these fonts do seem to work with Android.</p>

<p>So I'm guessing that the list in that demo file is just old.  Maybe there were licensing issues or technical issues that made it necessary to switch up the list. </p>

<p>Regardless it might be worth submitting a pull request with a newer and more up-to-date list that removes the no-longer provided fonts and adds in the ones that the API does offer that are tested and known to work with the provider.</p>
",3035127,,3035127,,2018-01-14 10:20:10,2018-01-14 10:20:10,,,,1,,,
Android,34619287,2,,34619227,2016,,3,,"<p>use the fusion API that google developer have developed with fusion of GPS Sensor,Magnetometer,Accelerometer also using Wifi or cell location to calculate or estimate the location. It is also able to give location updates also inside the building accurately.</p>

<pre><code>package com.example.ashis.gpslocation;

import android.app.Activity;
import android.location.Location;
import android.os.Bundle;
import android.support.v7.app.ActionBarActivity;
import android.support.v7.app.AppCompatActivity;
import android.util.Log;
import android.widget.TextView;
import android.widget.Toast;

import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.GooglePlayServicesUtil;
import com.google.android.gms.common.api.GoogleApiClient;
import com.google.android.gms.common.api.GoogleApiClient.ConnectionCallbacks;
import com.google.android.gms.common.api.GoogleApiClient.OnConnectionFailedListener;
import com.google.android.gms.location.LocationListener;
import com.google.android.gms.location.LocationRequest;
import com.google.android.gms.location.LocationServices;

import java.util.concurrent.Executors;
import java.util.concurrent.TimeUnit;

/**
 * Location sample.
 *
 * Demonstrates use of the Location API to retrieve the last known location for a device.
 * This sample uses Google Play services (GoogleApiClient) but does not need to authenticate a user.
 * See https://github.com/googlesamples/android-google-accounts/tree/master/QuickStart if you are
 * also using APIs that need authentication.
 */

public class MainActivity extends Activity implements LocationListener,
        GoogleApiClient.ConnectionCallbacks,
        GoogleApiClient.OnConnectionFailedListener {

    private static final long ONE_MIN = 500;
    private static final long TWO_MIN = 500;
    private static final long FIVE_MIN = 500;
    private static final long POLLING_FREQ = 1000 * 20;
    private static final long FASTEST_UPDATE_FREQ = 1000 * 5;
    private static final float MIN_ACCURACY = 1.0f;
    private static final float MIN_LAST_READ_ACCURACY = 1;

    private LocationRequest mLocationRequest;
    private Location mBestReading;
TextView tv;
    private GoogleApiClient mGoogleApiClient;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        if (!servicesAvailable()) {
            finish();
        }

        setContentView(R.layout.activity_main);
tv= (TextView) findViewById(R.id.tv1);
        mLocationRequest = LocationRequest.create();
        mLocationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);
        mLocationRequest.setInterval(POLLING_FREQ);
        mLocationRequest.setFastestInterval(FASTEST_UPDATE_FREQ);

        mGoogleApiClient = new GoogleApiClient.Builder(this)
                .addApi(LocationServices.API)
                .addConnectionCallbacks(this)
                .addOnConnectionFailedListener(this)
                .build();


        if (mGoogleApiClient != null) {
            mGoogleApiClient.connect();
        }
    }

    @Override
    protected void onResume() {
        super.onResume();

        if (mGoogleApiClient != null) {
            mGoogleApiClient.connect();
        }
    }

    @Override
    protected void onPause() {d
        super.onPause();

        if (mGoogleApiClient != null &amp;&amp; mGoogleApiClient.isConnected()) {
            mGoogleApiClient.disconnect();
        }
    }


        tv.setText(location + """");
        // Determine whether new location is better than current best
        // estimate
        if (null == mBestReading || location.getAccuracy() &lt; mBestReading.getAccuracy()) {
            mBestReading = location;


            if (mBestReading.getAccuracy() &lt; MIN_ACCURACY) {
                LocationServices.FusedLocationApi.removeLocationUpdates(mGoogleApiClient, this);
            }
        }
    }

    @Override
    public void onConnected(Bundle dataBundle) {
        // Get first reading. Get additional location updates if necessary
        if (servicesAvailable()) {

            // Get best last location measurement meeting criteria
            mBestReading = bestLastKnownLocation(MIN_LAST_READ_ACCURACY, FIVE_MIN);

            if (null == mBestReading
                    || mBestReading.getAccuracy() &gt; MIN_LAST_READ_ACCURACY
                    || mBestReading.getTime() &lt; System.currentTimeMillis() - TWO_MIN) {

                LocationServices.FusedLocationApi.requestLocationUpdates(mGoogleApiClient, mLocationRequest, this);

               //Schedule a runnable to unregister location listeners

                    @Override
                    public void run() {
                        LocationServices.FusedLocationApi.removeLocationUpdates(mGoogleApiClient, MainActivity.this);

                    }

                }, ONE_MIN, TimeUnit.MILLISECONDS);

            }

        }
    }

    @Override
    public void onConnectionSuspended(int i) {

    }


    private Location bestLastKnownLocation(float minAccuracy, long minTime) {
        Location bestResult = null;
        float bestAccuracy = Float.MAX_VALUE;
        long bestTime = Long.MIN_VALUE;

        // Get the best most recent location currently available
        Location mCurrentLocation = LocationServices.FusedLocationApi.getLastLocation(mGoogleApiClient);
        //tv.setText(mCurrentLocation+"""");
        if (mCurrentLocation != null) {
            float accuracy = mCurrentLocation.getAccuracy();
            long time = mCurrentLocation.getTime();

            if (accuracy &lt; bestAccuracy) {
                bestResult = mCurrentLocation;
                bestAccuracy = accuracy;
                bestTime = time;
            }
        }

        // Return best reading or null
        if (bestAccuracy &gt; minAccuracy || bestTime &lt; minTime) {
            return null;
        }
        else {
            return bestResult;
        }
    }

    @Override
    public void onConnectionFailed(ConnectionResult connectionResult) {

    }

    private boolean servicesAvailable() {
        int resultCode = GooglePlayServicesUtil.isGooglePlayServicesAvailable(this);

        if (ConnectionResult.SUCCESS == resultCode) {
            return true;
        }
        else {
            GooglePlayServicesUtil.getErrorDialog(resultCode, this, 0).show();
            return false;
        }
    }
}
</code></pre>
",3231608,,3231608,,2016-02-01 7:59:36,2016-02-01 7:59:36,,,,0,,,
Android,44185706,2,,44185477,2017,,3,,"<p>You are getting tree Uri. So you need to Add below code to get files from Tree Uri.</p>

<pre><code>        DocumentFile documentFile = DocumentFile.fromTreeUri(this, uri);
        for (DocumentFile file : documentFile.listFiles()) {

            if(file.isDirectory()){ // if it is sub directory
                // Do stuff with sub directory
            }else{
                // Do stuff with normal file
            }

           Log.d(""Uri-&gt;"",file.getUri() + ""\n"");

        }
</code></pre>

<p>For the query the contents, you can use below code.</p>

<pre><code>ContentResolver contentResolver = getActivity().getContentResolver();
    Uri docUri = DocumentsContract.buildDocumentUriUsingTree(uri,
            DocumentsContract.getTreeDocumentId(uri));
    Uri childrenUri = DocumentsContract.buildChildDocumentsUriUsingTree(uri,
            DocumentsContract.getTreeDocumentId(uri));
Cursor docCursor = contentResolver.query(docUri, new String[]{
            Document.COLUMN_DISPLAY_NAME, Document.COLUMN_MIME_TYPE}, null, null, null);
    try {
        while (docCursor.moveToNext()) {
            Log.d(TAG, ""found doc ="" + docCursor.getString(0) + "", mime="" + docCursor
                    .getString(1));

        }
    } finally {
        // close cursor
    }
</code></pre>

<p>You can check Google sample code: 
<a href=""https://github.com/googlesamples/android-DirectorySelection/blob/master/Application/src/main/java/com/example/android/directoryselection/DirectorySelectionFragment.java#L150"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-DirectorySelection/blob/master/Application/src/main/java/com/example/android/directoryselection/DirectorySelectionFragment.java#L150</a></p>
",2949612,,2949612,,2017-05-25 16:56:21,2017-05-25 16:56:21,,,,5,,,
Android,52146506,2,,51707889,2018,,3,,"<p><strong>EDIT 2:</strong> Though still no first class support (as of writing this), Google has now updated their samples with an example of how they think this should be solved for now: <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/NavigationAdvancedSample"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components/tree/master/NavigationAdvancedSample</a></p>

<hr>

<p>The major reason is you only use one <code>NavHostFragment</code> to hold the whole back stack of the app.</p>

<p>The solution is that each tab should hold its own back stack.</p>

<ul>
<li>In your main layout, wrap each tab fragment with a <code>FrameLayout</code>.</li>
<li>Each tab fragment is a <code>NavHostFragment</code> and contains its own navigation graph in order to make each tab fragment having its own back stack.</li>
<li>Add a <code>BottomNavigationView.OnNavigationItemSelectedListener</code> to <code>BottomNavigtionView</code> to handle the visibility of each FrameLayout.</li>
</ul>

<p>This also takes care of your ""...I don't like to keep all this fragment in memory..."", because a Navigation with <code>NavHostFragment</code> by default uses <code>fragmentTransaction.replace()</code>, i.e. you will always only have as many fragments as you have <code>NavHostFragment</code>s. The rest is just in the back stack of your navigation graph.</p>

<p><strong>Edit:</strong> Google is working on a native implementation <a href=""https://issuetracker.google.com/issues/80029773#comment25"" rel=""nofollow noreferrer"">https://issuetracker.google.com/issues/80029773#comment25</a></p>

<hr>

<p><strong>More in detail</strong></p>

<p>Let's say you have a <code>BottomNavigationView</code> with 2 menu choices, <code>Dogs</code> and <code>Cats</code>.</p>

<pre><code>&lt;menu xmlns:android=""http://schemas.android.com/apk/res/android""&gt;
    &lt;item android:id=""@+id/dogMenu""
        .../&gt;

    &lt;item android:id=""@+id/catMenu""
        .../&gt;
&lt;/menu&gt;
</code></pre>

<p>Then you need 2 navigation graphs, say <code>dog_navigation_graph.xml</code> and <code>cat_navigation_graph.xml</code>.</p>

<p>The <code>dog_navigation_graph</code> might look like</p>

<pre><code>&lt;navigation
    xmlns:android=""http://schemas.android.com/apk/res/android""
    xmlns:app=""http://schemas.android.com/apk/res-auto""
    android:id=""@+id/dog_navigation_graph""
    app:startDestination=""@id/dogMenu""&gt;
&lt;/navigation&gt;
</code></pre>

<p>and the corresponding for <code>cat_navigation_graph</code>.</p>

<p>In your <code>activity_main.xml</code>, add 2 <code>NavHostFragment</code>s</p>

<pre><code>&lt;FrameLayout
    android:id=""@+id/frame_dog""
    ...&gt;

    &lt;fragment
        android:id=""@+id/dog_navigation_host_fragment""
        android:layout_width=""match_parent""
        android:layout_height=""match_parent""
        android:name=""androidx.navigation.fragment.NavHostFragment""
        app:navGraph=""@navigation/dog_navigation_graph""
        app:defaultNavHost=""true""/&gt;
&lt;/FrameLayout&gt;
</code></pre>

<p>and underneath add the corresponding for your cat <code>NavHostFragment</code>. On your cat frame layout, set <code>android:visibility=""invisible""</code></p>

<p>Now, in your <code>MainActivity</code>'s <code>onCreateView</code> you can</p>

<pre><code>bottom_navigation_view.setOnNavigationItemSelectedListener { item -&gt;
    when (item.itemId) {
        R.id.dogMenu -&gt; showHostView(host = 0)
        R.id.catMenu -&gt; showHostView(host = 1)
    }
    return@setOnNavigationItemSelectedListener true
}
</code></pre>

<p>All that <code>showHostView()</code> is doing is toggling the visibility of your <code>FrameLayout</code>s that are wrapping the <code>NavHostFragment</code>s. So make sure to save them in some way, e.g. in <code>onCreateView</code></p>

<pre><code>val hostViews = arrayListOf&lt;FrameLayout&gt;()  // Member variable of MainActivity
hostViews.apply {
    add(findViewById(R.id.frame_dog))
    add(findViewById(R.id.frame_cat))
}
</code></pre>

<p>Now it's easy to toggle which <code>hostViews</code> should be visible and invisible.</p>
",3499145,,3499145,,2019-03-20 7:28:44,2019-03-20 7:28:44,,,,5,,,
Android,33239221,2,,33236972,2015,,3,,"<p>Ok, so, first of all, you need to change all of your dependencies of google play services to 8.1.0, also, build.gradle to the newest version, targeted sdk 23, comiled version 23, etc. So, basicaly, check your gradle. After that, you need to change your mGoogleApiClient to : </p>

<pre><code> mGoogleApiClient = new GoogleApiClient.Builder(getActivity()).addConnectionCallbacks(this)
            .addOnConnectionFailedListener(this)
            .addApi(Plus.API)
            .addScope(new Scope(Scopes.PROFILE))
            .addScope(new Scope(Scopes.EMAIL))
            .addScope(new Scope(Scopes.PLUS_LOGIN))
            .addScope(new Scope(Scopes.PLUS_ME))
            .build();
    mGoogleApiClient.connect();
</code></pre>

<p>And finally, you need to include permissions you need for sdk>= 23. To do that, create</p>

<pre><code> private static String ACCOUNT_PERMISSIONS[] = new String[]{
        Manifest.permission.GET_ACCOUNTS
};
</code></pre>

<p>Here is a good tutorial on how to get permissions for sdk >= 23:
<a href=""https://github.com/googlesamples/android-RuntimePermissions"" rel=""nofollow"">https://github.com/googlesamples/android-RuntimePermissions</a></p>
",4458300,,,,,2015-10-20 14:20:06,,,,0,,,
Android,51333674,2,,8735931,2018,,3,,"<p>Okay this is one of those things that doesn't have very much documentation available online, so I'm going to do my best to explain everything step by step. Taken from my blog post, which is a more detailed version of this (with screenshots), <a href=""http://themillibit.com/2018/07/13/how-to-make-money-with-your-android-app/"" rel=""nofollow noreferrer"">here on The Millibit</a>. Without further ado,</p>

<p><strong>Step One:</strong> Permissions
This is the easiest step. Navigate to your manifest.xml file and add the following line under your  tag:</p>

<pre><code>&lt;uses-permission android:name=""com.android.vending.BILLING"" /&gt;
</code></pre>

<p>This will give your app the permissions to access In-App Billing. If you are targetting versions above API 22, you will need to make sure that this permission is granted at runtime.</p>

<p><strong>Step Two:</strong> Play Console
Now you need to upload your app to the Google Play Console. We are not publishing our app to the public yet (dont worry), we are just uploading it to the BETA RELEASE section, which will allow us to test In-App Purchases. The reason we need to do this is that Google needs to have some version of your APK uploaded for the billing processes to actually work.</p>

<ol>
<li><p>Go to <a href=""https://play.google.com/apps/publish/"" rel=""nofollow noreferrer"">https://play.google.com/apps/publish/</a></p></li>
<li><p>Create the Application</p></li>
<li><p>Follow the steps to set up your app</p></li>
<li><p>Go to App Releases</p></li>
<li><p>Navigate to Beta</p></li>
<li><p>Create an APK of your app in Android studio and upload it to the Beta production in the Play Console</p></li>
</ol>

<p>(before releasing make sure that you have already filled out the Store Listing ,Content Rating and Pricing and Distribution)</p>

<ol start=""7"">
<li>Hit the magic button (publish!)</li>
</ol>

<p><strong>Step Three:</strong> Setup Project
Okay this is the part where you have to copy and paste a bunch of files.</p>

<p>First, grab <a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/aidl/com/android/vending/billing/IInAppBillingService.aidl"" rel=""nofollow noreferrer"">this</a> file, download it, and place it under <code>src/main</code>It should build itself into a folder
Next, grab <a href=""https://github.com/googlesamples/android-play-billing/tree/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample/util"" rel=""nofollow noreferrer"">this entire</a> util folder and paste it into <code>src/java folder.</code> Then rebuild your project to resolve errors. 
The Util Folder Contains The Following Classes:</p>

<ul>
<li>IabBroadcastReceiver </li>
<li>IabException </li>
<li>IabHelper  </li>
<li>IabResult  </li>
<li>Inventory    </li>
<li>Purchase  </li>
<li>Security  </li>
<li>SkuDetails</li>
</ul>

<p><strong>Step Four:</strong> Create Products</p>

<ol>
<li><p>Create Managed Product</p></li>
<li><p>Click save and make a pricing template</p></li>
</ol>

<p>Here, you will select the price of this product. You can choose the price for different countries, or have it automatically adjust if you just select all countries under your price:</p>

<ol start=""3"">
<li>Make sure the in-app product is activated and linked with the correct application in the console one last time.</li>
</ol>

<p>Finally, note the ID of your product. We will use this ID in the next few steps.</p>

<ol start=""4"">
<li>Get your Base64EncodedString</li>
</ol>

<p>Head over to Services &amp; APIs and grab your Base64EncodedString. Copy and paste this to a notepad somewhere so that you have access to it. Do not share this with anyone, they will be able to do malicious things with it.</p>

<p><strong>Step Five:</strong> Finally! We can start coding:
We will first bind to the in-app billing library, and query for what the user has/hasnt bought. Then, we will buy the product that we set up earlier.</p>

<p>First, import everything we set up earlier:</p>

<pre><code>import util.*;
</code></pre>

<p>Now we will use an IabHelper object called mHelper, and we will do everything with this.</p>

<pre><code>base64EncodedPublicKey = """"; //PUT YOUR BASE64KEY HERE

mHelper = new IabHelper(this, base64EncodedPublicKey);
mHelper.enableDebugLogging(false); //set to false in real app


mHelper.startSetup(new IabHelper.OnIabSetupFinishedListener() {
    public void onIabSetupFinished(IabResult result) {
        if (!result.isSuccess()) {
            // Oh no, there was a problem.

            if (result.getResponse() == 3) {
                new AlertDialog.Builder(MainActivity.this)
                        .setTitle(""In app billing"")
                        .setMessage(""This device is not compatible with In App Billing, so"" +
                                "" you may not be able to buy the premium version on your phone. "")
                        .setPositiveButton(""Okay"", null)
                        .show();
            }

            Log.v(TAG, ""Problem setting up In-app Billing: "" + result);
        } else {
            Log.v(TAG, ""YAY, in app billing set up! "" + result);
            try {
                mHelper.queryInventoryAsync(mGotInventoryListener); //Getting inventory of purchases and assigning listener
            } catch (IabHelper.IabAsyncInProgressException e) {
                e.printStackTrace();
            }
        }
    }
});
</code></pre>

<p>Okay, let me break down whats going on here. Basically, we are calling startSetup to initialize our IabHelper. If the setup is successful, we query what purchases the user already has and store the responses in <code>mGotInventoryListener</code>, which we will code next:</p>

<pre><code>IabHelper.QueryInventoryFinishedListener mGotInventoryListener
        = new IabHelper.QueryInventoryFinishedListener() {
    public void onQueryInventoryFinished(IabResult result,
                                         Inventory inventory) {

        i = inventory;

        if (result.isFailure()) {
            // handle error here

            Log.v(TAG, ""failure in checking if user has purchases"");
        } else {
            // does the user have the premium upgrade?
            if (inventory.hasPurchase(""premium_version"")) {

                premiumEditor.putBoolean(""hasPremium"", true);
                premiumEditor.commit(); 

                Log.v(TAG, ""Has purchase, saving in storage"");

            } else {

                premiumEditor.putBoolean(""hasPremium"", false);
                premiumEditor.commit();

                Log.v(TAG, ""Doesn't have purchase, saving in storage"");

            }
        }
    }
};
</code></pre>

<p>The above code is pretty self-explanatory. Basically, it just checks what purchases the user already has. Now that we know whether or not the user has already purchased our product, we know whether or not to ask them to purchase our item! If theyve never bought our product before, lets start a purchase request:</p>

<pre><code>public void buyPremium() {
    try {

     mHelper.flagEndAsync();//If any async is going, make sure we have it stop eventually
     mHelper.launchPurchaseFlow(this, ""premium_version"", 9, mPurchaseFinishedListener, ""SECURITYSTRING""); //Making purchase request and attaching listener
    } catch (Exception e) {
        e.printStackTrace();

mHelper.flagEndAsync();//If any async is going, make sure we have it stop eventually




        new AlertDialog.Builder(MainActivity.this)
                .setTitle(""Error"")
                .setMessage(""An error occurred in buying the premium version. Please try again."")
                .setPositiveButton(""Okay"", null)
                .show();
    }
}


    @Override

protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    Log.d(TAG, ""onActivityResult("" + requestCode + "","" + resultCode + "","" + data);

    // Pass on the activity result to the helper for handling

    if (!mHelper.handleActivityResult(requestCode, resultCode, data)) {

    }

    else 
        Log.d(TAG, ""onActivityResult handled by IABUtil."");
    }

}

IabHelper.OnIabPurchaseFinishedListener mPurchaseFinishedListener
        = new IabHelper.OnIabPurchaseFinishedListener() {
    public void onIabPurchaseFinished(IabResult result, Purchase purchase) {

        Log.v(TAG, ""purchase finished"");

        if (purchase != null) {

            if (purchase.getSku().equals(""premium_version"")) {

                Toast.makeText(MainActivity.this, ""Purchase successful!"", Toast.LENGTH_SHORT).show();

                premiumEditor.putBoolean(""hasPremium"", true);
                premiumEditor.commit();
            }
        } else {
            return;
        }
        if (result.isFailure()) {
            return;
        }
    }
};
</code></pre>

<p>Here we purchase the item (with the ID we generated in the play console earlier) with the following:</p>

<pre><code> mHelper.launchPurchaseFlow(this, ""premium_version"", 9, mPurchaseFinishedListener, ""SECURITYSTRING""); //Making purchase request and attaching listener
</code></pre>

<p>Notice that we passed <code>mPurchaseFinishedListener</code> into the parameters. This means that the result of the purchase will be returned to this listener. Then, we simply check if the purchase is null, and if not, award the user with whatever feature they bought.</p>

<p>Dont let the listeners leak! We must destroy them when the app destroys.</p>

<pre><code>@Override
public void onDestroy() {
    super.onDestroy();
    if (mHelper != null)
        try {
            mHelper.dispose();
            mHelper = null;

        } catch (IabHelper.IabAsyncInProgressException e) {
            e.printStackTrace();
        }
}
</code></pre>

<p>Finally, if youd like to consume your purchase, making it available for purchase again, you can do so easily. An example of this is if a user bought gas for a virtual car, and it ran out. They need to purchase the same product again, and you can make it available for a second purchase by consuming it:</p>

<pre><code>public void consume(){

    //MAKING A QUERY TO GET AN ACCURATE INVENTORY
    try {
        mHelper.flagEndAsync(); //If any async is going, make sure we have it stop eventually

        mHelper.queryInventoryAsync(mGotInventoryListener); //Getting inventory of purchases and assigning listener

        if(i.getPurchase(""gas"")==null){
            Toast.makeText(this, ""Already consumed!"", Toast.LENGTH_SHORT).show();
        }
    } catch (IabHelper.IabAsyncInProgressException e) {
        e.printStackTrace();

        Toast.makeText(this, ""Error, try again"", Toast.LENGTH_SHORT).show();
        mHelper.flagEndAsync();//If any async is going, make sure we have it stop eventually
    }

    //ACTUALLY CONSUMING
    try {
        mHelper.flagEndAsync();//If any async is going, make sure we have it stop eventually

        this.mHelper.consumeAsync(this.i.getPurchase(""gas""), new IabHelper.OnConsumeFinishedListener() {
            public void onConsumeFinished(Purchase paramAnonymousPurchase, IabResult paramAnonymousIabResult) {
//resell the gas to them
            }
        });

        return;
    } catch (IabHelper.IabAsyncInProgressException localIabAsyncInProgressException) {
        localIabAsyncInProgressException.printStackTrace();
        Toast.makeText(this, ""ASYNC IN PROGRESS ALREADY!!!!"" +localIabAsyncInProgressException, Toast.LENGTH_LONG).show();
        Log.v(""myTag"", ""ASYNC IN PROGRESS ALREADY!!!"");

        mHelper.flagEndAsync();
    }
}
</code></pre>

<p>Thats it! You can now start making money. Its really that simple!</p>

<p>Again, if you want a more detailed version of this tutorial, with screenshots and pictures, visit the <a href=""http://themillibit.com/2018/07/13/how-to-make-money-with-your-android-app/"" rel=""nofollow noreferrer"">original post here</a>. Let me know in the comments if you have any more questions.</p>
",5144855,,,,,2018-07-13 22:45:14,,,,6,,,
Android,49074185,2,,48126427,2018,,3,,"<p>I had exactly the same problem. I have ""sign in with Facebook"" functionality in my app and I want to move this functionality into separate class <code>AuthManager</code> that implements <code>LifecycleObserver</code>.</p>

<p>I have checked <code>Lifecycle.Event</code> class that contains all the available lifecycle events. Looks like at the moment (android.arch version 1.1.0) there is no event for hading <code>onActivityResult()</code> with <code>LifecycleObserver</code>.</p>

<p>Opened an issue about this: <a href=""https://github.com/googlesamples/android-architecture-components/issues/317"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components/issues/317</a></p>
",4260554,,4260554,,2018-03-02 17:26:03,2018-03-02 17:26:03,,,,0,,,
Android,49767546,2,,47283709,2018,,3,,"<p>I improved googles example app ""barcode-reader"" to detect both inverted colored barcodes and regular ones.</p>

<p>here is a link to googles example app:</p>

<p><a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/barcode-reader"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vision/tree/master/visionSamples/barcode-reader</a></p>

<p>I did so by editing ""CameraSource"" class, 
package: <code>""com.google.android.gms.samples.vision.barcodereader.ui.camera""</code>.</p>

<p>I added a parameter: <code>private boolean isInverted = false;</code></p>

<p>and changed function <code>void setNextFrame(byte[] data, Camera camera)</code>:</p>

<pre><code>void setNextFrame(byte[] data, Camera camera) {
            synchronized (mLock) {
                if (mPendingFrameData != null) {
                    camera.addCallbackBuffer(mPendingFrameData.array());
                    mPendingFrameData = null;
                }

                if (!mBytesToByteBuffer.containsKey(data)) {
                    Log.d(TAG,
                            ""Skipping frame.  Could not find ByteBuffer associated with the image "" +
                                    ""data from the camera."");
                    return;
                }

                mPendingTimeMillis = SystemClock.elapsedRealtime() - mStartTimeMillis;
                mPendingFrameId++;
                if (!isInverted){
                    for (int y = 0; y &lt; data.length; y++) {
                        data[y] = (byte) ~data[y];
                    }
                    isInverted = true;
                } else {
                    isInverted = false;
                }
                mPendingFrameData = mBytesToByteBuffer.get(data);

                // Notify the processor thread if it is waiting on the next frame (see below).
                mLock.notifyAll();
            }
        }
</code></pre>
",9112590,,,,,2018-04-11 5:59:05,,,,0,,,
Android,40477880,2,,40373138,2016,,3,,"<p>You can update the Android Studio to 2.2.2, and use the menu File-> Link C ++ Project with Gradle.
The official ndk samples can be found <a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow noreferrer"">here</a>!</p>
",5008255,,,,,2016-11-08 2:13:46,,,,1,,,
Android,43685579,2,,30350739,2017,,3,,"<p><a href=""https://github.com/googlesamples/android-play-places/blob/master/PlaceCompleteAdapter/Application/src/main/java/com/example/google/playservices/placecomplete/PlaceAutocompleteAdapter.java"" rel=""nofollow noreferrer"">Here</a> is an example of how to do just that. </p>

<p>You have the bonus of getting any of the <code>AutocompletePrediction</code> from the adapter. Just call <code>getItem(int position)</code> from the <code>AutoCompleteTextView</code>'s <code>AdapterView.OnItemClickListener</code> for example and use any data from the prediction clicked as you wish.</p>

<p>Links relevant code:</p>

<pre><code>/**
 * Adapter that handles Autocomplete requests from the Places Geo Data API.
 * {@link AutocompletePrediction} results from the API are frozen and stored directly in this
 * adapter. (See {@link AutocompletePrediction#freeze()}.)
 * &lt;p&gt;
 * Note that this adapter requires a valid {@link com.google.android.gms.common.api.GoogleApiClient}.
 * The API client must be maintained in the encapsulating Activity, including all lifecycle and
 * connection states. The API client must be connected with the {@link Places#GEO_DATA_API} API.
 */
public class PlaceAutocompleteAdapter
        extends ArrayAdapter&lt;AutocompletePrediction&gt; implements Filterable {

    private static final String TAG = ""PlaceAutocompleteAdapter"";
    private static final CharacterStyle STYLE_BOLD = new StyleSpan(Typeface.BOLD);
    /**
     * Current results returned by this adapter.
     */
    private ArrayList&lt;AutocompletePrediction&gt; mResultList;

    /**
     * Handles autocomplete requests.
     */
    private GoogleApiClient mGoogleApiClient;

    /**
     * The bounds used for Places Geo Data autocomplete API requests.
     */
    private LatLngBounds mBounds;

    /**
     * The autocomplete filter used to restrict queries to a specific set of place types.
     */
    private AutocompleteFilter mPlaceFilter;

    /**
     * Initializes with a resource for text rows and autocomplete query bounds.
     *
     * @see android.widget.ArrayAdapter#ArrayAdapter(android.content.Context, int)
     */
    public PlaceAutocompleteAdapter(Context context, GoogleApiClient googleApiClient,
            LatLngBounds bounds, AutocompleteFilter filter) {
        //change the layout nex for your own if you'd like
        super(context, android.R.layout.simple_expandable_list_item_2, android.R.id.text1);
        mGoogleApiClient = googleApiClient;
        mBounds = bounds;
        mPlaceFilter = filter;
    }

    /**
     * Sets the bounds for all subsequent queries.
     */
    public void setBounds(LatLngBounds bounds) {
        mBounds = bounds;
    }

    /**
     * Returns the number of results received in the last autocomplete query.
     */
    @Override
    public int getCount() {
        return mResultList.size();
    }

    /**
     * Returns an item from the last autocomplete query.
     */
    @Override
    public AutocompletePrediction getItem(int position) {
        return mResultList.get(position);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = super.getView(position, convertView, parent);

        // Sets the primary and secondary text for a row.
        // Note that getPrimaryText() and getSecondaryText() return a CharSequence that may contain
        // styling based on the given CharacterStyle.

        AutocompletePrediction item = getItem(position);

        TextView textView1 = (TextView) row.findViewById(android.R.id.text1);
        TextView textView2 = (TextView) row.findViewById(android.R.id.text2);
        textView1.setText(item.getPrimaryText(STYLE_BOLD));
        textView2.setText(item.getSecondaryText(STYLE_BOLD));

        return row;
    }

    /**
     * Returns the filter for the current set of autocomplete results.
     */
    @Override
    public Filter getFilter() {
        return new Filter() {
            @Override
            protected FilterResults performFiltering(CharSequence constraint) {
                FilterResults results = new FilterResults();

                // We need a separate list to store the results, since
                // this is run asynchronously.
                ArrayList&lt;AutocompletePrediction&gt; filterData = new ArrayList&lt;&gt;();

                // Skip the autocomplete query if no constraints are given.
                if (constraint != null) {
                    // Query the autocomplete API for the (constraint) search string.
                    filterData = getAutocomplete(constraint);
                }

                results.values = filterData;
                if (filterData != null) {
                    results.count = filterData.size();
                } else {
                    results.count = 0;
                }

                return results;
            }

            @Override
            protected void publishResults(CharSequence constraint, FilterResults results) {

                if (results != null &amp;&amp; results.count &gt; 0) {
                    // The API returned at least one result, update the data.
                    mResultList = (ArrayList&lt;AutocompletePrediction&gt;) results.values;
                    notifyDataSetChanged();
                } else {
                    // The API did not return any results, invalidate the data set.
                    notifyDataSetInvalidated();
                }
            }

            @Override
            public CharSequence convertResultToString(Object resultValue) {
                // Override this method to display a readable result in the AutocompleteTextView
                // when clicked.
                if (resultValue instanceof AutocompletePrediction) {
                    return ((AutocompletePrediction) resultValue).getFullText(null);
                } else {
                    return super.convertResultToString(resultValue);
                }
            }
        };
    }

    /**
     * Submits an autocomplete query to the Places Geo Data Autocomplete API.
     * Results are returned as frozen AutocompletePrediction objects, ready to be cached.
     * objects to store the Place ID and description that the API returns.
     * Returns an empty list if no results were found.
     * Returns null if the API client is not available or the query did not complete
     * successfully.
     * This method MUST be called off the main UI thread, as it will block until data is returned
     * from the API, which may include a network request.
     *
     * @param constraint Autocomplete query string
     * @return Results from the autocomplete API or null if the query was not successful.
     * @see Places#GEO_DATA_API#getAutocomplete(CharSequence)
     * @see AutocompletePrediction#freeze()
     */
    private ArrayList&lt;AutocompletePrediction&gt; getAutocomplete(CharSequence constraint) {
        if (mGoogleApiClient.isConnected()) {
            Log.i(TAG, ""Starting autocomplete query for: "" + constraint);

            // Submit the query to the autocomplete API and retrieve a PendingResult that will
            // contain the results when the query completes.
            PendingResult&lt;AutocompletePredictionBuffer&gt; results =
                    Places.GeoDataApi
                            .getAutocompletePredictions(mGoogleApiClient, constraint.toString(),
                                    mBounds, mPlaceFilter);

            // This method should have been called off the main UI thread. Block and wait for at most 60s
            // for a result from the API.
            AutocompletePredictionBuffer autocompletePredictions = results
                    .await(60, TimeUnit.SECONDS);

            // Confirm that the query completed successfully, otherwise return null
            final Status status = autocompletePredictions.getStatus();
            if (!status.isSuccess()) {
                Toast.makeText(getContext(), ""Error contacting API: "" + status.toString(),
                        Toast.LENGTH_SHORT).show();
                Log.e(TAG, ""Error getting autocomplete prediction API call: "" + status.toString());
                autocompletePredictions.release();
                return null;
            }

            Log.i(TAG, ""Query completed. Received "" + autocompletePredictions.getCount()
                    + "" predictions."");

            // Freeze the results immutable representation that can be stored safely.
            return DataBufferUtils.freezeAndClose(autocompletePredictions);
        }
        Log.e(TAG, ""Google API client is not connected for autocomplete query."");
        return null;
    }
}
</code></pre>
",1626594,,1626594,,2017-04-29 12:00:59,2017-04-29 12:00:59,,,,1,,,
Android,32534782,2,,29050372,2015,,3,,"<p>Doing this the proper way involves a huge amount of code. You have to make use of the location <a href=""https://developers.google.com/android/reference/com/google/android/gms/location/SettingsApi"" rel=""nofollow"">SettingsApi</a> class. </p>

<blockquote>
  <p>The main entry point for interacting with the location
  settings-enabler APIs.</p>
  
  <p>This API makes it easy for an app to ensure that the device's system
  settings are properly configured for the app's location needs.</p>
</blockquote>

<p>Fortunately there is a full blown sample provided by Google on <a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationSettings/app/src/main/java/com/google/android/gms/location/sample/locationsettings/MainActivity.java"" rel=""nofollow"">github</a> </p>
",267540,,267540,,2015-09-12 4:58:26,2015-09-12 4:58:26,,,,0,,,
Android,32932868,2,,23970144,2015,,3,,"<p>This works now in Android Studio. You can use <code>CFlags -I</code> and <code>ldFlags -L</code> when building.</p>

<p>Take a look at this <a href=""https://github.com/googlesamples/android-ndk/blob/master/hello-thirdparty/app/build.gradle"" rel=""nofollow"">good example</a>.</p>
",1454653,,,,,2015-10-04 11:19:43,,,,1,,,
Android,35180197,2,,35029175,2016,,3,,"<blockquote>
  <p>That demo requires compiling with Google Play Services 8.1. I'm
  guessing that you compiled with Google Play Services 7.8.</p>
  
  <p>This was the result of a bug fix that occurred between the two
  versions. The issue is that using direct byte buffers with the
  CameraSource class will result in a pixel shift of the images sent to
  the detector (e.g., the position reported for the barcode may be
  shifted to the left several pixels). In 8.1 we added support for
  indirect byte buffers to address this, but the 7.8 library doesn't
  have that ability.</p>
  
  <p>Long story short: Compile with 8.1 if you can. If you can't, you'll
  need to change to direct byte buffers as suggested above, and
  positions reported back will be off by several pixels.</p>
</blockquote>

<p>Source: <a href=""https://github.com/googlesamples/android-vision/issues/33"" rel=""nofollow"">https://github.com/googlesamples/android-vision/issues/33</a></p>
",2757470,,,,,2016-02-03 14:49:34,,,,0,,,
Android,53396573,2,,53278707,2018,,3,,"<p>Currently the only way to test your implementation of onDemand delivery is by uploading the .aab to the PlayStore.</p>

<p>The standard deployment from Android Studio deploys all modules to the attached device.</p>

<p>In a development environment the flow is correct, that the module is already installed when it's deployed to device.</p>

<p>As for code, take a look at the <a href=""https://github.com/googlesamples/android-dynamic-features"" rel=""nofollow noreferrer"">sample app</a>, in particular the download and listener implementation of <a href=""https://github.com/googlesamples/android-dynamic-features/blob/master/app/src/main/java/com/google/android/samples/dynamicfeatures/MainActivity.kt"" rel=""nofollow noreferrer"">MainActivity</a>.</p>
",422060,,422060,,2018-11-21 11:18:33,2018-11-21 11:18:33,,,,2,,,
Android,49872728,2,,49814894,2018,,3,,"<p>I have read the google samples here (<a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvvm-databinding"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture/tree/todo-mvvm-databinding</a>) and find the solution:</p>

<ol>
<li><p>create a interface to implement:</p>

<pre><code>public interface TaskItemNavigator {
    void openTaskDetails(String taskId);
}
</code></pre></li>
<li><p>have a weak reference in view model:</p>

<pre><code>@Nullable
private WeakReference&lt;TaskItemNavigator&gt; mNavigator;
</code></pre></li>
<li><p>implement it in activity:</p>

<pre><code>public class TasksActivity extends AppCompatActivity implements TaskItemNavigator{
    ...
    @Override
    public void openTaskDetails(String taskId) {
        Intent intent = new Intent(this, TaskDetailActivity.class);
        intent.putExtra(TaskDetailActivity.EXTRA_TASK_ID, taskId);
        startActivityForResult(intent, AddEditTaskActivity.REQUEST_CODE);
    }
}
</code></pre></li>
</ol>
",2206827,,,,,2018-04-17 7:58:33,,,,0,,,
Android,27515749,2,,27437536,2014,,3,,"<p>You could try the <a href=""https://github.com/googlesamples/android-fit/blob/master/BasicHistorySessions/app/src/main/java/com/google/android/gms/fit/samples/basichistorysessions/MainActivity.java"" rel=""nofollow"">basichistorysessions sample</a> from Google Fit Github repository.</p>

<p>sample code:</p>

<pre><code>  // Build a session read request
        SessionReadRequest readRequest = new SessionReadRequest.Builder()
                .setTimeInterval(startTime, endTime, TimeUnit.MILLISECONDS)
                .read(DataType.TYPE_SPEED)
                .setSessionName(SAMPLE_SESSION_NAME)
                .build();


// Invoke the Sessions API to fetch the session with the query and wait for the result
                    // of the read request.
                    SessionReadResult sessionReadResult =
                            Fitness.SessionsApi.readSession(mClient, readRequest)
                                    .await(1, TimeUnit.MINUTES);

                    // Get a list of the sessions that match the criteria to check the result.
                    Log.i(TAG, ""Session read was successful. Number of returned sessions is: ""
                            + sessionReadResult.getSessions().size());
                    for (Session session : sessionReadResult.getSessions()) {
                        // Process the session
                        dumpSession(session);

                        // Process the data sets for this session
                        List&lt;DataSet&gt; dataSets = sessionReadResult.getDataSet(session);
                        for (DataSet dataSet : dataSets) {
                            dumpDataSet(dataSet);
                        }
                    }
</code></pre>

<p>You can refer to this <a href=""https://developers.google.com/fit/android/using-sessions#read_fitness_data_using_sessions"" rel=""nofollow"">reading fitness data using sessions</a> section for more information.</p>
",4195406,,,,,2014-12-16 23:19:46,,,,1,,,
Android,36122110,2,,36109777,2016,,3,,"<p>You can use <a href=""http://tools.android.com/tech-docs/new-build-system/user-guide/apk-splits"" rel=""nofollow noreferrer"">APK splits</a> to build smaller versions of your app that target individual device <a href=""https://developer.android.com/ndk/guides/abis.html"" rel=""nofollow noreferrer"">architectures</a>. For an example of this, see the <a href=""https://github.com/googlesamples/android-ndk/blob/f011fd156579d678a4c6d7a7c6534509a5f41c2b/san-angeles/app/build.gradle#L37"" rel=""nofollow noreferrer"">San Angeles demo project</a>.</p>

<p>You can get a further reduction by removing the libpngt.so/libjpgt.so files if your app doesn't need them.</p>

<p>Using ProGuard may help too.</p>
",667810,,667810,,2017-02-02 17:03:28,2017-02-02 17:03:28,,,,4,,,
Android,45518867,2,,45518852,2017,,3,,"<p>You have to read and decide. Check these from Google:</p>

<p><a href=""https://developer.android.com/topic/libraries/architecture/guide.html"" rel=""nofollow noreferrer"">https://developer.android.com/topic/libraries/architecture/guide.html</a></p>

<p><a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture</a></p>
",4586742,,,,,2017-08-05 6:10:14,,,,0,,,
Android,45484818,2,,4972927,2017,,3,,"<p>Great! Articals by <a href=""https://medium.com/upday-devs/android-architecture-patterns-part-3-model-view-viewmodel-e7eeee76b73b"" rel=""nofollow noreferrer"">@Florina Muntenescu</a></p>

<p>The Model-View-ViewModel Pattern</p>

<p>The main players in the MVVM pattern are:</p>

<ul>
<li>The Viewthat informs the ViewModel about the users actions</li>
<li>The ViewModelexposes streams of data relevant to the View</li>
<li>The DataModelabstracts the data source. The ViewModel works with
the DataModel to get and save the data.</li>
</ul>

<p>Example of MVVM Architecture:</p>

<p><a href=""https://github.com/erikcaffrey/People-MVVM"" rel=""nofollow noreferrer"">https://github.com/erikcaffrey/People-MVVM</a></p>

<p><a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvvm-databinding/"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture/tree/todo-mvvm-databinding/</a></p>

<p><a href=""https://github.com/iammert/Android-MVVM-Architecture"" rel=""nofollow noreferrer"">https://github.com/iammert/Android-MVVM-Architecture</a></p>

<p><a href=""https://github.com/segunfamisa/android-mvvm-sample"" rel=""nofollow noreferrer"">https://github.com/segunfamisa/android-mvvm-sample</a></p>

<p><a href=""https://github.com/manas-chaudhari/android-mvvm"" rel=""nofollow noreferrer"">https://github.com/manas-chaudhari/android-mvvm</a></p>
",2473302,,,,,2017-08-03 12:53:51,,,,0,,,
Android,27996730,2,,24611977,2015,,3,,"<p>LocationClient is removed. GoogleApiClient is api to use for Google Play services Location APIs.</p>

<p>The sample code for the common scenarios is <a href=""https://github.com/googlesamples/android-play-location"" rel=""nofollow"">here</a> and the training classes <a href=""http://developer.android.com/training/location/index.html"" rel=""nofollow"">were updated</a> with more coming soon.</p>
",1375603,,,,,2015-01-17 6:08:32,,,,0,,,
Android,45530234,2,,45530213,2017,,3,,"<p>Refer the Architecture guides from Google:</p>

<p><a href=""https://developer.android.com/topic/libraries/architecture/guide.html"" rel=""nofollow noreferrer"">https://developer.android.com/topic/libraries/architecture/guide.html</a></p>

<p><a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture</a></p>

<p>MVP sample from Google:
<a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp/"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture/tree/todo-mvp/</a></p>
",4586742,,,,,2017-08-06 8:44:58,,,,0,,,
Android,35923622,2,,35923621,2016,,3,,"<p>Based on <a href=""https://github.com/googlesamples/android-MultiWindowPlayground/blob/master/Application/build.gradle"" rel=""nofollow"">one of the sample apps</a>, I am now using:</p>

<ul>
<li>Gradle 2.10</li>
<li><code>'com.android.tools.build:gradle:2.1.0-alpha1'</code> for the Android Plugin for Gradle (goes in your top-level <code>build.gradle</code> file)</li>
<li><code>buildToolsVersion ""24.0.0 rc1""</code></li>
</ul>

<p>This seems to be holding up, including with Android Studio 1.5.1.</p>

<p><strong>UPDATE</strong>: Now that N Developer Preview 4 has been released, we can start using <code>24</code> in place of <code>""N""</code> and <code>""android-N""</code>:</p>

<pre><code>android {
    compileSdkVersion 24
    buildToolsVersion ""24.0.0""

    defaultConfig {
        minSdkVersion 24
        targetSdkVersion 24
    }
}
</code></pre>
",115145,,115145,,2016-06-15 23:57:03,2016-06-15 23:57:03,,,,0,,,
Android,32583658,2,,32582705,2015,,3,,"<p>Check this link :</p>

<p><strong>Android RecyclerView Sample</strong>
Sample demonstrating the use of RecyclerView to layout elements with a LinearLayoutManager and with a GridLayoutManager. It also demonstrates how to handle touch events on elements.</p>

<p><a href=""https://github.com/googlesamples/android-RecyclerView"" rel=""nofollow"">link</a></p>
",,user5323868,,,,2015-09-15 10:24:57,,,,0,,,
Android,51113110,2,,51003326,2018,,3,,"<p>First of all you could broaden your question scope by asking about how to show a loading indicator in the bottom of <code>RecyclerView</code> instead of narrowing it to the Paging Library..</p>

<p>Secondly, you can easily show a loading indicator in the bottom of your list by adding an extra cell to the list that is just only for showing load indicator, the similar idea is used here to show the network status:</p>

<p><a href=""https://github.com/googlesamples/android-architecture-components/blob/master/PagingWithNetworkSample/app/src/main/java/com/android/example/paging/pagingwithnetwork/reddit/ui/PostsAdapter.kt"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components/blob/master/PagingWithNetworkSample/app/src/main/java/com/android/example/paging/pagingwithnetwork/reddit/ui/PostsAdapter.kt</a></p>
",6600000,,,,,2018-06-30 8:19:26,,,,0,,,
Android,54577333,2,,53849023,2019,,3,,"<p>Google has created <a href=""https://github.com/googlesamples/android-credentials/blob/master/sms-verification/bin/sms_retriever_hash_v9.sh"" rel=""nofollow noreferrer"">a script</a> to wrap the necessary CLI commands to generate the app hash.</p>

<p>Usage is: </p>

<pre><code>./sms_retriever_hash_v9.sh --package ""com.your.packagename"" --keystore /path/to/your.keystore
</code></pre>

<p>Example output:</p>

<pre><code>$ ./sms_retriever_hash_v9.sh --package ""com.your.packagename"" --keystore debug.keystore

package name: com.your.packagename
keystore file: debug.keystore

File debug.keystore is found.

Enter keystore password:  


certificate in hex: 3082030d308201f5a003020102020475125fad300d06092a864886f70d01010b05003037310b30090603550406130255533110300e060355040a1307416e64726f6964311630140603550403130d416e64726f6964204465627567301e170d3135313132333231323734355a170d3435313131353231323734355a3037310b30090603550406130255533110300e060355040a1307416e64726f6964311630140603550403130d416e64726f696420446562756730820122300d06092a864886f70d01010105000382010f003082010a0282010100c7604e3b464d0c3f1b556aecfbfcd60b35bb8274909c3eac8825d909b47d44ad60f3dcbd3bdb270a91ed09a8f4c7d39a7da51519116ab2085fdc5761ab472c53860e71779dbf1ebdb5ce2d0140197ac9bcc6ab0e249440be09e233885b110a0fce4b04c903b7741cbc31207ceeb55f71f02b59c2771986238972610cf33e472c08d3b67147117f356617357300dac2655cfa3c056fcc12aa5837a22f9af82164008aae32564db25c2801a45cb66bc087fa8710d14f6448446bc43fb5938c30306959eb5e03dee3dfaf1c83d684338c213208b94a6ea2aa937ba00dd800cbe5b6e30a5a3752b95e5948b20eb6a7051768395e498d12cf2e507458e14e9433d7d70203010001a321301f301d0603551d0e04160414efd057879cfb3ed6c9122caa5d26a6da5f59aadd300d06092a864886f70d01010b0500038201010074004b26417b91333a0503e505030784172a5ac5ffa68d02d42f5991fa637365a3c4833707d062063210da0c16f32be730081420b4ec9563475a57f02f2bf0364cbdc01154e9921edd5140bb4218d7ec6fd3f062d1acacc7cc005c64b7f7e362601fea2a7571c395ecf071a0f10a1bf3c44aa874eb61375e11308ec318c81f4bbd701de2d2fcbbbf764507074da570636f740b379652afe386eb48f69407074b096f3ce03e1d7ac50d9b79169132b01d75389959255b530549a3179798503c83e153e6feb78a89ef80bfce197e23314740f1d55a0db140eb2a44d3acce82d41503b180b6e8ed28f2411f750f9308c72cd8867486ad64af593bc1f1fff5b30510

SHA-256 output in hex: 20e861ecc8550c1e608efc3006f82278025d5e3d7169b40c72b8c3dd0aa9cfd9

First 8 bytes encoded by base64: IOhh7MhVDB5

SMS Retriever hash code:  IOhh7MhVDB5
</code></pre>

<p>Save <a href=""https://raw.githubusercontent.com/googlesamples/android-credentials/master/sms-verification/bin/sms_retriever_hash_v9.sh"" rel=""nofollow noreferrer"">the raw script file</a> locally then run <code>chmod u+x sms_retriever_hash_v9.sh</code> to make it executable.</p>

<p>In case the link to the script disappears, here's the script contents:</p>

<pre><code>#!/bin/sh

# ------------------------------------------------------------------
# [Author] Title
#          Description
# ------------------------------------------------------------------

VERSION=0.1.0
SUBJECT=sms-retriever-hash-generator
USAGE=""Usage: sms_retriever_hash_v9.sh --package package_name --keystore keystore_file""

# --- Options processing -------------------------------------------
if [ $# == 0 ] ; then
    echo $USAGE
    exit 1;
fi

# USE: apkblacklister.sh --source source.apk --target target.apk more files to scan

if [[ ""$1"" != ""--package"" ]]; then
  echo ""Error: expected --package as first parameter""
  exit 1
fi
pkg=""$2""
shift 2

if [[ ""$1"" != ""--keystore"" ]]; then
  echo ""Error: expected --keystore as third parameter""
  exit 1
fi
keystore=""$2""
shift 2



echo
echo ""package name: $pkg""
echo ""keystore file: $keystore""
echo 

if [ -e ""$keystore"" ]
then
  echo ""File $keystore is found.""
  echo
else
  echo ""File $keystore is not found.""
  echo
  exit 0;
fi

# Retrieve certificate from keystore file. Decoded with Base64 and converted to hex
cert=$(keytool -list -rfc -keystore $keystore | sed  -e '1,/BEGIN/d' | sed -e '/END/,$d' | tr -d ' \n' | base64 --decode | xxd -p | tr -d ' \n')

echo
echo ""certificate in hex: $cert""


# concatenate input
input=""$pkg $cert""

# 256 bits = 32 bytes = 64 hex chars
output=$(printf ""$input"" | shasum -a 256 | cut -c1-64)
echo
echo ""SHA-256 output in hex: $output""

# take the beginning 72 bits (= 9 bytes = 18 hex chars)
output=$(printf $output | cut -c1-18)

# encode sha256sum output by base64 (11 chars)
base64output=$(printf $output | xxd -r -p | base64 | cut -c1-11)
echo
echo ""First 8 bytes encoded by base64: $base64output""
echo
echo ""SMS Retriever hash code:  $base64output""
echo
</code></pre>
",777265,,777265,,2019-02-08 9:14:21,2019-02-08 9:14:21,,,,1,,,
Android,54605373,2,,42926624,2019,,3,,"<p>The issue could be due to <code>instant app</code> being enabled </p>

<p>Solution : 
Manually add <strong>google_app_id</strong> to the <strong>strings.xml</strong> file<a href=""https://github.com/googlesamples/android-instant-apps/issues/44#issuecomment-378103468"" rel=""nofollow noreferrer"">as told here</a></p>

<p><a href=""https://i.stack.imgur.com/Ooce5.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/Ooce5.png"" alt=""enter image description here""></a></p>

<p>Update : In case app crashes without any warning or error, try this (maven):</p>

<p>Go to project level <code>build.gradle</code> &amp; check if it looks exactly like this:</p>

<pre><code>allprojects {
    repositories {
        jcenter()
        maven {
            url ""https://maven.google.com""
        }
    }
}
</code></pre>

<p>and the code suddenly works and when you'll look at other answers you will find the same.</p>
",5806017,,5806017,,2019-02-17 7:31:11,2019-02-17 7:31:11,,,,1,,,
Android,37334135,2,,36083022,2016,,3,,"<p>Device Owner does not have system app permissions. </p>

<p>On Marshmallow a Device Owner can call <code>PackageInstaller</code> and silently install apps.</p>

<p>The TestDPC basically shows all the features you can implement:
<a href=""https://github.com/googlesamples/android-testdpc"" rel=""nofollow"">https://github.com/googlesamples/android-testdpc</a></p>

<p>For some more interesting info:
<a href=""https://florent-dupont.blogspot.ca/2015/02/10-things-to-know-about-device-owner.html"" rel=""nofollow"">https://florent-dupont.blogspot.ca/2015/02/10-things-to-know-about-device-owner.html</a></p>
",1060712,,,,,2016-05-19 21:16:17,,,,1,,,
Android,43186639,2,,43180273,2017,,3,,"<p>After more research I've found that this question was already asked and answered.
Unfortunately the question is still marked as not answered.
Here there is the <a href=""https://stackoverflow.com/questions/37027885/in-app-billing-mhelper-dispose-error"">link to the original question</a>.</p>

<p>The solution is simple:</p>

<ol>
<li>The file that you can get from the guide are outdated, and should be instead downloaded from <a href=""https://github.com/googlesamples/android-play-billing/tree/master/TrivialDrive"" rel=""nofollow noreferrer"">github</a>.</li>
<li><p>In the method <code>onDestroy</code> you should instead use the following code:</p>

<pre><code>@Override
public void onDestroy() {
   super.onDestroy();
   //Always unbind the connection with the store, otherwise performance degradation of the device may follow.
   if (mHelper != null) {
      mHelper.disposeWhenFinished();
      mHelper = null;
   }
}
</code></pre></li>
</ol>

<p><code>disposeWhenFinished</code> it's a more elegant solution that works better than a <code>dispose</code>.</p>
",6875945,,-1,,2017-05-23 12:18:16,2017-04-03 16:20:54,,,,0,,,
Android,30252683,2,,30216432,2015,,4,,"<p>Actually there is a sample app by Google <a href=""https://github.com/googlesamples/android-play-location/tree/master/ActivityRecognition"" rel=""nofollow"">https://github.com/googlesamples/android-play-location/tree/master/ActivityRecognition</a></p>

<p>You need to requestActivityUpdates e.g., from your activity</p>

<pre><code>googleApiClient = new GoogleApiClient.Builder(this)
        .addConnectionCallbacks(this)
        .addOnConnectionFailedListener(this)
        .addApi(ActivityRecognition.API)
        .build();

googleApiClient.connect();

Intent intent = new Intent(this, YourService.class);
PendingIntent pendingIntent = PendingIntent.getService(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);

ActivityRecognition.ActivityRecognitionApi.requestActivityUpdates(
            googleApiClient,
            1000 /* detection interval */,
            pendingIntent);
</code></pre>
",1019366,,1019366,,2015-05-15 6:55:05,2015-05-15 6:55:05,,,,5,,,
Android,47211381,2,,1513485,2017,,4,,"<p><a href=""https://github.com/googlesamples"" rel=""noreferrer"">GoogleSamples</a> has verbose example using latest FusedLocationProviderApi.
Unfortunately the most upvoted answers are out of date. </p>

<p>Follow the below examples to implement Location Services using FusedLocationProviderApi</p>

<p><a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationUpdates"" rel=""noreferrer"">https://github.com/googlesamples/android-play-location/tree/master/LocationUpdates</a></p>

<p><a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationUpdates/app/src/main/java/com/google/android/gms/location/sample/locationupdates/MainActivity.java"" rel=""noreferrer"">https://github.com/googlesamples/android-play-location/blob/master/LocationUpdates/app/src/main/java/com/google/android/gms/location/sample/locationupdates/MainActivity.java</a></p>
",1946016,,,,,2017-11-09 20:56:41,,,,0,,,
Android,47318747,2,,47309359,2017,,4,,"<p>You can take a look into <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvvm-live/"" rel=""noreferrer"">this Google Sample</a>, which applies Architecture Components and the Data Binding Library together.</p>
",8876284,,,,,2017-11-15 22:58:48,,,,0,,,
Android,37434713,2,,37027885,2016,,4,,"<p>Yes, i'm also waste a lot of time in this because in the Google Tutorial on <a href=""https://developer.android.com/training/in-app-billing/preparing-iab-app.html"" rel=""nofollow"">https://developer.android.com/training/in-app-billing/preparing-iab-app.html</a> the sample is old and buggy. If you want a right sample you have to download TrivialDrive from github <a href=""https://github.com/googlesamples/android-play-billing/tree/master/TrivialDrive"" rel=""nofollow"">https://github.com/googlesamples/android-play-billing/tree/master/TrivialDrive</a> that has right corrections.</p>

<p>From TrivialDrive MainActivity:</p>

<pre><code>try {
         mHelper.launchPurchaseFlow(this, mSelectedSubscriptionPeriod, IabHelper.ITEM_TYPE_SUBS,oldSkus, RC_REQUEST, mPurchaseFinishedListener, payload);
     } catch (IabAsyncInProgressException e) {
            complain(""Error launching purchase flow. Another async operation in progress."");
            setWaitScreen(false);
     }
</code></pre>

<p>and this is the onDestroy()</p>

<pre><code>    @Override
    public void onDestroy() {
    super.onDestroy();

    // very important:
    Log.d(TAG, ""Destroying helper."");
    if (mHelper != null) {
        mHelper.disposeWhenFinished();
        mHelper = null;
    }
}
</code></pre>

<p>i've implemented this without error! ;)</p>
",5409965,,,,,2016-05-25 10:42:23,,,,0,,,
Android,48101811,2,,48099870,2018,,4,,"<p>In the <a href=""https://github.com/googlesamples/android-architecture-components/"" rel=""nofollow noreferrer"">android-architecture-components</a> samples on Github Google have an interesting solution.</p>

<p>They <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/di/AppInjector.java"" rel=""nofollow noreferrer"">inject</a> the activities trough <a href=""https://developer.android.com/reference/android/app/Application.ActivityLifecycleCallbacks.html"" rel=""nofollow noreferrer"">ActivityLifecycleCallbacks</a>. For instrumented tests they use a <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/androidTest/java/com/android/example/github/TestApp.java"" rel=""nofollow noreferrer"">TestApp</a> that does not register ActivityLifecycleCallbacks so it injects nothing. </p>

<p>Just like in your example the <code>ViewModel.Factory</code> is package private so in the test you can assign it yourself.</p>

<p>For <code>Fragments</code> there is <a href=""https://developer.android.com/reference/android/support/v4/app/FragmentManager.FragmentLifecycleCallbacks.html"" rel=""nofollow noreferrer"">FragmentManager.FragmentLifecycleCallbacks</a> class which can be used. Instead of the <code>Fragment</code> injecting itself in <code>onActivityCreated</code> your production activity injects the <code>Fragment</code> using <code>FragmentLifecycleCallbacks</code>. You can create a testing activity which does not inject the fragment and you can create a mock factory yourself.</p>
",1011435,,,,,2018-01-04 18:57:34,,,,6,,,
Android,38688531,2,,38685903,2016,,4,,"<p>You can check full sample code here: <a href=""https://github.com/googlesamples/android-testing/blob/master/ui/espresso/IntentsBasicSample/app/src/androidTest/java/com/example/android/testing/espresso/BasicSample/DialerActivityTest.java"" rel=""nofollow"">https://github.com/googlesamples/android-testing/blob/master/ui/espresso/IntentsBasicSample/app/src/androidTest/java/com/example/android/testing/espresso/BasicSample/DialerActivityTest.java</a></p>

<p>Should work with next imports:</p>

<pre><code>import static android.support.test.espresso.intent.Intents.intended;
import static android.support.test.espresso.intent.matcher.BundleMatchers.hasEntry;
import static android.support.test.espresso.intent.matcher.IntentMatchers.hasAction;
import static android.support.test.espresso.intent.matcher.IntentMatchers.hasCategories;
import static android.support.test.espresso.intent.matcher.IntentMatchers.hasData;
import static android.support.test.espresso.intent.matcher.IntentMatchers.hasExtras;
import static android.support.test.espresso.intent.matcher.IntentMatchers.toPackage;
import static android.support.test.espresso.intent.matcher.UriMatchers.hasHost;
import static org.hamcrest.Matchers.equalTo;
import static org.hamcrest.Matchers.hasItem;
import static org.hamcrest.core.AllOf.allOf;
</code></pre>
",624706,,,,,2016-07-31 21:25:11,,,,0,,,
Android,30600429,2,,24300953,2015,,4,,"<p>From your explanation, what you have in mind to implement is a screen recorder. Of course your intention is that the system will have it implemented as part of the technology that your software is offering.</p>

<p><img src=""https://i.stack.imgur.com/hC3On.jpg"" alt=""enter image description here""></p>

<p>In such case, the best approach is to improve what already exist, incorporating the code with new features or new performance and giving credit to the original source that you came across and included as part of your software - as expected. This is the beauty of Open Source, which allows code to be reused, distributed and improved.</p>

<p><img src=""https://i.stack.imgur.com/HZ5bd.jpg"" alt=""enter image description here""></p>

<p>At Github there are plenty of projects... as you know, some nice and others awesome. For your particular case, my suggestion is to use existing code that allows your streaming recording system to capture the video, writing it without any need to root the device, as final users would not be interested to void the warranty of a newly purchased device only to run your software.</p>

<p><img src=""https://i.stack.imgur.com/eoHxm.png"" alt=""enter image description here""></p>

<p>It is also important to achieve a good speed that allows at least capturing 20 screen per second in Android for different screen sizes, providing clearly resolution and low CPU usage. All these characteristics would keep your solution stable and still looking rock solid. </p>

<p><img src=""https://i.stack.imgur.com/TWcxP.jpg"" alt=""enter image description here""></p>

<p>I think the best approach you can take, that will save yourself time and lots of headaches, would be to incorporate the ""sji-android-screen-capture"" code as part of your project. If your target devices are Android 4.2~4.4, you are good to go as it supports these Android versions. More info and the source code itself, you find available at <a href=""https://github.com/sjitech/sji-android-screen-capture"" rel=""nofollow noreferrer"">Github repository</a>. Alternatively, you can also use Android <a href=""https://github.com/googlesamples/android-ScreenCapture"" rel=""nofollow noreferrer"">ScreenCapture Sample</a>  to capture device screen in real time.</p>
",3016219,,3016219,,2015-06-02 18:32:37,2015-06-02 18:32:37,,,,0,,,
Android,37849990,2,,32286201,2016,,4,,"<p>it would be possible with android studio 2.2, mainly the android plugin for gradle makes it possible. you could look at some examples in:
<a href=""https://github.com/googlesamples/android-ndk/tree/master-cmake"" rel=""nofollow"">https://github.com/googlesamples/android-ndk/tree/master-cmake</a></p>

<p>android studio directly reads-in your cmake scripts -- there is nothing like desktop systems that generate project files for their native IDEs ( Visual Studio or XCode ); so you might have to modify your existing cmake files to eventually make it to work for android studio.</p>

<p>as long as you build to the correct APK, command line or IDE does not matter too much. If you intend to ship source code, having your project ready with an IDE would be attractive.</p>
",4496512,,,,,2016-06-16 4:36:55,,,,0,,,
Android,12989033,2,,11441626,2012,,4,,"<p>You should check out the Random Music Player sample that comes with android  SDK samples.  It gives you lock screen controls and bluetooth control ability on ICS devices &amp; up.  I've used it myself, it is excellent.  Also, the UniversalMusicPlayer sample on Github: <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""nofollow"">https://github.com/googlesamples/android-UniversalMusicPlayer</a></p>

<p><a href=""http://developer.android.com/samples/index.html"" rel=""nofollow"">Sample code</a> can be found online too.</p>

<p>Igor</p>
",6998684,,6998684,,2016-04-28 13:14:13,2016-04-28 13:14:13,,,,1,,,
Android,49280941,2,,49232559,2018,,4,,"<p>This does look like a problem with <code>ConstraintSet</code>, but let's see. The following analysis is based upon the <a href=""https://github.com/googlesamples/android-ConstraintLayoutExamples"" rel=""nofollow noreferrer""><code>sample project</code></a> with the link that you supplied.</p>

<p>In the sample project, I have updated <code>ConstraintLayout</code> to the most recent version:</p>

<pre><code>compile 'com.android.support.constraint:constraint-layout:1.1.0-beta5'
</code></pre>

<p>I did this in case we are trying to track down an issue that has already been addressed. I also updated the layout <code>constraintset_example_big</code> and replaced all left/right constraints with start/end constraints as follows:</p>

<p><strong>constraintset_example_big.xml</strong></p>

<pre><code>&lt;android.support.constraint.ConstraintLayout 
    android:id=""@+id/activity_constraintset_example""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent"" &gt;

    &lt;ImageView
        android:id=""@+id/imageView""
        android:layout_width=""0dp""
        android:layout_height=""0dp""
        android:layout_marginEnd=""24dp""
        android:layout_marginStart=""24dp""
        android:layout_marginTop=""24dp""
        android:onClick=""toggleMode""
        android:scaleType=""centerCrop""
        android:src=""@drawable/lake""
        app:layout_constraintDimensionRatio=""h,16:9""
        app:layout_constraintStart_toStartOf=""parent""
        app:layout_constraintEnd_toEndOf=""parent""
        app:layout_constraintTop_toTopOf=""parent""
        android:contentDescription=""@string/lake_tahoe_image"" /&gt;

    &lt;TextView
        android:id=""@+id/textView9""
        android:layout_width=""wrap_content""
        android:layout_height=""wrap_content""
        android:text=""@string/lake_tahoe_title""
        android:textSize=""30sp""
        app:layout_constraintStart_toStartOf=""@+id/imageView""
        android:layout_marginTop=""8dp""
        app:layout_constraintTop_toBottomOf=""@+id/imageView"" /&gt;

    &lt;TextView
        android:id=""@+id/textView11""
        android:layout_width=""0dp""
        android:layout_height=""0dp""
        android:text=""@string/lake_discription""
        app:layout_constraintStart_toStartOf=""@+id/textView9""
        android:layout_marginTop=""8dp""
        app:layout_constraintTop_toBottomOf=""@+id/textView9""
        app:layout_constraintEnd_toEndOf=""@+id/imageView""
        app:layout_constraintBottom_toBottomOf=""parent""
        android:layout_marginBottom=""16dp""
        app:layout_constraintHorizontal_bias=""0.0""
        app:layout_constraintVertical_bias=""0.0"" /&gt;

&lt;/android.support.constraint.ConstraintLayout&gt;
</code></pre>

<p>With these changes in place, this is what we see.</p>

<p><a href=""https://i.stack.imgur.com/Rd5Bv.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/Rd5Bv.gif"" alt=""enter image description here""></a></p>

<p>This is clearly not right. It is supposed to look like <a href=""https://raw.githubusercontent.com/googlesamples/android-ConstraintLayoutExamples/master/screenshots/constraint_set_example.png"" rel=""nofollow noreferrer""><code>this</code></a> after the transition. </p>

<p>After some debugging, I tracked the issue down to this line in <code>ConstraintSetExampleActivity.java</code>:</p>

<pre><code>mConstraintSetBig.load(this, R.layout.constraintset_example_big);
</code></pre>

<p><a href=""https://developer.android.com/reference/android/support/constraint/ConstraintSet.html#load(android.content.Context,%20int)"" rel=""nofollow noreferrer""><code>ConstraintSet#load()</code></a> seems to be straightforward, but if we replace the code above with an explicit inflation of the layout followed by a clone of the <code>ConstraintSet</code> on the inflated layout as follows:</p>

<pre><code>// mConstraintSetBig.load(this, R.layout.constraintset_example_big);
ConstraintLayout cl = (ConstraintLayout) getLayoutInflater().inflate(R.layout.constraintset_example_big,null);
mConstraintSetBig.clone(cl);
</code></pre>

<p>We see this behavior in the app which is much better.</p>

<p><a href=""https://i.stack.imgur.com/iQpht.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/iQpht.gif"" alt=""enter image description here""></a></p>

<p>So my takeaway is that <code>ConstraintSet#load()</code> has a problem with start/end constraints. The workaround is to inflate the <code>ConstraintLayout</code> then do a clone.</p>

<p><strong>ConstraintSetExampleActivity#onCreate()</strong></p>

<pre><code>protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.constraintset_example_main);

    mRootLayout = (ConstraintLayout) findViewById(R.id.activity_constraintset_example);
    // Note that this can also be achieved by calling
    // `mConstraintSetNormal.load(this, R.layout.constraintset_example_main);`
    // Since we already have an inflated ConstraintLayout in `mRootLayout`, clone() is
    // faster and considered the best practice.
    mConstraintSetNormal.clone(mRootLayout);
    // Load the constraints from the layout where ImageView is enlarged.

    // Toggle the comment status on the following three lines to fix/break.
    // mConstraintSetBig.load(this, R.layout.constraintset_example_big);
    ConstraintLayout cl = (ConstraintLayout) getLayoutInflater().inflate(R.layout.constraintset_example_big,null);
    mConstraintSetBig.clone(cl);

    if (savedInstanceState != null) {
        boolean previous = savedInstanceState.getBoolean(SHOW_BIG_IMAGE);
        if (previous != mShowBigImage) {
            mShowBigImage = previous;
            applyConfig();
        }
    }
}
</code></pre>
",6287910,,6287910,,2018-03-14 20:30:37,2018-03-14 20:30:37,,,,1,,,
Android,32105820,2,,32105132,2015,,4,,"<p>An issue identified is that the CameraSource class used for this app does not include an auto focus setting.  For some barcode formats, such as EAN 13, this reduces the detection rate.</p>

<p>We have recently open sourced the CameraSource class, and this includes an option for auto-focus.  We recommend that you use this version of CameraSource and enable auto-focus:</p>

<p><a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java"" rel=""nofollow"">https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java</a></p>

<p><strong>Update:</strong></p>

<p>The CameraSource provided with Google Play Services 8.4 now has an auto focus option.</p>
",5231007,,5231007,,2015-12-22 16:39:09,2015-12-22 16:39:09,,,,1,,,
Android,43080361,2,,43069429,2017,,4,,"<p>There are two levels of control for the flash - manual, and controlled by the auto-exposure routine. You're currently mixing them together.</p>

<p>If you want to fire the flash manually, then you need to set AE_MODE to either AE_MODE_OFF or AE_MODE_ON; not any of the FLASH modes.  Then, FLASH_MODE will control whether the flash will be in torch mode, off, or fire once for a given request.  </p>

<p>Since you're always leave AE_MODE in one of the FLASH states, what you do to FLASH_MODE should not matter, barring a bug in some specific device.</p>

<p>If you want to guarantee flash firing in every other picture, you need to use AE_MODE_ON_ALWAYS_FLASH for the force-flash photos, and you need to use AE_MODE_ON for the no-flash phoots; don't touch FLASH_MODE.
Right now, with AUTO_FLASH, it's up to the device whether to fire a flash or not, so you'll see different behavior from different devices and lighting conditions - some will fire, some won't.</p>

<p>The other key thing you're not doing is running a precapture sequence; this is essential for flash pictures, because it allows the device to fire the preflash to determine correct flash power, focus, and white balance.</p>

<p>To run precapture, set the AE_MODE as desired, and then set AE_PRECAPTURE_TRIGGER to START for one request. This will transition AE_STATE to PRECAPTURE, and it'll stay there for some number of frames; once AE_STATE is no longer PRECAPTURE, you can issue the actual image capture request.  Make sure you keep the AE_MODE consistent throughout this.</p>

<p>The sample app <a href=""https://github.com/googlesamples/android-Camera2Basic/"" rel=""nofollow noreferrer"">Camera2Basic</a> implements the precapture sequence, so take a look there; it also has some optimizations that skip precapture in case the scene is not dark enough to need flash, but since you want to force-fire flash, that's not relevant to you.</p>
",1344825,,,,,2017-03-28 21:34:18,,,,1,,,
Android,33941782,2,,31543365,2015,,4,,"<p>Since the android gradle plugin 1.3 it is possible to create separate test modules. Each of those test modules can have its own testInstrumentationRunner.</p>

<p>For a detailed example see the <a href=""https://github.com/googlesamples/android-testing-templates/tree/master/AndroidTestingBlueprint"" rel=""nofollow"">AndroidTestingBlueprint</a> example project on github.</p>

<p>The solution from @johan-stuyts that got bounty works fine (or at least it did with the android gradle plugin 1.2). But it uses private APIs and creating a separate module is easier and future proof.</p>
",821894,,,,,2015-11-26 15:06:02,,,,2,,,
Android,46402334,2,,46258255,2017,,4,,"<p>Okay,</p>

<p>As it turned out it was an issue at Google</p>

<blockquote>
  <p>Thanks for your reply to Google Play Developer Support!</p>
  
  <p>Our team have recently made some changes that should fix this issue
  (which is what you have confirmed). </p>
  
  <p>On the other hand, we do encourage developers to use our new Play
  Billing library
  (<a href=""https://developer.android.com/google/play/billing/billing_library.html"" rel=""nofollow noreferrer"">https://developer.android.com/google/play/billing/billing_library.html</a>),
  which gracefully handles most of use cases, and a good example of
  integrating with it is our open-sourced sample:
  <a href=""https://github.com/googlesamples/android-play-billing/tree/master/TrivialDrive_v2"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-billing/tree/master/TrivialDrive_v2</a>
  I appreciate your patience on this fix, I hope this helps! If you have
  any further questions, please let me know. I'm happy to help.</p>
</blockquote>
",583616,,,,,2017-09-25 9:53:44,,,,0,,,
Android,53887929,2,,27969384,2018,,4,,"<p><strong>Google</strong> has provided code to implement banner ad in <code>RecycleView</code>. </p>

<p>You can get it from GITHUB : <a href=""https://github.com/googlesamples/android-ads/tree/master/advanced/BannerRecyclerViewExample"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ads/tree/master/advanced/BannerRecyclerViewExample</a></p>
",2032823,,,,,2018-12-21 16:21:21,,,,0,,,
Android,31976075,2,,31953155,2015,,4,,"<p>Simply declare an <code>intent-filter</code> for <a href=""https://developer.android.com/guide/components/intents-common.html#PlaySearch"" rel=""nofollow"">MEDIA_PLAY_FROM_SEARCH</a> in an Activity declaration. It is not mandatory for Android Auto to actually handle the intent, since Android Auto will call the <code>MediaSession.Callback.onPlayFromSearch</code>. The declaration in the manifest serves to flag your app as available to respond media voice commands. However, you might want to handle it properly, because other non-Auto environments, like Google Now, will submit voice searches via that intent.</p>

<p>The best way to handle the intent is by calling <code>MediaController.TransportControls.playFromSearch</code>, so you handle it in a consistent way no matter how the voice search was triggered.</p>

<p>See this snippet from <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer/blob/master/mobile/src/main/AndroidManifest.xml#L50-L64"" rel=""nofollow"">uAmp AndroidManifest.xml</a>:</p>

<pre><code>    &lt;!-- Main activity for music browsing on phone --&gt;
    &lt;activity
        android:name="".ui.MusicPlayerActivity""
        android:label=""@string/app_name""&gt;

        [...]

        &lt;!-- Use this intent filter to get voice searches, like ""Play The Beatles"" --&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=""android.media.action.MEDIA_PLAY_FROM_SEARCH"" /&gt;
            &lt;category android:name=""android.intent.category.DEFAULT"" /&gt;
        &lt;/intent-filter&gt;
    &lt;/activity&gt;
</code></pre>

<p>And <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer/blob/master/mobile/src/main/java/com/example/android/uamp/ui/MusicPlayerActivity.java#L172-L183"" rel=""nofollow"">this is how</a> the intent is handled:</p>

<pre><code>@Override
protected void onMediaControllerConnected() {
    if (mVoiceSearchParams != null) {
        String query = mVoiceSearchParams.getString(SearchManager.QUERY);
        getMediaController().getTransportControls().playFromSearch(query, mVoiceSearchParams);
        mVoiceSearchParams = null;
    }
    getBrowseFragment().onConnected();
}
</code></pre>

<blockquote>
  <p>One caveat: you need to publish your app with the intent-filter and
  wait a few days to get it flagged and indexed for the ""Play [x] <strong>on
  [y]</strong>"" type of query. It is not instantaneous.</p>
</blockquote>
",1429114,,,,,2015-08-12 21:55:32,,,,1,,,
Android,50675200,2,,50673266,2018,,4,,"<p>The answer is based on <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/viewmodel/GithubViewModelFactory.kt"" rel=""nofollow noreferrer"">android-architecture-components</a>.</p>

<p>You can use Map multibinding in Dagger.</p>

<p>First, to declare map key like this.</p>

<pre><code>@MustBeDocumented
@Target(
    AnnotationTarget.FUNCTION,
    AnnotationTarget.PROPERTY_GETTER,
    AnnotationTarget.PROPERTY_SETTER
)
@Retention(AnnotationRetention.RUNTIME)
@MapKey
annotation class ViewModelKey(val value: KClass&lt;out ViewModel&gt;)
</code></pre>

<p>Second, to create map.</p>

<pre><code>@Module
abstract class ViewModelModule {
    @Binds
    @IntoMap
    @ViewModelKey(UserViewModel::class)
    abstract fun bindUserViewModel(userViewModel: UserViewModel): ViewModel

    @Binds
    @IntoMap
    @ViewModelKey(SearchViewModel::class)
    abstract fun bindSearchViewModel(searchViewModel: SearchViewModel): ViewModel
}
</code></pre>

<p>Next, to create the factory file to handle the map which uses key to choose ViewModel.</p>

<pre><code>@Singleton
class GithubViewModelFactory @Inject constructor(
    private val creators: Map&lt;Class&lt;out ViewModel&gt;, @JvmSuppressWildcards Provider&lt;ViewModel&gt;&gt;
) : ViewModelProvider.Factory {
    override fun &lt;T : ViewModel&gt; create(modelClass: Class&lt;T&gt;): T {
        val creator = creators[modelClass] ?: creators.entries.firstOrNull {
            modelClass.isAssignableFrom(it.key)
        }?.value ?: throw IllegalArgumentException(""unknown model class $modelClass"")
        try {
            @Suppress(""UNCHECKED_CAST"")
            return creator.get() as T
        } catch (e: Exception) {
            throw RuntimeException(e)
        }
    }
}
</code></pre>

<p>Finally, to inject factory in your activity or fragment.</p>

<pre><code>class SearchFragment : Fragment(), Injectable {

    @Inject
    lateinit var viewModelFactory: ViewModelProvider.Factory

    override fun onActivityCreated(savedInstanceState: Bundle?) {
        super.onActivityCreated(savedInstanceState)
        searchViewModel = ViewModelProviders.of(this, viewModelFactory)
            .get(SearchViewModel::class.java)
}
</code></pre>

<p>By this way, you can inject repository in your ViewModel.</p>

<pre><code>class SearchViewModel @Inject constructor(repoRepository: RepoRepository) : ViewModel() {
}
</code></pre>
",9101749,,,,,2018-06-04 7:18:34,,,,0,,,
Android,41077311,2,,41077125,2016,,4,,"<p>The <a href=""https://developer.android.com/reference/android/app/usage/package-summary.html"" rel=""nofollow noreferrer"">App usage statistics API</a> allows app developers to collect statistics related to usage of the applications. This API provides more detailed usage information than the <strong>deprecated</strong> <code>getRecentTasks(</code>) method.</p>

<p>To use this API, you must first declare the <code>android.permission.PACKAGE_USAGE_STATS</code> permission in your manifest. The user must also enable access for this app through <code>Settings &gt; Security &gt; Apps with usage access</code>.</p>

<p>To collect the statistics of the app usage, you need to first get the instance of <a href=""https://developer.android.com/reference/android/app/usage/UsageStatsManager.html"" rel=""nofollow noreferrer"">UsageStatsManager</a> by the following code:</p>

<pre><code>mUsageStatsManager = (UsageStatsManager) getActivity()
       .getSystemService(Context.USAGE_STATS_SERVICE);
</code></pre>

<p>Then you can retrieve the statistics of the app usage by the following method:</p>

<pre><code>Calendar cal = Calendar.getInstance();
cal.add(Calendar.YEAR, -1);
List&lt;UsageStats&gt; queryUsageStats = mUsageStatsManager
        .queryUsageStats(UsageStatsManager.INTERVAL_DAILY, cal.getTimeInMillis(),
                System.currentTimeMillis());
</code></pre>

<p>The first argument of the <code>queryUsageStats()</code> is used for the time interval by which the stats are aggregated. The second and the third arguments are used for specifying the beginning and the end of the range of the stats to include in the results.</p>

<p>Here is a <a href=""https://github.com/googlesamples/android-AppUsageStatistics"" rel=""nofollow noreferrer"">basic app code on GitHub</a> showing how to use App usage statistics API to let users collect statistics related to usage of the applications.</p>

<p><strong>Note:</strong> <code>android.app.usage</code> required <strong>API level 21</strong> or above.</p>
",983391,,983391,,2016-12-10 16:12:17,2016-12-10 16:12:17,,,,1,,,
Android,33393371,2,,2925054,2015,,4,,"<p>There is not an implemented MVC architecture, but a set of libraries / examples exists to implement an MVP (modelviewpresenter) architecture.</p>

<p>Please, check these links:</p>

<ul>
<li><p><a href=""https://github.com/sockeqwe/mosby"" rel=""nofollow noreferrer"">https://github.com/sockeqwe/mosby</a></p></li>
<li><p><a href=""https://github.com/android10/Android-CleanArchitecture"" rel=""nofollow noreferrer"">https://github.com/android10/Android-CleanArchitecture</a></p></li>
<li><p><a href=""https://github.com/antoniolg/androidmvp"" rel=""nofollow noreferrer"">https://github.com/antoniolg/androidmvp</a></p></li>
</ul>

<p>Google added an example of an Android architecture MVP:</p>

<ul>
<li><a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture</a></li>
</ul>
",767440,,63550,,2017-04-22 0:42:25,2017-04-22 0:42:25,,,,0,,,
Android,50909630,2,,50909248,2018,,4,,"<p>Most Architecture Components examples are available <a href=""https://github.com/googlesamples/android-architecture-components"" rel=""nofollow noreferrer"">here</a>.
In your case, I couldn't find the UserDao class but there is a database schema sample <a href=""https://github.com/googlesamples/android-architecture-components/blob/e49ba281a341c51fe0cda55e942b25f19bb14f22/PersistenceMigrationsSample/app/schemas/com.example.android.persistence.migrations.UsersDatabase/4.json"" rel=""nofollow noreferrer"">here</a>. <code>users</code> table has a <code>last_update</code> column. So you could write UserDao like this : </p>

<pre><code>@Query(""SELECT COUNT(*) FROM users WHERE userId == :userId AND last_update &gt;= :timeout)
int hasUser(int userId, long timeout)
</code></pre>

<p>It returns 0 if the user with id <code>userId</code> is not fresh enough.</p>
",7426096,,,,,2018-06-18 12:33:53,,,,2,,,
Android,31448664,2,,31428191,2015,,4,,"<p>Android Studio supports JNI debugging first time with 1.3 RC 1. See <a href=""http://tools.android.com/recent"" rel=""nofollow"">here</a></p>

<p>To get started using this feature, go to <a href=""https://developer.android.com/studio/projects/add-native-code.html"" rel=""nofollow"">add native code</a>.</p>

<p>Check <a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow"">this repository</a> for Android NDK samples using the new Android Studio 1.3 preview C++ integration.</p>
",4124416,,4124416,,2016-09-20 8:04:55,2016-09-20 8:04:55,,,,2,,,
Android,31579457,2,,29276026,2015,,4,,"<p>Android M preview introducing FingerPrint scanner API.
You can checkout example for this here :
<a href=""https://github.com/googlesamples/android-FingerprintDialog/"" rel=""nofollow"">https://github.com/googlesamples/android-FingerprintDialog/</a></p>
",966347,,,,,2015-07-23 6:14:50,,,,0,,,
Android,29157564,2,,28663778,2015,,4,,"<p>The result at my end is exactely same with yours, that is, cannot select subtree on Google Drive.</p>

<p>Based on the <a href=""https://github.com/googlesamples/android-DirectorySelection"" rel=""nofollow"">Android official sample</a> about OPEN_DOCUMENT_TREE: 
The system displays all DocumentsProvider <strong>instances that support subtree selection</strong></p>

<p>So I think the reason is that Google Drive DocumentsProvider instance did not support handle OPEN_DOCUMENT_TREE yet.</p>
",1379193,,,,,2015-03-20 0:46:23,,,,2,,,
Android,31191045,2,,31188849,2015,,4,,"<p>Ok from the start (as i dont know what  other way works)</p>

<ul>
<li>Go to Git master page (it has 'download to zip' or 'clone to desktop' button). use <a href=""https://github.com/googlesamples/android-play-location"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-location</a> as a test master page if you like to ensure you have no other issues i did not.</li>
<li>Click 'download zip'</li>
<li>Unzip the project</li>
<li>Close the current project in Android Studio -> File/Close Projects</li>
<li>A popup screen like this will appear, choose Import Project (Eclipse ADT, Gradle etc.)</li>
<li>You will be asked to select the project, select your unzipped project within the master folder, eg basicLocation</li>
<li>Select 'create project from existing resources' default</li>
<li>dont change project name (may cause issues)</li>
<li>Next through 'import project -> directories'</li>
<li>Next through project -> libraries</li>
<li>Next Through import projects -> modules and module dependencies</li>
<li>Next through import project ->SDK</li>
<li>Next through import project ->manifest.xmls</li>
<li>Android Studio starts. Ensure the configurations dropdown has a project in it called 'app' app</li>
<li>Select 'sync Gradle' icon (green circle)</li>
<li>May get language warning, ignore or accept restart, doesnt matter</li>
</ul>

<p>At bottom it should now say 'Gradle executing tasks' after which it will run on device or emulator :)</p>

<p><img src=""https://i.stack.imgur.com/g0XGL.png"" alt=""enter image description here""></p>
",510981,,,,,2015-07-02 17:31:31,,,,0,,,
Android,30273301,2,,17844957,2015,,4,,"<p>This is now supported in Android Studio starting with Android Gradle plugin 1.1.0, check this out:</p>

<p><a href=""https://developer.android.com/training/testing/unit-testing/local-unit-tests.html"" rel=""nofollow"">https://developer.android.com/training/testing/unit-testing/local-unit-tests.html</a></p>

<p>Sample app with local unit tests on GitHub:</p>

<p><a href=""https://github.com/googlesamples/android-testing/tree/master/unittesting/BasicSample"" rel=""nofollow"">https://github.com/googlesamples/android-testing/tree/master/unittesting/BasicSample</a></p>
",885464,,,,,2015-05-16 8:07:51,,,,1,,,
Android,34572632,2,,34561814,2016,,4,,"<p>I work on the Smart Lock team at Google, hope this answers your question:</p>

<p>In the case of Google, Facebook, Twitter, or other ""federated"" credentials, the password for these Identity provider accounts is not stored in the credential. The password field on such credentials is empty and the ""credential"" only serves as a pointer as to which identity provider the user used for the given app. The idea is that saving and retrieving such a credential will enable the app to know that the current user has an existing account and should use a particular sign-in method (and could automatically sign the user in by triggering the respective flow, or help customize the UI so the user signs in with the appropriate method when they return).</p>

<p>Note that as of the current version of Play Services (8.4), the API will throw an error if an app attempts to construct and save a credential with both an account type and a password set; third-party apps should not be asking for or storing passwords for identity providers. Only the app's first-party password for the current user used to sign in to the service itself should be stored in the credential via the API, and should not have an account type set in that case.</p>

<p>In the example code of the question, the Google-type credential is used to programmatically trigger a Google sign-in flow (see the <code>Auth.GoogleSignInApi.silentSignIn()</code> call, and the full sample <a href=""https://github.com/googlesamples/android-credentials/blob/master/credentials-signin/app/src/main/java/com/google/example/credentialssignin/MainActivity.java"" rel=""nofollow"">here</a>), i.e. automatically signing the user in with Google as though they had clicked the Google sign-in button, since they had a credential with type ""Google"" stored.</p>

<p>In general, also note that apps can only retrieve credentials that have been saved from the app itself (identified by the package and certificate signature on Android) or in Chrome for an verified and associated website (see <a href=""https://developers.google.com/identity/smartlock-passwords/android/associate-apps-and-sites"" rel=""nofollow"">details</a>). This means that the app may only access data which it stored on behalf of the user (perhaps on another device, the idea being that the Smart Lock API facilitates retrieving authentication details across devices), or a username and password that the user entered for an associated website and opted to save with Google via Chrome's password manager.</p>

<p>Please leave a comment if that answers your question or you need any more information!</p>
",5001016,,,,,2016-01-03 1:58:27,,,,3,,,
Android,48274819,2,,48005850,2018,,4,,"<p>There's an invalid <code>settings.gradle</code> file, which only <a href=""https://github.com/googlesamples/android-RuntimePermissions/blob/master/settings.gradle#L1"" rel=""nofollow noreferrer"">tries to import</a> <code>Application</code> module (which yet is not valid gradle module, as long as it does not have its own <code>build.gradle</code> file).</p>

<p>Inside root folder <code>settings.gradle</code> file put following line:</p>

<pre><code>include ':kotlinApp'
</code></pre>

<p>Now instead of importing <code>build.gradle</code> import <code>kotlinApp</code> folder:</p>

<blockquote>
  <p>File -> Open... -> android-RuntimePermissions-master/kotlinApp</p>
</blockquote>
",1083957,,,,,2018-01-16 5:45:13,,,,0,,,
Android,34651057,2,,25592207,2016,,4,,"<p>Wearables with speakers are now supported on API 23. From the <a href=""http://developer.android.com/training/wearables/wearable-sounds.html"" rel=""nofollow"">docs</a>, first make sure to check if the device has the required API and hardware:</p>

<pre><code>public boolean canPlayAudio(Context context) {
    PackageManager packageManager = context.getPackageManager();
    AudioManager audioManager = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);

    // Check whether the device has a speaker.
    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {
        // Check FEATURE_AUDIO_OUTPUT to guard against false positives.
        if (!packageManager.hasSystemFeature(PackageManager.FEATURE_AUDIO_OUTPUT)) {
            return false;
        }

        AudioDeviceInfo[] devices = audioManager.getDevices(AudioManager.GET_DEVICES_OUTPUTS);
        for (AudioDeviceInfo device : devices) {
            if (device.getType() == AudioDeviceInfo.TYPE_BUILTIN_SPEAKER) {
                return true;
            }
        }
    }
    return false;
}
</code></pre>

<p>If the above returns true, you are set to play sounds on the wearable device just like you would on any other device using the <a href=""http://developer.android.com/guide/topics/media/mediaplayer.html"" rel=""nofollow"">MediaPlayer</a>.</p>

<p>For more details, there is also a <a href=""https://github.com/googlesamples/android-WearSpeakerSample"" rel=""nofollow"">sample app</a> available.</p>
",362298,,,,,2016-01-07 9:05:56,,,,0,,,
Android,34650699,2,,34638651,2016,,4,,"<p>Thanks @CommonsWare.</p>

<p>I followed your advice using negative margin (top and bottom) and it works.</p>

<p>To do that, I just update <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">AutoFitTextureView</a> the GoogeSamples project <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">android-Camera2Basic</a> this way:</p>

<pre><code>public class AutoFitTextureView extends TextureView {

    //...
    private boolean mWithMargin = false;

    //...

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, widthMeasureSpec);
        int width = MeasureSpec.getSize(widthMeasureSpec);
        int height = MeasureSpec.getSize(heightMeasureSpec);
        int margin = (height - width) / 2;

        if(!mWithMargin) {
            mWithMargin = true;
            ViewGroup.MarginLayoutParams margins = ViewGroup.MarginLayoutParams.class.cast(getLayoutParams());
            margins.topMargin = -margin;
            margins.bottomMargin = -margin;
            margins.leftMargin = 0;
            margins.rightMargin = 0;
            setLayoutParams(margins);
        }

        if (0 == mRatioWidth || 0 == mRatioHeight) {
            setMeasuredDimension(width, height);
        } else {
            if (width &lt; height) {
                setMeasuredDimension(width, width * mRatioHeight / mRatioWidth);
            } else {
                setMeasuredDimension(height * mRatioWidth / mRatioHeight, height);
            }
        }
    }
}
</code></pre>

<p><a href=""https://i.stack.imgur.com/ieZIK.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/ieZIK.png"" alt=""enter image description here""></a></p>
",1832221,,1832221,,2016-01-07 8:52:00,2016-01-07 8:52:00,,,,2,,,
Android,34657139,2,,34636389,2016,,4,,"<p>Yes, those are the correct dimensions.</p>

<pre><code>apduServiceBanner should be 260x96 dp. In pixels, that works out to...
  - drawable-xxhdpi: 780x288 px
  - drawable-xhdpi:  520x192 px
  - drawable-hdpi:   390x144 px
  - drawable-mdpi:   260x96  px
</code></pre>

<p>Reference: <a href=""https://github.com/googlesamples/android-CardEmulation/blob/a432dae2a40e64a3253c0d88e7d8e5d7655d34b6/Application/src/main/res/xml/aid_list.xml"" rel=""nofollow"">Android Card Emulation Reference Application</a></p>
",509081,,,,,2016-01-07 14:05:20,,,,0,,,
Android,35078512,2,,22084307,2016,,4,,"<p>Answer Juanjo outdated! Better to use <a href=""http://developer.android.com/intl/ru/reference/android/support/v4/media/session/MediaSessionCompat.html"" rel=""nofollow noreferrer"">MediaSessionCompat</a> which include in support library. Thank <a href=""https://stackoverflow.com/users/1676363/ianhanniballake"">@ianhlake</a> for the good 2 video:</p>

<ol>
<li><a href=""https://www.youtube.com/watch?v=FBC1FgWe5X4"" rel=""nofollow noreferrer"">https://www.youtube.com/watch?v=FBC1FgWe5X4</a></li>
<li><a href=""https://www.youtube.com/watch?v=XQwe30cZffg"" rel=""nofollow noreferrer"">https://www.youtube.com/watch?v=XQwe30cZffg</a></li>
</ol>

<p>Also take a look at an example <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""nofollow noreferrer"">Android Music Player Sample</a></p>
",1517126,,-1,,2017-05-23 12:08:57,2016-01-29 6:50:40,,,,2,,,
Android,41280295,2,,26884956,2016,,4,,"<p>The install method @amalBit provided did not work for me. It's strange since this is how it is implemented in the <a href=""https://github.com/googlesamples/android-testdpc/blob/master/app/src/main/java/com/afwsamples/testdpc/cosu/CosuUtils.java"" rel=""nofollow noreferrer"">Google Sample</a>.</p>

<p>This <a href=""https://stackoverflow.com/a/32687988/2110483"">answer</a> helped me to find a solution. I had to change some parts of the code. Here is my implementation:</p>

<pre><code>public static void installPackage(Context context, InputStream inputStream)
        throws IOException {
    PackageInstaller packageInstaller = context.getPackageManager().getPackageInstaller();
    int sessionId = packageInstaller.createSession(new PackageInstaller
            .SessionParams(PackageInstaller.SessionParams.MODE_FULL_INSTALL));
    PackageInstaller.Session session = packageInstaller.openSession(sessionId);

    long sizeBytes = 0;

    OutputStream out = null;
    out = session.openWrite(""my_app_session"", 0, sizeBytes);

    int total = 0;
    byte[] buffer = new byte[65536];
    int c;
    while ((c = inputStream.read(buffer)) != -1) {
        total += c;
        out.write(buffer, 0, c);
    }
    session.fsync(out);
    inputStream.close();
    out.close();

    // fake intent
    IntentSender statusReceiver = null;
    Intent intent = new Intent(context, SomeActivity.class);
    PendingIntent pendingIntent = PendingIntent.getBroadcast(context,
            1337111117, intent, PendingIntent.FLAG_UPDATE_CURRENT);

    session.commit(pendingIntent.getIntentSender());
    session.close();
}
</code></pre>

<p>This method can be called like this:</p>

<pre><code>        InputStream inputStream = getActivity().getAssets().open(""my_awesome_app.apk"");
        InstallationHelper.installPackage(getActivity(), inputStream);
</code></pre>
",2110483,,-1,,2017-05-23 12:10:30,2016-12-22 9:55:01,,,,0,,,
Android,44285889,2,,34473611,2017,,4,,"<p>With the latest Google I/O 2017 announcement for <code>Android Architectural Components</code>, the proper way to abstract Realm in Android apps is:</p>

<p>1.) Realm instance lifecycle is managed by <code>ViewModel</code> class, and it is closed in <code>onCleared()</code> method</p>

<p>2.) RealmResults is a <code>MutableLiveData&lt;List&lt;T&gt;&gt;</code>, so you can create a <code>RealmLiveData&lt;T&gt;</code> class which wraps a <code>RealmResults&lt;T&gt;</code>.</p>

<p>Therefore, you can create a view model like this:</p>

<pre><code>// based on  https://github.com/googlesamples/android-architecture-components/blob/178fe541643adb122d2a8925cf61a21950a4611c/BasicSample/app/src/main/java/com/example/android/persistence/viewmodel/ProductListViewModel.java
public class ProductListViewModel {
    private final MutableLiveData&lt;List&lt;ProductEntity&gt;&gt; observableProducts = new MutableLiveData&lt;&gt;();

    Realm realm;
    RealmResults&lt;ProductEntity&gt; results;
    RealmChangeListener&lt;RealmResults&lt;ProductEntity&gt;&gt; realmChangeListener = (results) -&gt; {
        if(results.isLoaded() &amp;&amp; results.isValid()) { // you probably don't need this, just making sure.
            observableProducts.setValue(results);
        }
    };

    public ProductListViewModel() {
        realm = Realm.getDefaultInstance();             
        results = realm.where(ProductEntity.class).findAllSortedAsync(""id""); 
          // could use a Realm DAO class here
        results.addChangeListener(realmChangeListener);

        observableProducts.setValue(null); // if using async query API, the change listener will set the loaded results.
    }

    public LiveData&lt;List&lt;ProductEntity&gt;&gt; getProducts() {
        return observableProducts;
    }

    @Override
    protected void onCleared() {
        results.removeChangeListener(realmChangeListener);
        realm.close();
        realm = null;
    }
}
</code></pre>

<p>or you can separate them into a realm viewmodel and a realm livedata based on <a href=""https://news.realm.io/news/android-architecture-components-and-realm/"" rel=""nofollow noreferrer"">this article</a>:</p>

<pre><code>public class LiveRealmData&lt;T extends RealmModel&gt; extends LiveData&lt;RealmResults&lt;T&gt;&gt; {

    private RealmResults&lt;T&gt; results;
    private final RealmChangeListener&lt;RealmResults&lt;T&gt;&gt; listener = 
        new RealmChangeListener&lt;RealmResults&lt;T&gt;&gt;() {
            @Override
            public void onChange(RealmResults&lt;T&gt; results) { setValue(results);}
    };

    public LiveRealmData(RealmResults&lt;T&gt; realmResults) {
        results = realmResults;
    }

    @Override
    protected void onActive() {
        results.addChangeListener(listener);
    }

    @Override
    protected void onInactive() {
        results.removeChangeListener(listener);
    }
}

public class CustomResultViewModel extends ViewModel {

    private Realm mDb;
    private LiveData&lt;String&gt; mLoansResult;

    public CustomResultViewModel() {
        mDb = Realm.getDefaultInstance();
        mLoansResult = RealmUtils.loanDao(mDb).getAll();
    }

    public LiveData&lt;String&gt; getLoansResult() {
        return mLoansResult;
    }

    @Override
    protected void onCleared() {
        mDb.close();
        super.onCleared();
    }
}
</code></pre>

<p>Either way, you've wrapped Realm's auto-updating and lazy-loaded result set into a LiveData and ViewModel, separate from the fragments/adapters:</p>

<pre><code>// based on https://github.com/googlesamples/android-architecture-components/blob/178fe541643adb122d2a8925cf61a21950a4611c/BasicSample/app/src/main/java/com/example/android/persistence/ProductListFragment.java
public class ProductListFragment extends LifecycleFragment {
    private ProductAdapter productAdapter;

    @Nullable
    @Override
    public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container,
            @Nullable Bundle savedInstanceState) {
        //...
        productAdapter = new ProductAdapter(mProductClickCallback);
        //...
    }

    @Override
    public void onActivityCreated(@Nullable Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        final ProductListViewModel viewModel =
                ViewModelProviders.of(this).get(ProductListViewModel.class); // &lt;-- !

        subscribeUi(viewModel);
    }

    private void subscribeUi(ProductListViewModel viewModel) {
        // Update the list when the data changes
        viewModel.getProducts().observe(this, (myProducts) -&gt; {
            if (myProducts == null) {
                // ...
            } else {
                productAdapter.setProductList(myProducts);
                //...
            }
        });
    }
}
</code></pre>

<hr>

<p>But if you are <strong>not</strong> using Android Architectural Components, even then what one needs to keep in mind is that:</p>

<blockquote>
  <p>RealmResults is a list of proxy objects that mutates in place, and it has change listeners.</p>
</blockquote>

<p>So what you need is either wrapping it as Flowable with LATEST backpressure, akin to</p>

<pre><code>private io.reactivex.Flowable&lt;RealmResults&lt;T&gt;&gt; realmResults() {
    return io.reactivex.Flowable.create(new FlowableOnSubscribe&lt;RealmResults&lt;T&gt;&gt;() {
        @Override
        public void subscribe(FlowableEmitter&lt;RealmResults&lt;T&gt;&gt; emitter)
                throws Exception {
            Realm observableRealm = Realm.getDefaultInstance();
            RealmResults&lt;T&gt; results = realm.where(clazz)./*...*/.findAllSortedAsync(""field"", Sort.ASCENDING);
            final RealmChangeListener&lt;RealmResults&lt;T&gt;&gt; listener = _results -&gt; {
                if(!emitter.isDisposed()) {
                    emitter.onNext(_results);
                }
            };
            emitter.setDisposable(Disposables.fromRunnable(() -&gt; {
                observableRealm.removeChangeListener(listener);
                observableRealm.close();
            }));
            observableRealm.addChangeListener(listener);
            emitter.onNext(observableRealm);
        }
    }, BackpressureStrategy.LATEST).subscribeOn(scheduler).unsubscribeOn(scheduler);
</code></pre>

<p>Or creating your own <code>MutableLiveList</code> interface.</p>

<pre><code>public interface MutableLiveList&lt;T&gt; extends List&lt;T&gt; { 
     public interface ChangeListener {
         void onChange(MutableLiveList&lt;T&gt; list);
     }

     void addChangeListener(ChangeListener listener);
     void removeChangeListener(ChangeListener listener);
}
</code></pre>
",2413303,,2413303,,2017-06-01 13:00:17,2017-06-01 13:00:17,,,,4,,,
Android,41700092,2,,41641443,2017,,4,,"<p>Tests should be hermetic: you shouldn't have dependencies on external data sources.</p>

<p>Create a product flavor where you replace the Firebase data source with a fake one, only used in tests. This lets you test with fake data, for repeatable tests.</p>

<p>This concept is explained in <a href=""https://android-developers.googleblog.com/2015/12/leveraging-product-flavors-in-android.html"" rel=""nofollow noreferrer"">Leveraging product flavors in Android Studio for hermetic testing</a></p>

<p>And it's implemented in <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">Android Architecture Blueprints</a></p>

<p>The caveat is that you're not going to test the integration between Firebase and your app, but those tests tend to be <a href=""https://testing.googleblog.com/2015/04/just-say-no-to-more-end-to-end-tests.html"" rel=""nofollow noreferrer"">flaky</a>. </p>
",3033153,,,,,2017-01-17 14:48:26,,,,0,,,
Android,40329727,2,,40329700,2016,,4,,"<p>Looking at <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/AndroidManifest.xml"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/AndroidManifest.xml</a> I'm pretty sure <code>&lt;uses-feature android:name=""android.hardware.camera2"" /&gt;</code> is not really a thing. Try changing it to <code>&lt;uses-feature android:name=""android.hardware.camera"" /&gt;</code> or remove it.</p>
",1074080,,,,,2016-10-30 13:40:29,,,,2,,,
Android,39847389,2,,39839817,2016,,4,,"<p>Here is my fully working solution.  By including the CameraSource.java class <a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java"" rel=""nofollow"">found here</a> in my project.  I am able to scan the qr code and I can toggle the camera torch on and off.</p>

<pre><code>public class fragment_qrscan extends myFragment {

    SurfaceView cameraPreview;
    private CameraSource mCameraSource;
    private Button btnLight;
    boolean lightOn = false;

    @Nullable
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.fragment_qrscan, container, false);

        cameraPreview = (SurfaceView) view.findViewById(R.id.camera_preview);
        btnLight = (Button) view.findViewById(R.id.btnLight);

        btnLight.setOnClickListener(
                new View.OnClickListener() {
                    public void onClick(View v) {
                        btnLightClicked();
                    }
                }
        );

        createCameraSource(true, false);

        return view;
    }

    private void btnLightClicked() {

       if (!lightOn) {
            mCameraSource.setFlashMode(Camera.Parameters.FLASH_MODE_TORCH);
           lightOn = true;

       }
        else {
           mCameraSource.setFlashMode(Camera.Parameters.FLASH_MODE_OFF);
           lightOn = false;
       }
    }

    @SuppressLint(""InlinedApi"")
    private void createCameraSource(boolean autoFocus, boolean useFlash) {
        Context context = getActivity().getApplicationContext();
        BarcodeDetector barcodeDetector = new BarcodeDetector.Builder(context).build();
        CameraSource.Builder builder = new CameraSource.Builder(getActivity().getApplicationContext(), barcodeDetector)
                .setFacing(CameraSource.CAMERA_FACING_BACK)
                .setRequestedPreviewSize(1600, 1024)
                .setRequestedFps(15.0f);
        // make sure that auto focus is an available option
        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
            builder = builder.setFocusMode(
                    autoFocus ? Camera.Parameters.FOCUS_MODE_CONTINUOUS_PICTURE : null);
        }

        mCameraSource = builder
                .setFlashMode(useFlash ? Camera.Parameters.FLASH_MODE_TORCH : null)
                .build();

    cameraPreview.getHolder().addCallback(new SurfaceHolder.Callback() {
        @Override
        public void surfaceCreated(SurfaceHolder holder) {
            try {
                if (ActivityCompat.checkSelfPermission(getActivity(), Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED) {
                    ActivityCompat.requestPermissions(getActivity(), new String[]{Manifest.permission.CAMERA}, 1);
                }

                mCameraSource.start(cameraPreview.getHolder());

            } catch (Exception e) {
                e.printStackTrace();
            }
        }

        @Override
        public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {

        }

        @Override
        public void surfaceDestroyed(SurfaceHolder holder) {

            mCameraSource.stop();
        }
    });

    barcodeDetector.setProcessor(new Detector.Processor&lt;Barcode&gt;() {
        @Override
        public void release() {

        }

        @Override
        public void receiveDetections(Detector.Detections&lt;Barcode&gt; detections) {

            final SparseArray&lt;Barcode&gt; barcodes = detections.getDetectedItems();
            if (barcodes.size() &gt;0) {
                Log.i(""myStuff"",String.valueOf(barcodes.valueAt(0).displayValue));
            }
        }
    });

    }
}
</code></pre>

<p>I am sure there is a cleaner solution but for now this code works perfectly and with auto focus set to true is is really cool how fast and easy it is to scan the qr code.  Even from 3 feet away the code is detected instantly.  </p>
",5818043,,,,,2016-10-04 8:15:59,,,,4,,,
Android,49750725,2,,49750462,2018,,4,,"<pre><code>public class NavigationController {
    private final int containerId;
    private final FragmentManager fragmentManager;
    @Inject
    public NavigationController(MainActivity mainActivity) {
</code></pre>

<p>We see that it has an Inject constructor, so Dagger2 will see it. We also see that there is no scope annotation on this class, so unless this is bound in a module to a given scope, it'll be unscoped. And it receives MainActivity as an argument, so it'll be instantiated by a component that knows about MainActivity. </p>

<p>There is only a single activity in the app and there are multiple fragments, so all it takes is to use Activity scoped subcomponent to inject the activity.</p>

<p>This is automatic, as it is done by the <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/di/AppInjector.java#L44"" rel=""nofollow noreferrer"">AppInjector</a> when the Activity is created, and calls <code>AndroidInjection.inject(activity)</code> which looks up the Activity scoped component that can inject MainActivity.</p>

<pre><code>public class AppInjector {
    private AppInjector() {}
        public static void init(GithubApp githubApp) {
            DaggerAppComponent.builder().application(githubApp)
                  .build().inject(githubApp);
            githubApp
                  .registerActivityLifecycleCallbacks(new Application.ActivityLifecycleCallbacks() {
                      @Override
                      public void onActivityCreated(Activity activity, Bundle savedInstanceState) {
                          handleActivity(activity);
                      }
</code></pre>

<p>And it is initialized in Application class.</p>

<pre><code>public class GithubApp extends Application implements HasActivityInjector {

    @Inject
    DispatchingAndroidInjector&lt;Activity&gt; dispatchingAndroidInjector;

    @Override
    public void onCreate() {
        super.onCreate();
        if (BuildConfig.DEBUG) {
            Timber.plant(new Timber.DebugTree());
        }
        AppInjector.init(this); // &lt;--
    }
</code></pre>

<p>The definition of the subcomponent that binds the instance of <code>MainActivity</code> is in <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/di/MainActivityModule.java#L26"" rel=""nofollow noreferrer"">MainActivityModule</a>.</p>

<pre><code>@Module
public abstract class MainActivityModule {
    @ContributesAndroidInjector(modules = FragmentBuildersModule.class)
    abstract MainActivity contributeMainActivity();
}
</code></pre>

<p>Which is added to the global component.</p>

<pre><code>@Singleton
@Component(modules = {
        AndroidInjectionModule.class,
        AppModule.class,
        MainActivityModule.class
})
</code></pre>
",2413303,,2413303,,2018-04-10 10:36:17,2018-04-10 10:36:17,,,,8,,,
Android,40482678,2,,40482556,2016,,4,,"<p>You could just put the file into your assets folder in the source code, and then do this:</p>

<pre><code>WebView webView = (WebView)findViewById(R.id.webView1);
webview.loadUrl(""file:///android_assets/file.html"");
</code></pre>

<p><strong>For display PDF:</strong></p>

<p>Since API Level 21 (Lollipop) Android provides a PdfRenderer class:</p>

<pre><code>// create a new renderer
PdfRenderer renderer = new PdfRenderer(getSeekableFileDescriptor());

// let us just render all pages
final int pageCount = renderer.getPageCount();
for (int i = 0; i &lt; pageCount; i++) {
  Page page = renderer.openPage(i);

  // say we render for showing on the screen
  page.render(mBitmap, null, null, Page.RENDER_MODE_FOR_DISPLAY);

  // do stuff with the bitmap

  // close the page
  page.close();
}

// close the renderer
renderer.close();
</code></pre>

<p>This sample demonstrates <a href=""https://github.com/googlesamples/android-PdfRendererBasic"" rel=""nofollow noreferrer"">how to display PDF document on screen using the PdfRenderer introduced in Android 5.0 Lollipop.</a></p>

<p>For older APIs, checkout <a href=""https://github.com/barteksc/AndroidPdfViewer"" rel=""nofollow noreferrer"">AndroidPdfViewer library</a>, works on API 11 and higher:</p>

<pre><code>pdfView.fromUri(Uri)
or
pdfView.fromFile(File)
or
pdfView.fromAsset(String)
    .pages(0, 2, 1, 3, 3, 3) // all pages are displayed by default
    .enableSwipe(true)
    .swipeHorizontal(false)
    .enableDoubletap(true)
    .defaultPage(0)
    .onDraw(onDrawListener)
    .onLoad(onLoadCompleteListener)
    .onPageChange(onPageChangeListener)
    .onPageScroll(onPageScrollListener)
    .onError(onErrorListener)
    .enableAnnotationRendering(false)
    .password(null)
    .scrollHandle(null)
    .load();
</code></pre>
",983391,,983391,,2016-11-08 9:28:51,2016-11-08 9:28:51,,,,8,,,
Android,42692990,2,,42683932,2017,,4,,"<p>In addition to what Dan Albert posted, the <code>hello-jni</code> example actually already shows the necessary ifdefs for detecting the different ABIs:</p>

<p><a href=""https://github.com/googlesamples/android-ndk/blob/master/hello-jni/app/src/main/cpp/hello-jni.c"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk/blob/master/hello-jni/app/src/main/cpp/hello-jni.c</a></p>

<pre><code>#if defined(__arm__)
    #if defined(__ARM_ARCH_7A__)
    #if defined(__ARM_NEON__)
      #if defined(__ARM_PCS_VFP)
        #define ABI ""armeabi-v7a/NEON (hard-float)""
      #else
        #define ABI ""armeabi-v7a/NEON""
      #endif
    #else
      #if defined(__ARM_PCS_VFP)
        #define ABI ""armeabi-v7a (hard-float)""
      #else
        #define ABI ""armeabi-v7a""
      #endif
    #endif
  #else
   #define ABI ""armeabi""
  #endif
#elif defined(__i386__)
#define ABI ""x86""
#elif defined(__x86_64__)
#define ABI ""x86_64""
#elif defined(__mips64)  /* mips64el-* toolchain defines __mips__ too */
#define ABI ""mips64""
#elif defined(__mips__)
#define ABI ""mips""
#elif defined(__aarch64__)
#define ABI ""arm64-v8a""
#else
#define ABI ""unknown""
#endif
</code></pre>
",3115956,,,,,2017-03-09 10:35:03,,,,1,,,
Android,34539716,2,,31838523,2015,,4,,"<p>The problem is likely that the Google API client is not connected, try calling <code>connect()</code> in the <code>onStart()</code> method of your activity, or if you are using a recent version of Play Services, we added automatic management of the API client to make this easier, really simplifying things and avoiding common problems.</p>

<p>Just call <code>enableAutoManage()</code> when building the <code>GoogleApiClient</code>:</p>

<pre><code>    // ""this"" is a reference to your activity
    mCredentialsApiClient = new GoogleApiClient.Builder(this)
            .addConnectionCallbacks(this)
            .enableAutoManage(this, this)
            .addApi(Auth.CREDENTIALS_API)
            .build();
</code></pre>

<p>Then you can make an API request without having to call <code>mCredentialsApiClient.onConnect()</code> at any point, the Google API client's lifecycle will be managed automatically for you. e.g.</p>

<pre><code>@Override
public void onStart() {
    CredentialRequest request = new CredentialRequest.Builder()
            .setSupportsPasswordLogin(true)
            .build();
    Auth.CredentialsApi.request(mCredentialsApiClient, request).setResultCallback(
            new ResultCallback&lt;CredentialRequestResult&gt;() {
                public void onResult(CredentialRequestResult result) {
                    // result.getStatus(), result.getCredential() ... sign in automatically!
...
</code></pre>

<p>Check out a full sample app at on Github: <a href=""https://github.com/googlesamples/android-credentials/blob/master/credentials-quickstart/app/src/main/java/com/google/example/credentialsbasic/MainActivity.java"" rel=""nofollow"">https://github.com/googlesamples/android-credentials/blob/master/credentials-quickstart/app/src/main/java/com/google/example/credentialsbasic/MainActivity.java</a></p>
",5001016,,5001016,,2016-01-17 2:17:55,2016-01-17 2:17:55,,,,0,,,
Android,34382895,2,,10311834,2015,,4,,"<p>As Peter McClennan indicated, Google has an API that works extremely well with the new fused location provider.   A completely worked example is at 
<a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationSettings/app/src/main/java/com/google/android/gms/location/sample/locationsettings/MainActivity.java"" rel=""nofollow"">Google Sample Code at Github</a>  You don't need to code a user dialog to ask them to change settings as it is done automatically with the API.</p>
",5700800,,,,,2015-12-20 16:03:43,,,,1,,,
Android,35211304,2,,35113210,2016,,4,,"<p>I'm not quite sure, but here are some suggestions of things to try:</p>

<p>There is an open source version of CameraSource here that you can use and modify as needed in your app:</p>

<p><a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java"" rel=""nofollow"">https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java</a></p>

<p>This has a couple of surface instance variables, mDummySurfaceView and mDummySurfaceTexture, that are used in working with the camera preview in the case that there is no display for the preview.  These get set up here:</p>

<p><a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java#L346"" rel=""nofollow"">https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java#L346</a></p>

<p>I'm guessing that in your app these dummy surfaces are somehow interfering with your video.  You might see if your app could use an alternate strategy for working with the camera that doesn't require these dummy surfaces.</p>

<p>You could also start the camera source with a specific SurfaceHolder that you supply, as is supplied here:</p>

<p><a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java#L370"" rel=""nofollow"">https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java#L370</a></p>

<p>You might try experimenting with creating alternative surfaces, and see if there's a way to avoid interference with your video.</p>

<p>If none of that works, you could also try writing camera controlling code yourself, similar to what CameraSource provides, but using the newer ""camera2"" API (we shipped CameraSource using the ""camera1"" API because at the time, this API had a little bit better backward compatibility with older cameras, but this has been improving with camera2).  If you do this, you can take a similar approach to passing preview images to a detector, as is done here:</p>

<p><a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java#L1191"" rel=""nofollow"">https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java#L1191</a></p>
",5231007,,,,,2016-02-04 20:47:03,,,,1,,,
Android,45577505,2,,45515288,2017,,4,,"<p>Whether RAW capture is supported at all, and what rate it can be done are both device-dependent.</p>

<p>If the device supports the <a href=""https://developer.android.com/reference/android/hardware/camera2/CameraMetadata.html#REQUEST_AVAILABLE_CAPABILITIES_RAW"" rel=""nofollow noreferrer"">RAW capability</a>, then you can use an ImageReader with the RAW_SENSOR format as a capture target. The format will then also be listed in the <a href=""https://developer.android.com/reference/android/hardware/camera2/params/StreamConfigurationMap.html#getOutputFormats()"" rel=""nofollow noreferrer"">available output formats</a>.  You can see what kinds of stream combinations are supported in the documentation for <a href=""https://developer.android.com/reference/android/hardware/camera2/CameraDevice.html#createCaptureSession(java.util.List%3Candroid.view.Surface%3E,%20android.hardware.camera2.CameraCaptureSession.StateCallback,%20android.os.Handler)"" rel=""nofollow noreferrer"">createCaptureSession</a> in the RAW-capability table. </p>

<p>To determine how fast you can capture RAW buffers, take a look at the output of <a href=""https://developer.android.com/reference/android/hardware/camera2/params/StreamConfigurationMap.html#getOutputMinFrameDuration(int,%20android.util.Size)"" rel=""nofollow noreferrer"">getOutputMinFrameDuration</a>, which tells you what the maximum frame rate when including an output of given format and resolution combination. In addition, the <a href=""https://developer.android.com/reference/android/hardware/camera2/params/StreamConfigurationMap.html#getOutputStallDuration(int,%20android.util.Size)"" rel=""nofollow noreferrer"">getOutputStallDuration</a> method will tell you if you need extra delay between two consecutive requests targeting the RAW output to avoid stalling preview.  There's no requirement to support any particular output rate of RAW buffers in the general case. </p>

<p>However, if the device supports either of the more-efficient RAW10 or RAW12 formats, and it supports the <a href=""https://developer.android.com/reference/android/hardware/camera2/CameraMetadata.html#REQUEST_AVAILABLE_CAPABILITIES_BURST_CAPTURE"" rel=""nofollow noreferrer"">BURST_CAPTURE</a> capability, then it's guaranteed to support capturing those formats with at least 20fps rates.</p>

<p>You can look at the Google <a href=""https://github.com/googlesamples/android-Camera2Raw"" rel=""nofollow noreferrer"">camera2raw</a> sample for basic still capture. However, you can certainly capture RAW buffers continually instead of alongside JPEG buffers. But your frame rate may be very low in that case, and to preserve your preview frame rate, you may wish to only issue a RAW capture one out of every N preview frames.  </p>

<p>For example, if the stall duration for RAW_SENSOR is 100ms, but the minimum frame duration is 30ms, you can run continuous preview by having a capture request pattern of (R+P),P,P,P,(R+P),P,P,P... so that there's at least 100 ms between the starts of each raw capture. That'll get you ~8fps RAW and 30fps preview.</p>
",1344825,,,,,2017-08-08 20:30:14,,,,1,,,
Android,53995394,2,,51687173,2019,,4,,"<p>From your code it seems that your recyclerview is the root element of the XML, and is missing the reference from xmlns:tools</p>

<p>Try to use another root element, as a constraint layout or even just layout as per example of <a href=""https://github.com/googlesamples/android-sunflower"" rel=""nofollow noreferrer"">google sunflowerapp</a>:</p>

<pre><code>&lt;layout xmlns:android=""http://schemas.android.com/apk/res/android""
    xmlns:app=""http://schemas.android.com/apk/res-auto""
    xmlns:tools=""http://schemas.android.com/tools""&gt;

    &lt;androidx.recyclerview.widget.RecyclerView
            android:id=""@+id/plant_list""
            android:layout_width=""match_parent""
            android:layout_height=""match_parent""
            android:clipToPadding=""false""
            android:paddingLeft=""@dimen/margin_normal""
            android:paddingRight=""@dimen/margin_normal""
            app:layoutManager=""androidx.recyclerview.widget.LinearLayoutManager""
            tools:context=""com.google.samples.apps.sunflower.GardenActivity""
            tools:listitem=""@layout/list_item_plant"" /&gt;

&lt;/layout&gt;
</code></pre>
",9407524,,,,,2019-01-01 12:22:38,,,,0,,,
Android,45821616,2,,36161390,2017,,4,,"<p>You can get token and order id parsing the response from 'getPurchases'</p>

<p><a href=""https://developer.android.com/google/play/billing/billing_reference.html#getPurchases"" rel=""nofollow noreferrer"">https://developer.android.com/google/play/billing/billing_reference.html#getPurchases</a></p>

<p>But it is easer if you use IabHelper from TrialDrive Sample .
<a href=""https://github.com/googlesamples/android-play-billing/tree/master/TrivialDrive"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-billing/tree/master/TrivialDrive</a></p>

<p>There you app you can retrieve the token from the purchase object which you obtain starting a queryInventory:</p>

<pre><code>IabHelper.QueryInventoryFinishedListener mGotInventoryListener = new IabHelper.QueryInventoryFinishedListener() {
        public void onQueryInventoryFinished(IabResult result, Inventory inventory) {
           Log.d(TAG, ""Query inventory finished."");

            // Have we been disposed of in the meantime? If so, quit.
            if (mHelper == null) return;

            // Is it a failure?
            if (result.isFailure()) {
                Log.d(TAG, ""Failed to query inventory: "" + result);
                return;
            }

            Purchase premiumMonthly = inventory.getPurchase(SKU_SUSCRIPTION);
            if (premiumMonthly != null &amp;&amp; premiumMonthly.isAutoRenewing()) {
                    String token = premiumMonthly.getToken();
                    String orderid = premiumMonthly.getOrderId();

                    Log.d(TAG, token);
                    Log.d(TAG, orderid);
                } 
            }
   ....

    mHelper.queryInventoryAsync(mGotInventoryListener);
</code></pre>
",2807405,,,,,2017-08-22 15:23:36,,,,1,,,
Android,37115194,2,,29006960,2016,,4,,"<p>I found <a href=""https://github.com/googlesamples/android-FingerprintDialog"" rel=""nofollow"">this in google samples</a> which demonstrates how you can use registered fingerprints in your app to authenticate the user before proceeding some actions such as purchasing an item.</p>

<blockquote>
  <p>First you need to create a symmetric key in the Android Key Store using <a href=""https://developer.android.com/reference/javax/crypto/KeyGenerator.html"" rel=""nofollow"">KeyGenerator</a> which can be only be used after the user has authenticated with fingerprint and pass a <a href=""https://developer.android.com/reference/android/security/keystore/KeyGenParameterSpec.html"" rel=""nofollow"">KeyGenParameterSpec</a>.</p>
  
  <p>By setting <a href=""https://developer.android.com/reference/android/security/keystore/KeyGenParameterSpec.Builder.html#setUserAuthenticationRequired%28boolean%29"" rel=""nofollow"">KeyGenParameterSpec.Builder.setUserAuthenticationRequired</a>
  to true, you can permit the use of the key only after the user
  authenticate it including when authenticated with the user's
  fingerprint.</p>
  
  <p>Then start listening to a fingerprint on the fingerprint sensor by
  calling <a href=""https://developer.android.com/reference/android/hardware/fingerprint/FingerprintManager.html#authenticate%28android.hardware.fingerprint.FingerprintManager.CryptoObject,%20android.os.CancellationSignal,%20int,%20android.hardware.fingerprint.FingerprintManager.AuthenticationCallback,%20android.os.Handler%29"" rel=""nofollow"">FingerprintManager.authenticate</a> with a <a href=""https://developer.android.com/reference/javax/crypto/Cipher.html"" rel=""nofollow"">Cipher</a> initialized with
  the symmetric key created. Or alternatively you can fall back to
  server-side verified password as an authenticator.</p>
  
  <p>Once the fingerprint (or password) is verified, the
  <a href=""https://developer.android.com/reference/android/hardware/fingerprint/FingerprintManager.AuthenticationCallback.html#onAuthenticationSucceeded%28android.hardware.fingerprint.FingerprintManager.AuthenticationResult%29"" rel=""nofollow"">FingerprintManager.AuthenticationCallback#onAuthenticationSucceeded()</a>
  callback is called.</p>
</blockquote>

<p>It requires SDK V23. AFAIK its not useful for Samsung S5 but it might help others to use this feature.</p>
",2101822,,,,,2016-05-09 11:55:25,,,,2,,,
Android,54759742,2,,54759403,2019,,4,,"<p>Your question isn't about a problem and is not detailed. But I can give you a great Media Player from google samples named UAMP(Universal Android Media Player) with handle all about android media player. <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""nofollow noreferrer"">Link</a> </p>

<p>UAMP uses a MediaMetadataCompat to update the song metadata like below code segment. </p>

<pre><code>fun MediaMetadataCompat.Builder.from(jsonMusic: JsonMusic): MediaMetadataCompat.Builder {
// The duration from the JSON is given in seconds, but the rest of the code works in
// milliseconds. Here's where we convert to the proper units.
val durationMs = TimeUnit.SECONDS.toMillis(jsonMusic.duration)

id = jsonMusic.id
title = jsonMusic.title
artist = jsonMusic.artist
album = jsonMusic.album
duration = durationMs
genre = jsonMusic.genre
mediaUri = jsonMusic.source
albumArtUri = jsonMusic.image
trackNumber = jsonMusic.trackNumber
trackCount = jsonMusic.totalTrackCount
flag = MediaItem.FLAG_PLAYABLE

// To make things easier for *displaying* these, set the display properties as well.
displayTitle = jsonMusic.title
displaySubtitle = jsonMusic.artist
displayDescription = jsonMusic.album
displayIconUri = jsonMusic.image

// Add downloadStatus to force the creation of an ""extras"" bundle in the resulting
// MediaMetadataCompat object. This is needed to send accurate metadata to the
// media session during updates.
downloadStatus = STATUS_NOT_DOWNLOADED

// Allow it to be used in the typical builder style.
return this
</code></pre>

<p>}</p>

<p>By this component, you can update song data in the notification, lock screen, and home screen.</p>
",4874842,,4874842,,2019-02-19 6:21:46,2019-02-19 6:21:46,,,,0,,,
Android,29314773,2,,29314457,2015,,5,,"<p>Your location implementation is based on an older version of Google Play services but you imported Play services 7.0.0 that ""GooglePlayServicesClient"" is no longer exist.</p>

<p>You can change play services version to an older version in your build.gradle file
or
You can use <a href=""https://github.com/googlesamples/android-play-location/tree/master/BasicLocationSample"" rel=""nofollow"">this</a> sample for newer location implementation.</p>
",2036835,,,,,2015-03-28 7:28:08,,,,2,,,
Android,48032418,2,,48023752,2017,,5,,"<p>Of course this is supported, otherwise it would be very limited to use Instant Apps. </p>

<p>You must use AppLinks to open feature modules. After you made the call, Android will be downloading that feature if required.</p>

<p>For example this is the flow of opening <em>detail</em> feature from <em>main</em> feature used in <a href=""https://github.com/googlesamples/android-instant-apps/blob/master/multi-feature-module/main/src/main/java/com/example/android/unsplash/MainActivity.java"" rel=""noreferrer"">Google Samples</a>.</p>

<p>Creating the Intent:</p>

<pre><code>@NonNull
private static Intent getDetailActivityStartIntent(Context context,
                                                   int position,
                                                   PhotoViewHolder holder) {
    final Intent intent = new Intent(Intent.ACTION_VIEW,
            Uri.parse(""https://multi-feature.instantappsample.com/detail/"" + position));
    intent.setPackage(context.getPackageName());
    intent.addCategory(Intent.CATEGORY_BROWSABLE);

    TextView author =
            holder.itemView.findViewById(com.example.android.unsplash.base.R.id.author);

    // Working around unboxing issues with multiple dex files on platforms prior to N.
    intent.putExtra(IntentUtil.SELECTED_ITEM_POSITION, position);
    intent.putExtra(IntentUtil.FONT_SIZE, author.getTextSize());
    intent.putExtra(IntentUtil.PADDING,
            new Rect(author.getPaddingLeft(),
                    author.getPaddingTop(),
                    author.getPaddingRight(),
                    author.getPaddingBottom()));
    intent.putExtra(IntentUtil.TEXT_COLOR, author.getCurrentTextColor());
    return intent;
}
</code></pre>

<p>Starting it:</p>

<pre><code>final Intent intent = getDetailActivityStartIntent(activity, position, pvh);
final ActivityOptions activityOptions = getActivityOptions(pvh);
activity.startActivityForResult(intent, IntentUtil.REQUEST_CODE, 
    activityOptions.toBundle());
</code></pre>

<p>Finishing for result is just the same as non Instant Apps.</p>

<p>Set the result in DetailActivity and finish it. Get the result in onActivityResult of MainActivity.</p>
",2708768,,,,,2017-12-30 8:59:37,,,,0,,,
Android,44957486,2,,34979420,2017,,5,,"<p>This issue was opened on the google's android-play-billing samples <a href=""https://github.com/googlesamples/android-play-billing/issues/7"" rel=""noreferrer"">repo</a>.
Looks like it was ignored for a long time and was eventually closed with <a href=""https://github.com/googlesamples/android-play-billing/issues/7#issuecomment-305316583"" rel=""noreferrer"">this</a> comment. In short, they have following suggestions.</p>

<hr>

<p><em>We reviewed our guidelines and internal APIs, and since the developerPayload is not supported across all features on In-App Billing API (including promocodes), we are removing the recommendation to use it as a security check.</em></p>

<p><em>As you can see in our documentation, on the page Implementing In-app Billing (<a href=""https://developer.android.com/google/play/billing/billing_integrate.html"" rel=""noreferrer"">https://developer.android.com/google/play/billing/billing_integrate.html</a>) we've added a recommendation:</em></p>

<p><em>Caution: Don't use the developerPayload field for security validation purposes. This field isn't always available when completing tasks related to In-app Billing. For more information about security best practices, see the In-app Billing Security and Design guide.</em></p>

<p><em>Our recommendation is to validate on your own backend, using the Play Developer API.</em></p>

<hr>
",1230067,,,,,2017-07-06 19:36:41,,,,1,,,
Android,46497582,2,,46462128,2017,,5,,"<blockquote>
  <ol>
  <li>Can i use LiveData to wrap Delete, Insert, Update calls?</li>
  </ol>
</blockquote>

<p>No, you can't. I wrote an answer to the <a href=""https://github.com/googlesamples/android-architecture-components/issues/162"" rel=""noreferrer"">issue</a>. The reason is, that LiveData is used to notify for changes. Insert, Update, Delete won't trigger a change. It will return the deleted rows, the inserted ID or the affected rows. Even if it looks horrible it makes sense not having LiveData wrapped around your stuff. Anyway, it would make sense to have something like Single around the calls to let the operation triggered and operated on a RX-Java operation. </p>

<p>If you want to trigger those calls, you observe on a selection query which notify your LiveData onec you have updated, inserted or deleted some/any data.</p>

<blockquote>
  <ol start=""2"">
  <li>Better way to maintain such asynctask class for delete, insert , update?</li>
  </ol>
</blockquote>

<p>After looking at your example it looks like that you misuse the (Model/View/)ViewModel-Pattern. You should never access your repository in your view. I'm not sure if you'r doing this because its not visible in your sample. Anyway, after observing your LiveData and getting a result, there's no need to wrap the updating of data inside your viewModel in an AsyncTask. That means, that you should alway take care of</p>

<p>a) view &lt;-> viewmodel &lt;-> repository and not view &lt;-> repository and view &lt;-> viewmodel</p>

<p>and </p>

<p>b) don't try to use threads which are not needed. You observe LiveData on a Background Thread (@WorkerThread) by default (if not annotated with @MainThread) and get the value in the ui-thread (@MainThread).</p>
",2032539,,,,,2017-09-29 22:14:31,,,,4,,,
Android,30164523,2,,30164176,2015,,5,,"<p><a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationSettings"" rel=""noreferrer"">I think you can check sample project by google</a></p>
",1426313,,,,,2015-05-11 9:52:13,,,,0,,,
Android,46835897,2,,46823116,2017,,5,,"<p>Are you sending only a single capture request? Or are you running a repeating request in the background, and then only issuing a high-resolution capture on button press?</p>

<p>The former won't really work - you have to have a flow of requests to have the autoexposure, focus, and white balance algorithms converge to good values. A single capture won't be properly metered or focused.</p>

<p>Please take a look at the <a href=""https://github.com/googlesamples/android-Camera2Basic/"" rel=""noreferrer"">Camera2Basic</a> sample; if you replace the TextureView in that sample with just a SurfaceTexture (give it a random texture ID and don't call updateTexImage), then you can have no preview.  But it implements focusing and the precapture trigger correctly, which is critical for you here.  For one, the triggers must only be set on one request, and then you do need to watch the capture results coming back to see when the exposure / focus state changes to FOCUSED or CONVERGED.</p>

<p>I'd also recommend the CONTINUOUS_PICTURE focus mode instead of AUTO; it's likely to get you a focused image faster.</p>
",1344825,,,,,2017-10-19 17:44:45,,,,4,,,
Android,48604573,2,,48602979,2018,,5,,"<p>After a little more digging I've found a utility method Google provided through their Architecture Components examples on GitHub.</p>

<p><a href=""https://github.com/googlesamples/android-architecture-components/blob/master/BasicSample/app/src/androidTest/java/com/example/android/persistence/LiveDataTestUtil.java"" rel=""nofollow noreferrer"">LiveDataTestUtil</a></p>

<pre><code>public class LiveDataTestUtil {

    /**
     * Get the value from a LiveData object. We're waiting for LiveData to emit, for 2 seconds.
     * Once we got a notification via onChanged, we stop observing.
     */
    public static &lt;T&gt; T getValue(final LiveData&lt;T&gt; liveData) throws InterruptedException {
        final Object[] data = new Object[1];
        final CountDownLatch latch = new CountDownLatch(1);
        Observer&lt;T&gt; observer = new Observer&lt;T&gt;() {
            @Override
            public void onChanged(@Nullable T o) {
                data[0] = o;
                latch.countDown();
                liveData.removeObserver(this);
            }
        };
        liveData.observeForever(observer);
        latch.await(2, TimeUnit.SECONDS);
        //noinspection unchecked
        return (T) data[0];
    }
}
</code></pre>

<p>This allows you to pass the LiveData instance and get back the value it holds.</p>

<p><strong>Update:</strong>
You can also use the <a href=""https://developer.android.com/reference/android/arch/core/executor/testing/InstantTaskExecutorRule"" rel=""nofollow noreferrer"">InstantTaskExecutorRule</a> combined with <a href=""https://developer.android.com/reference/android/arch/lifecycle/LiveData.html#observeforever"" rel=""nofollow noreferrer"">observeForever</a> to test your LiveData. In Kotlin you set <code>@get:Rule val instantTaskExecutorRule = InstantTaskExecutorRule()</code> at the top of your test class to ensure LiveData is handled synchronously, then inside your test cases <code>myLiveData.observeForever { /* Do something when event emitted */ }</code> to get the LiveData value.</p>
",5057537,,5057537,,2018-10-20 5:37:37,2018-10-20 5:37:37,,,,3,,,
Android,48837581,2,,44712248,2018,,5,,"<p>You can enable constructor injection for your ViewModels. You can check out <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/ui/user/UserViewModel.java"" rel=""nofollow noreferrer"">Google samples</a> to see how to do it in Java. (Update: looks like they converted the project to Kotlin so this URL no longer works)</p>

<p>Here is how to do a similar thing in Kotlin:</p>

<p>Add ViewModelKey annotation:</p>

<pre><code>import android.arch.lifecycle.ViewModel

import java.lang.annotation.Documented
import java.lang.annotation.ElementType
import java.lang.annotation.Retention
import java.lang.annotation.RetentionPolicy
import java.lang.annotation.Target

import dagger.MapKey
import kotlin.reflect.KClass

@Suppress(""DEPRECATED_JAVA_ANNOTATION"")
@Documented
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
@MapKey
internal annotation class ViewModelKey(val value: KClass&lt;out ViewModel&gt;)
</code></pre>

<p>Add ViewModelFactory:</p>

<pre><code>import android.arch.lifecycle.ViewModel
import android.arch.lifecycle.ViewModelProvider

import javax.inject.Inject
import javax.inject.Provider
import javax.inject.Singleton

@Singleton
class ViewModelFactory @Inject constructor(
    private val creators: Map&lt;Class&lt;out ViewModel&gt;, @JvmSuppressWildcards Provider&lt;ViewModel&gt;&gt;
) : ViewModelProvider.Factory {

    @Suppress(""UNCHECKED_CAST"")
    override fun &lt;T : ViewModel&gt; create(modelClass: Class&lt;T&gt;): T {
        var creator: Provider&lt;out ViewModel&gt;? = creators[modelClass]

        if (creator == null) {
            for ((key, value) in creators) {
                if (modelClass.isAssignableFrom(key)) {
                    creator = value
                    break
                }
            }
        }

        if (creator == null) {
            throw IllegalArgumentException(""unknown model class "" + modelClass)
        }

        try {
            return creator.get() as T
        } catch (e: Exception) {
            throw RuntimeException(e)
        }
    }
}
</code></pre>

<p>Add ViewModelModule:</p>

<pre><code>import dagger.Module
import android.arch.lifecycle.ViewModel
import dagger.multibindings.IntoMap
import dagger.Binds
import android.arch.lifecycle.ViewModelProvider
import com.bubelov.coins.ui.viewmodel.EditPlaceViewModel

@Module
abstract class ViewModelModule {
    @Binds
    @IntoMap
    @ViewModelKey(EditPlaceViewModel::class) // PROVIDE YOUR OWN MODELS HERE
    internal abstract fun bindEditPlaceViewModel(editPlaceViewModel: EditPlaceViewModel): ViewModel

    @Binds
    internal abstract fun bindViewModelFactory(factory: ViewModelFactory): ViewModelProvider.Factory
}
</code></pre>

<p>Register your ViewModelModule in your component</p>

<p>Inject ViewModelProvider.Factory in your activity:</p>

<pre><code>@Inject lateinit var modelFactory: ViewModelProvider.Factory
private lateinit var model: EditPlaceViewModel
</code></pre>

<p>Pass your modelFactory to each ViewModelProviders.of method:</p>

<pre><code>model = ViewModelProviders.of(this, modelFactory)[EditPlaceViewModel::class.java]
</code></pre>

<p>Here is the sample commit which contains all of the required changes: <a href=""https://github.com/bubelov/coins-android/commit/56629d75569bc2937889b71299c21b9579ad96c4"" rel=""nofollow noreferrer"">Support constructor injection for view models</a></p>
",1042342,,1042342,,2018-05-31 5:45:16,2018-05-31 5:45:16,,,,3,,,
Android,28363249,2,,28248828,2015,,5,,"<p>Unit tests run on a local JVM (without a need for a device or emulator) are supported in Android Studio since version 1.1 and Gradle 1.1.0-rc1.</p>

<p>For setup instructions see: <a href=""http://tools.android.com/tech-docs/unit-testing-support"" rel=""nofollow"">http://tools.android.com/tech-docs/unit-testing-support</a></p>

<p>Examples: <a href=""https://github.com/googlesamples/android-testing"" rel=""nofollow"">https://github.com/googlesamples/android-testing</a> (and then /unittesting/BasicSample)</p>

<p>If you want JUnit4 support - checkout Testing Support Library <a href=""https://developer.android.com/tools/testing-support-library/index.html"" rel=""nofollow"">https://developer.android.com/tools/testing-support-library/index.html</a></p>
",1135827,,1135827,,2015-04-06 13:10:03,2015-04-06 13:10:03,,,,0,,,
Android,28622798,2,,28609915,2015,,5,,"<p>The best and most comprehensive example is Android's official bluetooth chat example. You probably do not need to change most of the stuff. See this:
<a href=""https://github.com/googlesamples/android-BluetoothChat"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-BluetoothChat</a></p>
",3236788,,3236788,,2018-05-04 17:27:17,2018-05-04 17:27:17,,,,2,,,
Android,32146854,2,,32105785,2015,,5,,"<p>There is a ""Getting Started"" page, which talks about how to import the sample projects:</p>

<p><a href=""https://developers.google.com/vision/getting-started"" rel=""nofollow"">https://developers.google.com/vision/getting-started</a></p>

<blockquote>
  <p>To download and set up the sample application in Android Studio:</p>
  
  <ol>
  <li>Download the Vision samples from Github.</li>
  </ol>
  
  <p>You can either use the ""Download ZIP"" button on the Github Page or
  clone on the command line:</p>
  
  <p>git clone <a href=""https://github.com/googlesamples/android-vision.git"" rel=""nofollow"">https://github.com/googlesamples/android-vision.git</a> </p>
  
  <ol start=""2"">
  <li>Import the photo-demo project in Android Studio:</li>
  </ol>
  
  <p>Click File > New > Import Project.</p>
  
  <p>In the ""Select Eclipse or Gradle
  Project to Import"" window, navigate to the directory where you
  downloaded the vision samples repository. </p>
  
  <p>Select the ""photo-demo"" folder and click OK. </p>
  
  <p>Android Studio may prompt you to install the
  latest version of various Android libraries, especially
  com.android.gms.play-services in this case. Click ""Install Repository
  and sync project"" and follow the instructions. </p>
  
  <ol start=""3"">
  <li><p>Connect your device
  over USB. You should see a notification that says USB Debugging
  Enabled. If you dont see this notification, follow Step 2 here to
  enable USB debugging on your device, then plug your device in again.</p></li>
  <li><p>Run the app either by clicking the green arrow in the bar, or go to
  Run > Run 'app'.</p></li>
  </ol>
</blockquote>
",5231007,,5231007,,2015-08-23 14:57:54,2015-08-23 14:57:54,,,,0,,,
Android,32157057,2,,2050263,2015,,5,,"<p>Barcode Detection is now available in <a href=""http://android-developers.blogspot.com/2015/08/barcode-detection-in-google-play.html"" rel=""noreferrer"">Google Play services</a>.  <a href=""https://search-codelabs.appspot.com/codelabs/bar-codes#1"" rel=""noreferrer"">Code lab</a> of the setup process, here are the <a href=""https://developers.google.com/vision/barcodes-overview"" rel=""noreferrer"">api docs</a>, and a <a href=""https://github.com/googlesamples/android-vision"" rel=""noreferrer"">sample project</a>.</p>
",821544,,,,,2015-08-22 14:10:30,,,,1,,,
Android,25078006,2,,15153708,2014,,5,,"<p>Google releases a new API for automatic deploy to Alpha/Beta and Production channels!</p>

<p>take a look <a href=""https://developers.google.com/android-publisher/?rd=1"" rel=""nofollow"">here</a> </p>

<p>Api features: </p>

<ul>
<li>Uploading new versions of an app Releasing apps, by assigning APKs to
various Tracks (alpha, beta, staged rollout, or production) </li>
<li>Creating and modifying Google Play Store listings, including localized text
and graphics and multi-device screenshots</li>
</ul>

<p>Updated:</p>

<p>Some java samples about how to use the API: <a href=""https://github.com/googlesamples/android-play-publisher-api/tree/master/v2/java"" rel=""nofollow"">samples</a></p>

<p><strong>Updated (08-June-2015):</strong></p>

<p>I found and I'm using a gradle plugin that use this API, its called <a href=""https://github.com/Triple-T/gradle-play-publisher"" rel=""nofollow"">gradle-play-publisher</a>. It is very easy to use, you need only to get a Service account and download a p12 file with a certificate (PlayStore --> Settings --> API access >> ""Create Service Account"" >> choose p12 format and read instruction in plugin website! </p>
",713168,,713168,,2015-06-08 21:09:46,2015-06-08 21:09:46,,,,0,,,
Android,43408479,2,,43370329,2017,,5,,"<p>If you try @azizbekian's path, I wrote about this <a href=""https://github.com/ardock/android-topeka/issues/1"" rel=""nofollow noreferrer"">here</a>, created new test rules <a href=""https://github.com/ardock/android-topeka/tree/65c03fa2e3ae47810de0843196cd278057ed14c8/app/src/androidTest/java/com/google/samples/apps/topeka/rule"" rel=""nofollow noreferrer"">here</a> and tested it <a href=""https://github.com/ardock/android-topeka/branches/all"" rel=""nofollow noreferrer"">here</a></p>

<p>I confirm @Testujaca Malpeczka path works on Travis-ci for Android APIs 17-22 as discussed <a href=""https://github.com/googlesamples/android-topeka/pull/69"" rel=""nofollow noreferrer"">here</a></p>

<p>If you are looking for a solution for latest Android APIs and tools, work in progress <a href=""https://stackoverflow.com/q/42731625/1009132"">here</a> and <a href=""https://stackoverflow.com/q/43090804/1009132"">here</a></p>

<pre><code>before_script:
  # Wait for emulator fully-booted and disable animations
  - android-wait-for-emulator
  - adb shell settings put global window_animation_scale 0 &amp;
  - adb shell settings put global transition_animation_scale 0 &amp;
  - adb shell settings put global animator_duration_scale 0 &amp;
  - adb shell input keyevent 82 &amp;
</code></pre>

<p>It also works in Circle-ci and probably any continuous integration build server, see <a href=""https://web.archive.org/web/20160411180215/http://riggaroo.co.za/setting-circle-ci-test-deploy-build-android-app/"" rel=""nofollow noreferrer"">broken link here</a></p>

<pre><code>test:
  pre:
    - ...
    - circle-android wait-for-boot
    - adb shell input keyevent 82
    - adb shell settings put global window_animation_scale 0
    - adb shell settings put global transition_animation_scale 0
    - adb shell settings put global animator_duration_scale 0
</code></pre>

<p>My extended test rules work for Android APIs 15-22, and there was a bug in Android 23 emulator.</p>

<p>I'll try it for later versions 24+ using android-topeka sample another day, probably it works.</p>

<p>Any help, improvement or effective alternative using <code>sdkmanager</code> would be much appreciated.</p>
",1009132,,-1,,2017-05-23 12:10:03,2017-04-28 23:40:22,,,,6,,,
Android,46939989,2,,46923289,2017,,5,,"<p>The problem is that any loaded data have to go through the database first, then loading it from the database to the UI, as <code>NetworkBoundResource</code> does. Consequently, What I did is to decouple the persistent database and create a temporary field to load from.</p>

<p>For example if I wanted to edit the <a href=""https://github.com/googlesamples/android-architecture-components/blob/2e09898630783bf863ddd82f1c30817da9a2fe32/GithubBrowserSample/app/src/main/java/com/android/example/github/repository/RepoRepository.java#L179-L229"" rel=""nofollow noreferrer"">original</a> search method, I would suggest:</p>

<pre><code>public LiveData&lt;Resource&lt;List&lt;Repo&gt;&gt;&gt; search(String query) {
    return new NetworkBoundResource&lt;List&lt;Repo&gt;, RepoSearchResponse&gt;(appExecutors) {

        // Temp ResultType
        private List&lt;Repo&gt; resultsDb;

        @Override
        protected void saveCallResult(@NonNull RepoSearchResponse item) {
            // if you don't care about order
            resultsDb = item.getItems();
        }

        @Override
        protected boolean shouldFetch(@Nullable List&lt;Repo&gt; data) {
            // always fetch.
            return true;
        }

        @NonNull
        @Override
        protected LiveData&lt;List&lt;Repo&gt;&gt; loadFromDb() {
            if (resultsDb == null) {
                return AbsentLiveData.create();
            }else {
                return new LiveData&lt;List&lt;Repo&gt;&gt;() {
                    @Override
                    protected void onActive() {
                        super.onActive();
                        setValue(resultsDb);
                    }
                };
            }
        }

        @NonNull
        @Override
        protected LiveData&lt;ApiResponse&lt;RepoSearchResponse&gt;&gt; createCall() {
            return githubService.searchRepos(query);
        }

        @Override
        protected RepoSearchResponse processResponse(ApiResponse&lt;RepoSearchResponse&gt; response) {
            RepoSearchResponse body = response.body;
            if (body != null) {
                body.setNextPage(response.getNextPage());
            }
            return body;
        }
    }.asLiveData();
}
</code></pre>

<p>I ran it and it works.</p>

<p><strong>Edit:</strong> 
I made another simpler class to handle that (There is another answer here by Daniel Wilson has more feature and is updated).</p>

<p>However, this class has no dependencies and is converted to the basics to make fetch response only: </p>

<pre><code>abstract class NetworkBoundResource&lt;RequestType&gt; {

    private val result = MediatorLiveData&lt;Resource&lt;RequestType&gt;&gt;()

    init {
        setValue(Resource.loading(null))
        fetchFromNetwork()
    }

    @MainThread
    private fun setValue(newValue: Resource&lt;RequestType&gt;) {
        if (result.value != newValue) {
            result.value = newValue
        }
    }

    private fun fetchFromNetwork() {
        val apiResponse = createCall()
        result.addSource(apiResponse) { response -&gt;
            result.removeSource(apiResponse)

            when (response) {
                is ApiSuccessResponse -&gt; {
                        setValue(Resource.success(processResponse(response)))
                }

                is ApiErrorResponse -&gt; {
                    onFetchFailed()
                    setValue(Resource.error(response.errorMessage, null))

                }
            }
        }
    }

    protected fun onFetchFailed() {
    }

    fun asLiveData() = result as LiveData&lt;Resource&lt;RequestType&gt;&gt;

    @WorkerThread
    protected open fun processResponse(response: ApiSuccessResponse&lt;RequestType&gt;) = response.body

    @MainThread
    protected abstract fun createCall(): LiveData&lt;ApiResponse&lt;RequestType&gt;&gt;
}
</code></pre>

<p>So when using it, only one method could be implemented <code>createCall()</code>: </p>

<pre><code>fun login(email: String, password: String) = object : NetworkBoundResource&lt;Envelope&lt;User&gt;&gt;() {
    override fun createCall() = api.login(email, password)
}.asLiveData()
</code></pre>
",2489403,,2489403,,2018-07-08 12:26:01,2018-07-08 12:26:01,,,,3,,,
Android,28737314,2,,28734594,2015,,5,,"<p>google camera2video sample code :<br />    <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""noreferrer"">https://github.com/googlesamples/android-Camera2Video</a></p>
",4364595,,,,,2015-02-26 8:11:36,,,,5,,,
Android,38537827,2,,31173476,2016,,5,,"<ol>
<li>First for example of camera2 api android there is an open source google sample code. <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a></li>
<li>Second for Part where you want to draw a rectangle(touch to focus) follow these steps -

<ul>
<li>Create a custom class extending to SurfaceView. </li>
<li>call onTouchListener method in this custom class to detect finger coordinates and draw your rectangle using paint class in android.
-add this custom class above your TextureView that is displaying preview from camera2.</li>
<li>turn the custom view transparent.</li>
<li>finally when you touch at some point on device screen then onTouchListener will be called which will draw on the canvas of custom view you added above you camera preview. </li>
<li>finally clear your canvas so you dont keep adding rectangles to customview since you need one rect at one point of time. </li>
<li>also if not touched for some time the rectangle should disappear. do this using a handler from custom view.</li>
</ul></li>
</ol>

<p>I am giving you here a tested code to do this. i hope it helps you. BEST OF LUCK.</p>

<pre><code> private class CustomView extends SurfaceView {

    private final Paint paint;
    private final SurfaceHolder mHolder;
    private final Context context;

    public CustomView(Camera2BasicFragment context) {
        super(context.getActivity().getBaseContext());
        mHolder = getHolder();
        mHolder.setFormat(PixelFormat.TRANSPARENT);
        this.context = context.getActivity().getBaseContext();
        paint = new Paint(Paint.ANTI_ALIAS_FLAG);
        paint.setColor(Color.WHITE);
        paint.setStyle(Paint.Style.STROKE);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            invalidate();
            if (mHolder.getSurface().isValid()) {
                final Canvas canvas = mHolder.lockCanvas();
                Log.d(""touch"", ""touchRecieved by camera"");
                if (canvas != null) {
                    Log.d(""touch"", ""touchRecieved CANVAS STILL Not Null"");
                    canvas.drawColor(Color.TRANSPARENT, PorterDuff.Mode.CLEAR);
                    canvas.drawColor(Color.TRANSPARENT);
                    canvas.drawCircle(event.getX(), event.getY(), 100, paint);
                    mHolder.unlockCanvasAndPost(canvas);
                    new Handler().postDelayed(new Runnable() {
                        @Override
                        public void run() {
                            Canvas canvas1 = mHolder.lockCanvas();
                            if(canvas1 !=null){
                                canvas1.drawColor(0, PorterDuff.Mode.CLEAR);
                                mHolder.unlockCanvasAndPost(canvas1);
                            }

                        }
                    }, 1000);

                }
                mHolder.unlockCanvasAndPost(canvas);


            }
        }


        return false;
    }
}
</code></pre>
",6456853,,,,,2016-07-23 3:23:58,,,,2,,,
Android,44096650,2,,43966265,2017,,5,,"<p>As I understand <a href=""https://github.com/googlesamples/android-testing/tree/master/ui/espresso"" rel=""noreferrer"">Google Samples</a> the dependency:</p>

<pre><code>com.android.support.test.espresso:espresso-idling-resource:2.2.2
</code></pre>

<p>is only needed when you are implementing custom <code>IdlingResource</code>. Even in <code>IdlingResourceSample</code> README there is a sentence:</p>

<blockquote>
  <p>Consider using the CountingIdlingResource class from the espresso-contrib package</p>
</blockquote>

<p>And as I understand your code you are trying to use <code>CountingIdlingResource</code> from espresso-contrib package, so try to organise your test dependencies as written in other <a href=""https://github.com/googlesamples/android-testing/blob/master/ui/espresso/RecyclerViewSample/app/build.gradle#L44"" rel=""noreferrer"">Google sample</a>.</p>
",6507689,,,,,2017-05-21 12:06:42,,,,1,,,
Android,46443592,2,,46443524,2017,,5,,"<p>There is an <a href=""https://developer.android.com/reference/android/arch/lifecycle/AndroidViewModel.html"" rel=""nofollow noreferrer""><code>AndroidViewModel</code></a>, which receives <code>Application</code> instance as parameter.</p>

<p>From docs:</p>

<blockquote>
  <p>Application context aware <strong>ViewModel</strong>.</p>
  
  <p>Subclasses must have a constructor which accepts <strong>Application</strong> as the only parameter.</p>
</blockquote>

<p>You can retrieve a string from <code>strings.xml</code> using that parameter.</p>

<hr>

<blockquote>
  <p>The repo in the link, however uses <strong>ViewModel</strong> and not AndroidViewModel. If I extend my ViewModel to use <strong>AndroidViewModel</strong> and include the <strong>Application</strong> - it's trying to inject <strong>MyApplication</strong> instead of <strong>Application</strong> if that makes sense.</p>
</blockquote>

<p>I've checked out <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample"" rel=""nofollow noreferrer"">GithubBrowserSample</a>. Here's how <code>UserViewModel</code> looks like:</p>

<pre>
<code>
    public class UserViewModel extends ViewModel {
        ...
        @Inject
        public UserViewModel(UserRepository userRepository, RepoRepository repoRepository) {
            ...
        }
        ...
    }
</code>
</pre>

<p>And here's what changes I've done:</p>

<pre>
<code>
    public class UserViewModel extends AndroidViewModel {
        ...
        @Inject
        public UserViewModel(Application application, UserRepository userRepository, RepoRepository repoRepository) {
            super(application);
            ...
        }
        ...
    }
</code>
</pre>
",1083957,,1083957,,2017-09-27 14:21:02,2017-09-27 14:21:02,,,,5,,,
Android,49152722,2,,49148801,2018,,5,,"<p>Mockito often returns null when you call <code>any()</code> and that breaks kotlin's not null parameters.</p>

<p>In mockito-kotlin they have a separate function for it, called <a href=""https://github.com/nhaarman/mockito-kotlin/blob/1.x/mockito-kotlin/src/main/kotlin/com/nhaarman/mockito_kotlin/Mockito.kt#L47"" rel=""noreferrer"">anyOrNull()</a>.</p>

<p>You can also create your own function, <a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvp-kotlin/todoapp/app/src/test/java/com/example/android/architecture/blueprints/todoapp/MockitoKotlinHelpers.kt#L38"" rel=""noreferrer"">here</a> they say that this should also work.</p>

<pre><code>/**
 * Returns Mockito.any() as nullable type to avoid java.lang.IllegalStateException when
 * null is returned.
 */
fun &lt;T&gt; any(): T = Mockito.any&lt;T&gt;()  
</code></pre>
",1735198,,,,,2018-03-07 13:06:38,,,,2,,,
Android,50270376,2,,50270375,2018,,5,,"<p>The above includes both <strong>constructor and field injection</strong>, but <strong>neither done right</strong>. The example would behave the same if we removed all the <code>@Inject</code> annotations from <code>MyPresenter</code> since we're not using any of them.</p>

<pre><code>@Provides
MyPresenter provideMyPresenter(MyView view) {
  // no constructor injection, we create the object ourselves!
  return new MyPresenter(view);
}

// also no mention anywhere of component.inject(presenter)
// so the fields won't be injected either
</code></pre>

<p>Make sure to use <em>either</em> constructor injection <em>or</em> field injection. Mixing both will usually indicate an error in your setup or understanding.</p>

<ul>
<li><code>@Inject</code> on a field is a marker for <em>field injection</em></li>
<li><code>@Inject</code> on a constructor is a marker for <em>constructor injection</em></li>
</ul>

<p>This means your class should have <em>either of</em></p>

<ul>
<li>a <strong>single</strong> <code>@Inject</code> on the constructor, or</li>
<li>a <code>@Inject</code> on <strong>all the fields to initialize</strong>, but <em>none on the constructor</em>!</li>
</ul>

<p><strong>Don't sprinkle <code>@Inject</code> everywhere and expect things to work!</strong> Make sure to place the annotation where needed. Don't mix field and constructor injection!</p>

<p><strong>Constructor injection should be favored over field injection</strong> as it creates an initialized and usable object. Field injection is to be used with Framework components where the Framework creates the objects. You have to manually call <code>component.inject(object)</code> for field injection to be performed, or any annotated fields <em>will be null</em> when you try to use them.</p>

<h2>Constructor Injection</h2>

<p>As the name suggests you <strong>put your dependencies</strong> as parameters <strong><em>in the constructor</em></strong>. The annotation on the constructor tells Dagger about the object and it can then <em>create the object for you</em> by calling it with all the required dependencies. Dagger will also inject any annotated fields or methods after creating the object, but plain constructor injection should usually be favored as it doesn't hide any dependencies.</p>

<p>Dagger creating the object also means there is <strong>no need for a <code>@Provides</code> method in your module</strong> that creates the object. All you need to do is add <code>@Inject</code> to the constructor and declare the dependencies.</p>

<pre><code>class MyPresenter {

  private Context context;
  private MyView view;

  @Inject
  MyPresenter(MyView view, Context context) {
    this.view = view;
    this.context = context
  }
}
</code></pre>

<p>If you want to bind your implementation to an interface, there is still no need to create the object yourself.</p>

<pre><code>@Module class MyModule {

  @Provides
  MyPresenter providePresenter(MyPresenterImpl presenter) {
    // Dagger creates the object, we return it as a binding for the interface!
    return presenter;
  }
}
</code></pre>

<p>And there is even a shorter (and more performant) version of the above use-case:</p>

<pre><code>@Module interface MyModule {

  @Binds
  MyPresenter providePresenter(MyPresenterImpl presenter)
}
</code></pre>

<p>Constructor injection should be your default way of using Dagger. Make sure that you <em>don't call <code>new</code> yourself</em> or you misunderstood the concept.</p>

<h2>Field Injection</h2>

<p>There are times when you <em>can't</em> use constructor injection, e.g. an Activity in Android gets created by the Framework and you shouldn't override the constructor. In this case we can use <em>field injection</em>.</p>

<p>To use field injection you annotate all the fields that you want initialized with <code>@Inject</code> and add a <code>void inject(MyActivity activity)</code> method to the component that should handle the injection.</p>

<pre><code>@Component
interface MyComponent {
  void inject(MyActivity activity);
}
</code></pre>

<p>And somewhere in your code <strong>you have to call <code>component.inject(myActivity)</code></strong> <em>or the fields will not be initialized.</em> e.g. in <code>onCreate(..)</code></p>

<pre><code>void onCreate(..) {
  // fields still null / uninitialized
  myComponent.inject(this);
  // fields are now injected!

  // ...
}
</code></pre>

<p><em>Field injection is not transitive</em>. Just because you inject an Activity this does not mean that Dagger will also inject the fields of the presenter it injected. You have to inject every object manually, which is one reason why you should favor constructor injection.</p>

<p>There are tools that help mitigate the boilerplate of creating components and injecting your objects like <code>AndroidInjection.inject()</code> which will do this for you, but it still has to be done. Another example is <a href=""https://github.com/googlesamples/android-architecture-components/blob/8e77a8b90bec775bfdf9fa2244686f73265cdad2/GithubBrowserSample/app/src/main/java/com/android/example/github/di/AppInjector.kt"" rel=""nofollow noreferrer""><code>AppInjector</code></a> which adds various lifecycle listeners to inject your Activities and Fragments, but it will still call <code>AndroidInjection</code> which then creates your component and injects the object.</p>

<p><strong>Make sure that you inject the object before using it</strong> and that there is no constructor annotated with <code>@Inject</code> to avoid confusion.</p>

<h2>What else?</h2>

<p>There is also the lesser used <a href=""https://stackoverflow.com/q/39338870/1837367"">method injection</a> and of course Dagger can't inject third party libraries, which you have to construct and provide in your modules.</p>
",1837367,,1837367,,2018-12-21 16:03:12,2018-12-21 16:03:12,,,,2,,,
Android,32510087,2,,32497852,2015,,5,,"<p>The download mechanism is careful not to download when a device is considered to be ""too low"" on storage.</p>

<p>We updated the sample apps to include a low storage check.  For example:</p>

<p><a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/photo-demo/app/src/main/java/com/google/android/gms/samples/vision/face/photo/PhotoViewerActivity.java#L91"" rel=""nofollow"">https://github.com/googlesamples/android-vision/blob/master/visionSamples/photo-demo/app/src/main/java/com/google/android/gms/samples/vision/face/photo/PhotoViewerActivity.java#L91</a></p>

<p><strong>Update:</strong></p>

<p>Google Vision has lowered the free storage requirement to 500 MB in Google Play Services 8.4.  See the release notes here:</p>

<p><a href=""https://developers.google.com/vision/release-notes?hl=en"" rel=""nofollow"">https://developers.google.com/vision/release-notes?hl=en</a></p>
",5231007,,5231007,,2015-12-22 16:35:53,2015-12-22 16:35:53,,,,2,,,
Android,47525583,2,,46627624,2017,,5,,"<p><strong>Updated:- 5 December 2017</strong></p>

<p>I was fortunate to meet <a href=""https://twitter.com/ceruleanotter?lang=en"" rel=""noreferrer"">Lyla Fujiwara</a>, during Google Developer Days, India where I asked her the same question. She suggested me to user <code>Transformations.switchMap()</code>. Following is the updated solution -</p>

<pre><code>@Singleton
public class SplashScreenViewModel extends AndroidViewModel {
  private final APIClient apiClient;
  // This is the observable which listens for the changes
  // Using 'Void' since the get method doesn't need any parameters. If you need to pass any String, or class
  // you can add that here
  private MutableLiveData&lt;Void&gt; networkInfoObservable;
  // This LiveData contains the information required to populate the UI
  private LiveData&lt;Resource&lt;NetworkInformation&gt;&gt; networkInformationLiveData;

  @Inject
  SplashScreenViewModel(@NonNull APIClient apiClient, @NonNull Application application) {
    super(application);
    this.apiClient = apiClient;

    // Initializing the observable with empty data
    networkInfoObservable = new MutableLiveData&lt;Void&gt;();
    // Using the Transformation switchMap to listen when the data changes happen, whenever data 
    // changes happen, we update the LiveData object which we are observing in the MainActivity.
    networkInformationLiveData = Transformations.switchMap(networkInfoObservable, input -&gt; apiClient.getNetworkInformation());
  }

  /**
   * Function to get LiveData Observable for NetworkInformation class
   * @return LiveData&lt;Resource&lt;NetworkInformation&gt;&gt; 
   */
  public LiveData&lt;Resource&lt;NetworkInformation&gt;&gt; getNetworkInfoObservable() {
    return networkInformationLiveData;
  }

  /**
   * Whenever we want to reload the networkInformationLiveData, we update the mutable LiveData's value
   * which in turn calls the `Transformations.switchMap()` function and updates the data and we get
   * call back
   */
  public void setNetworkInformation() {
    networkInfoObservable.setValue(null);
  }
}
</code></pre>

<p>The Activity's code will be updated as -</p>

<pre><code>final SplashScreenViewModel splashScreenViewModel =
  ViewModelProviders.of(this, viewModelFactory).get(SplashScreenViewModel.class);
observeViewModel(splashScreenViewModel);
// This function will ensure that Transformation.switchMap() function is called
splashScreenViewModel.setNetworkInformation();
</code></pre>

<p>This looks the most prominent and proper solution to me for now, I will update the answer if I better solution later.</p>

<p>Watch her <a href=""https://www.youtube.com/watch?v=SlZVYkhoSq8"" rel=""noreferrer"">droidCon NYC video</a> for more information on LiveData. The official Google repository for LiveData is <a href=""https://github.com/googlesamples/android-architecture-components/"" rel=""noreferrer"">https://github.com/googlesamples/android-architecture-components/</a> look for <code>GithubBrowserSample</code> project.</p>

<p><strong>Old Code</strong></p>

<p>I have not been able find a proper solution to this, but this works so far -
Declare <code>ViewModel</code> outside the <code>observeViewModel()</code> and change the function like this -</p>

<pre><code>private void observeViewModel(final HomeViewModel homeViewModel) {
homeViewModel.getWeatherListObservable().observe(this, weatherModelApiResponse -&gt; {
  if (weatherModelApiResponse.isSuccessful()) {
    mErrorView.setVisibility(View.GONE);
    mBinding.ivLoading.setVisibility(View.GONE);
    try {
      setDataToViews(weatherModelApiResponse.getData());
    } catch (ParseException e) {
      e.printStackTrace();
    }
  } else if (!weatherModelApiResponse.isSuccessful()) {
    mBinding.ivLoading.setVisibility(View.GONE);
    mDialogUtils.showToast(this, weatherModelApiResponse.getError().getMessage());
    mErrorView.setVisibility(View.VISIBLE);
  }
});
}
</code></pre>

<p>Update <strong>HomeViewModel</strong> to -</p>

<pre><code>public class HomeViewModel extends AndroidViewModel {

private final LiveData&lt;ApiResponse&lt;WeatherModel&gt;&gt; weatherListObservable;

@Inject public HomeViewModel(Application application, ContentRepository contentRepository) {
super(application);
getWeattherListData();
}

public void getWeatherListData() {
this.weatherListObservable = contentRepository.getWeatherListData();
}
public LiveData&lt;ApiResponse&lt;WeatherModel&gt;&gt; getWeatherListObservable() {
return weatherListObservable;
}

}
</code></pre>

<p>Now <strong>Retry button</strong>, call the <code>observeViewModel</code> function again and pass <code>mHomeViewModel</code> to it. Now you should be able to get a response.</p>
",1979347,,1979347,,2017-12-05 6:51:01,2017-12-05 6:51:01,,,,4,,,
Android,48210130,2,,2480288,2018,,5,,"<p>So that's how you request a phone number through the Play Services API without the permission and hacks. <a href=""https://android-developers.googleblog.com/2017/10/effective-phone-number-verification.html"" rel=""noreferrer"">Source</a> and <a href=""https://github.com/googlesamples/android-credentials/blob/master/sms-verification/android/app/src/main/java/com/google/samples/smartlock/sms_verify/ui/PhoneNumberActivity.java"" rel=""noreferrer"">Full example</a>.</p>

<p>In your build.gradle (version 10.2.x and higher required):</p>

<pre><code>compile ""com.google.android.gms:play-services-auth:$gms_version""
</code></pre>

<p>In your activity (the code is simplified):</p>

<pre><code>@Override
protected void onCreate(Bundle savedInstanceState) {
    // ...
    googleApiClient = new GoogleApiClient.Builder(this)
            .addApi(Auth.CREDENTIALS_API)
            .build();
    requestPhoneNumber(result -&gt; {
        phoneET.setText(result);
    });
}

public void requestPhoneNumber(SimpleCallback&lt;String&gt; callback) {
    phoneNumberCallback = callback;
    HintRequest hintRequest = new HintRequest.Builder()
            .setPhoneNumberIdentifierSupported(true)
            .build();

    PendingIntent intent = Auth.CredentialsApi.getHintPickerIntent(googleApiClient, hintRequest);
    try {
        startIntentSenderForResult(intent.getIntentSender(), PHONE_NUMBER_RC, null, 0, 0, 0);
    } catch (IntentSender.SendIntentException e) {
        Logs.e(TAG, ""Could not start hint picker Intent"", e);
    }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == PHONE_NUMBER_RC) {
        if (resultCode == RESULT_OK) {
            Credential cred = data.getParcelableExtra(Credential.EXTRA_KEY);
            if (phoneNumberCallback != null){
                phoneNumberCallback.onSuccess(cred.getId());
            }
        }
        phoneNumberCallback = null;
    }
}
</code></pre>

<p>This will generate a dialog like this:</p>

<p><a href=""https://i.stack.imgur.com/96V13.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/96V13.png"" alt=""enter image description here""></a></p>
",2093236,,,,,2018-01-11 15:06:36,,,,3,,,
Android,31879270,2,,31756424,2015,,5,,"<p>Here is a sample app that works <a href=""https://github.com/googlesamples/android-testing-templates/tree/master/AndroidTestingBlueprint"" rel=""nofollow"">https://github.com/googlesamples/android-testing-templates/tree/master/AndroidTestingBlueprint</a></p>

<p>You must use</p>

<pre><code>buildToolsVersion = '23.0.0rc3'
</code></pre>

<p>And of course</p>

<pre><code>publishNonDefault true
</code></pre>
",1299158,,,,,2015-08-07 13:44:15,,,,0,,,
Android,39054918,2,,39044494,2016,,5,,"<p>this is the solution for your problem. In this <a href=""https://github.com/googlesamples/android-Camera2Video/blob/master/Application/src/main/java/com/example/android/camera2video/Camera2VideoFragment.java#L236"" rel=""nofollow noreferrer"">line</a> the aspect ratio is set to 3/4. I changed <em>chooseVideSize</em> method to pick video size with hd resolution for <em>MediaRecorder</em>.</p>

<pre><code>    private static Size chooseVideoSize(Size[] choices) {
        for (Size size : choices) {
            // Note that it will pick only HD video size, you should create more robust solution depending on screen size and available video sizes
            if (1920 == size.getWidth() &amp;&amp; 1080 == size.getHeight()) {
                return size;
            }
        }
        Log.e(TAG, ""Couldn't find any suitable video size"");
        return choices[choices.length - 1];
    }
</code></pre>

<p>Then I corrected <a href=""https://github.com/googlesamples/android-Camera2Video/blob/master/Application/src/main/java/com/example/android/camera2video/Camera2VideoFragment.java#L255"" rel=""nofollow noreferrer"">this method</a> to pick preview size accordingly to video size aspect ratio and below is result.</p>

<pre><code>private static Size chooseOptimalSize(Size[] choices, int width, int height, Size aspectRatio) {
    // Collect the supported resolutions that are at least as big as the preview Surface
    List&lt;Size&gt; bigEnough = new ArrayList&lt;Size&gt;();
    int w = aspectRatio.getWidth();
    int h = aspectRatio.getHeight();
    double ratio = (double) h / w;
    for (Size option : choices) {
        double optionRatio = (double) option.getHeight() / option.getWidth();
        if (ratio == optionRatio) {
            bigEnough.add(option);
        }
    }

    // Pick the smallest of those, assuming we found any
    if (bigEnough.size() &gt; 0) {
        return Collections.min(bigEnough, new CompareSizesByArea());
    } else {
        Log.e(TAG, ""Couldn't find any suitable preview size"");
        return choices[1];
    }
}
</code></pre>

<p>I hope it will help you!</p>
",5963700,,5963700,,2018-04-03 12:23:20,2018-04-03 12:23:20,,,,7,,,
Android,34575436,2,,34437767,2016,,5,,"<p><strong>First of all</strong>, I very much agree that finding some thing w.r.t. cocos2d is pretty tough! :)</p>

<p>Having said that, here are some pointers/information on how you can take this forward.</p>

<p><strong>Android Native Development Kit (NDK)</strong></p>

<p>Android apps are typically written in Java, with its elegant object-oriented design. However, at times, you need to overcome the limitations of Java, such as memory management and performance, by programming directly into Android native interface. Android provides Native Development Kit (NDK) to support native development in C/C++, besides the Android Software Development Kit (Android SDK) which supports Java.</p>

<ul>
<li>An amazing and yet simple article with code examples can be found on <a href=""http://www3.ntu.edu.sg/home/ehchua/programming/android/android_ndk.html"" rel=""nofollow noreferrer"">Android NDK</a></li>
</ul>

<p>Best place to start off with <strong>NDK JNI</strong>(considering you know what they are basically)-</p>

<ul>
<li><p><a href=""http://developer.android.com/ndk/samples/sample_hellojni.html"" rel=""nofollow noreferrer"">Sample: hello-jni</a> is the best place to start off with code at <a href=""https://github.com/googlesamples/android-ndk/tree/master/hello-jni"" rel=""nofollow noreferrer"">Github</a></p></li>
<li><p>Advanced Android: <a href=""http://code.tutsplus.com/tutorials/advanced-android-getting-started-with-the-ndk--mobile-2152"" rel=""nofollow noreferrer"">Getting Started with the NDK</a></p></li>
</ul>

<hr>

<p>It's better to start off by kicking off with some <strong>basic learning of Cocos2D-X</strong>-</p>

<ul>
<li><p>Cocos2D-X Tutorial for iOS and Android: <a href=""http://www.raywenderlich.com/33750/cocos2d-x-tutorial-for-ios-and-android-getting-started"" rel=""nofollow noreferrer"">Getting Started</a></p></li>
<li><p>The Completest Cocos2d-x Tutorial &amp; Guide List - <a href=""https://stackoverflow.com/questions/10711047/the-completest-cocos2d-x-tutorial-guide-list"">Stackoverflow link</a></p></li>
</ul>

<hr>

<p>Some <strong>perfect references for plugin development</strong>-</p>

<ul>
<li><p><a href=""http://cocos2d-x.org/docs/manual/framework/html5/jsb/plugin-x/how-to-use-plugin-x-on-android/en"" rel=""nofollow noreferrer"">How to use plugin-x in android</a></p></li>
<li><p><a href=""http://cocos2d-x.org/docs/manual/framework/html5/jsb/plugin-x/plugin-x-architecture/en"" rel=""nofollow noreferrer"">Plugin-x Architecture</a></p></li>
<li><p><strong><a href=""http://cocos2d-x.org/docs/manual/framework/html5/jsb/plugin-x/how-to-write-your-own-plugin-for-android/en"" rel=""nofollow noreferrer"">How to write your own plugin for android</a></strong></p></li>
<li><p><a href=""http://cocos2d-x.org/docs/manual/framework/html5/jsb/plugin-x/ios-iap/en"" rel=""nofollow noreferrer"">PluginX IOS IAP Integration</a></p></li>
<li><p><strong><a href=""http://www.cocos2d-x.org/wiki/Third_Party_SDK_Integration"" rel=""nofollow noreferrer"">Third Party SDK Integration</a></strong></p></li>
</ul>

<hr>

<p>Earlier there was a way to <a href=""http://www.cocos2d-x.org/wiki/How_to_Integrate_a_3rd_party_SDK_into_Plugin-X#Implementing-the-Plugin"" rel=""nofollow noreferrer"">Integrate 3rd party SDK into Plugin X</a>, but, recently I see they have moved away from this approach and are using <a href=""http://cocos2d-x.org/sdkbox"" rel=""nofollow noreferrer"">SDKBOX</a> which is supposed to simplify the same.</p>

<p>Here is the best and probably only good <a href=""http://www.cocos2d-x.org/programmersguide/J/index.html"" rel=""nofollow noreferrer"">reference</a> that we can get for now from the cocos2d official <a href=""http://www.cocos2d-x.org/programmersguide/"" rel=""nofollow noreferrer"">programmersguide</a>.</p>

<p>""<strong><a href=""http://cocos2d-x.org/sdkbox"" rel=""nofollow noreferrer"">SDKBOX</a></strong> is more like a upgraded version of plugin-x, so in short it's just a plugin it's not something runs on a cloud. the reason it starts is because we want to provide a better plugin integration solution for cocos2d-x, but the fact is plugin-x always gets the low priority compare to other shinning new 3D features, so we decide to change that."" - <a href=""http://discuss.cocos2d-x.org/t/getting-started-with-sdkbox/21387/17"" rel=""nofollow noreferrer"">Cocos2d-x developer said</a>.</p>

<p>But, <strong>SDKBOX</strong> is where they develop plugins for you. I think its something like <strong>npm</strong> for nodejs.</p>

<hr>

<p>Anyway, Some <strong>reference web links</strong> that will help you even more-</p>

<ul>
<li><p><a href=""http://www.multigesture.net/articles/how-to-setup-cocos2d-x-windows-and-android/"" rel=""nofollow noreferrer"">How to setup Cocos2d-x (Windows and Android)</a></p></li>
<li><p><a href=""http://discuss.cocos2d-x.org/t/cocos2d-x-iphone-android-ide-installation-and-setup-under-mac-os/592"" rel=""nofollow noreferrer"">cocos2d-x (iphone-android)/IDE installation and setup under mac os</a> </p></li>
<li><p><a href=""http://www.cocos2d-x.org/wiki/How_to_set_up_the_android_cocos2d-x_development_environment_on_Windows_7"" rel=""nofollow noreferrer"">How to set up the Android Cocos2d-x development environment on Windows 7</a></p></li>
<li><p><a href=""http://www.cocos2d-x.org/wiki/External_Tutorials#External-Tutorials"" rel=""nofollow noreferrer"">External Tutorials</a> - Contains a bunch of helpful articles &amp; tutorials.</p></li>
</ul>

<hr>

<p>**Helpful Examples ** to learn SDK development or support from-</p>

<ul>
<li><p><a href=""http://discuss.cocos2d-x.org/t/integration-with-flurry-analytics-sdk/1861"" rel=""nofollow noreferrer"">Integration with Flurry Analytics SDK</a></p></li>
<li><p><a href=""https://translate.google.com/translate?hl=en&amp;sl=ja&amp;u=https://www.itdevblog.com/cocos2d-x-extension%25E3%2581%25A7google-analytics%25E3%2582%2592%25E4%25BD%25BF%25E3%2581%2586/&amp;prev=search"" rel=""nofollow noreferrer"">We use Google Analytics with cocos2d-x extension</a></p></li>
<li><p><a href=""https://github.com/Countly/countly-sdk-cocos2d-x"" rel=""nofollow noreferrer"">Countly SDK for Cocos2d-x apps</a></p></li>
<li><p><a href=""https://github.com/cocos2d/cocos2d-x-extensions"" rel=""nofollow noreferrer"">Cocos2d-x Extensions</a> - Github repo</p></li>
<li><p><a href=""https://github.com/dualface/cocos2d-x-extensions"" rel=""nofollow noreferrer"">cocos2d-x-extensions</a> - Another Github repo</p></li>
<li><p><a href=""http://www.iuridium.com/?p=436"" rel=""nofollow noreferrer"">List of Open Source Cocos2d Projects, Extensions and Code Snippets</a> - Old but helpful</p></li>
</ul>

<hr>

<p>**Articles on SDKBOX ** which may help you if you looking for officially hosting your SDK-</p>

<p><a href=""http://en.chukong-inc.com/cocos2d-x-solves-sdk-fatigue-with-new-sdkbox-initiative/"" rel=""nofollow noreferrer"">Cocos2d-x Solves SDK Fatigue with New SDKBOX Initiative</a></p>

<p><a href=""https://www.linkedin.com/pulse/best-way-integrate-sdks-your-mobile-game-mantin-lu"" rel=""nofollow noreferrer"">The Best Way to Integrate SDKs into your Mobile Game</a></p>

<p><strong>Hope it helps! :)</strong></p>

<p><strong>Happy Coding!</strong></p>
",3782392,,-1,,2017-05-23 12:25:40,2016-01-03 10:18:43,,,,5,,,
Android,43159400,2,,43159176,2017,,5,,"<p><a href=""https://willowtreeapps.com/ideas/camera2-and-you-leveraging-android-lollipops-new-camera/"" rel=""noreferrer"">This article</a> provides a lot of information about how to set up a project with the Camera2 API. From the first few paragraphs:</p>

<blockquote>
  <p>DSLR-like levels of customization, such as native control over exposure and raw sensor capture are finally possible. And while this new approach requires a little more thought and legwork, the level of control you get in return is well worth the effort.</p>
</blockquote>

<p>So the main difference is that you have more control over what you can do with the phone's camera. It is also likely that there is an improvement in performance and photo quality, but I haven't found any mentions of it anywhere.</p>

<p>If you don't want to use the Camera2 API as it is somewhat more complicated, the deprecated version seems to work fine on <em>most</em> devices, however it is more than likely that it will eventually be removed, which will cause your app to... not work. So regardless of which API you prefer using, it is always going to be better to go with the one that isn't deprecated.</p>

<p>To help with implementing the API, there's a nice and simple library I like <a href=""https://github.com/google/cameraview"" rel=""noreferrer"">here</a>, or if you don't like libraries or have a more specific use for it you could take a look at this <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""noreferrer"">sample project</a>.</p>
",4955981,,,,,2017-04-01 16:39:53,,,,0,,,
Android,48288676,2,,48285281,2018,,5,,"<p>TL;DR:</p>

<pre><code>InstantApps.showInstallPrompt(activity, 
                              postInstallIntent, 
                              Constants.INSTALL_INSTANT_APP_REQUEST_CODE, 
                              referrerString);
</code></pre>

<hr>

<p>At Vimeo we're using Branch for our web -> mobile app install as well as our instant app -> mobile app install (since it gives some additional metrics and lets us compare the referrers a little better).</p>

<p>If you're interested in using Branch, the documentation for the install prompt can be found <a href=""https://github.com/BranchMetrics/android-branch-deep-linking#instant-app-deep-linking-and-attribution-support"" rel=""noreferrer"">here</a>. And the usage looks like:</p>

<pre><code>if (Branch.isInstantApp(this)) {
  myFullAppInstallButton.setVisibility(View.VISIBLE);
  myFullAppInstallButton.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
       BranchUniversalObject branchUniversalObject = new BranchUniversalObject()
           .setCanonicalIdentifier(""item/12345"")
           .setTitle(""My Content Title"")
           .setContentDescription(""My Content Description"")
           .setContentImageUrl(""https://example.com/mycontent-12345.png"")
           .setContentMetadata(new ContentMetadata()
                 .addCustomMetadata(""property1"", ""blue"")
                 .addCustomMetadata(""property2"", ""red""));

      Branch.showInstallPrompt(myActivity, activity_ret_code, branchUniversalObject);
    }
  });
} else {
  myFullAppInstallButton.setVisibility(View.GONE);
}
</code></pre>

<p>Branch's implementation ultimately calls through to the API mentioned in the other answer <a href=""https://developer.android.com/topic/instant-apps/reference.html#showinstallprompt"" rel=""noreferrer"">here</a>.</p>

<p>Which looks like:</p>

<pre><code>public static boolean showInstallPrompt(Activity activity, 
                                        Intent postInstallIntent, 
                                        int requestCode, 
                                        String referrer)
</code></pre>

<blockquote>
  <p>Shows a dialog that allows the user to install the current instant app. This method is a no-op if the current running process is an installed app. You must provide a post-install intent, which the system uses to start the application after install is complete.</p>
</blockquote>

<p>You can find an example usage <a href=""https://github.com/googlesamples/android-instant-apps/blob/master/install-api/features/install/src/main/java/com/instantappsamples/feature/install/InstallApiActivity.kt"" rel=""noreferrer"">here</a>. And looks like the following:</p>

<pre><code>class InstallApiActivity : AppCompatActivity() {


    /**
     * Intent to launch after the app has been installed.
     */
    private val postInstallIntent = Intent(Intent.ACTION_VIEW,
            Uri.parse(""https://install-api.instantappsample.com/"")).
            addCategory(Intent.CATEGORY_BROWSABLE).
            putExtras(Bundle().apply {
                putString(""The key to"", ""sending data via intent"")
            })

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_install)

        val isInstantApp = InstantApps.isInstantApp(this)

        findViewById&lt;Button&gt;(R.id.start_installation).apply {
            isEnabled = isInstantApp
            // Show the installation prompt only for an instant app.
            if (isInstantApp) {
                setOnClickListener {
                    InstantApps.showInstallPrompt(this@InstallApiActivity,
                            postInstallIntent,
                            REQUEST_CODE,
                            REFERRER)
                }
            }
        }
    }

    companion object {
        private val REFERRER = ""InstallApiActivity""
        private val REQUEST_CODE = 7
    }
}
</code></pre>

<p>It's not recommended because it's deprecated, but you can technically get the dialog to show using the following code:</p>

<pre><code>InstantApps.showInstallPrompt(activity, Constants.INSTALL_INSTANT_APP_REQUEST_CODE, null);
</code></pre>

<p>See also: <a href=""https://stackoverflow.com/a/47666873/1759443"">https://stackoverflow.com/a/47666873/1759443</a></p>
",1759443,,,,,2018-01-16 19:41:31,,,,0,,,
Android,30019643,2,,29402828,2015,,5,,"<p>Youre calling <code>CameraDevice#close()</code>, but this doesnt close the camera immediately. You should keep the thread running until the device is done.</p>

<p>Your code might be based on <a href=""https://github.com/googlesamples/android-Camera2Video"">Googles Camera2 sample app</a>. To finish everything off neatly, stop the thread in your <code>CameraDevice.StateCallback</code> instead by overriding the <code>#onClosed(CameraDevice)</code> method:</p>

<pre><code>private CameraDevice.StateCallback mStateCallback
        = new CameraDevice.StateCallback() {

    // ...

    @Override
    public void onClosed(CameraDevice camera) {
        // Keep the thread alive until the camera is closed.
        stopBackgroundThread();
    }

};
</code></pre>

<p>It looks like the current behaviour might be a bug since the <a href=""https://developer.android.com/reference/android/hardware/camera2/CameraDevice.html#close()"">documentation for <code>CameraDevice#close()</code></a> says:</p>

<blockquote>
  <p>Immediately after this call, besides the final <code>onClosed(CameraDevice)</code> calls, <strong>no further callbacks from the device or the active session will occur</strong>, and any remaining submitted capture requests will be discarded, as if <code>abortCaptures()</code> had been called, except that no success or failure callbacks will be invoked.</p>
</blockquote>
",3556730,,3556730,,2015-05-03 21:41:31,2015-05-03 21:41:31,,,,1,,,
Android,48773125,2,,48687470,2018,,5,,"<p>Synchronising audio for karaoke apps is tough. The main issue you seem to be facing is variable latency in the output stream. </p>

<p>This is almost certainly caused by ""warm up"" latency: the time it takes from hitting ""play"" on your backing track to the first frame of audio data being rendered by the audio device (e.g. headphones). This can have large variance and is difficult to measure. </p>

<p>The first (and easiest) thing to try is to use <code>MODE_STREAM</code> when constructing your <code>AudioTrack</code> and prime it with <code>bufferSizeInBytes</code> of data prior to calling play (<a href=""https://developer.android.com/reference/android/media/AudioTrack.html#play()"" rel=""noreferrer"">more here</a>). This should result in lower, more consistent ""warm up"" latency. </p>

<p>A better way is to use the <a href=""https://developer.android.com/ndk/guides/audio/index.html"" rel=""noreferrer"">Android NDK</a> to have a continuously running audio stream which is just outputting silence until the moment you hit play, then start sending audio frames immediately. The only latency you have here is the <em>continuous output latency</em>. </p>

<p>If you decide to go down this route I recommend taking a look at the <a href=""https://github.com/google/oboe"" rel=""noreferrer"">Oboe library</a> (full disclosure: I am one of the authors).</p>

<p>To answer one of your specific questions... </p>

<p><strong>Is there a way to calculate the latency of the audio output stream programatically?</strong> </p>

<p>Yes. The easiest way to explain this is with a <a href=""https://github.com/googlesamples/android-audio-high-performance/blob/master/aaudio/hello-aaudio/src/main/cpp/PlayAudioEngine.cpp#L288"" rel=""noreferrer"">code sample</a> (this is C++ for the AAudio API but the principle is the same using Java AudioTrack): </p>

<pre><code>// Get the index and time that a known audio frame was presented for playing
int64_t existingFrameIndex;
int64_t existingFramePresentationTime;
AAudioStream_getTimestamp(stream, CLOCK_MONOTONIC, &amp;existingFrameIndex, &amp;existingFramePresentationTime);

// Get the write index for the next audio frame
int64_t writeIndex = AAudioStream_getFramesWritten(stream);

// Calculate the number of frames between our known frame and the write index
int64_t frameIndexDelta = writeIndex - existingFrameIndex;

// Calculate the time which the next frame will be presented
int64_t frameTimeDelta = (frameIndexDelta * NANOS_PER_SECOND) / sampleRate_;
int64_t nextFramePresentationTime = existingFramePresentationTime + frameTimeDelta;

// Assume that the next frame will be written into the stream at the current time
int64_t nextFrameWriteTime = get_time_nanoseconds(CLOCK_MONOTONIC);

// Calculate the latency
*latencyMillis = (double) (nextFramePresentationTime - nextFrameWriteTime) / NANOS_PER_MILLISECOND;
</code></pre>

<p>A caveat: This method relies on accurate timestamps being reported by the audio hardware. I know this works on Google Pixel devices but have heard reports that it isn't so accurate on other devices so YMMV. </p>
",824903,,,,,2018-02-13 18:16:38,,,,2,,,
Android,49168930,2,,41826478,2018,,5,,"<p>While you do not need to manually unsubscribe from a terminated stream, you can still create a memory leak using RxJava2 if you are not careful.</p>

<p>Consider the following code:</p>

<pre><code>repository.getData()
    .subscribeOn(Schedulers.io())
    .observeOn(AndroidSchedulers.mainThread())
    .subscribe(data -&gt; myTextView.setText(data.toString()));
</code></pre>

<p>The lambda parameter in the subscribe is ""syntatic sugar"" over an anonymous inner class:</p>

<pre><code>subscribe(new Consumer&lt;Data&gt;() {
    @Override
    public void accept(final Data data) {
        myTextView.setText(data.toString());
    }
});
</code></pre>

<p>On the JVM, an anonymous inner class maintains a reference to the outer class. </p>

<p>Assume that for the above naive code, the outer class is an Activity (this would also follow for a Fragment, Service, BroadcastReceiver or any class whose lifecycle is controlled by the Android OS). </p>

<p>The Activity subscribes to the Observer but then is destroyed by the Android OS in conditions of low-memory (you can mimic this effect by turning on Developer Options/Don't Keep Activities). If the work on <code>Schedulers.io()</code> is still running when the Activity is destroyed, a reference will still be maintained to the Activity through the anonymous inner class. This means a memory leak that prevents the Activity from being finalized by the garbage collector. If the Activity has a number of Views or, say, a Bitmap object then the memory leak can be quite substantial.</p>

<p>There are a number of solutions here but one of them is to maintain a <code>CompositeDisposable</code> object and to clear this in the <code>onDestroy()</code> lifecycle method of the Android Activity:</p>

<pre><code>public class MyActivity extends Activity {

   DataRepository dataRepository;
   CompositeDisposable disposables;

   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       disposables = new CompositeDisposable();
   }

   public void onButtonClick(View v) {
       repository.getData()             
          .subscribeOn(Schedulers.io())
          .observeOn(AndroidSchedulers.mainThread())
          .doOnSubscribe(disposable -&gt; disposables.add(disposable))
          .subscribe(data -&gt; myTextView.setText(data.toString()));
   }

   @Override
   public void onDestroy() {
       disposables.clear();
       super.onDestroy();
   }
}
</code></pre>

<p>You can refer to a good example of how to use RxJava in an Android app in the official <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-rxjava/"" rel=""noreferrer"">Google Android Architecture Blueprints</a>.  </p>
",5241933,,5241933,,2018-03-08 9:02:56,2018-03-08 9:02:56,,,,2,,,
Android,44338249,2,,44338160,2017,,5,,"<p>Yes, you can assume that it goes back to ICS at least. Also starting support library version 26, minSdk becomes 14. So I assume new architecture libraries will be the same.</p>

<p>According to googlesamples, lowest API version is 14, which is Ice Cream Sandwich. </p>

<p>Here are the links to the gradle files for the minSdk 14 apps:</p>

<p><a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/build.gradle"" rel=""noreferrer"">Github Browser Sample gradle file</a></p>

<p><a href=""https://github.com/googlesamples/android-architecture-components/blob/master/PersistenceContentProviderSample/app/build.gradle"" rel=""noreferrer"">Persistent Content Provider Sample</a></p>
",7002941,,,,,2017-06-02 22:26:33,,,,1,,,
Android,35138735,2,,35121089,2016,,5,,"<p>This code sample includes showing a graphic outline over the barcode:</p>

<p><a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader"" rel=""nofollow"">https://github.com/googlesamples/android-vision/tree/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader</a></p>

<p>The association from the detector to the graphics is made like this:</p>

<pre><code>    mGraphicOverlay = (GraphicOverlay&lt;BarcodeGraphic&gt;) findViewById(R.id.graphicOverlay);

    // A barcode detector is created to track barcodes.  An associated multi-processor instance
    // is set to receive the barcode detection results, track the barcodes, and maintain
    // graphics for each barcode on screen.  The factory is used by the multi-processor to
    // create a separate tracker instance for each barcode.
    BarcodeDetector barcodeDetector = new BarcodeDetector.Builder(context).build();
    BarcodeTrackerFactory barcodeFactory = new BarcodeTrackerFactory(mGraphicOverlay);
    barcodeDetector.setProcessor(
            new MultiProcessor.Builder&lt;&gt;(barcodeFactory).build());
</code></pre>

<p>GraphicOverlay is included with the code sample above.  This utility makes it easy to add graphic objects that are rendered on top of the camera preview.  See the code here:</p>

<p><a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/GraphicOverlay.java"" rel=""nofollow"">https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/GraphicOverlay.java</a></p>

<p>In this example, the barcode factory manages the creation of a graphics object that draws a rectangle and label for a detected barcode.  See the BarcodeGraphic class defined here:</p>

<p><a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/BarcodeGraphic.java"" rel=""nofollow"">https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/BarcodeGraphic.java</a></p>
",5231007,,5231007,,2016-02-02 15:36:21,2016-02-02 15:36:21,,,,2,,,
Android,51049978,2,,51035892,2018,,5,,"<p>The reason why you can't communicate directly between features is because they're independent from one another. </p>

<p>The correct way to handle this is calling it with its URL, example: <a href=""https://github.com/googlesamples/android-instant-apps/blob/master/hello-feature-module/features/hello/src/main/java/com/instantappsamples/feature/hello/HelloActivity.java"" rel=""nofollow noreferrer"">android-instant-apps/hello-feature-module/HelloActivity.java</a></p>

<pre><code>Intent intent = new Intent(Intent.ACTION_VIEW,
Uri.parse(""https://hello-feature.instantappsample.com/goodbye""));
intent.addCategory(Intent.CATEGORY_BROWSABLE);
startActivity(intent);
</code></pre>

<p>In an instant-app structure, the <em>base acts as a library</em> for the feature modules, and the features are built into <em>APKs</em>. In an installed-app structure, <em>both the base and features act as libraries</em> for the application module. Some explanation can be found here:</p>

<ul>
<li><p><a href=""https://stackoverflow.com/questions/44361335/why-use-the-new-android-feature-plugin-over-the-library-plugin/44361564#44361564"">Why use the new Android feature plugin over the library plugin?</a></p></li>
<li><p><a href=""https://stackoverflow.com/questions/47425735/android-can-you-add-activities-to-the-instant-app-module/47430978#47430978"">Android: Can you add activities to the Instant App module?</a></p></li>
</ul>

<p>There used to be a page @ <a href=""https://g.co/instantapps"" rel=""nofollow noreferrer"">https://g.co/instantapps</a> that explained the structure of instant apps, but looks like it's missing. However, you can take a look at:</p>

<ul>
<li><a href=""https://android-developers.googleblog.com/2017/08/android-instant-apps-best-practices-for.html"" rel=""nofollow noreferrer"">https://android-developers.googleblog.com/2017/08/android-instant-apps-best-practices-for.html</a></li>
<li>bottom of page @ <a href=""https://codelabs.developers.google.com/codelabs/android-multi-feature-instant-app/#3"" rel=""nofollow noreferrer"">codelabs/android-multi-feature-instant-app/#3</a></li>
</ul>

<p>And no, you won't be able to directly access activities of the application from a feature. As an installed-app, <strong><code>com.android.feature</code></strong> modules are compiled/behave as <strong><code>com.android.library</code></strong> modules, so apply the same rules here: the application depends on the library, not the other way around. To traverse that direction, you will need to use the same kind of Intent as shown above.</p>

<p>Anything in <strong><code>com.android.application</code></strong> will be isolated from the feature modules of the instant-app, and will only appear in the installed-app.</p>
",6668797,,2638235,,2018-11-15 7:15:39,2018-11-15 7:15:39,,,,0,,,
Android,43843796,2,,43843594,2017,,5,,"<p>You can use shared element Transition </p>

<p><a href=""https://github.com/codepath/android_guides/wiki/Shared-Element-Activity-Transition"" rel=""noreferrer"">https://github.com/codepath/android_guides/wiki/Shared-Element-Activity-Transition</a></p>

<p><a href=""https://github.com/googlesamples/android-ActivitySceneTransitionBasic"" rel=""noreferrer"">https://github.com/googlesamples/android-ActivitySceneTransitionBasic</a></p>

<p><a href=""https://github.com/toddway/MaterialTransitions"" rel=""noreferrer"">https://github.com/toddway/MaterialTransitions</a></p>

<p><a href=""https://github.com/afollestad/shared-element-transition-samples"" rel=""noreferrer"">https://github.com/afollestad/shared-element-transition-samples</a></p>

<pre><code>FirstFragment fragmentOne = ...;
SecondFragment fragmentTwo = ...;
// Check that the device is running lollipop
if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {
    // Inflate transitions to apply
    Transition changeTransform = TransitionInflater.from(this).
          inflateTransition(R.transition.change_image_transform);
    Transition explodeTransform = TransitionInflater.from(this).
          inflateTransition(android.R.transition.explode);

    // Setup exit transition on first fragment
    fragmentOne.setSharedElementReturnTransition(changeTransform);
    fragmentOne.setExitTransition(explodeTransform);

    // Setup enter transition on second fragment
    fragmentTwo.setSharedElementEnterTransition(changeTransform);
    fragmentTwo.setEnterTransition(explodeTransform);

    // Find the shared element (in Fragment A)
    ImageView ivProfile = (ImageView) findViewById(R.id.ivProfile);

    // Add second fragment by replacing first 
    FragmentTransaction ft = getFragmentManager().beginTransaction()
            .replace(R.id.container, fragmentTwo)
            .addToBackStack(""transaction"")
            .addSharedElement(ivProfile, ""profile"");
    // Apply the transaction
    ft.commit();
}
else {
    // Code to run on older devices
}
</code></pre>

<p><strong>OUTPUT</strong></p>

<p><a href=""https://i.stack.imgur.com/xZKMk.gif"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/xZKMk.gif"" alt=""enter image description here""></a></p>
",4407266,,,,,2017-05-08 9:10:05,,,,0,,,
Android,34261832,2,,31076228,2015,,5,,"<p>I've found an interesting article, which talks about why you should use them both. Take a look at:</p>

<p><a href=""http://qathread.blogspot.com/2015/05/espresso-uiautomator-perfect-tandem.html"" rel=""noreferrer"">http://qathread.blogspot.com/2015/05/espresso-uiautomator-perfect-tandem.html</a></p>

<p>Already <code>Espresso</code> is enough for me, but for some reasons like testing app notifications I would in just a few weeks learn <code>uiautomator</code>.</p>

<p>Spend some time to </p>

<ul>
<li>check Google's examples of using these frameworks:</li>
</ul>

<p><a href=""https://github.com/googlesamples/android-testing/tree/master/ui"" rel=""noreferrer"">https://github.com/googlesamples/android-testing/tree/master/ui</a></p>

<ul>
<li>read a documentation of these frameworks:</li>
</ul>

<p><a href=""http://developer.android.com/training/testing/ui-testing/espresso-testing.html"" rel=""noreferrer"">http://developer.android.com/training/testing/ui-testing/espresso-testing.html</a></p>

<p><a href=""http://developer.android.com/training/testing/ui-testing/uiautomator-testing.html"" rel=""noreferrer"">http://developer.android.com/training/testing/ui-testing/uiautomator-testing.html</a></p>
",4730812,,,,,2015-12-14 7:36:41,,,,0,,,
Android,45019307,2,,44580702,2017,,5,,"<p>You cannot.</p>

<p>The only way to achieve this is to use <a href=""https://developer.android.com/reference/android/arch/persistence/room/ForeignKey.html"" rel=""noreferrer"">@ForeignKey</a> constraint. If you want to still keep the list of object inside your parent POJO, you have to use <a href=""https://developer.android.com/reference/android/arch/persistence/room/Ignore.html"" rel=""noreferrer"">@Ignore</a> or provide a <a href=""https://developer.android.com/reference/android/arch/persistence/room/TypeConverter.html"" rel=""noreferrer"">@TypeConverter</a></p>

<p>For more info, follow this blog post:-</p>

<p><a href=""https://www.bignerdranch.com/blog/room-data-storage-for-everyone/"" rel=""noreferrer"">https://www.bignerdranch.com/blog/room-data-storage-for-everyone/</a></p>

<p>and sample code:-</p>

<p><a href=""https://github.com/googlesamples/android-architecture-components"" rel=""noreferrer"">https://github.com/googlesamples/android-architecture-components</a></p>
",5266029,,,,,2017-07-10 18:30:10,,,,2,,,
Android,36098551,2,,36098550,2016,,5,,"<p>From the <a href=""https://developer.android.com/guide/topics/ui/multi-window.html#running"" rel=""nofollow noreferrer"">Android Developer link</a> .</p>

<p>To make changes in UI or separate layout which should be used on Multiple-window activate.</p>

<p>We can check if activity is in Multiple-window by following way</p>

<ul>
<li><strong><em>From activity <code>Activity.isInMultiWindowMode()</code> Call to find out if the activity is in multi-window mode.</em></strong></li>
</ul>

<p>eg. To check in Activity if its multiple window than header(or any view should have Red background color if its not in multiple window thn it should be Green background color) </p>

<pre><code>headerView.setBackgroundColor(inMultiWindow()?Color.RED:Color.GREEN);
</code></pre>

<p>using <code>inMultiWindow()</code> replacing <strong>Fragment</strong> is also possible</p>

<ul>
<li><strong><em>To get Callback on Multiple-Window Activation.</em></strong></li>
</ul>

<p>From Activity <code>onMultiWindowChanged</code> method is available to handle runtime changes on this method callback.System will give callback on this method whenever the activity goes into or out of multi-window mode with <code>boolean</code> value.With the help of <a href=""https://github.com/googlesamples/android-MultiWindowPlayground/blob/master/Application/src/main/java/com/android/multiwindowplayground/activities/LoggingActivity.java"" rel=""nofollow noreferrer"">sample link</a> &amp; android developer link</p>

<pre><code>@Override
public void onMultiWindowChanged(boolean inMultiWindow) {
    super.onMultiWindowChanged(inMultiWindow);
    headerView.setBackgroundColor(inMultiWindow ? Color.RED : Color.GREEN);
    // here we can change entire fragment also.
    //If multiple window in than seperate and for multiple window out different

}
</code></pre>

<p>Will keep updating if I get anything else.</p>
",1140237,,1140237,,2017-09-29 5:59:33,2017-09-29 5:59:33,,,,1,,,
Android,36115055,2,,33748760,2016,,5,,"<p>I just figured out using the <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""noreferrer"">Camera2 Basic sample</a> that it is relatively easy to get the Face array from Camera2 preview after you set the capture session correctly.</p>

<p>In the setUpCameraOutputs method of the Camera2 Basic sample add the following check:</p>

<pre><code>int[] FD =characteristics.get(CameraCharacteristics.STATISTICS_INFO_AVAILABLE_FACE_DETECT_MODES);
int maxFD=characteristics.get(CameraCharacteristics.STATISTICS_INFO_MAX_FACE_COUNT);

if (FD.length&gt;0) {
    List&lt;Integer&gt; fdList = new ArrayList&lt;&gt;();
    for (int FaceD : FD
            ) {
        fdList.add(FaceD);
        Log.d(TAG, ""setUpCameraOutputs: FD type:"" + Integer.toString(FaceD));
    }
    Log.d(TAG, ""setUpCameraOutputs: FD count"" + Integer.toString(maxFD));

    if (maxFD &gt; 0) {
        mFaceDetectSupported = true;
        mFaceDetectMode = Collections.max(fdList);
    }
}
</code></pre>

<p>Then in the createCameraPreviewSession() method that creates the capture session add the following call for face detection method:</p>

<pre><code>@Override
public void onConfigured(@NonNull CameraCaptureSession cameraCaptureSession) {
    // The camera is already closed
    if (null == mCameraDevice) {
        return;
    }
    // When the session is ready, we start displaying the preview. ...
    // Flash is automatically enabled when necessary.
    setAutoFlash(mPreviewRequestBuilder);

    //&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;HERE&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;                                   
    //Face detection setup
    setFaceDetect(mPreviewRequestBuilder,mFaceDetectMode);...
</code></pre>

<p>Where the setFaceDetect(mPreviewRequestBuilder,mFaceDetectMode); code can be like this:</p>

<pre><code>private void setFaceDetect(CaptureRequest.Builder requestBuilder , int faceDetectMode){
    if (mFaceDetectSupported){
        requestBuilder.set(CaptureRequest.STATISTICS_FACE_DETECT_MODE,faceDetectMode);
    }

}
</code></pre>

<p>Face detection can be done in CameraCaptureSession.CaptureCallback by adding just few lines of code:</p>

<pre><code> private CameraCaptureSession.CaptureCallback mCaptureCallback
        = new CameraCaptureSession.CaptureCallback() {

private void process(CaptureResult result) {
    switch (mState) {
        case STATE_PREVIEW: {
            // We have nothing to do when the camera preview is working normally.
            //But we can for example detect faces 
            Face face[]=result.get(CaptureResult.STATISTICS_FACES);
            if (face.length&gt;0 ){
                Log.d(TAG, ""face detected "" + Integer.toString(face.length));
                takePicture();
            }

            break;
        }
</code></pre>

<p>I tested this change of the code and it works (I capture selfie once my face is detected... You can look into  more options of the Face class here:
<a href=""http://developer.android.com/reference/android/hardware/camera2/params/Face.html"" rel=""noreferrer"">Face</a></p>
",5662760,,1743880,,2016-03-20 14:52:38,2016-03-20 14:52:38,,,,1,,,
Android,36747600,2,,36652675,2016,,5,,"<h2>When this error happens and why?</h2>

<p><strong>Ans:</strong> When loading Android keys and storing public key from Keystore, this error may happen if the state is locked or uninitialized.</p>

<h2>Error generating portion code is given below:</h2>

<pre><code>@NonNull
    public static AndroidKeyStorePublicKey loadAndroidKeyStorePublicKeyFromKeystore(
            @NonNull KeyStore keyStore, @NonNull String privateKeyAlias)
            throws UnrecoverableKeyException {
        KeyCharacteristics keyCharacteristics = new KeyCharacteristics();
        int errorCode = keyStore.getKeyCharacteristics(privateKeyAlias, null,
                null, keyCharacteristics);
        if (errorCode != KeyStore.NO_ERROR) {
            throw (UnrecoverableKeyException) new UnrecoverableKeyException(
                    ""Failed to obtain information about private key"")
                    .initCause(KeyStore.getKeyStoreException(errorCode)); // this exception is generated
        }
        ......
        ......
        ......
    }
</code></pre>

<p>KeyStore has 10 response code. They are</p>

<pre><code>// ResponseCodes
NO_ERROR = 1;
LOCKED = 2;
UNINITIALIZED = 3;
SYSTEM_ERROR = 4;
PROTOCOL_ERROR = 5;
PERMISSION_DENIED = 6;
KEY_NOT_FOUND = 7;
VALUE_CORRUPTED = 8;
UNDEFINED_ACTION = 9;
WRONG_PASSWORD = 10;
</code></pre>

<blockquote>
  <p>KeyStore has 3 states. They are UNLOCKED, LOCKED, UNINITIALIZED</p>
  
  <p>NO_ERROR is only happened when the state is UNLOCKED. For your
  upgrading case the state is LOCKED or UNINITIALIZED for first time, so
  the error is happened only once.</p>
</blockquote>

<h2>State Checking code is given below:</h2>

<pre><code>public State state() {
    execute('t');
    switch (mError) {
    case NO_ERROR:
        return State.UNLOCKED;
    case LOCKED:
        return State.LOCKED;
    case UNINITIALIZED:
        return State.UNINITIALIZED;
    default:
        throw new AssertionError(mError);
    }
}
</code></pre>

<p>Resource Link:</p>

<ol>
<li><a href=""https://android.googlesource.com/platform/frameworks/base/+/android-6.0.0_r25/keystore/java/android/security/keystore/AndroidKeyStoreProvider.java"" rel=""nofollow noreferrer"">AndroidKeyStoreProvider java class</a> </li>
<li><a href=""https://github.com/nelenkov/android-keystore/blob/master/src/org/nick/androidkeystore/android/security/KeyStore.java"" rel=""nofollow noreferrer"">KeyStore java class</a></li>
</ol>

<hr>

<h2>UPDATE:</h2>

<p>From your error log, it is now clear that</p>

<pre><code>W/System.err Caused by: android.security.KeyStoreException: Invalid key blob
</code></pre>

<p>this is the main issue which is caused when user tries to UNLOCK from LOCK/UNINITIALIZED. It is by default defined as 30 secs for timing. <strong>This problem is it's API related implementation issue.</strong></p>

<pre><code>/**
 * If the user has unlocked the device Within the last this number of seconds,
 * it can be considered as an authenticator.
 */
private static final int AUTHENTICATION_DURATION_SECONDS = 30;
</code></pre>

<p>For encryption/decryption some data with the generated key only works if the user has just authenticated via device credentials. The error occurs from</p>

<pre><code>// Try encrypting something, it will only work if the user authenticated within
// the last AUTHENTICATION_DURATION_SECONDS seconds.
cipher.init(Cipher.ENCRYPT_MODE, secretKey); // error is generated from here.
</code></pre>

<p>Actual error is thrown from here. Your error is generated from <code>InvalidKeyException</code>.</p>

<h2>Solution:</h2>

<p>You have to remove the <code>InvalidKeyException</code> class from the catch argument. This will still allow you to check for <code>InvalidKeyException</code>. After checking you have to try for second time with code so that the problem is not shown in eye but doing 2 times checking it may solve your issue. I have not tested the code but should be like below:</p>

<pre><code>try {
....
KeyStore.PrivateKeyEntry privateKeyEntry = (KeyStore.PrivateKeyEntry) this.keyStore.getEntry(""alias"", null);
....
} catch (final Exception e) {
    e.printStackTrace();
    if (e instanceof InvalidKeyException) { // bypass InvalidKeyException
        .......
        // You can again call the method and make a counter for deadlock situation or implement your own code according to your situation
        if (retry) {
            keyStore.deleteEntry(keyName);
            return getCypher(keyName, false);
        } else {
            throw e;
        }
    }
}
</code></pre>

<h2>Resource Link:</h2>

<ol>
<li><a href=""https://github.com/googlesamples/android-ConfirmCredential/blob/master/Application/src/main/java/com/example/android/confirmcredential/MainActivity.java#L128"" rel=""nofollow noreferrer"">MainActivity.java</a> </li>
<li><a href=""https://stackoverflow.com/questions/36488219/android-security-keystoreexception-invalid-key-blob"">android.security.KeyStoreException: Invalid key blob</a></li>
</ol>
",2293534,,-1,,2017-05-23 12:26:00,2016-04-24 17:31:46,,,,12,,,
Android,36809263,2,,36808622,2016,,5,,"<p>Forget all you've read or done. Use Google's <a href=""https://developers.google.com/android/reference/com/google/android/gms/location/FusedLocationProviderApi"" rel=""noreferrer"">FusedLocationProviderApi</a>.</p>

<p>It is the simplest way to listen for location updates.</p>

<p>You don't have to deal with which location provider(network, gps etc) is enabled. You only need the location updates, so get them easily with <code>FusedLocationProviderApi</code></p>

<p>It is described <a href=""http://developer.android.com/training/location/receive-location-updates.html"" rel=""noreferrer"">here</a>. You can implement it into your app with few lines and in few minutes. </p>

<p><a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationUpdates"" rel=""noreferrer"">Here</a> is the sample.</p>

<p><strong>Note:</strong> You'll need below dependency:</p>

<pre><code>compile 'com.google.android.gms:play-services:8.1.0'
</code></pre>
",1460509,,,,,2016-04-23 9:57:04,,,,0,,,
Android,51788659,2,,51781176,2018,,5,,"<p>Looking at <a href=""https://developer.android.com/reference/android/arch/lifecycle/LiveData"" rel=""noreferrer"">Live data and its Parent/Children inheritance</a> there is no such thing as SingleLiveData. Reading link provided by @Raghu, I find statement:</p>

<blockquote>
  <p>The <a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java"" rel=""noreferrer"">SingleLiveEvent</a> class was created for a sample as a solution that worked for that particular scenario. It is a LiveData that will only send an update once.</p>
</blockquote>

<p>So to answer your questions:</p>

<blockquote>
  <p>Is SingleLiveData is actually part of the Android Architecture Components?</p>
</blockquote>

<p>No, it is not!</p>

<blockquote>
  <p>Is it a good idea to use it?</p>
</blockquote>

<p>This depends on many factors. Since I haven't used it I will give general idea. Using classes that you find in demo app or other way might not be guaranteed to be updated or bug-fixed. So if you understand the class so well that you can fix any bug you might find, and if it fits your need, then use it.</p>

<p>But generally I would avoid that if I can find something that is well maintained and does the same job. </p>

<p>Since from skimming the article I get impression he is trying to make some sort of observer pattern, I will suggest you check out rxjava</p>
",709683,,,,,2018-08-10 14:27:29,,,,1,,,
Android,47881098,2,,47866673,2017,,6,,"<p><strong>ViewModel is not observing any data</strong> it just returning LiveData object of Product so you can observe the data in <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/BasicSample/app/src/main/java/com/example/android/persistence/ui/ProductFragment.java"" rel=""noreferrer"">ProductFragment</a></p>

<p>This is how <strong>LiveData</strong> is <strong>observed</strong> in <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/BasicSample/app/src/main/java/com/example/android/persistence/ui/ProductFragment.java"" rel=""noreferrer"">ProductFragment</a>, In which the <code>getObservableProduct()</code> method called on ViewModel which returns <code>LiveData&lt;ProductEntity&gt;</code></p>

<pre><code>// Observe product data
    model.getObservableProduct().observe(this, new Observer&lt;ProductEntity&gt;() {
        @Override
        public void onChanged(@Nullable ProductEntity productEntity) {
            model.setProduct(productEntity);
        }
    });
</code></pre>

<p>This method in ViewModel called from <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/BasicSample/app/src/main/java/com/example/android/persistence/ui/ProductFragment.java"" rel=""noreferrer"">ProductFragment</a></p>

<pre><code>public LiveData&lt;ProductEntity&gt; getObservableProduct() {
    return mObservableProduct;
}
</code></pre>

<p>In constructor of that <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/BasicSample/app/src/main/java/com/example/android/persistence/viewmodel/ProductViewModel.java"" rel=""noreferrer"">ProductViewModel</a> the member variable mObservableProduct is initialized as follows, Which get <code>LiveData&lt;ProductEntity&gt;</code> <strong>from Repository</strong></p>

<pre><code>private final LiveData&lt;ProductEntity&gt; mObservableProduct;
mObservableProduct = repository.loadProduct(mProductId);
</code></pre>

<p>If you dig deeper, in <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/BasicSample/app/src/main/java/com/example/android/persistence/DataRepository.java"" rel=""noreferrer"">DataRepository</a>, <code>LiveData&lt;ProductEntity&gt;</code> is fetched <strong>from DAO</strong></p>

<pre><code>public LiveData&lt;ProductEntity&gt; loadProduct(final int productId) {
    return mDatabase.productDao().loadProduct(productId);
}
</code></pre>

<p>And in DAO its nothing but <strong>SQL query</strong> which returns the <code>LiveData&lt;ProductEntity&gt;</code> which is implemented by <strong>RoomCompiler</strong>. As you can see DAO using @Dao annotation which used by annotation processor and Write Dao implementation in <code>ProductDao_Impl</code> class.</p>

<pre><code>@Query(""select * from products where id = :productId"")
LiveData&lt;ProductEntity&gt; loadProduct(int productId);
</code></pre>

<p>So In a <strong>nutshell</strong>, <strong>ViewModel holding References</strong> to all the data required by Activity or Fragment. Data get initialized in ViewModel and it can survive Activity <strong>configuration changes</strong>. Thus we are storing its references in ViewModel.
In our case LiveData is just wrapper around our object which is returned by DAO implementation as an Observable object. So we can observe this in any <strong>Activity or Fragment</strong>. So as soon as the data is changed at Data Source, it called <code>postValue()</code> method on LiveData and we get the <strong>callback</strong></p>

<p><strong>Flow</strong> of LiveData
<strong>DAO -> Repository -> ViewModel -> Fragment</strong></p>
",3624647,,,,,2017-12-19 6:21:46,,,,0,,,
Android,30427031,2,,30426760,2015,,6,,"<p>Your would need to Animate a view (in this example a LinearLayout).  Set the x and y values of the createCircularReveal to the fab button. </p>

<pre><code>fab.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View view) {
        LinearLayout shape = (LinearLayout) rootView.findViewById(R.id.circle);
        // Create a reveal {@link Animator} that starts clipping the view from
        // the top left corner until the whole view is covered.
        Animator animator = ViewAnimationUtils.createCircularReveal(
            shape,
            0,
            0,
            0,
            (float) Math.hypot(shape.getWidth(), shape.getHeight()));

        // Set a natural ease-in/ease-out interpolator.
        animator.setInterpolator(new AccelerateDecelerateInterpolator());

        // Finally start the animation
        animator.start();
    }
});
</code></pre>

<p>This is the information on the createCircleReveal</p>

<pre><code>createCircularReveal(View view,
        int centerX,  int centerY, float startRadius, float endRadius);
</code></pre>

<p>Example Project:</p>

<p><a href=""https://github.com/googlesamples/android-RevealEffectBasic/"" rel=""noreferrer"">https://github.com/googlesamples/android-RevealEffectBasic/</a></p>

<p><strong>UPDATE</strong></p>

<p>Instead of setting the view to GONE, set it to INVISIBLE.  Also make the view setEnabled(false) to prevent it from being touched etc. </p>

<pre><code>LinearLayout shape;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {
    final View view = inflater.inflate(R.layout.reveal_effect_basic, container, false);
    shape = (LinearLayout) view.findViewById(R.id.circle);
    shape.setVisibility(View.INVISIBLE);
    shape.setEnabled(false);
    ImageButton fab = (ImageButton) view.findViewById(R.id.share);
    fab.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            Animator animator = ViewAnimationUtils.createCircularReveal(
                shape,
                shape.getWidth() - 130,
                shape.getHeight() - 130,
                0,
                (float) Math.hypot(shape.getWidth(), shape.getHeight()));
            shape.setVisibility(View.VISIBLE);
            animator.setInterpolator(new AccelerateDecelerateInterpolator());
            if (shape.getVisibility() == View.VISIBLE) {
                animator.setDuration(400);
                animator.start();
                shape.setEnabled(true);
            }
        }
    });
</code></pre>
",3904085,,3904085,,2015-05-25 19:02:47,2015-05-25 19:02:47,,,,9,,,
Android,47571204,2,,11944060,2017,,6,,"<p><strong>Android <code>${ANDROID_ABI}</code></strong></p>

<p>The <code>${ANDROID_ABI}</code> variable is the way to go in Android, where it assumes values like <code>arm64-v8a</code>, <code>x86_64</code> and so on.</p>

<p>It is used on the official NDK library example: <a href=""https://github.com/googlesamples/android-ndk/blob/840858984e1bb8a7fab37c1b7c571efbe7d6eb75/hello-libs/app/src/main/cpp/CMakeLists.txt#L25"" rel=""noreferrer"">https://github.com/googlesamples/android-ndk/blob/840858984e1bb8a7fab37c1b7c571efbe7d6eb75/hello-libs/app/src/main/cpp/CMakeLists.txt#L25</a></p>

<p>I have further commented on that example at: <a href=""https://stackoverflow.com/questions/17172153/ndk-how-to-include-prebuilt-shared-library-regardless-of-architecture/47571060#47571060"">NDK: How to include Prebuilt Shared Library Regardless of Architecture</a></p>
",895245,,,,,2017-11-30 10:30:27,,,,0,,,
Android,37850202,2,,37780921,2016,,6,,"<p>May you add more info for:
""but it doesn't seem to want to pull any third-party dependencies over.""?</p>

<p>this one:<br>
<a href=""https://github.com/googlesamples/android-ndk/tree/master/hello-libs"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk/tree/master/hello-libs</a>
has static and shared 3rd party libs, you may try it.</p>

<p>For the shared dependent lib, you will need to pack them into APK, that is done inside gradle, cmake will not do it.<br>
The above example shows that, basically they need to be copied into your app/src/main/jniLibs too so they will be packed into apk, and pushed to your android phone/tablet. At runtime they could be loaded.<br>
I have tried to put a group of libraries into one directory, and use     </p>

<ul>
<li>link_directories(...)</li>
</ul>

<p>then just put the lib names directly into        </p>

<ul>
<li>target_link_libraries(...)</li>
</ul>

<p>also works. Make sure you have the right libs for the ABIs you intend to support for your app [looks like you are just building for one ABI].</p>
",4496512,,4714742,,2018-07-18 15:41:45,2018-07-18 15:41:45,,,,5,,,
Android,30874325,2,,29006960,2015,,6,,"<p>Fingerprint API preview for Android M is found <a href=""https://developer.android.com/about/versions/marshmallow/android-6.0.html#fingerprint-authentication"" rel=""nofollow noreferrer"">here</a> with <a href=""https://github.com/googlesamples/android-FingerprintDialog"" rel=""nofollow noreferrer"">Sample App</a>. As of this writing, Android Compatibility Definition for Android M hasn't been published. So, if fingerprint sensor, the key hardware component of the fingerprint framework, is left as a ""SHOULD"" requirement (most likely to be true), then OEMs decide either to incorporate the sensor or not. But, since <a href=""https://www.android.com/intl/en_us/pay/"" rel=""nofollow noreferrer"">Android Pay</a> is strongly ties to finger print framework, this may drive OEMs to include the fingerprint sensor. </p>
",1966235,,2603965,,2016-08-28 8:37:12,2016-08-28 8:37:12,,,,0,,,
Android,37487128,2,,37221590,2016,,6,,"<p>Prefix the file path with <code>/</code>.</p>

<p>Basically, you'd do something like this:</p>

<pre><code>File helloBleprintJson = new File(
        getClass().getResource(""/helloBlueprint.json"").getPath());
</code></pre>

<p>Above snippet is taken from <a href=""https://github.com/googlesamples/android-testing-templates/blob/master/AndroidTestingBlueprint/app/src/test/java/com/example/android/testing/blueprint/LocalUnitTest.java#L67"" rel=""noreferrer"">here</a>.</p>
",786136,,1276636,,2017-04-19 7:55:36,2017-04-19 7:55:36,,,,1,,,
Android,47409546,2,,47367576,2017,,6,,"<p>As usual, Google's own <a href=""https://github.com/googlesamples/android-AutofillFramework/tree/master/afservice"" rel=""nofollow noreferrer"">examples repository provides a good starting point</a> for learning the Autofill Framework's API, and covers much more material than I can fit into an answer. Here's an overview of the key concepts. From the description in the <a href=""https://developer.android.com/guide/topics/text/autofill.html"" rel=""nofollow noreferrer"">documentation</a>, we want to create an Autofill <em>service</em> that will handle requests from other apps (the clients) to store and retrieve Autofill field data. </p>

<p>First, we need to create a service provider class that fulfills this contract. We can extend the base <a href=""https://developer.android.com/reference/android/service/autofill/AutofillService.html"" rel=""nofollow noreferrer""><code>AutofillService</code> class</a>: </p>

<pre class=""lang-java prettyprint-override""><code>import android.service.autofill.AutofillService;
...
public class MyAutofillService extends AutofillService {
    ...
    @Override
    public void onFillRequest(FillRequest request, CancellationSignal cancellationSignal,
        FillCallback callback) { ... }

    @Override
    public void onSaveRequest(SaveRequest request, SaveCallback callback) { ... }
}
</code></pre>

<p>The service's <a href=""https://developer.android.com/reference/android/service/autofill/AutofillService.html#onFillRequest(android.service.autofill.FillRequest,%20android.os.CancellationSignal,%20android.service.autofill.FillCallback)"" rel=""nofollow noreferrer""><code>onFillRequest()</code></a> and <a href=""https://developer.android.com/reference/android/service/autofill/AutofillService.html#onSaveRequest(android.service.autofill.SaveRequest,%20android.service.autofill.SaveCallback)"" rel=""nofollow noreferrer""><code>onSaveRequest()</code></a> methods are the most significant for our understanding. The Android system calls <code>onFillRequest()</code> to determine if our service can autofill fields for a particular activity, and gives the method a <a href=""https://developer.android.com/reference/android/service/autofill/FillRequest.html"" rel=""nofollow noreferrer""><code>FillRequest</code></a> which contains the context and view information that our service will examine for fillable fields. When the service finishes, it invokes the provided <code>callback</code> with the appropriate autofill data.</p>

<p>Here's a <em>dramatically</em> simplified overview of the basic steps needed to provide autofill suggestions for a <code>FillRequest</code>: </p>

<pre><code>@Override
public void onFillRequest(FillRequest request, CancellationSignal signal, FillCallback callback) {
    List&lt;FillContext&gt; contexts = request.getFillContexts();
    AssistStructure structure = contexts.get(contexts.size() - 1);
    WindowNode windowNode = structure.getWindowNodeAt(0);
    ViewNode viewNode = windowNode.getRootViewNode(); // pretend this is an EditText

    String suggestionText = ""This will appear in the autofill list for 'viewNode'."";
    RemoteViews suggestion = new RemoteViews(getPackageName(), R.layout.autofill_suggestion);
    suggestion.setTextViewText(R.id.autofill_suggestion, suggestionText);

    Dataset suggestionDataset = new Dataset.Builder(suggestion) 
        .setValue(viewNode.getAutoFillId(), AutofillValue.forText(suggestionText))
        .build();

    FillResponse response = new FillResponse.Builder() 
        .addDataset(suggestionDataset)
        .build();

    callback.onSuccess(response);
}
</code></pre>

<p>As we can see, the Autofill API requires a lot of code just to provide a single, static autofill suggestion for a <code>View</code> that we already know in advance&mdash;the example assumes that <code>viewNode</code> is a text input field that we want to provide autofill suggestions for. In reality, this example is too simple, but I wanted to clearly show the minimum implementation. For each <code>WindowNode</code>, we need to walk through the view tree of the root <a href=""https://developer.android.com/reference/android/app/assist/AssistStructure.ViewNode.html"" rel=""nofollow noreferrer""><code>ViewNode</code></a> and each of its children to find each of the input fields that our service wishes to provide autofill data for, and then create a <a href=""https://developer.android.com/reference/android/widget/RemoteViews.html"" rel=""nofollow noreferrer""><code>RemoteViews</code></a> and <a href=""https://developer.android.com/reference/android/service/autofill/Dataset.html"" rel=""nofollow noreferrer""><code>Dataset</code></a> that contains the autofill suggestion for each field that we'll add to the <a href=""https://developer.android.com/reference/android/service/autofill/FillResponse.html"" rel=""nofollow noreferrer""><code>FillResponse</code></a> using <a href=""https://developer.android.com/reference/android/service/autofill/FillResponse.Builder.html"" rel=""nofollow noreferrer""><code>FillResponse.Builder.addDataset()</code></a>. This example doesn't show the plain XML layout for the <code>R.layout.autofill_suggestion</code> <code>TextView</code> used to create the suggestion display item for a <code>RemoteViews</code>. </p>

<p>Similarly, Android calls <code>onSaveRequest()</code> when a user wants to save the data in an activity's fields for future completion requests and injects a <a href=""https://developer.android.com/reference/android/service/autofill/SaveRequest.html"" rel=""nofollow noreferrer""><code>SaveRequest</code></a> that our service uses to find autofill data to remember.</p>

<p>The specific implementation of each of these methods will depend on the type of Autofill data that our app provides. Autofill services <em>must</em> conscientiously examine the characteristics of each field and <em>carefully</em> select a set of appropriate autofill suggestions to avoid leaking the user's data to a malicious client activity (see comments). For a password manager in particular, we need to pay special attention to properly authenticating a user of the service and providing a safe set of suggestions when requesting and saving autofill data.</p>

<p>We can now <a href=""https://developer.android.com/guide/topics/manifest/service-element.html"" rel=""nofollow noreferrer"">register the service</a> in the <code>&lt;application&gt;</code> block of the project's <i>AndroidManifest.xml</i>: </p>

<pre class=""lang-xml prettyprint-override""><code>&lt;service
    android:name="".MyAutofillService""
    android:label=""Multi-Dataset Autofill Service""
    android:permission=""android.permission.BIND_AUTOFILL_SERVICE""&gt;
    &lt;meta-data
        android:name=""android.autofill""
        android:resource=""@xml/multidataset_service"" /&gt;

    &lt;intent-filter&gt;
        &lt;action android:name=""android.service.autofill.AutofillService"" /&gt;
    &lt;/intent-filter&gt;
&lt;/service&gt;
</code></pre>

<p>As shown, this binds our Autofill service as an available option that appears in the Autofill services list show in the question. The <code>android:name</code> attribute must match the name of our <code>AutofillService</code> class, and our app must declare the <code>BIND_AUTOFILL_SERVICE</code> permission. Change the value of <code>android:label</code> to a suitable name for the service (for example, ""Autofill with Password Manager""). Alternatively, set this in a string resource. Note also that we should provide a ""settings"" activity used to configure our service which we specify in the <code>&lt;metadata&gt;</code> for <code>android.autofill</code>: </p>

<pre class=""lang-xml prettyprint-override""><code>&lt;autofill-service android:settingsActivity=""foo.bar.SettingsActivity"" /&gt;
</code></pre>

<p>Then, the user can enable our Autofill service from their device Settings. We can broadcast the <a href=""https://developer.android.com/reference/android/provider/Settings.html#ACTION_REQUEST_SET_AUTOFILL_SERVICE"" rel=""nofollow noreferrer""><code>ACTION_REQUEST_SET_AUTOFILL_SERVICE</code></a> intent during setup or first launch to assist the user in finding this screen.</p>
",5209322,,5209322,,2017-11-23 5:30:25,2017-11-23 5:30:25,,,,3,,,
Android,36186335,2,,36184874,2016,,6,,"<p>You can handle this by maintaining some state between the activity starting and stopping.</p>

<p>See use of the <code>mIsResolving</code> variable in this <a href=""https://github.com/googlesamples/android-credentials/blob/master/credentials-quickstart/app/src/main/java/com/google/example/credentialsbasic/MainActivity.java"" rel=""nofollow"">sample code</a>. Simply save whether there is a pending dialog already when <code>onSaveInstanceState()</code> is called and restore in <code>onCreate()</code>, and guard against calling the API again if so, clearing the state once <code>onActivityResult()</code> is received for the intent.</p>

<pre><code>private void resolveResult(Status status, int requestCode) {
    // We don't want to fire multiple resolutions at once since that can result
    // in stacked dialogs after rotation or another similar event.
    if (mIsResolving) {
        Log.w(TAG, ""resolveResult: already resolving."");
        return;
    }
    if (status.hasResolution()) {
        try {
            status.startResolutionForResult(MainActivity.this, requestCode);
            mIsResolving = true;
...

@Override
protected void onCreate(Bundle savedInstanceState) {
...
    if (savedInstanceState != null) {
        mIsResolving = savedInstanceState.getBoolean(KEY_IS_RESOLVING);
    }
...

@Override
protected void onSaveInstanceState(Bundle outState) {
...
    outState.putBoolean(KEY_IS_RESOLVING, mIsResolving);
...

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (requestCode) {
...
            mIsResolving = false;
...
</code></pre>

<p>This is a common pitfall for many apps, so we'll look into whether we can support this state in Play Services layer, but for now, using the boolean for the activity is the current and general recommendation for maintaining resolution state.</p>
",5001016,,5001016,,2016-03-25 1:15:23,2016-03-25 1:15:23,,,,0,,,
Android,45141825,2,,43135948,2017,,6,,"<p>This is a documented and long-running issue with the Google Maps SDK leaking memory even after a call to removeLocationUpdates. You can read more about it <a href=""http://github.com/googlesamples/android-play-location/issues/26"" rel=""noreferrer"">here</a>. </p>

<p>The following workaround removed the leak canary notification for me. </p>

<p>1) Create a WeakLocationListener class that wraps the location listener in a weak reference and then use this class to handle the onLocationChanged call back. </p>

<pre><code>public class WeakLocationListener implements LocationListener {

private final WeakReference&lt;LocationListener&gt; locationListenerRef;

public WeakLocationListener(@NonNull LocationListener locationListener) {
    locationListenerRef = new WeakReference&lt;&gt;(locationListener);
}

@Override
public void onLocationChanged(android.location.Location location) {
    if (locationListenerRef.get() == null) {
        return;
    }
    locationListenerRef.get().onLocationChanged(location);
}
</code></pre>

<p>2) Create an instance of WeakLocationListener (using the LocationListener implemented by your fragment) and use it when you requestLocationUpdates and removeLocationUpdates - the location will be returned to your activity/fragment (or whatever class is implementing LocationListener) and the leak canary notification should disappear. </p>

<p>Hope this helps. </p>
",6320723,,,,,2017-07-17 10:29:09,,,,2,,,
Android,33673004,2,,32699698,2015,,6,,"<p>Yes, Usage Stats API is the answer. 
Struggled to figure it out initially, but I have finally managed to do so.</p>

<p>The permission required is :</p>

<pre><code>&lt;uses-permission
android:name=""android.permission.PACKAGE_USAGE_STATS""
tools:ignore=""ProtectedPermissions"" /&gt;
</code></pre>

<p>Code to get app usage:</p>

<pre><code> final UsageStatsManager usageStatsManager = (UsageStatsManager) getSystemService(Context.USAGE_STATS_SERVICE);// Context.USAGE_STATS_SERVICE);
            Calendar beginCal = Calendar.getInstance();
            beginCal.set(Calendar.DAY_OF_MONTH, 11);
            beginCal.set(Calendar.MONTH, 10);
            beginCal.set(Calendar.YEAR, 2015);

            Calendar endCal = Calendar.getInstance();
            endCal.set(Calendar.DAY_OF_MONTH, 12);
            endCal.set(Calendar.MONTH, 10);
            endCal.set(Calendar.YEAR, 2015);

final List&lt;UsageStats&gt; queryUsageStats = usageStatsManager.queryUsageStats(UsageStatsManager.INTERVAL_DAILY, beginCal.getTimeInMillis(), endCal.getTimeInMillis());
System.out.println(""results for "" + beginCal.getTime().toGMTString() + "" - "" + endCal.getTime().toGMTString());
for (UsageStats app : queryUsageStats) {
    System.out.println(app.getPackageName() + "" | "" + (float) (app.getTotalTimeInForeground() / 1000));
}
</code></pre>

<p>Open permissions using :</p>

<pre><code>Intent intent = new Intent(Settings.ACTION_USAGE_ACCESS_SETTINGS);
startActivity(intent);
</code></pre>

<p>This question helped figure it all out.
Better documentation on the Android website would have helped greatly. </p>

<p>Here are a couple of links that helped me:</p>

<p><a href=""https://github.com/googlesamples/android-AppUsageStatistics"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-AppUsageStatistics</a></p>

<p><a href=""https://stackoverflow.com/questions/26431795/how-to-use-usagestatsmanager"">How to use UsageStatsManager?</a></p>
",4169171,,-1,,2017-05-23 12:31:52,2015-11-12 13:51:40,,,,1,,,
Android,32190055,2,,28804307,2015,,6,,"<p>If you set your minSdkVersion to 23 or higher Android M makes it easy to generate and manage symmetric keys as of this month.</p>

<p>Check out the 4th example listed here.
<a href=""https://developer.android.com/reference/android/security/keystore/KeyGenParameterSpec.html"" rel=""noreferrer"">https://developer.android.com/reference/android/security/keystore/KeyGenParameterSpec.html</a></p>

<pre><code> KeyGenerator keyGenerator = KeyGenerator.getInstance(
         KeyProperties.KEY_ALGORITHM_AES, ""AndroidKeyStore"");
 keyGenerator.initialize(
         new KeyGenParameterSpec.Builder(""key2"",
                 KeyProperties.PURPOSE_ENCRYPT | KeyProperties.PURPOSE_DECRYPT)
                 .setBlockModes(KeyProperties.BLOCK_MODE_GCM)
                 .setEncryptionPaddings(KeyProperties.ENCRYPTION_PADDING_NONE)
                 .build());
 SecretKey key = keyGenerator.generateKey();

 Cipher cipher = Cipher.getInstance(""AES/GCM/NoPadding"");
 cipher.init(Cipher.ENCRYPT_MODE, key);
 ...

 // The key can also be obtained from the Android Keystore any time as follows:
 KeyStore keyStore = KeyStore.getInstance(""AndroidKeyStore"");
 keyStore.load(null);
 key = (SecretKey) keyStore.getKey(""key2"", null);
</code></pre>

<p>This example also was helpful.
<a href=""https://github.com/googlesamples/android-ConfirmCredential/blob/master/Application/src/main/java/com/example/android/confirmcredential/MainActivity.java"" rel=""noreferrer"">https://github.com/googlesamples/android-ConfirmCredential/blob/master/Application/src/main/java/com/example/android/confirmcredential/MainActivity.java</a></p>
",1387849,,1387849,,2015-08-24 20:30:04,2015-08-24 20:30:04,,,,4,,,
Android,44318444,2,,44297396,2017,,6,,"<ul>
<li><p><strong>0.</strong> Build openssl libraries for Android; you must choose the ABI (<strong>armeabi-v7a</strong> and <strong>x86</strong> are usually enough). You can find the <a href=""https://wiki.openssl.org/index.php/Android"" rel=""nofollow noreferrer"">official tutorial</a> long and boring. In this case, you can find prebuilt binaries on GitHub or elsewhere. Decide whether you want shared libs or static libs.</p></li>
<li><p><strong>1.</strong> With Android Studio 2.3 you can build your library by the integrated <a href=""https://developer.android.com/studio/projects/add-native-code.html"" rel=""nofollow noreferrer"">externalNativeBuild</a> gradle task. But you can build it separately, using <a href=""https://developer.android.com/ndk/guides/index.html"" rel=""nofollow noreferrer""><code>ndk-build</code></a> command. </p></li>
<li><p><strong>2.</strong> If you choose not to use gradle, copy the built shared libs to <code>app/src/main/jniLibs</code> directory of your Android project.</p></li>
<li><p><strong>3.</strong> You need a JNI wrapper to connect your Java code with C code. On the Java side, declare necessary <strong>native</strong> methods in one or more classes. These methods must be <em>implemented</em> on the C/C++ side, as described in the Android JNI <a href=""https://developer.android.com/ndk/samples/sample_hellojni.html"" rel=""nofollow noreferrer"">walkthrough</a>. Your Java code must explicitly load the shared library that includes these native method implementations. Note that you cannot directly call native functions in your library, or in opensssl library, even if these functions are <em>exported</em>.</p></li>
</ul>

<p>The working <strong>Android.mk</strong>:</p>

<pre><code>include $(CLEAR_VARS)

LOCAL_MODULE := vrazovpn
LOCAL_SRC_FILES := src/myc_files.c src/myother_c_files.c
LOCAL_STATIC_LIBRARIES := openssl libcrypto
include $(BUILD_SHARED_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := openssl
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/include
LOCAL_SRC_FILES := libs/$(TARGET_ARCH_ABI)/libssl.a
include $(PREBUILT_STATIC_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := libcrypto
LOCAL_SRC_FILES := libs/$(TARGET_ARCH_ABI)/libcrypto.a
include $(PREBUILT_STATIC_LIBRARY)
</code></pre>

<p><em>few comments to clarify the above:</em></p>

<ul>
<li><strong>LOCAL_SRC_FILES</strong> paths are relative to <strong>LOCAL_PATH</strong>.</li>
<li><strong>LOCAL_C_INCLUDE</strong> paths are relative to the working directory, that's why we often prefix them with <code>$(LOCAL_PATH)</code>.</li>
<li>It's OK to use <strong>LOCAL_C_INCLUDES</strong> to refer to headers that belong to some library that we use, but it is much safer and cleaner to export these headers with the library, using the power of <strong>LOCAL_EXPORT_C_INCLUDES</strong>; there are other settings that can be exported similarly.</li>
<li><p><strong>Android.mk</strong> should not (and cannot) set the target ABI; it <em>receives</em> the target ABI from <code>ndk-build</code>. You can control which ABIs to include in build either by listing them in your <strong>Application.mk</strong> file or on the command line, e.g.</p>

<p><code>ndk-build APP_ABI=""x86 armeabi-v7a""</code></p></li>
</ul>

<p>If you build your library in Android Studio 2.3 or above, using the gradle plugin, the <code>APP_ABI</code> setting is ignored. You must specify the list in <a href=""https://github.com/googlesamples/android-ndk/blob/master/native-media/app/build.gradle#L12"" rel=""nofollow noreferrer""><strong>abiFilters</strong></a>.</p>
",192373,,192373,,2017-06-09 19:25:02,2017-06-09 19:25:02,,,,9,,,
Android,49298080,2,,49292200,2018,,6,,"<p>I would go for navigation inside activities/fragments but of course most case you wanna trigger your navigation from view model.
So you need to use a command from you view model to notify your view (activity/fragment) to navigate elsewhere.
You can do this kind of ""command"" using LiveData and more specificly <a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java"" rel=""noreferrer"">SingleLiveEvent</a>.</p>

<p>SingleLiveEvent is like any LiveData but trigger an event only when you explicity set a value to it, for example you won't receive its value when starting observing it from your view (activity/fragment)</p>
",6245697,,6245697,,2018-03-15 20:13:33,2018-03-15 20:13:33,,,,3,,,
Android,46103575,2,,45627420,2017,,6,,"<p>I'm the Android Frameworks engineer leading the Autofill Framework project, so I'll answer some questions:</p>

<ul>
<li>The <em>""Contents can't be autofilled""</em> message typically means the Autofill Service does not know how to autofill the screen. When you're adding autofill support to your app, it's often easier to use an Autofill Service you can control first, rather than a ""real"" service like a password manager. As mentioned in a previous reply, we provide a <a href=""https://github.com/googlesamples/android-AutofillFramework"" rel=""noreferrer"">sample service</a> that can be used for this purpose.</li>
<li>When you long-press a text field and select <em>AUTOFILL</em>, you are in fact ""forcing"" an autofill request as mentioned in another reply (i.e., behind the scenes the text field is calling <em>AutofillManager.requestAutofill()</em>). If the Autofill Service knows how to autofill your screen, you shouldn't need to do that, as the autofill suggestions would show up right away once you focus the input field.</li>
<li>You shouldn't need to set <em>importantForAutofill</em> or call <em>AutofillManager.cancel()</em> in your case.</li>
</ul>

<p>So, my recommendation is to try to use the sample Autofill Service implementation to test your app first. Most likely, the first time you access your app the autofill popup won't be shown because the service does not have data for it. But once your app triggers the save UI (for example, after you manually enter the phone number and the activity finishes) and you tap save, that data should be available the next time you launch the activity. </p>

<p>Hope that helps,</p>

<p>-- Felipe</p>
",8576395,,,,,2017-09-07 19:12:31,,,,2,,,
Android,36069730,2,,30653287,2016,,6,,"<p>The Android sample app HdrViewfinderDemo uses RenderScript to process YUV data from camera2.</p>

<p><a href=""https://github.com/googlesamples/android-HdrViewfinder"" rel=""noreferrer"">https://github.com/googlesamples/android-HdrViewfinder</a></p>

<p>Specifically, the <a href=""https://github.com/googlesamples/android-HdrViewfinder/blob/master/Application/src/main/java/com/example/android/hdrviewfinder/ViewfinderProcessor.java"" rel=""noreferrer"">ViewfinderProcessor</a> sets up the Allocations, and <a href=""https://github.com/googlesamples/android-HdrViewfinder/blob/master/Application/src/main/rs/hdr_merge.rs"" rel=""noreferrer"">hdr_merge.rs</a> reads from them.</p>
",1344825,,,,,2016-03-17 19:16:03,,,,0,,,
Android,50870340,2,,50869969,2018,,6,,"<p>In the repository you mentioned, Dagger 2 knows how to inject <code>TasksRepository</code> through the constructor being marked with <code>@Inject</code>. From the <a href=""https://github.com/googlesamples/android-architecture/blob/082bd72d62472f9caadd2979046067fb928bbfef/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/data/source/TasksRepository.java#L83"" rel=""noreferrer"">source</a>:</p>

<pre><code>@Inject
TasksRepository(@Remote TasksDataSource tasksRemoteDataSource,
        @Local TasksDataSource tasksLocalDataSource) {
    mTasksRemoteDataSource = tasksRemoteDataSource;
    mTasksLocalDataSource = tasksLocalDataSource;
}
</code></pre>

<p>Since the constructor is annotated with <code>@Inject</code>, Dagger 2 will attempt to use the constructor to inject <code>TasksRepository</code> into consumers like <code>TodoApplication</code>.</p>

<p>Since <code>TasksDataSource</code> are already bound in <code>TasksRepositoryModule</code> there is enough information for Dagger 2 to perform injection without the burden of extra <code>@Provides</code> or <code>@Binds</code> methods.</p>

<p>Similarly, you can do the following:</p>

<pre><code>class Foo {

   private final Bar bar;

   @Inject
   Foo(Bar bar) {
       this.bar = bar;
   }
}

class Bar {

    @Inject 
    Bar() {}
}

class Activity extends AppCompatActivity {

    @Inject Foo foo;

}
</code></pre>

<p>And Dagger 2 will be able to inject <code>Foo</code> inside <code>AppCompatActivity</code>. Why? </p>

<ol>
<li>Dagger 2 knows how to construct a <code>Bar</code> object (through calling the empty constructor)</li>
<li>Dagger 2 knows that when creating instances of <code>Foo</code> it must use the constructor annotated with <code>@Inject</code> with the single parameter <code>Bar</code>.</li>
<li>There are no other dependencies for <code>Foo</code>, in other words the complete object graph is available.</li>
</ol>
",5241933,,5241933,,2018-06-15 6:46:57,2018-06-15 6:46:57,,,,1,,,
Android,51869841,2,,51869389,2018,,6,,"<p>Per the <a href=""https://medium.com/google-developers/livedata-with-snackbar-navigation-and-other-events-the-singleliveevent-case-ac2622673150"" rel=""noreferrer"">LiveData with SnackBar, Navigation, and other events blog post</a>:</p>

<blockquote>
  <p>Some data should be consumed only once, like a Snackbar message, a navigation event or a dialog trigger.</p>
  
  <p>Instead of trying to solve this with libraries or extensions to the Architecture Components, it should be faced as a design problem. <strong>We recommend you treat your events as part of your state.</strong></p>
</blockquote>

<p>They detail the use of a <a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java"" rel=""noreferrer"">SingleLiveEvent</a> class which ensures that each Navigation event is only received once by an Observer (i.e., your Fragment that has access to your <code>NavController</code>).</p>

<p>The other alternative is to use an 'Event wrapper' model where the event must be explicitly marked as handled.</p>
",1676363,,,,,2018-08-16 4:55:56,,,,2,,,
Android,46497294,2,,46410536,2017,,7,,"<p>Ok I found why. It's not a problem with the Android build of the device.
It's because there already was an <code>IInAppBillingService.aidl</code> in our project. Once I removed it and clean the project everything is working properly. -> <a href=""https://github.com/googlesamples/android-play-billing/issues/86#issuecomment-332369494"" rel=""noreferrer"">Github Issue</a></p>
",4193343,,,,,2017-09-29 21:44:21,,,,0,,,
Android,48091649,2,,30305217,2018,,7,,"<p>You can use the following helper functions to use Mockito's any(), eq() and capture() matchers in Kotlin:</p>

<pre><code>/**
 * Returns Mockito.eq() as nullable type to avoid java.lang.IllegalStateException when
 * null is returned.
 *
 * Generic T is nullable because implicitly bounded by Any?.
 */
fun &lt;T&gt; eq(obj: T): T = Mockito.eq&lt;T&gt;(obj)

/**
 * Returns Mockito.any() as nullable type to avoid java.lang.IllegalStateException when
 * null is returned.
 */
fun &lt;T&gt; any(): T = Mockito.any&lt;T&gt;()

/**
 * Returns ArgumentCaptor.capture() as nullable type to avoid java.lang.IllegalStateException
 * when null is returned.
 */
fun &lt;T&gt; capture(argumentCaptor: ArgumentCaptor&lt;T&gt;): T = argumentCaptor.capture()
</code></pre>

<p>See <a href=""https://github.com/googlesamples/android-architecture/blob/todo-mvp-kotlin/todoapp/app/src/test/java/com/example/android/architecture/blueprints/todoapp/MockitoKotlinHelpers.kt"" rel=""nofollow noreferrer"">MockitoKotlinHelpers.kt</a> from the Android Architecture Blueprints repository by Google.</p>
",1552622,,1552622,,2018-03-16 15:56:41,2018-03-16 15:56:41,,,,2,,,
Android,30586140,2,,11271436,2015,,7,,"<p>As of Android 5.0+, you can use the new functionality in the SDK called <a href=""https://developer.android.com/reference/android/media/projection/package-summary.html"">media projections</a> to do screen capture without root privileges.  There is sample code by Google available <a href=""https://github.com/googlesamples/android-ScreenCapture"">here</a>.</p>
",1316252,,,,,2015-06-02 2:00:37,,,,0,,,
Android,40168632,2,,40162157,2016,,7,,"<p>currently need to pack it by the app. it could be something like:</p>

<pre><code>    sourceSets {
        main {
            // let gradle pack the shared library into apk
            jniLibs.srcDirs = ['point/to/your/shared-lib']
       }
    }
</code></pre>

<p>one example is: <a href=""https://github.com/googlesamples/android-ndk/blob/master/hello-libs/app/build.gradle"" rel=""noreferrer"">https://github.com/googlesamples/android-ndk/blob/master/hello-libs/app/build.gradle</a>
If your shared lib [yours is inside project path] is close to your project, put relative path of your shared-lib to your CMakeLists.txt would work.</p>

<p>Some background discussion at the bottom of this bug might help:
<a href=""https://code.google.com/p/android/issues/detail?id=214664&amp;can=8&amp;q=vulkan&amp;colspec=ID%20Status%20Priority%20Owner%20Summary%20Stars%20Reporter%20Opened"" rel=""noreferrer"">https://code.google.com/p/android/issues/detail?id=214664&amp;can=8&amp;q=vulkan&amp;colspec=ID%20Status%20Priority%20Owner%20Summary%20Stars%20Reporter%20Opened</a></p>
",4496512,,,,,2016-10-21 4:50:22,,,,3,,,
Android,30765965,2,,30593059,2015,,7,,"<p>For me, the <a href=""https://github.com/googlesamples/android-credentials/"" rel=""noreferrer"">Smart Lock for Passwords on Android</a> sample project worked fine. You might want to try starting from there and see if that helps. In the sample code, save credential is implemented as:</p>

<p>In <code>onCreate</code>:</p>

<pre><code>    mCredentialsApiClient = new GoogleApiClient.Builder(this)
            .addConnectionCallbacks(this)
            .addOnConnectionFailedListener(this)
            .addApi(Auth.CREDENTIALS_API)
            .build();
</code></pre>

<p>...
In the <code>saveCredetial</code> method:</p>

<pre><code>    final Credential credential = new Credential.Builder(email)
            .setPassword(password)
            .build();

    Auth.CredentialsApi.save(mCredentialsApiClient, credential).setResultCallback(
            new ResultCallback&lt;Status&gt;() {
                @Override
                public void onResult(Status status) {
                    if (status.isSuccess()) {
                        Log.d(TAG, ""SAVE: OK"");
                        showToast(""Credential Saved"");
                        hideProgress();
                    } else {
                        resolveResult(status, RC_SAVE);
                    }
                }
            });
</code></pre>

<p>...
The <code>resolveResult</code> method on the main activity:</p>

<pre><code>private void resolveResult(Status status, int requestCode) {
    Log.d(TAG, ""Resolving: "" + status);
    if (status.hasResolution()) {
        Log.d(TAG, ""STATUS: RESOLVING"");
        try {
            status.startResolutionForResult(MainActivity.this, requestCode);
        } catch (IntentSender.SendIntentException e) {
            Log.e(TAG, ""STATUS: Failed to send resolution."", e);
            hideProgress();
        }
    } else {
        Log.e(TAG, ""STATUS: FAIL"");
        showToast(""Could Not Resolve Error"");
        hideProgress();
    }
}
</code></pre>
",1552344,,1552344,,2015-06-10 19:56:30,2015-06-10 19:56:30,,,,2,,,
Android,51026168,2,,51017541,2018,,7,,"<p>Finally got the solution from this link: <a href=""https://github.com/googlesamples/android-architecture-components/issues/253"" rel=""noreferrer"">https://github.com/googlesamples/android-architecture-components/issues/253</a></p>

<p>As <code>MyFirebaseMessagingService</code> is a <code>Service</code> class, so for injection in <code>Service</code> class, Dagger provides a way through which we can inject dependencies into Service class. Below are the steps to enable injection in service class:</p>

<p><strong>1) Make Application implements HasServiceInjector and inject a DispatchingAndroidInjector for services.</strong></p>

<pre><code>public class App extends Application implements HasActivityInjector, HasServiceInjector {

    @Inject
    DispatchingAndroidInjector&lt;Activity&gt; dispatchingActivityInjector;

    // Add this line
    @Inject
    DispatchingAndroidInjector&lt;Service&gt; dispatchingServiceInjector;

    @Override
    public void onCreate() {
        super.onCreate();
        AppInjector.init(this);
    }

    @Override
    public AndroidInjector&lt;Activity&gt; activityInjector() {
        return dispatchingActivityInjector;
    }

    // override this method after implementing HasServiceInjector
    @Override
    public AndroidInjector&lt;Service&gt; serviceInjector() {
        return dispatchingServiceInjector;
    }

}
</code></pre>

<p><strong>2) Create a new module to perform injection over your services.</strong></p>

<pre><code>@Module
abstract class ServiceBuilderModule {

    // for my case, the service class which needs injection is MyFirebaseMessagingService
    @ContributesAndroidInjector
    abstract MyFirebaseMessagingService contributeMyFirebaseMessagingService();

}
</code></pre>

<p><strong>3) Register your new module in your application's component.</strong></p>

<pre><code>@Component(modules = {
        AndroidSupportInjectionModule.class,
        AppModule.class,
        ActivityBuilderModule.class,
        // Need to define previously created module class here
        ServiceBuilderModule.class
})
@Singleton
public interface AppComponent {
    @Component.Builder
    interface Builder {
        @BindsInstance
        Builder application(App application);
        AppComponent build();
    }
    void inject(App app);
}
</code></pre>

<p><strong>4) And finally, override method onCreate of the service adding AndroidInjection.inject(this).</strong></p>

<pre><code>public class MyFirebaseMessagingService extends FirebaseMessagingService {

    //So now we are able to inject here same as we do in Activity. No need for constructor injection
    @Inject ExampleOneDao exampleOneDao

    // Override this method first
    @Override
    public void onCreate() {
        AndroidInjection.inject(this);
        super.onCreate();
    }

    @Override
    public void onMessageReceived(RemoteMessage remoteMessage) {
        // use your dao here to store remoteMessage data payload into your database, e.g exampleOneDao.save(somethingHere)
    }


}
</code></pre>
",4855911,,4855911,,2018-06-25 16:58:54,2018-06-25 16:58:54,,,,0,,,
Android,34532937,2,,34532451,2015,,7,,"<p>I'm not very familiar with unit testing or <code>Robolectric</code>, but because at time of writing unit tests by me there was no support for API 23 I used that config:</p>

<pre><code>@RunWith(RobolectricGradleTestRunner.class)
@Config(constants = BuildConfig.class, sdk = 21) //this guy
public class MainActivityTest {

    MainActivity_ activity = Robolectric.setupActivity(MainActivity_.class);

}
</code></pre>

<p>So like you see there's a annotation which you can use to your test classes.</p>

<hr>

<h3>EDIT:</h3>

<p>Sorry that I focused only on <code>Robolectric</code> test framework, not main problem.</p>

<p>For annotating instrumentation tests for specific API I would use:</p>

<p><strong>1. Class with @Before annotation</strong></p>

<p>Create a class with @Before annotation, where it would check the API of tested devices. If wrong, the tests would fail in this method. Use <code>fail();</code> method.</p>

<p><strong>2. Use <code>@SdkSuppress</code> annotation</strong></p>

<blockquote>
  <p>Indicates that a specific test or class requires a minimum API Level to execute.</p>
  
  <p>Test(s) will be skipped when executed on android platforms less than specified level.</p>
  
  <p>From: <a href=""http://developer.android.com/reference/android/support/test/filters/SdkSuppress.html"" rel=""noreferrer"">http://developer.android.com/reference/android/support/test/filters/SdkSuppress.html</a></p>
</blockquote>

<p>So if you would set <code>@SdkSuppress(minSdkVersion=23)</code> it would run only on Android Marshmallow devices and  if @<code>@SdkSuppress(minSdkVersion=20)</code> it would run only on higher 5.0 API devices.</p>

<p>Read also: <a href=""http://www.vogella.com/tutorials/AndroidTesting/article.html"" rel=""noreferrer"">http://www.vogella.com/tutorials/AndroidTesting/article.html</a></p>

<p><strong>3. Create your own annotation like <code>@SdkOnly</code></strong></p>

<p>Maybe this article would be useful: <a href=""http://help.testdroid.com/customer/portal/articles/1256803-using-annotations-in-android-instrumentation-tests"" rel=""noreferrer"">http://help.testdroid.com/customer/portal/articles/1256803-using-annotations-in-android-instrumentation-tests</a> </p>

<p><strong>4. Create suites for your specific instrumentation tests</strong></p>

<p>For this purpose you would use <code>@RunWith()</code> and <code>Suites.SuiteClasses()</code> annotations.</p>

<blockquote>
  <p>To organize the execution of your instrumented unit tests, you can
  group a collection of test classes in a test suite class and run these
  tests together. Test suites can be nested; your test suite can group
  other test suites and run all their component test classes together.</p>
  
  <p>A test suite is contained in a test package, similar to the main
  application package. By convention, the test suite package name
  usually ends with the .suite suffix (for example,
  com.example.android.testing.mysample.suite).</p>
  
  <p>To create a test suite for your unit tests, import the JUnit <a href=""http://junit.sourceforge.net/javadoc/org/junit/runner/RunWith.html"" rel=""noreferrer""><code>RunWith</code></a>
  and <a href=""http://junit.sourceforge.net/javadoc/org/junit/runners/Suite.html"" rel=""noreferrer""><code>Suite</code></a> classes. In your test suite, add the <code>@RunWith(Suite.class)</code>
  and the <code>@Suite.SuitClasses()</code> annotations. In the <code>@Suite.SuiteClasses()</code>
  annotation, list the individual test classes or test suites as
  arguments.</p>
  
  <p>The following example shows how you might implement a test suite
  called <code>UnitTestSuite</code> that groups and runs the
  <code>CalculatorInstrumentationTest</code> and <code>CalculatorAddParameterizedTest</code> test
  classes together.</p>

<pre><code>import com.example.android.testing.mysample.CalculatorAddParameterizedTest;
import com.example.android.testing.mysample.CalculatorInstrumentationTest;
import org.junit.runner.RunWith;
import org.junit.runners.Suite;

// Runs all unit tests.
@RunWith(Suite.class)
@Suite.SuiteClasses({CalculatorInstrumentationTest.class,
        CalculatorAddParameterizedTest.class})
public class UnitTestSuite {}
</code></pre>
  
  <p>From: <a href=""http://developer.android.com/training/testing/unit-testing/instrumented-unit-tests.html"" rel=""noreferrer"">http://developer.android.com/training/testing/unit-testing/instrumented-unit-tests.html</a></p>
</blockquote>

<p><strong>5. Helpful resources</strong></p>

<ul>
<li><a href=""http://www.netmite.com/android/mydroid/development/pdk/docs/instrumentation_testing.html"" rel=""noreferrer"">http://www.netmite.com/android/mydroid/development/pdk/docs/instrumentation_testing.html</a></li>
<li><a href=""https://github.com/googlesamples/android-testing-templates/blob/master/AndroidTestingBlueprint"" rel=""noreferrer"">https://github.com/googlesamples/android-testing-templates/blob/master/AndroidTestingBlueprint</a></li>
</ul>

<p>Hope it help</p>
",4730812,,4730812,,2015-12-30 20:40:14,2015-12-30 20:40:14,,,,6,,,
Android,35446475,2,,4062357,2016,,7,,"<p>First of all, technically mkdirs() returning false doesn't mean that it failed, it just meant that it didn't make the directories.
If the directories already exist then mkdirs() will continue to return false.</p>

<p>Secondly, in Android 6, not only do you need:</p>

<pre><code>&lt;uses-permission android:name=""android.permission.WRITE_EXTERNAL_STORAGE""/&gt;
</code></pre>

<p>You also need some equivalent of:</p>

<pre><code>ContextCompat.checkSelfPermission(context, Manifest.permission.WRITE_EXTERNAL_STORAGE) == PackageManager.PERMISSION_GRANTED
</code></pre>

<p>For more info on checking permissions, see:<br>
<a href=""https://github.com/googlesamples/android-RuntimePermissions"" rel=""noreferrer"">https://github.com/googlesamples/android-RuntimePermissions</a></p>
",252308,,,,,2016-02-17 1:47:52,,,,1,,,
Android,29959079,2,,19945732,2015,,7,,"<p>For those that are using the new version 3 of RoboElectric check out this sample from their github on how to use the ResourceLoader.</p>

<p><a href=""https://github.com/robolectric/robolectric/blob/490e5fcb7165bec9ef2ddc1c937af790806bb13d/robolectric/src/test/java/org/robolectric/shadows/ViewStubTest.java#L59"" rel=""nofollow"">https://github.com/robolectric/robolectric/blob/490e5fcb7165bec9ef2ddc1c937af790806bb13d/robolectric/src/test/java/org/robolectric/shadows/ViewStubTest.java#L59</a></p>

<p>Took me way to long to find an example like this!</p>

<p><strong>Edit:</strong></p>

<p>I just wanted to update this thread since a lot of things have changed over the past year. Google has somewhat provided a means of official documenation around testing with Android. You can find it</p>

<p>here: <a href=""https://google.github.io/android-testing-support-library/"" rel=""nofollow"">https://google.github.io/android-testing-support-library/</a></p>

<p>&amp; here: <a href=""https://github.com/googlesamples/android-testing"" rel=""nofollow"">https://github.com/googlesamples/android-testing</a></p>
",1784299,,1784299,,2015-10-16 21:45:25,2015-10-16 21:45:25,,,,1,,,
Android,41052300,2,,32652402,2016,,7,,"<p><a href=""https://github.com/googlesamples/android-architecture"" rel=""noreferrer"">Google examples</a> do it as follows</p>

<pre><code>import static com.google.common.base.Preconditions.checkNotNull;

...

public void doStuff(@NonNull String sParm){
     this.sParm= checkNotNull(s, ""sParm cannot be null!"");
}
</code></pre>
",1989579,,,,,2016-12-09 2:44:25,,,,0,,,
Android,32424365,2,,3290936,2015,,7,,"<p><code>getRunningTasks()</code> is deprecated in Android L. </p>

<p>To obtain app usage statistics you can use <a href=""https://developer.android.com/reference/android/app/usage/UsageStats.html"" rel=""noreferrer"">UsageStats</a> class from <a href=""https://developer.android.com/reference/android/app/usage/package-summary.html"" rel=""noreferrer"">android.app.usage</a> package.</p>

<p>The new App usage statistics API allows app developers to collect statistics related to usage of the applications. This API provides more detailed usage information than the deprecated getRecentTasks() method.</p>

<p>To use this API, you must first declare the <code>android.permission.PACKAGE_USAGE_STATS</code> permission in your manifest. The user must also enable access for this app through <code>Settings &gt; Security &gt; Apps with usage access</code>.</p>

<p><a href=""https://github.com/googlesamples/android-AppUsageStatistics"" rel=""noreferrer"">Here</a> is a basic app example showing how to use App usage statistics API to let users collect statistics related to usage of the applications.</p>
",2602984,,,,,2015-09-06 14:00:54,,,,2,,,
Android,32497145,2,,32496742,2015,,7,,"<pre><code>Prerequisite:
   Android 4.2.2+
   Latest Android SDK
   Google Play Services 7.8+ (Rev. 26.0 in SDK)
   compile 'com.android.support:appcompat-v7:22.0.0'
   compile 'com.google.android.gms:play-services:7.8+'
</code></pre>

<p>Download the code sample code from this <a href=""https://github.com/googlesamples/android-vision"" rel=""nofollow noreferrer"">link</a>,import the barcode-reader project in android studio. Add the google play services 7.8+ &amp; add the mentioned support library in your app gradle. Now modified the BarcodeTrackerFactory.java and MultiTrackerActivity.java class.</p>

<p>BarcodeTrackerFactory.java</p>

<pre><code>import android.app.Activity;
import android.content.Intent;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.RectF;
import android.util.Log;

import com.google.android.gms.samples.vision.face.multitracker.ui.camera.GraphicOverlay;
import com.google.android.gms.vision.MultiProcessor;
import com.google.android.gms.vision.Tracker;
import com.google.android.gms.vision.barcode.Barcode;

/**
 * Factory for creating a tracker and associated graphic to be associated with a new barcode.  The
 * multi-processor uses this factory to create barcode trackers as needed -- one for each barcode.
 */
class BarcodeTrackerFactory implements MultiProcessor.Factory&lt;Barcode&gt; {
    public Activity context;
    private GraphicOverlay mGraphicOverlay;


    BarcodeTrackerFactory(GraphicOverlay graphicOverlay) {
        mGraphicOverlay = graphicOverlay;
    }
    BarcodeTrackerFactory(GraphicOverlay graphicOverlay ,Activity ctx) {
        mGraphicOverlay = graphicOverlay;
        this.context =ctx;
    }
    @Override
    public Tracker&lt;Barcode&gt; create(Barcode barcode) {
        BarcodeGraphic graphic = new BarcodeGraphic(mGraphicOverlay,context);
        return new GraphicTracker&lt;&gt;(mGraphicOverlay, graphic);
    }
}

/**
 * Graphic instance for rendering barcode position, size, and ID within an associated graphic
 * overlay view.
 */
class BarcodeGraphic extends TrackedGraphic&lt;Barcode&gt; {
    private static final int COLOR_CHOICES[] = {
            Color.BLUE,
            Color.CYAN,
            Color.GREEN
    };
    private static int mCurrentColorIndex = 0;

    private Paint mRectPaint;
    private Paint mTextPaint;
    private volatile Barcode mBarcode;
    private Activity context;
private boolean isFirstScandetaction=true;
    BarcodeGraphic(GraphicOverlay overlay ,Activity context) {
        super(overlay);
        this.context=context;
        mCurrentColorIndex = (mCurrentColorIndex + 1) % COLOR_CHOICES.length;
        final int selectedColor = COLOR_CHOICES[mCurrentColorIndex];

        mRectPaint = new Paint();
        mRectPaint.setColor(selectedColor);
        mRectPaint.setStyle(Paint.Style.STROKE);
        mRectPaint.setStrokeWidth(4.0f);

        mTextPaint = new Paint();
        mTextPaint.setColor(selectedColor);
        mTextPaint.setTextSize(36.0f);
    }

    /**
     * Updates the barcode instance from the detection of the most recent frame.  Invalidates the
     * relevant portions of the overlay to trigger a redraw.
     */
    void updateItem(Barcode barcode) {
        mBarcode = barcode;
        if (isFirstScandetaction) {
            postInvalidate();
            if (null != mBarcode) {
                isFirstScandetaction = false;

                Intent intent = new Intent();
                intent.putExtra(""SCAN_RESULT"", barcode.rawValue.toString());
                intent.putExtra(""SCAN_RESULT_FORMAT"",String.valueOf( barcode.format));
                 context.setResult(Activity.RESULT_OK, intent);
                 context.finish();
            }

        }
    }

    /**
     * Draws the barcode annotations for position, size, and raw value on the supplied canvas.
     */
    @Override
    public void draw(Canvas canvas) {
        Barcode barcode = mBarcode;
        if (barcode == null) {
            return;
        }

        // Draws the bounding box around the barcode.
        RectF rect = new RectF(barcode.getBoundingBox());
        rect.left = translateX(rect.left);
        rect.top = translateY(rect.top);
        rect.right = translateX(rect.right);
        rect.bottom = translateY(rect.bottom);
        canvas.drawRect(rect, mRectPaint);

        // Draws a label at the bottom of the barcode indicate the barcode value that was detected.
        canvas.drawText(barcode.rawValue, rect.left, rect.bottom, mTextPaint);

        Log.v(""On Draw"", ""called"");
    }
}
</code></pre>

<p>MultiTrackerActivity.java</p>

<pre><code>import java.io.IOException;

import android.Manifest;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.pm.PackageManager;
import android.os.Bundle;
import android.support.design.widget.Snackbar;
import android.support.v4.app.ActivityCompat;
import android.support.v7.app.AppCompatActivity;
import android.util.Log;
import android.view.View;

import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.GoogleApiAvailability;
import com.google.android.gms.samples.vision.face.multitracker.ui.camera.CameraSourcePreview;
import com.google.android.gms.samples.vision.face.multitracker.ui.camera.GraphicOverlay;
import com.google.android.gms.vision.CameraSource;
import com.google.android.gms.vision.MultiProcessor;
import com.google.android.gms.vision.barcode.BarcodeDetector;

/**
 * Activity for the multi-tracker app.  This app detects faces and barcodes with the rear facing
 * camera, and draws overlay graphics to indicate the position, size, and ID of each face and
 * barcode.
 */
public final class MultiTrackerActivity extends AppCompatActivity {
    private static final String TAG = ""MultiTracker"";

    private static final int RC_HANDLE_GMS = 9001;
    // permission request codes need to be &lt; 256
    private static final int RC_HANDLE_CAMERA_PERM = 2;

    private CameraSource mCameraSource = null;
    private CameraSourcePreview mPreview;
    private GraphicOverlay mGraphicOverlay;

    /**
     * Initializes the UI and creates the detector pipeline.
     */
    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);

        mPreview = (CameraSourcePreview) findViewById(R.id.preview);
        mGraphicOverlay = (GraphicOverlay) findViewById(R.id.faceOverlay);

        // Check for the camera permission before accessing the camera.  If the
        // permission is not granted yet, request permission.
        int rc = ActivityCompat.checkSelfPermission(this, Manifest.permission.CAMERA);
        if (rc == PackageManager.PERMISSION_GRANTED) {
            createCameraSource();
        } else {
            requestCameraPermission();
        }
    }

    /**
     * Handles the requesting of the camera permission.  This includes
     * showing a ""Snackbar"" message of why the permission is needed then
     * sending the request.
     */
    private void requestCameraPermission() {
        Log.w(TAG, ""Camera permission is not granted. Requesting permission"");

        final String[] permissions = new String[]{Manifest.permission.CAMERA};

        if (!ActivityCompat.shouldShowRequestPermissionRationale(this,
                Manifest.permission.CAMERA)) {
            ActivityCompat.requestPermissions(this, permissions, RC_HANDLE_CAMERA_PERM);
            return;
        }

        final Activity thisActivity = this;

        View.OnClickListener listener = new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                ActivityCompat.requestPermissions(thisActivity, permissions,
                        RC_HANDLE_CAMERA_PERM);
            }
        };

        Snackbar.make(mGraphicOverlay, R.string.permission_camera_rationale,
                Snackbar.LENGTH_INDEFINITE)
                .setAction(R.string.ok, listener)
                .show();
    }



    /**
     * Creates and starts the camera.  Note that this uses a higher resolution in comparison
     * to other detection examples to enable the barcode detector to detect small barcodes
     * at long distances.
     */
    private void createCameraSource() {


        Context context = getApplicationContext();

        // A barcode detector is created to track barcodes.  An associated multi-processor instance
        // is set to receive the barcode detection results, track the barcodes, and maintain
        // graphics for each barcode on screen.  The factory is used by the multi-processor to
        // create a separate tracker instance for each barcode.      
        BarcodeDetector barcodeDetector = new BarcodeDetector.Builder(context).build();
        BarcodeTrackerFactory barcodeFactory = new BarcodeTrackerFactory(mGraphicOverlay,this);
        barcodeDetector.setProcessor(
                new MultiProcessor.Builder&lt;&gt;(barcodeFactory).build());


        if (!barcodeDetector.isOperational()) {
            // Note: The first time that an app using the barcode or face API is installed on a
            // device, GMS will download a native libraries to the device in order to do detection.
            // Usually this completes before the app is run for the first time.  But if that
            // download has not yet completed, then the above call will not detect any barcodes
            // and/or faces.
            //
            // isOperational() can be used to check if the required native libraries are currently
            // available.  The detectors will automatically become operational once the library
            // downloads complete on device.
            Log.w(TAG, ""Detector dependencies are not yet available."");
        }

        // Creates and starts the camera.  Note that this uses a higher resolution in comparison
        // to other detection examples to enable the barcode detector to detect small barcodes
        // at long distances.
        mCameraSource = new CameraSource.Builder(getApplicationContext(), barcodeDetector)
                .setFacing(CameraSource.CAMERA_FACING_BACK)
                .setRequestedPreviewSize(1600, 1024)
                .setRequestedFps(15.0f)
                .build();
    }

    /**
     * Restarts the camera.
     */
    @Override
    protected void onResume() {
        super.onResume();

        startCameraSource();
    }

    /**
     * Stops the camera.
     */
    @Override
    protected void onPause() {
        super.onPause();
        mPreview.stop();
    }

    /**
     * Releases the resources associated with the camera source, the associated detectors, and the
     * rest of the processing pipeline.
     */
    @Override
    protected void onDestroy() {
        super.onDestroy();
        if (mCameraSource != null) {
            mCameraSource.release();
        }
    }


    /**
     * Callback for the result from requesting permissions. This method
     * is invoked for every call on {@link #requestPermissions(String[], int)}.
     * &lt;p&gt;
     * &lt;strong&gt;Note:&lt;/strong&gt; It is possible that the permissions request interaction
     * with the user is interrupted. In this case you will receive empty permissions
     * and results arrays which should be treated as a cancellation.
     * &lt;/p&gt;
     *
     * @param requestCode  The request code passed in {@link #requestPermissions(String[], int)}.
     * @param permissions  The requested permissions. Never null.
     * @param grantResults The grant results for the corresponding permissions
     *                     which is either {@link PackageManager#PERMISSION_GRANTED}
     *                     or {@link PackageManager#PERMISSION_DENIED}. Never null.
     * @see #requestPermissions(String[], int)
     */
    @Override
    public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) {
        if (requestCode != RC_HANDLE_CAMERA_PERM) {
            Log.d(TAG, ""Got unexpected permission result: "" + requestCode);
            super.onRequestPermissionsResult(requestCode, permissions, grantResults);
            return;
        }

        if (grantResults.length != 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {
            Log.d(TAG, ""Camera permission granted - initialize the camera source"");
            // we have permission, so create the camerasource
            createCameraSource();
            return;
        }

        Log.e(TAG, ""Permission not granted: results len = "" + grantResults.length +
                "" Result code = "" + (grantResults.length &gt; 0 ? grantResults[0] : ""(empty)""));

        DialogInterface.OnClickListener listener = new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                finish();
            }
        };

        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle(""Multitracker sample"")
                .setMessage(R.string.no_camera_permission)
                .setPositiveButton(R.string.ok, listener)
                .show();
    }
    /**
     * Starts or restarts the camera source, if it exists.  If the camera source doesn't exist yet
     * (e.g., because onResume was called before the camera source was created), this will be called
     * again when the camera source is created.
     */
    private void startCameraSource() {

        // check that the device has play services available.
        int code = GoogleApiAvailability.getInstance().isGooglePlayServicesAvailable(
                getApplicationContext());
        if (code != ConnectionResult.SUCCESS) {
            Dialog dlg =
                    GoogleApiAvailability.getInstance().getErrorDialog(this, code, RC_HANDLE_GMS);
            dlg.show();
        }

        if (mCameraSource != null) {
            try {
                mPreview.start(mCameraSource, mGraphicOverlay);
            } catch (IOException e) {
                Log.e(TAG, ""Unable to start camera source."", e);
                mCameraSource.release();
                mCameraSource = null;
            }
        }
    }
}
</code></pre>

<p>Now to call the scan code and recieve the result-
BarCodeReader.java</p>

<pre><code>import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class BarCodeReader extends FragmentActivity {

    String QR_CODE = ""256"";
    private Button btnscan;

    @Override
    protected void onCreate(Bundle bundle) {
        super.onCreate(bundle);
        setContentView(R.layout.scanlayout);
        btnscan = (Button) findViewById(R.id.scanbtn);

        btnscan.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                Intent intent = new Intent(BarCodeReader.this,
                        MultiTrackerActivity.class);

                startActivityForResult(intent, 0);
            }
        });
    }

    public void onActivityResult(int requestCode, int resultCode, Intent intent) {
        if (requestCode == 0) {
            if (resultCode == RESULT_OK) {

                String contents = intent.getStringExtra(""SCAN_RESULT"");
                String format = intent.getStringExtra(""SCAN_RESULT_FORMAT"");
                if (format.equals(QR_CODE)) {
                    Toast.makeText(
                            BarCodeReader.this,
                            ""content is : "" + contents + "" \n Format is:    ""
                                    + format, Toast.LENGTH_LONG).show();
                } else {
                    Toast.makeText(BarCodeReader.this, ""wrong format"",
                            Toast.LENGTH_LONG).show();
                }

            } else if (resultCode == RESULT_CANCELED) {
                // To Handle cancel
                Log.i(""App"", ""Scan unsuccessful"");
            }
        }
    }

}
</code></pre>
",3912847,,3912847,,2018-07-05 5:52:44,2018-07-05 5:52:44,,,,0,,,
Android,50928711,2,,44697418,2018,,7,,"<p>I tried to use the RoomDatabase.Callback as suggested by Arnav Rao, but to use a callback you cannot use the DAO as the callback is created before the database has been built. You could use db.insert and content values, but I didn't think that would have been correct. So after looking into it a bit more - took me ages lol - but I actually found the answer when going through the samples provided by Google.</p>

<p><a href=""https://github.com/googlesamples/android-architecture-components/blob/master/PersistenceContentProviderSample/app/src/main/java/com/example/android/contentprovidersample/data/SampleDatabase.java"" rel=""noreferrer"">https://github.com/googlesamples/android-architecture-components/blob/master/PersistenceContentProviderSample/app/src/main/java/com/example/android/contentprovidersample/data/SampleDatabase.java</a></p>

<p>See line 52 and the method on line 71 - In there you can see after the build of the database instance, the next line calls a method which checks if there are any records in the database (using the DAO) and then if its empty it inserts the initial data (again using the DAO).</p>

<p>Hope this helps anyone else who was stuck :)</p>
",1017607,,,,,2018-06-19 12:40:01,,,,1,,,
Android,31253089,2,,22756238,2015,,7,,"<p>Theres an <a href=""https://github.com/googlesamples/android-testing/blob/master/integration/ServiceTestRuleSample/app/src/androidTest/java/com/example/android/testing/ServiceTestRuleSample/LocalServiceTest.java"" rel=""nofollow noreferrer"">example using JUnit 4</a>:</p>

<p>Service:</p>

<pre><code>/**
 * {@link Service} that generates random numbers.
 * &lt;p&gt;
 * A seed for the random number generator can be set via the {@link Intent} passed to
 * {@link #onBind(Intent)}.
 */
public class LocalService extends Service {
    // Used as a key for the Intent.
    public static final String SEED_KEY = ""SEED_KEY"";

    // Binder given to clients
    private final IBinder mBinder = new LocalBinder();

    // Random number generator
    private Random mGenerator = new Random();

    private long mSeed;

    @Override
    public IBinder onBind(Intent intent) {
        // If the Intent comes with a seed for the number generator, apply it.
        if (intent.hasExtra(SEED_KEY)) {
            mSeed = intent.getLongExtra(SEED_KEY, 0);
            mGenerator.setSeed(mSeed);
        }
        return mBinder;
    }

    public class LocalBinder extends Binder {

        public LocalService getService() {
            // Return this instance of LocalService so clients can call public methods.
            return LocalService.this;
        }
    }

    /**
     * Returns a random integer in [0, 100).
     */
    public int getRandomInt() {
        return mGenerator.nextInt(100);
    }
}
</code></pre>

<p>Test:</p>

<pre><code>public class LocalServiceTest {
    @Rule
    public final ServiceTestRule mServiceRule = new ServiceTestRule();

    @Test
    public void testWithBoundService() throws TimeoutException {
        // Create the service Intent.
        Intent serviceIntent =
                new Intent(InstrumentationRegistry.getTargetContext(), LocalService.class);

        // Data can be passed to the service via the Intent.
        serviceIntent.putExtra(LocalService.SEED_KEY, 42L);

        // Bind the service and grab a reference to the binder.
        IBinder binder = mServiceRule.bindService(serviceIntent);

        // Get the reference to the service, or you can call public methods on the binder directly.
        LocalService service = ((LocalService.LocalBinder) binder).getService();

        // Verify that the service is working correctly.
        assertThat(service.getRandomInt(), is(any(Integer.class)));
    }
}
</code></pre>
",273119,,273119,,2017-03-26 23:01:12,2017-03-26 23:01:12,,,,4,,,
Android,38268627,2,,37767511,2016,,7,,"<p>My team encountered a similar problem when we were developing a plugin based on the Camera2 API, but it only affected a Samsung Galaxy S7 (we also have an S6 for testing that didn't exhibit this behaviour).</p>

<p>The issue appeared to be caused by a bug in Samsung's camera firmware and was triggered when the device came out of Deep Sleep (the ultra-low power mode in Android 6.0 Marshmallow). After resuming from Deep Sleep, the first frame of any video captured and encoded using the Camera2 MediaRecorder has an extraordinarily long frame duration - sometimes as long as or longer than the total duration of the video itself.</p>

<p>Consequently, when playing back, the first frame is displayed for this long duration while audio continues to play. Once the first frame has finished displaying, the rest of the frames play back as normal.</p>

<p>We found other people with a similar problem <a href=""https://github.com/googlesamples/android-Camera2Video/issues/24"">discussing the issue on GitHub</a></p>

<blockquote>
  <p>The issue is a deep sleep problem on some devices running Marshmallow. It appears to be CPU related as an S7 on Verizon doesn't have the issue, but an S7 on AT&amp;T does have the issue. I've seen this on an S6 Verizon phone when it updated to Marshmallow.</p>
  
  <p>In order to replicate, reboot a device while connected to USB. Run the sample. All should be ok. Then, disconnect the device, let it go into deep sleep (screen off, no movement for 5? minutes), and try again. The issue will appear once the device has gone into deep sleep.</p>
</blockquote>

<p>We ended up using <a href=""https://github.com/googlesamples/android-Camera2Video/issues/24#issuecomment-223698486"">cybaker's proposed workaround</a>; that is, when the video file is created, inspect the duration of the first frame of the video. If it appears to be incorrect, re-encode the video with sensible frame durations:</p>

<pre class=""lang-java prettyprint-override""><code>DataSource channel = new FileDataSourceImpl(rawFile);
IsoFile isoFile = new IsoFile(channel);

List&lt;TrackBox&gt; trackBoxes = isoFile.getMovieBox().getBoxes(TrackBox.class);
boolean sampleError = false;
for (TrackBox trackBox : trackBoxes) {
    TimeToSampleBox.Entry firstEntry = trackBox.getMediaBox().getMediaInformationBox().getSampleTableBox().getTimeToSampleBox().getEntries().get(0);

    // Detect if first sample is a problem and fix it in isoFile
    // This is a hack. The audio deltas are 1024 for my files, and video deltas about 3000
    // 10000 seems sufficient since for 30 fps the normal delta is about 3000
    if(firstEntry.getDelta() &gt; 10000) {
        sampleError = true;
        firstEntry.setDelta(3000);
    }
}

if(sampleError) {
    Movie movie = new Movie();
    for (TrackBox trackBox : trackBoxes) {
            movie.addTrack(new Mp4TrackImpl(channel.toString() + ""["" + trackBox.getTrackHeaderBox().getTrackId() + ""]"" , trackBox));
    }
    movie.setMatrix(isoFile.getMovieBox().getMovieHeaderBox().getMatrix());
    Container out = new DefaultMp4Builder().build(movie);

    //delete file first!
    FileChannel fc = new RandomAccessFile(rawFile.getName(), ""rw"").getChannel();
    out.writeContainer(fc);
    fc.close();
    Log.d(TAG, ""Finished correcting raw video"");
}
</code></pre>

<p>Hope this points you in the right direction!</p>
",4538608,,4538608,,2016-07-08 15:20:03,2016-07-08 15:20:03,,,,3,,,
Android,31531426,2,,31471146,2015,,7,,"<p>Google had revised the camera API from in API version 21, henceforth we have to adopt new camera2 package and has to be adhered in cases where camera functionalities comes into picture. Here is the link to sample code published by google which uses surface view implementation and it works flawless in Android 5.0. I believe it solves a bit of mystery.</p>

<p><a href=""https://github.com/googlesamples/android-Camera2Basic"">https://github.com/googlesamples/android-Camera2Basic</a></p>
",4571119,,,,,2015-07-21 6:00:51,,,,2,,,
Android,43975716,2,,43975602,2017,,7,,"<p>When you start up the fingerprint reader, you pass in a <a href=""https://developer.android.com/reference/android/os/CancellationSignal.html"" rel=""noreferrer"">CancellationSignal</a>.</p>

<p>When you want to cancel (maybe in the OnPause on your Activity), just call the <code>cancel</code> method of this object.</p>

<p>There is a complete sample <a href=""https://github.com/googlesamples/android-FingerprintDialog"" rel=""noreferrer"">here</a>.</p>
",1027277,,,,,2017-05-15 9:22:55,,,,1,,,
Android,31137678,2,,31136527,2015,,7,,"<p>You should go for use AutoSuggestEditext and give background effect like google have and put left and right image by <code>Relativelayout</code></p>

<p>Here is example for Auto Suggest for place search .</p>

<p><a href=""https://github.com/googlesamples/android-play-places/blob/master/PlaceCompleteFragment/Application/src/main/java/com/example/google/playservices/placecompletefragment/MainActivity.java"" rel=""noreferrer"">Auto Place complete</a></p>

<p>Hope from it you will understand.</p>
",596725,,596725,,2015-12-28 5:51:14,2015-12-28 5:51:14,,,,2,,,
Android,36780820,2,,36774586,2016,,7,,"<p>You have to stub all external intents to be able to proceed with your test cases. Put this peace of code in your test class:</p>

<pre><code>@Before
public void stubAllExternalIntents() {
    // By default Espresso Intents does not stub any Intents. Stubbing needs to be setup before
    // every test run. In this case all external Intents will be blocked.
    intending(not(isInternal())).respondWith(new ActivityResult(Activity.RESULT_OK, null));
}
</code></pre>

<p>More here - <a href=""https://github.com/googlesamples/android-testing/blob/master/ui/espresso/IntentsBasicSample/app/src/androidTest/java/com/example/android/testing/espresso/BasicSample/DialerActivityTest.java"" rel=""noreferrer"">IntentsBasicSample</a>.</p>
",2980933,,,,,2016-04-21 21:29:13,,,,3,,,
Android,35874521,2,,35869383,2016,,7,,"<p>As mentioned in the <a href=""https://medium.com/google-developers/mediabrowserservicecompat-and-the-modern-media-playback-app-7959a5196d90#70fe"" rel=""noreferrer"">MediaBrowserService and the modern media playback app blog</a>:</p>

<blockquote>
  <p>this wraps the API for <a href=""http://developer.android.com/guide/components/bound-services.html"" rel=""noreferrer"">bound services</a>, which makes sense since were trying to connect to a Service.</p>
</blockquote>

<p>The lifecycle of a bound service is tied directly to who binds to the service:</p>

<blockquote>
  <p>When the last client unbinds from the service, the system destroys the service (unless the service was also started by startService()).</p>
</blockquote>

<p>In your case, the service will no longer have anyone bound to it between onDestroy() and onCreate().</p>

<p>The example of <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer/blob/master/mobile/src/main/java/com/example/android/uamp/MusicService.java"" rel=""noreferrer"">Universal Android Music Player's MusicService</a> is to:</p>

<ul>
<li>Call startService(new Intent(this, MediaPlaybackService.class) when playback begins</li>
<li>Call stopSelf() when playback is stopped</li>
</ul>

<p>This ensures that changes in the bound clients do not cause the Service to be destroyed mid-playback.</p>
",1676363,,,,,2016-03-08 17:55:05,,,,1,,,
Android,36822181,2,,36820668,2016,,7,,"<p>Unfortunately you can't request the <code>PACKAGE_USAGE_STATS</code> at runtime like you do with a dangerous permission. The user need to manually grant the permission through the Settings application as explained in the <code>UsageStatsManager</code> <a href=""http://developer.android.com/reference/android/app/usage/UsageStatsManager.html"" rel=""noreferrer"">documentation</a>:</p>

<blockquote>
  <p>This API requires the permission
  android.permission.PACKAGE_USAGE_STATS, which is a system-level
  permission and will not be granted to third-party apps. However,
  declaring the permission implies intention to use the API and the user
  of the device can grant permission through the Settings application.</p>
</blockquote>

<p>You can directly open the <code>Apps with usage access</code> activity with this code:</p>

<pre><code>startActivity(new Intent(Settings.ACTION_USAGE_ACCESS_SETTINGS));
</code></pre>

<p><a href=""https://github.com/googlesamples/android-AppUsageStatistics"" rel=""noreferrer"">Here</a> you can find an example of a basic app that shows how to use App usage statistics API.</p>
",2837959,,,,,2016-04-24 10:55:36,,,,1,,,
Android,48680929,2,,39022845,2018,,8,,"<p>After looking at MrOnyszko answer i followed a slightly different approach: </p>

<p>In the <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""noreferrer"">Camera2Basic</a> Tutorial a lens facing direction is used to set up the right camera, so i changed this direction before closing and reopening the camera. </p>

<pre><code>private void switchCamera() {
    if (mCameraLensFacingDirection == CameraCharacteristics.LENS_FACING_BACK) {
        mCameraLensFacingDirection = CameraCharacteristics.LENS_FACING_FRONT;
        closeCamera();
        reopenCamera();

    } else if (mCameraLensFacingDirection == CameraCharacteristics.LENS_FACING_FRONT) {
        mCameraLensFacingDirection = CameraCharacteristics.LENS_FACING_BACK;
        closeCamera();
        reopenCamera();
    }
}

private void reopenCamera() {
    if (mTextureView.isAvailable()) {
        openCamera(mTextureView.getWidth(), mTextureView.getHeight());
    } else {
        mTextureView.setSurfaceTextureListener(mSurfaceTextureListener);
    }
}


private void setUpCameraOutputs(int width, int height) {
    Activity activity = getActivity();
    CameraManager manager = (CameraManager) activity.getSystemService(Context.CAMERA_SERVICE);
    try {
        for (String cameraId : manager.getCameraIdList()) {
            CameraCharacteristics characteristics
                    = manager.getCameraCharacteristics(cameraId);

            Integer facing = characteristics.get(CameraCharacteristics.LENS_FACING);
            if (facing != null &amp;&amp; facing != mCameraLensFacingDirection) {
                continue;
            }
            ...
</code></pre>
",8820628,,8820628,,2018-02-08 8:39:38,2018-02-08 8:39:38,,,,1,,,
Android,38074131,2,,38072991,2016,,8,,"<blockquote>
  <p>When GPS is off and I set priority to HIGH, does that mean that GPS will be automatically turned on, or not? </p>
</blockquote>

<p>No, it will not be turned on automatically. But if you use SettingsApi, will prompt a dialog to user and gives information that GPS is must be turned on. If user accepts it, the gps will be active automatically. Check the <a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationSettings"" rel=""nofollow noreferrer"">SettingsApi</a> </p>

<blockquote>
  <p>How can I know what Fused provider is using (is it a GPS or a network provider)</p>
</blockquote>

<p>If you use fused provider api with SettingsApi properly. It will make adequate the required settings for current location request.</p>

<blockquote>
  <p>Is Fused provider really the best choice for android location? Are there any negative points about it?</p>
</blockquote>

<p>In my opinion, before fused provider you must deal with directly providers(Gps, network) But fused just asks you, ""how accurate locations you wanna receive ?""</p>
",1281180,,848677,,2017-08-20 19:03:33,2017-08-20 19:03:33,,,,2,,,
Android,47709735,2,,32711975,2017,,8,,"<p>Thanks to @arin 's answer, I made an improved version.</p>

<p>His code is basically working, but there are 2 problems:<br>
1) Readability - actually I don't know what is going on calculating the <code>Rect zoom</code><br>
2) In my Android 7.1.1 device, the preview will freeze if the zoom is big to a certain extent. Since I solved this problem with the code below, I am pretty sure it is because the original code allowed over-zooming beyond camera's maximum zoom ratio.<br>
(In fact, I don't know why he needs to apply *10 on the ratio returned by <code>CameraCharacteristics</code>)</p>

<p>Below are my codes: (I do this all inside my custom <code>TextureView</code>, which also stores my Camera2 objects and logics):</p>

<p>Related Member variables:</p>

<pre><code>protected CameraCharacteristics cameraCharacteristics;
protected CameraCaptureSession captureSession;
protected CaptureRequest.Builder previewRequestBuilder;

//Zooming
protected float fingerSpacing = 0;
protected float zoomLevel = 1f;
protected float maximumZoomLevel;
protected Rect zoom;
</code></pre>

<p>Right after you get <code>CameraCharacteristics</code> from <code>CameraManager</code>, probably in some initial setup:</p>

<pre><code>maximumZoomLevel = cameraCharacteristics.get(CameraCharacteristics.SCALER_AVAILABLE_MAX_DIGITAL_ZOOM);
</code></pre>

<p>override <code>onTouchEvent</code>:</p>

<pre><code>@Override
public boolean onTouchEvent(MotionEvent event) {
    try {
        Rect rect = cameraCharacteristics.get(CameraCharacteristics.SENSOR_INFO_ACTIVE_ARRAY_SIZE);
        if (rect == null) return false;
        float currentFingerSpacing;

        if (event.getPointerCount() == 2) { //Multi touch.
            currentFingerSpacing = getFingerSpacing(event);
            float delta = 0.05f; //Control this value to control the zooming sensibility
            if (fingerSpacing != 0) {
                if (currentFingerSpacing &gt; fingerSpacing) { //Don't over zoom-in
                    if ((maximumZoomLevel - zoomLevel) &lt;= delta) {
                        delta = maximumZoomLevel - zoomLevel;
                    }
                    zoomLevel = zoomLevel + delta;
                } else if (currentFingerSpacing &lt; fingerSpacing){ //Don't over zoom-out
                    if ((zoomLevel - delta) &lt; 1f) {
                        delta = zoomLevel - 1f;
                    }
                    zoomLevel = zoomLevel - delta;
                }
                float ratio = (float) 1 / zoomLevel; //This ratio is the ratio of cropped Rect to Camera's original(Maximum) Rect
                //croppedWidth and croppedHeight are the pixels cropped away, not pixels after cropped
                int croppedWidth = rect.width() - Math.round((float)rect.width() * ratio);
                int croppedHeight = rect.height() - Math.round((float)rect.height() * ratio);
                //Finally, zoom represents the zoomed visible area
                zoom = new Rect(croppedWidth/2, croppedHeight/2,
                        rect.width() - croppedWidth/2, rect.height() - croppedHeight/2);
                previewRequestBuilder.set(CaptureRequest.SCALER_CROP_REGION, zoom);
            }
            fingerSpacing = currentFingerSpacing;
        } else { //Single touch point, needs to return true in order to detect one more touch point
            return true;
        }
        captureSession.setRepeatingRequest(previewRequestBuilder.build(), captureCallback, null);
        return true;
    } catch (final Exception e) {
        //Error handling up to you
        return true;
    }
}
</code></pre>

<p>And the <code>getFingerSpacing</code> method:</p>

<pre><code>private float getFingerSpacing(MotionEvent event) {
    float x = event.getX(0) - event.getX(1);
    float y = event.getY(0) - event.getY(1);
    return (float) Math.sqrt(x * x + y * y);
}
</code></pre>

<p>Finally don't forget to set the crop region when you actually take the photo. My code is base on this <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""noreferrer"">Camera2Basic</a>, I do this inside the <code>captureStillPicture()</code> method:</p>

<pre><code>        //Zoom
        if (zoom != null) {
            captureBuilder.set(CaptureRequest.SCALER_CROP_REGION, zoom);
        }
</code></pre>
",7870874,,7870874,,2017-12-08 7:54:23,2017-12-08 7:54:23,,,,4,,,
Android,32518639,2,,32516539,2015,,8,,"<p>You can only capture to a surface that is configured for the session, so you should prepare the surface before the session is created.</p>

<p>In the official document:</p>

<blockquote>
  <p><strong>IllegalArgumentException</strong>  if the request targets no Surfaces or
  Surfaces that are <strong>not configured as outputs for this session</strong>; ...</p>
</blockquote>

<p>Just like there, you need to have the surface <code>mImageReader.getSurface()</code> ready when you create the session</p>

<pre><code>           mCameraDevice.createCaptureSession(Arrays.asList(surface, mImageReader.getSurface()),
                new CameraCaptureSession.StateCallback() {
                    ...
                }, null);
</code></pre>

<p>official sample:</p>

<p><a href=""https://github.com/googlesamples/android-Camera2Basic/tree/master/Application/src/main/java/com/example/android/camera2basic"">https://github.com/googlesamples/android-Camera2Basic/tree/master/Application/src/main/java/com/example/android/camera2basic</a></p>
",5231999,,,,,2015-09-11 8:10:18,,,,4,,,
Android,36337019,2,,31226658,2016,,8,,"<p>Google resolve this issue with an example posted on the google-sample github projet.</p>

<p>Create a view that extends the original SwipeRefreshLayout :</p>

<pre><code>/*
 * Copyright 2014 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the ""License"");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.example.android.swiperefreshmultipleviews;

import android.content.Context;
import android.support.v4.view.ViewCompat;
import android.support.v4.widget.SwipeRefreshLayout;
import android.util.AttributeSet;
import android.view.View;
import android.widget.AbsListView;

/**
 * A descendant of {@link android.support.v4.widget.SwipeRefreshLayout} which supports multiple
 * child views triggering a refresh gesture. You set the views which can trigger the gesture via
 * {@link #setSwipeableChildren(int...)}, providing it the child ids.
 */
public class MultiSwipeRefreshLayout extends SwipeRefreshLayout {

    private View[] mSwipeableChildren;

    public MultiSwipeRefreshLayout(Context context) {
        super(context);
    }

    public MultiSwipeRefreshLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    /**
     * Set the children which can trigger a refresh by swiping down when they are visible. These
     * views need to be a descendant of this view.
     */
    public void setSwipeableChildren(final int... ids) {
        assert ids != null;

        // Iterate through the ids and find the Views
        mSwipeableChildren = new View[ids.length];
        for (int i = 0; i &lt; ids.length; i++) {
            mSwipeableChildren[i] = findViewById(ids[i]);
        }
    }

    // BEGIN_INCLUDE(can_child_scroll_up)
    /**
     * This method controls when the swipe-to-refresh gesture is triggered. By returning false here
     * we are signifying that the view is in a state where a refresh gesture can start.
     *
     * &lt;p&gt;As {@link android.support.v4.widget.SwipeRefreshLayout} only supports one direct child by
     * default, we need to manually iterate through our swipeable children to see if any are in a
     * state to trigger the gesture. If so we return false to start the gesture.
     */
    @Override
    public boolean canChildScrollUp() {
        if (mSwipeableChildren != null &amp;&amp; mSwipeableChildren.length &gt; 0) {
            // Iterate through the scrollable children and check if any of them can not scroll up
            for (View view : mSwipeableChildren) {
                if (view != null &amp;&amp; view.isShown() &amp;&amp; !canViewScrollUp(view)) {
                    // If the view is shown, and can not scroll upwards, return false and start the
                    // gesture.
                    return false;
                }
            }
        }
        return true;
    }
    // END_INCLUDE(can_child_scroll_up)

    // BEGIN_INCLUDE(can_view_scroll_up)
    /**
     * Utility method to check whether a {@link View} can scroll up from it's current position.
     * Handles platform version differences, providing backwards compatible functionality where
     * needed.
     */
    private static boolean canViewScrollUp(View view) {
        if (android.os.Build.VERSION.SDK_INT &gt;= 14) {
            // For ICS and above we can call canScrollVertically() to determine this
            return ViewCompat.canScrollVertically(view, -1);
        } else {
            if (view instanceof AbsListView) {
                // Pre-ICS we need to manually check the first visible item and the child view's top
                // value
                final AbsListView listView = (AbsListView) view;
                return listView.getChildCount() &gt; 0 &amp;&amp;
                        (listView.getFirstVisiblePosition() &gt; 0
                                || listView.getChildAt(0).getTop() &lt; listView.getPaddingTop());
            } else {
                // For all other view types we just check the getScrollY() value
                return view.getScrollY() &gt; 0;
            }
        }
    }
    // END_INCLUDE(can_view_scroll_up)
}
</code></pre>

<p>Use this view in your xml layout :</p>

<pre><code>&lt;com.example.android.swiperefreshmultipleviews.MultiSwipeRefreshLayout
      xmlns:android=""http://schemas.android.com/apk/res/android""
      android:id=""@+id/swiperefresh""
      android:layout_width=""match_parent""
      android:layout_height=""match_parent""&gt;

    &lt;!-- your code --&gt;

&lt;/com.example.android.swiperefreshmultipleviews.MultiSwipeRefreshLayout&gt;
</code></pre>

<p>And in your activity or fragment, you can use this component with :</p>

<pre><code>mSwipeRefreshLayout = (MultiSwipeRefreshLayout) view.findViewById(R.id.swiperefresh);
mSwipeRefreshLayout.setSwipeableChildren(android.R.id.list, android.R.id.empty);
</code></pre>

<p>android.R.id.list and android.R.id.empty is the ids for your list or recycler view. The view work perfectly with two list with same ids.</p>

<p>You can see real example at the <a href=""https://github.com/googlesamples/android-SwipeRefreshMultipleViews"" rel=""noreferrer"">google-sample github project</a>.</p>
",3095612,,,,,2016-03-31 14:58:08,,,,0,,,
Android,49000792,2,,47515997,2018,,8,,"<p>In <a href=""https://developer.android.com/topic/libraries/architecture/viewmodel.html"" rel=""noreferrer"">ViewModel</a> documentation</p>

<blockquote>
  <p>However ViewModel objects must never observe changes to lifecycle-aware observables, such as LiveData objects.</p>
</blockquote>

<p>Another way is for the data to implement RxJava rather than LiveData, then it won't have the benefit of being lifecycle-aware.</p>

<p>In google sample of <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvvm-live-kotlin/"" rel=""noreferrer"">todo-mvvm-live-kotlin</a>, it uses a callback without LiveData in ViewModel.  </p>

<p>I am guessing if you want to comply with the whole idea of being lifecycle-ware, we need to move observation code in Activity/Fragment. Else, we can use callback or RxJava in ViewModel.</p>

<p>Another compromise is implement MediatorLiveData (or Transformations) and observe (put your logic here) in ViewModel. Notice MediatorLiveData observer won't trigger (same as Transformations) unless it's observed in Activity/Fragment. What we do is we put a blank observe in Activity/Fragment, where the real work is actually done in ViewModel.</p>

<pre><code>// ViewModel
fun start(id : Long) : LiveData&lt;User&gt;? {
    val liveData = MediatorLiveData&lt;User&gt;()
    liveData.addSource(dataSource.getById(id), Observer {
        if (it != null) {
            // put your logic here
        }
    })
}

// Activity/Fragment
viewModel.start(id)?.observe(this, Observer {
    // blank observe here
})
</code></pre>

<p>PS: I read <a href=""https://medium.com/google-developers/viewmodels-and-livedata-patterns-antipatterns-21efaef74a54"" rel=""noreferrer"">ViewModels and LiveData: Patterns + AntiPatterns</a> which suggested that Transformations. I don't think it work unless the LiveData is observed (which probably require it to be done at Activity/Fragment).</p>
",561259,,306876,,2018-06-27 18:17:10,2018-06-27 18:17:10,,,,2,,,
Android,51458989,2,,51450215,2018,,8,,"<p>Ok Finally found the problem and how to solve. LiveData is not designed for single events. For that reason there is a couple of ways to fix it or handle it, this two links were useful for me:</p>

<p><a href=""https://medium.com/google-developers/livedata-with-snackbar-navigation-and-other-events-the-singleliveevent-case-ac2622673150"" rel=""noreferrer"">Jose Alcrreca's post dealing with this problem</a></p>

<p><a href=""https://gist.github.com/JoseAlcerreca/e0bba240d9b3cffa258777f12e5c0ae9"" rel=""noreferrer"">Jose Alcrreca's EventObserver</a></p>

<p><a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java"" rel=""noreferrer"">Jose Alcrreca's SingleLiveEvent class</a></p>

<p>Basically:</p>

<p>In ViewModel:</p>

<p><code>var eventLiveData: MutableLiveData&lt;Event&lt;ErrorResponse&gt;&gt; = MutableLiveData()</code></p>

<p>and In Activity or Fragment:</p>

<pre><code>viewModel.eventLiveData.observe(this, EventObserver {
     it?.let {
          shortToast(it.message)
     }
})
</code></pre>
",682216,,682216,,2018-07-21 19:16:19,2018-07-21 19:16:19,,,,3,,,
Android,48417998,2,,48168544,2018,,8,,"<p>This is primarily a design problem. As you stated that there is already a large amount of code in the project, one approach would be to analyse the UML diagram for the entire project structure. The goal is to identify regions of the architecture where the interactions are closely coupled between a few classes, groups may also be formed based on which classes have the same external dependencies. </p>

<p>With this approach, you reduce the complexity of the large project, de-coupling classes from external dependencies which they do not use in the large project. The invididual modules which you split the project into will have faster build times. The modules which you split the project into can then be referenced in the main project as dependencies. The additional benefit is that only the modified modules in the main project will be rebuilt each time you make changes.</p>

<p><a href=""https://stackoverflow.com/questions/17123384/how-to-generate-class-diagram-uml-on-android-studio/36823007#36823007"">This Stack Overflow post</a> discusses many UML diagram generator plugins for Android Studio. <strong>Code Iris</strong> is a good option that you can install via the Android Studio plugin menu. As an example, here is the output from Code Iris on a <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker"" rel=""noreferrer"">sample <code>FaceTracker</code> Android application</a> (click on the diagram to enlarge):</p>

<p><a href=""https://i.stack.imgur.com/3ipeo.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/3ipeo.png"" alt=""enter image description here""></a></p>

<p>The diagram here shows the grouping of packages and projects. You can see that different projects are split into separate green boxes, within these boxes, are boxes for the packages and then finally classes and interactions. By analysing the UML, you can first identify how to best group your classes and create individual projects. Once you split the main project into modules, you can then use Code Iris again to visualise interactions after changes have been made to the structure. </p>
",1897312,,1897312,,2018-01-24 11:58:04,2018-01-24 11:58:04,,,,0,,,
Android,41298218,2,,41291297,2016,,8,,"<p>There is some confusion about the role of Components and Modules in Dagger 2 in an Android app. </p>

<ol>
<li><p><strong>Components</strong> are for grouping similar lifecycles together. </p></li>
<li><p><strong>Modules</strong> can be organized along functional lines and for testing (as per the <a href=""https://google.github.io/dagger/testing.html"" rel=""nofollow noreferrer"">official instructions for testing</a>). </p></li>
</ol>

<p>Some of the best examples of this are in the <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">Google Android Architecture Blueprints Github repo</a>. If you examine the source code there, you can see there is one single app-scoped Component (with a lifecycle of the duration of the whole app) and then separate Activity-scoped Components for the Activity and Fragment corresponding to a given functionality in a project. The Activity-scoped Components will, of course, have a lifecycle that corresponds to their respective Activity.</p>

<p>Let's move to your own particular use case.  While one activity-scoped component that can inject all the dependencies for Activity A, B, and C may be acceptable for the simple example in the question, the situation will quickly become more complicated if requirements change and Activity A suddenly needs a new dependency with a complicated object graph. You'll then have to create a new Module for the new dependency which will only be useful for one of the three injection sites in your Component. This will, in turn, make things more difficult for testing if you are using a mock Component to test Activity B and Activity C. </p>

<p>Hence, I would argue that from the start it is better to maintain one Component per Activity. Activity-scoped components are cheap and easy to maintain so it is not an issue to err on the side of caution and start with one activity-scoped component per activity.</p>

<p>For the example you have specified, I would create an app-scoped component:  </p>

<pre><code>@Component( modules = { SharedPreferencesModule.class } )
@PerApp
interface AppComponent {

    SharedPreferences sharedPreferences(Application app);

}
</code></pre>

<p>You can have your Activity components become dependent components of the app component. That way they will not have to be concerned with <code>SharedPreferences</code> since this is bound in the app-component and exposed to dependents:</p>

<pre><code>@Component( dependencies = { AppComponent.class }, modules = { AdapterAModule.class } )
@PerActivityA
interface ActivityAComponent {

}
</code></pre>

<p>Note that this is the style encouraged by the <a href=""https://google.github.io/dagger/android"" rel=""nofollow noreferrer""><code>dagger.android</code></a> package using <code>@ContributesAndroidInjector</code>:</p>

<pre><code>@PerActivityA
@ContributesAndroidInjector(modules = {ActivityAModule.class})
abstract YourActivity contributeYourActivityInjector();
</code></pre>
",5241933,,5241933,,2018-07-10 9:25:18,2018-07-10 9:25:18,,,,3,,,
Android,34801349,2,,34800860,2016,,8,,"<p>The problem here is that <code>PlaceAutocompleteFragment</code> didn't exist in version 8.3 of Google Play Services.</p>

<p>This isn't documented very well, but you can see on <a href=""http://googlegeodevelopers.blogspot.com/2015/12/autocomplete-widget-and-updated-place.html"" rel=""nofollow noreferrer"">this blog</a> that <code>PlaceAutocompleteFragment</code> was ""announced"" in December 2015.</p>

<p>You can also see <a href=""https://github.com/googlesamples/android-play-places/blob/master/PlaceCompleteFragment/Application/build.gradle#l23"" rel=""nofollow noreferrer"">in the PlaceCompleteFragment Google code samples on GitHub</a> that they are using version 8.4 of GooglePlayServices.</p>

<p>I also had this problem, and updating Google Play Services is what made it work.</p>

<p>So, update Google Play Services in the SDK Manager, and then modify the build.gradle like so, and it should work:</p>

<pre><code>compile 'com.google.android.gms:play-services-maps:8.4.0'
compile 'com.google.android.gms:play-services-location:8.4.0'
</code></pre>

<p><strong>Update</strong></p>

<p>In newer versions of Google Play Services, they have broken out the Google Places API, so you need to include it in addition to Maps and Location:</p>

<pre><code>compile 'com.google.android.gms:play-services-maps:11.0.2'
compile 'com.google.android.gms:play-services-location:11.0.2'
compile 'com.google.android.gms:play-services-places:11.0.2'
</code></pre>
",4409409,,4409409,,2017-07-14 19:19:09,2017-07-14 19:19:09,,,,4,,,
Android,37060486,2,,37053016,2016,,8,,"<p>You will indeed need Android for Work in order to use Airwatch to configure your application. </p>

<p>You should ensure you are using a device that supports AfW. All  devices with Android 6.0+ support work profiles, as well as many devices with Android 5.0+. Some recommended devices can be found <a href=""https://www.google.com/work/android/features/devices.html"">here</a></p>

<p>Once you have done so, you should create a new Profile in the Airwatch console that ensure that they will create a work profile on your device. Go to Devices >> Profiles >> List View and Click on ""Add"" >> ""Add Profile"" and choose ""Android"" >> ""Android for Work""</p>

<p>This should allow you to create an AfW policy that will apply to any assigned groups. Any apps you push to these devices can be configured using the App Restrictions framework by editing an application, going to the ""Deployment"" tab and enabling ""Send Application Configuration"". You should be able to set the key value pairs from there.</p>

<p>All that being said, if you are testing from a development perspective, you are much better off testing with TestDPC, an open source testing tool Google makes available in Google Play (just search for ""TestDPC"") and on <a href=""https://github.com/googlesamples/android-testdpc"">Github</a></p>

<p>There is a user guide on github, but it is very easy to use for creating work profiles, setting app configurations using app restrictions and more.</p>

<p>I would use Airwatch once you are ready to do production testing, but TestDPC is a much better tool while you are still developing.</p>
",5732134,,,,,2016-05-05 21:22:58,,,,7,,,
Android,49280718,2,,47459523,2018,,9,,"<p>I think the concept behind the ViewModel was that it is supposed to be related to a single ""<strong>Screen</strong>"" rather than a ""<strong>View</strong>"". So going by that logic, I think you can use the same ViewModel if multiple fragments reference the same ViewModel because they technically belong to the same ""<strong>Screen</strong>"".</p>

<p>In the fragments, you could request the activity for the ViewModel which holds the instance of LiveData and could give you the updates as needed.</p>

<p>Hope this answers your question. </p>

<p>Update: I found <a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/addedittask/AddEditTaskFragment.java#L64"" rel=""nofollow noreferrer"">a link to a sample fragment in Google samples</a>. Check out onCreateView() method. Pasting code below for reference: </p>

<pre><code>@Nullable
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {
    final View root = inflater.inflate(R.layout.addtask_frag, container, false);
    if (mViewDataBinding == null) {
        mViewDataBinding = AddtaskFragBinding.bind(root);
    }

    mViewModel = AddEditTaskActivity.obtainViewModel(getActivity());

    mViewDataBinding.setViewmodel(mViewModel);

    setHasOptionsMenu(true);
    setRetainInstance(false);

    return mViewDataBinding.getRoot();
}
</code></pre>

<p>P.S. If you have found a better solution/answer/practice, lemme know. </p>
",4267697,,4267697,,2018-10-09 18:16:22,2018-10-09 18:16:22,,,,2,,,
Android,33505644,2,,30919833,2015,,9,,"<p>Per some <a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/photo-demo/app/src/main/java/com/google/android/gms/samples/vision/face/photo/PhotoViewerActivity.java#L91"">related sample code from google</a> you can take this route:</p>

<pre><code>IntentFilter lowstorageFilter = new IntentFilter(Intent.ACTION_DEVICE_STORAGE_LOW);
boolean hasLowStorage = registerReceiver(null, lowstorageFilter) != null;
</code></pre>

<p>In other words, there is a <code>DeviceStorageMonitorService</code> service that runs at the OS level and detects a low storage situation. From there, it sends a sticky broadcast that any activity or service can check, later. In this example, they registered a null receiver as a way to just test if the sticky broadcast has been sent.</p>
",178433,,,,,2015-11-03 17:36:52,,,,2,,,
Android,47236867,2,,47236796,2017,,9,,"<p><code>deps</code> is an instance of <code>Map</code> class that is set on <code>project</code> instance and defined in <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/versions.gradle#L5"" rel=""noreferrer"">versions.gradle</a> file. This <code>versions.gradle</code> file is in turn <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/BasicSample/build.gradle#L20"" rel=""noreferrer"">applied</a> in root <code>build.gradle</code> script, hence <code>deps</code> can be used in subprojects.</p>
",542270,,,,,2017-11-11 10:25:07,,,,0,,,
Android,44514607,2,,44293066,2017,,9,,"<p>If you want to do your query synchronously and not receive notifications of updates on the dataset, just don't wrap you return value in a LiveData object. Check out the sample code from Google.</p>

<p>Take a look at loadProductSync() <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/BasicSample/app/src/main/java/com/example/android/persistence/db/dao/ProductDao.java"" rel=""noreferrer"">here</a></p>
",1495686,,1495686,,2017-06-15 7:45:27,2017-06-15 7:45:27,,,,10,,,
Android,27703286,2,,27695071,2014,,9,,"<p><strong>Brief response:</strong></p>

<p><a href=""https://stackoverflow.com/questions/1980452/what-causes-java-lang-incompatibleclasschangeerror"">This</a> seems a good link about <code>java.lang.IncompatibleClassChangeError</code>. And If you try it on CI:</p>

<p>Emulator is not fully booted after wait-for-device, it's not ready for your tests and your app is not installed due a timeout, so there are no tests performed and the build fails as a new behavior added to alert you about it.</p>

<p>You can replace <code>adb wait-for-device</code> by a loop waiting for <code>stopped</code> state (fully booted) checking <code>adb -e shell getprop init.svc.bootanim</code> as <a href=""https://github.com/google/iosched/blob/master/scripts/wait_for_emulator.sh"" rel=""nofollow noreferrer"">this script</a> in public domain does. <a href=""https://devmaze.wordpress.com/2011/12/12/starting-and-stopping-android-emulators/"" rel=""nofollow noreferrer"">Further info here</a>.</p>

<p>Possible CI issue, Double Espresso was deprecated and Espresso 2.0 released:</p>

<p><strong>About CI and no tests found:</strong></p>

<p>I answered another question <a href=""https://stackoverflow.com/questions/27084948/com-android-builder-testing-connecteddevice-hasteststestavd-5-0-failed"">but specific for Travis-ci here</a>. Similar error but due the script used was bugged. If you run <code>gradle installDebug --debug</code> you'll know more about the error (share the log here).</p>

<p>But running the same steps on a CI server, if I'm right, you'll see an InstallException caused by ShellCommandUnresponsiveException due a two minutes <code>INSTALL_TIMEOUT</code>. You can increase this value using an environment variable <code>ADB_INSTALL_TIMEOUT=6</code> #minutes, but this is not your problem now. </p>

<p>If you are running it locally first, try it without <code>-no-window</code> (so you see it) or add <code>-no-boot-anim</code> (speed up it but is incompatible with wait-for-emulator script) or use <code>adb wait-for-device &amp;&amp; sleep 300</code> (to be sure emulator is fully booted).</p>

<p><strong>About Espresso:</strong></p>

<p><a href=""https://github.com/JakeWharton/double-espresso"" rel=""nofollow noreferrer"">Double Espresso is deprecated</a> because <a href=""https://code.google.com/p/android-test-kit/wiki/ReleaseNotes"" rel=""nofollow noreferrer"">Espresso 2.0 is now available</a>. Double Espresso is a pure Gradle port of Espresso 1.1 and Jake Wharton deprecated it when version 2.0 was published two weeks ago.</p>

<p>They <a href=""https://code.google.com/p/android-test-kit/w/list"" rel=""nofollow noreferrer"">updated the wiki</a>  and <a href=""https://code.google.com/p/android-test-kit/wiki/EspressoSetupInstructions#Javadoc"" rel=""nofollow noreferrer"">JavaDoc (they will move it to android.com)</a>.</p>

<p><a href=""https://code.google.com/p/android-test-kit/wiki/EspressoSetupInstructions"" rel=""nofollow noreferrer"">You can now use the Android Support Repository to download the latest version.</a></p>

<p>And Google <a href=""https://github.com/googlesamples/android-testing"" rel=""nofollow noreferrer"">published new samples:</a></p>

<blockquote>
  <p>Samples prerequisites: Android SDK v21, Android Build Tools v21.1.2,
  Android Support Repository.</p>
  
  <p>These samples use the Gradle build system. To build a project, enter
  the project directory and use the ./gradlew assemble command or use
  ""Import Project"" in Android Studio. Use ./gradlew connectedCheck to
  run the tests on a connected emulator or device.</p>
</blockquote>

<p><strong>About Gradle tasks:</strong></p>

<p>From <a href=""http://tools.android.com/tech-docs/new-build-system/user-guide#TOC-Android-tasks"" rel=""nofollow noreferrer"">Android tasks</a> and <a href=""http://tools.android.com/tech-docs/new-build-system/user-guide#TOC-Running-tests"" rel=""nofollow noreferrer"">Running tests</a> (Gradle Plugin User Guide):</p>

<ul>
<li><code>assemble</code> The task to assemble the output(s) of the project</li>
<li><code>connectedCheck</code> Runs checks that requires a connected device or emulator.</li>
</ul>

<p>Checks requiring a connected device are launched with the anchor task called <code>connectedCheck</code>. This depends on the task androidTest and therefore will run it. This task does the following:</p>

<ul>
<li>Ensure the app and the test app are built (depending on assembleDebug and assembleTest)</li>
<li>Install both apps</li>
<li>Run the tests</li>
<li>Uninstall both apps.</li>
</ul>

<p><strong>So I think:</strong></p>

<ul>
<li>It's a good moment to migrate to Espresso 2.0 (and avoid the <a href=""https://github.com/JakeWharton/double-espresso/blob/gradle/README.md"" rel=""nofollow noreferrer"">dependencies?</a> issue).</li>
<li>You need to wait for emulator stopped state and I recommend <a href=""https://devmaze.wordpress.com/2011/12/12/starting-and-stopping-android-emulators/"" rel=""nofollow noreferrer"">this link</a> to understand it.</li>
<li>You don't need specific <code>install*</code> tasks and can replace <code>assemble</code> by <code>build</code> (includes <code>lint</code>) and use <code>connectedCheck</code> (includes <code>connectedAndroidTest</code>).</li>
<li>If there is more than one ABI installed, you'll need to choose one (and answer no): <code>- echo no | android create avd -f -n test -t $ANDROID_TARGET -b $ANDROID_ABI</code></li>
<li>I would try their samples on the CI server you choose as a second step following your goal.</li>
</ul>
",1009132,,-1,,2017-05-23 10:28:11,2015-01-14 12:25:51,,,,2,,,
Android,50332808,2,,49834875,2018,,9,,"<p>I just remembered I asked this question a few weeks ago.
Meanwhile, I found a solution to the problem and TensorflowLite is now nicely embedded into my Android Project, where I do all the programming using the C++ API!</p>

<p>The problem was that the Tensorflow shared library I built did not contain a soname. So, during build process, the library was stripped and as no name was found, the path was used as the ""name"". I noticed that while I further investigated my native-lib.so (the NDK C++ library which is then loaded by the App) using linux ""strings"" tool. Here I found out that indeed the path to load the library from ""/home/User/tensorflowtest/app/src/main/cpp/../../../../distribution/tensorflow/lib/x86/libtensorflowLite.so"" was set.
Adding a ""-Wl,-soname=libtensorflowLite.so"" to the build options in the BUILD file fixed this issue! You can find the whole rule I used below.</p>

<p>As it was a pain to get everything set up due to the lack of explanations (it seems TensorflowLite is mostly used via Java API on Android ?), I want to give a short guidance on how use the C++ API of TensorflowLite in Android Studio (from within an Android NDK project).</p>

<h1>1. <strong>Build the library for your architecture</strong></h1>

<p>To use the C++ API, you first need to build the TensorflowLite library. For this, add the following rule to the BUILD file in tensorflow/contrib/lite:</p>

<p>cc_binary(</p>

<pre><code>name = ""libtensorflowLite.so"",
linkopts=[
    ""-shared"", 
    ""-Wl,-soname=libtensorflowLite.so"",
],
linkshared = 1,
copts = tflite_copts(),
deps = [
    "":framework"",
    ""//tensorflow/contrib/lite/kernels:builtin_ops"",
],
</code></pre>

<p>)</p>

<p>Note: With this, a <strong>shared</strong> library can be built! A static one might also work.</p>

<p>Now you can build the library using</p>

<pre><code>bazel build //tensorflow/contrib/lite:libtensorflowLite.so --crosstool_top=//external:android/crosstool --cpu=arm64-v8a --host_crosstool_top=@bazel_tools//tools/cpp:toolchain --cxxopt=""-std=c++11""
</code></pre>

<p>If you want to support multiple architectures, you will have to build the library several times and change the --cpu flag correspondingly.</p>

<p><strong>NOTE:</strong> This works fine at least for arm64-v8a and the armeabi-v7a (haven't tested it with MIPS so this might work aswell). However on an x86 device, I get the ""atomic_store_8"" error already adressed in this topic: <a href=""https://github.com/tensorflow/tensorflow/issues/16589"" rel=""noreferrer"">https://github.com/tensorflow/tensorflow/issues/16589</a></p>

<h1>2. <strong>Add the library and the needed headers to be included in your Android Studio project</strong></h1>

<p>Having built the library, you now need to make sure it also is linked into your Application (more specifically: Into your Android NDK library, which in my case is named ""native-lib""). I will give a short overview on how to do this, however if you need a more detailed explanation you may refer to the github link I provided in my initial question: <a href=""https://github.com/googlesamples/android-ndk/tree/840858984e1bb8a7fab37c1b7c571efbe7d6eb75/hello-libs"" rel=""noreferrer"">https://github.com/googlesamples/android-ndk/tree/840858984e1bb8a7fab37c1b7c571efbe7d6eb75/hello-libs</a></p>

<p>2.1. In your Android Studio Project, open the CMakeLists.txt</p>

<p>2.2. Add the following:</p>

<pre><code>    # This will create a new ""variable"" holding the path to a directory
    # where we will put our library and header files.
    # Change this to your needs
    set(distribution_DIR ${CMAKE_SOURCE_DIR}/distribution)

    # This states that there exists a shared library called libtensorflowLite
    # which will be imported (means it is not built with the rest of the project!)
    add_library(libtensorflowLite SHARED IMPORTED)

    # This indicates where the libtensorflowLite.so for each architecture is found relative to our distribution directory
    set_target_properties(libtensorflowLite PROPERTIES IMPORTED_LOCATION
        ${distribution_DIR}/lib/${ANDROID_ABI}/libtensorflowLite.so)

    # This indicates where the header files are found relative to our distribution dir
    target_include_directories(native-lib PRIVATE
                       ${distribution_DIR}/include)

    # Finally, we make sure our libtensorflowLite.so is linked to our native-lib and loaded during runtime 
    target_link_libraries( # Specifies the target library.
                   native-lib
                   libtensorflowLite
                   # Links the target library to the log library
                   # included in the NDK.
                   ${log-lib} )
</code></pre>

<p>2.3. Open the build.gradle for your Module: App (not the project one!)</p>

<p>2.4. Make sure our library will be packed into your APK</p>

<p>Add this inside the Android section:</p>

<pre><code>    sourceSets {
        main {
            // let gradle pack the shared library into apk
            jni.srcDirs = []
            jniLibs.srcDirs = ['distribution/lib']
        }
    }
</code></pre>

<p>You may have to edit the path accoding to your needs: The files here will be packed in to your .apk inside the lib directory.</p>

<h1>3. Include flatbuffers</h1>

<p>TensorflowLite uses the flatbuffers serialization library. I guess this will be added automatically if you build your project using bazel. But this is not the case when using Android Studio. 
Of course, you could also add a static or shared library too.
However, for me it was easiest to just let flatbuffers compile each time with the rest of my app (it is not that big). 
I copied all of the flatbuffers <strong>*.cpp</strong> source files to my project and added them to the CMakeLists.</p>

<h1>4. Copy the needed headers for TensorflowLite and flatbuffers</h1>

<p>In 3. I just copied the cpp files to my project. 
However, the header files need to be located in the directory we set in target_include_directories in step 2.2.</p>

<p>So go ahead and copy all of the flatbuffers (from the flatbuffers repository) *.h files to this directory.
Next, from the TensorflowLite repository, you need all header files inside the tensorflow/contrib/lite directory. However you should <strong>keep the folder structure</strong></p>

<p>For me it looks like this:</p>

<ul>
<li>distribution

<ul>
<li>lib

<ul>
<li>arm64-v8a

<ul>
<li>libtensorflowLite</li>
</ul></li>
<li>armeabi-v7a

<ul>
<li>libtensorflowLite</li>
</ul></li>
</ul></li>
<li>include

<ul>
<li>flatbuffers</li>
<li>tensorflow

<ul>
<li>contrib

<ul>
<li>lite

<ul>
<li>kernels</li>
<li>nnapi</li>
<li>schema</li>
<li>tools </li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul>

<p>So, if I haven't forgotten anything everything should be set up correctly by now! 
Hopefully this helped and it worked for you as it did for me ;)</p>

<p>Best regards,</p>

<p>Martin</p>
",9646450,,,,,2018-05-14 14:28:53,,,,4,,,
Android,31882037,2,,31507891,2015,,9,,"<p>As Awanish said - read the <a href=""http://tools.android.com/tech-docs/new-build-system/gradle-experimental"">Experimental Plugin User Guide</a> step by step <strong>VERY</strong> carefully. For even more clearance check the build.gradle files in the <a href=""https://github.com/googlesamples/android-ndk"">ndk-samples</a> provided by google.</p>

<p><code>sourceSets.main { }</code> has different syntax and should be outside the <code>android { }</code> block. In your case it should look something like this:</p>

<pre><code>model {

    android {
        //...
    }

    android.sources {
        main {
            jniLibs {
                source {
                    srcDirs 'libs'
                }
            }
        }
    }

}
</code></pre>
",4621448,,,,,2015-08-07 15:58:53,,,,2,,,
Android,39544518,2,,8209858,2016,,9,,"<p>way too late for the party here but i will still add my $0.02, Google has released a free sample called universal music player with which you can learn to stream music across all android platforms(auto, watch,mobile,tv..) it uses service to play music in the background, do check it out very helpful. here's the link to the project<br>
<a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""noreferrer"">https://github.com/googlesamples/android-UniversalMusicPlayer</a></p>
",3114032,,,,,2016-09-17 8:12:06,,,,0,,,
Android,39258515,2,,39250754,2016,,9,,"<blockquote>
  <p>Whether it is possible to trace which the Activity opened after
  pressing the button?</p>
</blockquote>

<p>Check <code>espresso-intents</code> library: </p>

<h2>Configuration</h2>

<p>Add to your <code>app/build.gradle</code> these lines:</p>

<pre><code>androidTestCompile 'com.android.support.test:runner:0.5'
androidTestCompile 'com.android.support.test:rules:0.5'
androidTestCompile 'com.android.support.test.espresso:espresso-core:2.2.2'
androidTestCompile 'com.android.support.test.espresso:espresso-intents:2.2.2'
</code></pre>

<blockquote>
  <p>NOTICE: <code>espresso-intents</code> won't run without <code>espresso-core</code>, <code>runner</code> or <code>rules</code> libs.</p>
</blockquote>

<p>You may also need to change <code>ActivityTestRule&lt;&gt;</code> to <code>IntentsTestRule</code> as it is described here:</p>

<blockquote>
  <h3>IntentsTestRule</h3>
  
  <p>Use IntentsTestRule instead of ActivityTestRule when using
  Espresso-Intents. IntentsTestRule makes it easy to use
  Espresso-Intents APIs in functional UI tests. This class is an
  extension of ActivityTestRule, which initializes Espresso-Intents
  before each test annotated with @Test and releases Espresso-Intents
  after each test run. The activity will be terminated after each test
  and this rule can be used in the same way as ActivityTestRule.</p>
  
  <p>From:
  <a href=""https://google.github.io/android-testing-support-library/docs/espresso/intents/"" rel=""noreferrer"">https://google.github.io/android-testing-support-library/docs/espresso/intents/</a></p>
</blockquote>

Example code (click on button to launch new activity)

<p>Here's a solution using <code>espresso-intents</code> for similar problem:</p>

<blockquote>
  <p>An example test with intent stubbing:</p>

<pre><code>@Test
 public void testActivityResultIsHandledProperly() {
   // Build a result to return when a particular activity is launched.
   Intent resultData = new Intent();
   String phoneNumber = ""123-345-6789"";
   resultData.putExtra(""phone"", phoneNumber);
   ActivityResult result = new ActivityResult(Activity.RESULT_OK, resultData);

   // Set up result stubbing when an intent sent to ""contacts"" is seen.
   intending(toPackage(""com.android.contacts"")).respondWith(result));

   // User action that results in ""contacts"" activity being launched.
   // Launching activity expects phoneNumber to be returned and displays it on the screen.
   user.clickOnView(system.getView(R.id.pickButton));

   // Assert that data we set up above is shown.
   assertTrue(user.waitForText(phoneNumber));
 }
</code></pre>
  
  <p>From:
  <a href=""https://developer.android.com/reference/android/support/test/espresso/intent/Intents.html"" rel=""noreferrer"">https://developer.android.com/reference/android/support/test/espresso/intent/Intents.html</a></p>
</blockquote>

<p>Additional resources:</p>

<ul>
<li><p><a href=""https://developer.android.com/reference/android/support/test/espresso/intent/Intents.html"" rel=""noreferrer"">[Android Developers] Espresso Intents Reference</a></p></li>
<li><p><a href=""https://github.com/googlesamples/android-testing/tree/master/ui/espresso/IntentsBasicSample"" rel=""noreferrer"">[Github || Google Samples] Basic sample for Espresso Intents</a></p></li>
<li><p><a href=""https://github.com/barend/android-espresso-intent-sample"" rel=""noreferrer"">[Github] Android Espresso Intent Sample</a></p></li>
<li><p><a href=""http://collectiveidea.com/blog/archives/2015/06/11/testing-for-android-intents-using-espresso/"" rel=""noreferrer"">Testing for Android Intents using Espresso</a></p></li>
<li><p><a href=""https://gist.github.com/vgonda/1b2520619052cc5bf9b8"" rel=""noreferrer"">[Gist] Example of how to use espresso-intents in Android tests</a> - source code for link above</p></li>
</ul>
",4730812,,,,,2016-08-31 20:31:53,,,,0,,,
Android,44837540,2,,44489235,2017,,9,,"<p>Using <a href=""https://developer.android.com/reference/android/support/v7/util/DiffUtil.html"" rel=""noreferrer"">DiffUtil</a> might help with updating one row in a huge list. You can then have LiveData wrap the list of comments instead of a single comment or attribute of a comment. </p>

<p>Here's an example of using DiffUtil within a <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/BasicSample/app/src/main/java/com/example/android/persistence/ui/ProductAdapter.java#L44"" rel=""noreferrer"">RecyclerView adapter</a> and the <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/BasicSample/app/src/main/java/com/example/android/persistence/ui/ProductListFragment.java#L69"" rel=""noreferrer"">list LiveData observation code in the fragment</a>.</p>
",497605,,497605,,2017-11-20 18:10:54,2017-11-20 18:10:54,,,,2,,,
Android,37251196,2,,32473158,2016,,9,,"<p>This is possible from Android 6.0 and up.</p>

<ul>
<li>Make your app the Device owner.</li>
</ul>

<p>Once your app gets the Device owner permission, we can install, uninstall and update silently without any user intervention.</p>

<pre><code>public static boolean installPackage(Context context, InputStream in, String packageName)
        throws IOException {
    PackageInstaller packageInstaller = context.getPackageManager().getPackageInstaller();
    PackageInstaller.SessionParams params = new PackageInstaller.SessionParams(
            PackageInstaller.SessionParams.MODE_FULL_INSTALL);
    params.setAppPackageName(packageName);
    // set params
    int sessionId = packageInstaller.createSession(params);
    PackageInstaller.Session session = packageInstaller.openSession(sessionId);
    OutputStream out = session.openWrite(""COSU"", 0, -1);
    byte[] buffer = new byte[65536];
    int c;
    while ((c = in.read(buffer)) != -1) {
        out.write(buffer, 0, c);
    }
    session.fsync(out);
    in.close();
    out.close();

    session.commit(createIntentSender(context, sessionId));
    return true;
}


private static IntentSender createIntentSender(Context context, int sessionId) {
        PendingIntent pendingIntent = PendingIntent.getBroadcast(
                context,
                sessionId,
                new Intent(ACTION_INSTALL_COMPLETE),
                0);
        return pendingIntent.getIntentSender();
    }
</code></pre>

<p>Uninstall:</p>

<pre><code>String appPackage = ""com.your.app.package"";
Intent intent = new Intent(getActivity(), getActivity().getClass());
PendingIntent sender = PendingIntent.getActivity(getActivity(), 0, intent, 0);
PackageInstaller mPackageInstaller = getActivity().getPackageManager().getPackageInstaller();
mPackageInstaller.uninstall(appPackage, sender.getIntentSender());
</code></pre>

<p>Complete device owner demo app in this <a href=""https://github.com/googlesamples/android-testdpc/blob/5b8297e9d51983a774ba3391e28a6aa35ca3f062/app/src/main/java/com/afwsamples/testdpc/cosu/CosuUtils.java"" rel=""noreferrer"">repo</a>.</p>
",2219600,,2219600,,2017-01-17 15:54:28,2017-01-17 15:54:28,,,,11,,,
Android,37374829,2,,32099530,2016,,9,,"<p>Google has confirmed a bug that they will fix soon, which prevents you in some cases to use this library of barcode/face-detection (link <a href=""https://developers.google.com/android/guides/releases#may_2016_-_v90""><strong>here</strong></a>) :</p>

<blockquote>
  <ul>
  <li>A service required by Mobile Vision is now disabled due to a serious bug in that service. This will prevent users who have not
  already used face or barcode detection from using those features. We
  do not recommend adding new Mobile Vision features to your app until
  this issue is fixed.</li>
  <li>For apps that already use Mobile Vision features, check FaceDetector.isOperational() or BarcodeDetector.isOperational() to
  confirm detector readiness before using the face or barcode detector.</li>
  </ul>
</blockquote>

<p>It's also written in some issues reported on Google's github sample repo:</p>

<p><a href=""https://github.com/googlesamples/android-vision/issues"">https://github.com/googlesamples/android-vision/issues</a></p>

<p>Example (<a href=""https://github.com/googlesamples/android-vision/issues/95#issuecomment-220163073""><strong>here</strong></a>) :</p>

<blockquote>
  <p>There is a known issue with the new version of GMSCore (v9) that was
  just released today.</p>
</blockquote>
",878126,,,,,2016-05-22 13:13:27,,,,1,,,
Android,44117381,2,,24874066,2017,,10,,"<p>The latest Android Emulator now supports OpenGL ES 3.0.  To use OpenGL ES 3.0, your development machine needs a host GPU graphics card that supports OpenGL 3.2 or higher on Microsoft Windows or Linux. </p>

<p>See:
<a href=""https://android-developers.googleblog.com/2017/05/android-studio-3-0-canary1.html"" rel=""noreferrer"">https://android-developers.googleblog.com/2017/05/android-studio-3-0-canary1.html</a></p>

<p><a href=""https://i.stack.imgur.com/C87ld.jpg"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/C87ld.jpg"" alt=""OpenGL ES 3.0 in Android Emulator""></a></p>

<p>The <a href=""https://github.com/googlesamples/android-ndk/tree/f9f26dfce3dda37cf08a56286dd268a0e94d9da6/gles3jni"" rel=""noreferrer""><code>gles3jni</code> sample app</a> from the NDK is a good option to try it out.</p>

<p>If it fails with:</p>

<pre><code>java.lang.RuntimeException: createContext failed: EGL_BAD_CONFIG
</code></pre>

<p>also try to run first on host:</p>

<pre><code>echo ""GLESDynamicVersion = on"" &gt;&gt; ~/.android/advancedFeatures.ini
</code></pre>

<p>as the devs are currently whitelisting supported host GPUs, and that overrides it, see also: <a href=""https://issuetracker.google.com/issues/68496715"" rel=""noreferrer"">https://issuetracker.google.com/issues/68496715</a></p>
",5551196,,895245,,2017-10-31 7:05:32,2017-10-31 7:05:32,,,,5,,,
Android,31840258,2,,31761416,2015,,10,,"<p><strong>Edit to answer latest question</strong></p>

<p>You can avoid using an intent to search for paired devices. When connecting to a device that is not paired, a notification will pop up asking to pair the devices. Once paired this message should not show again for these devices, the connection should be automatic (according to how you have written your program).</p>

<p>I use an intent to enable bluetooth, and to make my device discoverable, I then set up my code to connect, and press a button to connect. In your case, you will need to ensure your accessories are discoverable also. In my case I use a unique UUID, and both devices must recognise this to connect. This can only be used if you are programming both devices, whether both are android or one android and one other device type.</p>

<p>Try this, and see if it solves your problem.</p>

<hr>

<p><strong>This answer is to the original question before it was edited to be another question.</strong></p>

<p>I've edited my answer for clarity as I can see from the comments it is misleading. Your question has two parts. </p>

<blockquote>
  <p>On my MotoG (KitKat) if I turn my Bluetooth it connects autommatically
  to device (if it's near and paired ofc...) but on my LG G3 I must go
  to Configuration/Bluetooth/Paired devices/ and there tap the device to
  connect... and I want to avoid this... should be possible?</p>
</blockquote>

<p><strong>This is less of a programming issue and more of a platform issue.</strong><br>
There is a <strong>well documented bug in Android 5.0</strong> with Bluetooth not automatically connecting and many other BT issues.  These issues continue with all the updates on 5.0. versions and is not fixed until the 5.1. upgrade. </p>

<p><a href=""http://www.digitaltrends.com/mobile/android-lollipop-problems/11/"" rel=""noreferrer"">http://www.digitaltrends.com/mobile/android-lollipop-problems/11/</a></p>

<p><a href=""http://forums.androidcentral.com/lg-g3/473064-bluetooth-streaming-choppy-lg-3-lollipop.html"" rel=""noreferrer"">http://forums.androidcentral.com/lg-g3/473064-bluetooth-streaming-choppy-lg-3-lollipop.html</a></p>

<p><strong>First port of call is to update to 5.1</strong></p>

<p>These issues have been addressed in the Lollipop update 5.1</p>

<p><a href=""http://www.reddit.com/r/Android/comments/306m3y/lollipop_51_bluetooth/"" rel=""noreferrer"">http://www.reddit.com/r/Android/comments/306m3y/lollipop_51_bluetooth/</a></p>

<hr>

<p><strong>Edit:</strong>
<em>I don't believe this is going to fix your problem of the automatic pairing, you wanted to know how to use BTGatt.</em></p>

<blockquote>
  <p>I've seen if I type device. to check what can I do it let me
  connectGatt() means /.../
  But I can't figure it out how to do this...</p>
</blockquote>

<p><strong>To use BluetoothGatt</strong></p>

<p><a href=""https://developer.android.com/reference/android/bluetooth/BluetoothGatt.html"" rel=""noreferrer"">https://developer.android.com/reference/android/bluetooth/BluetoothGatt.html</a></p>

<blockquote>
  <p>This class provides Bluetooth GATT functionality to enable
  communication with Bluetooth Smart or Smart Ready devices.
   /.../
  GATT capable devices can be discovered using the Bluetooth device
  discovery or BLE scan process.</p>
</blockquote>

<p><a href=""https://developer.android.com/reference/android/bluetooth/BluetoothGattCallback.html"" rel=""noreferrer"">https://developer.android.com/reference/android/bluetooth/BluetoothGattCallback.html</a></p>

<p>Here is a great example of how to use BluetoothGatt (it uses hear rate):<br>
<a href=""https://github.com/googlesamples/android-BluetoothLeGatt/blob/master/Application/src/main/java/com/example/android/bluetoothlegatt/BluetoothLeService.java"" rel=""noreferrer"">https://github.com/googlesamples/android-BluetoothLeGatt/blob/master/Application/src/main/java/com/example/android/bluetoothlegatt/BluetoothLeService.java</a></p>

<p>I have reproduced some of the code here, in case the link dies.</p>

<p>It basically follows similar lines to a regular bluetooth connection. You need to discover and find supported devices. 
Monitor state, etc.<br>
These are the two most pertinent features to gatt.</p>

<p>The callback:</p>

<pre><code>// Implements callback methods for GATT events that the app cares about.  For example,
// connection change and services discovered.
private final BluetoothGattCallback mGattCallback = new BluetoothGattCallback() {
    @Override
    public void onConnectionStateChange(BluetoothGatt gatt, int status, int newState) {
        String intentAction;
        if (newState == BluetoothProfile.STATE_CONNECTED) {
            intentAction = ACTION_GATT_CONNECTED;
            mConnectionState = STATE_CONNECTED;
            broadcastUpdate(intentAction);
            Log.i(TAG, ""Connected to GATT server."");
            // Attempts to discover services after successful connection.
            Log.i(TAG, ""Attempting to start service discovery:"" +
                    mBluetoothGatt.discoverServices());

        } else if (newState == BluetoothProfile.STATE_DISCONNECTED) {
            intentAction = ACTION_GATT_DISCONNECTED;
            mConnectionState = STATE_DISCONNECTED;
            Log.i(TAG, ""Disconnected from GATT server."");
            broadcastUpdate(intentAction);
        }
    }

    @Override
    public void onServicesDiscovered(BluetoothGatt gatt, int status) {
        if (status == BluetoothGatt.GATT_SUCCESS) {
            broadcastUpdate(ACTION_GATT_SERVICES_DISCOVERED);
        } else {
            Log.w(TAG, ""onServicesDiscovered received: "" + status);
        }
    }

    @Override
    public void onCharacteristicRead(BluetoothGatt gatt,
                                     BluetoothGattCharacteristic characteristic,
                                     int status) {
        if (status == BluetoothGatt.GATT_SUCCESS) {
            broadcastUpdate(ACTION_DATA_AVAILABLE, characteristic);
        }
    }

    @Override
    public void onCharacteristicChanged(BluetoothGatt gatt,
                                        BluetoothGattCharacteristic characteristic) {
        broadcastUpdate(ACTION_DATA_AVAILABLE, characteristic);
    }
};
</code></pre>

<p>The broadcast:</p>

<pre><code>private void broadcastUpdate(final String action,
                             final BluetoothGattCharacteristic characteristic) {
    final Intent intent = new Intent(action);

    // This is special handling for the Heart Rate Measurement profile.  Data parsing is
    // carried out as per profile specifications:
    // http://developer.bluetooth.org/gatt/characteristics/Pages/CharacteristicViewer.aspx?u=org.bluetooth.characteristic.heart_rate_measurement.xml
    if (UUID_HEART_RATE_MEASUREMENT.equals(characteristic.getUuid())) {
        int flag = characteristic.getProperties();
        int format = -1;
        if ((flag &amp; 0x01) != 0) {
            format = BluetoothGattCharacteristic.FORMAT_UINT16;
            Log.d(TAG, ""Heart rate format UINT16."");
        } else {
            format = BluetoothGattCharacteristic.FORMAT_UINT8;
            Log.d(TAG, ""Heart rate format UINT8."");
        }
        final int heartRate = characteristic.getIntValue(format, 1);
        Log.d(TAG, String.format(""Received heart rate: %d"", heartRate));
        intent.putExtra(EXTRA_DATA, String.valueOf(heartRate));
    } else {
        // For all other profiles, writes the data formatted in HEX.
        final byte[] data = characteristic.getValue();
        if (data != null &amp;&amp; data.length &gt; 0) {
            final StringBuilder stringBuilder = new StringBuilder(data.length);
            for(byte byteChar : data)
                stringBuilder.append(String.format(""%02X "", byteChar));
            intent.putExtra(EXTRA_DATA, new String(data) + ""\n"" + stringBuilder.toString());
        }
    }
    sendBroadcast(intent);
}
</code></pre>

<p>This question also has some relevant code that may help cut it down when learning:<br>
<a href=""https://stackoverflow.com/questions/29758890/bluetooth-gatt-callback-not-working-with-new-api-for-lollipop"">BLuetooth Gatt Callback not working with new API for Lollipop</a></p>

<p>Now here's the rub. Are your devices bluetooth smart or smart ready?</p>

<p>This link gives a great list of smart devices. You will also find out when you implement your program.</p>

<p><a href=""http://www.bluetooth.com/Pages/Bluetooth-Smart-Devices-List.aspx"" rel=""noreferrer"">http://www.bluetooth.com/Pages/Bluetooth-Smart-Devices-List.aspx</a></p>
",3956566,,-1,,2017-05-23 12:09:02,2015-08-10 13:08:57,,,,16,,,
Android,13155277,2,,6763149,2012,,10,,"<p>After a quite searching the more valuable information I've found:</p>

<ul>
<li>The <a href=""https://github.com/googlesamples/android-ndk/tree/master/native-audio"" rel=""nofollow noreferrer"">NativeAudio</a> project included in NDK is a good start.</li>
<li>Also it's a great start point the chapter 7 ""Playing Sound with OpenSL ES"" of the book <a href=""https://rads.stackoverflow.com/amzn/click/com/1849691525"" rel=""nofollow noreferrer"" rel=""nofollow noreferrer"">""Android NDK Beginner's Guide"" by Sylvain Ratabouil</a> (You can take a look in amazon using the ""look inside"" feature or buy it).</li>
<li><a href=""https://github.com/jkytomaki/opensl-soundpool"" rel=""nofollow noreferrer"">This google code project for replace SoundPool with OpenSL</a> is a great example too. All credits and thanks to their authors.</li>
</ul>
",973036,,3427520,,2018-07-25 7:12:09,2018-07-25 7:12:09,,,,1,,,
Android,37008540,2,,37007994,2016,,10,,"<p>I dont think Presenter is a good place. Presenter should ask the new data from the model, like getData(). Presenter should not know whether its from local database or from server. So checking the internet connection at the Presenter will not be a good idea. </p>

<p>If you use the Repository pattern, the Presenter will ask the model/repository to get the data. The model will send the local data to the presenter first. Parallely, it will send server request(if there is network connection) to download new data, and send the new data to the Presenter.</p>

<p>So I think, the network check must be at the Repository/ model. You could have Util class which implements the actual network check code. And call that method from repository, like <code>AppUtil.isNetworkConnectionAvailable();</code></p>

<p>For more info, refer: <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp/"" rel=""noreferrer"">https://github.com/googlesamples/android-architecture/tree/todo-mvp/</a></p>
",4586742,,,,,2016-05-03 15:40:12,,,,6,,,
Android,51173521,2,,40929686,2018,,10,,"<p>It seems like you (almost) always use a <code>CoordinatorLayout</code>, and sometimes use a <code>ConstraintLayout</code> inside. See the following resources</p>

<ul>
<li><p>The codelab at <a href=""https://codelabs.developers.google.com/codelabs/material-design-style/index.html#3"" rel=""noreferrer"">https://codelabs.developers.google.com/codelabs/material-design-style/index.html#3</a> only uses a <code>CoordinatorLayout</code></p></li>
<li><p>The example android-sunflower app (""illustrating Android development best practices"") uses neither for the top-level activity, but uses both inside its <a href=""https://github.com/googlesamples/android-sunflower/blob/master/app/src/main/res/layout/fragment_plant_detail.xml"" rel=""noreferrer""><code>fragment_plant_detail.xml</code></a>, with the <code>ConstraintLayout</code> being inside the <code>CoordinatorLayout</code>:</p>

<pre><code>&lt;layout ...&gt;
&lt;data .../&gt;
&lt;android.support.design.widget.CoordinatorLayout ...&gt;
    &lt;android.support.design.widget.AppBarLayout ...&gt;
        &lt;android.support.design.widget.CollapsingToolbarLayout ...&gt;
            &lt;ImageView... /&gt;
            &lt;android.support.v7.widget.Toolbar... /&gt;
        &lt;/android.support.design.widget.CollapsingToolbarLayout&gt;
    &lt;/android.support.design.widget.AppBarLayout&gt;
    &lt;android.support.v4.widget.NestedScrollView ...&gt;
        &lt;android.support.constraint.ConstraintLayout ...&gt;
            &lt;TextView.../&gt;
            &lt;TextView... /&gt;
        &lt;/android.support.constraint.ConstraintLayout&gt;
    &lt;/android.support.v4.widget.NestedScrollView&gt;
    &lt;android.support.design.widget.FloatingActionButton ... /&gt;
&lt;/android.support.design.widget.CoordinatorLayout&gt;
&lt;/layout&gt;
</code></pre></li>
</ul>
",1587329,,,,,2018-07-04 12:17:25,,,,1,,,
Android,47081594,2,,46340106,2017,,11,,"<p>In this case I would recommend to use one view model which populates three different LiveData objects. This way the UI can get updated whenever one of your three requests gets a response. For details how to use a RecyclerView with LiveData take a look into the <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/BasicSample/app/src/main/java/com/example/android/persistence/ui/ProductFragment.java"" rel=""noreferrer"">Google Example</a>.</p>

<p>I think having multiple viewmodels per activity only increases complexity and I do not see any value in doing that.</p>
",8876284,,8876284,,2018-01-25 10:16:16,2018-01-25 10:16:16,,,,3,,,
Android,46280749,2,,46278357,2017,,11,,"<blockquote>
  <ol>
  <li>[...] It means that all the viewmodels are added to the DI graph. Why that is done in that way instead of having separate  Module for each Activity/Fragment [...]?</li>
  </ol>
</blockquote>

<p>They are added to the DI graph, but they are not yet created. Instead they end up in a map of providers, as <a href=""https://github.com/googlesamples/android-architecture-components/blob/b411aa3f423744ec9b7f4c0559e3938ab2c40547/GithubBrowserSample/app/src/main/java/com/android/example/github/viewmodel/GithubViewModelFactory.kt#L28"" rel=""noreferrer"">seen in the ViewModelFacory</a>.</p>

<pre><code>@Inject
public GithubViewModelFactory(Map&lt;Class&lt;? extends ViewModel&gt;, Provider&lt;ViewModel&gt;&gt; creators) { }
</code></pre>

<p>So we now have a <code>GithubViewModelFactory</code> that has a list of providers and can create any <code>ViewModel</code> that was bound. Fragments and Activities can now just inject the factory and retrieve their ViewModel.</p>

<pre><code>@Inject
ViewModelProvider.Factory viewModelFactory;

// ...later...
repoViewModel = ViewModelProviders.of(this, viewModelFactory).get(RepoViewModel.class);
</code></pre>

<p>As to the why...alternatively you could create a <code>ViewModelProvider.Factory</code> for every Activity / Fragment and register the implementation in every Module. This would be a lot of duplicated boilerplate code, though.</p>

<blockquote>
  <ol start=""2"">
  <li>In this specific example, where viewmodels are instantiated using GithubViewModelFactory is there any way to pass a parameter to the specific ViewModel? Or the better solution would be to create a setter in ViewModel and set needed param via setter?</li>
  </ol>
</blockquote>

<p>It seems like all the ViewModels only depend on <code>@Singleton</code> objects&mdash;which is necessary, since they all get provided from the AppComponent. This means that there is no way to pass in ""parameters"" other than other <code>@Singleton</code> dependencies.</p>

<p>So, as you suggested, you'd either have to move the factory down into the Activity / Fragment component so that you can provide lower-scoped dependencies, or use a setter method.</p>
",1837367,,2489403,,2018-04-29 12:50:41,2018-04-29 12:50:41,,,,4,,,
Android,27739665,2,,22246183,2015,,11,,"<h2>Espresso 2.0</h2>

<p>Recently <strong>Espresso 2.0</strong> was released making it now part of the <strong>Android Support Library</strong>. This was <a href=""https://plus.google.com/+AndroidDevelopers/posts/jHXFkebKjEb"" rel=""nofollow noreferrer"">announced on the android dev blog</a>.</p>

<h2>Setup Guide</h2>

<p>With that they also <a href=""https://google.github.io/android-testing-support-library/docs/espresso/setup/index.html"" rel=""nofollow noreferrer"">linked an updated setup guide</a>. There you can find instructions to configure from scratch or to update your existing espresso config for 2.0.</p>

<h2>Other Tips</h2>

<p><em>Changes are the above 2 links contain all information you need. If not I have listed some common mistakes below</em></p>

<h3>Upgrade Android Studio to 1.0.*</h3>

<p>Start by upgrading your android Studio build. You should be able to get at least 1.0 from the stable builds channels (=default). So just use the menu option <strong>Android Studio</strong> > <strong>Check for updates...</strong> .</p>

<p>To get the latest from the latest you can also go into Preferences, search for updates and change the channel to <strong>canary channel</strong>.</p>

<h3>Update Android Support Library to v 11+</h3>

<p>Espresso was included in the Support library from version 11 so you have to get at least that version. Check for updates using the <strong>Android SDK manager</strong>. The Support Library is within the <strong>Extras</strong> tree at the bottom.</p>

<h3>New dependencies and namespace</h3>

<p>If upgading from an older espresso release you'll have to update the dependencies and the namespace. For new projects just add these to the <code>dependencies</code> in your <code>build.gradle</code> file.</p>

<pre><code>dependencies {
    androidTestCompile 'com.android.support.test.espresso:espresso-core:2.0'
    androidTestCompile 'com.android.support.test:testing-support-lib:0.1'
}
</code></pre>

<p>And since the namespace changed you'll have to update all imports:</p>

<pre><code>android.support.test.espresso
</code></pre>

<p>Note that it's easier to use static imports. <em>Some</em> commonly used imports as an example:</p>

<pre><code>import static android.support.test.espresso.Espresso.onView;
import static android.support.test.espresso.assertion.ViewAssertions.matches;
import static android.support.test.espresso.matcher.ViewMatchers.withId;
import static android.support.test.espresso.matcher.ViewMatchers.withText;
import static android.support.test.espresso.matcher.ViewMatchers.withContentDescription;
</code></pre>

<p>For asserts use hamcrest, again <em>some</em> examples:</p>

<pre><code>import static org.hamcrest.Matchers.not;
import static org.hamcrest.Matchers.allOf;
import static org.hamcrest.Matchers.anyOf;
import static org.hamcrest.Matchers.containsString;
import static org.hamcrest.Matchers.startsWith;
import static org.hamcrest.Matchers.endsWith;
import static org.hamcrest.Matchers.equalToIgnoringCase;
import static org.hamcrest.Matchers.equalToIgnoringWhiteSpace;
</code></pre>

<h3>Instrumentation runner</h3>

<p>The test runner needs to be configured in both your <code>build.gradle</code> file within defaultConfig and the run configuration used to launch your tests from Android Studio. </p>

<pre><code>defaultConfig {
    testInstrumentationRunner ""android.support.test.runner.AndroidJUnitRunner""
}
</code></pre>

<p>And in your run configuration use this as instrumentation runner (full class name only):</p>

<pre><code>android.support.test.runner.AndroidJUnitRunner
</code></pre>

<h3>Example test case</h3>

<p>And an example test case to finish with. Note that <code>MainActivity</code> is your actvitiy you want to test. The tests themselves are public methods that start with test, like <code>testListGoesOverTheFold</code> in the below example.</p>

<pre><code>@LargeTest
public class HelloWorldEspressoTest extends ActivityInstrumentationTestCase2&lt;MainActivity&gt; {

    public HelloWorldEspressoTest() {
            super(MainActivity.class);
        }

    @Override
    public void setUp() throws Exception {
        super.setUp();
        getActivity();
    }

    public void testListGoesOverTheFold() {
        onView(withText(""Hello world"")).check(isDisplayed());
    }
}
</code></pre>

<p><em>For more information on writing tests visit <a href=""https://github.com/googlesamples/android-testing"" rel=""nofollow noreferrer"">the espresso start guide</a>.</em></p>
",312743,,1947601,,2016-09-08 0:06:10,2016-09-08 0:06:10,,,,0,,,
Android,39439030,2,,33922670,2016,,11,,"<p>I branched form <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""noreferrer"">google's Camera2Basic example</a> and changed it to use <code>CaptureRequest.CONTROL_AF_MODE_AUTO</code> instead of <code>CaptureRequest.CONTROL_AF_MODE_CONTINUOUS_PICTURE</code></p>

<p>You can take the project from git and test it - <a href=""https://github.com/pinhassi/android-Camera2Basic"" rel=""noreferrer"">https://github.com/pinhassi/android-Camera2Basic</a></p>

<p>Or just add this to <code>Camera2BasicFragment</code>:</p>

<pre><code>private static final long LOCK_FOCUS_DELAY_ON_FOCUSED = 5000;
private static final long LOCK_FOCUS_DELAY_ON_UNFOCUSED = 1000;

private Integer mLastAfState = null;
private Handler mUiHandler = new Handler(); // UI handler
private Runnable mLockAutoFocusRunnable = new Runnable() {

    @Override
    public void run() {
        lockAutoFocus();
    }
};


public void lockAutoFocus() {
    try {
        // This is how to tell the camera to lock focus.
        mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AF_TRIGGER, CameraMetadata.CONTROL_AF_TRIGGER_START);
        CaptureRequest captureRequest = mPreviewRequestBuilder.build();
        mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AF_TRIGGER, null); // prevent CONTROL_AF_TRIGGER_START from calling over and over again
        mCaptureSession.capture(captureRequest, mCaptureCallback, mBackgroundHandler);
    } catch (CameraAccessException e) {
        e.printStackTrace();
    }
}


/**
 *
 * @return
 */
private float getMinimumFocusDistance() {
    if (mCameraId == null)
        return 0;

    Float minimumLens = null;
    try {
        CameraManager manager = (CameraManager) getActivity().getSystemService(Context.CAMERA_SERVICE);
        CameraCharacteristics c = manager.getCameraCharacteristics(mCameraId);
        minimumLens = c.get(CameraCharacteristics.LENS_INFO_MINIMUM_FOCUS_DISTANCE);
    } catch (Exception e) {
        Log.e(TAG, ""isHardwareLevelSupported Error"", e);
    }
    if (minimumLens != null)
        return minimumLens;
    return 0;
}

/**
 *
 * @return
 */
private boolean isAutoFocusSupported() {
    return  isHardwareLevelSupported(CameraCharacteristics.INFO_SUPPORTED_HARDWARE_LEVEL_LEGACY) || getMinimumFocusDistance() &gt; 0;
}

// Returns true if the device supports the required hardware level, or better.
@TargetApi(Build.VERSION_CODES.LOLLIPOP)
private boolean isHardwareLevelSupported(int requiredLevel) {
    boolean res = false;
    if (mCameraId == null)
        return res;
    try {
        CameraManager manager = (CameraManager) getActivity().getSystemService(Context.CAMERA_SERVICE);
        CameraCharacteristics cameraCharacteristics = manager.getCameraCharacteristics(mCameraId);

        int deviceLevel = cameraCharacteristics.get(CameraCharacteristics.INFO_SUPPORTED_HARDWARE_LEVEL);
        switch (deviceLevel) {
            case CameraCharacteristics.INFO_SUPPORTED_HARDWARE_LEVEL_3:
                Log.d(TAG, ""Camera support level: INFO_SUPPORTED_HARDWARE_LEVEL_3"");
                break;
            case CameraCharacteristics.INFO_SUPPORTED_HARDWARE_LEVEL_FULL:
                Log.d(TAG, ""Camera support level: INFO_SUPPORTED_HARDWARE_LEVEL_FULL"");
                break;
            case CameraCharacteristics.INFO_SUPPORTED_HARDWARE_LEVEL_LEGACY:
                Log.d(TAG, ""Camera support level: INFO_SUPPORTED_HARDWARE_LEVEL_LEGACY"");
                break;
            case CameraCharacteristics.INFO_SUPPORTED_HARDWARE_LEVEL_LIMITED:
                Log.d(TAG, ""Camera support level: INFO_SUPPORTED_HARDWARE_LEVEL_LIMITED"");
                break;
            default:
                Log.d(TAG, ""Unknown INFO_SUPPORTED_HARDWARE_LEVEL: "" + deviceLevel);
                break;
        }


        if (deviceLevel == CameraCharacteristics.INFO_SUPPORTED_HARDWARE_LEVEL_LEGACY) {
            res = requiredLevel == deviceLevel;
        } else {
            // deviceLevel is not LEGACY, can use numerical sort
            res = requiredLevel &lt;= deviceLevel;
        }

    } catch (Exception e) {
        Log.e(TAG, ""isHardwareLevelSupported Error"", e);
    }
    return res;
}
</code></pre>

<p>Then, add to <code>STATE_PREVIEW</code> block:</p>

<pre><code>        case STATE_PREVIEW: {

            // We have nothing to do when the camera preview is working normally.
            // TODO: handle auto focus
            Integer afState = result.get(CaptureResult.CONTROL_AF_STATE);
            if (afState != null &amp;&amp; !afState.equals(mLastAfState)) {
                switch (afState) {
                    case CaptureResult.CONTROL_AF_STATE_INACTIVE:
                        Log.d(TAG, ""CaptureResult.CONTROL_AF_STATE_INACTIVE"");
                        lockAutoFocus();
                        break;
                    case CaptureResult.CONTROL_AF_STATE_ACTIVE_SCAN:
                        Log.d(TAG, ""CaptureResult.CONTROL_AF_STATE_ACTIVE_SCAN"");
                        break;
                    case CaptureResult.CONTROL_AF_STATE_FOCUSED_LOCKED:
                        Log.d(TAG, ""CaptureResult.CONTROL_AF_STATE_FOCUSED_LOCKED"");
                        mUiHandler.removeCallbacks(mLockAutoFocusRunnable);
                        mUiHandler.postDelayed(mLockAutoFocusRunnable, LOCK_FOCUS_DELAY_ON_FOCUSED);
                        break;
                    case CaptureResult.CONTROL_AF_STATE_NOT_FOCUSED_LOCKED:
                        mUiHandler.removeCallbacks(mLockAutoFocusRunnable);
                        mUiHandler.postDelayed(mLockAutoFocusRunnable, LOCK_FOCUS_DELAY_ON_UNFOCUSED);
                        Log.d(TAG, ""CaptureResult.CONTROL_AF_STATE_NOT_FOCUSED_LOCKED"");
                        break;
                    case CaptureResult.CONTROL_AF_STATE_PASSIVE_UNFOCUSED:
                        mUiHandler.removeCallbacks(mLockAutoFocusRunnable);
                        //mUiHandler.postDelayed(mLockAutoFocusRunnable, LOCK_FOCUS_DELAY_ON_UNFOCUSED);
                        Log.d(TAG, ""CaptureResult.CONTROL_AF_STATE_PASSIVE_UNFOCUSED"");
                        break;
                    case CaptureResult.CONTROL_AF_STATE_PASSIVE_SCAN:
                        Log.d(TAG, ""CaptureResult.CONTROL_AF_STATE_PASSIVE_SCAN"");
                        break;
                    case CaptureResult.CONTROL_AF_STATE_PASSIVE_FOCUSED:
                        mUiHandler.removeCallbacks(mLockAutoFocusRunnable);
                        //mUiHandler.postDelayed(mLockAutoFocusRunnable, LOCK_FOCUS_DELAY_ON_FOCUSED);
                        Log.d(TAG, ""CaptureResult.CONTROL_AF_STATE_PASSIVE_FOCUSED"");
                        break;
                }
            }
            mLastAfState = afState;
            break;
        }
</code></pre>

<p>And replace all occurrences of:</p>

<pre><code>mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AF_MODE,
                                            CaptureRequest.CONTROL_AF_MODE_CONTINUOUS_PICTURE);
</code></pre>

<p>With:</p>

<pre><code>if (isAutoFocusSupported())
                                mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AF_MODE,
                                        CaptureRequest.CONTROL_AF_MODE_AUTO);
                            else
                                mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AF_MODE,
                                        CaptureRequest.CONTROL_AF_MODE_CONTINUOUS_PICTURE);
</code></pre>
",475472,,,,,2016-09-11 17:57:08,,,,4,,,
Android,52390905,2,,40703567,2018,,11,,"<p>Espresso does <code>waitForIdle</code> before executing view checks. <code>waitForIdle</code> goes thought <code>IdlingRegistry</code> and waits until every <code>IdlingResource</code> is idle. </p>

<p><code>LoopingIdlingResource</code> is used in Espresso by default. It waits until looper doesn't have messages in queue, which means that it is idle.</p>

<p>However <code>DataBinding</code> uses different approach to schedule an update, it uses <code>Choreographer.postFrameCallback</code>. So updates are not posted into looper queue and Espresso will not wait for them.</p>

<p>In such cases you should register your own <a href=""https://developer.android.com/reference/android/support/test/espresso/IdlingResource"" rel=""noreferrer""><code>IdlingResource</code></a>. You can find in <code>googlesamples/android-architecture-components</code> nice sample how to implement custom <a href=""https://github.com/googlesamples/android-architecture-components/blob/7f861fd45d158e6277a3c35163c7f663e135b2cf/GithubBrowserSample/app/src/androidTest/java/com/android/example/github/util/DataBindingIdlingResource.kt"" rel=""noreferrer""><code>DataBindingIdlingResource</code></a> and <a href=""https://github.com/googlesamples/android-architecture-components/blob/7f861fd45d158e6277a3c35163c7f663e135b2cf/GithubBrowserSample/app/src/androidTest/java/com/android/example/github/util/DataBindingIdlingResourceRule.kt"" rel=""noreferrer""><code>DataBindingIdlingResourceRule</code></a> that will sets the idle resource before executing tests.</p>

<p>So you have to copy these classes <a href=""https://github.com/googlesamples/android-architecture-components/blob/7f861fd45d158e6277a3c35163c7f663e135b2cf/GithubBrowserSample/app/src/androidTest/java/com/android/example/github/util/DataBindingIdlingResourceRule.kt"" rel=""noreferrer""><code>DataBindingIdlingResourceRule</code></a> and <a href=""https://github.com/googlesamples/android-architecture-components/blob/7f861fd45d158e6277a3c35163c7f663e135b2cf/GithubBrowserSample/app/src/androidTest/java/com/android/example/github/util/DataBindingIdlingResource.kt"" rel=""noreferrer""><code>DataBindingIdlingResource</code></a> into your tests.</p>

<p>And add the following rule into your test class:</p>

<pre><code>@Rule
@JvmField
val dataBindingIdlingResourceRule = DataBindingIdlingResourceRule(activityRule)
</code></pre>
",5090578,,5090578,,2018-09-19 8:19:39,2018-09-19 8:19:39,,,,1,,,
Android,34834625,2,,31924627,2016,,11,,"<p>Double-check if the error message returned by the API is ""The current app is blacklisted"", which will be triggered when ""Never"" has been selected at some point in the past on the save dialog (details in the accepted answer: need to check for all accounts on the device).</p>

<p>And in general if you don't see the save dialog when testing, here are things to check:</p>

<ul>
<li><p>try a real device (Android 4+) and not an emulator, ensure that the device is running the latest version of Google Play Services (8+) and has an active internet connection</p></li>
<li><p>verify that the device has at least one Google Account and that the account is in good state (doesn't require password re-entry and meets any corp policy requirements), for example, check that an email push notification for the account is successfully received by the device</p></li>
<li><p>in the <em>Google Setting</em> app > <em>Smart Lock for Passwords</em> (pre-Marshmallow) or <em>Settings > Google > Smart Lock for Passwords</em> (Marshmallow), ensure that at least once account on the device is shown with the Smart Lock for Passwords feature enabled and is not shown as disabled by <a href=""https://support.google.com/chrome/answer/1181035?hl=en"" rel=""nofollow noreferrer"">passphrase encryption</a>, see <a href=""https://stackoverflow.com/questions/33907279/smart-lock-for-passwords-not-working-on-certain-phones-error-message-no-eligib"">related question</a></p></li>
<li><p>in the same <em>Smart Lock for Passwords</em> settings activity, also check that app is not on the ""Never save"" list for any account on the device (as noted in the accepted answer). There is an account selector dropdown at the top of the settings activity UI.</p></li>
<li><p>check that the <code>Auth.CredentialsApi.save()</code> callback is being called, and the <code>CredentialRequestResult</code> <code>getStatus().getStatusCode()</code> is <code>RESOLUTION_REQUIRED</code> and you've called <code>startResolutionForResult()</code>. <a href=""https://github.com/googlesamples/android-credentials/blob/master/credentials-quickstart/app/src/main/java/com/google/example/credentialsbasic/MainActivity.java"" rel=""nofollow noreferrer"">Sample app</a></p></li>
<li><p>note that the Activity from which you <code>startResolutionForResult()</code> must not <code>finish()</code> before the dialog is shown and user interaction is complete, calling <code>onActivityResult()</code></p></li>
<li><p>also note that calling <code>Auth.CredentialsApi.save()</code> with a credential that has an email identifier matching a Google Account on the device and an account type set in place of a password, the save will succeed without resolution required. Similar for an update to an existing password credential with matching identifier. Check <a href=""https://passwords.google.com"" rel=""nofollow noreferrer"">passwords.google.com</a> for the Google Accounts on your device to see what credentials are currently saved </p></li>
</ul>

<p>If none of these work, try adding a new Google Account to the device, and try another app with Smart Lock integration, such creating and saving an email-based account for the <a href=""https://play.google.com/store/apps/details?id=com.nytimes.android"" rel=""nofollow noreferrer"">NYTimes</a> app on your device and determine whether it is a device/account-specific issue or a problem with your app implementation, and feel free to leave a comment with details.  </p>

<p>For a full guide to testing Smart Lock API integration in an app, check out <a href=""https://stackoverflow.com/a/34761243/5001016"">this answer</a>.</p>
",5001016,,-1,,2017-05-23 10:31:14,2016-01-21 14:11:50,,,,1,,,
Android,33027993,2,,27887716,2015,,11,,"<p>You can follow the pattern in Code Sample from Google in link below.
<a href=""https://github.com/googlesamples/android-ActionBarCompat-ShareActionProvider"" rel=""noreferrer"">https://github.com/googlesamples/android-ActionBarCompat-ShareActionProvider</a></p>

<p>The easiest way is to go to your Android Studio => File, Import Sample. Then type in ""Share Action Provider"".</p>

<p><a href=""https://i.stack.imgur.com/ehqKT.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/ehqKT.png"" alt=""enter image description here""></a></p>

<p>Below are the code involved in creating Share Action Menu Item with ShareActionProvider with ActionBarCompat, backwards compatible to API v7.</p>

<p>MainActivity.java</p>

<pre><code>// BEGIN_INCLUDE(get_sap)
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu resource
    getMenuInflater().inflate(R.menu.main_menu, menu);

    // Retrieve the share menu item
    MenuItem shareItem = menu.findItem(R.id.menu_share);

    // Now get the ShareActionProvider from the item
    mShareActionProvider = (ShareActionProvider) MenuItemCompat.getActionProvider(shareItem);

    // Get the ViewPager's current item position and set its ShareIntent.
    int currentViewPagerItem = ((ViewPager) findViewById(R.id.viewpager)).getCurrentItem();
    setShareIntent(currentViewPagerItem);

    return super.onCreateOptionsMenu(menu);
}
// END_INCLUDE(get_sap

private void setShareIntent(int position) {
    // BEGIN_INCLUDE(update_sap)
    if (mShareActionProvider != null) {
        // Get the currently selected item, and retrieve it's share intent
        ContentItem item = mItems.get(position);
        Intent shareIntent = item.getShareIntent(MainActivity.this);

        // Now update the ShareActionProvider with the new share intent
        mShareActionProvider.setShareIntent(shareIntent);
    }
    // END_INCLUDE(update_sap)
}
</code></pre>

<p>main_menu.xml</p>

<pre><code>&lt;menu xmlns:android=""http://schemas.android.com/apk/res/android""
xmlns:support=""http://schemas.android.com/apk/res-auto""&gt;

&lt;!--
  To use ShareActionProvider provided by ActionBarCompat, we reference the class by set the
  support:actionProviderClass attribute with the full class name of ShareActionProvider.
--&gt;
&lt;item
    android:id=""@+id/menu_share""
    android:title=""@string/menu_share""
    support:actionProviderClass=""android.support.v7.widget.ShareActionProvider""
    support:showAsAction=""always"" /&gt;
</code></pre>

<p></p>
",267693,,,,,2015-10-09 0:21:21,,,,2,,,
Android,32828161,2,,32051973,2015,,12,,"<p>An auto focus option is now available in the official API.  See the setAutoFocusEnabled method here: </p>

<p><a href=""https://developers.google.com/android/reference/com/google/android/gms/vision/CameraSource.Builder.html#setAutoFocusEnabled(boolean)"" rel=""noreferrer"">https://developers.google.com/android/reference/com/google/android/gms/vision/CameraSource.Builder.html#setAutoFocusEnabled(boolean)</a></p>

<p>Also, we open sourced the CameraSource class, which has an auto focus method as well.  This one allows you to set a specific focus mode as opposed to the ""continuous video"" mode that the official API defaults to:</p>

<p><a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java"" rel=""noreferrer"">https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java</a></p>
",5231007,,5231007,,2015-12-04 16:01:43,2015-12-04 16:01:43,,,,3,,,
Android,34123146,2,,33537889,2015,,12,,"<p>For starters, I'm using Android Studio 1.5 / gradle 2.8</p>

<p><strong>I fixed this by changing my <code>build.gradle</code> to</strong> </p>

<pre><code> buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
            ndk {
                debuggable = true
            }

        }
        debug {
            debuggable = true
            jniDebuggable = true
        }

    }
</code></pre>

<p>So, basically, I just added the lines</p>

<pre><code>ndk {
        debuggable = true
}
</code></pre>

<p>To release, and </p>

<pre><code>debug {
         debuggable = true
         jniDebuggable = true
}
</code></pre>

<p>To the enclosing <code>buildTypes</code></p>

<p><strong>But this syntax varies, based on your gradle version. Look <a href=""https://github.com/googlesamples/android-ndk/issues/42"">Here</a> and <a href=""https://github.com/googlesamples/android-ndk/issues/20"">here</a> for help with other gradle versions</strong></p>
",2869509,,2869509,,2015-12-06 21:49:31,2015-12-06 21:49:31,,,,2,,,
Android,39423732,2,,39423351,2016,,12,,"<p><strong>java</strong></p>

<pre><code>    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    Uri photoUri = Uri.fromFile(getOutputPhotoFile());
    intent.putExtra(MediaStore.EXTRA_OUTPUT, photoUri);
    intent.putExtra(""android.intent.extras.CAMERA_FACING"", 1);
    startActivityForResult(intent, CAMERA_PHOTO_REQUEST_CODE);
</code></pre>

<p><strong>Other/Alternate Solution</strong></p>

<pre><code>private Camera openFrontFacingCameraGingerbread() {
    int cameraCount = 0;
    Camera cam = null;
    Camera.CameraInfo cameraInfo = new Camera.CameraInfo();
    cameraCount = Camera.getNumberOfCameras();
    for (int camIdx = 0; camIdx &lt; cameraCount; camIdx++) {
        Camera.getCameraInfo(camIdx, cameraInfo);
        if (cameraInfo.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
            try {
                cam = Camera.open(camIdx);
            } catch (RuntimeException e) {
                Log.e(TAG, ""Camera failed to open: "" + e.toString());
            }
        }
    }

    return cam;
}
</code></pre>

<p>add these permissions in the <code>AndroidManifest.xml</code> file</p>

<pre><code>&lt;uses-permission android:name=""android.permission.CAMERA"" /&gt;
&lt;uses-feature android:name=""android.hardware.camera"" android:required=""false"" /&gt;
&lt;uses-feature android:name=""android.hardware.camera.front"" android:required=""false"" /&gt;
</code></pre>

<blockquote>
  <p><strong>only available in Gingerbread(2.3) and Up Android Version.</strong></p>
</blockquote>

<p>otherwise you can also check these example</p>

<p><a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""noreferrer""><strong>1. android-Camera2Basic</strong></a></p>

<p><a href=""https://examples.javacodegeeks.com/android/core/hardware/camera-hardware/android-camera-example/"" rel=""noreferrer""><strong>2. Camera Example 2</strong></a></p>

<p><a href=""http://www.vogella.com/tutorials/AndroidCamera/article.html"" rel=""noreferrer""><strong>3. Vogella example</strong></a></p>

<p>hope it helps you..</p>
",6617272,,6617272,,2016-09-10 8:53:17,2016-09-10 8:53:17,,,,2,,,
Android,39065950,2,,38695149,2016,,12,,"<p>Create these variables:</p>

<pre><code>    public static final String CAMERA_FRONT = ""1"";
    public static final String CAMERA_BACK = ""0"";

    private String cameraId = CAMERA_BACK;
    private boolean isFlashSupported;
    private boolean isTorchOn;
</code></pre>

<p>then add these methods:</p>

<pre><code>public void switchFlash() {
    try {
        if (cameraId.equals(CAMERA_BACK)) {
            if (isFlashSupported) {
                if (isTorchOn) {
                    mPreviewBuilder.set(CaptureRequest.FLASH_MODE, CaptureRequest.FLASH_MODE_OFF);
                    mPreviewSession.setRepeatingRequest(mPreviewBuilder.build(), null, null);
                    flashButton.setImageResource(R.drawable.ic_flash_off);
                    isTorchOn = false;
                } else {
                    mPreviewBuilder.set(CaptureRequest.FLASH_MODE, CaptureRequest.FLASH_MODE_TORCH);
                    mPreviewSession.setRepeatingRequest(mPreviewBuilder.build(), null, null);
                    flashButton.setImageResource(R.drawable.ic_flash_on);
                    isTorchOn = true;
                }
            }
        }
    } catch (CameraAccessException e) {
        e.printStackTrace();
    }
}

public void setupFlashButton() {
    if (cameraId.equals(CAMERA_BACK) &amp;&amp; isFlashSupported) {
        flashButton.setVisibility(View.VISIBLE);

        if (isTorchOn) {
            flashButton.setImageResource(R.drawable.ic_flash_off);
        } else {
            flashButton.setImageResource(R.drawable.ic_flash_on);
        }

    } else {
        flashButton.setVisibility(View.GONE);
    }
}
</code></pre>

<p>after this <a href=""https://github.com/googlesamples/android-Camera2Video/blob/master/Application/src/main/java/com/example/android/camera2video/Camera2VideoFragment.java#L450"" rel=""noreferrer"">line</a> add this code:</p>

<pre><code>Boolean available = characteristics.get(CameraCharacteristics.FLASH_INFO_AVAILABLE);
isFlashSupported = available == null ? false : available;

setupFlashButton();
</code></pre>

<p>at the end call <em>switchFlash()</em> in your desired click listener.</p>

<p><strong>et voil!</strong></p>

<p>PS. This might be helpful - <a href=""https://stackoverflow.com/questions/39022845/android-camera2-api-switch-back-front-cameras/39064930#39064930"">front/back camera switcher</a></p>
",5963700,,-1,,2017-05-23 11:53:52,2016-08-21 15:39:52,,,,3,,,
Android,21221034,2,,21220993,2014,,12,,"<p>Check out the <a href=""https://github.com/googlesamples/android-BluetoothChat"" rel=""nofollow noreferrer"">BluetoothChat</a> example that Google provides in the SDK. It'll show you how to implement basic sending of text over bluetooth.</p>
",2631333,,2631333,,2019-03-19 19:43:05,2019-03-19 19:43:05,,,,2,,,
Android,27114050,2,,27107212,2014,,12,,"<p><strong>UPDATE</strong>: 
A comment clarified that the question was actually about viewing/controlling other apps' MediaSessions, not your own.</p>

<p>Although there is no way to do it directly, due to privacy reasons, you have two options with different levels of available controls/information and different requirements for user interaction:</p>

<ol>
<li><p>If you just want to skip musics or play/pause, you can send media button events (via <a href=""http://developer.android.com/reference/android/media/AudioManager.html#dispatchMediaKeyEvent(android.view.KeyEvent)"" rel=""nofollow noreferrer"">AudioManager</a>) and/or <a href=""https://stackoverflow.com/questions/11275400/reliably-pausing-media-playback-system-wide-in-android"">request/release audio focus</a>.</p></li>
<li><p>If you need to also know the metadata of what is currently playing, there is a more intrusive way that requires explicit user interaction:</p></li>
</ol>

<p>First, create and register a NotificationListenerService:</p>

<pre><code>public class NotificationListener extends NotificationListenerService {
    public NotificationListener() {
    }
}
</code></pre>

<p>In AndroidManifest.xml:</p>

<pre><code>&lt;service android:name="".NotificationListener""
    android:permission=""android.permission.BIND_NOTIFICATION_LISTENER_SERVICE""
    android:enabled=""true"" android:exported=""true""&gt;
    &lt;intent-filter&gt;
        &lt;action android:name=""android.service.notification.NotificationListenerService"" /&gt;
    &lt;/intent-filter&gt;
&lt;/service&gt;
</code></pre>

<p>Then you will be able to fetch MediaSessions by specifying your NotificationListenerService componentName in the getActiveSessions call:</p>

<pre><code>MediaSessionManager mm = (MediaSessionManager) this.getSystemService(
    Context.MEDIA_SESSION_SERVICE);
List&lt;MediaController&gt; controllers = mm.getActiveSessions(
    new ComponentName(this, NotificationListener.class));
Log.i(TAG, ""found "" + controllers.size() + "" controllers"");
</code></pre>

<p>One caveat is that the user will need to explicitly give your app Notification access permission, by going to Settings -> Sound &amp; Notification -> Notification access</p>

<h3>Original response:</h3>

<p>The object that describes your MediaSession and that can be passed along to allow other components/apps to control an existing MediaSesion is the MediaSession.Token. With a token, you can create a MediaController directly, without resorting to the MediaSessionManager. The code for that would be something like:</p>

<pre><code>MediaController mediaController = new MediaController(getActivity(),
    sessionToken);
</code></pre>

<p>This doesn't require any special permission. If you are also using the MediaBrowser or the MediaBrowserService, you should get the token associated with the MediaBrowser, by using it's getSessionToken() method.</p>

<p>We just released <a href=""https://github.com/googlesamples/android-MediaBrowserService"" rel=""nofollow noreferrer"">an example</a> that uses a MediaBrowserService to handle music browsing, playback and media style notification and provides a simple Activity to control playback.</p>
",1429114,,-1,,2017-05-23 12:34:12,2014-11-26 19:51:33,,,,4,,,
Android,35648069,2,,2779002,2016,,12,,"<p>All older answers' methods are deprecated by Google (supposedly because of troubles like this), since API 21 you need to <a href=""https://developer.android.com/reference/android/hardware/Camera.html"" rel=""noreferrer"">use</a> the Camera 2 API:</p>

<blockquote>
  <p>This class was deprecated in API level 21. We recommend using the new
  android.hardware.camera2 API for new applications.</p>
</blockquote>

<p>In <a href=""https://developer.android.com/reference/android/hardware/camera2/CameraManager.html"" rel=""noreferrer"">the newer API</a> you have <strong>almost complete power</strong> over the Android device camera and documentation explicitly advice to</p>

<pre><code>String[] getCameraIdList()
</code></pre>

<p>and then use obtained CameraId to open the camera:</p>

<pre><code>void openCamera(String cameraId, CameraDevice.StateCallback callback, Handler handler)
</code></pre>

<p><strong>99% of the frontal cameras have id = ""1"", and the back camera id = ""0""</strong>
according to this:</p>

<blockquote>
  <p>Non-removable cameras use integers starting at 0 for their
  identifiers, while removable cameras have a unique identifier for each
  individual device, even if they are the same model.</p>
</blockquote>

<p><strong>However</strong>, this means if device situation is rare like just 1-frontal -camera tablet you need to count how many <strong>embedded</strong> cameras you have, and place the order of the camera by its importance (""0""). So CAMERA_FACING_FRONT == 1 CAMERA_FACING_BACK == 0, which implies that the back camera is more <strong>important</strong> than frontal.</p>

<p>I don't know about a <strong>uniform</strong> method to identify the frontal camera on all Android devices. Simply said, the Android OS inside the device can't really find out which camera is exactly where for some reasons: maybe the only camera hardcoded id is an integer representing its importance or maybe on some devices whichever side you turn will be .. ""back"".</p>

<p><strong>Documentation</strong>: <a href=""https://developer.android.com/reference/android/hardware/camera2/package-summary.html"" rel=""noreferrer"">https://developer.android.com/reference/android/hardware/camera2/package-summary.html</a></p>

<p><strong>Explicit Examples</strong>: <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a></p>

<hr>

<p><strong>For the older API</strong> (it is not recommended, because it will not work on modern phones newer Android version and transfer is a pain-in-the-arse). Just use the same <em>Integer</em> CameraID  (1) to open frontal camera like in <a href=""https://stackoverflow.com/a/4767832/5059838"">this answer</a>:</p>

<pre><code>cam = Camera.open(1);
</code></pre>

<hr>

<p>If you trust <strong><a href=""http://docs.opencv.org/2.4/doc/tutorials/introduction/android_binary_package/dev_with_OCV_on_Android.html#dev-with-ocv-on-android"" rel=""noreferrer"">OpenCV</a></strong> to do the camera part:</p>

<p>Inside</p>

<pre><code>    &lt;org.opencv.android.JavaCameraView
    ../&gt;
</code></pre>

<p>use the following for the frontal camera:</p>

<pre><code>        opencv:camera_id=""1""
</code></pre>
",5059838,,-1,,2017-05-23 11:55:09,2017-05-20 12:27:02,,,,0,,,
Android,45645939,2,,45531230,2017,,12,,"<p>It seems you have a few misconceptions.</p>

<p>Generally it is never OK to call network from the Main (UI) thread but unless you have a lot of data it might be OK to fetch data from DB in the Main thread. And this is what Google example does.</p>

<p><strong>1.</strong></p>

<blockquote>
  <p>The demo uses executors framework, and defines a fixed pool with 3 threads for networkIO, however in the demo only a worker task is defined for one call, i.e. the FetchNextSearchPageTask. </p>
</blockquote>

<p>First of all, since Java 8 you can create simple implementation of some interfaces (so called ""functional interfaces"") using lambda syntax. This is what happens in the <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/repository/NetworkBoundResource.java#L67-L76"" rel=""noreferrer"">NetworkBoundResource</a>:</p>

<pre><code>            appExecutors.diskIO().execute(() -&gt; {
                saveCallResult(processResponse(response));
                appExecutors.mainThread().execute(() -&gt;
                        // we specially request a new live data,
                        // otherwise we will get immediately last cached value,
                        // which may not be updated with latest results received from network.
                        result.addSource(loadFromDb(),
                                newData -&gt; result.setValue(Resource.success(newData)))
                );
            });
</code></pre>

<p>at first task (<code>processResponse</code> and <code>saveCallResult</code>) is scheduled on a thread provided by the <code>diskIO</code> <code>Executor</code> and then from that thread the rest of the work is scheduled back to the Main thread.</p>

<p><strong>2.</strong> </p>

<blockquote>
  <p>Why is @MainThread applied here for networkIO?</p>
</blockquote>

<p>and</p>

<blockquote>
  <p>All other network requests seem to be executed on the main thread.</p>
</blockquote>

<p>This is not so. Only result wrapper i.e. <code>LiveData&lt;ApiResponse&lt;RequestType&gt;&gt;</code> is created on the main thread. The network request is done on a different thread. This is not easy to see because <a href=""https://github.com/square/retrofit"" rel=""noreferrer"">Retrofit</a> library is used to do all the network-related heavy lifting and it nicely hides such implementation details. Still, if you look at the <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/util/LiveDataCallAdapter.java#L48"" rel=""noreferrer"">LiveDataCallAdapter</a> that wraps Retrofit into a <code>LiveData</code>, you can see that <a href=""https://square.github.io/retrofit/2.x/retrofit/retrofit2/Call.html#enqueue-retrofit2.Callback-"" rel=""noreferrer"">Call.enqueue</a> is used which is actually an asynchronous call (scheduled internally by Retrofit). </p>

<p>Actually if not for ""pagination"" feature, the example would not need <code>networkIO</code> <code>Executor</code> at all. ""Pagination"" is a complicated feature and thus it is implemented using explicit <code>FetchNextSearchPageTask</code> and this is a place where I think Google example is done not very well: <code>FetchNextSearchPageTask</code> doesn't re-use request parsing logic (i.e. <code>processResponse</code>) from <code>RepoRepository</code> but just assumes that it is trivial (which it is now, but who knows about the future...). Also there is no scheduling of the merging job onto the <code>diskIO</code> <code>Executor</code> which is also inconsistent with the rest of the response processing.</p>
",182660,,,,,2017-08-12 2:26:17,,,,1,,,
Android,33054982,2,,32412197,2015,,12,,"<p><em>You have probably sorted this out already, but in case someone stumbles upon this question in the future, here's how I solved it:</em></p>

<p>As @pm0733464 points out, the default image format coming out of <code>android.hardware.Camera</code> is NV21, and that is the one used by <a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java"" rel=""nofollow noreferrer"" title=""CameraSource"">CameraSource</a>.</p>

<p><a href=""https://stackoverflow.com/questions/3338235/bitmapfactory-decodebytearray-is-returning-null"">This</a> stackoverflow answer provides the answer:</p>

<pre><code>YuvImage yuvimage=new YuvImage(byteBuffer, ImageFormat.NV21, w, h, null);
ByteArrayOutputStream baos = new ByteArrayOutputStream();
yuvimage.compressToJpeg(new Rect(0, 0, w, h), 100, baos); // Where 100 is the quality of the generated jpeg
byte[] jpegArray = baos.toByteArray();
Bitmap bitmap = BitmapFactory.decodeByteArray(jpegArray, 0, jpegArray.length);
</code></pre>

<p>Although <code>frame.getGrayscaleImageData()</code> suggests <code>bitmap</code> will be a grayscale version of the original image, this is not the case, in my experience. In fact, the bitmap is identical to the one supplied to the <code>SurfaceHolder</code> natively.</p>
",3614804,,-1,,2017-05-23 12:34:39,2015-10-10 14:19:26,,,,1,,,
Android,29594177,2,,29594056,2015,,13,,"<h2>Important to know:</h2>

<p><strong><code>androidTestCompile</code></strong> - <strong>androidTest</strong> folder - ui testing</p>

<p><strong><code>testCompile</code></strong> - <strong>test</strong> folder - unit testing</p>

<h2>For <code>Unit</code> Test:</h2>

<p>Add:</p>

<pre><code>testCompile 'junit:junit:4.12'
</code></pre>

<p>To:</p>

<pre><code>dependencies {
    compile fileTree(include: ['*.jar'], dir: 'libs')
    compile 'com.android.support:appcompat-v7:22.0.0'
    androidTestCompile 'com.android.support.test.espresso:espresso-core:2.0'
    androidTestCompile 'com.android.support.test:testing-support-lib:0.1'
    testCompile 'junit:junit:4.12' // &lt;-- added
}
</code></pre>

<h2>For your <code>Espresso</code> Test:</h2>

<p>Remove Junit and Annotations.</p>

<pre><code>public class MainActivityTest extends ActivityInstrumentationTestCase2&lt;MainActivity&gt; {
    public MainActivityTest(){
        super(MainActivity.class);
    }
    Activity mActivity;

    @Override
    protected void setUp() throws Exception {
        super.setUp();

        mActivity = getActivity();
        // injectInstrumentation(InstrumentationRegistry.getInstrumentation()); // not sure what this is 

    }
    private final String STRING_TO_TYPE = ""Hello, Testing"";

    public void testChangeText_sameActivity()
    {
        onView(withId(R.id.edittextview)).perform(typeText(STRING_TO_TYPE), closeSoftKeyboard());
        onView(withId(R.id.edittextview)).check(matches(withText(STRING_TO_TYPE)));
    }
}
</code></pre>

<h3>Examples:</h3>

<p><a href=""https://github.com/googlesamples/android-testing/blob/master/espresso/BasicSample/app/src/androidTest/java/com/example/android/testing/espresso/BasicSample/ChangeTextBehaviorTest.java"" rel=""noreferrer"">https://github.com/googlesamples/android-testing/blob/master/espresso/BasicSample/app/src/androidTest/java/com/example/android/testing/espresso/BasicSample/ChangeTextBehaviorTest.java</a>
<a href=""https://github.com/jaredsburrows/AndroidGradleTemplate"" rel=""noreferrer"">https://github.com/jaredsburrows/AndroidGradleTemplate</a></p>

<p><strong>Official Documentation:</strong> <a href=""https://developer.android.com/tools/testing-support-library/index.html"" rel=""noreferrer"">https://developer.android.com/tools/testing-support-library/index.html</a> and <a href=""https://code.google.com/p/android-test-kit/wiki/AndroidJUnitRunnerUserGuide"" rel=""noreferrer"">https://code.google.com/p/android-test-kit/wiki/AndroidJUnitRunnerUserGuide</a></p>
",950427,,950427,,2015-05-24 18:55:37,2015-05-24 18:55:37,,,,9,,,
Android,46815305,2,,46774218,2017,,13,,"<p>The problem in your case is, that if you have nullable values Kotlin will generate several constructors for each possible constructor.</p>

<p>That means that you have to define a default constructor and fill it with default values. </p>

<p>If you want to have another one which should be ignored you should make sure to use the parent constructor with all those parameters.</p>

<p>Example:</p>

<pre><code>@Entity(tableName = ""inspections"")
data class Inspection(
@SerializedName(""id"")
var id: Int = 0,

@PrimaryKey
@SerializedName(""guid"")
var guid: String = """",

@SerializedName(""score"")
var score: Double = 0.0,

@SerializedName(""notification_sent_at"")
var notificationSentAt: Date = Date(),

var wasUploaded: Boolean = false)  {

@Ignore
constructor() : this(0, """", 0.0, Date(), false)
}
</code></pre>

<p>In this case only two constructors will be generated ""under the hood"". If you have nullable values you will have all possible constructors available.</p>

<p>Example:</p>

<pre><code>data class Test(var id: Int = 0, var testString: String? = null, var testBool : Boolean? = null) {
   constructor(0)
} 
</code></pre>

<p>generates </p>

<pre><code>constructor(var id:Int)
constructor() : this(0)
constructor(var id:Int, var testString: String)
constructor(var id:Int, var testBool: Boolean) 
constructor(var id:Int, var testString: String, var testBool : Boolean)
// .. and so on
</code></pre>

<p>Since you'r looking for an official documentation, you may want to look at <a href=""https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html"" rel=""noreferrer"">Overloads Generation</a>.</p>

<p>After testing your class which works flawlessly i found in another post that you have to check if you used <code>apply plugin: 'kotlin-kapt'</code> in your Gradle.</p>

<p>Double check that you've valid type converters for your Date class. I wrote <a href=""https://github.com/googlesamples/android-architecture-components/issues/43"" rel=""noreferrer"">that issue</a> longer time ago.</p>

<p>After recoding your stuff above it worked just fine by adding a UserPermissions class like that:</p>

<pre><code>data class UserPermissions(var permissionid: String) 
</code></pre>

<p>Edit: After using your UserPermission class everything worked just fine. Please take care if you use the proper import (util.Date instead of sql.Date for example).</p>

<p>Another problem is that your using an old very buggy library of room. </p>

<p>The current version (while writing this) is</p>

<pre><code>implementation ""android.arch.persistence.room:runtime:1.0.0-beta2""
kapt ""android.arch.persistence.room:compiler:1.0.0-beta2""
implementation ""android.arch.persistence.room:rxjava2:1.0.0-beta2""
</code></pre>

<p>I wrote <a href=""https://github.com/googlesamples/android-architecture-components/issues/172"" rel=""noreferrer"">an issue</a> long time ago </p>
",2032539,,2032539,,2017-10-20 9:27:26,2017-10-20 9:27:26,,,,12,,,
Android,38406167,2,,38130035,2016,,13,,"<p>The easiest way to cancel an in-app purchase is to consume it. If you use the Google provided <a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample/util/IabHelper.java"">IabHelper</a> you can just call consumeAsync and pass in the Purchase. I maintain a function to consume all the app's in-app products; this is essentially a billing reset function for testing.</p>
",1943229,,,,,2016-07-15 23:10:12,,,,6,,,
Android,31929113,2,,31928868,2015,,13,,"<p>As per the current example: <a href=""https://github.com/googlesamples/android-RuntimePermissions/blob/master/Application/src/main/java/com/example/android/system/runtimepermissions/MainActivity.java#L195"">https://github.com/googlesamples/android-RuntimePermissions/blob/master/Application/src/main/java/com/example/android/system/runtimepermissions/MainActivity.java#L195</a></p>

<pre><code>@Override
public void onRequestPermissionsResult(int requestCode, String[] permissions,
        int[] grantResults) {
    if (requestCode == REQUEST_CAMERA) {
        if (grantResults[0] == PackageManager.PERMISSION_GRANTED) {
            doThing();
            //STORE FALSE IN SHAREDPREFERENCES
        } else {
            //STORE TRUE IN SHAREDPREFERENCES
        }
    }
</code></pre>

<p>Store a boolean in SharedPreferences with key as your permission code and value as indicated above, to indicate whether that preference has been denied before.</p>

<p>Sadly, you probably can't check against a preference that has been accepted and later denied while your app is running. The final spec is not available, but there's a chance that your app either gets restarted or gets mock values until the next launch.</p>
",1266326,,,,,2015-08-10 21:02:36,,,,3,,,
Android,38179087,2,,38160643,2016,,14,,"<p>You can't get fingerprint template or image from android Fingerprint API.
Fingerprint data are stored in a secure place by android system and are not accessible.</p>

<p>But you can ask the system to authenticate the user.</p>

<p>Here <a href=""https://github.com/googlesamples/android-FingerprintDialog"" rel=""noreferrer"">sample code</a></p>

<p>The doc, in section <a href=""https://developer.android.com/about/versions/marshmallow/android-6.0.html"" rel=""noreferrer"">Fingerprint Authentication</a> </p>
",4559849,,,,,2016-07-04 7:29:47,,,,2,,,
Android,44483001,2,,36206989,2017,,14,,"<p>Some of the best examples of how to organise your components, modules, and packages can be found in the Google Android Architecture Blueprints Github repo <a href=""https://github.com/googlesamples/android-architecture"" rel=""noreferrer"">here</a>.</p>

<p>If you examine the source code there, you can see there is one single app-scoped Component (with a lifecycle of the duration of the whole app) and then separate Activity-scoped Components for the Activity and Fragment corresponding to a given functionality in a project. For example, there are the following packages:</p>

<pre><code>addedittask
taskdetail
tasks
</code></pre>

<p>Inside each package there is a module, component, presenter etc. For instance, inside <code>taskdetail</code> there are the following classes:</p>

<pre><code>TaskDetailActivity.java
TaskDetailComponent.java
TaskDetailContract.java
TaskDetailFragment.java
TaskDetailPresenter.java
TaskDetailPresenterModule.java
</code></pre>

<p>The advantage of organising this way (rather than grouping all of the activities in one component or module) is that you can take advantage of Java accessibility modifiers and fulfil Effective Java item 13. In other words, the functionally grouped classes will be in the same package and you can take advantage of <code>protected</code> and <code>package-private</code> <a href=""https://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html"" rel=""noreferrer"">accessibility modifiers</a> to prevent unintended usages of your classes.</p>
",5241933,,,,,2017-06-11 10:54:13,,,,1,,,
Android,39064930,2,,39022845,2016,,14,,"<p>What you need to do is introduce new variables:</p>

<pre><code>public static final String CAMERA_FRONT = ""1"";
public static final String CAMERA_BACK = ""0"";

private String cameraId = CAMERA_BACK;
</code></pre>

<p>remove <em>cameraId</em> <a href=""https://github.com/googlesamples/android-Camera2Video/blob/master/Application/src/main/java/com/example/android/camera2video/Camera2VideoFragment.java#L431"" rel=""noreferrer"">local variable</a> from <em>openCamera</em> method.</p>

<pre><code>public void switchCamera() {
    if (cameraId.equals(CAMERA_FRONT)) {
        cameraId = CAMERA_BACK;
        closeCamera();
        reopenCamera();
        switchCameraButton.setImageResource(R.drawable.ic_camera_front);

    } else if (cameraId.equals(CAMERA_BACK)) {
        cameraId = CAMERA_FRONT;
        closeCamera();
        reopenCamera();
        switchCameraButton.setImageResource(R.drawable.ic_camera_back);
    }
}

public void reopenCamera() {
    if (mTextureView.isAvailable()) {
        openCamera(mTextureView.getWidth(), mTextureView.getHeight());
    } else {
        mTextureView.setSurfaceTextureListener(mSurfaceTextureListener);
    }
}
</code></pre>
",5963700,,,,,2016-08-21 13:50:03,,,,4,,,
Android,27268376,2,,27267850,2014,,14,,"<p>you can view this example may this will help you</p>

<p>Android Camera2Basic Sample</p>

<p>This sample demonstrates the basic use of Camera2 API. Check the source code to see how you can display camera preview and take pictures. Pre-requisites</p>

<p>Android SDK v21
Android Build Tools v21.1.1
Android Support Repository</p>

<p><a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a></p>
",3690456,,,,,2014-12-03 9:48:48,,,,2,,,
Android,45878920,2,,45783523,2017,,14,,"<p>""A binding with matching key exists in component"" means that you have bound a dependency somewhere in your entire object graph but it cannot be reached from the subcomponent where it needs to be injected. Here is the javadoc:</p>

<blockquote>
  <p>Utility code that looks for bindings matching a key in all subcomponents in a binding graph so that a user is advised that a binding exists elsewhere when it is not found in the current subgraph. If a binding matching a key exists in a sub- or sibling component, that is often what the user actually wants to use.</p>
</blockquote>

<p><a href=""https://i.stack.imgur.com/Qs743.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/Qs743.png"" alt=""A diagram of where the binding is present in the sibling component""></a></p>

<p>For instance, assume you have two Activities, ActivityA and ActivityB. You generate subcomponents with <code>@ContributesAndroidInjector</code> and bind <code>Foo</code> in the ActivityA module but not the ActivityB module. If you request injection for <code>Foo</code> in ActivityB with <code>@Inject Foo foo</code> you will get that error message.</p>

<p>In your particular case, the error you are getting can be reproduced by: </p>

<ol>
<li><p>Cloning the project from GitHub</p>

<pre><code>git clone https://github.com/googlesamples/android-architecture-components.git`
</code></pre></li>
<li><p>Copy-pasting <code>MainActivity</code> into a new file <code>ContactsActivity</code></p></li>
<li><p>Modifying <code>MainActivityModule</code> to look like your <code>ActivityModule</code></p></li>
</ol>

<p>So from this we can conclude that your <code>ActivityModule</code> is problematic. The <code>@ContributesAndroidInjector</code> is not as simple as it might seem. It actually means you are creating a new Dagger 2 subcomponent for the Activity you specify there (see the <a href=""https://google.github.io/dagger//android.html"" rel=""nofollow noreferrer"">docs here</a>). </p>

<p>A subcomponent can use bindings from a parent component but not sibling components. Your two lines for <code>ContributesAndroidInjector</code> in the <code>ActivityModule</code> create two sibling subcomponents: one for <code>MainActivity</code> and one for <code>ContactsActivity</code>.</p>

<p>However, <code>NavigationController</code> is dependent on <code>MainActivity</code> which is bound in the object graph for the <code>MainActivity</code> subcomponent but not in that for the <code>ContactsActivity</code> subcomponent. <code>AddContactsFragment</code> has become part of the object graph for the <code>ContactsActivity</code> subcomponent and doesn't have access to <code>MainActivity</code> anymore. This means that when Dagger 2 tries to inject the <code>NavigationController</code> inside your <code>AddContactsFragment</code> it cannot provide <code>MainActivity</code> as a dependency for it. This explains the ""cannot provide"" part of the error message.</p>

<p>Although it can't provide <code>MainActivity</code> in that particular object graph, the <code>AndroidInjector</code> <em>does</em> know in general about <code>MainActivity</code> hence the error message ""a binding key exists"". What binding key is this? A key that binds <code>MainActivity.class</code> to a <code>MainActivityFactory</code>. Where is this key bound? In your <code>ActivityModule</code> when you wrote the <code>@ContributesAndroidInjector</code> for <code>MainActivity</code>.</p>

<p>How to fix this is getting beyond scope of a StackOverflow question because it involves a lengthy refactor of the code. You would need to re-organise the object graph so that the <code>NavigationController</code> no longer depends on <code>MainActivity</code>. Perhaps you could make it depend on <code>AppCompatActivity</code> since that is a superclass of both your Activities. You would then need to stop using <code>ContributesAndroidInjector</code> and write explicit modules for your two Activities that include bindings for <code>AppCompatActivity</code>.</p>

<p>However, for now please go back to basics and start with something easier. It is a recipe for disaster to start with a complex project without a complete understanding and just modify it hoping that it will work. </p>

<p>The <a href=""https://github.com/codepath/dagger2-example"" rel=""nofollow noreferrer"">Codepath Dagger 2 tutorial project</a> is much easier to understand and will get you familiar with the basic concepts involved in Dagger 2. Once you are comfortable with the basic concepts and have understood dependent components and sub-components, then you can attempt a more difficult example. Good luck!</p>
",5241933,,5241933,,2018-10-19 2:51:49,2018-10-19 2:51:49,,,,3,,,
Android,32727163,2,,32725367,2015,,15,,"<p>Edit after clarification of the question; original answer at bottom</p>

<p>Depends on where you're doing your processing.</p>

<p>If you're using RenderScript, you can connect a Surface from a SurfaceView or a TextureView to an Allocation (with <a href=""http://developer.android.com/reference/android/renderscript/Allocation.html#setSurface(android.view.Surface)"">setSurface</a>), and then write your processed output to that Allocation and send it out with Allocation.ioSend().  The <a href=""https://github.com/googlesamples/android-HdrViewfinder"">HDR Viewfinder demo</a> uses this approach.</p>

<p>If you're doing EGL shader-based processing, you can connect a Surface to an EGLSurface with <a href=""http://developer.android.com/reference/javax/microedition/khronos/egl/EGL10.html#eglCreateWindowSurface(javax.microedition.khronos.egl.EGLDisplay,%20javax.microedition.khronos.egl.EGLConfig,%20java.lang.Object,%20int[])"">eglCreateWindowSurface</a>, with the Surface as the native_window argument.  Then you can render your final output to that EGLSurface and when you call eglSwapBuffers, the buffer will be sent to the screen.</p>

<p>If you're doing native processing, you can use the NDK <a href=""https://developer.android.com/ndk/reference/native__window_8h.html"">ANativeWindow methods</a> to write to a Surface you pass from Java and <a href=""https://developer.android.com/ndk/reference/native__window__jni_8h.html"">convert</a> to an ANativeWindow.</p>

<p>If you're doing Java-level processing, that's really slow and you probably don't want to.  But can use the new Android M <a href=""http://developer.android.com/reference/android/media/ImageWriter.html"">ImageWriter</a> class, or upload a texture to EGL every frame. </p>

<p>Or as you say, draw to an ImageView every frame, but that'll be slow.</p>

<hr>

<p>Original answer:</p>

<p>If you are capturing JPEG images, you can simply copy the contents of the ByteBuffer from <code>Image.getPlanes()[0].getBuffer()</code> into a <code>byte[]</code>, and then use <code>BitmapFactory.decodeByteArray</code> to convert it to a Bitmap.</p>

<p>If you are capturing YUV_420_888 images, then you need to write your own conversion code from the 3-plane YCbCr 4:2:0 format to something you can display, such as a int[] of RGB values to create a Bitmap from; unfortunately there's not yet a convenient API for this.</p>

<p>If you are capturing RAW_SENSOR images (Bayer-pattern unprocessed sensor data), then you need to do a whole lot of image processing or just save a DNG.</p>
",1344825,,1344825,,2015-09-25 18:54:25,2015-09-25 18:54:25,,,,6,,,
Android,32404701,2,,32393134,2015,,16,,"<p>For Android, I tried to use <code>Place picker for Android</code>. It can add the <code>built-in place picker UI widget</code> to your app, so users can choose from a set of nearby places displayed on a map. It easy to use, you just need to do is:</p>

<pre><code>int PLACE_PICKER_REQUEST = 1;
PlacePicker.IntentBuilder builder = new PlacePicker.IntentBuilder();    
startActivityForResult(builder.build(this), PLACE_PICKER_REQUEST);
</code></pre>

<p>It will show the UI below to pick a place for you, and you can get the place info by using below:</p>

<pre><code>protected void onActivityResult(int requestCode, int resultCode, Intent data) {
  if (requestCode == PLACE_PICKER_REQUEST) {
    if (resultCode == RESULT_OK) {
        Place place = PlacePicker.getPlace(data, this);
        String toastMsg = String.format(""Place: %s"", place.getName());
        Toast.makeText(this, toastMsg, Toast.LENGTH_LONG).show();
    }
  }
}
</code></pre>

<p><a href=""https://i.stack.imgur.com/REjZCl.jpg""><img src=""https://i.stack.imgur.com/REjZCl.jpg"" alt=""enter image description here""></a></p>

<p>For more details, please refer to guide <a href=""https://developers.google.com/places/android-api/placepicker"">here</a> and code <a href=""https://github.com/googlesamples/android-play-places/blob/master/PlacePicker/Application/src/main/java/com/example/google/playservices/placepicker/PlacePickerFragment.java#L106-L170"">here</a>.</p>

<p>However, it cannot set the place type because it no feature for the Build in UI.. If you really need to set, you should use <code>Google Places API Web Service API</code> <a href=""https://developers.google.com/places/web-service/search#PlaceSearchRequests"">here</a>, search the location yourself, parse the JSON data, and show on your own UI.</p>

<p>A Nearby Search lets you search for places within a specified area. You can refine your search request by supplying keywords or specifying the type of place you are searching for.</p>

<p>A Nearby Search request is an HTTP URL of the following form:</p>

<pre><code>https://maps.googleapis.com/maps/api/place/nearbysearch/output?parameters
</code></pre>

<p>Note that in parameters you need to set <code>types=hospital</code></p>

<p><strong>EDIT</strong></p>

<p>Example on how to pass the search request for specific locations in JSON using the google places API web API web service API.</p>

<p>Request</p>

<pre><code>location: -33.8670,151.1957
radius: 500
types: food
name: cruise
key: API_KEY
</code></pre>

<p>Url for this:</p>

<p><a href=""https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=-33.8670,151.1957&amp;radius=500&amp;types=food&amp;name=cruise&amp;key=API_KEY"">https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=-33.8670,151.1957&amp;radius=500&amp;types=food&amp;name=cruise&amp;key=API_KEY</a></p>

<p>and Response JSON like this:</p>

<pre><code>{
   ""debug_log"" : {
      ""line"" : []
   },
   ""html_attributions"" : [],
   ""logging_info"" : {
      ""experiment_id"" : [],
      ""query_geographic_location"" : ""AU""
   },
   ""results"" : [
      {
         ""geometry"" : {
            ""location"" : {
               ""lat"" : -33.86879,
               ""lng"" : 151.194217
            }
         },
         ""icon"" : ""http://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png"",
         ""id"" : ""21a0b251c9b8392186142c798263e289fe45b4aa"",
         ""name"" : ""Rhythmboat Cruises"",
         ""opening_hours"" : {
            ""open_now"" : false,
            ""weekday_text"" : []
         },
         ""photos"" : [
            {
               ""height"" : 426,
               ""html_attributions"" : [
                  ""\u003ca href=\""https://www.google.com/maps/views/profile/104066891898402903288\""\u003eRhythmboat Cruises\u003c/a\u003e""
               ],
               ""photo_reference"" : ""CmRdAAAA-YL_I_Gk02blOX6S0nKHry8PFu9pDyp3Y9AnqISsa3Eq8mkbdD5mXuu1Fax60s0nSy3iiX-h5j-ztyLHcc1-782MsLQsgLLa4t3ZgDmCMll-a8ABapZGnZwDKByk67LFEhBgedv_u_eYFsEo9ay8jxJjGhTUHKPJ4G82vBJqSNliuv7UlAtclw"",
               ""width"" : 640
            }
         ],
         ""place_id"" : ""ChIJyWEHuEmuEmsRm9hTkapTCrk"",
         ""reference"" : ""CnRmAAAAvQlMKw-XtxEY4vWFCvudF7CEMQGI5ycNbfVgGl9rAF75fdiPOiLJw1k9NL2v8ZIJsOJuRS3Lm9Dw1vga4ajycAs7PlxN1MVnnYT9la0pBvEvSQNlyvszKANS1R4P7Mvk_jhqswMggqCUtwJ13LN2hRIQOiAkLTWUi3DOjVVOw7J5IRoUb_cJyJaJNqKdmkDM2f0OjQjh9F0"",
         ""scope"" : ""GOOGLE"",
         ""types"" : [ ""restaurant"", ""food"", ""point_of_interest"", ""establishment"" ],
         ""vicinity"" : ""Pyrmont Bay Wharf (Near Australia Maritime Museum), Pyrmont, NSW 2009""
      },
      {
         ""geometry"" : {
            ""location"" : {
               ""lat"" : -33.867591,
               ""lng"" : 151.201196
            }
         },
         ""icon"" : ""http://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png"",
         ""id"" : ""a97f9fb468bcd26b68a23072a55af82d4b325e0d"",
         ""name"" : ""Australian Cruise Group"",
         ""opening_hours"" : {
            ""open_now"" : false,
            ""weekday_text"" : []
         },
         ""photos"" : [
            {
               ""height"" : 1331,
               ""html_attributions"" : [
                  ""\u003ca href=\""https://www.google.com/maps/views/profile/110751364053842618118\""\u003eAustralian Cruise Group\u003c/a\u003e""
               ],
               ""photo_reference"" : ""CmRdAAAAtEoj29FJcNBccrsu6bHt0xgwVGhYlciCY1fe6gTr_d5_KkeP3LITnOwnpNRJWnX39B04-aIBOKXKJH6ltx948T5vWIYBoah1yZDXsWngWZ5kMsK7xyCB5P_q_xBIBxxUEhAYWeB4PiOm_Jy093fB-j0iGhSYmIs9xB2aa6u-RH8V8lZEk-Q5ig"",
               ""width"" : 2000
            }
         ],
         ""place_id"" : ""ChIJrTLr-GyuEmsRBfy61i59si0"",
         ""reference"" : ""CnRqAAAAFbukrZvRNsc05TreHUCrPEya5NcN9v0fFLLaK-D1fSyxFTuQlUDhDstU3qwXKw_fADX4W6guUkexax1nufgiYIuGCKoZPEnup1r-LhGGNz9dn1uf9Of5iOtZ1XgCeDjJaYvGbSB3C0pAXL8r9kOsmhIQbx2Sia2DAWTjtSZwuh5aehoUhM6upqBCDLhGruZAGGsCOwAiIq8"",
         ""scope"" : ""GOOGLE"",
         ""types"" : [
            ""restaurant"",
            ""travel_agency"",
            ""food"",
            ""point_of_interest"",
            ""establishment""
         ],
         ""vicinity"" : ""32 The Promenade, King Street Wharf 5, Sydney""
      },
      {
         ""geometry"" : {
            ""location"" : {
               ""lat"" : -33.870943,
               ""lng"" : 151.190311
            }
         },
         ""icon"" : ""http://maps.gstatic.com/mapfiles/place_api/icons/bar-71.png"",
         ""id"" : ""e644f7f34cf875b9919c6548f1b721947362850a"",
         ""name"" : ""Lunch Cruise with Jazz on Sydney Harbour"",
         ""opening_hours"" : {
            ""open_now"" : false,
            ""weekday_text"" : []
         },
         ""photos"" : [
            {
               ""height"" : 292,
               ""html_attributions"" : [
                  ""\u003ca href=\""https://www.google.com/maps/views/profile/105423912060796272053\""\u003eFrom a Google User\u003c/a\u003e""
               ],
               ""photo_reference"" : ""CmRdAAAAR4bqFTKYWdBwZwdBdON_JRD7V_joTwwIPwRUpZIZWkSSd8GQ3P2O-_aQbUJdL2RhoAyzCUIF0f--DI4oXFneTpj5zZfFq-iFiT7i_x0tjnDveIY8tJv-6o0uWSSjYqabEhCKqQWZqrKAoddjDcc64N48GhQZ2T1_ntPzNKCooHpZzlYQ7AxFOA"",
               ""width"" : 438
            }
         ],
         ""place_id"" : ""ChIJLfySpTOuEmsRPCRKrzl8ZEY"",
         ""reference"" : ""CoQBewAAAFd2fO_YWGTiT4RzXWb5tsOuOt7YyV_ScQOwm0tqJSrAyACCczeOzV-P_mgZLro1oKP_34Nt0nVC_1OEKAQUcd7cUm7xmAMSX-EkbSWiD0kOWGgGgKuDRtb0t_8qsxBGU_izugWCyK7SRWezTxELYNdkS0OEiSWPnvhxvXuQktBBEhAAtEe7fagW2kUR14T1QpVsGhQBO7YpIyYSPvo4zUJuL_bX30nJZw"",
         ""scope"" : ""GOOGLE"",
         ""types"" : [ ""bar"", ""restaurant"", ""food"", ""point_of_interest"", ""establishment"" ],
         ""vicinity"" : ""37 Bank St, Pyrmont""
      }
   ],
   ""status"" : ""OK""
}
</code></pre>

<p>The below example returns a list of hospitals near London, England.</p>

<pre><code>https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=51.503186,-0.126446&amp;radius=5000&amp;types=hospital&amp;key=API_KEY
</code></pre>

<p>For more details please refer <a href=""https://developers.google.com/places/web-service/"">here</a>.</p>
",4186942,,4186942,,2015-09-07 6:37:16,2015-09-07 6:37:16,,,,7,,,
Android,46844610,2,,44922761,2017,,17,,"<p>Just adding this answer for future reference: the same issue was also raised with the Android Arch Components team a while ago and the <a href=""https://github.com/googlesamples/android-architecture-components/issues/35"" rel=""noreferrer"">official answer</a> for now is:</p>

<blockquote>
  <p>(...) it is just a warning. Should not be a problem.</p>
</blockquote>

<p>This applies to warnings following the format mentioned in the title of the question, and include:</p>

<blockquote>
  <p>w: warning: Supported source version 'RELEASE_7' from annotation processor 'android.arch.lifecycle.LifecycleProcessor' less than -source '1.8'
  w: </p>
  
  <p>w: warning: Supported source version 'RELEASE_7' from annotation processor 'android.arch.persistence.room.RoomProcessor' less than -source '1.8'
  w: </p>
</blockquote>

<p>Basically it's <code>javac</code> informing you that these annotation processors were compiled against and generate code for a different (older) version of Java (Java 7) than your module's source level is set to (Java 8). The reason for this is that the compiler cannot make any promises that the processors will then still behave correctly [but the developers can and did in this particular case].</p>

<p>Note that the warning is still issued if you remove the <code>-Xlint</code> compiler flag, so short of using <code>-nowarn</code> it cannot be suppressed unfortunately.</p>
",1029225,,,,,2017-10-20 7:53:34,,,,1,,,
Android,31949873,2,,31925769,2015,,17,,"<p>If the only capture request you send to the camera is the one for the final picture, this is not surprising.</p>

<p>The camera automatic exposure, focus, and white balance routines generally need a second or two of streaming buffers before they converge to good results.</p>

<p>While you don't need to draw preview on screen, the simplest method here is to first run a repeating request targeting a dummy SurfaceTexture for a second or two, and then fire off the JPEG capture.
You could just stream the JPEG capture, but JPEG capture is slow, so you'll need a longer time for convergence (plus it's more likely a camera implementation has a bug with repeated JPEG capture and getting good exposure, than with a typical preview).</p>

<p>So, create a dummy SurfaceTexture with a random texture ID argument:</p>

<pre><code>private SurfaceTexture mDummyPreview = new SurfaceTexture(1);
private Surface mDummySurface = new Surface(mDummyPreview);
</code></pre>

<p>and include the Surface in your session configuration.  Once the session is configured, create a preview request that targets the dummy preview, and after N capture results have come in, submit the capture request for the JPEG you want.  You'll want to experiment with N, but probably ~30 frames is enough.</p>

<p>Note that you're still not dealing with:</p>

<ul>
<li>Locking AF to ensure a sharp image for your JPEG</li>
<li>Running AE precapture to allow for flash metering, if you want to  allow for flash use</li>
<li>Having some way for the user to know what they'll be capturing, since there's no preview, they can't aim the device at anything very well.</li>
</ul>

<p>The AF lock and precapture trigger sequences are included in Camera2Basic sample here: <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a>, so you can take a look at what those do.</p>
",1344825,,1344825,,2015-08-13 20:43:30,2015-08-13 20:43:30,,,,7,,,
Android,42820930,2,,42820003,2017,,17,,"<p>As you can see in <strong>Google's</strong> samples (<a href=""https://github.com/googlesamples/android-architecture"" rel=""noreferrer"">https://github.com/googlesamples/android-architecture</a>), <code>Activities</code> create <code>Presenters</code>. Also <code>Views</code> attach to <code>Activity</code> and <code>Presenters</code> get views (<code>Fragments</code>) as parameter. </p>

<p>After <code>Fragment</code> transaction committed or <code>Fragment</code> (view) state restored <code>Presenters</code> get created and take <code>Fragments</code> (views) as parameter than call </p>

<pre><code>view.setPresenter(T presenter); 
</code></pre>

<p>methods of views and <code>Presenters</code> get registered to view.</p>

<p>I think creating <code>Presenter</code> in <code>Fragment</code> is not a good practice. First of all they are <strong>separate layers</strong>. This is illegal for <strong>Separation of concerns</strong>. And second, if you create presenter in <code>Fragment</code>, you bind your Presenter's life to view's <code>LifeCycle</code> and when <code>Fragment</code> is destroyed and recreated, you create a new presenter but they're different layers.</p>

<p><strong>The model</strong> is an interface defining the data to be displayed or otherwise acted upon in the user interface.</p>

<p><strong>The presenter</strong> acts upon the model and the view. It retrieves data from repositories (the model), and formats it for display in the view.</p>

<p><strong>The view</strong> is a passive interface that displays data (the model) and routes user commands (events) to the presenter to act upon that data.</p>

<p>So <code>Activity</code> can act as an <code>overall controller</code> which creates the <code>Presenters</code> and <code>Views</code> and connect them.</p>

<p><a href=""https://i.stack.imgur.com/ilxW3.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/ilxW3.png"" alt=""enter image description here""></a></p>

<p>If we talk about your question, yes you can register presenter in fragment. But you should avoid creating presenters in fragments which you use as a view.</p>

<p>But there're lot's of different approaches about MVP pattern in Android community like below.
<a href=""https://plus.google.com/communities/114285790907815804707"" rel=""noreferrer"">https://plus.google.com/communities/114285790907815804707</a></p>

<p>Why activities are not ui elements?
<a href=""http://www.techyourchance.com/activities-android/"" rel=""noreferrer"">http://www.techyourchance.com/activities-android/</a></p>
",1559852,,1559852,,2017-03-15 21:32:52,2017-03-15 21:32:52,,,,2,,,
Android,36726368,2,,36698770,2016,,17,,"<p>Seems that your jenkins user can't see android adb therefore build fails. Add adb to the system path or point it's exact location.</p>

<p>As to running specific tests via gradle command below is an example:</p>

<p><code>./gradlew app:connectedAndroidTest -Pandroid.testInstrumentationRunnerArguments.class=com.example.android.testing.blueprint.ui.espresso.EspressoTest#testMethodName</code></p>

<p>Taken from <a href=""https://github.com/googlesamples/android-testing-templates/tree/master/AndroidTestingBlueprint"" rel=""noreferrer"">here</a> with my slight modification. Your <code>connectedAndroidtest</code> command can vary depending on the test flavour existence.</p>
",2980933,,2980933,,2016-04-20 15:26:29,2016-04-20 15:26:29,,,,10,,,
Android,32150507,2,,32150500,2015,,19,,"<p>There is detailed instructions on the <a href=""http://tools.android.com/tech-docs/android-ndk-preview"">Android NDK Preview</a> site.</p>

<h2>The gist of it</h2>

<ul>
<li><a href=""http://developer.android.com/sdk/index.html"">Download</a> Android Studio 1.3+</li>
<li>Install the NDK bundle from <em>Tools > Android > SDK Manager</em>
<a href=""https://i.stack.imgur.com/TdOBo.png""><img src=""https://i.stack.imgur.com/TdOBo.png"" alt=""NDK in android sdk manager""></a></li>
<li>Import the hello-jn sample using <em>File > Import Sample</em> (Note: This sample is using the new <code>gradle-experimental</code> plugin)
<a href=""https://i.stack.imgur.com/4BX8f.png""><img src=""https://i.stack.imgur.com/4BX8f.png"" alt=""import sample diaglog""></a></li>
<li>Click <em>Run > Edit Configurations...</em> and andd a new <em>Android Native</em> configuration
<a href=""http://tools.android.com/_/rsrc/1436485240263/tech-docs/android-ndk-preview/ndk-native.png"">native run configuration http://tools.android.com/_/rsrc/1436485240263/tech-docs/android-ndk-preview/ndk-native.png</a></li>
<li>Run and debug your application as usual</li>
</ul>

<h2>A few things to try from there:</h2>

<ul>
<li>Generate JNI bindings for Native Java function.
<a href=""https://i.stack.imgur.com/YQ5GO.gif""><img src=""https://i.stack.imgur.com/YQ5GO.gif"" alt=""generate jni binding""></a></li>
<li>Put breakpoint in native code (with the current limitation that breakpoint on init/onCreate get skipped, should be already fixed in <a href=""http://tools.android.com/download/studio/canary"">Android Studio 1.4 Preview</a>)</li>
<li>Give <a href=""http://tools.android.com/feedback"">feedback</a> to the team</li>
<li>Try and contribute to the <a href=""https://github.com/googlesamples/android-ndk"">new sample on GitHub</a></li>
<li>Explore the <a href=""http://developer.android.com/ndk/index.html"">new documentation</a> and <a href=""http://developer.android.com/ndk/reference/index.html"">API reference</a>.</li>
</ul>
",656408,,656408,,2015-08-21 23:26:11,2015-08-21 23:26:11,,,,0,,,
Android,32051974,2,,32051973,2015,,19,,"<p>I modified the CameraSourcePreview (....) constructor to be as follows:</p>

<pre><code>public CameraSourcePreview(Context context, AttributeSet attrs) {
    super(context, attrs);
    mContext = context;
    mStartRequested = false;
    mSurfaceAvailable = false;

    mSurfaceView = new SurfaceView(context);
    mSurfaceView.getHolder().addCallback(new SurfaceCallback());
    addView(mSurfaceView);
    mSurfaceView.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            cameraFocus(mCameraSource, Camera.Parameters.FOCUS_MODE_CONTINUOUS_VIDEO);
        }
    });
}

private static boolean cameraFocus(@NonNull CameraSource cameraSource, @NonNull String focusMode) {
    Field[] declaredFields = CameraSource.class.getDeclaredFields();

    for (Field field : declaredFields) {
        if (field.getType() == Camera.class) {
            field.setAccessible(true);
            try {
                Camera camera = (Camera) field.get(cameraSource);
                if (camera != null) {
                    Camera.Parameters params = camera.getParameters();
                    params.setFocusMode(focusMode);
                    camera.setParameters(params);
                    return true;
                }

                return false;
            } catch (IllegalAccessException e) {
                e.printStackTrace();
            }

            break;
        }
    }

    return false;
}
</code></pre>

<p>The advice was given here: <a href=""https://github.com/googlesamples/android-vision/issues/2"" rel=""noreferrer"">https://github.com/googlesamples/android-vision/issues/2</a></p>

<p>and the code reference was here: <a href=""https://gist.github.com/Gericop/7de0b9fdd7a444e53b5a"" rel=""noreferrer"">https://gist.github.com/Gericop/7de0b9fdd7a444e53b5a</a></p>

<p>I also had to modify the FaceTrackerFactory draw(Canvas ...) method:</p>

<pre><code>@Override
public void draw(Canvas canvas) {
    Face face = mFace;
    if (face == null) {
        return;
    }

    // Draws a circle at the position of the detected face, with the face's track id below.
    float cx = translateX(face.getPosition().x + face.getWidth() / 2);
    float cy = translateY(face.getPosition().y + face.getHeight() / 2);
    canvas.drawCircle(cx, cy, FACE_POSITION_RADIUS, mFacePositionPaint);
    canvas.drawText(""id: "" + getId(), cx + ID_X_OFFSET, cy + ID_Y_OFFSET, mIdPaint);

    // Draws an oval around the face.
    float xOffset = scaleX(face.getWidth() / 2.0f);
    float yOffset = scaleY(face.getHeight() / 2.0f);
    float left = cx - xOffset;
    float top = cy - yOffset;
    float right = cx + xOffset;
    float bottom = cy + yOffset;
    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {
        canvas.drawOval(left, top, right, bottom, mBoxPaint);
    } else {
        canvas.drawCircle(cx, cy, Math.max(xOffset, yOffset), mBoxPaint);
    }
}
</code></pre>
",932052,,932052,,2015-08-17 13:52:09,2015-08-17 13:52:09,,,,2,,,
Android,27906489,2,,26664922,2015,,20,,"<p>If you take a look at your logs, immediately above the stack trace you'll probably see a warning similar to:</p>

<pre><code>W/OpenGLRenderer Layer exceeds max. dimensions supported by the GPU (1080x5856, max=4096x4096)
</code></pre>

<p>Scene animations work by creating a bitmap layer of the target scene. The GPU has a maximum capacity for this layer. On a Nexus 5 this is 4096x4096. Your target scene has views in it which result in a layer which is too large, probably due to the large amounts of text content. This exceeds the capacity of the GPU causing the app to crash. The reason why this doesn't occur on the emulator is because the host GPU has a greater memory.</p>

<p><strong>Solution</strong></p>

<p>Avoid creating a target layer which is higher than 4096 before the transition animation ends. Instead load your content after the transition ends. You can listen for the transition ended event by implementing the <a href=""https://developer.android.com/reference/android/transition/Transition.TransitionListener.html"" rel=""noreferrer"">TransitionListener interface</a>. An example of this can be found <a href=""https://github.com/googlesamples/android-ActivitySceneTransitionBasic/blob/master/Application/src/main/java/com/example/android/activityscenetransitionbasic/DetailActivity.java"" rel=""noreferrer"">here</a>. You can then load your content. </p>
",824903,,,,,2015-01-12 16:26:27,,,,4,,,
Android,7030900,2,,6763149,2011,,21,,"<p>There's an example app that comes with the NDK called <a href=""https://github.com/googlesamples/android-ndk/tree/master/native-audio"" rel=""nofollow noreferrer"">NativeAudio</a>. It has examples of nearly anything you would ever want to implement: effects, streaming, synthesis, etc. If you look at its code, you'll get a good head start.</p>
",573432,,3427520,,2018-07-25 7:11:49,2018-07-25 7:11:49,,,,0,,,
Android,43564630,2,,25462277,2017,,22,,"<p>Combining a few answers into a more digestible one because @VP's answer, while technically clear, is difficult to understand if it's your first time moving from Camera to Camera2:</p>

<p>Using <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a> as a starting point, modify the following:</p>

<p>In <code>createCameraPreviewSession()</code> init a new <code>Surface</code> from <code>mImageReader</code></p>

<pre><code>Surface mImageSurface = mImageReader.getSurface();
</code></pre>

<p>Add that new surface as a output target of your <code>CaptureRequest.Builder</code> variable.  Using the Camera2Basic sample, the variable will be <code>mPreviewRequestBuilder</code></p>

<pre><code>mPreviewRequestBuilder.addTarget(mImageSurface);
</code></pre>

<p>Here's the snippet with the new lines (see my @AngeloS comments):</p>

<pre><code>private void createCameraPreviewSession() {

    try {

        SurfaceTexture texture = mTextureView.getSurfaceTexture();
        assert texture != null;

        // We configure the size of default buffer to be the size of camera preview we want.
        texture.setDefaultBufferSize(mPreviewSize.getWidth(), mPreviewSize.getHeight());

        // This is the output Surface we need to start preview.
        Surface surface = new Surface(texture);

        //@AngeloS - Our new output surface for preview frame data
        Surface mImageSurface = mImageReader.getSurface();

        // We set up a CaptureRequest.Builder with the output Surface.
        mPreviewRequestBuilder = mCameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_PREVIEW);

        //@AngeloS - Add the new target to our CaptureRequest.Builder
        mPreviewRequestBuilder.addTarget(mImageSurface);

        mPreviewRequestBuilder.addTarget(surface);

        ...
</code></pre>

<p>Next, in <code>setUpCameraOutputs()</code>, change the format from <code>ImageFormat.JPEG</code> to <code>ImageFormat.YUV_420_888</code> when you init your <code>ImageReader</code>. (PS, I also recommend dropping your preview size for smoother operation - one nice feature of Camera2)</p>

<pre><code>mImageReader = ImageReader.newInstance(largest.getWidth() / 16, largest.getHeight() / 16, ImageFormat.YUV_420_888, 2);
</code></pre>

<p>Finally, in your <code>onImageAvailable()</code> method of <code>ImageReader.OnImageAvailableListener</code>, be sure to use @Kamala's suggestion because the preview will stop after a few frames if you don't close it</p>

<pre><code>    @Override
    public void onImageAvailable(ImageReader reader) {

        Log.d(TAG, ""I'm an image frame!"");

        Image image =  reader.acquireNextImage();

        ...

        if (image != null)
            image.close();
    }
</code></pre>
",630996,,,,,2017-04-22 21:07:04,,,,3,,,
Android,37787525,2,,37786796,2016,,22,,"<p>I remember when I was first reading about <code>RecyclerView</code>s - I agree it can be a little confusing at first. Hopefully, this explanation will help you understand it better.</p>

<hr>

<h1>RecyclerView basics</h1>

<h2>1. Adding the <code>RecyclerView</code></h2>

<p>First you need to add your <code>RecyclerView</code> to your XML layout. I'm assuming you know how to do this. You also declare it in your Java code:</p>

<pre><code>RecyclerView recyclerView = (RecyclerView) findViewById(R.id.your_recycler_view);
</code></pre>

<h2>2. Creating the <code>Adapter</code> and understanding <code>ViewHolder</code></h2>

<p>Next, you need to create an <strong><code>Adapter</code></strong> for it. This is a class that implements <code>RecyclerView.Adapter&lt;YourAdapter.YourViewHolder&gt;</code>. I will explain what this means in a minute.</p>

<p>I believe it helps to look at an example of an <code>Adapter</code> to understand how it works (e.g. <a href=""https://github.com/FarbodSalamat-Zadeh/FlashcardsApp/blob/master/app/src/main/java/com/satsumasoftware/flashcards/ui/adapter/CoursesAdapter.java"" rel=""noreferrer"">one I created</a> for an open-source app). I would also highly recommend looking through a set of Java files I have made as an example on Gist on GitHub: </p>

<p><a href=""https://gist.github.com/FarbodSalamat-Zadeh/7646564f48ee708c1582c013e1de4f07"" rel=""noreferrer"">https://gist.github.com/FarbodSalamat-Zadeh/7646564f48ee708c1582c013e1de4f07</a></p>

<p>I will be referencing the example files from the link above in this explanation so you can follow along.</p>

<p>You can see that the <code>Adapter</code> class contains an inner class, which is your <code>ViewHolder</code>. Therefore, it needs to extend <code>RecyclerView.ViewHolder</code>.</p>

<p>Inside this <code>ViewHolder</code>, you declare the variables for the layouts that will be used for each list item in your <code>RecyclerView</code>. In the constructor for your <code>ViewHolder</code>, you assign these variables. I'm referring to this part of the code (I'm giving my example below):</p>

<pre><code>    ExampleViewHolder(View itemView) {
        super(itemView);
        text1 = (TextView) itemView.findViewById(R.id.text1);
        text2 = (TextView) itemView.findViewById(R.id.text2);
    }
</code></pre>

<p>That's all you need for your <code>ViewHolder</code> (the inner class in your <code>Adapter</code>).</p>

<h2>3. Understanding the <code>Adapter</code></h2>

<p>Like most Java objects, you will need to have a constructor some private variables in your <code>Adapter</code> class. Here are mine:</p>

<pre><code>private ArrayList&lt;CustomClass&gt; mCustomObjects;

public ExampleAdapter(ArrayList&lt;CustomClass&gt; arrayList) {
    mCustomObjects = arrayList;
}
</code></pre>

<p>You will need to have your <code>ArrayList&lt;CustomClass&gt;</code> as a constructor parameter so you can pass the list so your <code>Adapter</code> can use it.</p>

<p>If you look at the rest of the <code>Adapter</code> class, it contains some methods which it overrides from what it extends. Let's have a quick look at what these are:</p>

<ul>
<li><code>getItemCount()</code> returns the size of your list.</li>
<li><code>onCreateViewHolder(...)</code> is used to inflate the layout for your list item.</li>
<li><code>onBindViewHolder(...)</code> configures your layouts for the list item (e.g. setting text to a <code>TextView</code>)</li>
</ul>

<p>For most cases, <code>getItemCount()</code> will just return the <code>size()</code> of your <code>ArrayList&lt;CustomClass&gt;</code>.</p>

<p>The <code>onCreateViewHolder(...)</code> method generally stays the same too:</p>

<pre><code>@Override
public ExampleViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {
    View view = LayoutInflater.from(parent.getContext()).inflate(android.R.layout.simple_list_item_2, parent, false);
    return new ExampleViewHolder(view);
}
</code></pre>

<p>You can see that I am inflating the layout that I will use as my list item (<code>android.R.layout.simple_list_item_2</code>). This layout is built in to Android so I don't need to create it - of course, your can use whatever layout you wish and then modify your <code>Adapter</code> for widgets that you may be using. The return type of this method will match whatever you named your <code>ViewHolder</code> inner class.</p>

<p>Now, the interesting bit is in <code>onBindViewHolder(...)</code>. You configure your layouts here, so it is completely up to you what you want to do. Here's a template you could use:</p>

<pre><code>@Override
public void onBindViewHolder(ExampleViewHolder holder, int position) {
    CustomClass object = mCustomObjects.get(position);

    String firstText = object.getFirstText()
    String secondText = object.getSecondText()

    holder.text1.setText(firstText);
    holder.text2.setText(secondText);
}
</code></pre>

<p>Basically, you access your <code>ViewHolder</code> variables (for the widgets in your list item layout) by doing <code>holder.myWidget</code>. The <code>holder</code> part is coming from the parameter, which is your <code>ViewHolder</code> we talked about earlier, and <code>myWidget</code> would be the name of the <code>View</code> variable from that.</p>

<p>In the example above, the <code>object</code> has a <code>getFirstText()</code> method, and the <code>ViewHolder</code> contains a <code>TextView</code> (<code>text1</code>), so I am setting the text.</p>

<p>There is also one more method - <code>onAttachedToRecyclerView(...)</code>. You can use this for more complex things, but at a basic level, it is usually this:</p>

<pre><code>@Override
public void onAttachedToRecyclerView(RecyclerView recyclerView) {
    super.onAttachedToRecyclerView(recyclerView);
}
</code></pre>

<h2>4. Configuring <code>RecyclerView</code></h2>

<p>Remember at the beginning, when we declared and assigned our <code>RecyclerView</code>?:</p>

<pre><code>RecyclerView recyclerView = (RecyclerView) findViewById(R.id.your_recycler_view);
</code></pre>

<p>Now we are going to configure it.</p>

<p>You start by setting a ""layout manager"". This determines how each list item will be displayed on screen. The common ones are <code>LinearLayoutManager</code> and <code>GridLayoutManager</code>. The former puts your list items into a standard list (nothing special really, but it is very useful), and the latter organises your list items into a grid type of layout.</p>

<p>In our example, we're going to use a <code>LinearLayoutManager</code>. To set this on the <code>RecyclerView</code>, we do this:</p>

<pre><code>recyclerView.setLayoutManager(new LinearLayoutManager(this));
</code></pre>

<p>That's all.</p>

<p>And all we have to do next is to set the <code>Adapter</code> class we created and customised earlier to your <code>RecyclerView</code>:</p>

<pre><code>ExampleAdapter adapter = new ExampleAdapter(yourCustomArrayList);
recyclerView.setAdapter(adapter);
</code></pre>

<p>In the above, I'm assuming your <code>adapter</code> only has one parameter, but this will depend on how you configured it earlier.</p>

<h2>5. Using your <code>RecyclerView</code></h2>

<p>The steps above should give you a working <code>RecyclerView</code>. If you get stuck, you can look at how I added one into my app <a href=""https://github.com/FarbodSalamat-Zadeh/FlashcardsApp/blob/master/app/src/main/java/com/satsumasoftware/flashcards/ui/adapter/CoursesAdapter.java"" rel=""noreferrer"">here</a>.</p>

<p>You can also look through the <a href=""https://www.github.com/googlesamples/android-RecyclerView"" rel=""noreferrer"">Google samples for the <code>RecyclerView</code> implementation</a>.</p>

<p>I hope all of this gave you a clear idea about how <code>RecyclerView</code> works.</p>

<hr>

<h1>Adding a click listener</h1>

<p>You may want to add a click listener so that you are not using the <code>RecyclerView</code> just for displaying items.</p>

<p>To do this, your inner <code>ViewHolder</code> class needs to implement <code>View.OnClickListener</code>. This is because you will set an <code>OnClickListener</code> to the <code>itemView</code> parameter of the <code>ViewHolder</code>'s constructor. Let me show you what I mean:</p>

<pre><code>public class ExampleClickViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener {

    TextView text1, text2;

    ExampleClickViewHolder(View itemView) {
        super(itemView);

        // we do this because we want to check when an item has been clicked:
        itemView.setOnClickListener(this);

        // now, like before, we assign our View variables
        title = (TextView) itemView.findViewById(R.id.text1);
        subtitle = (TextView) itemView.findViewById(R.id.text2);
    }

    @Override
    public void onClick(View v) {
        // The user may not set a click listener for list items, in which case our listener
        // will be null, so we need to check for this
        if (mOnEntryClickListener != null) {
            mOnEntryClickListener.onEntryClick(v, getLayoutPosition());
        }
    }
}
</code></pre>

<p>The only other things you need to add are a custom interface for your <code>Adapter</code> and a setter method:</p>

<pre><code>private OnEntryClickListener mOnEntryClickListener;

public interface OnEntryClickListener {
    void onEntryClick(View view, int position);
}

public void setOnEntryClickListener(OnEntryClickListener onEntryClickListener) {
    mOnEntryClickListener = onEntryClickListener;
}
</code></pre>

<p>So your new, click-supporting <code>Adapter</code> is complete.</p>

<p>Now, let's use it...</p>

<pre><code>    ExampleClickAdapter clickAdapter = new ExampleClickAdapter(yourObjects);
    clickAdapter.setOnEntryClickListener(new ExampleClickAdapter.OnEntryClickListener() {
        @Override
        public void onEntryClick(View view, int position) {
            // stuff that will happen when a list item is clicked
        }
    });
    recyclerView.setAdapter(clickAdapter);
</code></pre>

<p>It's basically how you would set up a normal <code>Adapter</code>, except that you use your setter method that you created to control what you will do when your user clicks a particular list item.</p>

<hr>

<p>To reiterate, you can look through a set of examples I made on this Gist on GitHub:</p>

<p><a href=""https://gist.github.com/FarbodSalamat-Zadeh/7646564f48ee708c1582c013e1de4f07"" rel=""noreferrer"">https://gist.github.com/FarbodSalamat-Zadeh/7646564f48ee708c1582c013e1de4f07</a> </p>
",4230345,,4230345,,2016-06-15 21:49:44,2016-06-15 21:49:44,,,,2,,,
Android,29002760,2,,28759454,2015,,22,,"<p><strong><em>UPDATE 3</em></strong>:  </p>

<p><strong><em><a href=""https://developer.android.com/training/location/change-location-settings#prompt"" rel=""nofollow noreferrer"">Prompt the user to change location settings</a></em></strong>
as @patrickandroid, mentioned in comments, the link from second update is broken</p>

<p><strong><em><a href=""https://github.com/googlesamples/android-play-location"" rel=""nofollow noreferrer"">GoogleSamples; android Location and options - for code reference.</a></em></strong></p>

<p><strong><em>UPDATE 2</em></strong>:  </p>

<p><strong><em><a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationSettings"" rel=""nofollow noreferrer"">GoogleSamples; - for code reference.</a></em></strong></p>

<blockquote>
  <p>This sample builds on the LocationUpdates sample included in this
  repo, and allows the user to update the device's location settings
  using a location dialog.</p>
  
  <p>Uses the SettingsApi to ensure that the device's system settings are
  properly configured for the app's location needs.</p>
</blockquote>

<hr>

<p><strong><em>UPDATE 1</em></strong>:  </p>

<p><strong><a href=""https://developer.android.com/google/play-services/index.html"" rel=""nofollow noreferrer"">Google Play services, Version 7.0 (March 2015) released...</a></strong>  </p>

<blockquote>
  <p><strong>Location settings</strong> - While the FusedLocationProviderApi combines multiple sensors to give you the optimal location, the accuracy of the
  location your app receives still depends greatly on the settings
  enabled on the device (GPS, wifi, airplane mode, and others). Using
  the new SettingsApi class, you can bring up a Location Settings dialog
  which displays a one-touch control for users to change their settings
  without leaving your app.</p>
</blockquote>

<p>Using the <strong><a href=""https://developer.android.com/reference/com/google/android/gms/location/SettingsApi.html"" rel=""nofollow noreferrer"">public interface SettingsApi</a></strong>  </p>

<blockquote>
  <ul>
  <li>Determine if the relevant system settings are enabled on the device to carry out the desired location request.</li>
  <li>Optionally, invoke a dialog that allows the user to enable the necessary location settings with a single tap.</li>
  </ul>
</blockquote>

<hr>

<hr>

<p>Leaving the previous part for reference:<br>
<strong><em>Update/Answer</em></strong><br>
For everybody looking for this answer, <strong>Google Play Services 7.0</strong><br>
It Adds APIs For Detecting Places And Connecting To Nearby Devices, Improves On Mobile Ads, Fitness Data, Location Settings, And More  </p>

<blockquote>
  <p>In Google Play services 7.0, were introducing a standard mechanism to
  check that the necessary location settings are enabled for a given
  LocationRequest to succeed. If there are possible improvements, you
  can display a one touch control for the user to change their settings
  without leaving your app.</p>
  
  <p><img src=""https://i.stack.imgur.com/81TfP.png"" alt=""exactly this""></p>
  
  <p>This API provides a great opportunity to make for a much better user
  experience, particularly if location information is critical to the
  user experience of your app such as was the case with Google Maps when
  they integrated the Location Settings dialog and saw a dramatic
  increase in the number of users in a good location state.</p>
</blockquote>

<p><strong>Source:</strong> <a href=""http://android-developers.blogspot.in/2015/03/google-play-services-70-places-everyone.html"" rel=""nofollow noreferrer"">Android developers blog: Google Play services 7.0 - Places Everyone!</a></p>

<blockquote>
  <p><strong>SDK Coming Soon!</strong><br>
  We will be rolling out Google Play services 7.0 over
  the next few days. Expect an update to this blog post, published
  documentation, and the availability of the SDK once the rollout is
  completed.</p>
</blockquote>

<p>will update the programmatic l-o-c after implementation  </p>
",2450263,,2450263,,2019-01-29 4:22:16,2019-01-29 4:22:16,,,,6,,,
Android,8382574,2,,8382501,2011,,22,,"<p>Update: Barcode Detection is now available in <a href=""http://android-developers.blogspot.com/2015/08/barcode-detection-in-google-play.html"" rel=""nofollow noreferrer"">Google Play services</a>.  <a href=""https://search-codelabs.appspot.com/codelabs/bar-codes#1"" rel=""nofollow noreferrer"">Code lab</a>, <a href=""https://developers.google.com/vision/barcodes-overview"" rel=""nofollow noreferrer"">api docs</a>, <a href=""https://github.com/googlesamples/android-vision"" rel=""nofollow noreferrer"">and a sample project</a>.</p>

<p>There is no API in android. You have to use third party libraries. You can try <a href=""http://code.google.com/p/zxing/"" rel=""nofollow noreferrer"">Zxing.</a> There are lot of discussions related to barcode scanning on stackoverflow. Search for them. Few are 
<a href=""https://stackoverflow.com/questions/2050263/using-zxing-to-create-an-android-barcode-scanning-app"">Using ZXing to create an android barcode scanning app</a>. </p>

<p><a href=""https://stackoverflow.com/questions/2739550/android-is-there-a-way-to-implement-the-barcode-scanner-into-an-app"">Android: Is there a way to implement the barcode scanner into an app?</a></p>
",495906,,-1,,2017-05-23 11:54:56,2015-08-22 13:51:53,,,,1,,,
Android,37153867,2,,26884956,2016,,22,,"<p>It is possible without System permissions from <a href=""https://github.com/android/platform_frameworks_base/blob/marshmallow-release/services/core/java/com/android/server/pm/PackageInstallerSession.java"" rel=""noreferrer"">Android M onwards</a>.</p>

<pre><code>if ((mPm.checkUidPermission(android.Manifest.permission.INSTALL_PACKAGES, installerUid)
        == PackageManager.PERMISSION_GRANTED)
        || (installerUid == Process.ROOT_UID)
        || mIsInstallerDeviceOwner) {
    mPermissionsAccepted = true;
} else {
    mPermissionsAccepted = false;
}
</code></pre>

<hr>

<p><strong>Silent install and uninstall of apps by Device Owner:</strong></p>

<p>A Device Owner can now silently install and uninstall applications using the PackageInstaller APIs, independent of Google Play for Work.</p>

<p><a href=""https://github.com/android/platform_frameworks_base/blob/marshmallow-release/services/core/java/com/android/server/pm/PackageInstallerSession.java"" rel=""noreferrer"">More in this link.</a></p>

<hr>

<p>This is possible from Android 6.0 and up.</p>

<ul>
<li>Make your app the Device owner.</li>
</ul>

<p>Once your app gets the Device owner permission, we can install, uninstall and update silently without any user intervention.</p>

<pre><code>public static boolean installPackage(Context context, InputStream in, String packageName)
        throws IOException {
    PackageInstaller packageInstaller = context.getPackageManager().getPackageInstaller();
    PackageInstaller.SessionParams params = new PackageInstaller.SessionParams(
            PackageInstaller.SessionParams.MODE_FULL_INSTALL);
    params.setAppPackageName(packageName);
    // set params
    int sessionId = packageInstaller.createSession(params);
    PackageInstaller.Session session = packageInstaller.openSession(sessionId);
    OutputStream out = session.openWrite(""COSU"", 0, -1);
    byte[] buffer = new byte[65536];
    int c;
    while ((c = in.read(buffer)) != -1) {
        out.write(buffer, 0, c);
    }
    session.fsync(out);
    in.close();
    out.close();

    session.commit(createIntentSender(context, sessionId));
    return true;
}



private static IntentSender createIntentSender(Context context, int sessionId) {
        PendingIntent pendingIntent = PendingIntent.getBroadcast(
                context,
                sessionId,
                new Intent(ACTION_INSTALL_COMPLETE),
                0);
        return pendingIntent.getIntentSender();
    }
</code></pre>

<p>Uninstall:</p>

<pre><code>String appPackage = ""com.your.app.package"";
Intent intent = new Intent(getActivity(), getActivity().getClass());
PendingIntent sender = PendingIntent.getActivity(getActivity(), 0, intent, 0);
PackageInstaller mPackageInstaller = getActivity().getPackageManager().getPackageInstaller();
mPackageInstaller.uninstall(appPackage, sender.getIntentSender());
</code></pre>

<p><a href=""https://github.com/googlesamples/android-testdpc/blob/5b8297e9d51983a774ba3391e28a6aa35ca3f062/app/src/main/java/com/afwsamples/testdpc/cosu/CosuUtils.java"" rel=""noreferrer"">Git repo here</a>.</p>
",2219600,,2219600,,2017-01-17 15:52:45,2017-01-17 15:52:45,,,,31,,,
Android,46883664,2,,46804775,2017,,23,,"<p>I had the same question by the way. And I found a sample <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/PersistenceContentProviderSample"" rel=""noreferrer"">here</a> which answers my question. Hope it does the same with you. </p>

<p>In short, this is in the DAO object which would be called from Content Provider's <code>query()</code> method.</p>

<pre><code>/**
 * Select all cheeses.
 *
 * @return A {@link Cursor} of all the cheeses in the table.
 */
@Query(""SELECT * FROM "" + Cheese.TABLE_NAME)
Cursor selectAll();
</code></pre>

<p>Notice how it returns <code>Cursor</code> object. Other operations, you can see for yourself in more detail in the sample.</p>

<p>This here is choice number 3 in the answer by @CommonsWare, I think.</p>
",2420677,,,,,2017-10-23 7:08:10,,,,4,,,
Android,32798532,2,,32787234,2015,,23,,"<p>You can grant and revoke permissions using:</p>

<pre><code>adb shell pm grant com.package.myapp android.permission.&lt;PERMISSION&gt;
adb shell pm revoke com.package.myapp android.permission.&lt;PERMISSION&gt;
</code></pre>

<p>To use from Java instrumentation tests call this method from Google samples:
<a href=""https://github.com/googlesamples/android-testing/blob/ed62c450e43f859333b3113d44dd59f75971b529/ui/espresso/IntentsBasicSample/app/src/androidTest/java/com/example/android/testing/espresso/BasicSample/DialerActivityTest.java#L94"">https://github.com/googlesamples/android-testing/blob/ed62c450e43f859333b3113d44dd59f75971b529/ui/espresso/IntentsBasicSample/app/src/androidTest/java/com/example/android/testing/espresso/BasicSample/DialerActivityTest.java#L94</a></p>
",5250468,,5250468,,2016-08-05 14:20:18,2016-08-05 14:20:18,,,,7,,,
Android,39008816,2,,38958876,2016,,23,,"<p>It seems you already have imported the opencv module, now, open your CMakeList.txt and add the follow lines:</p>

<pre><code>set(CMAKE_VERBOSE_MAKEFILE on)

add_library(lib_opencv SHARED IMPORTED)

set_target_properties(lib_opencv PROPERTIES IMPORTED_LOCATION
path-to-your-project/MyApplication/app/src/main/jniLibs/${ANDROID_ABI}/libopencv_java3.so)


include_directories(path-to-opencv-directory/OpenCV-android-sdk/sdk/native/jni/include)

set(CMAKE_CXX_FLAGS ""${CMAKE_CXX_FLAGS} -std=gnu++11"")
</code></pre>

<p>and edit the:</p>

<pre><code>target_link_libraries( # Specifies the target library.
                   native-lib
                   lib_opencv
                   # Links the target library to the log library
                   # included in the NDK.
                   $\{log-lib} )
</code></pre>

<p>to include your lib_opencv that you have created. To finish, you add the follow line:  </p>

<pre><code>abiFilters 'x86', 'x86_64', 'armeabi', 'armeabi-v7a', 'arm64-v8a', 'mips', 'mips64'
</code></pre>

<p>in your module app, like this:</p>

<pre><code>externalNativeBuild {

    cmake {
        cppFlags ""-std=c++11 -frtti -fexceptions""
        abiFilters 'x86', 'x86_64', 'armeabi', 'armeabi-v7a', 'arm64-v8a', 'mips', 'mips64'
    }
}
</code></pre>

<p>and below of buildTypes you add:</p>

<pre><code>sourceSets {
    main {
        jniLibs.srcDirs = ['path to your application /MyApplication/app/src/main/jniLibs/']
    }
}
</code></pre>

<p>For more details, you can see this: <a href=""https://github.com/googlesamples/android-ndk/tree/master/cmake/hello-libs"" rel=""noreferrer"">https://github.com/googlesamples/android-ndk/tree/master/cmake/hello-libs</a></p>
",6401599,,192373,,2018-03-27 11:58:26,2018-03-27 11:58:26,,,,6,,,
Android,34376994,2,,34368276,2015,,23,,"<p><a href=""https://google.github.io/android-testing-support-library/docs/espresso/setup/index.html"">Set the instrumentation runner</a></p>

<blockquote>
  <p>Add to the same build.gradle file the following line in
  android.defaultConfig: testInstrumentationRunner
  ""android.support.test.runner.AndroidJUnitRunner""</p>
</blockquote>

<pre><code>apply plugin: 'com.android.application'

android {
    ...

    defaultConfig {
        ...

        testInstrumentationRunner ""android.support.test.runner.AndroidJUnitRunner""
    }
}

dependencies {
    // App's dependencies, including test
    compile 'com.android.support:support-annotations:23.0.1'

    ...
}
</code></pre>

<p>I never used Espresso Intents but perhaps you need <a href=""https://google.github.io/android-testing-support-library/docs/espresso/intents/"">this</a> like <a href=""https://github.com/googlesamples/android-testing/blob/master/ui/espresso/IntentsBasicSample/app/src/androidTest/java/com/example/android/testing/espresso/BasicSample/DialerActivityTest.java#L80"">here</a>:</p>

<blockquote>
  <p>Use IntentsTestRule instead of ActivityTestRule when using
  Espresso-Intents. IntentsTestRule makes it easy to use
  Espresso-Intents APIs in functional UI tests. This class is an
  extension of ActivityTestRule, which initializes Espresso-Intents
  before each test annotated with @Test and releases Espresso-Intents
  after each test run. The activity will be terminated after each test
  and this rule can be used in the same way as ActivityTestRule.</p>
</blockquote>
",1009132,,1009132,,2015-12-20 1:05:04,2015-12-20 1:05:04,,,,0,,,
Android,35289982,2,,32711975,2016,,23,,"<h2>Android Camera2 api : Pinch Zoom In/Out</h2>

<p>Use this sample code for Camera2Basic from google developers. <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a></p>

<p>Now declare two class variables </p>

<pre><code>public float finger_spacing = 0;
public int zoom_level = 1;
</code></pre>

<p>and update the given onTouch() method.</p>

<pre><code>public boolean onTouch(View v, MotionEvent event) {
    try {
        Activity activity = getActivity();
        CameraManager manager = (CameraManager) activity.getSystemService(Context.CAMERA_SERVICE);
        CameraCharacteristics characteristics = manager.getCameraCharacteristics(mCameraId);
        float maxzoom = (characteristics.get(CameraCharacteristics.SCALER_AVAILABLE_MAX_DIGITAL_ZOOM))*10;

        Rect m = characteristics.get(CameraCharacteristics.SENSOR_INFO_ACTIVE_ARRAY_SIZE);
        int action = event.getAction();
        float current_finger_spacing;

        if (event.getPointerCount() &gt; 1) {
            // Multi touch logic
            current_finger_spacing = getFingerSpacing(event);
            if(finger_spacing != 0){
                if(current_finger_spacing &gt; finger_spacing &amp;&amp; maxzoom &gt; zoom_level){
                    zoom_level++;
                } else if (current_finger_spacing &lt; finger_spacing &amp;&amp; zoom_level &gt; 1){
                    zoom_level--;
                }
                int minW = (int) (m.width() / maxzoom);
                int minH = (int) (m.height() / maxzoom);
                int difW = m.width() - minW;
                int difH = m.height() - minH;
                int cropW = difW /100 *(int)zoom_level;
                int cropH = difH /100 *(int)zoom_level;
                cropW -= cropW &amp; 3;
                cropH -= cropH &amp; 3;
                Rect zoom = new Rect(cropW, cropH, m.width() - cropW, m.height() - cropH);
                mPreviewRequestBuilder.set(CaptureRequest.SCALER_CROP_REGION, zoom);
            }
            finger_spacing = current_finger_spacing;
        } else{
            if (action == MotionEvent.ACTION_UP) {
                //single touch logic
            }
        }

        try {
            mCaptureSession
                .setRepeatingRequest(mPreviewRequestBuilder.build(), mCaptureCallback, null);
        } catch (CameraAccessException e) {
            e.printStackTrace();
        } catch (NullPointerException ex) {
            ex.printStackTrace();
        }
    } catch (CameraAccessException e) {
        throw new RuntimeException(""can not access camera."", e);
    }
    return true;
}


//Determine the space between the first two fingers
@SuppressWarnings(""deprecation"")
private float getFingerSpacing(MotionEvent event) {
    float x = event.getX(0) - event.getX(1);
    float y = event.getY(0) - event.getY(1);
    return (float) Math.sqrt(x * x + y * y);
}
</code></pre>
",4976689,,2433309,,2017-09-14 18:33:26,2017-09-14 18:33:26,,,,8,,,
Android,44983042,2,,44844149,2017,,26,,"<h1>tl;dr Don't inject model layer dependencies inside custom <code>View</code> objects</h1>

<p>Subclasses of <code>View</code> are not good targets for Dagger 2 injection. <code>View</code> objects are meant to be drawn and not must else, hence the name ""view"". The constructors for <a href=""https://developer.android.com/reference/android/view/View.html"" rel=""noreferrer""><code>View</code></a> should make this clear; they are designed for inflating <code>View</code> objects from attributes specified in XML. In other words, a <code>View</code> object should be able to be specified in a <code>layout.xml</code> file, inflated at the appropriate point in the lifecycle, and then obtained using <code>findViewById(int id)</code>, <a href=""https://jakewharton.github.io/butterknife/"" rel=""noreferrer"">Butterknife</a> or data binding. In this way, the best custom <code>View</code> objects take no dependencies.</p>

<p>If you want to link a <code>View</code> and some data from the model layer, the standard pattern is to write an Adapter like those for <code>RecyclerView</code> and <code>ListView</code>. If this is not possible, using a setter (e.g., <code>setData()</code>) is preferable to passing dependencies from the model layer in the constructor or requesting injection from within one of the lifecycle methods of the <code>View</code>. </p>

<p>If instead you inject your <code>LiveData</code> object inside an Activity or Fragment using the <code>AndroidInjector</code> class the correct <code>Context</code> will be provided without you having to do anything. This explains your comment ""I don't get any compiler complaints if CustomLiveData is injected into MainActivity instead into the view.""</p>

<p>Once you have injected the <code>LiveData</code> object into the Activity, use one of the above methods (an adapter or a setter) to associate the data with your custom <code>View</code>. See the Google Android Architecture example <a href=""https://github.com/googlesamples/android-architecture/blob/todo-mvp-dagger/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/tasks/TasksFragment.java"" rel=""noreferrer"">here</a> where elements from the model layer are injected using Dagger 2 and then associated with a <code>ListView</code> using <code>findViewById</code> and <code>setAdapter()</code></p>

<p>Link to the Dagger 2 issue where injection of <code>View</code> objects is discussed: </p>

<p><a href=""https://github.com/google/dagger/issues/720"" rel=""noreferrer"">https://github.com/google/dagger/issues/720</a></p>
",5241933,,5241933,,2017-07-08 22:21:16,2017-07-08 22:21:16,,,,4,,,
Android,46064204,2,,34773958,2017,,26,,"<p>For some, there is a file, <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/BasicRxJavaSampleKotlin/app/src/test/java/com/example/android/observability/MockitoKotlinHelpers.kt"" rel=""noreferrer"">MockitoKotlinHelpers.kt</a> provided by Google in the Android Architecture repo. It provides a convenient way to call capture.. just call
<code>verify(activityHandlerMock).navigateTo(capture(classCaptor), capture(booleanCaptor))</code></p>
",4100025,,3423236,,2018-04-12 15:12:31,2018-04-12 15:12:31,,,,6,,,
Android,35949911,2,,35944723,2016,,27,,"<pre><code>@Test
public void clickOnYourNavigationItem_ShowsYourScreen() {
    // Open Drawer to click on navigation.
    onView(withId(R.id.drawer_layout))
        .check(matches(isClosed(Gravity.LEFT))) // Left Drawer should be closed.
        .perform(DrawerActions.open()); // Open Drawer

    // Start the screen of your activity.
    onView(withId(R.id.nav_view))
        .perform(NavigationViewActions.navigateTo(R.id.your_navigation_menu_item));

    // Check that you Activity was opened.
    String expectedNoStatisticsText = InstrumentationRegistry.getTargetContext()
        .getString(R.string.no_item_available);
    onView(withId(R.id.no_statistics)).check(matches(withText(expectedNoStatisticsText)));
}
</code></pre>

<p>This does exactly what you are looking for.</p>

<p>Other examples are available <a href=""https://github.com/googlesamples/android-testing"" rel=""noreferrer"">here</a> or <a href=""https://github.com/operando/NavigationViewActionsSample"" rel=""noreferrer"">here</a></p>
",1584654,,6248491,,2017-10-25 9:38:39,2017-10-25 9:38:39,,,,2,,,
Android,46827625,2,,46727276,2017,,28,,"<p>NSimon, its great that you start using AAC. </p>

<p>I wrote a <a href=""https://github.com/googlesamples/android-architecture-components/issues/63"" rel=""noreferrer"">issue</a> in the aac's-github before about that.</p>

<p>There are several ways doing that.</p>

<p>One solution would be using a </p>

<p><a href=""https://docs.oracle.com/javase/7/docs/api/java/lang/ref/WeakReference.html"" rel=""noreferrer"">WeakReference</a> to a NavigationController which holds the Context of the Activity. This is a common used pattern for handling context-bound stuff inside a ViewModel.</p>

<p>I highly decline this for several reasons. First: that usually means that you have to keep a reference to your NavigationController which fixes the context leak, but doesnt solve the architecture at all.</p>

<p>The best way (in my oppinion) is using LiveData which is lifecycle aware and can do all the wanted stuff. </p>

<p>Example:</p>

<pre><code>class YourVm : ViewModel() { 

    val uiEventLiveData = SingleLiveData&lt;Pair&lt;YourModel, Int&gt;&gt;()
    fun onClick(item: YourModel) {
        uiEventLiveData.value = item to 3 // can be predefined values
    }
}
</code></pre>

<p>After that you can listen inside your view for changes.</p>

<pre><code>class YourFragmentOrActivity { 
     //assign your vm whatever
     override fun onActivityCreated(savedInstanceState: Bundle?) { 
        var context = this
        yourVm.uiEventLiveData.observe(this, Observer {
            when (it?.second) {
                1 -&gt; { context.startActivity( ... ) }
                2 -&gt; { .. } 
            }

        })
    }
}
</code></pre>

<p>Take care that ive used a modified MutableLiveData, because else it will always emit the latest result for new Observers which leads to bad behaviour. For example if you change activity and go back it will end in a loop.</p>

<pre><code>class SingleLiveData&lt;T&gt; : MutableLiveData&lt;T&gt;() {

    private val mPending = AtomicBoolean(false)

    @MainThread
    override fun observe(owner: LifecycleOwner, observer: Observer&lt;T&gt;) {

        if (hasActiveObservers()) {
            Log.w(TAG, ""Multiple observers registered but only one will be notified of changes."")
        }

        // Observe the internal MutableLiveData
        super.observe(owner, Observer { t -&gt;
            if (mPending.compareAndSet(true, false)) {
                observer.onChanged(t)
            }
        })
    }

    @MainThread
    override fun setValue(t: T?) {
        mPending.set(true)
        super.setValue(t)
    }

    /**
     * Used for cases where T is Void, to make calls cleaner.
     */
    @MainThread
    fun call() {
        value = null
    }

    companion object {
        private val TAG = ""SingleLiveData""
    }
}
</code></pre>

<p><em>Why is that attempt better then using WeakReferences, Interfaces, or any other solution?</em> </p>

<p>Because this event split UI logic with business logic. Its also possible to have multiple observers. It cares about the lifecycle. It doesnt leak anything. </p>

<p>You could also solve it by using RxJava instead of LiveData by using a PublishSubject. (<code>addTo</code> requires <a href=""https://github.com/ReactiveX/RxKotlin"" rel=""noreferrer"">RxKotlin</a>)</p>

<p>Take care about not leaking a subscription by releasing it in onStop().</p>

<pre><code>class YourVm : ViewModel() { 
   var subject : PublishSubject&lt;YourItem&gt;  = PublishSubject.create();
}

class YourFragmentOrActivityOrWhatever {
    var composite = CompositeDisposable() 
    onStart() { 
         YourVm.subject 
             .subscribe( { Log.d(""..."", ""Event emitted $it"") }, { error(""Error occured $it"") }) 
               .addTo(compositeDisposable)         
       }   
       onStop() {
         compositeDisposable.clear()
       }
    }
</code></pre>

<p>Also take care that a ViewModel is bound to an Activity OR a Fragment. You can't share a ViewModel between multiple Activities since this would break the ""Livecycle-Awareness"".</p>

<p>If you need that persist your data by using a database like <a href=""https://developer.android.com/topic/libraries/architecture/room.html"" rel=""noreferrer"">room</a> or share the data using parcels.</p>
",2032539,,2032539,,2017-10-19 10:29:52,2017-10-19 10:29:52,,,,6,,,
Android,31573490,2,,31572323,2015,,28,,"<p>Holy crap, after much searching I found the official Google sample, which defines this constant to <code>0x1</code>.</p>

<pre><code>protected static final int REQUEST_CHECK_SETTINGS = 0x1;
</code></pre>

<p>The Sample and the constant in question <a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationSettings/app/src/main/java/com/google/android/gms/location/sample/locationsettings/MainActivity.java#L61"">can be found on GitHub</a>.</p>

<p>It seems this value is just an int just like when you use <code>StartActivityForResult()</code> to make sure we are returning from something we requested.</p>
",368379,,,,,2015-07-22 20:35:19,,,,1,,,
Android,33078679,2,,33078003,2015,,28,,"<p>Yes permissions have changed on Android M. Permissions are now requested at runtime as opposed to install time previous to Android M.</p>

<p>You can check out the docs <a href=""https://developer.android.com/training/permissions/index.html"" rel=""noreferrer"">here</a></p>

<blockquote>
  <p>This release introduces a new permissions model, where users can now directly manage app permissions at runtime. This model gives users improved visibility and control over permissions, while streamlining the installation and auto-update processes for app developers. Users can grant or revoke permissions individually for installed apps.</p>
  
  <p>On your apps that target Android 6.0 (API level 23) or higher, make sure to check for and request permissions at runtime. To determine if your app has been granted a permission, call the new checkSelfPermission() method. To request a permission, call the new requestPermissions() method. Even if your app is not targeting Android 6.0 (API level 23), you should test your app under the new permissions model.</p>
  
  <p>For details on supporting the new permissions model in your app, see Working with System Permissionss. For tips on how to assess the impact on your app, see Permissions Best Practices.</p>
</blockquote>

<p>To check for permissions you have to check like this, taken from <a href=""https://github.com/googlesamples/android-RuntimePermissions"" rel=""noreferrer"">github</a></p>

<pre><code>public class MainActivity extends SampleActivityBase
        implements ActivityCompat.OnRequestPermissionsResultCallback {

    public static final String TAG = ""MainActivity"";

    /**
     * Id to identify a camera permission request.
     */
    private static final int REQUEST_CAMERA = 0;

    // Whether the Log Fragment is currently shown.
    private boolean mLogShown;

    private View mLayout;

    /**
     * Called when the 'show camera' button is clicked.
     * Callback is defined in resource layout definition.
     */
    public void showCamera(View view) {
        // Check if the Camera permission is already available.
        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.CAMERA)
                != PackageManager.PERMISSION_GRANTED) {
            // Camera permission has not been granted.

            requestCameraPermission();

        } else {

            // Camera permissions is already available, show the camera preview.
            showCameraPreview();
        }
    }

    /**
     * Requests the Camera permission.
     * If the permission has been denied previously, a SnackBar will prompt the user to grant the
     * permission, otherwise it is requested directly.
     */
    private void requestCameraPermission() {
        if (ActivityCompat.shouldShowRequestPermissionRationale(this,
                Manifest.permission.CAMERA)) {
            // Provide an additional rationale to the user if the permission was not granted
            // and the user would benefit from additional context for the use of the permission.
            // For example if the user has previously denied the permission.
            Snackbar.make(mLayout, R.string.permission_camera_rationale,
                    Snackbar.LENGTH_INDEFINITE)
                    .setAction(R.string.ok, new View.OnClickListener() {
                        @Override
                        public void onClick(View view) {
                            ActivityCompat.requestPermissions(MainActivity.this,
                                    new String[]{Manifest.permission.CAMERA},
                                    REQUEST_CAMERA);
                        }
                    })
                    .show();
        } else {

            // Camera permission has not been granted yet. Request it directly.
            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.CAMERA},
                    REQUEST_CAMERA);
        }
    }

    /**
     * Display the {@link CameraPreviewFragment} in the content area if the required Camera
     * permission has been granted.
     */
    private void showCameraPreview() {
        getSupportFragmentManager().beginTransaction()
                .replace(R.id.sample_content_fragment, CameraPreviewFragment.newInstance())
                .addToBackStack(""contacts"")
                .commit();
    }

    /**
     * Callback received when a permissions request has been completed.
     */
    @Override
    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions,
            @NonNull int[] grantResults) {

        if (requestCode == REQUEST_CAMERA) {

            // Received permission result for camera permission.est."");
            // Check if the only required permission has been granted
            if (grantResults.length == 1 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {
                // Camera permission has been granted, preview can be displayed
                Snackbar.make(mLayout, R.string.permision_available_camera,
                        Snackbar.LENGTH_SHORT).show();
            } else {
                Snackbar.make(mLayout, R.string.permissions_not_granted,
                        Snackbar.LENGTH_SHORT).show();

            }
        }
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mLayout = findViewById(R.id.sample_main_layout);

        if (savedInstanceState == null) {
            FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
            RuntimePermissionsFragment fragment = new RuntimePermissionsFragment();
            transaction.replace(R.id.sample_content_fragment, fragment);
            transaction.commit();
        }
    }
}
</code></pre>
",2819510,,1248858,,2016-06-13 23:56:41,2016-06-13 23:56:41,,,,4,,,
Android,38360843,2,,38360478,2016,,30,,"<p>OnClick should call a <code>Presenter</code> method. You should do your business in presenter and if you need to update the ui you should define a method in your <code>View</code> and call it from presenter.</p>

<p>You need a method for your <code>View</code> ex:</p>

<pre><code>public void showCounterCount(final int totalClicks){
     counterTextView.setText(""Total clicks so far: ""+totalClicks);
}
</code></pre>

<p>Also you need a method and a variable in your <code>Presenter</code>:</p>

<pre><code>int totalClicks = 0;

public void onCounterButtonClicked(){
    totalClicks++;
    mView.showCounterCount(totalClicks);
}
</code></pre>

<p>And refactor your code like this:</p>

<pre><code>counterButton.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
      mPresenter.onCounterButtonClicked();
    }
  });
</code></pre>

<p>For more complex and clean architecture you can do your use case business in interactors. (In your example incrementing a counter value is a use-case for your application)</p>

<p>You can define an interactor and increment your counter value there. </p>

<p>CounterInteractor:</p>

<pre><code>public CounterInteractor{
   public int incrementCounter(int currentCounter){
       return currentCounter+1;
   }
}
</code></pre>

<p>And refactor your presenter like below:</p>

<pre><code>int totalClicks = 0;
CounterInteractor mCounterInteractor = new CounterInteractor();

public void onCounterButtonClicked(){
    totalClicks = mCounterInteractor.incrementCounter(totalClicks);
    mView.showCounterCount(totalClicks);
}
</code></pre>

<p>With this approach you separate your business logic totally from presenters and re use your use-case concepts without duplicating code in presenters. This is more clean approach.</p>

<p>You can also check this git repo for different MVP Approaches.
<a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-clean/"">https://github.com/googlesamples/android-architecture/tree/todo-mvp-clean/</a></p>

<p>Good luck.</p>

<p>Edit:</p>

<p>Here's my lightweight wikipedia client project source:
<a href=""https://github.com/savepopulation/wikilight"">https://github.com/savepopulation/wikilight</a></p>

<p>I'm trying to implement <code>MVP</code>. (MVP + Dagger2 + RxJava)</p>
",1559852,,1559852,,2016-09-02 6:44:43,2016-09-02 6:44:43,,,,7,,,
Android,44837887,2,,44582019,2017,,30,,"<h2>Update</h2>

<p>There are actually a few ways to resolve this issue. They are summarized nicely in the article <a href=""https://medium.com/androiddevelopers/livedata-with-snackbar-navigation-and-other-events-the-singleliveevent-case-ac2622673150"" rel=""nofollow noreferrer"">LiveData with SnackBar, Navigation and other events (the SingleLiveEvent case)</a>. This is written by a fellow Googler who works with the Architecture Components team.</p>

<p><strong>TL;DR</strong> A more robust approach is to use an <a href=""https://gist.githubusercontent.com/JoseAlcerreca/5b661f1800e1e654f07cc54fe87441af/raw/d1d9ad561c16f4d04367424ac5f5b305ba691852/Event.kt"" rel=""nofollow noreferrer"">Event wrapper class</a>, which you can see an example of at the bottom of <a href=""https://medium.com/androiddevelopers/livedata-with-snackbar-navigation-and-other-events-the-singleliveevent-case-ac2622673150"" rel=""nofollow noreferrer"">the article</a>.</p>

<p>This pattern has made it's way into numerous Android samples, for example:</p>

<ul>
<li><a href=""https://github.com/nickbutcher/plaid/blob/master/core/src/main/java/io/plaidapp/core/util/event/Event.kt"" rel=""nofollow noreferrer"">Plaid</a></li>
<li><a href=""https://github.com/googlesamples/android-architecture/blob/todo-mvvm-live-kotlin/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/Event.kt"" rel=""nofollow noreferrer"">Architecture Blueprints</a></li>
<li><a href=""https://github.com/google/iosched/blob/master/shared/src/main/java/com/google/samples/apps/iosched/shared/result/Event.kt"" rel=""nofollow noreferrer"">IOSched</a></li>
</ul>

<p><strong>Why is an Event wrapper preferred over SingleLiveEvent?</strong></p>

<p>One issue with SingleLiveEvent is that if there are multiple observers to a SingleLiveEvent, only one of them will be notified when that data has changed - this can introduce subtle bugs and is hard to work around. </p>

<p>Using an Event wrapper class, all of your observers will be notified as normal.  You can then choose to either explicitly ""handle"" the content (content is only ""handled"" once) or peek at the content, which always returns whatever the latest ""content"" was. In the dialog example, this means you can always see what the last message was with <code>peek</code>, but ensure that for every new message, the dialog only is triggered once, using <code>getContentIfNotHandled</code>.</p>

<h2>Old Response</h2>

<p>Alex's response in the comments is I think exactly what you're looking for. There's sample code for a class called <a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java"" rel=""nofollow noreferrer"">SingleLiveEvent</a>. The purpose of this class is described as:</p>

<blockquote>
  <p>A lifecycle-aware observable that sends only new updates after
  subscription, used for events like navigation and Snackbar messages.</p>
  
  <p>This avoids a common problem with events: on configuration change
  (like rotation) an update can be emitted if the observer is active.
  This LiveData only calls the observable if there's an explicit call to
  setValue() or call().</p>
</blockquote>
",497605,,497605,,2019-04-16 5:39:53,2019-04-16 5:39:53,,,,1,,,
Android,46950207,2,,46949518,2017,,32,,"<p>First of all, after upgrading there are a few changes to gradle.</p>

<p>Its important to upgrade to the latest gradle version to fix that.</p>

<p>That means that you need to add the proper version for your build gradle which is currently</p>

<pre><code> dependencies {
    classpath 'com.android.tools.build:gradle:3.0.0'
 }
</code></pre>

<p>the next step is to remove your  <code>android-apt</code> which is not longer needed.</p>

<p>its enough to have only <code>apply plugin: 'com.android.application'</code></p>

<p>Onec you have done that, change your dependencies from</p>

<p><code>compile</code> to <code>implementation</code>, <code>apt</code> to <code>annotationProcessor</code> and <code>testCompile</code> to <code>androidTestImplementation</code> </p>

<p>If you have done that invalidate your cache and restart which is very important.</p>

<p>Then it should work.</p>

<p>You can find a working gradle file using the latest version at</p>

<p><a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/build.gradle"" rel=""noreferrer"">app build.gradle</a> and <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/build.gradle"" rel=""noreferrer"">project build.gradle</a></p>

<p>p/s : For many people still use Realm old version,</p>

<p>Please update to latest version since old version still use ""android-apt"".</p>
",2032539,,2522405,,2017-10-31 4:21:36,2017-10-31 4:21:36,,,,0,,,
Android,34761243,2,,34760940,2016,,32,,"<p>Heres a guide to test Smart Lock for Passwords functionality in an app. If you have a website, <a href=""https://developers.google.com/identity/smartlock-passwords/android/associate-apps-and-sites"" rel=""noreferrer"">associate your app and site</a> to test those cases. Also check out the <a href=""https://developers.google.com/identity/smartlock-passwords/android/overview"" rel=""noreferrer"">developer integration guide</a>.</p>

<p>Check what's saved for the current Google Account at <a href=""https://passwords.google.com"" rel=""noreferrer"">passwords.google.com</a>. Entries are shown under the website domain or Android package/app name, delete any entries to start over.</p>

<ol>
<li><p><strong>Auto sign-in</strong> when app starts and a single saved entry exists. This is the recommended UX pattern to seamlessly transition between devices and help users complete transactions and pick up their experience where they left off last time. Sign-In UI should be disabled or hidden until the API call is complete, and do not call the API if you already have a signed-in user.</p></li>
<li><p><strong>Sign-up</strong> with a password in the app, check for a <a href=""https://developers.google.com/identity/smartlock-passwords/android/retrieve-hints"" rel=""noreferrer"">hints dialog</a> to help fill the sign-up form fields such as name and email, and check for a save prompt, select ""Save password"".</p></li>
<li><p><strong>Auto sign-in</strong> after reinstalling app (or clearing app data). Show prompt for multiple credentials if something was already saved or auto sign-in is disabled.</p></li>
<li><p><strong>Regular sign-in</strong> after deleting any saved passwords at <a href=""https://passwords.google.com"" rel=""noreferrer"">passwords.google.com</a>, save the existing account credentials when prompted.</p></li>
<li><p><strong>Sign-out</strong> and app should call <a href=""https://developers.google.com/android/reference/com/google/android/gms/auth/api/credentials/CredentialsApi.html#disableAutoSignIn(com.google.android.gms.common.api.GoogleApiClient)"" rel=""noreferrer""><code>disableAutoSignIn</code></a>. When user returns to the sign-in activity / UI, call the API and to help sign back in or switch between accounts easily (app should resolve an intent to show a picker dialog), without automatically signing the user back in.</p></li>
<li><p><strong>Password update</strong> in the app should save the change (app should just call
<a href=""https://developers.google.com/android/reference/com/google/android/gms/auth/api/credentials/CredentialsApi.html#save(com.google.android.gms.common.api.GoogleApiClient,%20com.google.android.gms.auth.api.credentials.Credential)"" rel=""noreferrer"">save API</a>), but UI won't be needed for password updates). Check <a href=""https://passwords.google.com"" rel=""noreferrer"">passwords.google.com</a> for the updated password.</p></li>
<li><p><strong>Multiple accounts</strong> after sign-up for a different second account on the web, reinstall app and see if both saved entries are offered for sign-in via a picker dialog.</p></li>
<li><p><strong>Wrong stored password</strong>: You can save a wrong password in Chrome by running the following in the console on your login domain: <code>navigator.credentials.store(new PasswordCredential({id: 'user@example.com', password: 'wrongpassword'}))</code>. Then test retrieving this in the app, which could either prompt user to correct the password and save the new one, or delete an invalid credential so user doesn't get stuck in this state.</p></li>
<li><p><strong>Web auto-fill</strong> when visiting the <strong>https</strong> website in Chrome, check that passwords saved on Android are available to fill in the website password field (they should also should show in chrome://settings/passwords).</p></li>
<li><p><strong>IDP sign-in</strong> after deleting saved password entries, sign in/up to the app with Facebook etc, and may prompt to ""Save account"". Reinstall to see auto sign-in UX (i.e., the app may automatically ""click"" the appropriate button for the user or customize their sign-in screen to the returning user). The same for Google Sign-In, but <a href=""https://stackoverflow.com/questions/34596710/cant-save-identityproviders-google-credentials-with-smartlock/34600758#34600758"">no save prompt is shown</a>, will save automatically to the appropriate Google account, see <a href=""https://github.com/googlesamples/android-credentials/blob/master/credentials-signin/app/src/main/java/com/google/example/credentialssignin/MainActivity.java"" rel=""noreferrer"">example use</a> of <code>silentSignIn</code>.</p></li>
</ol>

<p>Keep in mind that if you tap the ""Never"" button on a save dialog, it will add the app to the <em>Never save</em> list in <em>Settings > Google > Smart Lock for Passwords</em> for all accounts on the device and the save prompt will not be shown again (API error message ""The current app is blacklisted""). You will need to remove the app from the <em>Never save</em> list for all accounts on the device to see the save prompt again.</p>

<p>Also note that Android credentials are affiliated to the signature and package of the app in which they were saved, in case you sign your app with multiple debug or release keystores during development. </p>
",5001016,,5001016,,2017-06-10 3:11:14,2017-06-10 3:11:14,,,,0,,,
Android,36915009,2,,36912209,2016,,33,,"<p>Yes it's an anti-mvp-pattern. Based on <a href=""http://martinfowler.com/eaaDev/PassiveScreen.html"" rel=""noreferrer"">passive view</a> in MVP, you lost your testability, because you don't have to deal with the android framework in your presenter.</p>

<p>So it's better to manage the navigation of the app from the View Layer.</p>

<pre><code>class MyPresenter {
    MyPresenter.View view;

    void backButtonClicked() {
        view.navigateToHomeScreen();
    }

    public interface View {
        void navigateToHomeScreen();
    }
}

class MyActivity extends Activity implements MyPresenter.View {
    @Override
    void navigateToHomeScreen() {
        startActivity(...)
    }

    @OnClick(R.id.my_button)
    void onClick() {
        presenter.backButtonClicked();
    }
} 
</code></pre>

<p>Also another advantage of this way is that it will be easy to replace activity with a fragment or a view.</p>

<p><strong>Edit 1:</strong></p>

<p><a href=""https://stackoverflow.com/a/41300286/3682067"">Morgwai</a> said this way will break separation of concern and single responsibility, but you cannot have single responsibility every where. Sometime you need to violate it. Here is an example from Google for MVP:</p>

<p><a href=""https://github.com/googlesamples/android-architecture/blob/todo-mvp/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/taskdetail/TaskDetailPresenter.java#L96"" rel=""noreferrer""><code>TaskDetailPresenter</code></a> calls <a href=""https://github.com/googlesamples/android-architecture/blob/todo-mvp/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/taskdetail/TaskDetailFragment.java#L164"" rel=""noreferrer""><code>ShowEditTask</code></a> which is responsible to open a new <code>Activity</code> inside <code>TaskDetailFragment</code>.</p>

<p>But also you can use <a href=""https://en.wikipedia.org/wiki/Command_pattern"" rel=""noreferrer"">CommandPattern</a> which is a better approach</p>

<pre><code>interface NavigationCommand {
    void navigate();
}
</code></pre>

<p>So, Presenter will use it when it needs.</p>
",3682067,,-1,,2017-05-23 12:26:21,2016-12-23 11:24:54,,,,3,,,
Android,44375613,2,,44208618,2017,,36,,"<p>In one of Google's <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample"" rel=""noreferrer"">sample apps for Android Architecture Components</a> they wrap the LiveData emitted object in a class that can contain a status, data, and message for the emitted object.</p>

<p><a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/vo/Resource.kt"" rel=""noreferrer"">https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/vo/Resource.kt</a></p>

<p>With this approach you can use the status to determine if there was an error.</p>
",7465852,,4772470,,2018-05-08 8:52:13,2018-05-08 8:52:13,,,,0,,,
Android,20696266,2,,20427411,2013,,37,,"<p>Yes, it is possible. In one of the samples they have demoed this here <a href=""https://github.com/googlesamples/android-testing/blob/master/ui/espresso/BasicSample/app/src/androidTest/java/com/example/android/testing/espresso/BasicSample/ChangeTextBehaviorTest.java"" rel=""noreferrer"">https://github.com/googlesamples/android-testing/blob/master/ui/espresso/BasicSample/app/src/androidTest/java/com/example/android/testing/espresso/BasicSample/ChangeTextBehaviorTest.java</a></p>

<pre><code>@Test
public void changeText_newActivity() {
    // Type text and then press the button.
    onView(withId(R.id.editTextUserInput)).perform(typeText(STRING_TO_BE_TYPED),
            closeSoftKeyboard());
    onView(withId(R.id.activityChangeTextBtn)).perform(click());

    // This view is in a different Activity, no need to tell Espresso.
    onView(withId(R.id.show_text_view)).check(matches(withText(STRING_TO_BE_TYPED)));
}
</code></pre>

<p>Read the inline comment.</p>

<p>Waiting for the new activity to load is taken care of implicitly by Espresso.</p>
",1000837,,1000837,,2016-08-19 5:43:14,2016-08-19 5:43:14,,,,3,,,
Android,44194893,2,,44194579,2017,,37,,"<p>While initializing subclasses of <code>ViewModel</code> using <code>ViewModelProviders</code>, by default it expects your <code>UserModel</code> class to have zero argument constructor. 
In your case your constructor has argument <code>MutableLiveData&lt;User&gt; user</code></p>

<p>One way to fix this is to have a default no arg constructor for your <code>UserModel</code></p>

<p>Otherwise, if you want to have a non zero argument constructor for your ViewModel class, you may have to create a custom <code>ViewModelFactory</code> class to initialise your ViewModel instance, which will implement <code>ViewModelProvider.Factory</code> interface.</p>

<p>I have not tried this yet, but here is the link to excellent sample from google for the same: <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample"" rel=""noreferrer"">github.com/googlesamples/android-architecture-components</a>.
Specifically, checkout this class <a href=""https://github.com/googlesamples/android-architecture-components/blob/b1a194c1ae267258cd002e2e1c102df7180be473/GithubBrowserSample/app/src/main/java/com/android/example/github/viewmodel/GithubViewModelFactory.java"" rel=""noreferrer"">GithubViewModelFactory.java</a> for Java code and this class <a href=""https://github.com/googlesamples/android-architecture-components/blob/d7cd7a9414ef1eeba52a79ec76f6d9827cd50a36/GithubBrowserSample/app/src/main/java/com/android/example/github/viewmodel/GithubViewModelFactory.kt"" rel=""noreferrer"">GithubViewModelFactory.kt</a> for corresponding Kotlin code</p>
",6937018,,6937018,,2018-05-16 6:57:28,2018-05-16 6:57:28,,,,3,,,
Android,32029162,2,,32021193,2015,,38,,"<p><strong>Directly using the barcode detector</strong></p>

<p>One approach is to use the barcode detector directly on a bitmap, like this:</p>

<pre><code>BarcodeDetector barcodeDetector = new BarcodeDetector.Builder(context).build();
Frame frame = new Frame.Builder().setBitmap(bitmap).build();
SparseArray&lt;Barcode&gt; barcodes = barcodeDetector.detect(frame);
if (barcodes.size() &gt; 0) {
    // Access detected barcode values
}
</code></pre>

<p><strong>Receiving notifications</strong></p>

<p>Another approach is to set up a pipeline structure for receiving detected barcodes from camera preview video (see the <a href=""https://github.com/googlesamples/android-vision/tree/master/face/multi-tracker/app/src/main/java/com/google/android/gms/samples/vision/face/multitracker"">MultiTracker example</a> on GitHub).  You'd define your own Tracker to receive detected barcodes, like this:</p>

<pre><code>class BarcodeTrackerFactory implements MultiProcessor.Factory&lt;Barcode&gt; {
    @Override
    public Tracker&lt;Barcode&gt; create(Barcode barcode) {
        return new MyBarcodeTracker();
    }
} 

class MyBarcodeTracker extends Tracker&lt;Barcode&gt; {
    @Override
    public void onUpdate(Detector.Detections&lt;Barcode&gt; detectionResults, Barcode barcode) {
        // Access detected barcode values
    }
 }
</code></pre>

<p>A new instance of this tracker is created for each barcode, with the onUpdate method receiving the detected barcode value.</p>

<p>You then set up the camera source to continuously stream images into the detector, receiving the results in your tracker:</p>

<pre><code>BarcodeDetector barcodeDetector = new BarcodeDetector.Builder(context).build();
BarcodeTrackerFactory barcodeFactory = new BarcodeTrackerFactory();
barcodeDetector.setProcessor(
    new MultiProcessor.Builder&lt;&gt;(barcodeFactory).build());

mCameraSource = new CameraSource.Builder(context, barcodeDetector)
    .setFacing(CameraSource.CAMERA_FACING_BACK)
    .setRequestedPreviewSize(1600, 1024)
    .build();
</code></pre>

<p>Later, you'd either start the camera source directly or use it in conjunction with a view that shows the camera preview (see the <a href=""https://github.com/googlesamples/android-vision/tree/master/face/multi-tracker/app/src/main/java/com/google/android/gms/samples/vision/face/multitracker"">MultiTracker example</a> for more details).</p>
",5231007,,,,,2015-08-15 20:43:58,,,,12,,,
Android,32603798,2,,32603661,2015,,41,,"<p>As stated in the <a href=""https://github.com/googlesamples/android-testing-templates/tree/master/AndroidTestingBlueprint"">AndroidTestingBlueprint</a> you can use the <code>android.testInstrumentationRunnerArguments.class</code> property:</p>

<pre><code>./gradlew app:connectedAndroidTest -Pandroid.testInstrumentationRunnerArguments.class=com.example.android.testing.blueprint.ui.espresso.EspressoTest
</code></pre>
",321354,,,,,2015-09-16 8:50:22,,,,2,,,
Android,44271247,2,,44270688,2017,,43,,"<p>Room calculates the <code>LiveData</code>'s value lazily when there is an observer.</p>

<p>You can check the <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/androidTest/java/com/android/example/github/db/RepoDaoTest.java"" rel=""noreferrer"">sample app</a>.</p>

<p>It uses a <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/test-common/java/com/android/example/github/util/LiveDataTestUtil.java"" rel=""noreferrer"">getValue</a> utility method which adds an observer to get the value:</p>

<pre><code>public static &lt;T&gt; T getValue(final LiveData&lt;T&gt; liveData) throws InterruptedException {
    final Object[] data = new Object[1];
    final CountDownLatch latch = new CountDownLatch(1);
    Observer&lt;T&gt; observer = new Observer&lt;T&gt;() {
        @Override
        public void onChanged(@Nullable T o) {
            data[0] = o;
            latch.countDown();
            liveData.removeObserver(this);
        }
    };
    liveData.observeForever(observer);
    latch.await(2, TimeUnit.SECONDS);
    //noinspection unchecked
    return (T) data[0];
}
</code></pre>

<p>Better w/ kotlin, you can make it an extensions function :).</p>
",608649,,1913888,,2017-06-01 12:52:01,2017-06-01 12:52:01,,,,4,,,
Android,37007997,2,,36999647,2016,,44,,"<p>You need to customize your adapter. I had implemented this functionality in my project. You can follow this. </p>

<blockquote>
  <p>activity_search.xml</p>
</blockquote>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;LinearLayout xmlns:android=""http://schemas.android.com/apk/res/android""
    android:id=""@+id/parent""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""
    android:orientation=""vertical""
    android:background=""@color/white""&gt;

    &lt;RelativeLayout
        android:layout_width=""match_parent""
        android:layout_height=""match_parent""
        &gt;
        &lt;LinearLayout
            android:id=""@+id/search_layout""
            android:layout_width=""match_parent""
            android:layout_height=""50dp""
            android:gravity=""center_vertical""
            android:layout_alignParentTop=""true""
            android:background=""@drawable/searchbar_bg""
            android:layout_marginLeft=""@dimen/activity_margin_10""
            android:layout_marginRight=""@dimen/activity_margin_10""
            android:layout_marginTop=""@dimen/activity_margin_10""
            android:orientation=""vertical""&gt;

                &lt;RelativeLayout
                    android:layout_width=""match_parent""
                    android:layout_height=""match_parent""&gt;
                    &lt;EditText
                        android:id=""@+id/search_et""
                        android:layout_width=""match_parent""
                        android:layout_height=""match_parent""
                        android:hint=""Search""
                        android:singleLine=""true""
                        android:layout_toLeftOf=""@+id/clear""
                        android:imeOptions=""actionSearch""
                        android:background=""@null""
                        android:drawableLeft=""@drawable/ic_action_search""
                        android:drawablePadding=""@dimen/activity_margin_10""
                        android:paddingLeft=""@dimen/activity_margin_10""
                        android:paddingRight=""@dimen/activity_margin_10""/&gt;
                    &lt;ImageView
                        android:id=""@+id/clear""
                        android:layout_width=""wrap_content""
                        android:layout_height=""wrap_content""
                        android:src=""@drawable/ic_clear""
                        android:layout_alignParentRight=""true""
                        android:layout_gravity=""right|center_vertical""
                        android:padding=""@dimen/activity_margin_16""
                        android:visibility=""gone""/&gt;
                &lt;/RelativeLayout&gt;


        &lt;/LinearLayout&gt;


        &lt;android.support.v7.widget.RecyclerView
            android:id=""@+id/list_search""
            android:layout_width=""match_parent""
            android:layout_height=""match_parent""
            android:layout_below=""@+id/search_layout""
            android:layout_above=""@+id/powered_by_google""
            android:background=""@color/white""
            android:layout_marginTop=""@dimen/activity_margin_10""/&gt;

        &lt;ImageView
            android:id=""@+id/powered_by_google""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_centerHorizontal=""true""
            android:layout_alignParentBottom=""true""
            android:padding=""@dimen/activity_margin_10""
            android:layout_marginBottom=""@dimen/activity_margin_10""
            android:src=""@drawable/powered_by_google_light""/&gt;
    &lt;/RelativeLayout&gt;
&lt;/LinearLayout&gt;
</code></pre>

<blockquote>
  <p>SearchActivity.java</p>
</blockquote>

<pre><code>package com.android.dezi.views.rider.Activities;

import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.support.v7.widget.LinearLayoutManager;
import android.support.v7.widget.RecyclerView;
import android.text.Editable;
import android.text.TextWatcher;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.Toast;

import com.android.dezi.BaseActivity;
import com.android.dezi.R;
import com.android.dezi.adapters.PlaceAutocompleteAdapter;
import com.android.dezi.adapters.PlaceAutocompleteAdapter.PlaceAutoCompleteInterface;
import com.android.dezi.adapters.PlaceSavedAdapter;
import com.android.dezi.adapters.PlaceSavedAdapter.SavedPlaceListener;
import com.android.dezi.beans.SavedAddress;
import com.android.dezi.views.rider.Fragments.SearchFragment;
import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.api.GoogleApiClient;
import com.google.android.gms.common.api.PendingResult;
import com.google.android.gms.common.api.ResultCallback;
import com.google.android.gms.location.LocationServices;
import com.google.android.gms.location.places.Place;
import com.google.android.gms.location.places.PlaceBuffer;
import com.google.android.gms.location.places.Places;
import com.google.android.gms.location.places.ui.PlaceAutocomplete;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.OnMapReadyCallback;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.LatLngBounds;

import java.util.ArrayList;
import java.util.List;

/**
 * Created by anuj.sharma on 4/6/2016.
 */
public class SearchActivity extends BaseActivity implements PlaceAutoCompleteInterface, GoogleApiClient.OnConnectionFailedListener,
        GoogleApiClient.ConnectionCallbacks,OnClickListener,SavedPlaceListener {
    Context mContext;
    GoogleApiClient mGoogleApiClient;

    LinearLayout mParent;
    private RecyclerView mRecyclerView;
    LinearLayoutManager llm;
    PlaceAutocompleteAdapter mAdapter;
    List&lt;SavedAddress&gt; mSavedAddressList;
    PlaceSavedAdapter mSavedAdapter;
    private static final LatLngBounds BOUNDS_INDIA = new LatLngBounds(
            new LatLng(-0, 0), new LatLng(0, 0));

    EditText mSearchEdittext;
    ImageView mClear;

    @Override
    public void onStart() {
        mGoogleApiClient.connect();
        super.onStart();

    }

    @Override
    public void onStop() {
        mGoogleApiClient.disconnect();
        super.onStop();
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.fragment_search);
        mContext = SearchActivity.this;

        mGoogleApiClient = new GoogleApiClient.Builder(this)
                .enableAutoManage(this, 0 /* clientId */, this)
                .addApi(Places.GEO_DATA_API)
                .build();

        initViews();
    }

    /*
   Initialize Views
    */
    private void initViews(){
        mRecyclerView = (RecyclerView)findViewById(R.id.list_search);
        mRecyclerView.setHasFixedSize(true);
        llm = new LinearLayoutManager(mContext);
        mRecyclerView.setLayoutManager(llm);

        mSearchEdittext = (EditText)findViewById(R.id.search_et);
        mClear = (ImageView)findViewById(R.id.clear);
        mClear.setOnClickListener(this);

        mAdapter = new PlaceAutocompleteAdapter(this, R.layout.view_placesearch,
                mGoogleApiClient, BOUNDS_INDIA, null);
        mRecyclerView.setAdapter(mAdapter);

        mSearchEdittext.addTextChangedListener(new TextWatcher() {
            @Override
            public void beforeTextChanged(CharSequence s, int start, int count, int after) {

            }

            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                if (count &gt; 0) {
                    mClear.setVisibility(View.VISIBLE);
                    if (mAdapter != null) {
                        mRecyclerView.setAdapter(mAdapter);
                    }
                } else {
                    mClear.setVisibility(View.GONE);
                    if (mSavedAdapter != null &amp;&amp; mSavedAddressList.size() &gt; 0) {
                        mRecyclerView.setAdapter(mSavedAdapter);
                    }
                }
                if (!s.toString().equals("""") &amp;&amp; mGoogleApiClient.isConnected()) {
                    mAdapter.getFilter().filter(s.toString());
                } else if (!mGoogleApiClient.isConnected()) {
//                    Toast.makeText(getApplicationContext(), Constants.API_NOT_CONNECTED, Toast.LENGTH_SHORT).show();
                    Log.e("""", ""NOT CONNECTED"");
                }
            }

            @Override
            public void afterTextChanged(Editable s) {

            }
        });

    }

    @Override
    public void onClick(View v) {
        if(v == mClear){
            mSearchEdittext.setText("""");
            if(mAdapter!=null){
                mAdapter.clearList();
            }

        }
    }



    @Override
    public void onConnected(Bundle bundle) {

    }

    @Override
    public void onConnectionSuspended(int i) {

    }

    @Override
    public void onConnectionFailed(ConnectionResult connectionResult) {

    }

    @Override
    public void onPlaceClick(ArrayList&lt;PlaceAutocompleteAdapter.PlaceAutocomplete&gt; mResultList, int position) {
        if(mResultList!=null){
            try {
                final String placeId = String.valueOf(mResultList.get(position).placeId);
                        /*
                             Issue a request to the Places Geo Data API to retrieve a Place object with additional details about the place.
                         */

                PendingResult&lt;PlaceBuffer&gt; placeResult = Places.GeoDataApi
                        .getPlaceById(mGoogleApiClient, placeId);
                placeResult.setResultCallback(new ResultCallback&lt;PlaceBuffer&gt;() {
                    @Override
                    public void onResult(PlaceBuffer places) {
                        if(places.getCount()==1){
                            //Do the things here on Click.....
                            Intent data = new Intent();
                            data.putExtra(""lat"",String.valueOf(places.get(0).getLatLng().latitude));
                            data.putExtra(""lng"", String.valueOf(places.get(0).getLatLng().longitude));
                            setResult(SearchActivity.RESULT_OK, data);
                            finish();
                        }else {
                            Toast.makeText(getApplicationContext(),""something went wrong"",Toast.LENGTH_SHORT).show();
                        }
                    }
                });
            }
            catch (Exception e){

            }

        }
    }

    @Override
    public void onSavedPlaceClick(List&lt;SavedAddress&gt; mResponse, int position) {
        if(mResponse!=null){
            try {
                Intent data = new Intent();
                data.putExtra(""lat"",String.valueOf(mResponse.get(position).getLatitude()));
                data.putExtra(""lng"", String.valueOf(mResponse.get(position).getLongitude()));
                setResult(SearchActivity.RESULT_OK, data);
                finish();
            }
            catch (Exception e){

            }

        }
    }
}
</code></pre>

<blockquote>
  <p>PlaceAutocompleteAdapter.java</p>
</blockquote>

<p>This is customized adapter. All important part is inside this.</p>

<pre><code>package com.android.dezi.adapters;

import android.content.Context;
import android.graphics.Typeface;
import android.support.v7.widget.RecyclerView;
import android.text.style.CharacterStyle;
import android.text.style.StyleSpan;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Filter;
import android.widget.Filterable;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.RelativeLayout;
import android.widget.TextView;
import android.widget.Toast;

import com.android.dezi.R;
import com.android.dezi.beans.TripHistoryBean;
import com.android.dezi.views.rider.Fragments.SearchFragment;
import com.google.android.gms.common.api.GoogleApiClient;
import com.google.android.gms.common.api.PendingResult;
import com.google.android.gms.common.api.Status;
import com.google.android.gms.common.data.DataBufferUtils;
import com.google.android.gms.location.places.AutocompleteFilter;
import com.google.android.gms.location.places.AutocompletePrediction;
import com.google.android.gms.location.places.AutocompletePredictionBuffer;
import com.google.android.gms.location.places.Places;
import com.google.android.gms.maps.model.LatLngBounds;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import java.util.concurrent.TimeUnit;

/**
 * Created by anuj.sharma on 4/6/2016.
 */
public class PlaceAutocompleteAdapter extends RecyclerView.Adapter&lt;PlaceAutocompleteAdapter.PlaceViewHolder&gt; implements Filterable{

    public interface PlaceAutoCompleteInterface{
        public void onPlaceClick(ArrayList&lt;PlaceAutocomplete&gt; mResultList, int position);
    }

    Context mContext;
    PlaceAutoCompleteInterface mListener;
    private static final String TAG = ""PlaceAutocompleteAdapter"";
    private static final CharacterStyle STYLE_BOLD = new StyleSpan(Typeface.BOLD);
    ArrayList&lt;PlaceAutocomplete&gt; mResultList;

    private GoogleApiClient mGoogleApiClient;

    private LatLngBounds mBounds;

    private int layout;

    private AutocompleteFilter mPlaceFilter;


    public PlaceAutocompleteAdapter(Context context, int resource, GoogleApiClient googleApiClient,
                                    LatLngBounds bounds, AutocompleteFilter filter){
        this.mContext = context;
        layout = resource;
        mGoogleApiClient = googleApiClient;
        mBounds = bounds;
        mPlaceFilter = filter;
        this.mListener = (PlaceAutoCompleteInterface)mContext;
    }

    /*
    Clear List items
     */
    public void clearList(){
        if(mResultList!=null &amp;&amp; mResultList.size()&gt;0){
            mResultList.clear();
        }
    }


    /**
     * Sets the bounds for all subsequent queries.
     */
    public void setBounds(LatLngBounds bounds) {
        mBounds = bounds;
    }

    @Override
    public Filter getFilter() {
        Filter filter = new Filter() {
            @Override
            protected FilterResults performFiltering(CharSequence constraint) {
                FilterResults results = new FilterResults();
                // Skip the autocomplete query if no constraints are given.
                if (constraint != null) {
                    // Query the autocomplete API for the (constraint) search string.
                    mResultList = getAutocomplete(constraint);
                    if (mResultList != null) {
                        // The API successfully returned results.
                        results.values = mResultList;
                        results.count = mResultList.size();
                    }
                }
                return results;
            }

            @Override
            protected void publishResults(CharSequence constraint, FilterResults results) {
                if (results != null &amp;&amp; results.count &gt; 0) {
                    // The API returned at least one result, update the data.
                    notifyDataSetChanged();
                } else {
                    // The API did not return any results, invalidate the data set.
                    //notifyDataSetInvalidated();
                }
            }
        };
        return filter;
    }

    private ArrayList&lt;PlaceAutocomplete&gt; getAutocomplete(CharSequence constraint) {
        if (mGoogleApiClient.isConnected()) {
            Log.i("""", ""Starting autocomplete query for: "" + constraint);

            // Submit the query to the autocomplete API and retrieve a PendingResult that will
            // contain the results when the query completes.
            PendingResult&lt;AutocompletePredictionBuffer&gt; results =
                    Places.GeoDataApi
                            .getAutocompletePredictions(mGoogleApiClient, constraint.toString(),
                                    mBounds, mPlaceFilter);

            // This method should have been called off the main UI thread. Block and wait for at most 60s
            // for a result from the API.
            AutocompletePredictionBuffer autocompletePredictions = results
                    .await(60, TimeUnit.SECONDS);

            // Confirm that the query completed successfully, otherwise return null
            final Status status = autocompletePredictions.getStatus();
            if (!status.isSuccess()) {
//                Toast.makeText(mContext, ""Error contacting API: "" + status.toString(),
//                        Toast.LENGTH_SHORT).show();
                Log.e("""", ""Error getting autocomplete prediction API call: "" + status.toString());
                autocompletePredictions.release();
                return null;
            }

            Log.i("""", ""Query completed. Received "" + autocompletePredictions.getCount()
                    + "" predictions."");

            // Copy the results into our own data structure, because we can't hold onto the buffer.
            // AutocompletePrediction objects encapsulate the API response (place ID and description).

            Iterator&lt;AutocompletePrediction&gt; iterator = autocompletePredictions.iterator();
            ArrayList resultList = new ArrayList&lt;&gt;(autocompletePredictions.getCount());
            while (iterator.hasNext()) {
                AutocompletePrediction prediction = iterator.next();
                // Get the details of this prediction and copy it into a new PlaceAutocomplete object.
                resultList.add(new PlaceAutocomplete(prediction.getPlaceId(),
                        prediction.getDescription()));
            }

            // Release the buffer now that all data has been copied.
            autocompletePredictions.release();

            return resultList;
        }
        Log.e("""", ""Google API client is not connected for autocomplete query."");
        return null;
    }

    @Override
    public PlaceViewHolder onCreateViewHolder(ViewGroup viewGroup, int viewType) {
        LayoutInflater layoutInflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View convertView = layoutInflater.inflate(layout, viewGroup, false);
        PlaceViewHolder mPredictionHolder = new PlaceViewHolder(convertView);
        return mPredictionHolder;
    }


    @Override
    public void onBindViewHolder(PlaceViewHolder mPredictionHolder, final int i) {
        mPredictionHolder.mAddress.setText(mResultList.get(i).description);

        mPredictionHolder.mParentLayout.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                mListener.onPlaceClick(mResultList,i);
            }
        });

    }

    @Override
    public int getItemCount() {
        if(mResultList != null)
            return mResultList.size();
        else
            return 0;
    }

    public PlaceAutocomplete getItem(int position) {
        return mResultList.get(position);
    }

    /*
    View Holder For Trip History
     */
    public class PlaceViewHolder extends RecyclerView.ViewHolder {
        //        CardView mCardView;
        public RelativeLayout mParentLayout;
        public TextView mAddress;

        public PlaceViewHolder(View itemView) {
            super(itemView);
            mParentLayout = (RelativeLayout)itemView.findViewById(R.id.predictedRow);
            mAddress = (TextView)itemView.findViewById(R.id.address);
        }

    }

    /**
     * Holder for Places Geo Data Autocomplete API results.
     */
    public class PlaceAutocomplete {

        public CharSequence placeId;
        public CharSequence description;

        PlaceAutocomplete(CharSequence placeId, CharSequence description) {
            this.placeId = placeId;
            this.description = description;
        }

        @Override
        public String toString() {
            return description.toString();
        }
    }
}
</code></pre>

<blockquote>
  <p>view_placesearch.xml</p>
</blockquote>

<p>Customized view that you want to show in your adapter</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;RelativeLayout xmlns:android=""http://schemas.android.com/apk/res/android""
    android:id=""@+id/predictedRow""
    android:layout_width=""match_parent""
    android:layout_height=""65dp""
    android:layout_marginLeft=""10dp""
    android:layout_marginRight=""10dp""
    android:layout_centerVertical=""true""
    android:gravity=""center_vertical""&gt;

    &lt;ImageView
        android:id=""@+id/image""
        android:layout_width=""22dp""
        android:layout_height=""22dp""
        android:src=""@drawable/ic_action_navigate""
        android:layout_marginLeft=""10dp""
        android:layout_marginTop=""20dp""
        /&gt;

    &lt;TextView
        android:id=""@+id/address""
        android:layout_width=""match_parent""
        android:layout_height=""wrap_content""
        android:textColor=""#000""
        android:textSize=""15sp""
        android:layout_toRightOf=""@+id/image""
        android:layout_centerVertical=""true""
        android:layout_marginLeft=""20dp""
        android:layout_marginRight=""20dp""
        /&gt;
&lt;View
    android:layout_width=""match_parent""
    android:layout_height=""1dp""
    android:background=""@color/light_gray""
    android:layout_alignParentBottom=""true""/&gt;
&lt;/RelativeLayout&gt;
</code></pre>

<p>Hope it will help you too.</p>

<p><strong>Note:</strong>
Do not forget to add API key in your <code>manifest</code> file. </p>

<p><strong>Output will be like:</strong></p>

<p><a href=""https://i.stack.imgur.com/tikr2.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/tikr2.png"" alt=""enter image description here""></a></p>

<p>I found some Useful links that can also help you.</p>

<p><strong><a href=""https://github.com/googlesamples/android-play-places"" rel=""noreferrer"">1. Android Plat Places using custom Adapter</a></strong></p>
",2022000,,2022000,,2016-05-05 9:34:10,2016-05-05 9:34:10,,,,15,,,
Android,48666854,2,,48527171,2018,,47,,"<p><strong>Nougat and Above:</strong>
We have to use JobScheduler and JobService for Connection Changes. </p>

<p>All I can divide this into three steps. </p>

<blockquote>
  <p>Register JobScheduler inside activity. Also, Start JobService( 
  Service to handle callbacks from the JobScheduler. Requests scheduled
  with the JobScheduler ultimately land on this service's ""onStartJob""
  method.)</p>
</blockquote>

<pre><code>public class NetworkConnectionActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_network_connection);
        Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);
        setSupportActionBar(toolbar);

        scheduleJob();

    }


    @RequiresApi(api = Build.VERSION_CODES.LOLLIPOP)
    private void scheduleJob() {
        JobInfo myJob = new JobInfo.Builder(0, new ComponentName(this, NetworkSchedulerService.class))
                .setRequiresCharging(true)
                .setMinimumLatency(1000)
                .setOverrideDeadline(2000)
                .setRequiredNetworkType(JobInfo.NETWORK_TYPE_ANY)
                .setPersisted(true)
                .build();

        JobScheduler jobScheduler = (JobScheduler) getSystemService(Context.JOB_SCHEDULER_SERVICE);
        jobScheduler.schedule(myJob);
    }

    @Override
    protected void onStop() {
        // A service can be ""started"" and/or ""bound"". In this case, it's ""started"" by this Activity
        // and ""bound"" to the JobScheduler (also called ""Scheduled"" by the JobScheduler). This call
        // to stopService() won't prevent scheduled jobs to be processed. However, failing
        // to call stopService() would keep it alive indefinitely.
        stopService(new Intent(this, NetworkSchedulerService.class));
        super.onStop();
    }

    @Override
    protected void onStart() {
        super.onStart();
        // Start service and provide it a way to communicate with this class.
        Intent startServiceIntent = new Intent(this, NetworkSchedulerService.class);
        startService(startServiceIntent);
    }
}
</code></pre>

<blockquote>
  <p>The service to start and finish the job.</p>
</blockquote>

<pre><code>public class NetworkSchedulerService extends JobService implements
        ConnectivityReceiver.ConnectivityReceiverListener {

    private static final String TAG = NetworkSchedulerService.class.getSimpleName();

    private ConnectivityReceiver mConnectivityReceiver;

    @Override
    public void onCreate() {
        super.onCreate();
        Log.i(TAG, ""Service created"");
        mConnectivityReceiver = new ConnectivityReceiver(this);
    }



    /**
     * When the app's NetworkConnectionActivity is created, it starts this service. This is so that the
     * activity and this service can communicate back and forth. See ""setUiCallback()""
     */
    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Log.i(TAG, ""onStartCommand"");
        return START_NOT_STICKY;
    }


    @Override
    public boolean onStartJob(JobParameters params) {
        Log.i(TAG, ""onStartJob"" + mConnectivityReceiver);
        registerReceiver(mConnectivityReceiver, new IntentFilter(Constants.CONNECTIVITY_ACTION));
        return true;
    }

    @Override
    public boolean onStopJob(JobParameters params) {
        Log.i(TAG, ""onStopJob"");
        unregisterReceiver(mConnectivityReceiver);
        return true;
    }

    @Override
    public void onNetworkConnectionChanged(boolean isConnected) {
        String message = isConnected ? ""Good! Connected to Internet"" : ""Sorry! Not connected to internet"";
        Toast.makeText(getApplicationContext(), message, Toast.LENGTH_SHORT).show();

    }
}
</code></pre>

<blockquote>
  <p>Finally, The receiver class which checks the network connection
  changes.</p>
</blockquote>

<pre><code>public class ConnectivityReceiver extends BroadcastReceiver {

    private ConnectivityReceiverListener mConnectivityReceiverListener;

    ConnectivityReceiver(ConnectivityReceiverListener listener) {
        mConnectivityReceiverListener = listener;
    }


    @Override
    public void onReceive(Context context, Intent intent) {
        mConnectivityReceiverListener.onNetworkConnectionChanged(isConnected(context));

    }

    public static boolean isConnected(Context context) {
        ConnectivityManager cm = (ConnectivityManager)
                context.getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo activeNetwork = cm.getActiveNetworkInfo();
        return activeNetwork != null &amp;&amp; activeNetwork.isConnectedOrConnecting();
    }

    public interface ConnectivityReceiverListener {
        void onNetworkConnectionChanged(boolean isConnected);
    }
}
</code></pre>

<blockquote>
  <p>Don't forget to add permission and service inside manifest file.</p>
</blockquote>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;manifest xmlns:android=""http://schemas.android.com/apk/res/android""
          package=""com.yourpackagename""&gt;

    &lt;uses-permission android:name=""android.permission.INTERNET""/&gt;
    &lt;uses-permission android:name=""android.permission.ACCESS_NETWORK_STATE""/&gt;


    &lt;!-- Always required on api &lt; 21, needed to keep a wake lock while your job is running --&gt;
    &lt;uses-permission android:name=""android.permission.WAKE_LOCK""/&gt;
    &lt;!-- Required on api &lt; 21 if you are using setRequiredNetworkType(int) --&gt;
    &lt;uses-permission android:name=""android.permission.ACCESS_NETWORK_STATE""/&gt;
    &lt;!-- Required on all api levels if you are using setPersisted(true) --&gt;
    &lt;uses-permission android:name=""android.permission.RECEIVE_BOOT_COMPLETED""/&gt;

    &lt;application
        android:allowBackup=""true""
        android:icon=""@mipmap/ic_launcher""
        android:label=""@string/app_name""
        android:roundIcon=""@mipmap/ic_launcher_round""
        android:supportsRtl=""true""
        android:theme=""@style/AppTheme""&gt;
        &lt;activity
            android:name="".connectivity.NetworkConnectionActivity""
            android:theme=""@style/AppTheme.NoActionBar""&gt;
            &lt;intent-filter&gt;
                &lt;action android:name=""android.intent.action.MAIN""/&gt;

                &lt;category android:name=""android.intent.category.LAUNCHER""/&gt;
            &lt;/intent-filter&gt;
        &lt;/activity&gt;


        &lt;!-- Define your service, make sure to add the permision! --&gt;
        &lt;service
            android:name="".connectivity.NetworkSchedulerService""
            android:exported=""true""
            android:permission=""android.permission.BIND_JOB_SERVICE""/&gt;
    &lt;/application&gt;

&lt;/manifest&gt;
</code></pre>

<p>Please refer below links for more info. </p>

<p><a href=""https://github.com/jiteshmohite/Android-Network-Connectivity"" rel=""noreferrer"">https://github.com/jiteshmohite/Android-Network-Connectivity</a></p>

<p><a href=""https://github.com/evant/JobSchedulerCompat"" rel=""noreferrer"">https://github.com/evant/JobSchedulerCompat</a></p>

<p><a href=""https://github.com/googlesamples/android-JobScheduler"" rel=""noreferrer"">https://github.com/googlesamples/android-JobScheduler</a></p>

<p><a href=""https://medium.com/@iiro.krankka/its-time-to-kiss-goodbye-to-your-implicit-broadcastreceivers-eefafd9f4f8a"" rel=""noreferrer"">https://medium.com/@iiro.krankka/its-time-to-kiss-goodbye-to-your-implicit-broadcastreceivers-eefafd9f4f8a</a></p>
",5106574,,5106574,,2018-02-07 18:00:44,2018-02-07 18:00:44,,,,22,,,
Android,33273178,2,,32600204,2015,,52,,"<p>I forked <a href=""https://github.com/googlesamples/android-topeka/blob/master/app/build.gradle"" rel=""nofollow noreferrer"">android-topeka google sample</a> and updated appcompat version to 23.1.0, same message:</p>

<blockquote>
  <p>Warning:Conflict with dependency
  'com.android.support:support-annotations'. Resolved versions for app
  (23.1.0) and test app (23.0.1) differ.</p>
</blockquote>

<p>I added:</p>

<pre><code>androidTestCompile 'com.android.support:support-annotations:23.1.0'
</code></pre>

<p>Now both resolve to 23.1.0, the warning is gone, and the app and tests still work.</p>

<p>I'm not sure that it's the better solution, so I'm searching for another but found your question. </p>

<p><strong>Update:</strong> Read <a href=""https://stackoverflow.com/a/28641446/1009132"">this good explanation by PaulR</a>.</p>

<p><strong>Update2:</strong> Confirmed, <a href=""https://github.com/googlesamples/android-testing/blob/ba14ef9e925fa17621bf86abe5336dcb9d53e466/runner/AndroidJunitRunnerSample/app/build.gradle#L36"" rel=""nofollow noreferrer"">android-testing google sample</a> does it.</p>

<pre><code>// Testing-only dependencies
// Force usage of support annotations in the test app, since it is internally used by the runner module.
androidTestCompile 'com.android.support:support-annotations:23.0.1'
</code></pre>

<p><strong>Update3</strong>: <a href=""https://stackoverflow.com/a/28999596/1009132"">Another good response by CommonsWare</a>.</p>

<p>Check your specific versions/conflicts/resolutions using:</p>

<pre><code>./gradlew -q yourmodule:dependencies
</code></pre>

<p><a href=""https://i.stack.imgur.com/hgqyV.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/hgqyV.png"" alt=""enter image description here""></a></p>

<p>Appcompat is 22.1.1 in your case but you are forcing 22.1.0.</p>

<p><strong>Update4:</strong>
Dependency conflict explained at <a href=""https://youtu.be/OOEDKf06WqA?t=5m38s"" rel=""nofollow noreferrer"">The Android Build System (Android Dev Summit 2015)</a>.</p>

<p><a href=""https://i.stack.imgur.com/G8MQZ.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/G8MQZ.png"" alt=""enter image description here""></a></p>

<p><a href=""http://g.co/androidstudio/app-test-app-conflict"" rel=""nofollow noreferrer"">Resolving conflicts between main and test APK</a></p>

<blockquote>
  <p>When instrumentation tests are run, both the main APK and test APK
  share the same classpath. Gradle build will fail if the main APK and
  the test APK use the same library (e.g. Guava) but in different
  versions. If gradle didn't catch that, your app could behave
  differently during tests and during normal run (including crashing in
  one of the cases).</p>
  
  <p>To make the build succeed, just make sure both APKs use the same
  version. <strong>If the error is about an indirect dependency</strong> (a library you
  didn't mention in your build.gradle), <strong>just add a dependency for the
  newer version to the configuration</strong> (""compile"" or ""androidTestCompile"")
  <strong>that needs it.</strong> You can also use Gradle's resolution strategy
  mechanism. You can inspect the dependency tree by running ./gradlew
  :app:dependencies and ./gradlew :app:androidDependencies.</p>
</blockquote>
",1009132,,-1,,2017-05-23 12:34:10,2015-11-28 19:24:40,,,,0,,,
Android,33359656,2,,6186866,2015,,55,,"<p>You can disable asset compression for certain extensions like so:</p>

<pre><code>android {
    aaptOptions {
        noCompress ""pdf""
    }
}
</code></pre>

<p><a href=""https://github.com/googlesamples/android-PdfRendererBasic"">Source</a></p>
",577062,,,,,2015-10-27 3:50:08,,,,3,,,
Android,29937159,2,,28999124,2015,,58,,"<p>Actually it's a bug of new update version of Espresso Contrib, you can refer this workaround : <a href=""https://github.com/googlesamples/android-testing/blob/master/build.gradle#L21"">android-testing/build.gradle</a></p>

<pre><code>configurations.all {
    resolutionStrategy.force 'com.android.support:support-annotations:22.1.0'
}
</code></pre>
",1896861,,,,,2015-04-29 7:33:53,,,,6,,,
Android,34549690,2,,32513379,2015,,58,,"<p>First step and the one which Ken White rightly suggested &amp; which you may have already covered is the <a href=""https://android.googlesource.com/platform/development/+/master/samples/ApiDemos/src/com/example/android/apis/media/projection/MediaProjectionDemo.java"" rel=""noreferrer"">Example Code</a> provided officially.</p>

<p>I have used their API earlier. I agree screenshot is pretty straight forward. But, screen recording is also under similar lines.</p>

<p>I will answer your questions in 3 sections and will wrap it up with a link. :)</p>

<hr>

<p><strong>1. Start Video Recording</strong></p>

<pre><code>private void startScreenRecord(final Intent intent) {
 if (DEBUG) Log.v(TAG, ""startScreenRecord:sMuxer="" + sMuxer);
 synchronized(sSync) {
  if (sMuxer == null) {
   final int resultCode = intent.getIntExtra(EXTRA_RESULT_CODE, 0);
   // get MediaProjection 
   final MediaProjection projection = mMediaProjectionManager.getMediaProjection(resultCode, intent);
   if (projection != null) {
    final DisplayMetrics metrics = getResources().getDisplayMetrics();
    final int density = metrics.densityDpi;

    if (DEBUG) Log.v(TAG, ""startRecording:"");
    try {
     sMuxer = new MediaMuxerWrapper("".mp4""); // if you record audio only, "".m4a"" is also OK. 
     if (true) {
      // for screen capturing 
      new MediaScreenEncoder(sMuxer, mMediaEncoderListener,
       projection, metrics.widthPixels, metrics.heightPixels, density);
     }
     if (true) {
      // for audio capturing 
      new MediaAudioEncoder(sMuxer, mMediaEncoderListener);
     }
     sMuxer.prepare();
     sMuxer.startRecording();
    } catch (final IOException e) {
     Log.e(TAG, ""startScreenRecord:"", e);
    }
   }
  }
 }
}
</code></pre>

<p><strong>2. Stop Video Recording</strong></p>

<pre><code> private void stopScreenRecord() {
  if (DEBUG) Log.v(TAG, ""stopScreenRecord:sMuxer="" + sMuxer);
  synchronized(sSync) {
   if (sMuxer != null) {
    sMuxer.stopRecording();
    sMuxer = null;
    // you should not wait here 
   }
  }
 }
</code></pre>

<p><strong>2.5. Pause and Resume Video Recording</strong></p>

<pre><code> private void pauseScreenRecord() {
  synchronized(sSync) {
   if (sMuxer != null) {
    sMuxer.pauseRecording();
   }
  }
 }

 private void resumeScreenRecord() {
  synchronized(sSync) {
   if (sMuxer != null) {
    sMuxer.resumeRecording();
   }
  }
 }
</code></pre>

<p>Hope the code helps. Here is the <a href=""http://www.programcreek.com/java-api-examples/index.php?source_dir=ScreenRecordingSample-master/src/com/serenegiant/service/ScreenRecorderService.java"" rel=""noreferrer""><strong>original link</strong></a> to the code that I referred to and from which this implementation(Video recording) is also derived from.</p>

<hr>

<p><strong>3. Take screenshot Instead of Video</strong></p>

<blockquote>
  <p>I think by default its easy to capture the image in bitmap format. You can still go ahead with <a href=""https://github.com/mtsahakis/MediaProjectionDemo"" rel=""noreferrer"">MediaProjectionDemo</a> example to capture screenshot.</p>
</blockquote>

<p><strong>[EDIT] : Code encrypt for screenshot</strong></p>

<p><strong>a. To create virtual display depending on device width / height</strong></p>

<pre><code>mImageReader = ImageReader.newInstance(mWidth, mHeight, PixelFormat.RGBA_8888, 2);
mVirtualDisplay = sMediaProjection.createVirtualDisplay(SCREENCAP_NAME, mWidth, mHeight, mDensity, VIRTUAL_DISPLAY_FLAGS, mImageReader.getSurface(), null, mHandler);
mImageReader.setOnImageAvailableListener(new ImageAvailableListener(), mHandler);
</code></pre>

<p><strong>b. Then start the Screen Capture based on an intent or action-</strong></p>

<pre><code>startActivityForResult(mProjectionManager.createScreenCaptureIntent(), REQUEST_CODE);
</code></pre>

<p>Stop Media projection-</p>

<pre><code>sMediaProjection.stop();
</code></pre>

<p><strong>c. Then convert to image-</strong></p>

<pre><code>//Process the media capture
image = mImageReader.acquireLatestImage();
Image.Plane[] planes = image.getPlanes();
ByteBuffer buffer = planes[0].getBuffer();
int pixelStride = planes[0].getPixelStride();
int rowStride = planes[0].getRowStride();
int rowPadding = rowStride - pixelStride * mWidth;
//Create bitmap
bitmap = Bitmap.createBitmap(mWidth + rowPadding / pixelStride, mHeight, Bitmap.Config.ARGB_8888);
bitmap.copyPixelsFromBuffer(buffer);
//Write Bitmap to file in some path on the phone
fos = new FileOutputStream(STORE_DIRECTORY + ""/myscreen_"" + IMAGES_PRODUCED + "".png"");
bitmap.compress(CompressFormat.PNG, 100, fos);
fos.close();
</code></pre>

<hr>

<p>There are several implementations <strong>(full code) of Media Projection API</strong> available.
Some other links that can help you in your development-</p>

<ol>
<li><p><a href=""http://mattsnider.com/video-recording-with-mediaprojectionmanager/"" rel=""noreferrer"">Video Recording with MediaProjectionManager</a> - website</p></li>
<li><p><strike><a href=""https://github.com/googlesamples/android-ScreenCapture"" rel=""noreferrer"">android-ScreenCapture</a> - github</strike> as per android developer's observations :)</p></li>
<li><p><a href=""https://github.com/chinmoyp/screenrecorder"" rel=""noreferrer"">screenrecorder</a> - github</p></li>
<li><p><a href=""http://www.truiton.com/2015/05/capture-record-android-screen-using-mediaprojection-apis/"" rel=""noreferrer"">Capture and Record Android Screen using MediaProjection APIs</a> - website</p></li>
</ol>

<hr>

<p>Hope it helps :) Happy coding and screen recording!</p>

<p><em>PS: Can you please tell me the Microsoft app you are talking about? I have not used it. Would like to try it :)</em></p>
",3782392,,5670695,,2018-07-27 21:32:57,2018-07-27 21:32:57,,,,24,,,
Android,45943282,2,,40398072,2017,,60,,"<p>Here's a neat alternative from Google's architecture components <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/BasicRxJavaSampleKotlin/app/src/main/java/com/example/android/observability/persistence/UsersDatabase.kt"" rel=""noreferrer"">sample code</a>, which uses the <code>also</code> function:</p>

<pre><code>class UsersDatabase : RoomDatabase() {

    companion object {

        @Volatile private var INSTANCE: UsersDatabase? = null

        fun getInstance(context: Context): UsersDatabase =
            INSTANCE ?: synchronized(this) {
                INSTANCE ?: buildDatabase(context).also { INSTANCE = it }
            }

        private fun buildDatabase(context: Context) =
            Room.databaseBuilder(context.applicationContext,
                    UsersDatabase::class.java, ""Sample.db"")
                    .build()
    }
}
</code></pre>
",775282,,8343333,,2017-08-29 19:15:04,2017-08-29 19:15:04,,,,3,,,
Android,27820255,2,,2456344,2015,,64,,"<p>Since API Level 21 (Lollipop) Android provides a <a href=""https://developer.android.com/reference/android/graphics/pdf/PdfRenderer.html"" rel=""noreferrer"">PdfRenderer class</a>:</p>

<pre><code>// create a new renderer
 PdfRenderer renderer = new PdfRenderer(getSeekableFileDescriptor());

 // let us just render all pages
 final int pageCount = renderer.getPageCount();
 for (int i = 0; i &lt; pageCount; i++) {
     Page page = renderer.openPage(i);

     // say we render for showing on the screen
     page.render(mBitmap, null, null, Page.RENDER_MODE_FOR_DISPLAY);

     // do stuff with the bitmap

     // close the page
     page.close();
 }

 // close the renderer
 renderer.close();
</code></pre>

<p>For more information see the <a href=""https://github.com/googlesamples/android-PdfRendererBasic"" rel=""noreferrer"">sample app</a>.</p>

<p>For older APIs I recommend <a href=""https://github.com/barteksc/AndroidPdfViewer"" rel=""noreferrer"">Android PdfViewer library</a>, it is very fast and easy to use, licensed under Apache License 2.0:</p>

<pre><code>pdfView.fromAsset(String)
  .pages(0, 2, 1, 3, 3, 3) // all pages are displayed by default
  .enableSwipe(true)
  .swipeHorizontal(false)
  .enableDoubletap(true)
  .defaultPage(0)
  .onDraw(onDrawListener)
  .onLoad(onLoadCompleteListener)
  .onPageChange(onPageChangeListener)
  .onPageScroll(onPageScrollListener)
  .onError(onErrorListener)
  .enableAnnotationRendering(false)
  .password(null)
  .scrollHandle(null)
  .load();
</code></pre>
",2380518,,2380518,,2017-02-20 13:19:55,2017-02-20 13:19:55,,,,10,,,
Android,31880936,2,,30585289,2015,,66,,"<p>I got this from <a href=""https://github.com/googlesamples/android-testing-templates/tree/master/AndroidTestingBlueprint"" rel=""noreferrer"">the new testing template</a> from Google.</p>

<p>Create a new <code>AndroidManifest.xml</code> file in your <code>test</code> or <code>androidTest</code> folder.</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;manifest
    xmlns:tools=""http://schemas.android.com/tools""
    package=""your.package.name""&gt;

    &lt;uses-sdk tools:overrideLibrary=""android.support.test.uiautomator.v18""/&gt;
&lt;/manifest&gt;
</code></pre>
",1747491,,,,,2015-08-07 15:01:58,,,,1,,,
Android,38045379,2,,37869418,2016,,69,,"<p>I had the same problem and solved it by using <code>IntentsTestRule</code> instead of <code>ActivityTestRule</code>. <code>IntentsTestRule</code> is a subclass of <code>ActivityTestRule</code>. Set up your <code>@Rule</code> which creates the activity like so:</p>

<pre><code>@Rule
public IntentsTestRule&lt;MyActivity&gt; mActivity = new IntentsTestRule&lt;MyActivity&gt;(MyActivity.class) {
    @Override
    protected Intent getActivityIntent() {
        ...
    }
};
</code></pre>

<blockquote>
  <p>See the following project for more information:
  <a href=""https://github.com/googlesamples/android-testing/tree/master/ui/espresso/IntentsBasicSample"" rel=""noreferrer"">https://github.com/googlesamples/android-testing/tree/master/ui/espresso/IntentsBasicSample</a></p>
</blockquote>
",3527343,,638162,,2018-10-31 6:19:44,2018-10-31 6:19:44,,,,2,,,
Android,30628530,2,,4916209,2015,,75,,"<p><strong>Update November 2018</strong></p>

<p>After working and blogging about MVC and MVP in Android for several years (see the body of the answer below), I decided to capture my knowledge and understanding in a more comprehensive and easily digestible form.</p>

<p>So, I released a full blown video course about Android applications architecture. So, if you're interested in mastering the most advanced architectural patterns in Android development, <a href=""https://www.udemy.com/android-architecture/?couponCode=STACKOVERFLOW"" rel=""nofollow noreferrer"">check out this comprehensive course here</a>.</p>

<p><strong>This answer was updated in order to remain relevant as of November 2016</strong></p>

<hr>

<p>It looks like you are seeking for <a href=""http://en.wikipedia.org/wiki/Architectural_pattern"" rel=""nofollow noreferrer"">architectural patterns</a> rather than <a href=""http://en.wikipedia.org/wiki/Software_design_pattern"" rel=""nofollow noreferrer"">design patterns</a>.</p>

<p><strong>Design patterns</strong> aim at describing a general ""trick"" that programmer might implement for handling a particular set of recurring software tasks. For example: In OOP, when there is a need for an object to notify a set of other objects about some events, the <a href=""https://en.wikipedia.org/wiki/Observer_pattern"" rel=""nofollow noreferrer"">observer design pattern</a> can be employed.</p>

<p>Since Android applications (and most of AOSP) are written in Java, which is object-oriented, I think you'll have a hard time looking for a single OOP design pattern which is NOT used on Android.</p>

<p><strong>Architectural patterns</strong>, on the other hand, do not address particular software tasks - they aim to provide <strong>templates</strong> for software organization based on the use cases of the software component in question.</p>

<p>It sounds a bit complicated, but I hope an example will clarify: If some application will be used to fetch data from a remote server and present it to the user in a structured manner, then <a href=""https://developer.android.com/topic/libraries/data-binding/index.html"" rel=""nofollow noreferrer"">MVC</a> might be a good candidate for consideration. Note that I said nothing about software tasks and program flow of the application - I just described it from user's point of view, and a candidate for an architectural pattern emerged.</p>

<p>Since you mentioned MVC in your question, I'd guess that architectural patterns is what you're looking for.</p>

<p><a href=""https://i.stack.imgur.com/EVpWm.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/EVpWm.png"" alt=""Enter image description here""></a></p>

<hr>

<p>Historically, there were no official guidelines by Google about applications' architectures, which (among other reasons) led to a total mess in the source code of Android apps. In fact, even today most applications that I see still do not follow OOP best practices and do not show a clear logical organization of code.</p>

<p>But today the situation is different - Google recently released the <a href=""https://developer.android.com/topic/libraries/data-binding/index.html"" rel=""nofollow noreferrer"">Data Binding library</a>, which is fully integrated with Android Studio, and, even, rolled out a set of <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">architecture blueprints for Android applications</a>.</p>

<p>Two years ago it was very hard to find information about MVC or MVP on Android. Today, MVC, MVP and MVVM has become ""buzz-words"" in the Android community, and we are surrounded by countless experts which constantly try to convince us that MVx is better than MVy. In my opinion, discussing whether MVx is better than MVy is totally pointless because the terms themselves are very ambiguous - just look at the answers to <a href=""https://stackoverflow.com/questions/2056/what-are-mvp-and-mvc-and-what-is-the-difference"">this question</a>, and you'll realize that different people can associate these abbreviations with completely different constructs.</p>

<p>Due to the fact that a search for a best architectural pattern for Android has officially been started, I think we are about to see several more ideas come to light. At this point, it is really impossible to predict which pattern (or patterns) will become industry standards in the future - we will need to wait and see (I guess it is matter of a year or two).</p>

<p>However, there is one prediction I can make with a high degree of confidence: Usage of the Data Binding library will not become an industry standard. I'm confident to say that because the Data Binding library (in its current implementation) provides short-term productivity gains and some kind of architectural guideline, but it will make the code non-maintainable in the long run. Once long-term effects of this library will surface - it will be abandoned.</p>

<hr>

<p>Now, although we do have some sort of official guidelines and tools today, I, personally, don't think that these guidelines and tools are the best options available (and they are definitely not the only ones). In my applications I use my own implementation of an MVC architecture. It is simple, clean, readable and testable, and does not require any additional libraries.</p>

<p>This MVC is not just cosmetically different from others - it is based on a theory that <a href=""http://www.techyourchance.com/activities-android/"" rel=""nofollow noreferrer"">Activities in Android are not UI Elements</a>, which has tremendous implications on code organization.</p>

<p>So, if you're looking for a good architectural pattern for Android applications that follows <a href=""http://www.techyourchance.com/mvp-mvc-android-1/"" rel=""nofollow noreferrer"">SOLID</a> principles, you can find a description of one in my post about <a href=""http://www.techyourchance.com/mvp-mvc-android-1/"" rel=""nofollow noreferrer"">MVC and MVP architectural patterns in Android</a>.</p>
",2463035,,2463035,,2018-11-10 6:48:12,2018-11-10 6:48:12,,,,2,,,
Android,44506312,2,,44270577,2017,,77,,"<p>You need to implement your own <code>ViewModelProvider.Factory</code>. There is an example app created by Google demonstrating how to connect Dagger 2 with ViewModels. <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample"" rel=""noreferrer"">LINK</a>. You need those 5 things:</p>

<p>In ViewModel:</p>

<pre><code>@Inject
public UserViewModel(UserRepository userRepository, RepoRepository repoRepository) {
</code></pre>

<p>Define annotation:</p>

<pre><code>@Documented
@Target({ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
@MapKey
@interface ViewModelKey {
    Class&lt;? extends ViewModel&gt; value();
}
</code></pre>

<p>In ViewModelModule:</p>

<pre><code>@Module
abstract class ViewModelModule {
    @Binds
    @IntoMap
    @ViewModelKey(UserViewModel.class)
    abstract ViewModel bindUserViewModel(UserViewModel userViewModel);
</code></pre>

<p>In Fragment:</p>

<pre><code>@Inject
ViewModelProvider.Factory viewModelFactory;

@Override
public void onActivityCreated(@Nullable Bundle savedInstanceState) {
            userViewModel = ViewModelProviders.of(this, viewModelFactory).get(UserViewModel.class);
</code></pre>

<p>Factory:</p>

<pre><code>@Singleton
public class GithubViewModelFactory implements ViewModelProvider.Factory {
    private final Map&lt;Class&lt;? extends ViewModel&gt;, Provider&lt;ViewModel&gt;&gt; creators;

    @Inject
    public GithubViewModelFactory(Map&lt;Class&lt;? extends ViewModel&gt;, Provider&lt;ViewModel&gt;&gt; creators) {
        this.creators = creators;
    }

    @SuppressWarnings(""unchecked"")
    @Override
    public &lt;T extends ViewModel&gt; T create(Class&lt;T&gt; modelClass) {
        Provider&lt;? extends ViewModel&gt; creator = creators.get(modelClass);
        if (creator == null) {
            for (Map.Entry&lt;Class&lt;? extends ViewModel&gt;, Provider&lt;ViewModel&gt;&gt; entry : creators.entrySet()) {
                if (modelClass.isAssignableFrom(entry.getKey())) {
                    creator = entry.getValue();
                    break;
                }
            }
        }
        if (creator == null) {
            throw new IllegalArgumentException(""unknown model class "" + modelClass);
        }
        try {
            return (T) creator.get();
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }
}
</code></pre>
",1952987,,2711056,,2018-04-02 22:08:22,2018-04-02 22:08:22,,,,11,,,
Android,20485213,2,,15575605,2013,,79,,"<p>Make sure that you call the IabHelper's <code>handleActivityResult</code> in the Activity's <code>onActivityResult</code>, and <strong>NOT</strong> in the Fragment's <code>onActivityResult</code>.</p>

<p>The following code snippet is from TrivialDrive's <a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample/MainActivity.java#L446"" rel=""noreferrer"">MainActivity</a>:</p>

<pre><code>@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    Log.d(TAG, ""onActivityResult("" + requestCode + "","" + resultCode + "","" + data);
    if (mHelper == null) return;

    // Pass on the activity result to the helper for handling
    if (!mHelper.handleActivityResult(requestCode, resultCode, data)) {
        // not handled, so handle it ourselves (here's where you'd
        // perform any handling of activity results not related to in-app
        // billing...
        super.onActivityResult(requestCode, resultCode, data);
    }
    else {
        Log.d(TAG, ""onActivityResult handled by IABUtil."");
    }
}
</code></pre>

<p><strong>Update:</strong> </p>

<ul>
<li>There is now a <a href=""https://developer.android.com/google/play/billing/api.html"" rel=""noreferrer"">In-app Billing Version 3 API</a> (what was the version in 2013?)</li>
<li>The code sample has moved to <a href=""https://github.com/googlesamples/android-play-billing/tree/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample"" rel=""noreferrer"">Github</a>. Snippet above edited to reflect current sample, but is logically the same as before.</li>
</ul>
",1161743,,1161743,,2017-07-01 3:12:41,2017-07-01 3:12:41,,,,12,,,
Android,21046811,2,,21045509,2014,,102,,"<ol>
<li><p>To verify if dialog appears you can simply check if View with a text that present inside the dialog is shown:</p>

<pre><code>onView(withText(""dialogText"")).check(matches(isDisplayed()));
</code></pre>

<p>or, based on text with id</p>

<pre><code>onView(withId(R.id.myDialogTextId)).check(matches(allOf(withText(myDialogText), isDisplayed()));
</code></pre></li>
<li><p>To click on dialogs button do this (button1 - OK, button2 - Cancel):</p>

<pre><code>onView(withId(android.R.id.button1)).perform(click());
</code></pre>

<p>UPDATE</p></li>
<li>I think is possible since Espresso has <a href=""https://github.com/googlesamples/android-testing"">multi window support</a>.</li>
<li>Not sure about clicking outside the custom dialog view but for checking if it is displaying or not you have to create your custom matcher and check inside it.</li>
</ol>
",2980933,,2980933,,2016-10-19 8:18:49,2016-10-19 8:18:49,,,,6,,,
Android,1925534,2,,1925486,2009,,107,,"<p>Most Android and iPhone apps I have seen use an initial screen or dialog box to ask for credentials.  I think it is cumbersome for the user to have to re-enter their name/password often, so storing that info makes sense from a usability perspective. </p>

<p>The advice from the (<a href=""http://developer.android.com/guide/practices/security.html#UserData"" rel=""noreferrer"">Android dev guide</a>) is:</p>

<blockquote>
  <p>In general, we recommend minimizing the frequency of asking for user
  credentials -- to make phishing attacks more conspicuous, and less
  likely to be successful. Instead use an authorization token and
  refresh it.</p>
  
  <p>Where possible, username and password should not be stored on the
  device. Instead, perform initial authentication using the username and
  password supplied by the user, and then use a short-lived,
  service-specific authorization token.</p>
</blockquote>

<p>Using the <a href=""http://developer.android.com/reference/android/accounts/AccountManager.html"" rel=""noreferrer"">AccountManger</a> is the best option for storing credentials.  The <a href=""https://github.com/googlesamples/android-BasicSyncAdapter/#readme"" rel=""noreferrer"">SampleSyncAdapter</a> provides an example of how to use it. </p>

<p>If this is not an option to you for some reason, you can fall back to persisting credentials using the <a href=""http://developer.android.com/guide/topics/data/data-storage.html"" rel=""noreferrer"">Preferences</a> mechanism.  Other applications won't be able to access your preferences, so the user's information is not easily exposed.   </p>
",3767,,-1,,2017-12-16 0:24:45,2017-12-16 0:24:45,,,,10,,,
Android,33254073,2,,33251373,2015,,116,,"<p>This dialog is created by <a href=""https://developer.android.com/reference/com/google/android/gms/location/LocationSettingsRequest.Builder.html"" rel=""noreferrer"">LocationSettingsRequest.Builder</a> available in the Google Play Services.</p>

<p>You need to add a dependency to your app <code>build.gradle</code>:</p>

<pre><code>compile 'com.google.android.gms:play-services-location:10.0.1'
</code></pre>

<p>Then you can use this minimal example:</p>

<pre><code>private void displayLocationSettingsRequest(Context context) {
    GoogleApiClient googleApiClient = new GoogleApiClient.Builder(context)
            .addApi(LocationServices.API).build();
    googleApiClient.connect();

    LocationRequest locationRequest = LocationRequest.create();
    locationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);
    locationRequest.setInterval(10000);
    locationRequest.setFastestInterval(10000 / 2);

    LocationSettingsRequest.Builder builder = new LocationSettingsRequest.Builder().addLocationRequest(locationRequest);
    builder.setAlwaysShow(true);

    PendingResult&lt;LocationSettingsResult&gt; result = LocationServices.SettingsApi.checkLocationSettings(googleApiClient, builder.build());
    result.setResultCallback(new ResultCallback&lt;LocationSettingsResult&gt;() {
        @Override
        public void onResult(LocationSettingsResult result) {
            final Status status = result.getStatus();
            switch (status.getStatusCode()) {
                case LocationSettingsStatusCodes.SUCCESS:
                    Log.i(TAG, ""All location settings are satisfied."");
                    break;
                case LocationSettingsStatusCodes.RESOLUTION_REQUIRED:
                    Log.i(TAG, ""Location settings are not satisfied. Show the user a dialog to upgrade location settings "");

                    try {
                        // Show the dialog by calling startResolutionForResult(), and check the result
                        // in onActivityResult().
                        status.startResolutionForResult(MainActivity.this, REQUEST_CHECK_SETTINGS);
                    } catch (IntentSender.SendIntentException e) {
                        Log.i(TAG, ""PendingIntent unable to execute request."");
                    }
                    break;
                case LocationSettingsStatusCodes.SETTINGS_CHANGE_UNAVAILABLE:
                    Log.i(TAG, ""Location settings are inadequate, and cannot be fixed here. Dialog not created."");
                    break;
            }
        }
    });
}
</code></pre>

<p>You can find the complete example <a href=""https://github.com/googlesamples/android-play-location/tree/8163f9f91bbb1ca6ed6470f5458b7c6c7e6f7ef7/LocationSettings/app/src/main/java/com/google/android/gms/location/sample/locationsettings/MainActivity.java"" rel=""noreferrer"">here</a>.</p>
",2837959,,2837959,,2017-06-16 10:00:00,2017-06-16 10:00:00,,,,12,,,
Android,22356513,2,,2868047,2014,,120,,"<p>There's a technique called <a href=""https://developer.android.com/training/system-ui/immersive.html"" rel=""noreferrer"">Immersive Full-Screen Mode</a> available in <strong>KitKat</strong>.
<img src=""https://i.stack.imgur.com/LwAMZ.png"" alt=""Immersive Full-Screen Mode Demo""></p>

<p><a href=""https://github.com/googlesamples/android-ImmersiveMode/"" rel=""noreferrer"">Example</a></p>
",2093236,,1853912,,2018-04-25 18:19:28,2018-04-25 18:19:28,,,,3,,,
Android,30635871,2,,6101311,2015,,394,,"<p><strong>Minimal example</strong> to make things clearer:</p>

<p><strong>Main.java</strong>:</p>

<pre><code>public class Main {
    public native int square(int i);
    public static void main(String[] args) {
        System.loadLibrary(""Main"");
        System.out.println(new Main().square(2));
    }
}
</code></pre>

<p><strong>Main.c</strong>:</p>

<pre><code>#include &lt;jni.h&gt;
#include ""Main.h""

JNIEXPORT jint JNICALL Java_Main_square(
    JNIEnv *env, jobject obj, jint i) {
  return i * i;
}
</code></pre>

<p><strong>Compile and run</strong>:</p>

<pre><code>sudo apt-get install build-essential openjdk-7-jdk
export JAVA_HOME='/usr/lib/jvm/java-7-openjdk-amd64'
javac Main.java
javah -jni Main
gcc -shared -fpic -o libMain.so -I${JAVA_HOME}/include \
  -I${JAVA_HOME}/include/linux Main.c
java -Djava.library.path=. Main
</code></pre>

<p><strong>Output</strong>:</p>

<pre><code>4
</code></pre>

<p>Tested on Ubuntu 14.04 AMD64. Also worked with Oracle JDK 1.8.0_45.</p>

<p><a href=""https://github.com/cirosantilli/java-cheat/tree/77437774e632ba6ecb483f6e69726431a23b5808/jni"" rel=""noreferrer"">Example on GitHub</a> for you to play with.</p>

<p>Underscores in Java package / file names must be escaped with <code>_1</code> in the C function name as mentioned at: <a href=""https://stackoverflow.com/questions/16069209/invoking-jni-functions-in-android-package-name-containing-underscore/35015592#35015592"">Invoking JNI functions in Android package name containing underscore</a> </p>

<p><strong>Interpretation</strong>:</p>

<p>It allows you to:</p>

<ul>
<li>call a compiled dynamically loaded library (here written in C) with arbitrary assembly code from Java</li>
<li>and get results back into Java</li>
</ul>

<p>This could be used to:</p>

<ul>
<li>write faster code on a critical section with better CPU assembly instructions (not CPU portable)</li>
<li>make direct system calls (not OS portable)</li>
</ul>

<p>with the tradeoff of lower portability.</p>

<p>It is also possible for you to call Java from C, but you must first create a JVM in C: <a href=""https://stackoverflow.com/questions/819536/how-to-call-java-function-from-c"">How to call Java functions from C++?</a></p>

<p><strong>Android NDK</strong></p>

<p>The concept is exact the same in this context, except that you have to use Android boilerplate to set it up.</p>

<p>The official NDK repository contains ""canonical"" examples such as the hello-jni app:</p>

<ul>
<li><a href=""https://github.com/googlesamples/android-ndk/blob/4df5a2705e471a0818c6b2dbc26b8e315d89d307/hello-jni/app/src/main/java/com/example/hellojni/HelloJni.java#L39"" rel=""noreferrer"">https://github.com/googlesamples/android-ndk/blob/4df5a2705e471a0818c6b2dbc26b8e315d89d307/hello-jni/app/src/main/java/com/example/hellojni/HelloJni.java#L39</a></li>
<li><a href=""https://github.com/googlesamples/android-ndk/blob/4df5a2705e471a0818c6b2dbc26b8e315d89d307/hello-jni/app/src/main/cpp/hello-jni.c#L27"" rel=""noreferrer"">https://github.com/googlesamples/android-ndk/blob/4df5a2705e471a0818c6b2dbc26b8e315d89d307/hello-jni/app/src/main/cpp/hello-jni.c#L27</a></li>
</ul>

<p>In you <code>unzip</code> an <code>.apk</code> with NDK on Android O, you can see the pre-compiled <code>.so</code> that corresponds to the native code under <code>lib/arm64-v8a/libnative-lib.so</code>.</p>

<p>TODO confirm: furthermore, <code>file /data/app/com.android.appname-*/oat/arm64/base.odex</code>, says it is a shared library, which I think is the AOT precompiled .dex corresponding to the Java files in ART, see also: <a href=""https://stackoverflow.com/questions/9593527/what-are-odex-files-in-android"">What are ODEX files in Android?</a> So maybe the Java is actually also run via a <code>native</code> interface?</p>

<p><strong>Example in the OpenJDK 8</strong></p>

<p>Let's find find where <code>Object#clone</code> is defined in jdk8u60-b27.</p>

<p>We will conclude that it is implemented with a <code>native</code> call.</p>

<p>First we find:</p>

<pre><code>find . -name Object.java
</code></pre>

<p>which leads us to <a href=""http://hg.openjdk.java.net/jdk8u/jdk8u60/jdk/file/afbc08ea922b/src/share/classes/java/lang/Object.java#l212"" rel=""noreferrer"">jdk/src/share/classes/java/lang/Object.java#l212</a>:</p>

<pre><code>protected native Object clone() throws CloneNotSupportedException;
</code></pre>

<p>Now comes the hard part, finding where clone is amidst all the indirection. The query that helped me was:</p>

<pre><code>find . -iname object.c
</code></pre>

<p>which would find either C or C++ files that might implement Object's native methods. It leads us to <a href=""http://hg.openjdk.java.net/jdk8u/jdk8u60/jdk/file/afbc08ea922b/src/share/native/java/lang/Object.c#l47"" rel=""noreferrer"">jdk/share/native/java/lang/Object.c#l47</a>:</p>

<pre><code>static JNINativeMethod methods[] = {
    ...
    {""clone"",       ""()Ljava/lang/Object;"",   (void *)&amp;JVM_Clone},
};

JNIEXPORT void JNICALL
Java_java_lang_Object_registerNatives(JNIEnv *env, jclass cls)
{
    (*env)-&gt;RegisterNatives(env, cls,
                            methods, sizeof(methods)/sizeof(methods[0]));
}
</code></pre>

<p>which leads us to the <code>JVM_Clone</code> symbol:</p>

<pre><code>grep -R JVM_Clone
</code></pre>

<p>which leads us to <a href=""http://hg.openjdk.java.net/jdk8u/jdk8u60/hotspot/file/10ad4b9d79f9/src/share/vm/prims/jvm.cpp#l580"" rel=""noreferrer"">hotspot/src/share/vm/prims/jvm.cpp#l580</a>:</p>

<pre><code>JVM_ENTRY(jobject, JVM_Clone(JNIEnv* env, jobject handle))
    JVMWrapper(""JVM_Clone"");
</code></pre>

<p>After expanding a bunch of macros, we come to the conclusion that this is the definition point.</p>
",895245,,895245,,2017-12-07 13:59:44,2017-12-07 13:59:44,,,,8,,,
Spring,37598036,1,,,2016,,1,842,"<p>I am following this tutorial about Spring-Security-Oauth2 :</p>

<p><a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/tree/master/logout"" rel=""nofollow"">https://github.com/spring-guides/tut-spring-boot-oauth2/tree/master/logout</a></p>

<p>The problem that I am facing is, when I clicked the logout button this send a post request to the /logout endpoint to kill to session, but when I clicked the LogIn button again I expect to see the login Form Again. But It seems that when /logout is called, this is in somewhere saving the information of the last logged user and always re-login again and does not display the login form.</p>

<p>I don't know how to kill the session in the SSO, I am using the  same facebook OAuth.</p>

<p>Thanks for help.</p>
",1469918,,1469918,,2016-06-02 18:06:03,2017-07-19 22:36:28,Spring Security OAuth2 doesn't kill the session and display login again,<java><spring-security><spring-boot><single-sign-on><spring-security-oauth2>,1,6,1,,
Spring,46732371,1,46732904,,2017,,1,198,"<p>does anybody know why the Spring Boot Guide includes two different types of integration tests? (<a href=""https://github.com/spring-guides/gs-spring-boot#add-unit-tests"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-spring-boot#add-unit-tests</a>)</p>

<p>One with TestRestTemplate and one with MockMvc dependency? In each test type spring boot bootstraps the test environment. So what is the reason for this separation?</p>
",6271380,,6271380,,2017-10-18 20:04:57,2018-05-29 15:09:44,Why are there different types of integration tests in Spring Boot,<spring><testing><spring-boot><resttemplate><spring-test>,1,0,1,,
Spring,40357318,1,40460700,,2016,,1,539,"<p>I'm trying to repeat the ""Spring Boot and OAuth2"" example from <a href=""https://spring.io/guides/tutorials/spring-boot-oauth2/"" rel=""nofollow"">tutorial</a>.</p>

<p>I run the example with ""gradlew bootRun"".
It is working on Windows without problems, but I having an issue on Ubuntu 14.04.
When I clicked on ""login"" button the service doesn't perform a redirect to the authorization server (e.g. facebook), and after several minutes return with time-out.</p>

<p>The service's log contains the following lines:</p>

<pre><code>o.s.s.w.u.matcher.AntPathRequestMatcher  : Request 'GET /login' doesn't match 'POST /logout
o.s.security.web.FilterChainProxy        : /login at position 6 of 12 in additional filter chain; firing Filter: 'OAuth2ClientAuthenticationProcessingFilter'
o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/login'; against '/login'
uth2ClientAuthenticationProcessingFilter : Request is to process authentication
</code></pre>

<p>I would be grateful for any help.
Thanks.</p>

<p>Source code of tutorial located on <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/tree/master/logout"" rel=""nofollow"">github</a></p>

<p>My source code are given below:</p>

<p><strong>build.gradle</strong></p>

<pre><code>buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath(""org.springframework.boot:spring-boot-gradle-plugin:1.4.1.RELEASE"")
    }
}

apply plugin: 'java'
apply plugin: 'idea'
apply plugin: 'spring-boot'
sourceCompatibility = '1.8'
targetCompatibility = '1.8'

repositories {
    mavenCentral()
}

dependencies {
    compile(""org.springframework.boot:spring-boot-starter-security"")
    compile(""org.springframework.boot:spring-boot-starter-web"")
    compile(""org.springframework.security.oauth:spring-security-oauth2"")

    compile(""org.webjars:webjars-locator"")
    compile(""org.webjars:angularjs:1.4.3"")
    compile(""org.webjars:jquery:2.1.1"")
    compile(""org.webjars:bootstrap:3.2.0"")

    testCompile group: 'junit', name: 'junit', version: '4.11'
}
</code></pre>

<p><strong>application.yml</strong></p>

<pre><code>security:
  oauth2:
    client:
      clientId: 233668646673605
      clientSecret: 33b17e044ee6a4fa383f46ec6e28ea1d
      accessTokenUri: https://graph.facebook.com/oauth/access_token
      userAuthorizationUri: https://www.facebook.com/dialog/oauth
      tokenName: oauth_token
      authenticationScheme: query
      clientAuthenticationScheme: form
    resource:
      userInfoUri: https://graph.facebook.com/me

logging:
  level:
    org.springframework.security: DEBUG
</code></pre>

<p><strong>SocialApplication.java</strong></p>

<pre><code>@SpringBootApplication
@EnableOAuth2Sso
@RestController
public class SocialApplication extends WebSecurityConfigurerAdapter {

    @RequestMapping(""/user"")
    public Principal user(Principal principal) {
        return principal;
    }

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http.antMatcher(""/**"").authorizeRequests().antMatchers(""/"", ""/login**"", ""/webjars/**"").permitAll()
                .anyRequest().authenticated()
                .and().logout().logoutSuccessUrl(""/"").permitAll()
                .and().csrf().csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse());
    }

    public static void main(String[] args) {
        SpringApplication.run(SocialApplication.class, args);
    }
}
</code></pre>
",4529210,,,,,2016-11-07 8:25:22,Spring Boot and OAuth2 example: redirect not working,<spring><spring-security><oauth2>,1,0,1,,
Spring,22600920,1,22604552,,2014,,1,303,"<p>I've been trying to get this simple example running (with java 1.7) <a href=""https://github.com/spring-guides/gs-accessing-neo4j-data-rest/tree/master/complete"" rel=""nofollow"">https://github.com/spring-guides/gs-accessing-neo4j-data-rest/tree/master/complete</a></p>

<p>I keep getting the following error when attempting to start the application via the main method in the Application class.</p>

<p>I'uploaded the entire log to this gist: <a href=""http://bit.ly/1hU7Vpu"" rel=""nofollow"">http://bit.ly/1hU7Vpu</a></p>

<p>Here's the summary of the error.</p>

<pre><code>WARN 6470 --- [           main] o.s.boot.SpringApplication               : Error handling failed (Error creating bean with name 'org.springframework.data.rest.webmvc.config.RepositoryRestMvcConfiguration': Initialization of bean failed; nested exception is java.lang.NoSuchMethodError: org.springframework.data.rest.webmvc.config.RepositoryRestMvcConfiguration.setBeanFactory(Lorg/springframework/beans/factory/BeanFactory;)V)
Exception in thread ""main"" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityFetchHandler' defined in class hello.Application: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public org.springframework.data.neo4j.support.mapping.Neo4jEntityFetchHandler org.springframework.data.neo4j.config.Neo4jConfiguration.entityFetchHandler() throws java.lang.Exception] threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'nodeStateTransmitter' defined in class hello.Application: Initialization of bean failed; nested exception is java.lang.reflect.MalformedParameterizedTypeException
</code></pre>
",2091827,,592228,,2014-03-24 8:43:12,2014-03-24 13:28:49,Spring Neo4J REST error - nodeStateTransmitter,<java><spring><rest><neo4j><spring-boot>,1,0,1,,
Spring,50141309,1,,,2018,,1,272,"<p>I want to build the app with Spring and react, so I started learning from this tutorial: <a href=""https://github.com/spring-guides/tut-react-and-spring-data-rest/tree/master/basic"" rel=""nofollow noreferrer"">https://github.com/spring-guides/tut-react-and-spring-data-rest/tree/master/basic</a> </p>

<p>My project contains the same files - I did all step by step( just shared my project for help <a href=""https://github.com/Lewan110/rest-react"" rel=""nofollow noreferrer"">https://github.com/Lewan110/rest-react</a>). 
Spring Data rest works well, because I getting right data, but when I go to <a href=""http://localhost:8080"" rel=""nofollow noreferrer"">http://localhost:8080</a> I got no data and an error with bundle.js </p>

<p>It's weird for me because bundle.js is generated in: \src\main\resources\static\built\bundle.js
also <em>webpack.config.js</em> looks good:</p>

<pre><code>var path = require('path');

module.exports = {
    entry: './src/main/js/app.js',
    devtool: 'sourcemaps',
    cache: true,
    debug: true,
    output: {
        path: __dirname,
        filename: './src/main/resources/static/built/bundle.js'
    },
    module: {
        loaders: [
            {
                test: path.join(__dirname, '.'),
                exclude: /(node_modules)/,
                loader: 'babel',
                query: {
                    cacheDirectory: true,
                    presets: ['es2015', 'react']
                }
            }
        ]
    }
};
</code></pre>

<p><a href=""https://i.stack.imgur.com/sOuCO.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/sOuCO.png"" alt=""""></a></p>

<p>I'm completely new in React(and JS) and I don't know where cause can be.</p>
",7920494,,4460737,,2018-05-02 18:49:33,2018-05-30 16:33:53,Error 404 bundle.js not found - Spring Data Rest and React.js,<javascript><spring><reactjs><spring-boot>,1,0,1,,
Spring,35195982,1,35603281,,2016,,1,1196,"<p>I have used <a href=""https://spring.io/guides/gs/scheduling-tasks/"" rel=""nofollow"">this tutorial</a> and <a href=""https://github.com/spring-guides/gs-scheduling-tasks.git"" rel=""nofollow"">it's github project</a> as a base for this SSCCE.</p>

<p>For unknown reason, methods marked as <code>@Async</code> ran from a <code>@Scheduled</code> method always execute synchronously.</p>

<p>I am looking for a fix or workaround to make the code from <code>performTask()</code> run asynchonously.</p>

<p>The classes below:</p>

<p>Application.java</p>

<pre><code>@SpringBootApplication
@EnableScheduling
@EnableAsync
public class Application implements AsyncConfigurer{

    public static void main(String[] args) throws Exception {
        SpringApplication.run(Application.class);
    }

    @Override
    @Bean(name=""asyncExecutor"")
    public Executor getAsyncExecutor() {
        ThreadPoolTaskExecutor exec = new ThreadPoolTaskExecutor();
        exec.setMaxPoolSize(Runtime.getRuntime().availableProcessors()*2);
        exec.setThreadGroupName(""MyCustomExecutor"");
        exec.setWaitForTasksToCompleteOnShutdown(true);
        exec.setBeanName(""asyncExecutor"");
        exec.initialize();
        return exec;
    }

    @Override
    public AsyncUncaughtExceptionHandler getAsyncUncaughtExceptionHandler() {
        return new SimpleAsyncUncaughtExceptionHandler();
    }
}
</code></pre>

<p>MyAsyncService.java</p>

<pre><code>@Service
public class MyAsyncService {

    static AtomicInteger taskNoCounter = new AtomicInteger();

    public MyAsyncService() {
    }

    @Async(""asyncExecutor"")
    public void performTask() {
        int delayMs = (int) (System.currentTimeMillis()%1000+1000);
        int taskNo = taskNoCounter.incrementAndGet();
        String taskInfo = ""MyAsyncTask [taskNo="" + taskNo + "", delayMs="" + delayMs + "", threadId=""+Thread.currentThread().getId()+""]"";
        System.out.println(""+ start "" +taskInfo);
        try {
            Thread.sleep(delayMs);
        } catch (InterruptedException e) {
            // empty on purpose
        }
        System.out.println(""- end   "" +taskInfo);
    }

}
</code></pre>

<p>ScheduledTasks.java</p>

<pre><code>@Component
public class ScheduledTasks {

    @Autowired
    MyAsyncService service;

    @Scheduled(fixedRate = 1000)
    public void reportCurrentTime() {
        for (int i=0; i&lt;20; i++) {
            service.performTask();
        }

    }
}
</code></pre>

<p>Produce the following synchronouse result:</p>

<pre><code>+ start MyAsyncTask [taskNo=1, delayMs=1874, threadId=16]
- end   MyAsyncTask [taskNo=1, delayMs=1874, threadId=16]
+ start MyAsyncTask [taskNo=2, delayMs=1749, threadId=16]
- end   MyAsyncTask [taskNo=2, delayMs=1749, threadId=16]
+ start MyAsyncTask [taskNo=3, delayMs=1498, threadId=16]
- end   MyAsyncTask [taskNo=3, delayMs=1498, threadId=16]
+ start MyAsyncTask [taskNo=4, delayMs=1997, threadId=16]
- end   MyAsyncTask [taskNo=4, delayMs=1997, threadId=16]
+ start MyAsyncTask [taskNo=5, delayMs=1994, threadId=16]
</code></pre>
",1961634,,,,,2016-02-24 13:16:00,Spring-boot @Async not running with @Scheduled,<java><spring><spring-boot><spring-scheduled><spring-async>,1,3,1,,
Spring,36655518,1,36665463,,2016,,1,861,"<p>I am studying Spring OAuth2 by decomposing the set of <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2"" rel=""nofollow noreferrer"">three interconnected sample apps at this GitHub link</a>.  The apps work as intended on my devbox, but the <code>authserver</code> app produces an unwanted confirmation page that asks the user to confirm that they authorize the client at <code>localhost:8080/login</code> to receive their protected information. A screen shot of the confirmation page is as follows:  </p>

<p><img src=""https://s22.postimg.org/mwyq9xelt/Authorization_View.gif"" />  </p>

<p><strong>What specific changes need to be made to the <code>authserver</code> app's code to remove the confirmation step?</strong>  </p>

<p>I understand that the confirmation page could be useful in certain use cases.  But the confirmation page is not appropriate for the use case that I have in mind, so how can I disable this step?  </p>

<hr>

<p><strong>FIRST ATTEMPT:</strong>  </p>

<hr>

<p>I have located the view code for the authorization page in <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/blob/master/oauth2/authserver/src/main/resources/templates/authorize.ftl"" rel=""nofollow noreferrer""><code>authorize.ftl</code>, which you can read by clicking on this link</a>.  But when I do <code>Ctrl-H</code> in an eclipse workspace and search for ""authorize.ftl"", no results show up.  Similarly, I reviewed the <a href=""http://projects.spring.io/spring-security-oauth/docs/oauth2.html#customizing-the-ui"" rel=""nofollow noreferrer"">Spring OAuth2 Developer Guide</a>.  Some mention in the guide is made of creating a separate <code>@RequestMappig(""/oauth/authorize"")</code>, but it did not seem clear how to disable this confirmation step.  </p>

<p>The code for the template <code>login</code> view is in <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/blob/master/oauth2/authserver/src/main/resources/templates/login.ftl"" rel=""nofollow noreferrer""><code>login.ftl</code>, which you can read at this link</a>.  </p>

<p><strong>Is the solution to simply move the <code>login.ftl</code> code into a new <code>login.html</code> file, and then manage that view with <code>@RequestMappig(""/oauth/authorize"")</code>?</strong>   </p>

<p>If I interpret the working from the Developer Guide link above correctly, it seems to say that  </p>

<p>1.) an <code>@RequestMappig(""/oauth/authorize"")</code> method linked to GET would serve up the login view, then another <code>@RequestMappig(""/oauth/authorize"")</code>,  </p>

<p>2.) then another <code>@RequestMappig(""/oauth/authorize"")</code> method linked to POST would take the information from the view and bypass the confirmation step.  </p>

<p><strong>But what would this look like in code?</strong>  Here is a starting point, if I understand correctly:  </p>

<pre><code>`@RequestMappig(""/oauth/authorize"", method = RequestMethod.GET)`
public @ResponseBody SomeType method1Name(){
    SomeType st = new SomeType();
    //do some stuff to st
    return st;
}

`@RequestMappig(""/oauth/authorize"", method = RequestMethod.POST)`
public @ResponseBody SomeType method2Name(){
    SomeType st = new SomeType();
    //do other stuff to st
    return st;
}
</code></pre>

<p>What do I put in the methods?  And then were do I put the view code?  </p>

<p>The Developer Guide says to start with <a href=""https://github.com/spring-projects/spring-security-oauth/blob/master/spring-security-oauth2/src/main/java/org/springframework/security/oauth2/provider/endpoint/WhitelabelApprovalEndpoint.java"" rel=""nofollow noreferrer""><code>WhiteLabelApprovalEndpoint,java</code>, which you can read on GitHub at this link</a>.</p>
",807797,,-1,,2017-02-08 15:09:36,2016-04-16 14:34:42,disable confirmation page in Spring OAuth2,<spring><spring-mvc><spring-security><spring-boot><spring-oauth2>,1,2,1,,
Spring,29282870,1,,,2015,,1,133,"<p>I was going through with <a href=""https://github.com/spring-guides/deprecate-tut-web"" rel=""nofollow"">https://github.com/spring-guides/deprecate-tut-web</a>  tutorial on Spring. I am new to Spring . I have seen a few small Spring Web MVC tutorials before . Most other tutorials i have seen uses a service layer which is invoked from the web controller. But never have i seen the use of ""events"" layer as used in this tutorial. Is the layer really necessary, and if so what benefit does it give me ?  I am also new to both DDD (Domain Driven Development) and TDD (Test Driven Development), some things just seem really redundant and over-complicated to me in this tutorial .. Can someone explain what is the purpose of this events layer and why should we use it ? Thank you in advance and sorry if it's a Noob question. :) </p>
",1563286,,,,,2015-03-26 16:02:24,purpose of adding events layer in DDD,<spring><tdd><domain-driven-design><event-sourcing>,1,1,,,
Spring,18888714,1,18889923,,2013,,1,1579,"<p>I try to run a basic Spring MVC application, like the one <a href=""https://github.com/geowarin/spring-mvc-examples/tree/master/mvc-base"" rel=""nofollow"">here</a> (or also the Spring MVC tutorial <a href=""https://github.com/spring-guides/tut-web/tree/master/4/complete"" rel=""nofollow"">here</a>).</p>

<p>I just open the project in IntelliJ, import it on a Tomcat 7 instance, and start the Tomcat server. But when I try to reach the <code>http://localhost:8080</code>, I get a 404 error.</p>

<p>The project I downloaded from GitHub provides 2 ways to start the application, with <code>mvn jetty:run</code> or <code>mvn tomcat7:run</code>. When I run any of these commands (outside IntelliJ), the application starts succesfully, and the web page is displayed correctly on the <code>http://localthost:8080</code> URL, which led me think that the problem comes from IntelliJ.</p>

<p>Adding some debug information, it appears that when run under IntelliJ, the <code>WebInitializer</code> class is loaded, but not the <code>WebConfig</code> class, even if the method <code>WebInitializer.getServletConfigClasses()</code> is called.</p>

<p>With <code>mvn jetty:run</code> or <code>mvn tomcat7:run</code>, both classes are correctly instantiated.</p>

<p>Unfortunately, I have no error at all in any logs provided by Tomcat / IntelliJ, so I'm a bit lost.</p>

<p>What I am doing wrong, or what I've missed in the configuration of my project in IntelliJ?</p>

<p>Thanks</p>

<p>Technical info: Java 7, Tomcat 7, IntelliJ Ultimate 12.1.4, Spring 3.2.2.RELEASE</p>
",26457,,,,,2013-09-19 8:38:42,Spring MVC application deployed on Tomcat does not run on IntelliJ,<java><spring-mvc><intellij-idea><tomcat7>,1,0,,,
Spring,43431802,1,,,2017,,1,125,"<p>I work with Spring but never tried Spring Boot. I wanted to try the accessing-data-jpa tutorial - <a href=""https://spring.io/guides/gs/accessing-data-jpa/"" rel=""nofollow noreferrer"">https://spring.io/guides/gs/accessing-data-jpa/</a>. I have cloned the repository from git and run it with Maven as described in the tutorial:
git clone <a href=""https://github.com/spring-guides/gs-accessing-data-jpa.git"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-accessing-data-jpa.git</a>
mvnw spring-boot:run</p>

<p>Running this, I got an error - Caused by: java.lang.ClassNotFoundException: org.springframework.data.repository.CrudRepository</p>

<p>To solve this, I have added a dependency:</p>

<pre><code>&lt;dependency&gt;
            &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;
            &lt;artifactId&gt;spring-data-commons-core&lt;/artifactId&gt;
            &lt;version&gt;1.4.1.RELEASE&lt;/version&gt;
        &lt;/dependency&gt;
</code></pre>

<p>This helped, however, i got another error:</p>

<pre><code>***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method demo in hello.Application required a bean of type 'hello.CustomerRepository' that could not be found.


Action:

Consider defining a bean of type 'hello.CustomerRepository' in your configuration.

[WARNING]

java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.springframework.boot.maven.AbstractRunMojo$LaunchRunner.run(AbstractRunMojo.java:527)
        at java.lang.Thread.run(Thread.java:745)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'demo' defined in hello.Application: Unsatisfied dependency expressed through method 'demo' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'hello.CustomerRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
        at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:749)
        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:467)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1173)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1067)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:513)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:761)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:866)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:542)
        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:737)
        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:370)
        at org.springframework.boot.SpringApplication.run(SpringApplication.java:314)
        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1162)
        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1151)
        at hello.Application.main(Application.java:17)
        ... 6 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'hello.CustomerRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1486)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1104)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1066)
        at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:835)
        at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:741)
        ... 24 more
</code></pre>

<p>I am surprised that an official tutorial from Spring does not work. Have you tried this tutorial? Do you have any suggestion why it does not work? Is it broken or is something wrong on my machine? As I know little about Spring Boot I'm not really sure what the problem may be.</p>
",7872780,,380338,,2017-04-16 6:08:36,2017-04-16 16:12:30,Spring tutorial accessing-data-jpa does not work,<spring><spring-boot><spring-data><spring-data-jpa>,1,4,,,
Spring,45136514,1,45287340,,2017,,1,1970,"<p>I have <em>resource, authorization</em> and _ui applications written using Spring Boot 1.5.3, OAuth2 and MongoDB. </p>

<p>The resources are going to be accessed from mobile apps as well as a couple of web applications (one for regular users and the other one for admins). The apps are quite similar to the <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js"" rel=""nofollow noreferrer"">samples</a> from the guides by Dave Syer. What different is that the users are stored in the database and the clients are stored in an xml file located in the resources folder of the authorization server.</p>

<p>I am struggling with the logon experience for the web users. Following the guides for the JWT based OAuth app, after the login page, the user is redirected to the authorization screen, which is not the desired behavior. I.e., <strong>I don't want my authorization server to ask if the user trusts my web application to access its resources</strong>. Instead, I want users redirected to the ui pages right after login, as one would expect.</p>

<p>I found <a href=""https://github.com/making/oauth2-sso-demo/tree/jwt"" rel=""nofollow noreferrer"">this project on GitHub</a> (very similar to the apps from the guide) which behaves exactly as I want, but once I start customizing it by adding my authentication and authorization implementation, it reverts back to using the authorization screen. Apparently, I am missing something, but I was not able to figure out what exactly.</p>

<p><strong>authorization/src/main/resourcs/application.yml</strong></p>

<pre><code>security:
  oauth2:
    client:
      client-id: trusted-app
      client-secret: secret
      scope: read, write
      auto-approve-scopes: .*
  authorization:
      check-token-access: permitAll()
server:
  port: 9999
  context-path: /uaa
mongo:
  db:
    name: myappname
</code></pre>

<p><strong>authorization/src/main/resourcs/client-details.xml</strong></p>

<pre><code>&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;
&lt;beans xmlns=""http://www.springframework.org/schema/beans""
   xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""
   xmlns:oauth=""http://www.springframework.org/schema/security/oauth2""

   xsi:schemaLocation=""http://www.springframework.org/schema/beans
                    http://www.springframework.org/schema/beans/spring-beans.xsd
                    http://www.springframework.org/schema/security/oauth2
                    http://www.springframework.org/schema/security/spring-security-oauth2.xsd""&gt;

&lt;oauth:client-details-service id=""client-details-service""&gt;

    &lt;!-- Web Application clients --&gt;
    &lt;oauth:client
            client-id=""trusted-app""
            secret=""secret""
            authorized-grant-types=""authorization_code, password,refresh_token""
            authorities=""ROLE_WEB, ROLE_TRUSTED_CLIENT""
            access-token-validity=""${oauth.token.access.expiresInSeconds}""
            refresh-token-validity=""${oauth.token.refresh.expiresInSeconds}""/&gt;
    &lt;/oauth:client-details-service&gt;
&lt;/beans&gt;
</code></pre>

<p><strong>authorization/src/main/java/AuthorizationApplication.java</strong></p>

<pre><code>@SpringBootApplication
@RestController
public class AuthorizationApplication extends AuthorizationServerConfigurerAdapter {

    @RequestMapping(""/user"")
    @ResponseBody
    public Principal user(Principal user) {
        return user;
    }

    @Configuration
    static class MvcConfig extends WebMvcConfigurerAdapter {
        @Override
        public void addViewControllers(ViewControllerRegistry registry) {
            registry.addViewController(""login"").setViewName(""login"");
            registry.addViewController(""/"").setViewName(""index"");
        }
    }

    @Configuration
    @Order(-20)
    static class LoginConfig extends WebSecurityConfigurerAdapter {
        @Override
        protected void configure(HttpSecurity http) throws Exception {
            http
                .formLogin().loginPage(""/login"").permitAll()
            .and()
                .requestMatchers()
                .antMatchers(""/"", ""/login"", ""/oauth/authorize"", ""/oauth/confirm_access"")
            .and()
                .authorizeRequests()
                .anyRequest().authenticated();
        }
    }

    @Configuration
    @EnableAuthorizationServer
    @ImportResource({""classpath*:client-details.xml""})
    protected static class OAuth2AuthorizationConfig extends AuthorizationServerConfigurerAdapter {

        @Autowired
        private AuthenticationManager authenticationManager;

        @Resource(name=""client-details-service"")
        private ClientDetailsService clientDetailsService;

        @Override
        public void configure(ClientDetailsServiceConfigurer clients) throws Exception {
            clients.withClientDetails(clientDetailsService);
        }

        @Override
        public void configure(AuthorizationServerEndpointsConfigurer endpoints) throws Exception {
            endpoints
                .authenticationManager(authenticationManager)
                .accessTokenConverter(jwtAccessTokenConverter());
        }

        @Bean
        public JwtAccessTokenConverter jwtAccessTokenConverter() {
            JwtAccessTokenConverter converter = new JwtAccessTokenConverter();
            return converter;
        }
    }

    @Bean
    PasswordEncoder passwordEncoder(){
        return new StandardPasswordEncoder();
    }

    public static void main(String[] args) {
        SpringApplication.run(AuthorizationApplication.class, args);
    }

}
</code></pre>

<p><strong>authorization/src/main/java/mypackage/UserService.java</strong></p>

<pre><code>@Service
public class UserService implements UserDetailsService {

    private UserAccountRepository userAccountRepository;

    @Autowired
    public UserService(UserAccountRepository userAccountRepository){
        this.userAccountRepository = userAccountRepository;
    }

    @Override
    public UserDetails loadUserByUsername(String s) throws UsernameNotFoundException {

        UserAccount userAccount = userAccountRepository.findByEmail(s);

        if (userAccount != null) {
            return userAccount;
        } else {
            throw new UsernameNotFoundException(""could not find the user '"" + s + ""'"");
        }
   }
}
</code></pre>

<p><strong>ui/src/main/resources/application.yml</strong></p>

<pre><code>auth-server: http://localhost:9999/uaa
server:
  port: 8080
spring:
  aop:
    proxy-target-class: true
security:
  oauth2:
    client:
      clientId: trusted-app
      clientSecret: secret
      access-token-uri: ${auth-server}/oauth/token
      user-authorization-uri: ${auth-server}/oauth/authorize
      scope: read, write
    resource:
      token-info-uri: ${auth-server}/oauth/check_token
</code></pre>

<p><strong>ui/src/main/java/UiApplication.java</strong></p>

<pre><code>@SpringBootApplication
@EnableOAuth2Sso
public class UiApplication extends WebSecurityConfigurerAdapter{

    public static void main(String[] args) {
        SpringApplication.run(UiApplication.class, args);
    }

    @Bean
    OAuth2RestTemplate oauth2RestTemplate(OAuth2ClientContext oauth2ClientContext, OAuth2ProtectedResourceDetails details) {
        return new OAuth2RestTemplate(details, oauth2ClientContext);
    }
}
</code></pre>
",2888242,,,,,2017-07-24 18:13:25,OAuth2 SSO with Spring Boot without the authorization screen,<java><spring><spring-boot><jwt><spring-security-oauth2>,1,0,,,
Spring,36433556,1,36433803,,2016,,1,43,"<p>I am learning basic Spring by following this <a href=""https://spring.io/guides/gs/rest-service/"" rel=""nofollow noreferrer"">tutorial</a>. 
I run this command to clone the demo basic project:</p>

<pre><code>git clone https://github.com/spring-guides/gs-rest-service.git
</code></pre>

<p>Then I use intelliJ to import the cloned Gradle project. 
However, it always downloading things from Internet, and sometime pop up alert says xxx is not found. </p>

<p><a href=""https://i.stack.imgur.com/tcKav.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/tcKav.png"" alt=""enter image description here""></a></p>

<p>My question is what is it doing exactly? who and where I tell the code to download things?</p>

<p>It is really confusing to me because I couldn't figure out what is going on.  </p>
",887103,,,,,2016-04-05 18:04:49,Why my gradle project always downloading 200MB data from Internet?,<spring><gradle>,1,0,,,
Spring,55564608,1,,,2019,,1,230,"<p>I'm trying to learn how to connect my Java Spring app to my MongoDB database. I'm following this guide:</p>

<p><a href=""https://spring.io/guides/gs/accessing-data-mongodb/"" rel=""nofollow noreferrer"">https://spring.io/guides/gs/accessing-data-mongodb/</a></p>

<p>I'm trying to learn the ""Create simple queries"" section. </p>

<pre><code>package hello;

import java.util.List;

import org.springframework.data.mongodb.repository.MongoRepository;

public interface CustomerRepository extends MongoRepository&lt;Customer, String&gt; {

    public Customer findByFirstName(String firstName);
    public List&lt;Customer&gt; findByLastName(String lastName);

}
</code></pre>

<p>They show extending the MongoRepository interface and defining certain methods. However these methods are not overrides and are not methods inherited from the interface. It doesn't appear as if they implement these methods anywhere for the actual implementation, so I'm incredibly confused how this works.</p>

<blockquote>
  <p>""You can define other queries as needed by simply declaring their
  method signature. In this case, you add findByFirstName, which
  essentially seeks documents of type Customer and finds the one that
  matches on firstName.""</p>
</blockquote>

<p>Here's the repository for the full code for the tutorial: <a href=""https://github.com/spring-guides/gs-accessing-data-mongodb"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-accessing-data-mongodb</a></p>

<p>I'm incredibly confused how definding a new method in the interface without implementing that method myself magically allows me to construct queries...anyone can shed some light?</p>
",8887398,,,,,2019-04-08 0:01:42,How does Java Spring query MongoDB?,<java><spring><mongodb>,1,0,,,
Spring,42102689,1,42382404,,2017,,1,2727,"<p>i try to use spring session and i dowload this project from git 
<a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/spring-session"" rel=""nofollow noreferrer"">https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/spring-session</a></p>

<p>and i get this error 
APPLICATION FAILED TO START</p>

<hr>

<p>Description:</p>

<p>Parameter 0 of method sessionRedisTemplate in org.springframework.session.data.redis.config.annotation.web.http.RedisHttpSessionConfiguration required a bean of type 'org.springframework.data.redis.connection.RedisConnectionFactory' that could not be found.</p>

<p>Action:</p>

<p>Consider defining a bean of type 'org.springframework.data.redis.connection.RedisConnectionFactory' in your configuration.</p>
",6698148,,,,,2017-02-22 3:53:37,Consider defining a bean of type 'org.springframework.data.redis.connection.RedisConnectionFactory' in your configuration,<spring-security><spring-session><spring-data-redis>,1,0,,,
Spring,23511605,1,,,2014,,1,553,"<p>I am trying to deploy an application build from <a href=""https://github.com/spring-guides/gs-convert-jar-to-war"" rel=""nofollow"">https://github.com/spring-guides/gs-convert-jar-to-war</a> to local glassfish4. And it delpoys well for the first time (if I can call some exceptions from the framework good behaviour). At least, I can open the project's index page in browser. </p>

<p>But if I try to undeploy it and re-deploy, or just overwrite .war file in autodeploy directory, deployment fails. And nothing seems to be added to glassfish log file.</p>

<p>The projects I published from eclipse using some its mechanisms deployed and re-deployed successfully.</p>

<p>Here is the log with related contents:
<a href=""http://pastebin.com/zSeMw5tC"" rel=""nofollow"">http://pastebin.com/zSeMw5tC</a></p>

<p>What can be the problem?</p>
",2708904,,,,,2014-05-07 10:15:01,Glassfish and Spring Boot: .war re-deployment failed,<spring><glassfish><spring-boot>,1,1,,,
Spring,39233986,1,39337370,,2016,,1,72,"<p>I am trying to build rest service using Spring Boot. I am learning to implement it using the <a href=""https://spring.io/guides/gs/rest-service/"" rel=""nofollow noreferrer"">this</a> Spring's guide. I have built the application using STS as a Maven application and the code is exact replica of the guide and when I try to run the application I get the below connection error</p>

<p><a href=""https://i.stack.imgur.com/nF8lP.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/nF8lP.png"" alt=""connection error""></a></p>

<p>I also tried to run the <a href=""https://github.com/spring-guides/gs-rest-service"" rel=""nofollow noreferrer"">github code</a> for the same guide provided by Spring and that code also gives same the error as above. I am new to Spring Boot and any help would be appreciated.</p>

<p>Below is my code
App.java</p>

<pre><code>    package Greetings.Web_Services;

    import org.springframework.boot.SpringApplication;
    import org.springframework.boot.autoconfigure.SpringBootApplication;

    @SpringBootApplication
    public class App 
    {
        public static void main( String[] args )
        {
            System.out.println(""App Started"");
            SpringApplication.run(App.class, args);
        }
    }
</code></pre>

<p>Greetings.java</p>

<pre><code>    package Greetings.Web_Services;

    public class Greetings {

        private final long id;
        private final String content;

        public Greetings(long id, String content){
            this.id = id;
            this.content = content;
        }

        public long getId(){
            return id;
        }

        public String getContent(){
            return content;
        }
    }
</code></pre>

<p>GreetingsController.java</p>

<pre><code>    package Greetings.Web_Services;

    import java.util.concurrent.atomic.AtomicLong;
    import org.springframework.web.bind.annotation.RequestMapping;
    import org.springframework.web.bind.annotation.RequestParam;
    import org.springframework.web.bind.annotation.RestController;

    @RestController
    public class GreetingsController {
        private static final String template = ""Hello, %s!"";
        private final AtomicLong counter = new AtomicLong();

        @RequestMapping(""/greeting"")
        public Greetings greeting(@RequestParam(value=""name"", defaultValue=""World"") String name) {
            return new Greetings(counter.incrementAndGet(),
                        String.format(template, name));
        }
    }
</code></pre>

<p>pom.xml</p>

<pre><code>    &lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;
    &lt;project xmlns=""http://maven.apache.org/POM/4.0.0"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""
xsi:schemaLocation=""http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd""&gt;
&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

&lt;groupId&gt;org.springframework&lt;/groupId&gt;
&lt;artifactId&gt;gs-rest-service&lt;/artifactId&gt;
&lt;version&gt;0.1.0&lt;/version&gt;

&lt;parent&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
    &lt;version&gt;1.4.0.RELEASE&lt;/version&gt;
&lt;/parent&gt;

&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
    &lt;/dependency&gt;

    &lt;!-- &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;
    &lt;/dependency&gt; --&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
        &lt;artifactId&gt;spring-web&lt;/artifactId&gt;
        &lt;version&gt;4.3.1.RELEASE&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
        &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;com.jayway.jsonpath&lt;/groupId&gt;
        &lt;artifactId&gt;json-path&lt;/artifactId&gt;
        &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;

&lt;properties&gt;
    &lt;java.version&gt;1.8&lt;/java.version&gt;
&lt;/properties&gt;


&lt;build&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;

&lt;repositories&gt;
    &lt;repository&gt;
        &lt;id&gt;spring-releases&lt;/id&gt;
        &lt;url&gt;https://repo.spring.io/libs-release&lt;/url&gt;
    &lt;/repository&gt;
&lt;/repositories&gt;
&lt;pluginRepositories&gt;
    &lt;pluginRepository&gt;
        &lt;id&gt;spring-releases&lt;/id&gt;
        &lt;url&gt;https://repo.spring.io/libs-release&lt;/url&gt;
    &lt;/pluginRepository&gt;
&lt;/pluginRepositories&gt;

    &lt;/project&gt;
</code></pre>

<p>GitHub <a href=""https://github.com/ananthashankar/Rest-Services"" rel=""nofollow noreferrer"">link</a> for the project of above code</p>

<p>Thanks!!</p>
",5385516,,5385516,,2016-08-31 0:34:09,2016-09-05 20:35:09,Not able to run the starter guide code of Building Spring Boot Rest Service,<spring><web-services><rest><maven><spring-boot>,1,4,,,
Spring,51348352,1,,,2018,,1,1662,"<p>To run Actuator on a separate port we write <code>management.server.port: 9001</code> in the application.properties file. 
But there is a confusing line in <a href=""https://spring.io/guides/gs/actuator-service/"" rel=""nofollow noreferrer"">Actuator Guide</a> code:</p>

<pre><code>@TestPropertySource(properties = {""management.port=0""})
</code></pre>

<p>And then 
...</p>

<pre><code>@Value(""${local.management.port}"")
private int mgt;
</code></pre>

<p>Here is the source class <a href=""https://github.com/spring-guides/gs-actuator-service/blob/master/complete/src/test/java/hello/HelloWorldApplicationTests.java"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-actuator-service/blob/master/complete/src/test/java/hello/HelloWorldApplicationTests.java</a></p>

<p>What's the difference between
 <code>management.server.port</code>, 
<code>management.port</code> and
 <code>local.management.port</code>?</p>
",9152953,,,,,2018-10-02 11:43:36,What's the difference between management.server.port and management.port properties?,<spring-boot-actuator>,1,0,,,
Spring,29831374,1,29842701,,2015,,1,700,"<p>I'm using spring-boot and spring-boot-yarn to submit yarn applications to a cluster.</p>

<p>My use-case is close to the one described in this tutorial <a href=""https://github.com/spring-guides/gs-yarn-basic"" rel=""nofollow"">https://github.com/spring-guides/gs-yarn-basic</a>.</p>

<p>The only difference is that my 'client' is supposed to be a web application and submit the yarn jobs when web requests are made.</p>

<p>The problem I have is that web requests to the 'client' web-application provide parameters I need to pass down to the yarn job.</p>

<p>In the above tutorial parameters are passed as command line arguments to to the appmaster / container specified in application.yml. In my case this approach does not work since I have a different set of parameters for each yarn job.</p>

<p>Is there a way to pass dynamic parameters to yarn jobs without hard-coding them in application.yml?</p>
",4825538,,4825538,,2015-04-23 18:31:08,2015-04-24 8:44:26,how to pass parameters from web requests to spring boot yarn application,<hadoop><spring-boot><yarn><spring-data-hadoop>,1,0,,,
Spring,40623809,1,,,2016,,1,347,"<p>We manage to setup a web application with Spring Cloud OAuth2, which implements single sign-on from different identity providers like Facebook and Google, by following <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/tree/master/github"" rel=""nofollow noreferrer"">this</a> sample source code.</p>

<p>Planning to have our own authentication/authorization server, we provided our own <code>UserDetails</code>, and <code>GrantedAuthority</code>, where we associated user's Facebook and Google. We also have our own set of user authorities other than <code>ROLE_USER</code>.</p>

<p>We have our business methods secured based on user's role (we used <code>@RolesAllowed</code>). When a user sign-in using their Facebook and Google accounts, only <code>ROLE_USER</code> is added as their authorithy. I would like to know how to add our own user authorities from the associated user's <code>GrantedAuthority</code> upon signing into external identity providers, though I found that this can be possibly done using <code>AuthoritiesExtractor</code>, but can't find concrete example on this.</p>
",4084107,,4084107,,2016-11-16 5:10:21,2016-11-16 5:32:08,Spring Cloud OAuth2: Adding user authorities,<spring-security><oauth-2.0><spring-cloud><spring-security-oauth2><spring-oauth2>,1,0,,,
Spring,40802405,1,40802769,,2016,,1,641,"<p>I would like to build a web application based on <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/spring-session"" rel=""nofollow noreferrer"">this example</a>.   </p>

<p>What I understood from this example is that you build 2 applications:<br>
A UI application containing the web pages where you can login to get a token and a resource application where you ask for data using your token.</p>

<p>My question is where is the login check done?<br>
The <strong>application.yml</strong> file defines the password ""<strong>password</strong>"" for the user ""<strong>user</strong>""</p>

<pre><code>security:
  user:
    password: password
</code></pre>

<p>But this file is never mentioned neither in <strong>UIApplication.java</strong> file or in any other file:</p>

<pre><code>@SpringBootApplication
@RestController
public class UiApplication {

    public static void main(String[] args) {
        SpringApplication.run(UiApplication.class, args);
    }

    @Configuration
    @Order(SecurityProperties.ACCESS_OVERRIDE_ORDER)
    protected static class SecurityConfiguration extends WebSecurityConfigurerAdapter {

        @Override
        protected void configure(HttpSecurity http) throws Exception {
            // @formatter:off
            http
                .httpBasic().and()
                .logout().and()
                .authorizeRequests()
                    .antMatchers(""/index.html"", ""/pages/home.html"", ""/pages/login.html"", ""/"").permitAll()
                    .anyRequest().authenticated().and()
                .csrf()
                    .csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse());
            // @formatter:on
        }
    }

    @RequestMapping(""/user"")
    public Principal user(Principal user) {
        return user;
    }

    @RequestMapping(""/token"")
    public Map&lt;String,String&gt; token(HttpSession session) {
        return Collections.singletonMap(""token"", session.getId());
    }

}
</code></pre>

<p>However it works: when I login using ""user"" and ""password"" login succeeds, when I use different credentials, it fails.<br>
Is it some high level Spring layer dealing with that? Thanks for help.</p>
",2436719,,2436719,,2016-11-25 10:37:37,2016-11-25 10:51:57,Spring session login,<java><spring><session>,1,0,,,
Spring,21305874,1,21846758,,2014,,1,1083,"<p>I tried to make STOMP connection to RabbitMQ using Spring 4.0 WebSocketMessageBrokerConfigurer class, but failed ?</p>

<p>Snap of code is here. </p>

<pre><code>@Configuration
@EnableWebSocketMessageBroker
public class WebSocketConfig implements WebSocketMessageBrokerConfigurer {

    @Override
    public void configureMessageBroker(MessageBrokerRegistry config) {
        StompBrokerRelayRegistration StompBrokerRelayRegistration = config.enableStompBrokerRelay(""/"");
        StompBrokerRelayRegistration.setApplicationLogin(""guest"");
        StompBrokerRelayRegistration.setApplicationPasscode(""guest"");
        StompBrokerRelayRegistration.setAutoStartup(true);
        StompBrokerRelayRegistration.setRelayHost(""localhost"");
        StompBrokerRelayRegistration.setRelayPort(15674);
</code></pre>

<p>Note that</p>

<ul>
<li>I am using spring boot to run application. In fact I am changing the existing spring example ""<a href=""https://github.com/spring-guides/gs-messaging-stomp-websocket"" rel=""nofollow"">gs-messaging-stomp-websocket</a>"". and changing class <a href=""https://github.com/spring-guides/gs-messaging-stomp-websocket/blob/master/complete/src/main/java/hello/WebSocketConfig.java"" rel=""nofollow"">WebSocketConfig</a>.</li>
<li>Rabbitmq is locally installed with STOMP plugin enabled.</li>
<li>Added all the maven dependency like spring-rabbitmq.</li>
</ul>

<p>Do I need to do any thing else ? </p>

<p>Thanks,
Rafiq</p>
",838659,,838659,,2014-01-29 3:37:46,2014-03-21 5:38:01,Fail to connect to Rabbitmq using Spring 4.0 webstocket stomp api,<rabbitmq><spring-4><spring-messaging><spring-websocket>,1,0,,,
Spring,49939639,1,,,2018,,1,302,"<p>I am trying to repeat actions described in the <a href=""https://spring.io/guides/tutorials/spring-boot-oauth2/"" rel=""nofollow noreferrer"">official tutorial(Spring Boot and OAuth2)</a></p>

<p>I stuck on the section <a href=""https://spring.io/guides/tutorials/spring-boot-oauth2/#_social_login_authserver"" rel=""nofollow noreferrer"">Hosting an Authorization Server</a></p>

<p>I tried to download all <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2.git"" rel=""nofollow noreferrer"">sources from github</a> but result the same</p>

<p>I am trying to start sub project <code>social-auth-server</code>:</p>

<p>I found 2 starters there:</p>

<p><code>src\main\java\com\example\SocialApplication.java</code> - oauth2 server
<code>src\test\java\com\example\ClientApplication.java</code> - oauth2 client</p>

<p>quote from the tutorial:</p>

<blockquote>
  <p>Note that the server.context-path is set explicitly, so if you run the
  app to test it remember the home page is <a href=""http://localhost:9999/client"" rel=""nofollow noreferrer"">http://localhost:9999/client</a>.
  Clicking on that link should take you to the auth server and once you
  you have authenticated with the social provider of your choice you
  will be redirected back to the client app</p>
</blockquote>

<p>1.I've started both applications<br>
2. In browser I type <code>localhost:9999/client</code><br>
3. As a result of previous step - browser redirects me to the <code>localhost:8080</code><br>
4. I click <code>Login via Facebook</code><br>
5. As a result of previous step - browser redirects me to the Facebook to input credentials.<br>
6. I typed correct credentials<br>
7. As a result of previous step - browser redirects me to the <code>localhost:8080</code>. Even without my name on this page.</p>

<p>I expected that the browser would redirect me to the <code>localhost:9999</code> and show me message <code>Hello Nikolay!</code></p>

<p>Can you please help me with this tutorial?</p>
",2674303,,2674303,,2018-04-20 12:00:46,2018-04-20 12:00:46,Spring oauth2 sso example doesn't work,<java><spring><spring-boot><oauth-2.0><spring-security-oauth2>,1,0,,,
Spring,27171629,1,27387192,,2014,,1,1627,"<p>I need to get the access token from Spring Social API in order to do operations Which the API doesn't provide. </p>

<p>for example <strong>push message to the client notification icon</strong>.</p>

<p>I followed spring social facebook via Spring offical doc: </p>

<p><a href=""https://github.com/spring-guides/gs-accessing-facebook"" rel=""nofollow"">https://github.com/spring-guides/gs-accessing-facebook</a></p>

<p>How to use the API in order to get the access token string?</p>

<p>thanks.</p>
",260511,,,,,2014-12-09 19:27:07,Get access token using spring social facebook api,<java><facebook><spring><spring-social><spring-social-facebook>,1,0,,,
Spring,27105619,1,27106014,,2014,,1,1121,"<p>I am following the link
<a href=""https://github.com/spring-guides/gs-serving-web-content"" rel=""nofollow"">https://github.com/spring-guides/gs-serving-web-content</a></p>

<p>After check out the files, import gs-serving-web-content/complete  into IDEA, and run it. It runs successfully, but if I use http as following to access it then it failed.</p>

<pre><code>http://127.0.0.1:8080/greating
</code></pre>

<p>The message is as below:</p>

<pre><code>com.intellij.rt.execution.application.AppMain hello.Application

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v1.1.9.RELEASE)

2014-11-24 21:07:15.891  INFO 8060 --- [           main] hello.Application                        : Starting Application on SomeHost with PID 8060 (/home/oracle/spring/gs-serving-web-content/complete/build/classes/main started by oracle in /home/oracle/spring/gs-serving-web-content/complete)
2014-11-24 21:07:15.933  INFO 8060 --- [           main] ationConfigEmbeddedWebApplicationContext : Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@11c20519: startup date [Mon Nov 24 21:07:15 CST 2014]; root of context hierarchy
2014-11-24 21:07:16.864  INFO 8060 --- [           main] o.s.b.f.s.DefaultListableBeanFactory     : Overriding bean definition for bean 'beanNameViewResolver': replacing [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration; factoryMethodName=beanNameViewResolver; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration.class]] with [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter; factoryMethodName=beanNameViewResolver; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter.class]]
2014-11-24 21:07:17.878  INFO 8060 --- [           main] .t.TomcatEmbeddedServletContainerFactory : Server initialized with port: 8080
2014-11-24 21:07:18.132  INFO 8060 --- [           main] o.apache.catalina.core.StandardService   : Starting service Tomcat
2014-11-24 21:07:18.133  INFO 8060 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/7.0.56
2014-11-24 21:07:18.271  INFO 8060 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2014-11-24 21:07:18.272  INFO 8060 --- [ost-startStop-1] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 2341 ms
2014-11-24 21:07:19.000  INFO 8060 --- [ost-startStop-1] o.s.b.c.e.ServletRegistrationBean        : Mapping servlet: 'dispatcherServlet' to [/]
2014-11-24 21:07:19.004  INFO 8060 --- [ost-startStop-1] o.s.b.c.embedded.FilterRegistrationBean  : Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
2014-11-24 21:07:19.389  INFO 8060 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2014-11-24 21:07:19.596  INFO 8060 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped ""{[/greeting],methods=[],params=[],headers=[],consumes=[],produces=[],custom=[]}"" onto public java.lang.String hello.GreetingController.greeting(java.lang.String,org.springframework.ui.Model)
2014-11-24 21:07:19.600  INFO 8060 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped ""{[/error],methods=[],params=[],headers=[],consumes=[],produces=[text/html],custom=[]}"" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest)
2014-11-24 21:07:19.601  INFO 8060 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped ""{[/error],methods=[],params=[],headers=[],consumes=[],produces=[],custom=[]}"" onto public org.springframework.http.ResponseEntity&lt;java.util.Map&lt;java.lang.String, java.lang.Object&gt;&gt; org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
2014-11-24 21:07:19.623  INFO 8060 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2014-11-24 21:07:19.624  INFO 8060 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2014-11-24 21:07:20.117  INFO 8060 --- [           main] o.s.j.e.a.AnnotationMBeanExporter        : Registering beans for JMX exposure on startup
2014-11-24 21:07:20.201  INFO 8060 --- [           main] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat started on port(s): 8080/http
2014-11-24 21:07:20.204  INFO 8060 --- [           main] hello.Application                        : Started Application in 4.892 seconds (JVM running for 5.351)
2014-11-24 21:07:26.582 ERROR 8060 --- [nio-8080-exec-1] o.a.coyote.http11.Http11NioProtocol      : Error reading request, ignored

java.lang.NoClassDefFoundError: org/apache/tomcat/util/log/UserDataHelper
    at org.apache.tomcat.util.http.Cookies.&lt;clinit&gt;(Cookies.java:42)
    at org.apache.coyote.Request.&lt;init&gt;(Request.java:131)
    at org.apache.coyote.AbstractProcessor.&lt;init&gt;(AbstractProcessor.java:61)
    at org.apache.coyote.http11.AbstractHttp11Processor.&lt;init&gt;(AbstractHttp11Processor.java:272)
    at org.apache.coyote.http11.Http11NioProcessor.&lt;init&gt;(Http11NioProcessor.java:69)
    at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.createProcessor(Http11NioProtocol.java:260)
    at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.createProcessor(Http11NioProtocol.java:139)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:586)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1736)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1695)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
    at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.ClassNotFoundException: org.apache.tomcat.util.log.UserDataHelper
    at java.net.URLClassLoader$1.run(URLClassLoader.java:369)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:360)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
    ... 14 common frames omitted
Caused by: java.util.zip.ZipException: invalid LOC header (bad signature)
    at java.util.zip.ZipFile.read(Native Method)
    at java.util.zip.ZipFile.access$1400(ZipFile.java:61)
    at java.util.zip.ZipFile$ZipFileInputStream.read(ZipFile.java:717)
    at java.util.zip.ZipFile$ZipFileInflaterInputStream.fill(ZipFile.java:420)
    at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:158)
    at sun.misc.Resource.getBytes(Resource.java:124)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:450)
    at java.net.URLClassLoader.access$100(URLClassLoader.java:73)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:367)
    ... 20 common frames omitted

2014-11-24 21:07:26.583 ERROR 8060 --- [nio-8080-exec-1] org.apache.tomcat.util.net.NioEndpoint   : 

java.lang.NullPointerException: null
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:722)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1736)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1695)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
    at java.lang.Thread.run(Thread.java:745)

2014-11-24 21:07:26.585 ERROR 8060 --- [nio-8080-exec-2] o.a.coyote.http11.Http11NioProtocol      : Error reading request, ignored

java.lang.NoClassDefFoundError: Could not initialize class org.apache.tomcat.util.http.Cookies
    at org.apache.coyote.Request.&lt;init&gt;(Request.java:131)
    at org.apache.coyote.AbstractProcessor.&lt;init&gt;(AbstractProcessor.java:61)
    at org.apache.coyote.http11.AbstractHttp11Processor.&lt;init&gt;(AbstractHttp11Processor.java:272)
    at org.apache.coyote.http11.Http11NioProcessor.&lt;init&gt;(Http11NioProcessor.java:69)
    at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.createProcessor(Http11NioProtocol.java:260)
    at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.createProcessor(Http11NioProtocol.java:139)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:586)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1736)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1695)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
    at java.lang.Thread.run(Thread.java:745)

2014-11-24 21:07:26.586 ERROR 8060 --- [nio-8080-exec-2] org.apache.tomcat.util.net.NioEndpoint   : 

java.lang.NullPointerException: null
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:722)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1736)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1695)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
    at java.lang.Thread.run(Thread.java:745)

2014-11-24 21:07:26.588 ERROR 8060 --- [nio-8080-exec-3] o.a.coyote.http11.Http11NioProtocol      : Error reading request, ignored

java.lang.NoClassDefFoundError: Could not initialize class org.apache.tomcat.util.http.Cookies
    at org.apache.coyote.Request.&lt;init&gt;(Request.java:131)
    at org.apache.coyote.AbstractProcessor.&lt;init&gt;(AbstractProcessor.java:61)
    at org.apache.coyote.http11.AbstractHttp11Processor.&lt;init&gt;(AbstractHttp11Processor.java:272)
    at org.apache.coyote.http11.Http11NioProcessor.&lt;init&gt;(Http11NioProcessor.java:69)
    at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.createProcessor(Http11NioProtocol.java:260)
    at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.createProcessor(Http11NioProtocol.java:139)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:586)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1736)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1695)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
    at java.lang.Thread.run(Thread.java:745)

2014-11-24 21:07:26.589 ERROR 8060 --- [nio-8080-exec-3] org.apache.tomcat.util.net.NioEndpoint   : 

java.lang.NullPointerException: null
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:722)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1736)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1695)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
    at java.lang.Thread.run(Thread.java:745)
</code></pre>
",266185,,,,,2014-11-24 13:29:32,spring boot mvc: failed after following the sample,<spring><spring-mvc>,1,1,,,
Spring,54750194,1,54763563,,2019,,1,21,"<p>I have just cloned the example from <a href=""https://github.com/spring-guides/gs-accessing-data-neo4j"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-accessing-data-neo4j</a> and ran the complete version. It fails with the stack trace below. Is this a fault from my side or is this a problem in the latest release?</p>

<p>Stack trace:</p>

<pre class=""lang-none prettyprint-override""><code>2019-02-18 15:37:39.059  WARN 5145 --- [           main]
org.neo4j.ogm.session.Neo4jSession       : Error executing query : Invalid input '|': expected whitespace, comment, a relationship pattern, '.', node labels, '[', ""=~"", IN, STARTS, ENDS, CONTAINS, IS, '^', '*', '/', '%', '+', '-', '=', ""&lt;&gt;"", ""!="", '&lt;', '&gt;', ""&lt;="", ""&gt;="", AND, XOR, OR, ',' or ']' (line 1, column 106 (offset: 105))
""MATCH (n:`Person`) WHERE n.`name` = { `name_0` } WITH n RETURN n,[ [ (n)-[r_t1:`TEAMMATE`]-(p1:`Person`) | [ r_t1, p1 ] ] ], ID(n)""
                                                                                                          ^. Rolling back transaction.
2019-02-18 15:37:39.066  INFO 5145 --- [           main] ConditionEvaluationReportLoggingListener :

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2019-02-18 15:37:39.071 ERROR 5145 --- [           main] o.s.boot.SpringApplication               : Application run failed

java.lang.IllegalStateException: Failed to execute CommandLineRunner
        at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:821) [spring-boot-2.0.5.RELEASE.jar:2.0.5.RELEASE]
        at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:802) [spring-boot-2.0.5.RELEASE.jar:2.0.5.RELEASE]
        at org.springframework.boot.SpringApplication.run(SpringApplication.java:341) [spring-boot-2.0.5.RELEASE.jar:2.0.5.RELEASE]
        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1277) [spring-boot-2.0.5.RELEASE.jar:2.0.5.RELEASE]
        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1265) [spring-boot-2.0.5.RELEASE.jar:2.0.5.RELEASE]
        at hello.Application.main(Application.java:23) [main/:na]
Caused by: org.neo4j.driver.v1.exceptions.ClientException: Invalid input '|': expected whitespace, comment, a relationship pattern, '.', node labels, '[', ""=~"", IN, STARTS, ENDS, CONTAINS, IS, '^', '*', '/', '%', '+', '-', '=', ""&lt;&gt;"", ""!="", '&lt;', '&gt;', ""&lt;="", ""&gt;="", AND, XOR, OR, ',' or ']' (line 1, column 106 (offset: 105))
""MATCH (n:`Person`) WHERE n.`name` = { `name_0` } WITH n RETURN n,[ [ (n)-[r_t1:`TEAMMATE`]-(p1:`Person`) | [ r_t1, p1 ] ] ], ID(n)""
                                                                                                          ^
        at org.neo4j.driver.internal.util.ErrorUtil.newNeo4jError(ErrorUtil.java:62) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.async.inbound.InboundMessageDispatcher.handleFailureMessage(InboundMessageDispatcher.java:137) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.messaging.PackStreamMessageFormatV1$Reader.unpackFailureMessage(PackStreamMessageFormatV1.java:432) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.messaging.PackStreamMessageFormatV1$Reader.read(PackStreamMessageFormatV1.java:396) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.async.inbound.InboundMessageHandler.channelRead0(InboundMessageHandler.java:83) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.async.inbound.InboundMessageHandler.channelRead0(InboundMessageHandler.java:35) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:105) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:284) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.async.inbound.MessageDecoder.channelRead(MessageDecoder.java:40) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:297) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:413) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1336) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1127) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1162) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:489) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:428) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1359) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:935) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:134) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:645) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:580) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:497) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:459) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4    j.driver.internal.shaded.io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.util.concurrent.DefaultThreadFactory$DefaultRunnableDecorator.run(DefaultThreadFactory.java:138) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at java.lang.Thread.run(Thread.java:748) ~[na:1.8.0_171] 
</code></pre>
",8288449,,1940850,,2019-02-19 4:44:11,2019-02-19 10:06:05,Find by property not working as expected in Spring Data Neo4j,<spring-data-neo4j>,1,0,,,
Spring,27643278,1,,,2014,,2,1888,"<p>I'm trying to make the example of this link: <a href=""https://github.com/spring-guides/gs-uploading-files"" rel=""nofollow"">https://github.com/spring-guides/gs-uploading-files</a> work with Apcahe <code>commons-fileupload</code>but the error: <code>Required MultipartFile parameter 'file' is not present</code> is occurring.</p>

<p>The configuration that I'm making on the example is:</p>

<p>1 - Adding the dependency of <code>commons-fileupload</code> in the <code>pom.xml</code>:</p>

<pre><code>&lt;dependency&gt;
  &lt;groupId&gt;commons-fileupload&lt;/groupId&gt;
  &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;
  &lt;version&gt;1.3.1&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

<p>2 - Config the <code>multipartResolver()</code> in the <code>Application.java</code></p>

<pre><code>@Bean
public MultipartResolver multipartResolver() {
  return new CommonsMultipartResolver();
}
</code></pre>

<p>Without this configuration everything works fine as Spring is using <code>org.springframework.web.multipart.support.StandardServletMultipartResolver</code> for handle uploads, but I want use <code>commons-fileupload</code>.</p>

<p>There is something that I'm missing? </p>

<p>Thanks.</p>

<p>@avaz</p>
",510024,,,,,2018-02-12 15:43:52,spring-boot spring-mvc apache-commons-fileupload: Required MultipartFile parameter 'file' is not present error,<spring-mvc><spring-boot><apache-commons-fileupload>,1,2,1,,
Spring,41578040,1,41771377,,2017,,2,778,"<p>I've found similar <a href=""https://stackoverflow.com/questions/36674438/multiple-resource-server-oauth2-clients-spring-oauth2-sso"">issue</a> but it's unanswered, so I suppose I'm going to duplicate question a little.</p>

<p>I am using Spring OAuth2 to implement separate resource and custom authentification servers. 
I've already configured interaction with auth server through issuing&amp;validating JWT tokens and everything seems fine.</p>

<p>Now I'm trying to add SSO functionality but really stuck with it. I've researched the official Spring <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2"" rel=""nofollow noreferrer"">examples</a> and attached guide but it is very short worded when it comes to connecting SSO part with custom server authentication. And actually author uses only external provider resource ('user' info) to show process.</p>

<p>I think it is normal thing to have all this SSO means of authentication and also custom registration. I can see it works well with stackoverflow for example.</p>

<p>I am loking for directions where to find any info about handling on resource server different kind of tokens issued by multiply SSO providers and also from custom auth server.
Maybe I can use auth chain to do this and some mean to distinguish token format to know how to process it. Is it possible with Spring OAuth2? Or I need to do this magic somehow manually?</p>

<p>For now I have just one 'maybe strange' idea: 
To not involve my own resource server with this SSO stuff at all. After receiving Facebook (for example) token - just exchange it for api JWT token with custom auth server (associating or creating user on the way) and then work with resource server on standard basics</p>

<p><strong>EDITED:</strong>
I've found at least something. I've read about configuring filters in authorization chain and translate given social tokens to my custom JWT-s as 'post authenticate'(not a crazy idea after all). But it mostly done with SpringSocial. 
So now question is: how to do that?
Forgot to say that I am using Password Grant for authentication on custom server. Clients will be only trusted application and I do not even sure about browser client (thinking about only native mobile options). Even if I decide to have browser client I'll make sure it's going to have backend to store sencetive information</p>
",3778348,,-1,,2017-05-23 12:26:17,2017-03-29 17:42:17,Spring OAuth2: support auth and resource access with both SSO and custom auth server,<spring-boot><single-sign-on><spring-security-oauth2>,1,0,1,,
Spring,41738864,1,,,2017,,2,1105,"<p>I have read and implemented my own Auth server following <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/tree/master/auth-server"" rel=""nofollow noreferrer"">this tutorial</a> from Spring. There are multiple SSO providers - Facebook, Github and a custom auth server. In this tutorial, the auth server contains the handling of other SSO providers.</p>

<p>I have a separate resource server that links to my auth server using the following properties:</p>

<pre><code>security.oauth2.resource.userInfoUri=http://localhost:9000/user
</code></pre>

<p>I am able to get the token from my auth server using a cUrl command:</p>

<pre><code>curl acme:acmesecret@localhost:9000/oauth/token -d grant_type=password -d username=user -d password=...
{""access_token"":""aa49e025-c4fe-4892-86af-15af2e6b72a2"",""token_type"":""bearer"",""refresh_token"":""97a9f978-7aad-4af7-9329-78ff2ce9962d"",""expires_in"":43199,""scope"":""read write""}
</code></pre>

<p>But what I fail to understand is how can I use the other SSO providers to get such token as well from the auth server? The resource server should not care how did I get the token and whether I am authenticated using Facebook or my custom auth server. It should simply ask the auth server what is the Principal (logged user) and then decide which resources to show him, right?</p>

<p>I don't have any UI and this will be backed for a mobile application so I need to udnerstand how to handle the authentication using REST reqeusts.</p>
",1262024,,,,,2017-01-27 6:36:10,Multiple SSO providers in Spring Boot Auth server,<java><spring-boot><oauth-2.0><spring-security-oauth2>,1,0,1,,
Spring,35076591,1,35076775,,2016,,2,3977,"<p>I'm completely new to Spring &amp; not very experienced in Java admittedly. I am trying to go through the <a href=""http://spring.io/guides/tutorials/bookmarks/"" rel=""nofollow"">Building REST services with Spring</a> tutorial on the spring.io website. I came across the following code segment and I'm confused as to what it actually does.</p>

<pre><code>@Configuration
@ComponentScan
@EnableAutoConfiguration
public class Application {

    @Bean
    CommandLineRunner init(AccountRepository accountRepository,
            BookmarkRepository bookmarkRepository) {
        return (evt) -&gt; Arrays.asList(
                ""jhoeller,dsyer,pwebb,ogierke,rwinch,mfisher,mpollack,jlong"".split("",""))
                .forEach(
                        a -&gt; {
                            Account account = accountRepository.save(new Account(a,
                                    ""password""));
                            bookmarkRepository.save(new Bookmark(account,
                                    ""http://bookmark.com/1/"" + a, ""A description""));
                            bookmarkRepository.save(new Bookmark(account,
                                    ""http://bookmark.com/2/"" + a, ""A description""));
                        });
    }

    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
}
</code></pre>

<p>I looked up CommandLineRunner on Spring Boot docs, and it says it's an interface that gets implemented if you want to execute some code when the application starts. But to my limited knowledge, CommandLineRunner is not getting implemented by anything in the above code segment. Also, I have no clue where the init() method came from or what it really is.</p>

<p>Additionally, I downloaded the complete code from their <a href=""https://github.com/spring-guides/tut-bookmarks.git"" rel=""nofollow"">github repo</a> but I'm not quite sure how to actually run it. I read earlier today that <code>SpringApplication.run()</code> makes it so that you don't have to deploy anything to an external service like Tomcat. But when I tried <code>java -jar ./jarFileName</code> for the Application class (seemed like a natural choice since it had main() ), it gave an error.</p>

<p>Any help would be appreciated.</p>
",1993941,,,,,2016-01-29 4:15:41,What does CommandLineRunner do in this case?,<java><spring><spring-boot>,1,0,1,,
Spring,28702698,1,28721027,,2015,,2,3201,"<p>Getting startup issues for this <a href=""https://spring.io/guides/gs/accessing-data-gorm-mongodb/"" rel=""nofollow"">springboot project using MongoDB/GORM/Groovy</a> on <code>Java 1.7.0_55</code>, gradle <code>1.11</code>, and <code>spring-boot-gradle-plugin:1.2.1.RELEASE</code>.</p>

<p>I'm running the project <em>as-is</em> with the exception of the following change to <code>application.yml</code> for my remote mongodb:</p>

<pre><code>spring:
    mongodb:
        host: ""10.160.8.1""
        databaseName: ""citydb""
</code></pre>

<p>**On startup, I'm seeing this bean initialization error with <code>mappingMongoConverter</code> </p>

<pre><code>Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mongoTemplate' defined in class path resource [org/springframework/boot/autoconfigure/mongo/MongoDataAutoConfiguration.class]:
Unsatisfied dependency expressed through constructor argument with index 1 of type [org.springframework.data.mongodb.core.convert.MongoConverter]: : Error creating bean with name 'mappingMongoConverter' defined in class path resource [org/springframework/boot/autoconfigure/mongo/MongoDataAutoConfiguration.class]:
Unsatisfied dependency expressed through constructor argument with index 1 of type [org.springframework.data.mongodb.core.mapping.MongoMappingContext]: : No qualifying bean of type [org.springframework.data.mongodb.core.mapping.MongoMapping
Context] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [org.springframework.data.mongodb.core.mapping.MongoMappingCo
ntext] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mappingMongoConverter' defined in class path resource [org
/springframework/boot/autoconfigure/mongo/MongoDataAutoConfiguration.class]: Unsatisfied dependency expressed through constructor argument with index 1 of typ
e [org.springframework.data.mongodb.core.mapping.MongoMappingContext]: : No qualifying bean of type [org.springframework.data.mongodb.core.mapping.MongoMappin
gContext] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}; nested excepti
on is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [org.springframework.data.mongodb.core.mapping.MongoMappingC
ontext] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}
</code></pre>

<p><strong>I think this is the main issue:</strong></p>

<pre><code>Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mappingMongoConverter' defined in class path resou
rce [org/springframework/boot/autoconfigure/mongo/MongoDataAutoConfiguration.class]: Unsatisfied dependency expressed through constructor argument with index
1 of type [org.springframework.data.mongodb.core.mapping.MongoMappingContext]: : No qualifying bean of type [org.springframework.data.mongodb.core.mapping.Mon
goMappingContext] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}; nested
 exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [org.springframework.data.mongodb.core.mapping.Mongo
MappingContext] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}
        at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:749)
        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:464)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:
1111)
</code></pre>

<p>Could this be a GORM dependency issue? I'm using the latest, <code>org.grails:gorm-mongodb-spring-boot:1.1.0.RELEASE</code></p>

<p>Tracked as issue on github: <a href=""https://github.com/spring-guides/gs-accessing-data-gorm-mongodb/issues/6"" rel=""nofollow"">https://github.com/spring-guides/gs-accessing-data-gorm-mongodb/issues/6</a></p>
",791406,,791406,,2015-02-25 14:01:06,2018-02-21 18:58:43,springboot initialization error on startup with mongodb on gorm/groovy,<spring><mongodb><groovy><gorm><spring-boot>,1,0,2,,
Spring,29299181,1,29300885,,2015,,2,2111,"<p>I created a new project in Eclipse from these helpful spring examples (Import Getting Started Content). It is called ""gs-accessing-data-rest-complete""</p>

<p>Reference and full Code can be found: <a href=""https://github.com/spring-guides/gs-accessing-data-rest/tree/master/complete/src/main/java/hello"" rel=""nofollow"">spring-guides/gs-accessing-data-rest</a></p>

<p>When leaving the example unchanged, except using <strong>WAR</strong> instead of <strong>JAR</strong> packaging, everything works well. When calling <code>$ curl http://localhost:8080/</code>, I'll get an exposure of usable resources.</p>

<pre><code>$ curl http://localhost:8080/
{
  ""_links"" : {
    ""people"" : {
      ""href"" : ""http://localhost:8080/name{?page,size,sort}"",
      ""templated"" : true
    },
""profile"" : {
  ""href"" : ""http://localhost:8080/alps""
    }
  }
</code></pre>

<p>But when moving the <code>PersonRepository</code> into another package, e.g. <code>myRepos</code> via Eclipse's Refactor-->Move command, a resource is not accessible anymore.</p>

<p>The response from curl is then:</p>

<pre><code>$ curl http://localhost:8080/
{
  ""_links"" : {
    ""profile"" : {
      ""href"" : ""http://localhost:8080/alps""
    }
  }
}
</code></pre>

<p>As far as I understood, Spring scans for Repositories automatically. Because the main class uses <a href=""http://docs.spring.io/spring-boot/docs/1.2.2.RELEASE/reference/htmlsingle/#using-boot-using-springbootapplication-annotation"" rel=""nofollow""><code>@SpringBootApplication</code></a> annotation, everything should be found by spring itself. </p>

<p>What am I missing? Do I have to add some special XML configuration file or add another Configuration Class somewhere? Or do I have to update application.properties in order to sth.? </p>

<p>Perhaps somebody has some useful experiences, she or he might share with me. Thank you.</p>
",674442,,18122,,2015-03-28 11:41:01,2015-03-28 11:41:01,Why are my Spring Data repositories not found if moved into another package of a Spring Boot application?,<spring-boot><spring-data>,1,0,,,
Spring,47239476,1,,,2017,,2,1637,"<p>I have followed <a href=""https://spring.io/guides/gs/messaging-stomp-websocket/"" rel=""nofollow noreferrer"">this tutorial</a> to build a Spring Boot application that serves <code>websockets</code> connections but I can't connect to these websockets from other clients than the one served by Spring Boot itself.</p>

<p>The <a href=""https://github.com/spring-guides/gs-messaging-stomp-websocket/tree/master/complete"" rel=""nofollow noreferrer""><code>complete</code> directory in the GitHub repository that accompanies the tutorial</a> contains the final Spring Boot code. I took the <code>index.html</code> and the <code>app.js</code> files from this repository and created another client that runs on a Node.js server. After that, I replaced the connection strings to point to <code>localhost:8080</code> (where Spring Boot is running). Then I ran the Node.js server and tried to use the websockets, but it does not work.</p>

<p>The first problem was easily solved by adding <code>.setAllowedOrigins(""*"")</code> to the <code>StompEndpointRegistry</code> registry. With this configuration, I managed to connect to the websocket, but now I never get a message back from the socket.</p>

<p>I wonder what am I missing... Does any one know what is the problem?</p>

<p>The extracted <code>index.html</code> and <code>app.js</code> (renamed to <code>index.js</code>) files, and <a href=""https://github.com/brunokrebs/websocket-client"" rel=""nofollow noreferrer"">the Node.js server can be found here</a> for testing purposes. To run it, simply install the dependencies (<code>npm install</code>) and then issue <code>npm start</code>. The server will respond on <a href=""http://localhost:3000/"" rel=""nofollow noreferrer"">http://localhost:3000/</a>.</p>
",1232793,,,,,2018-04-07 10:52:05,CORS and Spring Websocket,<spring><spring-boot><websocket><cors><stomp>,1,0,,,
Spring,51736997,1,51750684,,2018,,2,431,"<p>The project uses Maven, Spring Boot, Angular, Visual Studio Code editor.</p>

<p>How can I configure the project to reload the browser when angular files change?</p>

<p><a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/single"" rel=""nofollow noreferrer"">spring-boot with angular app</a></p>

<p>With this dependency in pom.xml, the browser reloads when java files change.</p>

<pre><code>&lt;dependency&gt;
  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
  &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;
  &lt;scope&gt;runtime&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre>
",1074660,,,,,2018-08-08 15:41:34,"How to configure project to auto reload browser in angular, spring-boot, maven project",<java><angular><maven><spring-boot><visual-studio-code>,1,4,,,
Spring,42420125,1,42434577,,2017,,2,596,"<p>Could not obtain user details from token when trying <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/tree/master/manual"" rel=""nofollow noreferrer"">Spring-Boot-OAuth2 manual</a> sample for Slack.com</p>

<p>Sample works perfectly for facebook, so I tried change for slack with below parameters:</p>

<p>application.yml</p>

<pre><code>slack:
  client:
    clientId: ID
    clientSecret: PASS
    accessTokenUri: https://slack.com/api/oauth.access
    userAuthorizationUri: https://slack.com/oauth/authorize
    scope: ""identity.basic,identity.email""
  resource:
    userInfoUri: https://slack.com/api/users.identity?token=
</code></pre>

<p>SocialApplication.class modified:</p>

<pre><code>private Filter ssoFilter() {
    OAuth2ClientAuthenticationProcessingFilter slackFilter = new OAuth2ClientAuthenticationProcessingFilter(
            ""/login/slack"");
    OAuth2RestTemplate slackTemplate = new OAuth2RestTemplate(slack(), oauth2ClientContext);
    slackFilter.setRestTemplate(slackTemplate);
    UserInfoTokenServices tokenServices = new UserInfoTokenServices(slackResource().getUserInfoUri(),
            slack().getClientId());
    tokenServices.setRestTemplate(slackTemplate);
    slackFilter.setTokenServices(
            new UserInfoTokenServices(slackResource().getUserInfoUri(), slack().getClientId()));
    return slackFilter;
}

@Bean
@ConfigurationProperties(""slack.client"")
public AuthorizationCodeResourceDetails slack() {
    return new AuthorizationCodeResourceDetails();;
}

@Bean
@ConfigurationProperties(""slack.resource"")
public ResourceServerProperties slackResource() {
    return new ResourceServerProperties();
}
</code></pre>

<p>Log:</p>

<pre><code>2017-02-23 16:21:17.480 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/css/**']
2017-02-23 16:21:17.480 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/login/slack'; against '/css/**'
2017-02-23 16:21:17.480 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/js/**']
2017-02-23 16:21:17.480 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/login/slack'; against '/js/**'
2017-02-23 16:21:17.480 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/images/**']
2017-02-23 16:21:17.481 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/login/slack'; against '/images/**'
2017-02-23 16:21:17.481 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/webjars/**']
2017-02-23 16:21:17.481 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/login/slack'; against '/webjars/**'
2017-02-23 16:21:17.481 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/**/favicon.ico']
2017-02-23 16:21:17.482 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/login/slack'; against '/**/favicon.ico'
2017-02-23 16:21:17.482 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/error']
2017-02-23 16:21:17.482 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/login/slack'; against '/error'
2017-02-23 16:21:17.483 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.web.util.matcher.OrRequestMatcher  : No matches found
2017-02-23 16:21:17.483 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.w.u.matcher.AntPathRequestMatcher  : Request '/login/slack' matched by universal pattern '/**'
2017-02-23 16:21:17.483 DEBUG 3757 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : /login/slack at position 1 of 12 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-02-23 16:21:17.484 DEBUG 3757 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : /login/slack at position 2 of 12 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-02-23 16:21:17.484 DEBUG 3757 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : HttpSession returned null object for SPRING_SECURITY_CONTEXT
2017-02-23 16:21:17.484 DEBUG 3757 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : No SecurityContext was available from the HttpSession: org.apache.catalina.session.StandardSessionFacade@761167a. A new one will be created.
2017-02-23 16:21:17.484 DEBUG 3757 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : /login/slack at position 3 of 12 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-02-23 16:21:17.485 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@a5843f5
2017-02-23 16:21:17.485 DEBUG 3757 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : /login/slack at position 4 of 12 in additional filter chain; firing Filter: 'CsrfFilter'
2017-02-23 16:21:17.485 DEBUG 3757 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : /login/slack at position 5 of 12 in additional filter chain; firing Filter: 'LogoutFilter'
2017-02-23 16:21:17.485 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.w.u.matcher.AntPathRequestMatcher  : Request 'GET /login/slack' doesn't match 'POST /logout
2017-02-23 16:21:17.486 DEBUG 3757 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : /login/slack at position 6 of 12 in additional filter chain; firing Filter: 'OAuth2ClientAuthenticationProcessingFilter'
2017-02-23 16:21:17.486 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/login/slack'; against '/login/slack'
2017-02-23 16:21:17.486 DEBUG 3757 --- [nio-8080-exec-9] uth2ClientAuthenticationProcessingFilter : Request is to process authentication
2017-02-23 16:21:17.543 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.oauth2.client.OAuth2RestTemplate   : Created GET request for ""https://slack.com/api/users.identity?token=""
2017-02-23 16:21:17.543 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.oauth2.client.OAuth2RestTemplate   : Setting request Accept header to [application/json, application/*+json]
2017-02-23 16:21:17.764 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.oauth2.client.OAuth2RestTemplate   : GET request for ""https://slack.com/api/users.identity?token="" resulted in 200 (OK)
2017-02-23 16:21:17.764 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.oauth2.client.OAuth2RestTemplate   : Reading [interface java.util.Map] as ""application/json;charset=utf-8"" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@8914cc4]
2017-02-23 16:21:17.767 DEBUG 3757 --- [nio-8080-exec-9] uth2ClientAuthenticationProcessingFilter : Authentication request failed: org.springframework.security.authentication.BadCredentialsException: Could not obtain user details from token

org.springframework.security.authentication.BadCredentialsException: Could not obtain user details from token
    at org.springframework.security.oauth2.client.filter.OAuth2ClientAuthenticationProcessingFilter.attemptAuthentication(OAuth2ClientAuthenticationProcessingFilter.java:122) ~[spring-security-oauth2-2.0.12.RELEASE.jar!/:na]
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212) ~[spring-security-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) [spring-security-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116) [spring-security-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) [spring-security-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]
    at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:100) [spring-security-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.6.RELEASE.jar!/:4.3.6.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) [spring-security-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]
    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64) [spring-security-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.6.RELEASE.jar!/:4.3.6.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) [spring-security-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105) [spring-security-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) [spring-security-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]
    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56) [spring-security-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.6.RELEASE.jar!/:4.3.6.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) [spring-security-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:214) [spring-security-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:177) [spring-security-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346) [spring-web-4.3.6.RELEASE.jar!/:4.3.6.RELEASE]
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262) [spring-web-4.3.6.RELEASE.jar!/:4.3.6.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) [spring-web-4.3.6.RELEASE.jar!/:4.3.6.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.6.RELEASE.jar!/:4.3.6.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.springframework.security.oauth2.client.filter.OAuth2ClientContextFilter.doFilter(OAuth2ClientContextFilter.java:60) [spring-security-oauth2-2.0.12.RELEASE.jar!/:na]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:105) [spring-web-4.3.6.RELEASE.jar!/:4.3.6.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.6.RELEASE.jar!/:4.3.6.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81) [spring-web-4.3.6.RELEASE.jar!/:4.3.6.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.6.RELEASE.jar!/:4.3.6.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197) [spring-web-4.3.6.RELEASE.jar!/:4.3.6.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.6.RELEASE.jar!/:4.3.6.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.springframework.boot.actuate.autoconfigure.MetricsFilter.doFilterInternal(MetricsFilter.java:106) [spring-boot-actuator-1.5.1.RELEASE.jar!/:1.5.1.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.6.RELEASE.jar!/:4.3.6.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:474) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:349) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:783) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:798) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1434) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [na:1.7.0_71]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [na:1.7.0_71]
    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at java.lang.Thread.run(Thread.java:745) [na:1.7.0_71]
Caused by: org.springframework.security.oauth2.common.exceptions.InvalidTokenException: xoxp-9927885091-14802285653............
    at org.springframework.boot.autoconfigure.security.oauth2.resource.UserInfoTokenServices.loadAuthentication(UserInfoTokenServices.java:93) ~[spring-boot-autoconfigure-1.5.1.RELEASE.jar!/:1.5.1.RELEASE]
    at org.springframework.security.oauth2.client.filter.OAuth2ClientAuthenticationProcessingFilter.attemptAuthentication(OAuth2ClientAuthenticationProcessingFilter.java:112) ~[spring-security-oauth2-2.0.12.RELEASE.jar!/:na]
    ... 60 common frames omitted

2017-02-23 16:21:17.769 DEBUG 3757 --- [nio-8080-exec-9] uth2ClientAuthenticationProcessingFilter : Updated SecurityContextHolder to contain null Authentication
2017-02-23 16:21:17.769 DEBUG 3757 --- [nio-8080-exec-9] uth2ClientAuthenticationProcessingFilter : Delegating to authentication failure handler org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler@5ce08277
2017-02-23 16:21:17.769 DEBUG 3757 --- [nio-8080-exec-9] .a.SimpleUrlAuthenticationFailureHandler : No failure URL set, sending 401 Unauthorized error
2017-02-23 16:21:17.769 DEBUG 3757 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession.
2017-02-23 16:21:17.769 DEBUG 3757 --- [nio-8080-exec-9] s.s.w.c.SecurityContextPersistenceFilter : SecurityContextHolder now cleared, as request processing completed
</code></pre>

<p>Appreciate any help</p>
",2609729,,2609729,,2017-02-23 16:09:19,2018-03-10 4:50:22,Spring Boot Oauth2 with slack,<spring-boot><oauth-2.0><slack>,1,0,,,
Spring,45993586,1,45993917,,2017,,2,300,"<p>I'm going through <a href=""https://github.com/spring-guides/gs-service-registration-and-discovery"" rel=""nofollow noreferrer"">this tutorial</a> and I don't see any configuration for the location / url of the eureka server (Only the <code>src/main/resources/bootstrap.properties</code> containing the name of the eureka client), so how does this client know where the Eureka server is? </p>
",1684269,,,,,2017-09-01 5:42:21,How does the eureka client find the eureka server in spring boot 1.5.2?,<spring><spring-boot><spring-cloud><spring-cloud-netflix>,1,0,,,
Spring,38910280,1,,,2016,,3,601,"<p>I'm working with tutorial that describes how to write a modular Project single-page app using Spring Boot, Spring Security and AngularJS </p>

<p><a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2-vanilla"" rel=""nofollow"">https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2-vanilla</a> </p>

<p>and this Project</p>

<p><a href=""https://github.com/sharmaritesh/spring-angularjs-oauth2-sample"" rel=""nofollow"">https://github.com/sharmaritesh/spring-angularjs-oauth2-sample</a></p>

<p>I cannot logout currently logged user.
If you click on the ""logout"" link you will see that the home page changes (the greeting is no longer displayed) so the user is no longer authenticated with the UI server. Click back on ""login"" though and you actually dont need to go back through the authentication and approval cycle in the authorization server (because you havent logged out of that). </p>

<p>I'm new to Spring and would like that some User could logged out et come back to a login Page again.
Please somebody could help me or give some suggestion to solve this Problem?</p>
",2657234,,7791521,,2018-01-05 21:39:49,2018-01-05 21:39:49,Spring Boot with Angularjs Logout Error,<angularjs><spring><spring-security><spring-boot><logout>,1,0,1,,
Spring,37042106,1,54575448,,2016,,3,505,"<p>I am trying to deploy a spring <code>.war</code> into jboss but am getting 404 errors. I know this has been asked before:</p>

<ul>
<li><a href=""https://stackoverflow.com/questions/27576629/springboot-application-on-jboss-eap-servlet-context-not-lodaed"">springBoot application on Jboss EAP, servlet context not lodaed</a></li>
<li><a href=""https://stackoverflow.com/questions/20666513/spring-java-config-vs-jboss-7"">Spring Java Config vs Jboss 7</a></li>
<li><a href=""https://stackoverflow.com/questions/32870599/cannot-deploy-spring-boot-on-jboss-eap-6-3-3"">Cannot deploy Spring Boot on jBoss EAP 6.3.3</a></li>
</ul>

<p>But I am very new (this week) to maven/spring/jboss, so may well have messed up. I tried what I understood from the various solutions above and none of them worked for me. Probably me messing up or missing something. So I thought I'd get the problem as simple as I can.</p>

<p>I took the code from:
<a href=""https://github.com/spring-guides/gs-rest-service.git"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-rest-service.git</a>
And then work in the <code>complete</code> folder.</p>

<pre><code>cd complete 
mvn package
java -jar .\target\gs-rest-service-0.1.0.jar
</code></pre>

<p>And that all worked as you'd expect.</p>

<p>So then I followed the instructions here (<a href=""http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto-create-a-deployable-war-file"" rel=""nofollow noreferrer"">http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto-create-a-deployable-war-file</a>) to modify my code and <code>pom.xml</code> to produce a war file.</p>

<ul>
<li>pom.xml <a href=""http://pastebin.com/BiLWDskd"" rel=""nofollow noreferrer"">http://pastebin.com/BiLWDskd</a></li>
<li>Application.java <a href=""http://pastebin.com/par7rftz"" rel=""nofollow noreferrer"">http://pastebin.com/par7rftz</a></li>
</ul>

<p>I then <code>mvn clean package</code> and load the resulting .war file into EAP using the UI (<a href=""https://i.stack.imgur.com/N7zxG.png"" rel=""nofollow noreferrer"">http://i.stack.imgur.com/N7zxG.png</a>).</p>

<p>So then in theory this should be the URL right</p>

<ul>
<li><a href=""http://localhost:8080/gs-rest-service-0.1.0/greeting"" rel=""nofollow noreferrer"">http://localhost:8080/gs-rest-service-0.1.0/greeting</a></li>
</ul>

<p>I also tried</p>

<ul>
<li><a href=""http://localhost:8080/greeting"" rel=""nofollow noreferrer"">http://localhost:8080/greeting</a></li>
</ul>

<p>But am getting the 404 error (<a href=""https://i.stack.imgur.com/T6J6z.png"" rel=""nofollow noreferrer"">http://i.stack.imgur.com/T6J6z.png</a>) as described in the other questions. Nothing appears in the jboss console log at all after the .war is loaded.</p>

<p>So am I missing something? Do I need to write a jboss @WebServelet class to wrap around the spring stuff? Changes to my pom.xml? Should I not be using springboot, and just just pring framework modules directly? I note that in the EAP screen it does not show the class in the third column like it did with the jboss sample <code>.war</code>.</p>

<p>Remember I am new to this, so please explain stuff as if I'm a complete dummy (which I am).</p>

<p>Details of my setup:</p>

<ul>
<li>OS Windows7 x64</li>
<li>java version ""1.8.0_91""</li>
<li>Apache Maven 3.3.9</li>
<li>Springboot 1.3.3</li>
<li>JBOSS EAP 6.4.0</li>
<li>No IDE, using vim and command line</li>
</ul>
",694014,,-1,,2017-05-23 12:10:28,2019-02-07 14:45:54,Springboot 1.3.3 gives 404 in Jboss EAP 6.4.0GA,<java><spring><maven><jboss><spring-boot>,1,4,,,
Spring,41429778,1,41450580,,2017,,4,4602,"<p>I am following <a href=""https://spring.io/guides/tutorials/spring-security-and-angular-js/#_the_login_page_angular_js_and_spring_security_part_ii"" rel=""nofollow noreferrer"">this</a> tutorial on Spring Security in the Spring.io guides. The logout and login functions are working fine, but when I add the following line in the <code>WebSecurityConfigurerAdapter</code> it doesn't work as expected. (Basically, I want to prevent a user from login from two devices if he is already logged in in one)</p>

<pre><code>@Configuration
@Order(SecurityProperties.ACCESS_OVERRIDE_ORDER)
protected static class SecurityConfiguration extends WebSecurityConfigurerAdapter {
    @Override
    protected void configure(HttpSecurity http) throws Exception {
        // The configuration as in the tutorial
        http
            .httpBasic().and()
            .authorizeRequests()
                .antMatchers(""/index.html"", ""/home.html"", ""/login.html"", ""/"").permitAll()
                .anyRequest().authenticated()
                .and()
            .csrf()
                .csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse());

      // Added this for session management  
      http.sessionManagement().maximumSessions(1).maxSessionsPreventsLogin(true)
    }
} 
</code></pre>

<p>The problem occurs if you logout and try to login again, a 401 is returned with the message 'Authentication Failed: Maximum
 sessions of 1 for this principal exceeded'.
Yet the logout URL is hit on this part in the <code>AngularJs</code> app</p>

<pre><code>self.logout = function() {
   $http.post('logout', {}).finally(function() {
     $rootScope.authenticated = false;
     $location.path(""/"");
   });
}
</code></pre>

<p>Why isn't the number of sessions reset in this case?</p>

<p>What can be done to make it work as expected?</p>

<p><a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/single"" rel=""nofollow noreferrer"">Link to github code</a></p>

<p>Spring Security logs in debug mode</p>

<pre><code>2017-01-03 21:38:01.806 DEBUG 32624 --- [nio-8080-exec-9] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/error'
2017-01-03 21:38:01.806 DEBUG 32624 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : /logout at position 1 of 13 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-01-03 21:38:01.806 DEBUG 32624 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : /logout at position 2 of 13 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-01-03 21:38:01.807 DEBUG 32624 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Obtained a valid SecurityContext from SPRING_SECURITY_CONTEXT: 'org.springframework.security.core.context.SecurityContextImpl@442b5a9f: Authentication: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@442b5a9f: Principal: org.springframework.security.core.userdetails.User@36ebcb: Username: user; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_USER; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@b364: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: null; Granted Authorities: ROLE_USER'
2017-01-03 21:38:01.807 DEBUG 32624 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : /logout at position 3 of 13 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-01-03 21:38:01.807 DEBUG 32624 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : /logout at position 4 of 13 in additional filter chain; firing Filter: 'CsrfFilter'
2017-01-03 21:38:01.807 DEBUG 32624 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : /logout at position 5 of 13 in additional filter chain; firing Filter: 'LogoutFilter'
2017-01-03 21:38:01.807 DEBUG 32624 --- [nio-8080-exec-9] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/logout'
2017-01-03 21:38:01.807 DEBUG 32624 --- [nio-8080-exec-9] o.s.s.w.a.logout.LogoutFilter            : Logging out user 'org.springframework.security.authentication.UsernamePasswordAuthenticationToken@442b5a9f: Principal: org.springframework.security.core.userdetails.User@36ebcb: Username: user; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_USER; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@b364: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: null; Granted Authorities: ROLE_USER' and transferring to logout destination
2017-01-03 21:38:01.807 DEBUG 32624 --- [nio-8080-exec-9] o.s.s.w.a.l.SecurityContextLogoutHandler : Invalidating session: DDC79F814F9ECD2A0192531E977D53C9
2017-01-03 21:38:01.807 DEBUG 32624 --- [nio-8080-exec-9] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2017-01-03 21:38:01.808 DEBUG 32624 --- [nio-8080-exec-9] o.s.s.web.util.matcher.OrRequestMatcher  : matched
2017-01-03 21:38:01.808 DEBUG 32624 --- [nio-8080-exec-9] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@e0735a1
2017-01-03 21:38:01.809 DEBUG 32624 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession.
2017-01-03 21:38:01.809 DEBUG 32624 --- [nio-8080-exec-9] s.s.w.c.SecurityContextPersistenceFilter : SecurityContextHolder now cleared, as request processing completed
2017-01-03 21:38:38.069 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/user'; against '/error'
2017-01-03 21:38:38.069 DEBUG 32624 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : /user at position 1 of 13 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-01-03 21:38:38.069 DEBUG 32624 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : /user at position 2 of 13 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-01-03 21:38:38.069 DEBUG 32624 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : No HttpSession currently exists
2017-01-03 21:38:38.069 DEBUG 32624 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : No SecurityContext was available from the HttpSession: null. A new one will be created.
2017-01-03 21:38:38.069 DEBUG 32624 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : /user at position 3 of 13 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-01-03 21:38:38.069 DEBUG 32624 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : /user at position 4 of 13 in additional filter chain; firing Filter: 'CsrfFilter'
2017-01-03 21:38:38.069 DEBUG 32624 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : /user at position 5 of 13 in additional filter chain; firing Filter: 'LogoutFilter'
2017-01-03 21:38:38.069 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Request 'GET /user' doesn't match 'POST /logout
2017-01-03 21:38:38.069 DEBUG 32624 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : /user at position 6 of 13 in additional filter chain; firing Filter: 'ConcurrentSessionFilter'
2017-01-03 21:38:38.069 DEBUG 32624 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : /user at position 7 of 13 in additional filter chain; firing Filter: 'BasicAuthenticationFilter'
2017-01-03 21:38:38.070 DEBUG 32624 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : /user at position 8 of 13 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-01-03 21:38:38.070 DEBUG 32624 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : /user at position 9 of 13 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-01-03 21:38:38.070 DEBUG 32624 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : /user at position 10 of 13 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-01-03 21:38:38.070 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Populated SecurityContextHolder with anonymous token: 'org.springframework.security.authentication.AnonymousAuthenticationToken@9055c2bc: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@b364: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: null; Granted Authorities: ROLE_ANONYMOUS'
2017-01-03 21:38:38.070 DEBUG 32624 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : /user at position 11 of 13 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-01-03 21:38:38.070 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.session.SessionManagementFilter  : Requested session ID DDC79F814F9ECD2A0192531E977D53C9 is invalid.
2017-01-03 21:38:38.070 DEBUG 32624 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : /user at position 12 of 13 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-01-03 21:38:38.070 DEBUG 32624 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : /user at position 13 of 13 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-01-03 21:38:38.070 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/user'; against '/index.html'
2017-01-03 21:38:38.070 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/user'; against '/home.html'
2017-01-03 21:38:38.070 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/user'; against '/login.html'
2017-01-03 21:38:38.070 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/user'; against '/'
2017-01-03 21:38:38.070 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Secure object: FilterInvocation: URL: /user; Attributes: [authenticated]
2017-01-03 21:38:38.071 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Previously Authenticated: org.springframework.security.authentication.AnonymousAuthenticationToken@9055c2bc: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@b364: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: null; Granted Authorities: ROLE_ANONYMOUS
2017-01-03 21:38:38.071 DEBUG 32624 --- [io-8080-exec-10] o.s.s.access.vote.AffirmativeBased       : Voter: org.springframework.security.web.access.expression.WebExpressionVoter@6bd96c27, returned: -1
2017-01-03 21:38:38.072 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.a.ExceptionTranslationFilter     : Access is denied (user is anonymous); redirecting to authentication entry point

org.springframework.security.access.AccessDeniedException: Access is denied
    at org.springframework.security.access.vote.AffirmativeBased.decide(AffirmativeBased.java:84) ~[spring-security-core-4.1.3.RELEASE.jar:4.1.3.RELEASE]
    at org.springframework.security.access.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:233) ~[spring-security-core-4.1.3.RELEASE.jar:4.1.3.RELEASE]

2017-01-03 21:38:38.073 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.util.matcher.AndRequestMatcher   : Trying to match using Ant [pattern='/**', GET]
2017-01-03 21:38:38.073 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Request '/user' matched by universal pattern '/**'
2017-01-03 21:38:38.073 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.util.matcher.AndRequestMatcher   : Trying to match using NegatedRequestMatcher [requestMatcher=Ant [pattern='/**/favicon.ico']]
2017-01-03 21:38:38.073 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/user'; against '/**/favicon.ico'
2017-01-03 21:38:38.073 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.u.matcher.NegatedRequestMatcher  : matches = true
2017-01-03 21:38:38.073 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.util.matcher.AndRequestMatcher   : Trying to match using NegatedRequestMatcher [requestMatcher=MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@47099aec, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[*/*]]]
2017-01-03 21:38:38.074 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.u.m.MediaTypeRequestMatcher      : httpRequestMediaTypes=[application/json, text/plain, */*]
2017-01-03 21:38:38.074 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.u.m.MediaTypeRequestMatcher      : Processing application/json
2017-01-03 21:38:38.074 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.u.m.MediaTypeRequestMatcher      : application/json .isCompatibleWith application/json = true
2017-01-03 21:38:38.074 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.u.matcher.NegatedRequestMatcher  : matches = false
2017-01-03 21:38:38.074 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.util.matcher.AndRequestMatcher   : Did not match
2017-01-03 21:38:38.074 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.s.HttpSessionRequestCache        : Request not saved as configured RequestMatcher did not match
2017-01-03 21:38:38.074 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.a.ExceptionTranslationFilter     : Calling Authentication entry point.
2017-01-03 21:38:38.074 DEBUG 32624 --- [io-8080-exec-10] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2017-01-03 21:38:38.074 DEBUG 32624 --- [io-8080-exec-10] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@301fca8
2017-01-03 21:38:38.074 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@e0735a1
2017-01-03 21:38:38.074 DEBUG 32624 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession.
2017-01-03 21:38:38.074 DEBUG 32624 --- [io-8080-exec-10] s.s.w.c.SecurityContextPersistenceFilter : SecurityContextHolder now cleared, as request processing completed
2017-01-03 21:39:24.188 DEBUG 32624 --- [nio-8080-exec-1] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/user'; against '/error'
2017-01-03 21:39:24.188 DEBUG 32624 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : /user at position 1 of 13 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-01-03 21:39:24.188 DEBUG 32624 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : /user at position 2 of 13 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-01-03 21:39:24.188 DEBUG 32624 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : No HttpSession currently exists
2017-01-03 21:39:24.188 DEBUG 32624 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : No SecurityContext was available from the HttpSession: null. A new one will be created.
2017-01-03 21:39:24.188 DEBUG 32624 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : /user at position 3 of 13 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-01-03 21:39:24.188 DEBUG 32624 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : /user at position 4 of 13 in additional filter chain; firing Filter: 'CsrfFilter'
2017-01-03 21:39:24.188 DEBUG 32624 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : /user at position 5 of 13 in additional filter chain; firing Filter: 'LogoutFilter'
2017-01-03 21:39:24.188 DEBUG 32624 --- [nio-8080-exec-1] o.s.s.w.u.matcher.AntPathRequestMatcher  : Request 'GET /user' doesn't match 'POST /logout
2017-01-03 21:39:24.188 DEBUG 32624 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : /user at position 6 of 13 in additional filter chain; firing Filter: 'ConcurrentSessionFilter'
2017-01-03 21:39:24.188 DEBUG 32624 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : /user at position 7 of 13 in additional filter chain; firing Filter: 'BasicAuthenticationFilter'
2017-01-03 21:39:24.188 DEBUG 32624 --- [nio-8080-exec-1] o.s.s.w.a.www.BasicAuthenticationFilter  : Basic Authentication Authorization header found for user 'user'
2017-01-03 21:39:24.188 DEBUG 32624 --- [nio-8080-exec-1] o.s.s.authentication.ProviderManager     : Authentication attempt using org.springframework.security.authentication.dao.DaoAuthenticationProvider
2017-01-03 21:39:24.189 DEBUG 32624 --- [nio-8080-exec-1] o.s.s.w.a.www.BasicAuthenticationFilter  : Authentication success: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@442b5a9f: Principal: org.springframework.security.core.userdetails.User@36ebcb: Username: user; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_USER; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@b364: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: null; Granted Authorities: ROLE_USER
2017-01-03 21:39:24.189 DEBUG 32624 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : /user at position 8 of 13 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-01-03 21:39:24.189 DEBUG 32624 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : /user at position 9 of 13 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-01-03 21:39:24.189 DEBUG 32624 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : /user at position 10 of 13 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-01-03 21:39:24.189 DEBUG 32624 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.authentication.UsernamePasswordAuthenticationToken@442b5a9f: Principal: org.springframework.security.core.userdetails.User@36ebcb: Username: user; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_USER; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@b364: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: null; Granted Authorities: ROLE_USER'
2017-01-03 21:39:24.189 DEBUG 32624 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : /user at position 11 of 13 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-01-03 21:39:24.189 DEBUG 32624 --- [nio-8080-exec-1] s.CompositeSessionAuthenticationStrategy : Delegating to org.springframework.security.web.authentication.session.ConcurrentSessionControlAuthenticationStrategy@2bf94401
2017-01-03 21:39:24.191 DEBUG 32624 --- [nio-8080-exec-1] o.s.s.w.session.SessionManagementFilter  : SessionAuthenticationStrategy rejected the authentication object

org.springframework.security.web.authentication.session.SessionAuthenticationException: Maximum sessions of 1 for this principal exceeded
    at org.springframework.security.web.authentication.session.ConcurrentSessionControlAuthenticationStrategy.allowableSessionsExceeded(ConcurrentSessionControlAuthenticationStrategy.java:153) ~[spring-security-web-4.1.3.RELEASE.jar:4.1.3.RELEASE]
    at org.springframework.security.web.authentication.session.ConcurrentSessionControlAuthenticationStrategy.onAuthentication(ConcurrentSessionControlAuthenticationStrategy.java:123) ~[spring-security-web-4.1.3.RELEASE.jar:4.1.3.RELEASE]


2017-01-03 21:39:24.192 DEBUG 32624 --- [nio-8080-exec-1] .a.SimpleUrlAuthenticationFailureHandler : No failure URL set, sending 401 Unauthorized error
2017-01-03 21:39:24.192 DEBUG 32624 --- [nio-8080-exec-1] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@e0735a1
2017-01-03 21:39:24.192 DEBUG 32624 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession.
2017-01-03 21:39:24.192 DEBUG 32624 --- [nio-8080-exec-1] s.s.w.c.SecurityContextPersistenceFilter : SecurityContextHolder now cleared, as request processing completed
</code></pre>
",5248299,,5248299,,2017-01-03 18:53:15,2017-01-04 6:42:30,Spring Security logout and Maximum sessions,<java><spring><spring-mvc><session><spring-security>,1,0,3,,
Spring,43082213,1,,,2017,,4,2543,"<p>Requesting help on a Spring Boot OAuth2 app's BadCredentialsException when , after user authentication and approval, my Oauth2 client app requests a token from the token endpoint of the OAuth2 AuthServer.</p>

<p>The Spring Boot OAuth2 applications are based off the now famous Dave Syer Spring Boot/ Oauth2 UI Client/Oauth2 AuthServer/JWT example <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2"" rel=""nofollow noreferrer"">https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2</a></p>

<p>This is in the Client Apps' debug:</p>

<pre><code>DEBUG org.springframework.web.client.RestTemplate - Created POST request for ""authserver/uaa/oauth/token""
DEBUG org.springframework.security.oauth2.client.token.grant.code.AuthorizationCodeAccessTokenProvider - Encoding and sending form: {grant_type=[authorization_code], code=[xxxxx], redirect_uri=[oauthclientapp/login]}
DEBUG org.springframework.web.client.RestTemplate - POST request for ""authserver/uaa/oauth/token"" resulted in 200 (null)
DEBUG org.springframework.security.oauth2.client.filter.OAuth2ClientAuthenticationProcessingFilter - Authentication request failed: org.springframework.security.authentication.BadCredentialsException: Could not obtain access token
</code></pre>

<p>This is the AuthServer's debug:</p>

<pre><code>DEBUG org.springframework.security.web.FilterChainProxy - /oauth/token at position 9 of 15 in additional filter chain; firing Filter: 'BasicAuthenticationFilter'
DEBUG org.springframework.security.web.authentication.www.BasicAuthenticationFilter - Basic Authentication Authorization header found for user 'clientID'
DEBUG org.springframework.security.authentication.ProviderManager - Authentication attempt using org.springframework.security.authentication.dao.DaoAuthenticationProvider
DEBUG org.springframework.security.authentication.dao.DaoAuthenticationProvider - User 'clientID' not found
DEBUG org.springframework.security.web.authentication.www.BasicAuthenticationFilter - Authentication request for failed: org.springframework.security.authentication.BadCredentialsException: Bad credentials
</code></pre>

<p>The Oauth2 client app is just like the one in the example, no customization in the token request process, just whatever @EnableOAuth2Sso gives us. The ClientDetails config on the AuthServer is also just like the example, sample below, so nothing special.</p>

<p>Any suggestions to better troubleshoot this are much appreciated. Thanks.</p>

<pre><code>@Override
        public void configure(ClientDetailsServiceConfigurer clients) throws Exception {
            clients.inMemory()
                    .withClient(""clientID"")
                    .secret(""acmesecret"")
                    .authorizedGrantTypes(""authorization_code"", ""refresh_token"",
                            ""password"").scopes(""openid"");
        }
</code></pre>
",7746592,,,,,2017-10-01 21:29:36,Spring Boot Oauth2 token request - Bad client credentials from BasicAuthenticationFilter,<spring-boot><oauth-2.0><token><credentials>,1,0,,,
Spring,38698426,1,38723291,,2016,,4,911,"<p>I found the same problem and solution <a href=""https://stackoverflow.com/questions/33694905/spring-security-with-angularjs-404-on-logout"">here</a>. But those solution have not helped me. The example you can get <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/single"" rel=""nofollow noreferrer"">here</a>. As you can see example contains good description for logout in client <em>angular part</em>. But it does not provide logout processing on server part. So I checked <a href=""https://stackoverflow.com/questions/33694905/spring-security-with-angularjs-404-on-logout""><em><strong>LogoutSuccessHandler</strong></em></a> </p>

<pre><code>authentication.isAuthenticated() == true
</code></pre>

<p>I tried use some experiments, but logout does not work. Tried:</p>

<pre><code>((UsernamePasswordAuthenticationToken) authentication).eraseCredentials();
</code></pre>

<p>or</p>

<pre><code>authentication.setAuthenticated(false);
</code></pre>

<p>and <em>.deleteCookies(""JSESSIONID"", <strong>""XSRF-TOKEN""</strong>)</em></p>

<pre><code>        http.httpBasic().and().authorizeRequests()
                .antMatchers(""/index.html"", ""/home.html"", ""/login.html"", ""/"").permitAll().anyRequest()
                .authenticated().and().csrf()
                .csrfTokenRepository(csrfTokenRepository()).and()
                .addFilterAfter(csrfHeaderFilter(), CsrfFilter.class);
        http.authorizeRequests().anyRequest().authenticated()
                .and().logout().logoutSuccessHandler(logoutSuccess).deleteCookies(""JSESSIONID"", ""XSRF-TOKEN"")
                .invalidateHttpSession(true).permitAll();
</code></pre>

<p>result was same. I hope someone can help me with the issue. Thanks.</p>
",5728095,,-1,,2017-05-23 12:14:54,2016-08-02 18:41:55,Spring security with AngularJS - logout does not work,<java><angularjs><google-chrome><spring-security><logout>,1,3,,,
Spring,24025004,1,24040465,,2014,,5,3165,"<p>I'm working with a Maven multi module with a war depending on an other war.</p>

<p>The Spring Boot webapp depends on a basic webapp that only serves html files.</p>

<p>When I run the Spring Boot app, I'm able to access services and html from the main webapp (the Spring Boot one) but I can't access the html files from the dependency war (404). But these html files are well packaged in the Spring Boot webapp war...</p>

<p>Here is a project that show the problem:<br>
<a href=""https://github.com/cthiebault/spring-boot-war-overlays"" rel=""noreferrer"">https://github.com/cthiebault/spring-boot-war-overlays</a></p>

<p>This project has 2 war modules:</p>

<ul>
<li><strong>dependency-webapp</strong>: basic webapp serving just html (/dependency/index.html)</li>
<li><strong>main-webapp</strong>: Spring Boot webapp (copied from Spring Guides <a href=""https://github.com/spring-guides/gs-serving-web-content"" rel=""noreferrer"">gs-serving-web-content</a>). This webapp has a dependency on <strong>dependency-webapp</strong>.</li>
</ul>

<p>Here is the main-webapp pom.xml:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;
&lt;project xmlns=""http://maven.apache.org/POM/4.0.0"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""
    xsi:schemaLocation=""http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd""&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

  &lt;parent&gt;
    &lt;groupId&gt;spring-boot-overlays&lt;/groupId&gt;
    &lt;artifactId&gt;parent&lt;/artifactId&gt;
    &lt;version&gt;0.1.0-SNAPSHOT&lt;/version&gt;
  &lt;/parent&gt;

  &lt;artifactId&gt;main-webapp&lt;/artifactId&gt;
  &lt;packaging&gt;war&lt;/packaging&gt;

  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;spring-boot-overlays&lt;/groupId&gt;
      &lt;artifactId&gt;dependency-webapp&lt;/artifactId&gt;
      &lt;version&gt;0.1.0-SNAPSHOT&lt;/version&gt;
      &lt;type&gt;war&lt;/type&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;

  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
      &lt;/plugin&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;
        &lt;configuration&gt;
          &lt;overlays&gt;
            &lt;overlay&gt;
              &lt;groupId&gt;spring-boot-overlays&lt;/groupId&gt;
              &lt;artifactId&gt;dependency-webapp&lt;/artifactId&gt;
            &lt;/overlay&gt;
          &lt;/overlays&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;

  &lt;properties&gt;
    &lt;start-class&gt;hello.Application&lt;/start-class&gt;
  &lt;/properties&gt;

&lt;/project&gt;
</code></pre>

<p>Run the webapp: </p>

<pre><code>mvn install
cd main-webapp
mvn spring-boot:run
</code></pre>

<h3>EDIT 1: Here are the logs when I try to access html pages:</h3>

<p><code>http://localhost:8080/index.html</code> <strong>--> OK</strong></p>

<pre><code>o.s.web.servlet.DispatcherServlet        : DispatcherServlet with name 'dispatcherServlet' processing GET request for [/index.html]
s.w.s.m.m.a.RequestMappingHandlerMapping : Looking up handler method for path /index.html
s.w.s.m.m.a.RequestMappingHandlerMapping : Did not find handler method for [/index.html]
o.s.w.s.handler.SimpleUrlHandlerMapping  : Matching patterns for request [/index.html] are [/**]
o.s.w.s.handler.SimpleUrlHandlerMapping  : URI Template variables for request [/index.html] are {}
o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapping [/index.html] to HandlerExecutionChain with handler [org.springframework.web.servlet.resource.ResourceHttpRequestHandler@25595861] and 1 interceptor
o.s.web.servlet.DispatcherServlet        : Last-Modified value for [/index.html] is: -1
o.s.w.s.r.ResourceHttpRequestHandler     : Trying relative path [index.html] against base location: ServletContext resource [/]
o.s.w.s.r.ResourceHttpRequestHandler     : Found matching resource: ServletContext resource [/index.html]
o.s.w.s.r.ResourceHttpRequestHandler     : Determined media type 'text/html' for ServletContext resource [/index.html]
o.s.w.s.r.ResourceHttpRequestHandler     : Resource not modified - returning 304
o.s.web.servlet.DispatcherServlet        : Null ModelAndView returned to DispatcherServlet with name 'dispatcherServlet': assuming HandlerAdapter completed request handling
o.s.web.servlet.DispatcherServlet        : Successfully completed request
</code></pre>

<p><code>http://localhost:8080/dependency/index.html</code> <strong>--> ERROR 404</strong></p>

<pre><code>o.s.web.servlet.DispatcherServlet        : DispatcherServlet with name 'dispatcherServlet' processing GET request for [/dependency/index.html]
s.w.s.m.m.a.RequestMappingHandlerMapping : Looking up handler method for path /dependency/index.html
s.w.s.m.m.a.RequestMappingHandlerMapping : Did not find handler method for [/dependency/index.html]
o.s.w.s.handler.SimpleUrlHandlerMapping  : Matching patterns for request [/dependency/index.html] are [/**]
o.s.w.s.handler.SimpleUrlHandlerMapping  : URI Template variables for request [/dependency/index.html] are {}
o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapping [/dependency/index.html] to HandlerExecutionChain with handler [org.springframework.web.servlet.resource.ResourceHttpRequestHandler@25595861] and 1 interceptor
o.s.web.servlet.DispatcherServlet        : Last-Modified value for [/dependency/index.html] is: -1
o.s.w.s.r.ResourceHttpRequestHandler     : Trying relative path [dependency/index.html] against base location: ServletContext resource [/]
o.s.w.s.r.ResourceHttpRequestHandler     : Trying relative path [dependency/index.html] against base location: class path resource [META-INF/resources/]
o.s.w.s.r.ResourceHttpRequestHandler     : Trying relative path [dependency/index.html] against base location: class path resource [resources/]
o.s.w.s.r.ResourceHttpRequestHandler     : Trying relative path [dependency/index.html] against base location: class path resource [static/]
o.s.w.s.r.ResourceHttpRequestHandler     : Trying relative path [dependency/index.html] against base location: class path resource [public/]
o.s.w.s.r.ResourceHttpRequestHandler     : No matching resource found - returning 404
o.s.web.servlet.DispatcherServlet        : Null ModelAndView returned to DispatcherServlet with name 'dispatcherServlet': assuming HandlerAdapter completed request handling
o.s.web.servlet.DispatcherServlet        : Successfully completed request
</code></pre>

<p>Any idea of what's wrong?</p>
",386713,,386713,,2014-06-04 13:08:34,2014-06-04 14:38:56,Spring Boot & Maven war overlay,<maven><spring-boot><maven-war-plugin>,1,2,1,,
Spring,31730050,1,31760587,,2015,,5,1038,"<p>We've noticed in our that SOAP web-services seem to run faster when run as</p>

<pre><code>spring-boot:run
</code></pre>

<p>as opposed to packaging up the JAR as we do for deployment and running</p>

<pre><code>java -jar mySpringApp.jar
</code></pre>

<p>The speed up is in the order of 2-3x so obviously we would like this for our live environment.</p>

<p>To validate that this wasn't something in our app I've tried this with the sample app from the <a href=""https://spring.io/guides/gs/producing-web-service/"" rel=""noreferrer"">spring guide</a></p>

<p>git source <a href=""https://github.com/spring-guides/gs-soap-service.git"" rel=""noreferrer"">https://github.com/spring-guides/gs-soap-service.git</a></p>

<p>Testing this with JMeter shows the same sort of speed up.  I've tested this on both Windows 7 Java 1.8.0_31 and Ubuntu 14.04 platforms with 1.8.0_45-b14.</p>

<p>This only seems to be the case for soap services, simple html doesn't show any significant difference in performance.  Any idea what could be causing this?</p>
",3702362,,3702362,,2015-07-31 8:21:54,2015-08-01 9:59:49,spring-boot-starter-ws performance when run as jar,<spring><maven><soap><spring-boot><spring-ws>,1,4,2,,
Spring,38800564,1,,,2016,,5,2554,"<p>We are trying to implement a SSO scheme using Azure AD and Spring security.
We found a few leads:</p>

<p><a href=""https://github.com/spring-guides/tut-spring-boot-oauth2"" rel=""noreferrer"">https://github.com/spring-guides/tut-spring-boot-oauth2</a></p>

<p><a href=""https://github.com/Pytry/azure-b2c-oauth2"" rel=""noreferrer"">https://github.com/Pytry/azure-b2c-oauth2</a></p>

<p>But none of these tell the full story.
In fact we can't get passed the access token parsing, Spring has a different idea of what the JWT token should be.</p>

<p>Ideally we wouldn't want to write an SSO filter from scratch but override the Token Services to implement custom filtering for starters.</p>

<p>Has anyone successfully implemented this?
Any help would be appreciated.</p>
",6684746,,,,,2018-05-10 8:21:19,Azure AD and Spring Security with Oauth 2,<java><security><spring-mvc><oauth><azure-active-directory>,1,1,4,,
Spring,36100395,1,,,2016,,5,5450,"<p>I'm modifying the <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2-vanilla"" rel=""noreferrer"">oauth2-vanilla</a> sample from <a href=""https://spring.io/guides/tutorials/spring-security-and-angular-js/"" rel=""noreferrer"">Springs excellent security tutorials</a>. The oauth2-vanilla combines the Zuul Proxy and the UI into a single application. I would like to seperate the Zuul Proxy and the UI. (The Zuul Proxy should act as an API gateway and as a reverse proxy for several UIs).</p>

<p>When accessing the UI via the zuul proxy, it should be able to do SSO based on Oauth2 between the UI and the resource backend.</p>

<p>The oauth2-vanilla looks like this</p>

<p><img src=""https://dl.dropboxusercontent.com/u/13246619/Spring/Screenshot%202016-03-19%2010.58.24.png"" alt=""""></p>

<p>Where I want to move to something like this :</p>

<p><img src=""https://dl.dropboxusercontent.com/u/13246619/Spring/Screenshot%202016-03-19%2010.58.32.png"" alt=""""></p>

<p>I've removed the UI part from the gateway, and added a zuul route for the ui</p>

<p><code>
zuul:
  routes:
    resource:
      url: http://localhost:9000
    user:
      url: http://localhost:9999/uaa/user
    ui:
      url: http://localhost:8080
</code></p>

<p>I created a new UI webapp containing the UI (Angular stuff) with an <code>@EnableOAuth2Sso</code> annotation.</p>

<p>So I'm accessing the UI via <a href=""http://localhost:8888"" rel=""noreferrer"">http://localhost:8888</a> (through the zuul proxy).
After authenticating and doing through the UI flow, I can access the /user endpoint that returns me the user. (During debugging, I see that when I access the /user endpoint that I have an HTTP Session with an OAuth2Authentication.</p>

<p>When I access the /resource endpoint however, the HttpSessionSecurityContextRepository cannot find a session and is unable to build a context with the OAuth2Authentication.</p>

<p>I've created <a href=""https://github.com/ddewaele/spring-cloud-seperate-ui-gateway"" rel=""noreferrer"">a git repository</a> with the modified sample.</p>

<p>I'm guessing there is something wrong with the gateway configuration. 
I've tried changing cookie paths, changing HttpSecurity rules in the proxy but I cannot get it to work.</p>

<p>What I don't understand is why the UI, when accessed through the proxy is able to resolve the <code>/user</code> endpoint fine (with an HTTP session and a OAuth2Authentication), but it is unable to access the <code>/resource</code> endpoint.</p>

<p>Also, as the UI is now running in the <code>/ui</code> context, it seems that I need to have the following code in the gateway for it to load up the angular css / js files.</p>

<p><code>
.antMatchers(""/ui/index.html"", ""/ui/home.html"", ""ui/css/**"", ""/ui/js/**"").permitAll().anyRequest().authenticated();
</code></p>

<p>It also doesn't seem right that I need to prefix it with the zuul ui route.</p>

<p>Any help would be appreciated.</p>
",492410,,492410,,2016-03-19 17:03:55,2018-03-09 19:50:33,Spring Security Oauth2 SSO with Zuul Proxy,<spring><spring-security><spring-cloud><spring-security-oauth2>,1,5,6,,
Spring,35584271,1,35585108,,2016,,6,12422,"<p>I'm trying to use auditing to save <code>dateCreated</code> and <code>dateUpdated</code> in my objects, but since I set <code>ID</code> manually, there's some additional work.</p>

<p>Following Oliver Gierke's suggestion in <a href=""https://jira.spring.io/browse/DATAMONGO-946"" rel=""noreferrer"">DATAMONGO-946</a>
I'm trying to figure out how to correctly implement it.</p>

<p>As original poster in Jira task above, I've downloaded example from here <a href=""https://github.com/spring-guides/gs-accessing-data-mongodb.git"" rel=""noreferrer"">https://github.com/spring-guides/gs-accessing-data-mongodb.git</a> and modified it a bit:</p>

<pre><code>package hello;

import org.springframework.data.annotation.CreatedDate;
import org.springframework.data.annotation.Id;
import org.springframework.data.annotation.LastModifiedDate;
import org.springframework.data.domain.Persistable;

import java.util.Date;

public class Customer implements Persistable&lt;String&gt; {
    @Id
    private String id;
    @CreatedDate
    private Date createdDate;
    @LastModifiedDate
    private Date lastModifiedDate;
    private String firstName;
    private String lastName;
    private boolean persisted;

    public Customer() {
    }

    public Customer(String firstName, String lastName) {
        this.firstName = firstName;
        this.lastName = lastName;
    }

    public void setPersisted(boolean persisted) {
        this.persisted = persisted;
    }

    @Override
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    @Override
    public boolean isNew() {
        return !persisted;
    }

    @Override
    public String toString() {
        return String.format(
                ""Customer[id=%s, createdDate=%s, lastModifiedDate=%s, firstName='%s', lastName='%s']"",
                id, createdDate, lastModifiedDate, firstName, lastName);
    }
}
</code></pre>

<p>and</p>

<pre><code>package hello;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.CommandLineRunner;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.data.mongodb.config.EnableMongoAuditing;

@SpringBootApplication
@EnableMongoAuditing
public class Application implements CommandLineRunner {

    @Autowired
    private CustomerRepository repository;

    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }

    @Override
    public void run(String... args) throws Exception {

        repository.deleteAll();

        // create a customer
        Customer c = new Customer(""Alice"", ""Smith"");
        c.setId(""test_id"");

        // save a customer
        repository.save(c);

        // fetch all customers
        System.out.println(""Customers found with findAll():"");
        System.out.println(""-------------------------------"");
        for (Customer customer : repository.findAll()) {
            System.out.println(customer);
        }
        System.out.println();

        // create another customer with same id
        c = new Customer(""Bob"", ""Smith"");
        c.setId(""test_id"");
        c.setPersisted(true);
        repository.save(c);

        // fetch all customers
        System.out.println(""Customers found with findAll():"");
        System.out.println(""-------------------------------"");
        for (Customer customer : repository.findAll()) {
            System.out.println(customer);
        }
        System.out.println();
    }
}
</code></pre>

<p>and a result of execution is this:</p>

<pre><code>Customers found with findAll():
-------------------------------
Customer[id=test_id, createdDate=Wed Feb 24 00:43:47 WITA 2016, lastModifiedDate=Wed Feb 24 00:43:47 WITA 2016, firstName='Alice', lastName='Smith']

Customers found with findAll():
-------------------------------
Customer[id=test_id, createdDate=null, lastModifiedDate=Wed Feb 24 00:43:47 WITA 2016, firstName='Bob', lastName='Smith']
</code></pre>

<p><code>createdDate</code> becomes <code>null</code> after object update.</p>

<p>What am I missing here? And how to correctly implement <code>Persistable</code> to make auditing work properly?</p>
",1757278,,,,,2018-12-09 20:05:25,"Spring Data MongoDB Annotation @CreatedDate isn't working, when ID is assigned manually",<java><spring><mongodb><spring-data><spring-data-mongodb>,1,0,3,,
Spring,36705874,1,,,2016,,7,3608,"<p>I am studying Spring Cloud and Spring OAuth2 by decomposing <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2"" rel=""nofollow"">the three interconnected apps in this GitHub sample</a>.  When I open up the <code>/oauth/revoke-token</code> endpoint in the <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2/authserver"" rel=""nofollow""><code>authserver</code> app</a> and then call it from the <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2/ui"" rel=""nofollow""><code>ui</code> app</a> with a <code>http://localhost:9999/uaa/logout</code>, the debug log for the <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2/authserver"" rel=""nofollow""><code>authserver</code> app</a> gives the following error message while rejecting the logout request:</p>

<pre><code>Request 'OPTIONS /logout' doesn't match 'POST /logout
</code></pre>

<p><strong>What specific changes need to be made to the code in <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2"" rel=""nofollow"">the sample GitHub apps</a> in order to enable the global logout to succeed when the <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2/ui"" rel=""nofollow""><code>ui</code> app</a> calls the logout function from <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/blob/master/oauth2/ui/src/main/resources/static/js/hello.js"" rel=""nofollow""><code>hello.js</code></a>?</strong></p>

<hr/>

<p><strong>INITIAL EFFORTS:</strong></p>

<hr/>

<p>Changes that I made so far include:  </p>

<p>Add the following @Bean definition to <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/blob/master/oauth2/authserver/src/main/java/demo/AuthserverApplication.java"" rel=""nofollow"">AuthserverApplication.java</a>:  </p>

<pre><code>@Bean
public TokenStore tokenStore() {return new InMemoryTokenStore();}
</code></pre>

<p>Add the following controller class in the <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2/authserver/src/main/java/demo"" rel=""nofollow""><code>demo</code> package of the <code>authserver</code> app</a>:  </p>

<pre><code>@Configuration
public class AuthorizationServerConfiguration extends AuthorizationServerConfigurerAdapter {

    @Autowired
    TokenStore tokenStore;

    @Override
    public void configure(AuthorizationServerEndpointsConfigurer endpoints) throws Exception {
        endpoints.tokenStore(tokenStore);
    }

    @RequestMapping(value = ""/oauth/revoke-token"", method = RequestMethod.GET)
    @ResponseStatus(HttpStatus.OK)
    public void logout(HttpServletRequest request) {
        String authHeader = request.getHeader(""Authorization"");
        if (authHeader != null) {
            String tokenValue = authHeader.replace(""Bearer"", """").trim();
            OAuth2AccessToken accessToken = tokenStore.readAccessToken(tokenValue);
            tokenStore.removeAccessToken(accessToken);
        }
    }
}
</code></pre>

<p>Change the <code>logout()</code> method of <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/blob/master/oauth2/ui/src/main/resources/static/js/hello.js"" rel=""nofollow""><code>hello.js</code> in the <code>ui</code> app</a> to become the following:  </p>

<pre><code>self.logout = function() {
    $http.post('http://localhost:9999/uaa/logout', {}).finally(function() {
        $rootScope.authenticated = false;
        $location.path(""/"");
    });
}
</code></pre>

<p>But when the user clicks on the logout button in the browser and triggers the call to <code>http://localhost:9999/uaa/logout</code>, the debug log for the <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2/authserver"" rel=""nofollow""><code>authserver</code></a> app gives the following output:  </p>

<pre><code>2016-04-18 15:34:07.142 DEBUG 313 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/css/**']
2016-04-18 15:34:07.142 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/css/**'
2016-04-18 15:34:07.142 DEBUG 313 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/js/**']
2016-04-18 15:34:07.142 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/js/**'
2016-04-18 15:34:07.142 DEBUG 313 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/images/**']
2016-04-18 15:34:07.142 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/images/**'
2016-04-18 15:34:07.142 DEBUG 313 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/**/favicon.ico']
2016-04-18 15:34:07.142 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/**/favicon.ico'
2016-04-18 15:34:07.142 DEBUG 313 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/error']
2016-04-18 15:34:07.142 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/error'
2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : No matches found
2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/login']
2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/login'
2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/oauth/authorize']
2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/oauth/authorize'
2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/oauth/confirm_access']
2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/oauth/confirm_access'

2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/logout']
2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/logout'
2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : matched

2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] o.s.security.web.FilterChainProxy        : /logout at position 1 of 12 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] o.s.security.web.FilterChainProxy        : /logout at position 2 of 12 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] w.c.HttpSessionSecurityContextRepository : No HttpSession currently exists
2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] w.c.HttpSessionSecurityContextRepository : No SecurityContext was available from the HttpSession: null. A new one will be created.
2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] o.s.security.web.FilterChainProxy        : /logout at position 3 of 12 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@5790c1b4
2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] o.s.security.web.FilterChainProxy        : /logout at position 4 of 12 in additional filter chain; firing Filter: 'CsrfFilter'
2016-04-18 15:34:07.144 DEBUG 313 --- [io-9999-exec-10] o.s.security.web.FilterChainProxy        : /logout at position 5 of 12 in additional filter chain; firing Filter: 'LogoutFilter'

2016-04-18 15:34:07.144 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Request 'OPTIONS /logout' doesn't match 'POST /logout
2016-04-18 15:34:07.144 DEBUG 313 --- [io-9999-exec-10] o.s.security.web.FilterChainProxy        : /logout at position 6 of 12 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter'

2016-04-18 15:34:07.144 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Request 'OPTIONS /logout' doesn't match 'POST /login
2016-04-18 15:34:07.144 DEBUG 313 --- [io-9999-exec-10] o.s.security.web.FilterChainProxy        : /logout at position 7 of 12 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2016-04-18 15:34:07.144 DEBUG 313 --- [io-9999-exec-10] o.s.security.web.FilterChainProxy        : /logout at position 8 of 12 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2016-04-18 15:34:07.144 DEBUG 313 --- [io-9999-exec-10] o.s.security.web.FilterChainProxy        : /logout at position 9 of 12 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2016-04-18 15:34:07.144 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Populated SecurityContextHolder with anonymous token: 'org.springframework.security.authentication.AnonymousAuthenticationToken@9055e4a6: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@957e: RemoteIpAddress: 127.0.0.1; SessionId: null; Granted Authorities: ROLE_ANONYMOUS'
2016-04-18 15:34:07.144 DEBUG 313 --- [io-9999-exec-10] o.s.security.web.FilterChainProxy        : /logout at position 10 of 12 in additional filter chain; firing Filter: 'SessionManagementFilter'
2016-04-18 15:34:07.144 DEBUG 313 --- [io-9999-exec-10] o.s.security.web.FilterChainProxy        : /logout at position 11 of 12 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2016-04-18 15:34:07.144 DEBUG 313 --- [io-9999-exec-10] o.s.security.web.FilterChainProxy        : /logout at position 12 of 12 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2016-04-18 15:34:07.144 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Secure object: FilterInvocation: URL: /logout; Attributes: [authenticated]
2016-04-18 15:34:07.144 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Previously Authenticated: org.springframework.security.authentication.AnonymousAuthenticationToken@9055e4a6: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@957e: RemoteIpAddress: 127.0.0.1; SessionId: null; Granted Authorities: ROLE_ANONYMOUS
2016-04-18 15:34:07.144 DEBUG 313 --- [io-9999-exec-10] o.s.s.access.vote.AffirmativeBased       : Voter: org.springframework.security.web.access.expression.WebExpressionVoter@539015a, returned: -1
2016-04-18 15:34:07.145 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.a.ExceptionTranslationFilter     : Access is denied (user is anonymous); redirecting to authentication entry point

org.springframework.security.access.AccessDeniedException: Access is denied
    at org.springframework.security.access.vote.AffirmativeBased.decide(AffirmativeBased.java:83) ~[spring-security-core-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.access.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:232) ~[spring-security-core-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:123) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:90) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:114) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:122) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:169) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:48) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:205) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:120) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:96) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:91) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:53) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]
    ...  
    at java.lang.Thread.run(Thread.java:745) [na:1.8.0_45]

2016-04-18 15:34:07.146 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.util.matcher.AndRequestMatcher   : Trying to match using Ant [pattern='/**', GET]
2016-04-18 15:34:07.146 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Request 'OPTIONS /logout' doesn't match 'GET /**
2016-04-18 15:34:07.146 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.util.matcher.AndRequestMatcher   : Did not match
2016-04-18 15:34:07.146 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.s.HttpSessionRequestCache        : Request not saved as configured RequestMatcher did not match
2016-04-18 15:34:07.146 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.a.ExceptionTranslationFilter     : Calling Authentication entry point.
2016-04-18 15:34:07.146 DEBUG 313 --- [io-9999-exec-10] o.s.s.web.DefaultRedirectStrategy        : Redirecting to 'http://localhost:9999/uaa/login'
2016-04-18 15:34:07.147 DEBUG 313 --- [io-9999-exec-10] w.c.HttpSessionSecurityContextRepository : SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession.
2016-04-18 15:34:07.147 DEBUG 313 --- [io-9999-exec-10] s.s.w.c.SecurityContextPersistenceFilter : SecurityContextHolder now cleared, as request processing completed
</code></pre>

<p><strong>What other specific code changes need to be changed in <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2"" rel=""nofollow"">the GitHub sample apps</a> to enable the <code>ui</code> app to trigger a global logout of the user from all apps?</strong>  </p>

<p>Note: Obviously, <code>/uaa/logout</code> is a different URL than <code>/oauth/revoke-token</code>.  However, the inner workings of Spring Security and OAuth in this situation are not clear without an answer to this OP.  </p>

<hr/>

<p><strong>@StuXnet's Suggestions:</strong>  </p>

<hr/>

<p>The content of the Firefox Developer Tools Network Tab for the request is:  </p>

<p>The request to <code>http : // localhost:9999/uaa/login</code> with method <code>OPTIONS</code> was rejected with a <code>403</code> error.  </p>

<p>The raw <code>request</code> headers were:  </p>

<pre><code>Host: localhost:9999
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101 Firefox/38.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Origin: http://localhost:8080
Access-Control-Request-Method: POST
Access-Control-Request-Headers: content-type,x-requested-with
Connection: keep-alive
Pragma: no-cache
Cache-Control: no-cache
</code></pre>

<p>The raw <code>response</code> headers were:  </p>

<pre><code>Allow: GET, HEAD, POST, PUT, DELETE, TRACE, OPTIONS, PATCH
Content-Length: 20
Date: Mon, 18 Apr 2016 23:45:46 GMT
Server: Apache-Coyote/1.1
X-Application-Context: application:9999
</code></pre>

<p>Next, I changed the config(http) method of LoginConfig to read as follows:  </p>

<pre><code>@Override
protected void configure(HttpSecurity http) throws Exception {
    // @formatter:off
    http
        .formLogin().loginPage(""/login"").permitAll()
        .and()
        .requestMatchers().antMatchers(""/login"", ""/oauth/authorize"", ""/oauth/confirm_access"", ""/logout"", ""/oauth/revoke-token"")
        .and()
        .authorizeRequests()
        .antMatchers(HttpMethod.OPTIONS,""/logout"").permitAll()
        .anyRequest().authenticated();
        // @formatter:on
}
</code></pre>

<p>This resulted in the following new printout in the Spring Boot DEBUG logs:  </p>

<pre><code>2016-04-18 19:22:06.202 DEBUG 5319 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/css/**']
2016-04-18 19:22:06.202 DEBUG 5319 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/css/**'
2016-04-18 19:22:06.202 DEBUG 5319 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/js/**']
2016-04-18 19:22:06.202 DEBUG 5319 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/js/**'
2016-04-18 19:22:06.202 DEBUG 5319 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/images/**']
2016-04-18 19:22:06.202 DEBUG 5319 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/images/**'
2016-04-18 19:22:06.202 DEBUG 5319 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/**/favicon.ico']
2016-04-18 19:22:06.202 DEBUG 5319 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/**/favicon.ico'
2016-04-18 19:22:06.202 DEBUG 5319 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/error']
2016-04-18 19:22:06.202 DEBUG 5319 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/error'
2016-04-18 19:22:06.202 DEBUG 5319 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : No matches found
2016-04-18 19:22:06.203 DEBUG 5319 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Request '/logout' matched by universal pattern '/**'
2016-04-18 19:22:06.203 DEBUG 5319 --- [io-9999-exec-10] o.s.security.web.FilterChainProxy        : /logout has an empty filter list
2016-04-18 19:22:06.204 DEBUG 5319 --- [io-9999-exec-10] .s.o.p.e.FrameworkEndpointHandlerMapping : Looking up handler method for path /logout
2016-04-18 19:22:06.205 DEBUG 5319 --- [io-9999-exec-10] .s.o.p.e.FrameworkEndpointHandlerMapping : Did not find handler method for [/logout]
</code></pre>

<p>And the following <code>request</code> header in Firefox:  </p>

<pre><code>Host: localhost:9999
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101 Firefox/38.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Origin: http://localhost:8080
Access-Control-Request-Method: POST
Access-Control-Request-Headers: content-type,x-requested-with
Connection: keep-alive
Pragma: no-cache
Cache-Control: no-cache
</code></pre>

<p>Along with the following <code>response</code> header in Firefox:  </p>

<pre><code>Allow: GET, HEAD, POST, PUT, DELETE, TRACE, OPTIONS, PATCH
Content-Length: 20
Date: Tue, 19 Apr 2016 02:22:06 GMT
Server: Apache-Coyote/1.1
X-Application-Context: application:9999
</code></pre>

<p>I then tried changing the <code>configure(http)</code> method of <code>LoginConfig</code> to become:  </p>

<pre><code>@Override
protected void configure(HttpSecurity http) throws Exception {
    // @formatter:off
    http
        .formLogin().loginPage(""/login"").permitAll()
        .and()
        .requestMatchers().antMatchers(""/login"", ""/oauth/authorize"", ""/oauth/confirm_access"", ""/logout"", ""/oauth/revoke-token"")
        .and()
        .authorizeRequests()
        .anyRequest().authenticated()
        // @formatter:on
        .and()
        .csrf()
        .ignoringAntMatchers(""/logout"");
}
</code></pre>

<p>But the result is the following Spring Boot DEBUG log for the <code>authserver</code> app:  </p>

<pre><code>2016-04-19 10:12:13.545 DEBUG 4593 --- [nio-9999-exec-2] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/css/**']
2016-04-19 10:12:13.546 DEBUG 4593 --- [nio-9999-exec-2] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/css/**'
2016-04-19 10:12:13.546 DEBUG 4593 --- [nio-9999-exec-2] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/js/**']
2016-04-19 10:12:13.546 DEBUG 4593 --- [nio-9999-exec-2] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/js/**'
2016-04-19 10:12:13.546 DEBUG 4593 --- [nio-9999-exec-2] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/images/**']
2016-04-19 10:12:13.546 DEBUG 4593 --- [nio-9999-exec-2] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/images/**'
2016-04-19 10:12:13.546 DEBUG 4593 --- [nio-9999-exec-2] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/**/favicon.ico']
2016-04-19 10:12:13.546 DEBUG 4593 --- [nio-9999-exec-2] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/**/favicon.ico'
2016-04-19 10:12:13.546 DEBUG 4593 --- [nio-9999-exec-2] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/error']
2016-04-19 10:12:13.546 DEBUG 4593 --- [nio-9999-exec-2] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/error'
2016-04-19 10:12:13.546 DEBUG 4593 --- [nio-9999-exec-2] o.s.s.web.util.matcher.OrRequestMatcher  : No matches found
2016-04-19 10:12:13.546 DEBUG 4593 --- [nio-9999-exec-2] o.s.s.w.u.matcher.AntPathRequestMatcher  : Request '/logout' matched by universal pattern '/**'
2016-04-19 10:12:13.546 DEBUG 4593 --- [nio-9999-exec-2] o.s.security.web.FilterChainProxy        : /logout has an empty filter list
2016-04-19 10:12:13.547 DEBUG 4593 --- [nio-9999-exec-2] .s.o.p.e.FrameworkEndpointHandlerMapping : Looking up handler method for path /logout
2016-04-19 10:12:13.548 DEBUG 4593 --- [nio-9999-exec-2] .s.o.p.e.FrameworkEndpointHandlerMapping : Did not find handler method for [/logout]
</code></pre>

<hr>

<p><strong>REPRODUCING THE PROBLEM ON YOUR MACHINE:</strong>  </p>

<hr>

<p>To reproduce the problem on your own machine, you can either:  </p>

<p>1.) git clone the original sample app at the link at the top of the OP and then make the changes shown above, or </p>

<p>2.) Download <a href=""https://jumpshare.com/v/ELVSYNXNeUKV6Xl1Droq"" rel=""nofollow"">the zipped version of the app as it exists on my devbox including all the changes from the OP at this file sharing link</a>, and then:  </p>

<p>2.a.) Untar the app.  </p>

<p>2.b.) Navigate a terminal window to <code>oauth2/resource</code> and <code>mvn spring-boot:run</code>.  Then navigate a second terminal window to <code>oauth2/authserver</code> and type <code>mvn spring-boot:run</code>.  Then navigate a third terminal window to <code>oauth2/ui</code> and type <code>mvn spring-boot:run</code>.  </p>

<p>2.c.) Navigate the web browser to <code>http : // localhost:8080</code>, then click <code>login</code>, then enter <code>user</code> for <code>username</code> and <code>password</code> for <code>password</code>.  After you have been authenticated, click the <code>logout</code> button to reproduce the 403 error.  Use the Network tab of your browser's developer tools to examine the browser activity.  View the Spring Boot logs in the terminal that is running the <code>authserver</code> app to see Spring's activity.  </p>

<p>3.) Either import the three folders into eclipse (or another IDE) as existing maven projects, or open the code files with a text editor to edit before repeating the relaunch and retesting in step 2.  </p>

<p><strong>What else can I provide to help isolate the solution?</strong></p>
",807797,,807797,,2016-04-20 19:42:10,2016-08-25 8:37:48,Request 'OPTIONS /logout' doesn't match 'POST /logout,<spring><spring-security><spring-boot><spring-cloud><spring-oauth2>,1,6,2,,
Spring,36899386,1,37018939,,2016,,9,1266,"<p>Complete code for a Spring OAuth2 implementation of multi-factor authentication has been uploaded to <a href=""https://jumpshare.com/v/nal2OlUqVpMFzMgqeplw"" rel=""nofollow noreferrer"">a file sharing site that you can download by clicking on this link</a>. Instructions below explain how to use the link to recreate the current problem on any computer. <strong>A 500 point bounty is offered.</strong>  </p>

<p><hr/> 
<strong>THE CURRENT ERROR:</strong>  </p>

<hr/>  

<p>An error is being triggered when a user tries to authenticate using two factor authentication in <a href=""https://jumpshare.com/v/nal2OlUqVpMFzMgqeplw"" rel=""nofollow noreferrer"">the Spring Boot OAuth2 app from the link in the preceding paragraph</a>. The error is thrown at the point in the process when the app should serve up a second page asking the user for a pin code to confirm the user's identity.  </p>

<p><strong>Given that a null client is triggering this error, the problem seems to be how to connect a <code>ClientDetailsService</code> to a <code>Custom OAuth2RequestFactory</code> in Spring Boot OAuth2.</strong>  </p>

<p>The <a href=""https://jumpshare.com/v/8BMxbxWd2SsiVmS2Yl1I"" rel=""nofollow noreferrer"">entire debug log can be read at a file sharing site by clicking on this link</a>.  The complete stack trace in the logs contains only one reference to code that is actually in the app, and that line of code is:  </p>

<pre><code>AuthorizationRequest authorizationRequest =  
oAuth2RequestFactory.createAuthorizationRequest(paramsFromRequest(request));
</code></pre>

<p>The error thrown in the debug logs is:  </p>

<pre><code>org.springframework.security.oauth2.provider.NoSuchClientException:  
No client with requested id: null  
</code></pre>

<p><hr/>
<strong>CONTROL FLOW WHEN ERROR IS THROWN:</strong></p>

<hr/>  

<p>I created the following flowchart to illustrate the intended flow of multi-factor authentication requests in <a href=""https://stackoverflow.com/questions/30319666/two-factor-authentication-with-spring-security-oauth2#31425986"">@James' suggested implementation</a>:  </p>

<p><img src=""https://s32.postimg.org/5sahbqvrp/2_FA_OAuth_Flow.gif"">  </p>

<p>In the preceding flowchart, the current error is being thrown at some point between the <strong>Username &amp; Password View</strong> and the <strong>GET /secure/two_factor_authenticated</strong> steps.  </p>

<p><strong>The solution to this OP is limited in scope to the FIRST PASS that 1.) travels through the <code>/oauth/authorize</code> endpoint and then 2.) returns back to the <code>/oauth/authorize</code> endpoint via <code>TwoFactorAuthenticationController</code>.</strong>   </p>

<p>So we simply want to resolve the <code>NoSuchClientException</code> while also demonstrating that the client has been successfully granted <code>ROLE_TWO_FACTOR_AUTHENTICATED</code> in the <code>POST /secure/two_factor_authenticated</code>.  Given that the subsequent steps are boiler-plate, it is acceptable for the flow to demonstrably break in the <strong>SECOND PASS</strong> entry into <code>CustomOAuth2RequestFactory</code>, as long as the user enters the <strong>SECOND PASS</strong> with all the artifacts of successfully having completed the <strong>FIRST PASS</strong>.  The <strong>SECOND PASS</strong> can be a separate question as long as we successfully resolve the <strong>FIRST PASS</strong> here.  </p>

<p><hr/>
<strong>RELEVANT CODE EXCERPTS:</strong>  </p>

<hr/>  

<p>Here is the code for the <code>AuthorizationServerConfigurerAdapter</code>, where I attempt to set up the connection:  </p>

<pre><code>@Configuration
@EnableAuthorizationServer
protected static class OAuth2AuthorizationConfig extends AuthorizationServerConfigurerAdapter {

    @Autowired
    private AuthenticationManager authenticationManager;

    @Autowired//ADDED AS A TEST TO TRY TO HOOK UP THE CUSTOM REQUEST FACTORY
    private ClientDetailsService clientDetailsService;

    @Autowired//Added per: https://stackoverflow.com/questions/30319666/two-factor-authentication-with-spring-security-oauth2
    private CustomOAuth2RequestFactory customOAuth2RequestFactory;

    //THIS NEXT BEAN IS A TEST
    @Bean CustomOAuth2RequestFactory customOAuth2RequestFactory(){
        return new CustomOAuth2RequestFactory(clientDetailsService);
    }

    @Bean
    public JwtAccessTokenConverter jwtAccessTokenConverter() {
        JwtAccessTokenConverter converter = new JwtAccessTokenConverter();
        KeyPair keyPair = new KeyStoreKeyFactory(
                    new ClassPathResource(""keystore.jks""), ""foobar"".toCharArray()
                )
                .getKeyPair(""test"");
        converter.setKeyPair(keyPair);
        return converter;
    }

    @Override
    public void configure(ClientDetailsServiceConfigurer clients) throws Exception {
        clients.inMemory()
                .withClient(""acme"")//API: http://docs.spring.io/spring-security/oauth/apidocs/org/springframework/security/oauth2/config/annotation/builders/ClientDetailsServiceBuilder.ClientBuilder.html
                    .secret(""acmesecret"")
                    .authorizedGrantTypes(""authorization_code"", ""refresh_token"", ""password"")
                    .scopes(""openid"");
    }

    @Override
    public void configure(AuthorizationServerEndpointsConfigurer endpoints) throws Exception {
        endpoints//API: http://docs.spring.io/spring-security/oauth/apidocs/org/springframework/security/oauth2/config/annotation/web/configurers/AuthorizationServerEndpointsConfigurer.html
            .authenticationManager(authenticationManager)
            .accessTokenConverter(jwtAccessTokenConverter())
            .requestFactory(customOAuth2RequestFactory);//Added per: https://stackoverflow.com/questions/30319666/two-factor-authentication-with-spring-security-oauth2
    }

    @Override
    public void configure(AuthorizationServerSecurityConfigurer oauthServer) throws Exception {
        oauthServer//API: http://docs.spring.io/spring-security/oauth/apidocs/org/springframework/security/oauth2/config/annotation/web/configurers/AuthorizationServerSecurityConfigurer.html
            .tokenKeyAccess(""permitAll()"")
            .checkTokenAccess(""isAuthenticated()"");
    }

}
</code></pre>

<p>Here is the code for the <code>TwoFactorAuthenticationFilter</code>, which contains the code above that is triggering the error:  </p>

<pre><code>package demo;

import java.io.IOException;
import java.util.Collection;
import java.util.HashMap;
import java.util.Map;
import java.util.Map.Entry;

import javax.servlet.FilterChain;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.core.GrantedAuthority;
import org.springframework.security.core.context.SecurityContextHolder;
import org.springframework.security.oauth2.provider.AuthorizationRequest;
import org.springframework.security.oauth2.provider.ClientDetailsService;
import org.springframework.security.oauth2.provider.OAuth2RequestFactory;
import org.springframework.security.oauth2.provider.request.DefaultOAuth2RequestFactory;
import org.springframework.security.web.DefaultRedirectStrategy;
import org.springframework.security.web.RedirectStrategy;
import org.springframework.web.filter.OncePerRequestFilter;
import org.springframework.web.servlet.support.ServletUriComponentsBuilder;

//This class is added per: https://stackoverflow.com/questions/30319666/two-factor-authentication-with-spring-security-oauth2
/**
 * Stores the oauth authorizationRequest in the session so that it can
 * later be picked by the {@link com.example.CustomOAuth2RequestFactory}
 * to continue with the authoriztion flow.
 */
public class TwoFactorAuthenticationFilter extends OncePerRequestFilter {

    private RedirectStrategy redirectStrategy = new DefaultRedirectStrategy();
    private OAuth2RequestFactory oAuth2RequestFactory;
    //These next two are added as a test to avoid the compilation errors that happened when they were not defined.
    public static final String ROLE_TWO_FACTOR_AUTHENTICATED = ""ROLE_TWO_FACTOR_AUTHENTICATED"";
    public static final String ROLE_TWO_FACTOR_AUTHENTICATION_ENABLED = ""ROLE_TWO_FACTOR_AUTHENTICATION_ENABLED"";

    @Autowired
    public void setClientDetailsService(ClientDetailsService clientDetailsService) {
        oAuth2RequestFactory = new DefaultOAuth2RequestFactory(clientDetailsService);
    }

    private boolean twoFactorAuthenticationEnabled(Collection&lt;? extends GrantedAuthority&gt; authorities) {
        return authorities.stream().anyMatch(
            authority -&gt; ROLE_TWO_FACTOR_AUTHENTICATION_ENABLED.equals(authority.getAuthority())
    );
    }

    @Override
    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)
            throws ServletException, IOException {
        // Check if the user hasn't done the two factor authentication.
        if (AuthenticationUtil.isAuthenticated() &amp;&amp; !AuthenticationUtil.hasAuthority(ROLE_TWO_FACTOR_AUTHENTICATED)) {
            AuthorizationRequest authorizationRequest = oAuth2RequestFactory.createAuthorizationRequest(paramsFromRequest(request));
            /* Check if the client's authorities (authorizationRequest.getAuthorities()) or the user's ones
               require two factor authenticatoin. */
            if (twoFactorAuthenticationEnabled(authorizationRequest.getAuthorities()) ||
                    twoFactorAuthenticationEnabled(SecurityContextHolder.getContext().getAuthentication().getAuthorities())) {
                // Save the authorizationRequest in the session. This allows the CustomOAuth2RequestFactory
                // to return this saved request to the AuthenticationEndpoint after the user successfully
                // did the two factor authentication.
               request.getSession().setAttribute(CustomOAuth2RequestFactory.SAVED_AUTHORIZATION_REQUEST_SESSION_ATTRIBUTE_NAME, authorizationRequest);

                // redirect the the page where the user needs to enter the two factor authentiation code
                redirectStrategy.sendRedirect(request, response,
                        ServletUriComponentsBuilder.fromCurrentContextPath()
                            .path(TwoFactorAuthenticationController.PATH)
                            .toUriString());
                return;
            }
        }

        filterChain.doFilter(request, response);
    }

    private Map&lt;String, String&gt; paramsFromRequest(HttpServletRequest request) {
        Map&lt;String, String&gt; params = new HashMap&lt;&gt;();
        for (Entry&lt;String, String[]&gt; entry : request.getParameterMap().entrySet()) {
            params.put(entry.getKey(), entry.getValue()[0]);
        }
        return params;
    }
} 
</code></pre>

<hr/>

<p><strong>RE-CREATING THE PROBLEM ON YOUR COMPUTER:</strong>  </p>

<hr/>  

<p>You can recreate the problem on any computer in only a few minutes by following these simple steps:  </p>

<p>1.) Download the <a href=""https://jumpshare.com/v/nal2OlUqVpMFzMgqeplw"" rel=""nofollow noreferrer"">zipped version of the app from a file sharing site by clicking on this link</a>.  </p>

<p>2.) Unzip the app by typing: <code>tar -zxvf oauth2.tar(1).gz</code>  </p>

<p>3.) launch the <code>authserver</code> app by navigating to <code>oauth2/authserver</code> and then typing <code>mvn spring-boot:run</code>.  </p>

<p>4.) launch the <code>resource</code> app by navigating to <code>oauth2/resource</code> and then typing <code>mvn spring-boot:run</code>  </p>

<p>5.) launch the <code>ui</code> app by navigating to <code>oauth2/ui</code> and then typing <code>mvn spring-boot:run</code>  </p>

<p>6.) Open a web browser and navigate to <code>http : // localhost : 8080</code>  </p>

<p>7.) Click <code>Login</code> and then enter <code>Frodo</code> as the user and <code>MyRing</code> as the password, and click to submit.  <strong>This will trigger the error shown above.</strong>  </p>

<p>You can view the complete source code by: </p>

<p>a.) importing the maven projects into your IDE, or by  </p>

<p>b.) navigating within the unzipped directories and opening with a text editor.  </p>

<p>Note:  The code in the file sharing link above is a combination of <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2"" rel=""nofollow noreferrer"">the Spring Boot OAuth2 GitHub sample at this link</a>, and the <a href=""https://stackoverflow.com/questions/30319666/two-factor-authentication-with-spring-security-oauth2#31425986"">suggestions for 2 Factor Authentication offered by @James at this link</a>.  The only changes to the Spring Boot GitHub sample have been in the <code>authserver</code> app, specifically in <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2/authserver/src/main"" rel=""nofollow noreferrer""><code>authserver/src/main/java</code></a> and in <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2/authserver/src/main"" rel=""nofollow noreferrer""><code>authserver/src/main/resources/templates</code></a>.  </p>

<p><hr/>
<strong>NARROWING THE PROBLEM:</strong><br>
<hr/><br>
Per @AbrahamGrief's suggestion, I added a <code>FilterConfigurationBean</code>, which resolved the <code>NoSuchClientException</code>.  But the OP asks how to complete the <strong>FIRST PASS</strong> through the control flow in the diagram for a <strong>500 point bounty</strong>.  </p>

<p>I then narrowed the problem by setting <code>ROLE_TWO_FACTOR_AUTHENTICATION_ENABLED</code> in <code>Users.loadUserByUername()</code> as follows:  </p>

<pre><code>@Override
public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {
    String password;
    List&lt;GrantedAuthority&gt; auth = AuthorityUtils.commaSeparatedStringToAuthorityList(""ROLE_USER"");
    if (username.equals(""Samwise"")) {//ROLE_TWO_FACTOR_AUTHENTICATION_ENABLED will need to come from the resource, NOT the user
        auth = AuthorityUtils.commaSeparatedStringToAuthorityList(""ROLE_HOBBIT, ROLE_TWO_FACTOR_AUTHENTICATION_ENABLED"");
        password = ""TheShire"";
    }
    else if (username.equals(""Frodo"")){//ROLE_TWO_FACTOR_AUTHENTICATION_ENABLED will need to come from the resource, NOT the user
        auth = AuthorityUtils.commaSeparatedStringToAuthorityList(""ROLE_HOBBIT, ROLE_TWO_FACTOR_AUTHENTICATION_ENABLED"");
        password = ""MyRing"";
    }
    else{throw new UsernameNotFoundException(""Username was not found. "");}
    return new org.springframework.security.core.userdetails.User(username, password, auth);
}
</code></pre>

<p>This eliminates the need to configure clients and resources, so that the current problem remains narrow.  However, the next roadblock is that Spring Security is rejecting the user's request for <code>/security/two_factor_authentication</code>.  <strong>What further changes need to be made to complete the FIRST PASS through the control flow, so that the <code>POST /secure/two_factor_authentication</code> can SYSO <code>ROLE_TWO_FACTOR_AUTHENTICATED</code>?</strong></p>
",807797,,-1,,2017-05-23 11:45:25,2016-05-04 20:54:53,null client in OAuth2 Multi-Factor Authentication,<spring><spring-mvc><spring-security><spring-boot><spring-security-oauth2>,1,0,7,,
Spring,41092751,1,41092831,,2016,,35,19035,"<p>I'm experimenting with examples from this official Spring <a href=""https://spring.io/guides/gs/async-method/"" rel=""noreferrer"">tutorials</a> and there is a dependency on this code:<br>
<a href=""https://github.com/spring-guides/gs-async-method/tree/master/complete"" rel=""noreferrer"">https://github.com/spring-guides/gs-async-method/tree/master/complete</a></p>

<p>If you look at the code on <em>AppRunner.java</em>  class, I have 2 issues:</p>

<p>1) When server is starting, if I put a breakpoint in this class's constructor, seems like in the constructor, the <em>GitHubLookupService</em> is provided by spring, using the <strong>@Service</strong> bean that was configured. BUT, there was no <code>@Autowired</code> annotation on the constructor, so how in the world this constructor get called with the right dependency?  It was supposed to be <code>null</code>.</p>

<p>Is it an automatic assumption of <strong>Spring Boot</strong>?<br>
Does Spring see ""private field + constructor argument, and it assumes it should look for an appropriate bean?<br>
Is it <strong>Spring Framework</strong> or <strong>Spring boot</strong>?<br>
Am I missing something?</p>

<p>2) As I remember, it was mendatory to provide <em>default constructor</em> to beans / service etc. How come this class (AppRunner) doesn't have a default constructor?
How does Spring knows that it should run the constructor with the argument?
Is it because it is the only constructor?</p>
",1652248,,814702,,2018-01-23 16:14:54,2018-01-23 16:14:54,Spring injects dependencies in constructor without @Autowired annotation,<spring><spring-boot><dependency-injection><autowired>,1,0,6,,
Spring,43374658,1,43678846,,2017,,1,897,"<p>I am using <code>@EnableOauth2Sso</code> following an architecture similar as the one described in Spring's <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2-vanilla"" rel=""nofollow noreferrer"">oauth2 tutorial</a>: an auth server, a zuul proxy that enables the sso, a separated UI application etc.</p>

<pre><code>Auth server   ----  Resource Server (Zuul app) ---- Angular UI App
</code></pre>

<p>The problem is that when the UI logs out against the resource server it successfully deletes the resource server JSESSIONID, then the user is redirected to a home page. When the user wants to login again, he's redirected to the auth server but instead of asking for the user+password, it considers he's still logged. The auth server JSESSIONID is still there and wasn't affected by the previous Resource Server lougout.</p>

<p>How could I also logout from the auth server?</p>
",1729795,,,,,2017-04-28 11:12:59,Spring Oauth2 SSO - Unable to logout from the Auth server,<angularjs><spring><spring-security><oauth-2.0><spring-security-oauth2>,2,0,2,,
Spring,20101448,1,20102983,,2013,,1,2420,"<p>I am utterly confused by something I expected to work just out of the box. So either I am doing something totally wrong or this is just a misunderstanding.</p>

<p>I am trying to have a getter/setter annotation in a JPA Entity class. I sticked to an example I found on the JPA wiki (s. <a href=""http://en.wikibooks.org/wiki/Java_Persistence/Basic_Attributes#Conversion"" rel=""nofollow"">http://en.wikibooks.org/wiki/Java_Persistence/Basic_Attributes#Conversion</a>). The example looks as follows:</p>

<pre><code>    @Entity
    public class Employee {
        ...
        private boolean isActive;
        ...
        @Transient
        public boolean getIsActive() {
            return isActive;
        }
        public void setIsActive(boolean isActive) {
            this.isActive = isActive;
        }
        @Basic
        private String getIsActiveValue() {
            if (isActive) {
                return ""T"";
            } else {
                return ""F"";
            }
        }
        private void setIsActiveValue(String isActive) {
            this.isActive = ""T"".equals(isActive);
        }
    }
</code></pre>

<p>I took the clearest and cleanest spring-data-jpa example I could find: <a href=""http://spring.io/guides/gs/accessing-data-jpa/"" rel=""nofollow"">http://spring.io/guides/gs/accessing-data-jpa/</a>. </p>

<p>I checked it out from git and changed their example entity class (s. <a href=""https://github.com/spring-guides/gs-accessing-data-jpa/blob/master/complete/src/main/java/hello/Customer.java"" rel=""nofollow"">https://github.com/spring-guides/gs-accessing-data-jpa/blob/master/complete/src/main/java/hello/Customer.java</a>) to look as follows:</p>

<pre><code>@Entity
public class Customer {

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    private long id;
    private String firstName;
    private String lastName;

    protected Customer() {}

    public Customer(String firstName, String lastName) {
        this.firstName = firstName;
        this.lastName = lastName;
    }

    @Override
    public String toString() {
        return String.format(
                ""Customer[id=%d, firstName='%s', lastName='%s']"",
                id, firstName, lastName);
    }

    @Transient
    private boolean isActive;

    @Transient
    public boolean getIsActive() {
        return isActive;
    }
    public void setIsActive(boolean isActive) {
        this.isActive = isActive;
    }

    @Column
    private String getIsActiveValue() {
        if (isActive) {
            return ""T"";
        } else {
            return ""F"";
        }
    }
    private void setIsActiveValue(String isActive) {
        this.isActive = ""T"".equals(isActive);
    }

}
</code></pre>

<p>Now nothing changes. The respective String-Field does not get created. The line from the log creating the database table still looks as follows:</p>

<pre><code>17:11:10.540 [main] DEBUG o.h.tool.hbm2ddl.SchemaUpdate - create table Customer (id bigint generated by default as identity, firstName varchar(255), lastName varchar(255), primary key (id))
</code></pre>

<p>I have absolutely no idea on what could be the reason for this. I could find not documentation that spring-data-jpa would not allow for annotations on getters. </p>

<p>Any help would be very, very appreciated!</p>
",2678817,,,,,2013-11-20 23:34:11,@Column or @Basic JPA annotations ignored in spring-data-jpa schema creation,<java><spring><jpa><spring-data><spring-data-jpa>,2,0,,,
Spring,19482372,1,19527771,,2013,,1,4863,"<p>The test method below appear in a <a href=""https://github.com/spring-guides/tut-web/blob/master/5/complete/src/test/java/com/yummynoodlebar/web/controller/CheckoutIntegrationTest.java"" rel=""nofollow"">spring-guide tutorial</a>.
Is there a less convoluted syntax to write this test or how can I break it apart into smaller chunks?</p>

<pre><code>verify(orderService).createOrder(
      org.mockito.Matchers.&lt;CreateOrderEvent&gt;argThat(
        allOf( org.hamcrest.Matchers.&lt;CreateOrderEvent&gt;
            hasProperty(""details"",
                hasProperty(""dateTimeOfSubmission"", notNullValue())),

        org.hamcrest.Matchers.&lt;CreateOrderEvent&gt;hasProperty(""details"",
                hasProperty(""name"", equalTo(CUSTOMER_NAME))),

        org.hamcrest.Matchers.&lt;CreateOrderEvent&gt;hasProperty(""details"",
                hasProperty(""address1"", equalTo(ADDRESS1))),
        org.hamcrest.Matchers.&lt;CreateOrderEvent&gt;hasProperty(""details"",
                hasProperty(""postcode"", equalTo(POST_CODE)))
    )));
</code></pre>
",617552,,,,,2013-10-22 20:33:40,How do I simplify mockito/hamcrest argument matchers in test method?,<java><spring><unit-testing><mockito><hamcrest>,2,0,,,
Spring,53816713,1,,,2018,,1,81,"<p>I've installed it and I've set the path (C:\Program Files\Git\bin\git.exe). i've also tried this tutorial <a href=""https://docs.microsoft.com/sl-si/azure/jenkins/install-jenkins-solution-template"" rel=""nofollow noreferrer"">https://docs.microsoft.com/sl-si/azure/jenkins/install-jenkins-solution-template</a> but it also gives me this console output.</p>

<p>I've installed it, I've set the git path, I still get this. I've been stuck here for a couple days, every build I make gives me a similar error message.
i use a windows 10 computer, and i have a linux VM on azure. </p>

<p>The Free Swap Space on my on the azure node in jenkins says its on 0B, but there is 26,99GB of Free Temp Space. Is maybie that the problem? </p>

<p>Anyway this is my console output for the tutorial i've completed: </p>

<pre><code>Started by user admin
Building remotely on testadminjenkinsazure115f10 (ubuntu) in workspace /home/Jenkinsadmin/workspace/mySampleApp
[WS-CLEANUP] Deleting project workspace...
[WS-CLEANUP] Deferred wipeout is used...
[WS-CLEANUP] Done
Cloning the remote Git repository
Cloning repository https://github.com/spring-guides/gs-spring-boot.git
 &gt; C:\Program Files\Git\bin\git.exe init /home/Jenkinsadmin/workspace/mySampleApp # timeout=10
ERROR: Error cloning remote repo 'origin'
hudson.plugins.git.GitException: Could not init /home/Jenkinsadmin/workspace/mySampleApp
    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl$5.execute(CliGitAPIImpl.java:787)
    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl$2.execute(CliGitAPIImpl.java:579)
    at org.jenkinsci.plugins.gitclient.RemoteGitImpl$CommandInvocationHandler$1.call(RemoteGitImpl.java:153)
    at org.jenkinsci.plugins.gitclient.RemoteGitImpl$CommandInvocationHandler$1.call(RemoteGitImpl.java:146)
    at hudson.remoting.UserRequest.perform(UserRequest.java:212)
    at hudson.remoting.UserRequest.perform(UserRequest.java:54)
    at hudson.remoting.Request$2.run(Request.java:369)
    at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
    at java.util.concurrent.FutureTask.run(FutureTask.java:266)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
    at java.lang.Thread.run(Thread.java:748)
    Suppressed: hudson.remoting.Channel$CallSiteStackTrace: Remote call to testadminjenkinsazure115f10
        at hudson.remoting.Channel.attachCallSiteStackTrace(Channel.java:1741)
        at hudson.remoting.UserRequest$ExceptionResponse.retrieve(UserRequest.java:357)
        at hudson.remoting.Channel.call(Channel.java:955)
        at org.jenkinsci.plugins.gitclient.RemoteGitImpl$CommandInvocationHandler.execute(RemoteGitImpl.java:146)
        at sun.reflect.GeneratedMethodAccessor870.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.jenkinsci.plugins.gitclient.RemoteGitImpl$CommandInvocationHandler.invoke(RemoteGitImpl.java:132)
        at com.sun.proxy.$Proxy222.execute(Unknown Source)
        at hudson.plugins.git.GitSCM.retrieveChanges(GitSCM.java:1146)
        at hudson.plugins.git.GitSCM.checkout(GitSCM.java:1186)
        at hudson.scm.SCM.checkout(SCM.java:504)
        at hudson.model.AbstractProject.checkout(AbstractProject.java:1208)
        at hudson.model.AbstractBuild$AbstractBuildExecution.defaultCheckout(AbstractBuild.java:574)
        at jenkins.scm.SCMCheckoutStrategy.checkout(SCMCheckoutStrategy.java:86)
        at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:499)
        at hudson.model.Run.execute(Run.java:1810)
        at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:43)
        at hudson.model.ResourceController.execute(ResourceController.java:97)
        at hudson.model.Executor.run(Executor.java:429)
Caused by: hudson.plugins.git.GitException: Error performing command: C:\Program Files\Git\bin\git.exe init /home/Jenkinsadmin/workspace/mySampleApp
    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandIn(CliGitAPIImpl.java:2023)
    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandIn(CliGitAPIImpl.java:1984)
    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandIn(CliGitAPIImpl.java:1980)
    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommand(CliGitAPIImpl.java:1612)
    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl$5.execute(CliGitAPIImpl.java:785)
    ... 11 more
Caused by: java.io.IOException: Cannot run program ""C:\Program Files\Git\bin\git.exe"" (in directory ""/home/Jenkinsadmin/workspace/mySampleApp""): error=2, No such file or directory
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:1048)
    at hudson.Proc$LocalProc.&lt;init&gt;(Proc.java:249)
    at hudson.Proc$LocalProc.&lt;init&gt;(Proc.java:218)
    at hudson.Launcher$LocalLauncher.launch(Launcher.java:936)
    at hudson.Launcher$ProcStarter.start(Launcher.java:455)
    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandIn(CliGitAPIImpl.java:2012)
    ... 15 more
Caused by: java.io.IOException: error=2, No such file or directory
    at java.lang.UNIXProcess.forkAndExec(Native Method)
    at java.lang.UNIXProcess.&lt;init&gt;(UNIXProcess.java:247)
    at java.lang.ProcessImpl.start(ProcessImpl.java:134)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:1029)
    ... 20 more
ERROR: Error cloning remote repo 'origin'
Finished: FAILURE
</code></pre>
",10712728,,3957754,,2018-12-21 3:31:03,2018-12-22 13:37:46,How deploy source code as an application in a linux virtual machine on Azure using Jenkins?,<git><azure><jenkins><virtual-machine><jenkins-plugins>,2,5,,,
Spring,24539899,1,24546786,,2014,,1,5245,"<p>I'm following <a href=""https://spring.io/guides/tutorials/rest/"" rel=""nofollow"">this</a> Spring tutorial and I'm stuck on the first step.</p>

<p>I cloned the tutorial repository and tried to run my first Gradle tasks:</p>

<pre><code>$ git clone https://github.com/spring-guides/tut-rest.git
$ cd tut-rest/initial
$ ./gradlew clean test --stacktrace
</code></pre>

<p>This is the error that I got:</p>

<pre><code>org.gradle.api.GradleScriptException: A problem occurred evaluating root project 'initial'.
at org.gradle.groovy.scripts.internal.DefaultScriptRunnerFactory$ScriptRunnerImpl.run(DefaultScriptRunnerFactory.java:54)
at org.gradle.configuration.DefaultScriptPluginFactory$ScriptPluginImpl.apply(DefaultScriptPluginFactory.java:187)
at org.gradle.configuration.project.BuildScriptProcessor.execute(BuildScriptProcessor.java:39)
at org.gradle.configuration.project.BuildScriptProcessor.execute(BuildScriptProcessor.java:26)
at org.gradle.configuration.project.ConfigureActionsProjectEvaluator.evaluate(ConfigureActionsProjectEvaluator.java:34)
at org.gradle.configuration.project.LifecycleProjectEvaluator.evaluate(LifecycleProjectEvaluator.java:55)
at org.gradle.api.internal.project.AbstractProject.evaluate(AbstractProject.java:470)
at org.gradle.api.internal.project.AbstractProject.evaluate(AbstractProject.java:79)
at org.gradle.configuration.DefaultBuildConfigurer.configure(DefaultBuildConfigurer.java:31)
at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:128)
at org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:105)
at org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:85)
at org.gradle.launcher.exec.InProcessBuildActionExecuter$DefaultBuildController.run(InProcessBuildActionExecuter.java:81)
at org.gradle.launcher.cli.ExecuteBuildAction.run(ExecuteBuildAction.java:33)
at org.gradle.launcher.cli.ExecuteBuildAction.run(ExecuteBuildAction.java:24)
at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:39)
at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:29)
at org.gradle.launcher.cli.RunBuildAction.run(RunBuildAction.java:50)
at org.gradle.internal.Actions$RunnableActionAdapter.execute(Actions.java:171)
at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:237)
at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:210)
at org.gradle.launcher.cli.JavaRuntimeValidationAction.execute(JavaRuntimeValidationAction.java:35)
at org.gradle.launcher.cli.JavaRuntimeValidationAction.execute(JavaRuntimeValidationAction.java:24)
at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:206)
at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:169)
at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:33)
at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:22)
at org.gradle.launcher.Main.doAction(Main.java:33)
at org.gradle.launcher.bootstrap.EntryPoint.run(EntryPoint.java:45)
at org.gradle.launcher.bootstrap.ProcessBootstrap.runNoExit(ProcessBootstrap.java:54)
at org.gradle.launcher.bootstrap.ProcessBootstrap.run(ProcessBootstrap.java:35)
at org.gradle.launcher.GradleMain.main(GradleMain.java:23)
at org.gradle.wrapper.BootstrapMainStarter.start(BootstrapMainStarter.java:33)
at org.gradle.wrapper.WrapperExecutor.execute(WrapperExecutor.java:130)
at org.gradle.wrapper.GradleWrapperMain.main(GradleWrapperMain.java:48)

Caused by: java.lang.ClassCastException: java.lang.String cannot be cast to org.gradle.api.artifacts.Configuration
at org.gradle.api.artifacts.Configuration$Namer.determineName(Configuration.java:87)
at org.gradle.api.internal.DefaultNamedDomainObjectCollection.add(DefaultNamedDomainObjectCollection.java:70)
at java_util_Set$add.call(Unknown Source)
at org.springframework.build.gradle.propdep.PropDepsPlugin.addConfiguration(PropDepsPlugin.groovy:54)
at org.springframework.build.gradle.propdep.PropDepsPlugin.this$2$addConfiguration(PropDepsPlugin.groovy)
at org.springframework.build.gradle.propdep.PropDepsPlugin$this$2$addConfiguration.callCurrent(Unknown Source)
at org.springframework.build.gradle.propdep.PropDepsPlugin.apply(PropDepsPlugin.groovy:41)
at org.springframework.build.gradle.propdep.PropDepsPlugin.apply(PropDepsPlugin.groovy)
at org.gradle.api.internal.plugins.DefaultPluginContainer.providePlugin(DefaultPluginContainer.java:110)
at org.gradle.api.internal.plugins.DefaultPluginContainer.addPluginInternal(DefaultPluginContainer.java:69)
at org.gradle.api.internal.plugins.DefaultPluginContainer.apply(DefaultPluginContainer.java:35)
at org.gradle.api.internal.plugins.DefaultObjectConfigurationAction.applyPlugin(DefaultObjectConfigurationAction.java:117)
at org.gradle.api.internal.plugins.DefaultObjectConfigurationAction.access$200(DefaultObjectConfigurationAction.java:36)
at org.gradle.api.internal.plugins.DefaultObjectConfigurationAction$3.run(DefaultObjectConfigurationAction.java:85)
at org.gradle.api.internal.plugins.DefaultObjectConfigurationAction.execute(DefaultObjectConfigurationAction.java:130)
at org.gradle.api.internal.project.AbstractPluginAware.apply(AbstractPluginAware.java:41)
at org.gradle.api.Project$apply$0.call(Unknown Source)
at org.gradle.api.internal.project.ProjectScript.apply(ProjectScript.groovy:34)
at org.gradle.api.Script$apply$0.callCurrent(Unknown Source)
at build_2adlb8a21ubaha3t8bdi7pcekq.run(/home/b/Repos/tut-rest/initial/build.gradle:6)
at org.gradle.groovy.scripts.internal.DefaultScriptRunnerFactory$ScriptRunnerImpl.run(DefaultScriptRunnerFactory.java:52)
... 34 more
</code></pre>

<p>All I changed in the codebase is that I updated Gradle wrapper from version 1.6 to version 2.0, because using 1.6 was giving me some warning, but I was getting the same casting error before the upgrade.</p>

<p>How do I solve this error?</p>
",3799139,,,,,2014-07-20 10:36:41,Gradle error: java.lang.String cannot be cast to org.gradle.api.artifacts.Configuration,<java><spring><gradle>,2,2,,,
Spring,40775533,1,40816259,,2016,,1,628,"<p>I followed <a href=""https://spring.io/guides/tutorials/spring-boot-oauth2/#_social_login_authserver"" rel=""nofollow noreferrer"">this guide</a> and cloned the <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/tree/master/auth-server"" rel=""nofollow noreferrer"">authserver</a>. The project has an <code>authserver</code> and a <code>client</code> (as test). Example works fine but if I remove <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/blob/master/auth-server/src/test/resources/client.yml#L3"" rel=""nofollow noreferrer"">context-path</a> property (I just want my app to work on <code>/</code>), it fails after redirect back to the <code>client</code>. Example:</p>

<ol>
<li>Go to the <code>client</code> (<code>localhost:9999</code>);</li>
<li>Redirected to the <code>authserver</code> (<code>localhost:8080</code>);</li>
<li>Login through GitHub;</li>
<li>Redirected to the <code>authserver</code> and immediatly to the <code>client</code> with next url:</li>
</ol>

<blockquote>
  <p><a href=""http://localhost:9999/login?code=dqoxz4&amp;state=79qtJ5"" rel=""nofollow noreferrer"">http://localhost:9999/login?code=dqoxz4&amp;state=79qtJ5</a></p>
</blockquote>

<p>Whitelabel error page responds:</p>

<blockquote>
  <p>There was an unexpected error (type=Unauthorized, status=401).<br>
  Authentication Failed: Could not obtain access token</p>
</blockquote>

<p>As I mentioned above, it fails only if <code>context-path</code> is <code>/</code> (or removed at all). Otherwise, all works.</p>
",4725496,,,,,2016-11-27 10:39:43,Spring SSO authorization fails without context-path,<java><spring><spring-security>,2,0,,,
Spring,35709341,1,35709541,,2016,,2,1549,"<p>As someone who is new to Java and Spring, I've been working through their REST API tutorials. A general workflow is introduced where you embed Jetty/Tomcat and then run an executable Jar file. This workflow appears to change when the <a href=""https://spring.io/guides/tutorials/bookmarks/"" rel=""nofollow"">Building REST Services with Spring</a> tutorial is introduced. Their <a href=""https://github.com/spring-guides/tut-bookmarks"" rel=""nofollow"">bookmarks demo project</a> uses a multi-module maven configuration. There doesn't appear to be a main manifest attribute defined anywhere. </p>

<p>The Maven configuration currently generates a separate jar for each module. </p>

<p>The ideal goal would be to take the bookmarks demo project, add <a href=""http://swagger.io/"" rel=""nofollow"">Swagger</a> to it, and loop in <a href=""https://www.docker.com/"" rel=""nofollow"">Docker</a>. The realistic goal is to get the project running using Jetty or Tomcat. </p>

<p>Do you know how I could deploy the <a href=""https://github.com/spring-guides/tut-bookmarks"" rel=""nofollow"">Spring Bookmarks Demo</a> using Jetty or Tomcat? Thank you for your time.</p>
",1965146,,1965146,,2016-02-29 21:41:23,2016-02-29 21:41:23,"How do you deploy the ""Building REST Services with Spring"" tutorial?",<java><spring><rest><maven><spring-boot>,2,0,,,
Spring,43150564,1,43150604,,2017,,2,168,"<p>I was looking into some tutorial and stumbled on this code:</p>

<pre><code>public void run(String... args) throws Exception {
    eventBus.on($(""quotes""), receiver);
    publisher.publishQuotes(NUMBER_OF_QUOTES);
}
</code></pre>

<p>This is the first time I see <code>$(""quotes"")</code> in Java. I'd appreciate someone explaining to me what's going on there.</p>

<p>Here's the source:</p>

<p><a href=""https://github.com/spring-guides/deprecate-gs-messaging-reactor/blob/master/complete/src/main/java/hello/Application.java#L53"" rel=""nofollow noreferrer"">https://github.com/spring-guides/deprecate-gs-messaging-reactor/blob/master/complete/src/main/java/hello/Application.java#L53</a></p>

<p>Update:</p>

<p>This is not a question about $ as Java variable name. I know that it's a valid variable name. However, the format of $(""something"") looks JQuery-like; hence threw me off thinking that it's a special directive or something.</p>
",2471889,,2471889,,2017-04-02 21:59:55,2017-04-02 21:59:55,"What does $(""something"") mean in Java?",<java>,2,10,,,
Spring,51738718,1,51741293,,2018,,2,598,"<p>I checkout this project from spring:
<a href=""https://github.com/spring-guides/gs-batch-processing"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-batch-processing</a></p>

<p>Source: <a href=""https://spring.io/guides/gs/batch-processing/"" rel=""nofollow noreferrer"">https://spring.io/guides/gs/batch-processing/</a></p>

<p>I replace the ',' with 'tab' in 'sample-data.csv:</p>

<pre><code>Jill    Doe
Joe Doe
Justin  Doe
Jane    Doe
John    Doe
</code></pre>

<p>Then I add the new Delimiter to the reader:</p>

<pre><code>@Bean
public FlatFileItemReader&lt;Person&gt; reader() {
    return new FlatFileItemReaderBuilder&lt;Person&gt;()
        .name(""personItemReader"")
        .resource(new ClassPathResource(""sample-data.csv""))
        .delimited()
        .delimiter(DelimitedLineTokenizer.DELIMITER_TAB) // NEW DELIMITER
        .names(new String[]{""firstName"", ""lastName""})
        .fieldSetMapper(new BeanWrapperFieldSetMapper&lt;Person&gt;() {{
            setTargetType(Person.class);
        }})
        .build();
}
</code></pre>

<p>When I launch I get this error: </p>

<pre><code>Caused by: org.springframework.batch.item.file.transform.IncorrectTokenCountException: Incorrect number of tokens found in record: expected 2 actual 1
    at org.springframework.batch.item.file.transform.AbstractLineTokenizer.tokenize(AbstractLineTokenizer.java:142) ~[spring-batch-infrastructure-4.0.1.RELEASE.jar:4.0.1.RELEASE]
    at org.springframework.batch.item.file.mapping.DefaultLineMapper.mapLine(DefaultLineMapper.java:43) ~[spring-batch-infrastructure-4.0.1.RELEASE.jar:4.0.1.RELEASE]
    at org.springframework.batch.item.file.FlatFileItemReader.doRead(FlatFileItemReader.java:180) ~[spring-batch-infrastructure-4.0.1.RELEASE.jar:4.0.1.RELEASE]
    ... 50 common frames omitted
</code></pre>

<p>I have tried with  '@' delimiter -> it works.
For some reason, I can't make it work with the tab delimiter...</p>

<p>Of course in my real project, I have an input file with 'tab' separators...</p>

<p>Any solution here?</p>
",1529441,,5141749,,2018-08-08 6:23:11,2019-02-13 10:20:29,FlatFileItemReader tab delimiter not working,<java><spring><spring-batch>,2,2,,,
Spring,46162061,1,46162617,,2017,,3,433,"<p>Recently I have been following this guide on how to persist data in a in-memory H2 database using Spring Boot:</p>

<ul>
<li>Guide: <a href=""https://spring.io/guides/gs/accessing-data-jpa/"" rel=""nofollow noreferrer"">https://spring.io/guides/gs/accessing-data-jpa/</a></li>
<li>Source code: <a href=""https://github.com/spring-guides/gs-accessing-data-jpa/"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-accessing-data-jpa/</a></li>
</ul>

<p>In it, one first defines a <code>CustomerEntity</code> class and then a <code>CustomerRepository</code> interface. Then, in the main class, a lot of annotation magic is being done, which enables one to simple ""have"" a <code>CustomerRepository</code> instance, which can be used to persist data to the database, retrieve it, etc.</p>

<p>This is all fine, however, I need to use such a <code>CustomerRepository</code> instance outside of the main class, inside another class. Since the tutorial does not reveal the magic that was done to make it available in the main class, I do not know how to make it happen in the class that I need it in.</p>

<p>I have been trying to figure this out almost all day long, but I just get lost inside a jungle of articles all trying to explain which Spring annotation does what, and I am really exhausted now.</p>

<p>I want to do something like this:</p>

<pre><code>public class Foo {

  private CustomerRepository repo;

  // ...

  public void storeCustomer(String firstName, String lastName) {
    this.repository.save(new Customer(firstName, lastName));
  }

}
</code></pre>

<p>I would be very happy about some hints.</p>
",8593724,,,user8558216,2017-09-12 7:18:41,2017-09-12 7:18:41,How to get a CrudRepository instance?,<java><spring><spring-boot><spring-data-jpa><h2>,2,6,,,
Spring,39082691,1,,,2016,,4,2273,"<p>I have been following Dave Syer tutorial, SSO with OAuth2, Part 5  <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2"" rel=""nofollow"">https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2</a></p>

<p>It has UI/API gateway, resource server and Authorization server. 
When i click logout from UI/API gateway application i get the following,<a href=""http://i.stack.imgur.com/T7WO0.jpg"" rel=""nofollow"">enter image description here</a> Cors issue</p>

<p>What is currently happening from Dave Syer tutorial is that when a user click logout it changes the authentication flag to false, making it seem the user has logged out but they have only logged out from the UI/API gateway application. </p>

<p>When user click login, remember they havent logout from the Authentication server. Therefore, user doesnt go through the authentication and approval cycle again. </p>

<p>What I want, when a user click logout and try to login again user must input username and password. In fact, they should start afresh, meaning system should invalidate the session and or token.</p>

<p>I've been banging my head against a wall trying to find a solution for this. Can anyone please point out how to resolve/ achieve this. </p>
",6726502,,,,,2017-07-19 17:50:43,"Spring boot Security, Oauth2 logout, invalidate session in order to go through the authentication and approval cycle in the authorization server",<java><angularjs><spring-security><spring-boot><spring-security-oauth2>,2,2,1,,
Spring,36683434,1,36703486,,2016,,4,10867,"<p><strong>How do I trigger auto-logout of <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2"" rel=""nofollow noreferrer"">this sample Spring Boot OAuth2 app</a>?</strong>  </p>

<p>I tried adding the following code from <a href=""https://stackoverflow.com/questions/21987589/spring-security-how-to-log-out-user-revoke-oauth2-token#32320860"">an answer to this other posting</a> into a new controller class in the <code>demo</code> package of the <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2/authserver"" rel=""nofollow noreferrer""><code>authserver</code> app</a>:  </p>

<pre><code>package demo;

import javax.servlet.http.HttpServletRequest;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.oauth2.common.OAuth2AccessToken;
import org.springframework.security.oauth2.provider.token.TokenStore;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseStatus;
import org.springframework.http.HttpStatus;

@Controller
public class OAuthController {
    @Autowired
    private TokenStore tokenStore;

    @RequestMapping(value = ""/oauth/revoke-token"", method = RequestMethod.GET)
    @ResponseStatus(HttpStatus.OK)
    public void logout(HttpServletRequest request) {
        String authHeader = request.getHeader(""Authorization"");
        if (authHeader != null) {
            String tokenValue = authHeader.replace(""Bearer"", """").trim();
            OAuth2AccessToken accessToken = tokenStore.readAccessToken(tokenValue);
            tokenStore.removeAccessToken(accessToken);
        }
    }
}  
</code></pre>

<p>But when I try to launch the app, the debug log gives the following error indicating that it cannot <code>autowire</code> the token store:  </p>

<pre><code>Caused by: org.springframework.beans.factory.BeanCreationException:  
Could not autowire field:  
private org.springframework.security.oauth2.provider.token.TokenStore  
demo.OAuthController.tokenStore; nested exception is  
org.springframework.beans.factory.NoSuchBeanDefinitionException:  
No qualifying bean of type [org.springframework.security.oauth2.provider.token.TokenStore] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:573)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:88)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:331)
    ... 23 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException:  
No qualifying bean of type  
[org.springframework.security.oauth2.provider.token.TokenStore]  
found for dependency: expected at least 1 bean which qualifies as  
autowire candidate for this dependency. Dependency annotations:  
{@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:1373)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1119)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1014)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:545        )
    ... 25 more
</code></pre>

<p>When the compilation error is resolved, I intend to trigger the logout process from the following code which will be added to the <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/blob/master/oauth2/ui/src/main/resources/static/js/hello.js"" rel=""nofollow noreferrer""><code>hello.js</code> controller of the <code>ui</code> app</a> in the github link above:  </p>

<pre><code>self.logout = function() {
    $http.post('http://localhost:9000/oauth/revoke-token', {}).finally(function() {
        $rootScope.authenticated = false;
        $location.path(""/"");
    });
}
</code></pre>

<p><strong>The full code of the sample app is at the github link above, so what specific changes do I need to make in order to successfully <code>autowire</code> the <code>token store</code> and auto-logout the user globally?</strong>  </p>

<hr>

<p><strong>ONGOING EFFORTS:</strong>  </p>

<hr>

<p>Per @ManoJ's suggestion, I changed the new controller class to become the following:  </p>

<pre><code>package demo;

import javax.servlet.http.HttpServletRequest;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.oauth2.common.OAuth2AccessToken;
import org.springframework.security.oauth2.provider.token.TokenStore;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseStatus;
import org.springframework.http.HttpStatus;

@Controller
public class OAuthController {

    private TokenStore tokenStore;

    @Autowired
    public OAuthController(TokenStore tokenStore) {
        this.tokenStore = tokenStore;
    }

    @RequestMapping(value = ""/oauth/revoke-token"", method = RequestMethod.GET)
    @ResponseStatus(HttpStatus.OK)
    public void logout(HttpServletRequest request) {
        String authHeader = request.getHeader(""Authorization"");
        if (authHeader != null) {
            String tokenValue = authHeader.replace(""Bearer"", """").trim();
            OAuth2AccessToken accessToken = tokenStore.readAccessToken(tokenValue);
            tokenStore.removeAccessToken(accessToken);
        }
    }
}
</code></pre>

<p>However, I am still getting a very similar error message when I try to launch the app at the terminal with <code>mvn spring-boot:run</code>, as follows:  </p>

<pre><code>java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:497)
    at org.springframework.boot.maven.AbstractRunMojo$LaunchRunner.run(AbstractRunMojo.java:478)
    at java.lang.Thread.run(Thread.java:745)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'OAuthController' defined in file [/home/user/spring_boot_apps/security_tut_remodel/tut-spring-security-and-angular-js/oauth2/authserver/target/classes/demo/OAuthController.class]: Unsatisfied dependency expressed through constructor argument with index 0 of type [org.springframework.security.oauth2.provider.token.TokenStore]: No qualifying bean of type [org.springframework.security.oauth2.provider.token.TokenStore] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [org.springframework.security.oauth2.provider.token.TokenStore] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}
    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:749)
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:185)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1143)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1046)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:510)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:482)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:772)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:839)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:538)
    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:118)
    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:766)
    at org.springframework.boot.SpringApplication.createAndRefreshContext(SpringApplication.java:361)
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:307)
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1191)
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1180)
    at demo.AuthserverApplication.main(AuthserverApplication.java:88)
    ... 6 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [org.springframework.security.oauth2.provider.token.TokenStore] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:1373)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1119)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1014)
    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:813)
    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:741)
    ... 25 more
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
</code></pre>

<p><strong>Given that this class is the only addition to the sample app in the link in the first line of the <code>OP</code> above, all of the code for the entire app is available both online and on your own devbox with <code>git clone ...</code>.  So what else needs to change in order for autowire of the TokenStore to work properly?</strong></p>
",807797,,-1,,2017-05-23 11:54:22,2016-04-18 20:16:25,How to autowire this TokenStore,<spring><spring-security><spring-boot><autowired><spring-oauth2>,2,0,1,,
Spring,40355743,1,,,2016,,5,2709,"<p>I would like to be able to upload images to a server, handling errors and exceptions gracefully, with error messages displayed to the user in the form, and ideally only using an existing barebones Spring Boot and Thymeleaf install. </p>

<p>Using the example project <a href=""https://github.com/spring-guides/gs-uploading-files"" rel=""nofollow noreferrer"">gs-uploading-files</a> I can upload files to a server using Spring Boot and Thymeleaf. In application.properties I set <code>spring.http.multipart.max-file-size=1MB</code> and 
<code>spring.http.multipart.max-request-size=1MB</code>. 
 However several security and validation issues are unresolved when I upload files larger than 1MB.</p>

<ol>
<li><p>Any file can be uploaded. For example, an html file could be uploaded and thus hosted on the server. How can files be restricted by type? Can they be validated in the page before the request is sent? If I have multiple ways of uploading images how can I validate all MultipartFiles?</p></li>
<li><p>Users can attempt to uploade large files, beyond the default limits of Spring and the embedded Tomcat. This causes a <code>org.springframework.web.multipart.MultipartException</code> is not handled by Spring. How can the file size be validated before the upload attempt? In case this is bypassesed can any file upload exceptions caught by Spring, so that a nice error message is displayed?</p></li>
<li><p>The default Spring error page is not used as a fallback for all exceptions. The MultipartException returns a Tomcat exception page with a full stacktrace (see Log 1).</p></li>
</ol>

<hr>

<p>I've searched to try and find and implement a set of solutions.</p>

<p>A step towards fixing number 1 is by amending to <code>handleFileUpload</code> check the content type, rejecting files which fail this:  <code>!file.getContentType().toLowerCase().startsWith(""image"")</code>. Will this always be valid? Can a malicious user bypass this? And how can I check every MultipartFile, to save having to remember to add this every time?</p>

<pre><code>@PostMapping(""/"")
public String handleFileUpload(@RequestParam(""file"") MultipartFile file, RedirectAttributes redirectAttributes)
        throws MultipartException, IllegalStateException {

    if (file != null &amp;&amp; file.getContentType() != null &amp;&amp; !file.getContentType().toLowerCase().startsWith(""image""))
        throw new MultipartException(""not img"");

    storageService.store(file);
    redirectAttributes.addFlashAttribute(""message"",
            ""You successfully uploaded "" + file.getOriginalFilename() + ""!"");

    return ""redirect:/"";
}
</code></pre>

<p>Adding an <code>@ExceptionHandler</code> doesn't work, it simply never gets called.</p>

<pre><code>@ExceptionHandler({ SizeLimitExceededException.class, MultipartException.class,
        java.lang.IllegalStateException.class })
public ModelAndView handleError(HttpServletRequest req, Exception e) {
    // error(""Request: "" + req.getRequestURL() + "" raised "" + ex);

    ModelAndView mav = new ModelAndView();
    mav.addObject(""exception"", e);
    mav.addObject(""url"", req.getRequestURL());
    mav.addObject(""timestamp"", new Date());
    mav.addObject(""error"", e.getClass());
    mav.addObject(""message"", e.getMessage());
    mav.addObject(""status"", HttpStatus.INTERNAL_SERVER_ERROR);
    mav.setViewName(""error"");
    return mav;
}
</code></pre>

<p>Number 3 can be resolved by a global exception handler on all Exceptions. (explained in detail in <a href=""https://spring.io/blog/2013/11/01/exception-handling-in-spring-mvc"" rel=""nofollow noreferrer"">this post</a>). However, I'm concerned that it may overrule a Controller level handler.</p>

<pre><code>package hello;

import java.util.Date;

import javax.servlet.http.HttpServletRequest;

import org.springframework.core.annotation.AnnotationUtils;
import org.springframework.http.HttpStatus;
import org.springframework.web.bind.annotation.ControllerAdvice;
import org.springframework.web.bind.annotation.ExceptionHandler;
import org.springframework.web.bind.annotation.ResponseStatus;
import org.springframework.web.servlet.ModelAndView;

@ControllerAdvice
class GlobalDefaultExceptionHandler {
    public static final String DEFAULT_ERROR_VIEW = ""error"";

    @ExceptionHandler(value = Exception.class)
    public ModelAndView defaultErrorHandler(HttpServletRequest req, Exception e) throws Exception {
        // If the exception is annotated with @ResponseStatus rethrow it and let
        // the framework handle it - like the OrderNotFoundException example
        // at the start of this post.
        // AnnotationUtils is a Spring Framework utility class.
        if (AnnotationUtils.findAnnotation(e.getClass(), ResponseStatus.class) != null)
            throw e;

        // Otherwise setup and send the user to a default error-view.
        ModelAndView mav = new ModelAndView();
        mav.addObject(""exception"", e);
        mav.addObject(""url"", req.getRequestURL());
        mav.addObject(""timestamp"", new Date());
        mav.addObject(""error"", e.getClass());
        mav.addObject(""message"", e.getMessage());
        mav.addObject(""status"", HttpStatus.INTERNAL_SERVER_ERROR);
        mav.setViewName(DEFAULT_ERROR_VIEW);
        return mav;
    }
}
</code></pre>

<p>I've attempted <a href=""https://stackoverflow.com/questions/29363705/handling-multipartexception-with-spring-boot-and-display-error-page"">this answer</a>, which handles the exception but returns an error page. I'd like to return to the original page and display a nice error message. </p>

<hr>

<p>Log 1:</p>

<pre><code>HTTP Status 500 - Request processing failed; nested exception is org.springframework.web.multipart.MultipartException: Could not parse multipart servlet request; nested exception is java.lang.IllegalStateException: org.apache.tomcat.util.http.fileupload.FileUploadBase$SizeLimitExceededException: the request was rejected because its size (1292555) exceeds the configured maximum (1048576)

type Exception report

message Request processing failed; nested exception is org.springframework.web.multipart.MultipartException: Could not parse multipart servlet request; nested exception is java.lang.IllegalStateException: org.apache.tomcat.util.http.fileupload.FileUploadBase$SizeLimitExceededException: the request was rejected because its size (1292555) exceeds the configured maximum (1048576)

description The server encountered an internal error that prevented it from fulfilling this request.

exception

org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.web.multipart.MultipartException: Could not parse multipart servlet request; nested exception is java.lang.IllegalStateException: org.apache.tomcat.util.http.fileupload.FileUploadBase$SizeLimitExceededException: the request was rejected because its size (1292555) exceeds the configured maximum (1048576)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:982)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:872)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
    org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
    org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
    org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
    org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:89)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
    org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
root cause

org.springframework.web.multipart.MultipartException: Could not parse multipart servlet request; nested exception is java.lang.IllegalStateException: org.apache.tomcat.util.http.fileupload.FileUploadBase$SizeLimitExceededException: the request was rejected because its size (1292555) exceeds the configured maximum (1048576)
    org.springframework.web.multipart.support.StandardMultipartHttpServletRequest.parseRequest(StandardMultipartHttpServletRequest.java:111)
    org.springframework.web.multipart.support.StandardMultipartHttpServletRequest.&lt;init&gt;(StandardMultipartHttpServletRequest.java:85)
    org.springframework.web.multipart.support.StandardServletMultipartResolver.resolveMultipart(StandardServletMultipartResolver.java:76)
    org.springframework.web.servlet.DispatcherServlet.checkMultipart(DispatcherServlet.java:1099)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:932)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:897)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:872)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
    org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
    org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
    org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
    org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:89)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
    org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
root cause

java.lang.IllegalStateException: org.apache.tomcat.util.http.fileupload.FileUploadBase$SizeLimitExceededException: the request was rejected because its size (1292555) exceeds the configured maximum (1048576)
    org.apache.catalina.connector.Request.parseParts(Request.java:2871)
    org.apache.catalina.connector.Request.parseParameters(Request.java:3176)
    org.apache.catalina.connector.Request.getParameter(Request.java:1110)
    org.apache.catalina.connector.RequestFacade.getParameter(RequestFacade.java:381)
    org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:70)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
root cause

org.apache.tomcat.util.http.fileupload.FileUploadBase$SizeLimitExceededException: the request was rejected because its size (1292555) exceeds the configured maximum (1048576)
    org.apache.tomcat.util.http.fileupload.FileUploadBase$FileItemIteratorImpl.&lt;init&gt;(FileUploadBase.java:811)
    org.apache.tomcat.util.http.fileupload.FileUploadBase.getItemIterator(FileUploadBase.java:256)
    org.apache.tomcat.util.http.fileupload.FileUploadBase.parseRequest(FileUploadBase.java:280)
    org.apache.catalina.connector.Request.parseParts(Request.java:2801)
    org.apache.catalina.connector.Request.parseParameters(Request.java:3176)
    org.apache.catalina.connector.Request.getParameter(Request.java:1110)
    org.apache.catalina.connector.RequestFacade.getParameter(RequestFacade.java:381)
    org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:70)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
note The full stack trace of the root cause is available in the Apache Tomcat/8.5.5 logs.

Apache Tomcat/8.5.5
</code></pre>

<hr>
",4161471,,-1,,2017-05-23 12:10:04,2018-02-19 12:31:17,"File upload in Spring Boot: Uploading, validation, and exception handling",<java><tomcat><file-upload><spring-boot><thymeleaf>,2,0,1,,
Spring,20168563,1,20187597,,2013,,5,7231,"<p>I'm using spring-boot (I'm following <a href=""http://spring.io/guides/gs/rest-service/"" rel=""noreferrer"">this tutorial</a>), the current code is <a href=""https://github.com/spring-guides/gs-rest-service/tree/master/complete"" rel=""noreferrer"">here</a>.</p>

<p>My application is configured via <code>@EnableAutoConfiguration</code>, so I don't have <code>web.xml</code>, or other configuration files.
The application has a default handler for <code>/**</code>, files from <code>projectRoot/src/main/webapp/</code> are served, but unfortunately with <code>Content-Type: text/html;charset=ISO-8859-1</code>. I'd like to serve (<code>html</code> files) with <code>UTF-8</code> charset.</p>

<p>The static files are served by spring too, as far as I know: after launching the application, the following line apprears in the log: <code>Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]</code> (github.com/spring-projects/spring-boot/blob/master/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/web/WebMvcAutoConfiguration.java#L182, sorry, I cannot post more than 2 links)</p>

<p>Putting <code>&lt;meta charset=""utf-8"" /&gt;</code> or <code>&lt;meta http-equiv=""Content-Type: text/html;charset=utf-8"" /&gt;</code> into the served <code>html</code> file has no effect.</p>

<p>How can I serve <code>*.html</code> files with <code>UTF-8</code> charset?</p>

<p>The debug log is the following:</p>

<pre><code>  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::             (v0.5.0.M6)

2013-11-24 00:48:41.327  INFO 15786 --- [           main] hello.Application                        : Starting Application on ubuntu with PID 15786 (/home/lennon/bme/szoftarch/szoftarch-2013-osz/build/libs/gs-rest-service-0.1.0.jar started by lennon)
2013-11-24 00:48:41.331 DEBUG 15786 --- [           main] o.s.boot.SpringApplication               : Loading source class hello.Application
2013-11-24 00:48:41.380  INFO 15786 --- [           main] ationConfigEmbeddedWebApplicationContext : Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@7455ffcd: startup date [Sun Nov 24 00:48:41 CET 2013]; root of context hierarchy
2013-11-24 00:48:41.385 DEBUG 15786 --- [           main] ationConfigEmbeddedWebApplicationContext : Bean factory for org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@7455ffcd: org.springframework.beans.factory.support.DefaultListableBeanFactory@54cb8484: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,application]; root of factory hierarchy
2013-11-24 00:48:42.179 DEBUG 15786 --- [           main] ationConfigEmbeddedWebApplicationContext : Using MessageSource [org.springframework.context.support.ResourceBundleMessageSource: basenames=[messages]]
2013-11-24 00:48:42.182 DEBUG 15786 --- [           main] ationConfigEmbeddedWebApplicationContext : Unable to locate ApplicationEventMulticaster with name 'applicationEventMulticaster': using default [org.springframework.context.event.SimpleApplicationEventMulticaster@5d36368]
2013-11-24 00:48:42.518 DEBUG 15786 --- [           main] .t.TomcatEmbeddedServletContainerFactory : Code archive: /home/lennon/bme/szoftarch/szoftarch-2013-osz/build/libs/gs-rest-service-0.1.0.jar
2013-11-24 00:48:42.518 DEBUG 15786 --- [           main] .t.TomcatEmbeddedServletContainerFactory : Code archive: /home/lennon/bme/szoftarch/szoftarch-2013-osz/build/libs/gs-rest-service-0.1.0.jar
2013-11-24 00:48:42.518 DEBUG 15786 --- [           main] .t.TomcatEmbeddedServletContainerFactory : Document root: /home/lennon/bme/szoftarch/szoftarch-2013-osz/src/main/webapp
2013-11-24 00:48:42.904  INFO 15786 --- [           main] o.apache.catalina.core.StandardService   : Starting service Tomcat
2013-11-24 00:48:42.905  INFO 15786 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/7.0.42
2013-11-24 00:48:43.006  INFO 15786 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2013-11-24 00:48:43.007  INFO 15786 --- [ost-startStop-1] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1630 ms
2013-11-24 00:48:43.259  INFO 15786 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring FrameworkServlet 'dispatcherServlet'
2013-11-24 00:48:43.260  INFO 15786 --- [ost-startStop-1] o.s.web.servlet.DispatcherServlet        : FrameworkServlet 'dispatcherServlet': initialization started
2013-11-24 00:48:43.428  INFO 15786 --- [ost-startStop-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2013-11-24 00:48:43.717  INFO 15786 --- [ost-startStop-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped ""{[/greeting],methods=[],params=[],headers=[],consumes=[],produces=[],custom=[]}"" onto public hello.Greeting hello.GreetingController.greeting(java.lang.String)
2013-11-24 00:48:43.725  INFO 15786 --- [ost-startStop-1] o.s.w.s.c.a.WebMvcConfigurerAdapter      : Adding welcome page: jndi:/localhost/index.html
2013-11-24 00:48:43.732  INFO 15786 --- [ost-startStop-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Root mapping to handler of type [class org.springframework.web.servlet.mvc.ParameterizableViewController]
2013-11-24 00:48:43.811  INFO 15786 --- [ost-startStop-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2013-11-24 00:48:43.812  INFO 15786 --- [ost-startStop-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2013-11-24 00:48:44.489  INFO 15786 --- [ost-startStop-1] o.s.web.servlet.DispatcherServlet        : FrameworkServlet 'dispatcherServlet': initialization completed in 1229 ms
2013-11-24 00:48:44.641 DEBUG 15786 --- [           main] ationConfigEmbeddedWebApplicationContext : Unable to locate LifecycleProcessor with name 'lifecycleProcessor': using default [org.springframework.context.support.DefaultLifecycleProcessor@10d6fc05]
2013-11-24 00:48:44.644 DEBUG 15786 --- [           main] nitializer$AutoConfigurationReportLogger : 


=========================
AUTO-CONFIGURATION REPORT
=========================


Positive matches:
-----------------

   MessageSourceAutoConfiguration
      - @ConditionalOnMissingBean (types: org.springframework.context.MessageSource; SearchStrategy: all) found no beans (OnBeanCondition)

   PropertyPlaceholderAutoConfiguration#propertySourcesPlaceholderConfigurer
      - @ConditionalOnMissingBean (types: org.springframework.context.support.PropertySourcesPlaceholderConfigurer; SearchStrategy: current) found no beans (OnBeanCondition)

   DispatcherServletAutoConfiguration
      - found web application StandardServletEnvironment (OnWebApplicationCondition)
      - @ConditionalOnClass classes found: org.springframework.web.servlet.DispatcherServlet (OnClassCondition)
      - found web application StandardServletEnvironment (OnWebApplicationCondition)
      - @ConditionalOnClass classes found: org.springframework.web.servlet.DispatcherServlet (OnClassCondition)
      - @ConditionalOnBean (types: org.springframework.boot.context.embedded.EmbeddedServletContainerFactory; SearchStrategy: all) found the following [tomcatEmbeddedServletContainerFactory] (OnBeanCondition)

   DispatcherServletAutoConfiguration#dispatcherServlet
      - no DispatcherServlet found (DispatcherServletAutoConfiguration.DefaultDispatcherServletCondition)

   EmbeddedServletContainerAutoConfiguration
      - found web application StandardServletEnvironment (OnWebApplicationCondition)
      - found web application StandardServletEnvironment (OnWebApplicationCondition)

   EmbeddedServletContainerAutoConfiguration.EmbeddedTomcat
      - @ConditionalOnClass classes found: javax.servlet.Servlet,org.apache.catalina.startup.Tomcat (OnClassCondition)
      - @ConditionalOnClass classes found: javax.servlet.Servlet,org.apache.catalina.startup.Tomcat (OnClassCondition)
      - @ConditionalOnMissingBean (types: org.springframework.boot.context.embedded.EmbeddedServletContainerFactory; SearchStrategy: current) found no beans (OnBeanCondition)

   ServerPropertiesAutoConfiguration#serverProperties
      - @ConditionalOnMissingBean (types: org.springframework.boot.context.embedded.properties.ServerProperties; SearchStrategy: all) found no beans (OnBeanCondition)

   WebMvcAutoConfiguration
      - found web application StandardServletEnvironment (OnWebApplicationCondition)
      - @ConditionalOnClass classes found: javax.servlet.Servlet,org.springframework.web.servlet.DispatcherServlet,org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter (OnClassCondition)
      - found web application StandardServletEnvironment (OnWebApplicationCondition)
      - @ConditionalOnClass classes found: javax.servlet.Servlet,org.springframework.web.servlet.DispatcherServlet,org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter (OnClassCondition)
      - @ConditionalOnMissingBean (types: org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport; SearchStrategy: all) found no beans (OnBeanCondition)

   WebMvcAutoConfiguration#hiddenHttpMethodFilter
      - @ConditionalOnMissingBean (types: org.springframework.web.filter.HiddenHttpMethodFilter; SearchStrategy: all) found no beans (OnBeanCondition)

   WebMvcAutoConfiguration.WebMvcAutoConfigurationAdapter#defaultViewResolver
      - @ConditionalOnMissingBean (types: org.springframework.web.servlet.view.InternalResourceViewResolver; SearchStrategy: all) found no beans (OnBeanCondition)


Negative matches:
-----------------

   RabbitAutoConfiguration
      - required @ConditionalOnClass classes not found: org.springframework.amqp.rabbit.core.RabbitTemplate,com.rabbitmq.client.Channel (OnClassCondition)

   AopAutoConfiguration
      - required @ConditionalOnClass classes not found: org.aspectj.lang.annotation.Aspect,org.aspectj.lang.reflect.Advice (OnClassCondition)

   BatchAutoConfiguration
      - required @ConditionalOnClass classes not found: org.springframework.batch.core.launch.JobLauncher (OnClassCondition)

   JpaRepositoriesAutoConfiguration
      - required @ConditionalOnClass classes not found: org.springframework.data.jpa.repository.JpaRepository (OnClassCondition)

   MongoRepositoriesAutoConfiguration
      - required @ConditionalOnClass classes not found: com.mongodb.Mongo,org.springframework.data.mongodb.repository.MongoRepository (OnClassCondition)

   DataSourceAutoConfiguration
      - required @ConditionalOnClass classes not found: org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseType (OnClassCondition)

   DataSourceTransactionManagerAutoConfiguration
      - required @ConditionalOnClass classes not found: org.springframework.jdbc.core.JdbcTemplate,org.springframework.transaction.PlatformTransactionManager (OnClassCondition)

   JmsTemplateAutoConfiguration
      - required @ConditionalOnClass classes not found: org.springframework.jms.core.JmsTemplate,javax.jms.ConnectionFactory (OnClassCondition)

   DeviceResolverAutoConfiguration
      - required @ConditionalOnClass classes not found: org.springframework.mobile.device.DeviceResolverHandlerInterceptor,org.springframework.mobile.device.DeviceHandlerMethodArgumentResolver (OnClassCondition)

   HibernateJpaAutoConfiguration
      - required @ConditionalOnClass classes not found: org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean,org.springframework.transaction.annotation.EnableTransactionManagement,javax.persistence.EntityManager,org.hibernate.ejb.HibernateEntityManager (OnClassCondition)

   ReactorAutoConfiguration
      - required @ConditionalOnClass classes not found: reactor.spring.context.config.EnableReactor (OnClassCondition)

   ThymeleafAutoConfiguration
      - required @ConditionalOnClass classes not found: org.thymeleaf.spring3.SpringTemplateEngine (OnClassCondition)

   EmbeddedServletContainerAutoConfiguration.EmbeddedJetty
      - required @ConditionalOnClass classes not found: org.eclipse.jetty.server.Server,org.eclipse.jetty.util.Loader (OnClassCondition)

   MultipartAutoConfiguration
      - @ConditionalOnClass classes found: javax.servlet.Servlet,org.springframework.web.multipart.support.StandardServletMultipartResolver (OnClassCondition)
      - @ConditionalOnClass classes found: javax.servlet.Servlet,org.springframework.web.multipart.support.StandardServletMultipartResolver (OnClassCondition)
      - @ConditionalOnBean (types: javax.servlet.MultipartConfigElement; SearchStrategy: all) found no beans (OnBeanCondition)

   WebMvcAutoConfiguration.WebMvcAutoConfigurationAdapter#beanNameViewResolver
      - @ConditionalOnBean (types: org.springframework.web.servlet.View; SearchStrategy: all) found no beans (OnBeanCondition)

   WebMvcAutoConfiguration.WebMvcAutoConfigurationAdapter#viewResolver
      - @ConditionalOnBean (types: org.springframework.web.servlet.View; SearchStrategy: all) found no beans (OnBeanCondition)

   WebSocketAutoConfiguration
      - required @ConditionalOnClass classes not found: org.springframework.web.socket.WebSocketHandler (OnClassCondition)

2013-11-24 00:48:44.650  INFO 15786 --- [           main] hello.Application                        : Started Application in 4.125 seconds
</code></pre>
",2288351,,2288351,,2013-11-23 23:54:35,2013-11-25 8:16:19,Spring-boot UTF-8 resources,<java><spring><utf-8><spring-boot>,2,5,2,,
Spring,37780976,1,,,2016,,5,2100,"<p>I follow this tutorial: <a href=""https://help.github.com/articles/signing-commits-using-gpg/"" rel=""nofollow noreferrer"">https://help.github.com/articles/signing-commits-using-gpg/</a></p>

<p>I try to sign when commit like this:
<a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/commit/824f418ab9d04114b14a90f7c19b4b8d6dda67b7"" rel=""nofollow noreferrer"">https://github.com/spring-guides/tut-spring-boot-oauth2/commit/824f418ab9d04114b14a90f7c19b4b8d6dda67b7</a></p>

<p><a href=""https://i.stack.imgur.com/aaVEi.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/aaVEi.jpg"" alt=""enter image description here""></a></p>

<p>but error:</p>

<pre><code>C:\Users\Administrator\Desktop\foo\test_gpg&gt;git commit -m ""test""
gpg: skipped ""DABDD34E"": secret key not available
gpg: signing failed: secret key not available
error: gpg failed to sign the data
fatal: failed to write commit object
</code></pre>

<p><a href=""https://i.stack.imgur.com/6SiFh.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/6SiFh.jpg"" alt=""enter image description here""></a>
<a href=""https://i.stack.imgur.com/ch5Sx.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/ch5Sx.jpg"" alt=""enter image description here""></a>
<a href=""https://i.stack.imgur.com/TUsRP.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/TUsRP.jpg"" alt=""enter image description here""></a>
<a href=""https://i.stack.imgur.com/ZD99v.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/ZD99v.jpg"" alt=""enter image description here""></a></p>

<p>My config:</p>

<pre><code>C:\Users\Administrator\Desktop\foo\test_gpg&gt;git config --list --show-origin
file:""C:\\ProgramData/Git/config""       core.symlinks=false
file:""C:\\ProgramData/Git/config""       core.autocrlf=true
file:""C:\\ProgramData/Git/config""       core.fscache=true
file:""C:\\ProgramData/Git/config""       color.diff=auto
file:""C:\\ProgramData/Git/config""       color.status=auto
file:""C:\\ProgramData/Git/config""       color.branch=auto
file:""C:\\ProgramData/Git/config""       color.interactive=true
file:""C:\\ProgramData/Git/config""       help.format=html
file:""C:\\ProgramData/Git/config""       http.sslcainfo=C:/Program Files/Git/mingw64/ssl/certs/ca-bundle.crt
file:""C:\\ProgramData/Git/config""       diff.astextplain.textconv=astextplain
file:""C:\\ProgramData/Git/config""       rebase.autosquash=true
file:""C:\\Program Files\\Git\\mingw64/etc/gitconfig""    credential.helper=manager
file:C:/Users/Administrator/.gitconfig  user.name=donhuvy
file:C:/Users/Administrator/.gitconfig  user.email=donhuvy@hotmail.com
file:C:/Users/Administrator/.gitconfig  user.signingkey=DABDD34E
file:C:/Users/Administrator/.gitconfig  commit.gpgsign=true
file:C:/Users/Administrator/.gitconfig  use.signingkey=DABDD34E
file:.git/config        core.repositoryformatversion=0
file:.git/config        core.filemode=false
file:.git/config        core.bare=false
file:.git/config        core.logallrefupdates=true
file:.git/config        core.symlinks=false
file:.git/config        core.ignorecase=true
file:.git/config        core.hidedotfiles=dotGitOnly
file:.git/config        remote.origin.url=https://github.com/donhuvy/test_gpg.git
file:.git/config        remote.origin.fetch=+refs/heads/*:refs/remotes/origin/*
file:.git/config        branch.master.remote=origin
file:.git/config        branch.master.merge=refs/heads/master
file:.git/config        commit.gpgsign=true
</code></pre>

<p>and</p>

<pre><code>C:\Users\Administrator\Desktop\foo\test_gpg&gt;gpg --list-key
C:/Users/Administrator/AppData/Roaming/gnupg/pubring.gpg
--------------------------------------------------------
pub   2048R/DABDD34E 2016-06-10
uid       [ultimate] donhuvy (Do Nhu Vy) &lt;v@vyhn.net&gt;
uid       [ultimate] Do Nhu Vy (Do Nhu Vy) &lt;v@vyhn.net&gt;
sub   2048R/C6B535A2 2016-06-10
</code></pre>

<p>(I register 3 emails with GitHub: <code>v@vyhn.net</code>, <code>donhuvy@hotmail.com</code> and <code>xxxxx@gmail.com</code>)
What I have been wrong? How I sign my commit?</p>
",3728901,,3728901,,2017-11-15 12:46:16,2018-05-06 0:30:34,"gpg: skipped ""XXBDXX4E"": secret key not available. gpg: signing failed: secret key not available",<git><github>,2,0,3,,
Spring,36730903,1,43245998,,2016,,5,8564,"<p>How do I add the custom <code>UserDetailsService</code> below to <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2"" rel=""noreferrer"">this Spring OAuth2 sample</a>?  </p>

<p>The default <code>user</code> with default <code>password</code> is defined in the <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/blob/master/oauth2/authserver/src/main/resources/application.properties"" rel=""noreferrer""><code>application.properties</code></a> file of the <code>authserver</code> app.  </p>

<p>However, I would like to add the following custom <code>UserDetailsService</code> to <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2/authserver/src/main/java/demo"" rel=""noreferrer"">the <code>demo</code> package of the <code>authserver</code> app</a> for testing purposes:  </p>

<pre><code>package demo;

import java.util.List;
import org.springframework.security.core.GrantedAuthority;
import org.springframework.security.core.authority.AuthorityUtils;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.security.core.userdetails.UsernameNotFoundException;
import org.springframework.security.provisioning.UserDetailsManager;
import org.springframework.stereotype.Service;

@Service
class Users implements UserDetailsManager {

    @Override
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {
        String password;
        List&lt;GrantedAuthority&gt; auth = AuthorityUtils.commaSeparatedStringToAuthorityList(""ROLE_USER"");
        if (username.equals(""Samwise"")) {
            auth = AuthorityUtils.commaSeparatedStringToAuthorityList(""ROLE_HOBBIT"");
            password = ""TheShire"";
        }
        else if (username.equals(""Frodo"")){
            auth = AuthorityUtils.commaSeparatedStringToAuthorityList(""ROLE_HOBBIT"");
            password = ""MyRing"";
        }
        else{throw new UsernameNotFoundException(""Username was not found. "");}
        return new org.springframework.security.core.userdetails.User(username, password, auth);
    }

    @Override
    public void createUser(UserDetails user) {// TODO Auto-generated method stub
    }

    @Override
    public void updateUser(UserDetails user) {// TODO Auto-generated method stub
    }

    @Override
    public void deleteUser(String username) {// TODO Auto-generated method stub
    }

    @Override
    public void changePassword(String oldPassword, String newPassword) {
        // TODO Auto-generated method stub
    }

    @Override
    public boolean userExists(String username) {
        // TODO Auto-generated method stub
        return false;
    }
}
</code></pre>

<p>As you can see, this <code>UserDetailsService</code> is not <code>autowired</code> yet, and it purposely uses insecure passwords because it is only designed for testing purposes.  </p>

<p><strong>What specific changes need to be made to <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2"" rel=""noreferrer"">the GitHub sample app</a> so that a user can login as <code>username=Samwise</code> with <code>password=TheShire</code>, or as <code>username=Frodo</code> with <code>password=MyRing</code>?</strong>  Do changes need to be made to <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/blob/master/oauth2/authserver/src/main/java/demo/AuthserverApplication.java"" rel=""noreferrer""><code>AuthserverApplication.java</code></a> or elsewhere?</p>

<hr>

<p><strong>SUGGESTIONS:</strong>  </p>

<hr>

<p>The <a href=""http://projects.spring.io/spring-security-oauth/docs/oauth2.html#grant-types"" rel=""noreferrer"">Spring OAuth2 Developer Guide</a> says to use a <code>GlobalAuthenticationManagerConfigurer</code> to configure a <code>UserDetailsService</code> globally.  However, googling those names produces less than helpful results.  </p>

<p>Also, a different app that uses internal spring security INSTEAD OF OAuth uses the following syntax to hook up the <code>UserDetailsService</code>, but I am not sure how to adjust its syntax to the current OP:  </p>

<pre><code>@Order(Ordered.HIGHEST_PRECEDENCE)
@Configuration
protected static class AuthenticationSecurity extends GlobalAuthenticationConfigurerAdapter {

    @Autowired
    private Users users;

    @Override
    public void init(AuthenticationManagerBuilder auth) throws Exception {
        auth.userDetailsService(users);
    }
}
</code></pre>

<p>I tried using <code>@Autowire</code> inside the <code>OAuth2AuthorizationConfig</code> to connect <code>Users</code> to the <code>AuthorizationServerEndpointsConfigurer</code> as follows:  </p>

<pre><code>@Autowired//THIS IS A TEST
private Users users;//THIS IS A TEST

@Override
public void configure(AuthorizationServerEndpointsConfigurer endpoints) throws Exception {
   endpoints.authenticationManager(authenticationManager)
        .accessTokenConverter(jwtAccessTokenConverter())
        .userDetailsService(users)//DetailsService)//THIS LINE IS A TEST
        ;
}
</code></pre>

<p>But the Spring Boot logs indicate that the user <code>Samwise</code> was not found, which means that the <code>UserDetailsService</code> was not successfully hooked up.  Here is the relevant excerpt from the Spring Boot logs:  </p>

<pre><code>2016-04-20 15:34:39.998 DEBUG 5535 --- [nio-9999-exec-9] o.s.s.a.dao.DaoAuthenticationProvider    :  
        User 'Samwise' not found
2016-04-20 15:34:39.998 DEBUG 5535 --- [nio-9999-exec-9]   
        w.a.UsernamePasswordAuthenticationFilter :  
        Authentication request failed:  
        org.springframework.security.authentication.BadCredentialsException:  
        Bad credentials
</code></pre>

<p><strong>What else can I try?</strong></p>
",807797,,807797,,2016-04-20 22:42:57,2018-08-23 20:13:41,Add custom UserDetailsService to Spring Security OAuth2 app,<spring><spring-security><spring-boot><spring-security-oauth2><spring-oauth2>,2,0,3,,
Spring,29831953,1,29836337,,2015,,7,19117,"<p>This is an extension to my previous question <a href=""https://stackoverflow.com/questions/29782148/why-do-i-need-main-method-if-i-develop-web-app-as-war-using-spring-boot"">here</a> at SO. As per this post, main method is NOT required to generate a <code>deployable war</code></p>

<p>I am trying to generate a <code>deployable war</code> for this simple application of <a href=""https://spring.io/guides/gs/uploading-files/"" rel=""nofollow noreferrer"">uploading files</a>. The source code can be for this example application can be found <a href=""https://github.com/spring-guides/gs-uploading-files/tree/master/complete"" rel=""nofollow noreferrer"">here</a>.</p>

<p>Following the instructions from spring boot for jar to war conversion, I changed my <code>pom.xml</code> to reflect the following. (Just added <code>tomcat</code> dependency with scope <code>provided</code>).</p>

<p>Reference: <a href=""http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#build-tool-plugins-maven-packaging"" rel=""nofollow noreferrer"">http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#build-tool-plugins-maven-packaging</a></p>

<pre><code>      &lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;
&lt;project xmlns=""http://maven.apache.org/POM/4.0.0"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""
    xsi:schemaLocation=""http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd""&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
    &lt;artifactId&gt;gs-uploading-files&lt;/artifactId&gt;
    &lt;version&gt;0.1.0&lt;/version&gt;
    &lt;packaging&gt;war&lt;/packaging&gt;

    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;1.2.3.RELEASE&lt;/version&gt;
    &lt;/parent&gt;


    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;

    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;
            &lt;scope&gt;provided&lt;/scope&gt;
        &lt;/dependency&gt;

    &lt;/dependencies&gt;

    &lt;properties&gt;
        &lt;java.version&gt;1.7&lt;/java.version&gt;
    &lt;/properties&gt;

    &lt;repositories&gt;
        &lt;repository&gt;
            &lt;id&gt;spring-releases&lt;/id&gt;
            &lt;name&gt;Spring Releases&lt;/name&gt;
            &lt;url&gt;https://repo.spring.io/libs-release&lt;/url&gt;
        &lt;/repository&gt;
    &lt;/repositories&gt;
    &lt;pluginRepositories&gt;
        &lt;pluginRepository&gt;
            &lt;id&gt;spring-releases&lt;/id&gt;
            &lt;name&gt;Spring Releases&lt;/name&gt;
            &lt;url&gt;https://repo.spring.io/libs-release&lt;/url&gt;
        &lt;/pluginRepository&gt;
    &lt;/pluginRepositories&gt;
&lt;/project&gt;
</code></pre>

<p>Then I changed <code>Application.java</code> as follows</p>

<p>Reference: <a href=""http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto-create-a-deployable-war-file"" rel=""nofollow noreferrer"">http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto-create-a-deployable-war-file</a></p>

<pre><code>@SpringBootApplication
public class Application extends SpringBootServletInitializer{

    @Override
    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {
        return application.sources(Application.class);
    }

    /*public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    } */
} 
</code></pre>

<p>I tried two scenarios. both fail with the following error (<code>Unable to find main class</code>).</p>

<ol>
<li>No main method (NOTE I have commented out main method above)</li>
<li>No application.Java file (commented out everything from this file - not shown here)</li>
</ol>

<p>Error:</p>

<pre><code>[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 9.218s
[INFO] Finished at: Thu Apr 23 11:46:24 PDT 2015
[INFO] Final Memory: 22M/222M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:1.2.3.RELEASE:repackage (default) on project gs-uploading-files: Execution default of goal org.springframework.boot:spring-boot-maven-plugin:1.2.3.RELEASE:repackage failed: Unable to find main class -&gt; [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginExecutionException
</code></pre>

<p><strong>PS: when I have main method intact, the build is successful</strong></p>
",1988876,,-1,,2017-05-23 12:17:02,2016-04-14 1:34:00,maven build failing when generating war package for spring boot application?,<spring><maven><tomcat><spring-boot>,2,5,6,,
Spring,34512248,1,34576917,,2015,,7,1291,"<p>I'm trying to use Facebook sign in as described in 
<a href=""https://github.com/spring-guides/gs-accessing-facebook"" rel=""noreferrer"">https://github.com/spring-guides/gs-accessing-facebook</a></p>

<p>When I'm trying to create JdbcUsersConnectionRepository, I need spring security in class path.
And when I add spring security I receive</p>

<pre><code>""java.lang.IllegalStateException: Unable to get a ConnectionRepository: no user signed in""
</code></pre>

<p>when trying to receive Connection</p>

<pre><code>Connection&lt;Facebook&gt; connection = connectionRepository.findPrimaryConnection(Facebook.class);
</code></pre>

<p>or checking</p>

<pre><code>if (!facebook.isAuthorized())
</code></pre>

<p>All this happens only when spring security is in the class path</p>
",20391,,,,,2016-10-31 12:55:47,"Spring Social: ""Unable to get a ConnectionRepository: no user signed in""",<spring><facebook><spring-security><spring-social><spring-social-facebook>,2,0,,,
Spring,34606760,1,34619077,,2016,,8,14125,"<p>Given a Spring Boot + Thymeleaf web application (this is nearly identical to the Spring project's <a href=""https://github.com/spring-guides/gs-securing-web/tree/master/initial"" rel=""noreferrer"">gs-consuming-rest ""initial"" code tree</a>):</p>

<pre class=""lang-none prettyprint-override""><code> pom.xml
 src
     main
      java
       hello
           Application.java
           Config.java
           Controller.java
      resources
          templates
              index.html
     test
         java
             hello
                 ControllerTest.java
</code></pre>

<p>...the user is greeted just fine with ""Hello World!"" at <code>http://localhost:8080/</code>, but the wiring of Spring's ""context"" does not seem to apply within the integration test (<code>ControllerTest.java</code>):</p>

<pre class=""lang-none prettyprint-override""><code>java.lang.AssertionError: Status 
Expected :200
Actual   :404
</code></pre>

<p>What is wrong with the <strong>project layout</strong>, and/or the <strong>configuration annotations</strong> in the test?</p>

<p><em><code>src/main/webapp/</code> is intentionally missing, along with things like <code>web.xml</code> and <code>WEB-INF/</code>.  The goal here is to use minimal configuration, with an integration test to test-drive the development of the view and controller of the application.</em></p>

<p>Gory details below.  Sorry in advance for the ""wall of text.""</p>

<hr>

<h3>pom.xml</h3>

<pre class=""lang-xml prettyprint-override""><code>&lt;parent&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
    &lt;version&gt;1.3.1.RELEASE&lt;/version&gt;
&lt;/parent&gt;

&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>

<h3>Application.java</h3>

<pre class=""lang-java prettyprint-override""><code>package hello;

// ...

@SpringBootApplication
public class Application {

  public static void main(String[] args) throws Throwable {
    SpringApplication.run(Application.class, args);
  }
}
</code></pre>

<h3>Controller.java</h3>

<pre class=""lang-java prettyprint-override""><code>package hello;

@org.springframework.stereotype.Controller
public class Controller {
}
</code></pre>

<h3>Config.java</h3>

<pre class=""lang-java prettyprint-override""><code>package hello;

// ...

@Configuration
public class Config extends WebMvcConfigurerAdapter {

  @Override
  public void addViewControllers(ViewControllerRegistry registry) {
    registry.addViewController(""/"").setViewName(""index"");
  }
}
</code></pre>

<h3>ControllerTest.java</h3>

<pre class=""lang-java prettyprint-override""><code>package hello;

// ...

@RunWith(SpringJUnit4ClassRunner.class)
@WebAppConfiguration
@ContextConfiguration(classes = Config.class)
public class ControllerTest {

  @Autowired
  private WebApplicationContext wac;

  private MockMvc mockMvc;

  @Before
  public void setup() {
    mockMvc = MockMvcBuilders.webAppContextSetup(wac).build();
  }

  @Test
  public void test() throws Exception {
    this.mockMvc
        .perform(get(""/""))
        .andExpect(status().isOk());
  }
}
</code></pre>

<h3>index.html</h3>

<pre class=""lang-html prettyprint-override""><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Hello World!&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;p&gt;Hello world!&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
",1265245,,1265245,,2016-01-07 19:18:48,2017-09-21 19:24:50,@WebAppConfiguration and @ContextConfiguration for Spring Boot + Thymeleaf,<java><spring><spring-boot><integration-testing><thymeleaf>,2,2,2,,
Spring,46174992,1,46229614,,2017,,8,628,"<p>I have extended spring security oauth example <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/tree/master/auth-server"" rel=""noreferrer"">social-auth-server</a>, linkedIn was added as third authentication option.
This project is described in tutorial <a href=""https://spring.io/guides/tutorials/spring-boot-oauth2/#_social_login_authserver"" rel=""noreferrer"">Hosting an Authorization Server</a>. </p>

<p>Source code: <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/tree/master/auth-server"" rel=""noreferrer"">https://github.com/spring-guides/tut-spring-boot-oauth2/tree/master/auth-server</a></p>

<p>How to configure this client to add client_id?</p>

<p>LinkedIn properties:</p>

<pre><code>linkedin:
  client:
    clientId: XXX
    clientSecret: YYY
    accessTokenUri: https://www.linkedin.com/oauth/v2/accessToken
    userAuthorizationUri: https://www.linkedin.com/oauth/v2/authorization
  resource:
    userInfoUri: https://api.linkedin.com/v1/people/~?format=json
</code></pre>

<p>Logs:</p>

<pre><code>uth2ClientAuthenticationProcessingFilter : Request is to process authentication
 g.c.AuthorizationCodeAccessTokenProvider : Retrieving token from https://www.linkedin.com/oauth/v2/accessToken
 g.c.AuthorizationCodeAccessTokenProvider : Encoding and sending form: {grant_type=[authorization_code], code=[XXXXXXXXXXXXXXXXXXXX], redirect_uri=[http://localhost:8080/login/linkedin]}
 uth2ClientAuthenticationProcessingFilter : Authentication request failed: org.springframework.security.authentication.BadCredentialsException: Could not obtain access token
</code></pre>

<p>Exception:</p>

<pre><code>org.springframework.security.authentication.BadCredentialsException: Could not obtain access token
    at org.springframework.security.oauth2.client.filter.OAuth2ClientAuthenticationProcessingFilter.attemptAuthentication(OAuth2ClientAuthenticationProcessingFilter.java:107) ~[spring-security-oauth2-2.0.13.RELEASE.jar:na]
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212) ~[spring-security-web-4.2.2.RELEASE.jar:4.2.2.RELEASE]
    at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:112) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:73) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) [spring-security-web-4.2.2.RELEASE.jar:4.2.2.RELEASE]
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116) [spring-security-web-4.2.2.RELEASE.jar:4.2.2.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) [spring-security-web-4.2.2.RELEASE.jar:4.2.2.RELEASE]
    at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:100) [spring-security-web-4.2.2.RELEASE.jar:4.2.2.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) [spring-security-web-4.2.2.RELEASE.jar:4.2.2.RELEASE]
    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64) [spring-security-web-4.2.2.RELEASE.jar:4.2.2.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) [spring-security-web-4.2.2.RELEASE.jar:4.2.2.RELEASE]
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105) [spring-security-web-4.2.2.RELEASE.jar:4.2.2.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) [spring-security-web-4.2.2.RELEASE.jar:4.2.2.RELEASE]
    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56) [spring-security-web-4.2.2.RELEASE.jar:4.2.2.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) [spring-security-web-4.2.2.RELEASE.jar:4.2.2.RELEASE]
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:214) [spring-security-web-4.2.2.RELEASE.jar:4.2.2.RELEASE]
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:177) [spring-security-web-4.2.2.RELEASE.jar:4.2.2.RELEASE]
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.springframework.security.oauth2.client.filter.OAuth2ClientContextFilter.doFilter(OAuth2ClientContextFilter.java:60) [spring-security-oauth2-2.0.13.RELEASE.jar:na]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:105) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.springframework.boot.actuate.autoconfigure.MetricsFilter.doFilterInternal(MetricsFilter.java:106) [spring-boot-actuator-1.5.2.RELEASE.jar:1.5.2.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:474) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:349) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:783) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:798) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1434) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_144]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_144]
    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at java.lang.Thread.run(Thread.java:748) [na:1.8.0_144]
Caused by: org.springframework.security.oauth2.client.resource.OAuth2AccessDeniedException: Access token denied.
    at org.springframework.security.oauth2.client.token.OAuth2AccessTokenSupport.retrieveToken(OAuth2AccessTokenSupport.java:142) ~[spring-security-oauth2-2.0.13.RELEASE.jar:na]
    at org.springframework.security.oauth2.client.token.grant.code.AuthorizationCodeAccessTokenProvider.obtainAccessToken(AuthorizationCodeAccessTokenProvider.java:209) ~[spring-security-oauth2-2.0.13.RELEASE.jar:na]
    at org.springframework.security.oauth2.client.token.AccessTokenProviderChain.obtainNewAccessTokenInternal(AccessTokenProviderChain.java:148) ~[spring-security-oauth2-2.0.13.RELEASE.jar:na]
    at org.springframework.security.oauth2.client.token.AccessTokenProviderChain.obtainAccessToken(AccessTokenProviderChain.java:121) ~[spring-security-oauth2-2.0.13.RELEASE.jar:na]
    at org.springframework.security.oauth2.client.OAuth2RestTemplate.acquireAccessToken(OAuth2RestTemplate.java:221) ~[spring-security-oauth2-2.0.13.RELEASE.jar:na]
    at org.springframework.security.oauth2.client.OAuth2RestTemplate.getAccessToken(OAuth2RestTemplate.java:173) ~[spring-security-oauth2-2.0.13.RELEASE.jar:na]
    at org.springframework.security.oauth2.client.filter.OAuth2ClientAuthenticationProcessingFilter.attemptAuthentication(OAuth2ClientAuthenticationProcessingFilter.java:105) ~[spring-security-oauth2-2.0.13.RELEASE.jar:na]
    ... 62 common frames omitted
Caused by: org.springframework.security.oauth2.common.exceptions.InvalidRequestException: A required parameter ""client_id"" is missing
    at org.springframework.security.oauth2.common.exceptions.OAuth2ExceptionJackson2Deserializer.deserialize(OAuth2ExceptionJackson2Deserializer.java:100) ~[spring-security-oauth2-2.0.13.RELEASE.jar:na]
    at org.springframework.security.oauth2.common.exceptions.OAuth2ExceptionJackson2Deserializer.deserialize(OAuth2ExceptionJackson2Deserializer.java:33) ~[spring-security-oauth2-2.0.13.RELEASE.jar:na]
    at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:3798) ~[jackson-databind-2.8.7.jar:2.8.7]
    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2922) ~[jackson-databind-2.8.7.jar:2.8.7]
    at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:237) ~[spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readInternal(AbstractJackson2HttpMessageConverter.java:217) ~[spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.http.converter.AbstractHttpMessageConverter.read(AbstractHttpMessageConverter.java:193) ~[spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.security.oauth2.client.token.OAuth2AccessTokenSupport$AccessTokenErrorHandler.handleError(OAuth2AccessTokenSupport.java:235) ~[spring-security-oauth2-2.0.13.RELEASE.jar:na]
    at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:700) ~[spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:653) ~[spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:621) ~[spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.security.oauth2.client.token.OAuth2AccessTokenSupport.retrieveToken(OAuth2AccessTokenSupport.java:137) ~[spring-security-oauth2-2.0.13.RELEASE.jar:na]
    ... 68 common frames omitted
</code></pre>
",516167,,516167,,2017-09-13 10:04:49,2018-07-04 17:10:02,Missing client_id when accessing token with linkedIn,<spring><spring-security><oauth><spring-oauth2>,2,0,,,
Spring,34821978,1,,,2016,,8,16335,"<p>I am studying AngularJS and REST.  A code sample uses the word <code>callback</code> repeatedly in an authentication function.  <strong>Is callback a keyword in JavaScript or Angular?  Or is <code>callback</code> just a custom variable created in this code?  How does <code>callback</code> work in the code below?</strong>  Googling <code>callback</code> and AngularJS is not producing usable results.  <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/blob/master/modular/src/main/resources/static/js/auth/auth.js"" rel=""noreferrer"">The code for the AngularJS module in question can be read at this link</a>, which also contains all the code for the sample app.  </p>

<p>Here is the module code itself:  </p>

<pre><code>angular.module('auth', []).factory( 'auth',

    function($rootScope, $http, $location) {

        enter = function() {
            if ($location.path() != auth.loginPath) {
                auth.path = $location.path();
                if (!auth.authenticated) {
                    $location.path(auth.loginPath);
                }
            }                   
        }

        var auth = {

            authenticated : false,

            loginPath : '/login',
            logoutPath : '/logout',
            homePath : '/',
            path : $location.path(),

            authenticate : function(credentials, callback) {

                var headers = credentials &amp;&amp; credentials.username ? {
                    authorization : ""Basic ""
                            + btoa(credentials.username + "":""
                                    + credentials.password)
                } : {};

                $http.get('user', {
                    headers : headers
                }).success(function(data) {
                    if (data.name) {
                        auth.authenticated = true;
                    } else {
                        auth.authenticated = false;
                    }
                    callback &amp;&amp; callback(auth.authenticated);
                    $location.path(auth.path==auth.loginPath ? auth.homePath : auth.path);
                }).error(function() {
                    auth.authenticated = false;
                    callback &amp;&amp; callback(false);
                });

            },

            clear : function() {
                $location.path(auth.loginPath);
                auth.authenticated = false;
                $http.post(auth.logoutPath, {}).success(function() {
                    console.log(""Logout succeeded"");
                }).error(function(data) {
                    console.log(""Logout failed"");
                });
            },

            init : function(homePath, loginPath, logoutPath) {

                auth.homePath = homePath;
                auth.loginPath = loginPath;
                auth.logoutPath = logoutPath;

                auth.authenticate({}, function(authenticated) {
                    if (authenticated) {
                        $location.path(auth.path);
                    }
                })

                // Guard route changes and switch to login page if unauthenticated
                $rootScope.$on('$routeChangeStart', function() {
                    enter();
                });

            }

        };

        return auth;

    });
</code></pre>

<hr>

<p><strong>ADDITIONAL INFORMATION:</strong>  </p>

<hr>

<p>Based on @okonyk's response, I am including code from a DIFFERENT MODULE that calls the auth.authenticate() function:  </p>

<pre><code>$scope.login = function() {
    auth.authenticate($scope.credentials, function(authenticated) {
        if (authenticated) {
            //do some stuff
             $scope.error = false;
         } else { 
            $scope.error = true;
        }
    })
}
</code></pre>

<p>So how does the call from <code>login()</code> to <code>auth.authenticate($scope.credentials, function(authenticated)</code> work?  Is the <code>function(authenticated)</code> parameter sending a boolean that determines functionality inside <code>auth.authenticate()</code>?  If so, can you please be explicit?  I can piece it together.  For example true might indicate to do the callback, while false might indicate note to do the callback, but it would help to have it explained.  <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/blob/master/modular/src/main/resources/static/js/navigation/navigation.js"" rel=""noreferrer"">You can read the code in the sample app for the other module with the <code>login()</code> method by clicking on this link</a>.</p>
",807797,,807797,,2016-01-16 6:48:54,2016-01-16 8:18:04,How does callback work in AngularJS call to REST service?,<javascript><angularjs>,2,0,,,
Spring,34751700,1,38867506,,2016,,9,7222,"<p>I have been really been searching high and low for the last few days on how to do this and have finally decided to admit defeat and ask for help, please!!!</p>

<p>I have followed Dr Dave Syer's tutorial on Angular and Spring Security specifically the Zuul Proxy as an api gateway and using Spring Session with Redis (<a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/double#_sso_with_oauth2_angular_js_and_spring_security_part_v"">https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/double#_sso_with_oauth2_angular_js_and_spring_security_part_v</a>)</p>

<p>The issue I am having is that I am calling resource rest services via the gateway from an external application with the following header:</p>

<pre><code>String plainCreds = ""user:password"";
byte[] plainCredsBytes = plainCreds.getBytes();
byte[] base64CredsBytes = Base64.getEncoder().encode(plainCredsBytes);
String base64Creds = new String(base64CredsBytes);

HttpHeaders headers = new HttpHeaders();
headers.add(""Authorization"", ""Basic "" + base64Creds);
</code></pre>

<p>to be authenticated and then routed by zuul and then the resource to have access to the authenticated session via redis.</p>

<p>The issue is that the session seems to only commit to redis in the gateway after the request has responded. So what is happening is that when I call a resource service with the header, I can see the successful authentication occurring in the gateway and session being created, however I am getting a 403 in the resource due to the session not being in redis after its been routed via zuul.</p>

<p>However if I get the error, grab the session id and add it to the header and try again it works because now my authenticated session is available for the resource project after its been routed.</p>

<p>Please could someone point me in the direction of how I go about getting my calls via the gateway to authenticate and route in the same request please?</p>

<p>Thanks
Justin</p>
",4977572,,,,,2016-10-20 12:33:45,Spring Zuul API Gateway with Spring Session / Redis Authenticate and Route in same Request,<spring-security><spring-cloud><spring-session>,2,1,7,,
Spring,43458500,1,48949537,,2017,,10,3373,"<p>I'm studying the Spring Boot and JMS example and yes, I'm rather new on this</p>

<p>Since we work with Oracle, I would like to migrate the Spring Boot &amp; JMS example from ActiveMQ to Oracle Advanced Queueing. However I really find very little information on that.</p>

<p>As far as I see I need to replace the code below for the Oracle version, yet I did not manage to found out how.</p>

<pre><code>@Bean
public JmsListenerContainerFactory&lt;?&gt; myFactory(ConnectionFactory connectionFactory,
                                                DefaultJmsListenerContainerFactoryConfigurer configurer) {
    DefaultJmsListenerContainerFactory factory = new DefaultJmsListenerContainerFactory();
    // This provides all boot's default to this factory, including the message converter
    configurer.configure(factory, connectionFactory);
    // You could still override some of Boot's default if necessary.
    return factory;
</code></pre>

<p>}</p>

<p>The origin code can be found at <a href=""https://github.com/spring-guides/gs-messaging-jms"" rel=""noreferrer"">Github</a></p>

<p>Help would be greatly appreciated!</p>
",2529104,,,,,2018-11-04 11:15:35,How to migrate Spring Boot JMS from ActiveMQ to Oracle Advanced Queueing,<java><oracle><spring-boot><spring-jms><advanced-queuing>,2,4,4,,
Spring,27987068,1,45322933,,2015,,11,6800,"<p>I've modified the Spring Boot JPA Data example (<a href=""https://github.com/spring-guides/gs-accessing-data-jpa.git"">https://github.com/spring-guides/gs-accessing-data-jpa.git</a>) slightly adding an Order entity and a corresponding one to many mapping to it from the customer.  When I run the example there are several Syntax Error in SQL Statement lines logged by Hibernate.  I'm trying to figure out why?  I've pasted the code for the entities and the console output from the application below.</p>

<pre><code>package hello;

import java.util.List;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.OneToMany;

@Entity
public class Customer {

@Id
@GeneratedValue(strategy=GenerationType.AUTO)
private long id;
private String firstName;
private String lastName;
@OneToMany(mappedBy=""customer"")
private List&lt;Order&gt; orders;


protected Customer() {}

public Customer(String firstName, String lastName) {
    this.firstName = firstName;
    this.lastName = lastName;
}

@Override
public String toString() {
    return String.format(
            ""Customer[id=%d, firstName='%s', lastName='%s']"",
            id, firstName, lastName);
}

}
</code></pre>

<p>And a corresponding Order entity:</p>

<pre><code>package hello;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.ManyToOne;

@Entity
public class Order {

@Id
@GeneratedValue(strategy=GenerationType.AUTO)
private long id;

protected Order() {}

double amount;

@ManyToOne
Customer customer;
}
</code></pre>

<p>And the console output:</p>

<pre><code>    .   ____          _            __ _ _
     /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
    ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
     \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
      '  |____| .__|_| |_|_| |_\__, | / / / /
     =========|_|==============|___/=/_/_/_/
     :: Spring Boot ::       (v1.1.10.RELEASE)

    2015-01-16 08:56:53.116  INFO 27810 --- [           main] hello.Application                        : Starting Application on MKI with PID 27810 (/home/ole/Documents/workspace-sts-3.6.3.RELEASE/gs-accessing-data-jpa-complete/target/classes started by ole in /home/ole/Documents/workspace-sts-3.6.3.RELEASE/gs-accessing-data-jpa-complete)
    2015-01-16 08:56:53.149  INFO 27810 --- [           main] s.c.a.AnnotationConfigApplicationContext : Refreshing org.springframework.context.annotation.AnnotationConfigApplicationContext@5d59e6f1: startup date [Fri Jan 16 08:56:53 CST 2015]; root of context hierarchy
    2015-01-16 08:56:54.253  INFO 27810 --- [           main] j.LocalContainerEntityManagerFactoryBean : Building JPA container EntityManagerFactory for persistence unit 'default'
    2015-01-16 08:56:54.269  INFO 27810 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [
      name: default
      ...]
    2015-01-16 08:56:54.320  INFO 27810 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate Core {4.3.7.Final}
    2015-01-16 08:56:54.322  INFO 27810 --- [           main] org.hibernate.cfg.Environment            : HHH000205: Loaded properties from resource hibernate.properties: {hibernate.connection.charSet=UTF-8, hibernate.dialect=org.hibernate.dialect.H2Dialect, hibernate.show_sql=true, hibernate.export.schema.delimiter=;, hibernate.bytecode.use_reflection_optimizer=false, hibernate.ejb.naming_strategy=org.hibernate.cfg.ImprovedNamingStrategy}
    2015-01-16 08:56:54.322  INFO 27810 --- [           main] org.hibernate.cfg.Environment            : HHH000021: Bytecode provider name : javassist
    2015-01-16 08:56:54.462  INFO 27810 --- [           main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {4.0.5.Final}
    2015-01-16 08:56:54.499  INFO 27810 --- [           main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
    2015-01-16 08:56:54.591  INFO 27810 --- [           main] o.h.h.i.ast.ASTQueryTranslatorFactory    : HHH000397: Using ASTQueryTranslatorFactory
    2015-01-16 08:56:54.751  INFO 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : HHH000227: Running hbm2ddl schema export
    Hibernate: alter table order drop constraint FK_m6q2ofkj1g5aobtb2p00ajpqg if exists
    2015-01-16 08:56:54.752 ERROR 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : HHH000389: Unsuccessful: alter table order drop constraint FK_m6q2ofkj1g5aobtb2p00ajpqg if exists
    2015-01-16 08:56:54.753 ERROR 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : Syntax error in SQL statement ""ALTER TABLE ORDER[*] DROP CONSTRAINT FK_M6Q2OFKJ1G5AOBTB2P00AJPQG IF EXISTS ""; expected ""identifier""; SQL statement:
    alter table order drop constraint FK_m6q2ofkj1g5aobtb2p00ajpqg if exists [42001-176]
    Hibernate: drop table customer if exists
    Hibernate: drop table order if exists
    2015-01-16 08:56:54.753 ERROR 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : HHH000389: Unsuccessful: drop table order if exists
    2015-01-16 08:56:54.753 ERROR 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : Syntax error in SQL statement ""DROP TABLE ORDER[*] IF EXISTS ""; expected ""identifier""; SQL statement:
    drop table order if exists [42001-176]
    Hibernate: create table customer (id bigint generated by default as identity, first_name varchar(255), last_name varchar(255), primary key (id))
    Hibernate: create table order (id bigint generated by default as identity, amount double not null, customer_id bigint, primary key (id))
    2015-01-16 08:56:54.756 ERROR 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : HHH000389: Unsuccessful: create table order (id bigint generated by default as identity, amount double not null, customer_id bigint, primary key (id))
    2015-01-16 08:56:54.756 ERROR 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : Syntax error in SQL statement ""CREATE TABLE ORDER[*] (ID BIGINT GENERATED BY DEFAULT AS IDENTITY, AMOUNT DOUBLE NOT NULL, CUSTOMER_ID BIGINT, PRIMARY KEY (ID)) ""; expected ""identifier""; SQL statement:
    create table order (id bigint generated by default as identity, amount double not null, customer_id bigint, primary key (id)) [42001-176]
    Hibernate: alter table order add constraint FK_m6q2ofkj1g5aobtb2p00ajpqg foreign key (customer_id) references customer
    2015-01-16 08:56:54.757 ERROR 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : HHH000389: Unsuccessful: alter table order add constraint FK_m6q2ofkj1g5aobtb2p00ajpqg foreign key (customer_id) references customer
    2015-01-16 08:56:54.757 ERROR 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : Syntax error in SQL statement ""ALTER TABLE ORDER[*] ADD CONSTRAINT FK_M6Q2OFKJ1G5AOBTB2P00AJPQG FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMER ""; expected ""identifier""; SQL statement:
    alter table order add constraint FK_m6q2ofkj1g5aobtb2p00ajpqg foreign key (customer_id) references customer [42001-176]
    2015-01-16 08:56:54.757  INFO 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : HHH000230: Schema export complete
    2015-01-16 08:56:55.085  INFO 27810 --- [           main] o.s.j.e.a.AnnotationMBeanExporter        : Registering beans for JMX exposure on startup
    2015-01-16 08:56:55.102  INFO 27810 --- [           main] hello.Application                        : Started Application in 2.286 seconds (JVM running for 2.604)
    Hibernate: insert into customer (id, first_name, last_name) values (null, ?, ?)
    Hibernate: insert into customer (id, first_name, last_name) values (null, ?, ?)
    Hibernate: insert into customer (id, first_name, last_name) values (null, ?, ?)
    Hibernate: insert into customer (id, first_name, last_name) values (null, ?, ?)
    Hibernate: insert into customer (id, first_name, last_name) values (null, ?, ?)
    Hibernate: select customer0_.id as id1_0_, customer0_.first_name as first_na2_0_, customer0_.last_name as last_nam3_0_ from customer customer0_
    Customers found with findAll():
    -------------------------------
    Customer[id=1, firstName='Jack', lastName='Bauer']
    Customer[id=2, firstName='Chloe', lastName='O'Brian']
    Customer[id=3, firstName='Kim', lastName='Bauer']
    Customer[id=4, firstName='David', lastName='Palmer']
    Customer[id=5, firstName='Michelle', lastName='Dessler']

    Hibernate: select customer0_.id as id1_0_0_, customer0_.first_name as first_na2_0_0_, customer0_.last_name as last_nam3_0_0_ from customer customer0_ where customer0_.id=?
    Customer found with findOne(1L):
    --------------------------------
    Customer[id=1, firstName='Jack', lastName='Bauer']

    Hibernate: select customer0_.id as id1_0_, customer0_.first_name as first_na2_0_, customer0_.last_name as last_nam3_0_ from customer customer0_ where customer0_.last_name=?
    Customer found with findByLastName('Bauer'):
    --------------------------------------------
    Customer[id=1, firstName='Jack', lastName='Bauer']
    Customer[id=3, firstName='Kim', lastName='Bauer']
    Hibernate: select customer0_.id as id1_0_, customer0_.first_name as first_na2_0_, customer0_.last_name as last_nam3_0_ from customer customer0_
    Hibernate: delete from customer where id=?
    Hibernate: delete from customer where id=?
    Hibernate: delete from customer where id=?
    Hibernate: delete from customer where id=?
    Hibernate: delete from customer where id=?
    2015-01-16 08:56:55.258  INFO 27810 --- [           main] s.c.a.AnnotationConfigApplicationContext : Closing org.springframework.context.annotation.AnnotationConfigApplicationContext@5d59e6f1: startup date [Fri Jan 16 08:56:53 CST 2015]; root of context hierarchy
    2015-01-16 08:56:55.259  INFO 27810 --- [           main] o.s.j.e.a.AnnotationMBeanExporter        : Unregistering JMX-exposed beans on shutdown
    2015-01-16 08:56:55.260  INFO 27810 --- [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
    2015-01-16 08:56:55.261  INFO 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : HHH000227: Running hbm2ddl schema export
    Hibernate: alter table order drop constraint FK_m6q2ofkj1g5aobtb2p00ajpqg if exists
    2015-01-16 08:56:55.261 ERROR 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : HHH000389: Unsuccessful: alter table order drop constraint FK_m6q2ofkj1g5aobtb2p00ajpqg if exists
    2015-01-16 08:56:55.261 ERROR 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : Syntax error in SQL statement ""ALTER TABLE ORDER[*] DROP CONSTRAINT FK_M6Q2OFKJ1G5AOBTB2P00AJPQG IF EXISTS ""; expected ""identifier""; SQL statement:
    alter table order drop constraint FK_m6q2ofkj1g5aobtb2p00ajpqg if exists [42001-176]
    Hibernate: drop table customer if exists
    Hibernate: drop table order if exists
    2015-01-16 08:56:55.263 ERROR 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : HHH000389: Unsuccessful: drop table order if exists
    2015-01-16 08:56:55.263 ERROR 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : Syntax error in SQL statement ""DROP TABLE ORDER[*] IF EXISTS ""; expected ""identifier""; SQL statement:
    drop table order if exists [42001-176]
    2015-01-16 08:56:55.263  INFO 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : HHH000230: Schema export complete
</code></pre>

<p>Thoughts?  </p>

<p>TIA,
- Ole</p>
",1684269,,,,,2018-07-13 13:10:55,Spring Boot Hibernate Syntax Error in SQL Statement,<spring><hibernate><jpa><spring-boot><spring-data-jpa>,2,2,,,
Spring,37061697,1,,,2016,,14,2025,"<p>Complete code for a Spring OAuth2 implementation of Multi-Factor Authentication has been uploaded to <a href=""https://jumpshare.com/v/oj7wSZaZRgJHEwqYiJ2p"" rel=""nofollow noreferrer"">a file sharing site at this link</a>.  Instructions are given below to recreate the current problem on any computer in only a few minutes.</p>

<p><hr/>
<strong>CURRENT PROBLEM:</strong></p>

<hr/>  

<p>Most of the authentication algorithm works correctly.  The program does not break until the very end of the control flow shown below.  Specifically, an <code>Invalid CSRF token found for http://localhost:9999/uaa/oauth/token</code> error is being thrown at the end of the <strong>SECOND PASS</strong> below.  The app in the link above was developed by adding a custom <code>OAuth2RequestFactory</code>, <code>TwoFactorAuthenticationFilter</code> and <code>TwoFactorAuthenticationController</code> to the <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2/authserver"" rel=""nofollow noreferrer""><code>authserver</code> app</a> of this <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2"" rel=""nofollow noreferrer"">Spring Boot OAuth2 GitHub sample</a>.  <strong>What specific changes need to be made to the code below in order to resolve this CSRF token error and enable 2-factor authentication?</strong>  </p>

<p>My research leads me to suspect that the <code>CustomOAuth2RequestFactory</code> (<a href=""http://docs.spring.io/spring-security/oauth/apidocs/org/springframework/security/oauth2/provider/OAuth2RequestFactory.html"" rel=""nofollow noreferrer"">API at this link</a>) might be the place to configure a solution because it defines ways for managing <a href=""http://docs.spring.io/spring-security/oauth/apidocs/org/springframework/security/oauth2/provider/AuthorizationRequest.html"" rel=""nofollow noreferrer""><code>AuthorizationRequest</code></a>s and <a href=""http://docs.spring.io/spring-security/oauth/apidocs/org/springframework/security/oauth2/provider/TokenRequest.html"" rel=""nofollow noreferrer""><code>TokenRequest</code></a>s.  </p>

<p><strong><a href=""https://tools.ietf.org/html/rfc6749#section-4.1.1"" rel=""nofollow noreferrer"">This section of the official OAuth2 spec</a> indicates that the <code>state</code> parameter of the request made to the authorization endpoint is the place where the <code>csrf</code> token is added.</strong>  </p>

<p>Also, the code in the link uses <a href=""https://tools.ietf.org/html/rfc6749#section-4.1"" rel=""nofollow noreferrer"">the Authorization Code Grant Type described at this link to the official spec</a>, which would mean that Step C in the flow does not update the <code>csrf</code> code, thus triggering the error in Step D.  (You can view the entire flow including Step C and Step D in <a href=""https://tools.ietf.org/html/rfc6749#section-4.1"" rel=""nofollow noreferrer"">the official spec</a>.)</p>

<p><hr/>
<strong>CONTROL FLOW SURROUNDING THE CURRENT ERROR:</strong>  </p>

<hr/>  

<p>The current error is being thrown during the <strong>SECOND PASS</strong> through <code>TwoFactorAuthenticationFilter</code> in the flowchart below.  Everything works as intended until the control flow gets into the <strong>SECOND PASS</strong>.    </p>

<p>The following flowchart illustrates the control flow of the two factor authentication process that is employed by the code in the downloadable app.</p>

<p><img src=""https://s32.postimg.cc/5sahbqvrp/2_FA_OAuth_Flow.gif"">  </p>

<p>Specifically, the Firefox <code>HTTP</code> Headers for the sequence of <code>POST</code>s and <code>GET</code>s show that the same <code>XSRF</code> cookie is sent with every request in the sequence.  The <code>XSRF</code> token values do not cause a problem until after the <code>POST /secure/two_factor_authentication</code>, which triggers server processing at the <code>/oauth/authorize</code> and <code>/oauth/token</code> endpoints, with <code>/oauth/token</code> throwing the <code>Invalid CSRF token found for http://localhost:9999/uaa/oauth/token</code> error.  </p>

<p>To understand the relationship between the above control flow chart and the <code>/oauth/authorize</code> and <code>/oauth/token</code> endpoints, you can compare the above flowchart side by side <a href=""https://tools.ietf.org/html/rfc6749#section-4.1"" rel=""nofollow noreferrer"">with the chart for the single factor flow at the official spec</a> in a separate browser window.  The <strong>SECOND PASS</strong> above simply runs through the steps from the one-factor official spec a second time, but with greater permissions during the <strong>SECOND PASS</strong>.  </p>

<p><hr/><br>
<strong>WHAT THE LOGS SAY:</strong></p>

<hr/>  

<p>The HTTP Request and Response Headers indicate that:  </p>

<p>1.) A POST to <code>9999/login</code> with the correct <code>username</code> and <code>password</code> submitted results in a redirect to <code>9999/authorize?client_id=acme&amp;redirect_uri=/login&amp;response_type=code&amp;state=sGXQ4v</code> followed by a <code>GET 9999/secure/two_factor_authenticated</code>.  One XSRF token remains constant across these exchanges.  </p>

<p>2.) A POST to <code>9999/secure/two_factor_authentication</code> with the correct pin code sends the same <code>XSRF</code> token, and gets successfully re-directed to <code>POST 9999/oauth/authorize</code> and makes it into <code>TwoFactorAuthenticationFilter.doFilterInternal()</code> and proceeds to <code>request 9999/oauth/token</code>, but <code>9999/oauth/token</code> rejects the request because the same old XSRF token does not match a new <code>XSRF</code> token value, which was apparently created during the <strong>FIRST PASS</strong>.    </p>

<p>One obvious difference between <code>1.)</code> and <code>2.)</code> is that the second <code>request 9999/oauth/authorize</code> in <code>2.)</code> does not contain the url parameters which are included in the first request to <code>9999/authorize?client_id=acme&amp;redirect_uri=/login&amp;response_type=code&amp;state=sGXQ4v</code> in <code>1.)</code>, and also defined in <a href=""https://tools.ietf.org/html/rfc6749#section-4.1"" rel=""nofollow noreferrer"">the official spec</a>.  But it is not clear if this is causing the problem.  </p>

<p>Also, it is not clear how to access the parameters to send a fully formed request from the <code>TwoFactorAuthenticationController.POST</code>.  I did a SYSO of the <code>parameters</code> <code>Map</code> in the <code>HttpServletRequest</code> for the <code>POST 9999/secure/two_factor_authentication</code> controller method, and all it contains are the <code>pinVal</code> and <code>_csrf</code> variables.  </p>

<p>You can read all the HTTP Headers and Spring Boot logs at a file sharing site <a href=""https://jumpshare.com/v/Xy2g91GLXLB8gkWmliMF"" rel=""nofollow noreferrer"">by clicking on this link</a>.</p>

<p><hr/>
<strong>A FAILED APPROACH:</strong>  </p>

<hr/>  

<p>I tried <a href=""https://stackoverflow.com/questions/20862299/with-spring-security-3-2-0-release-how-can-i-get-the-csrf-token-in-a-page-that#20960352"">@RobWinch's approach to a similar problem in the Spring Security 3.2 environment</a>, but the approach does not seem to apply to the context of Spring OAuth2.  Specifically, when the following <code>XSRF</code> update code block is uncommented in the <code>TwoFactorAuthenticationFilter</code> code shown below, the downstream request headers do show a different/new <code>XSRF</code> token value, but the same error is thrown.  </p>

<pre><code>if(AuthenticationUtil.hasAuthority(ROLE_TWO_FACTOR_AUTHENTICATED)){
    CsrfToken token = (CsrfToken) request.getAttribute(""_csrf"");
    response.setHeader(""XSRF-TOKEN""/*""X-CSRF-TOKEN""*/, token.getToken());
}
</code></pre>

<p><strong>This indicates that the <code>XSRF</code> configuration needs to be updated in a way that <code>/oauth/authorize</code> and <code>/oauth/token</code> are able to talk with each other and with the client and resource apps to successfully manage the <code>XSRF</code> token values.</strong>  Perhaps the <code>CustomOAuth2RequestFactory</code> is what needs to be changed to accomplish this.  But how?  </p>

<p><hr/>
<strong>RELEVANT CODE:</strong></p>

<hr/>  

<p>The code for <code>CustomOAuth2RequestFactory</code> is:  </p>

<pre><code>public class CustomOAuth2RequestFactory extends DefaultOAuth2RequestFactory {

    public static final String SAVED_AUTHORIZATION_REQUEST_SESSION_ATTRIBUTE_NAME = ""savedAuthorizationRequest"";

    public CustomOAuth2RequestFactory(ClientDetailsService clientDetailsService) {
        super(clientDetailsService);
    }

    @Override
    public AuthorizationRequest createAuthorizationRequest(Map&lt;String, String&gt; authorizationParameters) {
        ServletRequestAttributes attr = (ServletRequestAttributes) RequestContextHolder.currentRequestAttributes();
        HttpSession session = attr.getRequest().getSession(false);
        if (session != null) {
            AuthorizationRequest authorizationRequest = (AuthorizationRequest) session.getAttribute(SAVED_AUTHORIZATION_REQUEST_SESSION_ATTRIBUTE_NAME);
            if (authorizationRequest != null) {
                session.removeAttribute(SAVED_AUTHORIZATION_REQUEST_SESSION_ATTRIBUTE_NAME);
                return authorizationRequest;
            }
        }

        return super.createAuthorizationRequest(authorizationParameters);
    }
}
</code></pre>

<p>The code for <code>TwoFactorAuthenticationFilter</code> is:  </p>

<pre><code>//This class is added per: https://stackoverflow.com/questions/30319666/two-factor-authentication-with-spring-security-oauth2
/**
 * Stores the oauth authorizationRequest in the session so that it can
 * later be picked by the {@link com.example.CustomOAuth2RequestFactory}
 * to continue with the authoriztion flow.
 */
public class TwoFactorAuthenticationFilter extends OncePerRequestFilter {

    private RedirectStrategy redirectStrategy = new DefaultRedirectStrategy();
    private OAuth2RequestFactory oAuth2RequestFactory;
    //These next two are added as a test to avoid the compilation errors that happened when they were not defined.
    public static final String ROLE_TWO_FACTOR_AUTHENTICATED = ""ROLE_TWO_FACTOR_AUTHENTICATED"";
    public static final String ROLE_TWO_FACTOR_AUTHENTICATION_ENABLED = ""ROLE_TWO_FACTOR_AUTHENTICATION_ENABLED"";

    @Autowired
    public void setClientDetailsService(ClientDetailsService clientDetailsService) {
        oAuth2RequestFactory = new DefaultOAuth2RequestFactory(clientDetailsService);
    }

    private boolean twoFactorAuthenticationEnabled(Collection&lt;? extends GrantedAuthority&gt; authorities) {
        System.out.println(""&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; List of authorities includes: "");
        for (GrantedAuthority authority : authorities) {
            System.out.println(""auth: ""+authority.getAuthority() );
        }
        return authorities.stream().anyMatch(
            authority -&gt; ROLE_TWO_FACTOR_AUTHENTICATION_ENABLED.equals(authority.getAuthority())
        );
    }

    @Override
    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {
        System.out.println(""------------------ INSIDE TwoFactorAuthenticationFilter.doFilterInternal() ------------------------"");
        // Check if the user hasn't done the two factor authentication.
        if (AuthenticationUtil.isAuthenticated() &amp;&amp; !AuthenticationUtil.hasAuthority(ROLE_TWO_FACTOR_AUTHENTICATED)) {
        System.out.println(""++++++++++++++++++++++++ AUTHENTICATED BUT NOT TWO FACTOR +++++++++++++++++++++++++"");
        AuthorizationRequest authorizationRequest = oAuth2RequestFactory.createAuthorizationRequest(paramsFromRequest(request));
            /* Check if the client's authorities (authorizationRequest.getAuthorities()) or the user's ones
               require two factor authenticatoin. */
        System.out.println(""======================== twoFactorAuthenticationEnabled(authorizationRequest.getAuthorities()) is: "" + twoFactorAuthenticationEnabled(authorizationRequest.getAuthorities()) );
        System.out.println(""======================== twoFactorAuthenticationEnabled(SecurityContextHolder.getContext().getAuthentication().getAuthorities()) is: "" + twoFactorAuthenticationEnabled(SecurityContextHolder.getContext().getAuthentication().getAuthorities()) );
        if (twoFactorAuthenticationEnabled(authorizationRequest.getAuthorities()) ||
                twoFactorAuthenticationEnabled(SecurityContextHolder.getContext().getAuthentication().getAuthorities())) {
                // Save the authorizationRequest in the session. This allows the CustomOAuth2RequestFactory
                // to return this saved request to the AuthenticationEndpoint after the user successfully
                // did the two factor authentication.
                request.getSession().setAttribute(CustomOAuth2RequestFactory.SAVED_AUTHORIZATION_REQUEST_SESSION_ATTRIBUTE_NAME, authorizationRequest);

                // redirect the the page where the user needs to enter the two factor authentiation code
                redirectStrategy.sendRedirect(request, response,
                    ServletUriComponentsBuilder.fromCurrentContextPath()
                        .path(TwoFactorAuthenticationController.PATH)
                        .toUriString());
                return;
            }
        }
        //THE NEXT ""IF"" BLOCK DOES NOT RESOLVE THE ERROR WHEN UNCOMMENTED
        //if(AuthenticationUtil.hasAuthority(ROLE_TWO_FACTOR_AUTHENTICATED)){
        //    CsrfToken token = (CsrfToken) request.getAttribute(""_csrf"");
            // this is the value of the token to be included as either a header or an HTTP parameter
        //    response.setHeader(""XSRF-TOKEN"", token.getToken());
        //}

        filterChain.doFilter(request, response);
    }

    private Map&lt;String, String&gt; paramsFromRequest(HttpServletRequest request) {
        Map&lt;String, String&gt; params = new HashMap&lt;&gt;();
        for (Entry&lt;String, String[]&gt; entry : request.getParameterMap().entrySet()) {
            params.put(entry.getKey(), entry.getValue()[0]);
        }
        return params;
    }
}
</code></pre>

<hr/>

<p><strong>RE-CREATING THE PROBLEM ON YOUR COMPUTER:</strong>  </p>

<hr/>  

<p>You can recreate the problem on any computer in only a few minutes by following these simple steps:  </p>

<p>1.) Download the <a href=""https://jumpshare.com/v/oj7wSZaZRgJHEwqYiJ2p"" rel=""nofollow noreferrer"">zipped version of the app from a file sharing site by clicking on this link</a>.  </p>

<p>2.) Unzip the app by typing: <code>tar -zxvf oauth2.tar(2).gz</code>  </p>

<p>3.) launch the <code>authserver</code> app by navigating to <code>oauth2/authserver</code> and then typing <code>mvn spring-boot:run</code>.  </p>

<p>4.) launch the <code>resource</code> app by navigating to <code>oauth2/resource</code> and then typing <code>mvn spring-boot:run</code>  </p>

<p>5.) launch the <code>ui</code> app by navigating to <code>oauth2/ui</code> and then typing <code>mvn spring-boot:run</code>  </p>

<p>6.) Open a web browser and navigate to <code>http : // localhost : 8080</code>  </p>

<p>7.) Click <code>Login</code> and then enter <code>Frodo</code> as the user and <code>MyRing</code> as the password, and click to submit.  </p>

<p>8.) Enter <code>5309</code> as the <code>Pin Code</code> and click submit.  <strong>This will trigger the error shown above.</strong>  </p>

<p>You can view the complete source code by: </p>

<p>a.) importing the maven projects into your IDE, or by  </p>

<p>b.) navigating within the unzipped directories and opening with a text editor.  </p>

<p><hr/>
You can read all the HTTP Headers and Spring Boot logs at a file sharing site <a href=""https://jumpshare.com/v/Xy2g91GLXLB8gkWmliMF"" rel=""nofollow noreferrer"">by clicking on this link</a>.</p>
",807797,,1033581,,2018-07-21 13:43:15,2018-07-21 13:43:15,Invalid XSRF token at /oauth/token,<spring><spring-mvc><spring-security><spring-boot><spring-oauth2>,2,5,3,,
Spring,47202657,1,,,2017,,1,1816,"<p>I am following the link <a href=""https://spring.io/blog/2015/02/03/sso-with-oauth2-angular-js-and-spring-security-part-v"" rel=""nofollow noreferrer"">https://spring.io/blog/2015/02/03/sso-with-oauth2-angular-js-and-spring-security-part-v</a> &amp; the github project <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2"" rel=""nofollow noreferrer"">https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2</a>. I am able to login in to the OAuth provider and get the authorization code back in the client. </p>

<p>Now I make the following call from the client to get the token from the provider (provider is on port 9999)</p>

<pre><code>        HttpHeaders headers = new HttpHeaders();
        headers.add(""Accept"",MediaType.APPLICATION_JSON_VALUE);
        List&lt;String&gt; cookies = httpEntity.getHeaders().get(""Cookie"");
        headers.put(""Cookie"", cookies);
        String redirectURL= ""http://localhost:9999/oauthprovider/oauth/token"" +  ""?"" + ""response_type=token"" + ""&amp;"" + ""grant_type=authorization_code"" + ""&amp;"" + ""client_id=acme""+ ""&amp;"" + ""client_secret=acmesecret""+  ""&amp;"" + ""redirect_uri=http://localhost:8081/callback""+""&amp;"" + ""code="" + authCode + ""&amp;"" + ""state="" + stateValue;

        HttpEntity&lt;String&gt; redirectResponse = template.exchange(
                redirectURL,
                    HttpMethod.POST,
                    responseentity,
                    String.class);


        result=redirectResponse.toString()
</code></pre>

<p>The result variable value has the following.(I have disabled csrf and sending client_secret as a query parameter (for the time being), although they are not recommended)</p>

<pre><code>    &lt;302 Found,{X-Content-Type-Options=[nosniff], X-XSS-Protection=[1; mode=block], Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-Frame-Options=[DENY], Location=[http://localhost:9999/oauthprovider/oauthlogin], Content-Length=[0], Date=[Thu, 09 Nov 2017 12:07:37 GMT]}&gt;
</code></pre>

<p>In the console I have these</p>

<pre><code>   Previously Authenticated: org.springframework.security.authentication.AnonymousAuthenticationToken@9055c2bc: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@b364: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: 2B669DF59BCE8047849BFBCA148BEE67; Granted Authorities: ROLE_ANONYMOUS
</code></pre>

<p>Does I am redirecting back to login(I am getting it in the logs as mentioned before), since the role is ROLE_ANONYMOUS? How can I fix the issue? </p>

<p>Adding more details on the code (Did only minor changes from the sample code provided in the link). Providers's context path is /oauthprovider and with curl call I am getting the token. </p>

<pre><code>@Configuration
@EnableAuthorizationServer
protected static class OAuth2AuthorizationConfig extends
        AuthorizationServerConfigurerAdapter {

    @Autowired
    private AuthenticationManager authenticationManager;

    //................................
    //................................
    @Override
    public void configure(ClientDetailsServiceConfigurer clients) throws Exception {
        clients.inMemory()
                .withClient(""acme"")
                .secret(""acmesecret"")
                .authorizedGrantTypes(""authorization_code"", ""refresh_token"",
                        ""password"").scopes(""openid"").autoApprove(true).redirectUris(""http://localhost:8081/callback""); 
    }

    @Override
    public void configure(AuthorizationServerEndpointsConfigurer endpoints)
            throws Exception {
        endpoints.authenticationManager(authenticationManager).accessTokenConverter(
                jwtAccessTokenConverter());
    }

    @Override
    public void configure(AuthorizationServerSecurityConfigurer oauthServer)
            throws Exception {
        oauthServer.tokenKeyAccess(""permitAll()"").checkTokenAccess(
                ""isAuthenticated()"");
    }

}
@Configuration
@Order(-20)
protected static class LoginConfig extends WebSecurityConfigurerAdapter {

    @Autowired
    private AuthenticationManager authenticationManager;

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        // @formatter:off
        http
            .formLogin().loginPage(""/oauthlogin"").loginProcessingUrl(""/login"").failureUrl(""/login?error=true"").permitAll() 
        .and()
            .requestMatchers().antMatchers(""/login"", ""/oauthlogin"", ""/oauth/authorize"", ""/oauth/token"" ,""/oauth/confirm_access"")
        .and()
            .authorizeRequests().anyRequest().authenticated();
        // @formatter:on

        http.csrf().disable();
    }

    @Override
    protected void configure(AuthenticationManagerBuilder auth) throws Exception {
        auth.parentAuthenticationManager(authenticationManager);
    }
}
</code></pre>
",7349475,,7349475,,2017-11-09 14:17:44,2019-01-29 14:08:19,Spring Security OAuth2- POST request to oauth/token redirects to login and role displays ROLE_ANONYMOUS,<spring><spring-security><oauth><oauth-2.0><spring-security-oauth2>,3,3,,,
Spring,36581834,1,36586730,,2016,,1,602,"<p>I have been doing a line by line study of the code in <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2"" rel=""nofollow"">this spring cloud app on github</a> after downloading and installing it on my devbox.  When you type <code>http://localhost:8080</code> in your web browser, the content from the <code>ui</code> app loads, and is able to interact with the content from the <code>authserver</code> and <code>resource</code> apps.  </p>

<p><code>Port 9999</code> is defined for the <code>authserver</code> app, both in the <code>ui</code> app's <code>zuul route</code> definitions, and also in the <code>authserver</code> app's <code>application.properties</code>.  </p>

<p>Similarly, <code>port 9000</code> is defined for the <code>resource</code> app, both in the <code>ui</code> app's route definitions, and also in the <code>resource</code> app's <code>application.properties</code>.  </p>

<p>But I cannot find any reference to <code>port 8080</code>, even after reviewing every line of code in the three apps and also doing a <code>Ctrl-H</code> to do full text search of the entire eclipse workspace for the word <code>8080</code>.  </p>

<p><strong>So how does the <code>ui</code> app know to serve its client content on <code>port 8080</code>?</strong></p>
",807797,,,,,2016-04-13 6:35:42,where is port 8080 defined in spring cloud app?,<spring><spring-boot><spring-cloud><netflix-zuul>,3,1,,,
Spring,42721597,1,42764690,,2017,,1,7037,"<p>As I followed this tutorial: <a href=""https://spring.io/guides/gs/handling-form-submission/"" rel=""nofollow noreferrer"">https://spring.io/guides/gs/handling-form-submission/</a> after a while I came to a dead end. I tried to figure out what the problem is for some hours now. I hope you can help me.</p>

<p>When I submit my form, I get this error-message:</p>

<pre><code> There was an unexpected error (type=Method Not Allowed, status=405).
 Request method 'POST' not supported
</code></pre>

<p>My App (App.java):</p>

<pre><code>package de.poc.logging.main;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
@SpringBootApplication
public class App {
  public static void main(String[] args) {
    SpringApplication.run(App.class, args);
  }
}
</code></pre>

<p>My Controller (InformationController.java):</p>

<pre><code>package de.poc.logging.main;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

@Controller
@RequestMapping(value = ""/info"")
public class InformationController {
  @RequestMapping(method = RequestMethod.GET, produces = ""text/html"")
  public String infoForm(Model model) {
    model.addAttribute(""information"", new Information());
    return ""infoForm.html"";
  }

  @RequestMapping(method = RequestMethod.POST, produces = ""text/html"")
  public String infoSubmit(@ModelAttribute Information information) {
    return ""infoResult.html"";
  }
}
</code></pre>

<p>I created an additional class for security (WebSecurityConf.java):</p>

<pre><code>package de.poc.logging.main.config;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;

@Configuration
@EnableWebSecurity
public class WebSecurityConfig extends WebSecurityConfigurerAdapter {
  @Override
  protected void configure(HttpSecurity http) throws Exception {
    http.headers()
        .frameOptions().sameOrigin()
        .httpStrictTransportSecurity().disable();
    http.csrf().disable();
  }
}
</code></pre>

<p>And I have following two HTML-Files:</p>

<p>infoForm.html:</p>

<pre><code>    &lt;!DOCTYPE HTML&gt;
    &lt;html xmlns:th=""http://www.thymeleaf.org""&gt;
    &lt;head&gt;
        &lt;title&gt;Getting Started: Handling Form Submission&lt;/title&gt;
        &lt;meta http-equiv=""Content-Type"" content=""text/html; charset=UTF-8""/&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;h1&gt;Form&lt;/h1&gt;
    &lt;form action=""#"" th:action=""@{/info}"" th:object=""${information}"" method=""post""&gt;
        &lt;p&gt;Id: &lt;input type=""text"" th:field=""*{id}""/&gt;&lt;/p&gt;
        &lt;p&gt;Message: &lt;input type=""text"" th:field=""*{content}""/&gt;&lt;/p&gt;
        &lt;p&gt;&lt;input type=""submit"" value=""Submit""/&gt;
            &lt;input type=""reset"" value=""Reset""/&gt;&lt;/p&gt;
        &lt;!--&lt;input type=""hidden"" th:name=""${_csrf.parameterName}"" th:value=""${_csrf.token}""/&gt;--&gt;
    &lt;/form&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre>

<p>infoResult.html:</p>

<pre><code>&lt;!DOCTYPE HTML&gt;
&lt;html xmlns:th=""http://www.thymeleaf.org""&gt;
&lt;head&gt;
    &lt;title&gt;Getting Started: Handling Form Submission&lt;/title&gt;
    &lt;meta http-equiv=""Content-Type"" content=""text/html; charset=UTF-8""/&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Result&lt;/h1&gt;
&lt;p th:text=""'id: ' + ${information.id}""/&gt;
&lt;p th:text=""'content: ' + ${information.content}""/&gt;
&lt;a href=""/info""&gt;Submit another message&lt;/a&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>Edit (additional information):
my Information.java:</p>

<pre><code>package de.poc.logging.main;

public class Information {
  private long id;
  private String content;

  public long getId() {
    return id;
  }

  public String getContent() {
    return content;
  }

  public void setId(long id) {
    this.id = id;
  }

  public void setContent(String content) {
    this.content = content;
  }

}
</code></pre>

<p>my pom-dependencies:</p>

<pre><code>    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;junit&lt;/groupId&gt;
            &lt;artifactId&gt;junit&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
            &lt;version&gt;1.5.2.RELEASE&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
            &lt;version&gt;1.5.2.RELEASE&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;
            &lt;version&gt;1.5.2.RELEASE&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
</code></pre>

<p>I'm using Java 1.8u121 (jdk).</p>

<p>Edit2:
I tried 3 different versions of spring boot now.
Also I downloaded the project from here: <a href=""https://github.com/spring-guides/gs-handling-form-submission"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-handling-form-submission</a> and added spring boot via pom.xml.
The downloaded project does not work for me.</p>

<p>I'm getting really frustrated.</p>
",7458242,,7458242,,2017-03-13 10:14:01,2017-03-13 13:19:40,Spring Boot - Request method 'POST' not supported (Method not allowed),<java><spring><spring-mvc><post>,3,2,,,
Spring,22935840,1,22935912,,2014,,2,4169,"<p>I am going through this guide:</p>

<p><a href=""https://spring.io/guides/gs/rest-service/"" rel=""nofollow"">https://spring.io/guides/gs/rest-service/</a></p>

<p>I use Maven for building, so I've fetched the pom.xml linked in the official Spring guide:</p>

<p><a href=""https://github.com/spring-guides/gs-rest-service/blob/master/initial/pom.xml"" rel=""nofollow"">https://github.com/spring-guides/gs-rest-service/blob/master/initial/pom.xml</a></p>

<pre><code>    &lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;&lt;project xmlns=""http://maven.apache.org/POM/4.0.0"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""
    xsi:schemaLocation=""http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd""&gt;

    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
    &lt;artifactId&gt;gs-rest-service&lt;/artifactId&gt;
    &lt;version&gt;0.1.0&lt;/version&gt;

    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;1.0.1.RELEASE&lt;/version&gt;
    &lt;/parent&gt;

    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

    &lt;properties&gt;
        &lt;start-class&gt;hello.Application&lt;/start-class&gt;
    &lt;/properties&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
                &lt;version&gt;2.3.2&lt;/version&gt;
            &lt;/plugin&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-build&lt;/artifactId&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;

    &lt;repositories&gt;
        &lt;repository&gt;
            &lt;id&gt;spring-snapshots&lt;/id&gt;
            &lt;url&gt;http://repo.spring.io/libs-snapshot&lt;/url&gt;
            &lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;
        &lt;/repository&gt;
        &lt;repository&gt;
            &lt;id&gt;spring-repo&lt;/id&gt;
            &lt;name&gt;Spring Repository&lt;/name&gt;
            &lt;url&gt;http://repo.spring.io/release&lt;/url&gt;
        &lt;/repository&gt;
    &lt;/repositories&gt;
    &lt;pluginRepositories&gt;
        &lt;pluginRepository&gt;
            &lt;id&gt;spring-snapshots&lt;/id&gt;
            &lt;url&gt;http://repo.spring.io/libs-snapshot&lt;/url&gt;
            &lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;
        &lt;/pluginRepository&gt;
    &lt;/pluginRepositories&gt;
&lt;/project&gt;
</code></pre>

<p>I get the following error when running <em>mvn install</em></p>

<blockquote>
  <p>[ERROR] Error resolving version for plugin
  org.springframework.boot:spring-boot-maven-build' from the
  repositories [local (C:\Users\Laszlo_Szucs.m2\repository),
  spring-snapshots (repo.spring.io/libs-snapshot), central
  repo.maven.apache.org/maven2)]: Plugin not found in any plugin
  repository -> [Help 1]</p>
</blockquote>

<p><strong>How do I know which version to provide in the pom.xml for this?</strong></p>
",2427686,,2427686,,2014-04-08 12:15:57,2017-10-06 7:00:46,Cannot build Spring 4 project with Maven,<java><spring><maven><pom.xml>,3,1,,,
Spring,41850162,1,,,2017,,4,903,"<p>Referring to the logout flow in <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/single-sign-out/oauth2"" rel=""nofollow noreferrer"">oauth2</a> spring-guides project, once the the user has authenticated using user/password for the first time, the credentials are not asked next time after logout.</p>

<p>How can I ensure that username/password are asked every time after a logout.</p>

<p>This is what I am trying to implement:-</p>

<ul>
<li><p>OAuth2 server issuing JWT token using ""authorization_code"" grant type
with auto approval. This has html/angularjs form to collect
username/password.</p></li>
<li><p>UI/Webfront - Uses @EnableSSO. ALL its endpoints are authenticated
i.e it does not have any unauthorized landing page/ui/link that user
clicks to go to /uaa server. So hitting <a href=""http://localhost:8080"" rel=""nofollow noreferrer"">http://localhost:8080</a>
instantly redirects you to <a href=""http://localhost:9999/uaa"" rel=""nofollow noreferrer"">http://localhost:9999/uaa</a> and presents
custom form to collect username/password.</p></li>
<li>Resource server - Uses @EnableResourceServer. Plain &amp; simple REST api.</li>
</ul>

<p>With the above approach I am not able to workout the logout flow. HTTP POST /logout to the UI application clears the session/auth in UI application but the users gets logged in again automatically ( as I have opted for auto approval for all scopes) without being asked for username password again.</p>

<p>Looking at logs and networks calls, it looks like that all the ""oauth dance"" happens all over again successfully without user being asked for username/password again and seems like the auth server remembers last auth token issued for a client ( using org.springframework.security.oauth2.provider.code.InMemoryAuthorizationCodeServices? ).</p>

<p>How can I tell auth server to ask for username/password every time it is requested for code/token - stateless.</p>

<p>Or what is the best way to implement logout in my given scenario.</p>

<p>( To recreate somewhat near to my requirements, remove <code>permitAll()</code> part from the UiApplication and configure <code>autoApproval</code> in auth server of the mentioned boot project.)</p>

<p><a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/issues/138"" rel=""nofollow noreferrer"">github issue</a></p>
",945034,,1531064,,2017-07-18 8:02:25,2017-07-24 20:53:37,Spring Security OAuth2 AngularJS | Logout Flow,<spring-security><spring-security-oauth2>,3,2,1,,
Spring,39645590,1,,,2016,,5,7114,"<p>Here is my webConfig</p>

<pre><code>@Configuration
@EnableWebMvc
public class WebConfig extends WebMvcConfigurerAdapter {

    @Override
    public void addCorsMappings(CorsRegistry registry) {
        registry.addMapping(""/**"");
    }
}
</code></pre>

<p>I have a <code>/health</code> endpoint, which returns some health data and it works fine.</p>

<p>Here is junit test</p>

<pre><code>@Test
    public void corsTest() {
        HttpHeaders headers = new HttpHeaders();
        headers.add(HttpHeaders.ORIGIN, ""http://localhost:9000"");
        HttpEntity&lt;?&gt; requestEntity = new HttpEntity(headers);
        ResponseEntity&lt;Status&gt; entity = this.restTemplate.exchange(""/health"", HttpMethod.GET, requestEntity, Status.class);
        assertEquals(HttpStatus.OK, entity.getStatusCode());
        assertEquals(""http://localhost:9000"", entity.getHeaders().getAccessControlAllowOrigin()); //6
        Status health = entity.getBody();
        assertThat(health.getAppName()).isEqualTo(appName);
    }
</code></pre>

<p>Test fails at line 6. if comment-out that line, the test passes.
Through debugger, I found that <code>entity.getHeaders().getAccessControlAllowOrigin()</code> is null. I used this <a href=""https://github.com/spring-guides/gs-rest-service-cors/blob/master/complete/src/test/java/hello/GreetingIntegrationTests.java"" rel=""noreferrer"">sample app</a> as reference and it works fine. but for my application it fails.</p>

<p>when I use javascript to call the /health api, I can see the cors works. If I comment out, webConfig class, I get error in javascript. Debugging more at javascript shows that cors response header is not set but the request served successfully when webconfig is enabled.</p>

<p>so definitely cors works. It is the test that is failing. so I am guessing test is not seeing it for reasons I don't know.</p>
",1988876,,1988876,,2016-09-22 18:43:33,2016-09-22 20:59:32,cors not working for my spring boot application,<spring><spring-mvc><spring-boot><cors><spring-mvc-test>,3,2,2,,
Spring,34525587,1,34560982,,2015,,7,4791,"<p>I must prepare a webservice to accept anan already defined wsdl structure. I followed the tutorial <a href=""https://spring.io/guides/gs/producing-web-service/"" rel=""noreferrer"">found here</a>, with source code for the test project <a href=""https://github.com/spring-guides/gs-producing-web-service/archive/master.zip"" rel=""noreferrer"">downloadable here</a>.</p>

<p>For xsd like this:</p>

<pre><code>&lt;xs:element name=""getCountryRequest""&gt;
    &lt;xs:complexType&gt;
        &lt;xs:sequence&gt;
            &lt;xs:element name=""name"" type=""xs:string""/&gt;
        &lt;/xs:sequence&gt;
    &lt;/xs:complexType&gt;
&lt;/xs:element&gt;
</code></pre>

<p>Wsdl operation for request returned by application is OK, looks like this:</p>

<pre><code>&lt;wsdl:binding name=""CountriesPortSoap11"" type=""tns:CountriesPort""&gt;
    &lt;soap:binding style=""document"" transport=""http://schemas.xmlsoap.org/soap/http""/&gt;
    &lt;wsdl:operation name=""getCountry""&gt;
        &lt;soap:operation soapAction=""""/&gt;
        &lt;wsdl:input name=""getCountryRequest""&gt;
            &lt;soap:body use=""literal""/&gt;
        &lt;/wsdl:input&gt;
        &lt;wsdl:output name=""getCountryResponse""&gt;
            &lt;soap:body use=""literal""/&gt;
        &lt;/wsdl:output&gt;
    &lt;/wsdl:operation&gt;
&lt;/wsdl:binding&gt;
</code></pre>

<p>But when I change the xsd to (no 'Request' in element name):</p>

<pre><code>&lt;xs:element name=""getCountry""&gt;
    &lt;xs:complexType&gt;
        &lt;xs:sequence&gt;
            &lt;xs:element name=""name"" type=""xs:string""/&gt;
        &lt;/xs:sequence&gt;
    &lt;/xs:complexType&gt;
&lt;/xs:element&gt;
</code></pre>

<p>the wsdl is invalid, and has no <code>&lt;input&gt;</code> specified:</p>

<pre><code>&lt;wsdl:binding name=""CountriesPortSoap11"" type=""tns:CountriesPort""&gt;
    &lt;soap:binding style=""document"" transport=""http://schemas.xmlsoap.org/soap/http""/&gt;
    &lt;wsdl:operation name=""getCountry""&gt;
        &lt;soap:operation soapAction=""""/&gt;
        &lt;wsdl:output name=""getCountryResponse""&gt;
            &lt;soap:body use=""literal""/&gt;
        &lt;/wsdl:output&gt;
    &lt;/wsdl:operation&gt;
&lt;/wsdl:binding&gt;
</code></pre>

<p>How can I fix that? How can I make a <code>Request</code>-less element appear properly as soap operation input in wsdl?</p>
",1961634,,1961634,,2015-12-30 8:28:23,2016-11-25 8:22:56,Invalid wsdl generated by spring-ws when the request element doesn't end with 'Request',<java><web-services><wsdl><cxf><spring-ws>,3,1,1,,
Spring,25571843,1,25574250,,2014,,7,4574,"<p>I'm having problems accessing the sample springBoot application after I deploy it to Weblogic12C. It works fine using the springBoot-embedded Tomcat server.</p>

<h1>Install and test using SpringBoot-embedded Tomcat: all is well</h1>

<p>Steps to reproduce: get the springBoot ""getting started"" application code following the steps: <a href=""https://spring.io/guides/gs/spring-boot/"" rel=""nofollow noreferrer"">https://spring.io/guides/gs/spring-boot/</a></p>

<ul>
<li>git clone <a href=""https://github.com/spring-guides/gs-spring-boot.git"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-spring-boot.git</a></li>
<li>cd gs-spring-boot/complete/ (we'll be using the gr-spring-boot/complete dir so that you don't have to go through the ""getting started"" page above (all changes done for you in ""complete"").  </li>
<li>open the file gs-spring-boot/complete/build.gradle and add "" apply plugin: 'war' "" below the other ""apply plugin"" entries </li>
</ul>

<p>At this point, you can validate that all is well by running the gradle ""bootRun"" tasks which starts the app in the embedded Tomcat server. Once tomcat started, browse to localhost:8080/ and see that you get ""Greetings from Spring Boot!""</p>

<h1>Now let's install this on Weblogic 12C</h1>

<ul>
<li>run ""gradle war"" (again, work from gs-spring-boot/complete/)
you will now have a war file under gs-spring-boot\complete\build\libs\complete.war

<ul>
<li>go to your weblogic12C console. I didn't make changes to my WL12C so the console is located at localhost:7001/console NOTE: I downloaded the WL12C developer version one week ago from the Oracle site. I didn't make any changes to it, as downloaded. The dev version of WL12C download requires that we point it to our already installed JDK. My WL12C uses java version:

<blockquote>
  <blockquote>
    <p>java version ""1.7.0_45""
    Java(TM) SE Runtime Environment (build 1.7.0_45-b18)
    Java HotSpot(TM) Server VM (build 24.45-b08, mixed mode)</p>
  </blockquote>
</blockquote></li>
<li>when in the console, deploy the war file:</li>
<li>click on ""deployments""</li>
<li>click on ""install""</li>
<li>browse to you ""gs-spring-boot \ complete \ build \ libs"" dir </li>
<li>select the radio button next to complete.war and hit next</li>
<li>select ""install as application"" and hit next</li>
<li>leave all options as is [DD only, use the defaults, use same accessibility] and hit next</li>
<li>click finish</li>
</ul></li>
</ul>

<p>At this point, you will see that the application deployed fine:
- click on ""deployments"" again and see that your ""complete"" springBoot app is listed and ACTIVE
- click on ""complete"" and notice on this page: ""Context Root:   /complete"". NOTE: weblogic docs say that if there is no context-root defined in weblogic.xml, then it uses the name of the war file (minus the .war)</p>

<h1>Now, the problem: getting a 403:</h1>

<p>if you try to access the springBoot app at localhost:7001/complete you get a 403!!!</p>

<pre><code>Error 403--Forbidden
From RFC 2068 Hypertext Transfer Protocol -- HTTP/1.1:
10.4.4 403 Forbidden
The server understood the request, but is refusing to fulfill it. Authorization will not help and the request SHOULD NOT be repeated. If the request method was not HEAD and the server wishes to make public why the request has not been fulfilled, it SHOULD describe the reason for the refusal in the entity. This status code is commonly used when the server does not wish to reveal exactly why the request has been refused, or when no other response is applicable.
</code></pre>

<p>Ok, so let's make one final change (I'm fishing here, maybe weblogic really wants a weblogic.xml):</p>

<ul>
<li>create the dir: gs-spring-boot\complete\src\main\webapp\WEB-INF\</li>
<li>create this file: gs-spring-boot\complete\src\main\webapp\WEB-INF\weblogic.xml</li>
<li><p>edit weblogic.xml to contain:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;
&lt;wls:weblogic-web-app xmlns:wls=""http://xmlns.oracle.com/weblogic/weblogic-web-app"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xsi:schemaLocation=""http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd http://xmlns.oracle.com/weblogic/weblogic-web-app http://xmlns.oracle.com/weblogic/weblogic-web-app/1.4/weblogic-web-app.xsd""&gt;
    &lt;wls:weblogic-version&gt;12.1.1&lt;/wls:weblogic-version&gt;
    &lt;wls:context-root&gt;testApp&lt;/wls:context-root&gt;
&lt;/wls:weblogic-web-app&gt;
</code></pre></li>
<li><p>now go back to your weblogic console (localhost:7001/console)</p></li>
<li>go to ""web applications"" and select the checkbox next to ""complete"" then hit ""delete""</li>
<li>restart your weblogic12C server (just to be paranoid)</li>
<li>run the ""gradle clean"" then ""gradle war"" task again to generate a new war file</li>
<li>open the war file (using winzip or whatever) and confirm that the war file now has WEB-INF/weblogic.xml</li>
<li>go to the console the deploy the new war file (use same steps as above)</li>
<li>confirm that the app is now deployed and has a contextRoot of /testApp (as defined in weblogic.xml)</li>
<li>browse to localhost:7001/testApp/</li>
</ul>

<p>The 403 is still there. So:</p>

<ul>
<li>weblogic DOES know about this application (returns 403). Because if it didn't know about the application, it would return 404 (try it by going to localhost:7001/doesNotExist and you'll get 404)</li>
<li>but it looks like WL12C doesn't route requests to spring. In the past, we'd define a bunch of things in web.xml but nowadays, with javaConfig and SpringBoot, this should all be done automagically...

<ul>
<li>note: because SpringBoot uses JavaConfig (Servlet3), we can't use anything lower that weblogic12C (which is the latest)</li>
</ul></li>
</ul>

<h1>Another thing I tried: change RequestMapping</h1>

<p>In the sample code above, open the file gs-spring-boot\complete\src\main\java\hello\HelloController.java and replace:</p>

<pre><code>@RequestMapping(""/"")
</code></pre>

<p>with this:</p>

<pre><code>@RequestMapping(""pierre.htm"")
</code></pre>

<p>Now, if you browse to (remember weblogic.xml define context-root as /testApp):</p>

<ul>
<li>localhost:7001/testApp/pierre.htm you'll get a 404 </li>
<li>localhost:7001/testApp/           you'll get 403</li>
</ul>

<p>And if you try on tomcat with ""gradle bootrun"", you can get to it fine: localhost:8080/pierre.htm (you get ""greetings from SpringBoot!"").</p>

<p>So this yields the following hints:</p>

<ul>
<li>Weblogic does know about /testApp</li>
<li>Weblogic has no idea what /testApp/pierre.htm is. It's like it was never configured as a RequestMapping. </li>
<li>there is some ""Spring wiring"" missing for it to work on weblogic.... </li>
</ul>

<p>This is where I'm stuck... Can anyone think what JavaConfig ""wiring"" I'm missing to make it work on Weblogic? Any help greatly appreciated. Thanks!!</p>

<h1>Solution</h1>

<p>If anyone comes here, to make it simpler than read all the comments, below, here's how to make it work:</p>

<ul>
<li>start with the SpringBoot sample app and git the ""complete"" solution from here: spring.io/guides/gs/convert-jar-to-war/</li>
<li><p>update the class WebInitializer so that it implements WebApplicationInitializer. So change it from this:</p>

<pre><code>    public class WebInitializer extends SpringBootServletInitializer {
</code></pre></li>
</ul>

<p>To this:</p>

<pre><code>        public class WebInitializer extends SpringBootServletInitializer implements WebApplicationInitializer {
</code></pre>

<ul>
<li><p>create a new file src/main/webapp/WEB-INF/weblogic.xml and put this contents in it:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;
&lt;wls:weblogic-web-app xmlns:wls=""http://xmlns.oracle.com/weblogic/weblogic-web-app"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xsi:schemaLocation=""http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd http://xmlns.oracle.com/weblogic/weblogic-web-app http://xmlns.oracle.com/weblogic/weblogic-web-app/1.4/weblogic-web-app.xsd""&gt;
    &lt;wls:weblogic-version&gt;12.1.1&lt;/wls:weblogic-version&gt;
    &lt;wls:context-root&gt;helloApp&lt;/wls:context-root&gt;
    &lt;wls:container-descriptor&gt;
        &lt;wls:prefer-application-packages&gt;
            &lt;wls:package-name&gt;org.slf4j.*&lt;/wls:package-name&gt;
        &lt;/wls:prefer-application-packages&gt;
    &lt;/wls:container-descriptor&gt;
&lt;/wls:weblogic-web-app&gt;
</code></pre>

<ul>
<li>gradle war</li>
<li>deploy to Weblogic12C</li>
<li>it should work now :) Thanks so much to both Dave Syer and Evgeni!</li>
</ul></li>
</ul>

<h1>Previous Solution (kept here for posterity)</h1>

<ul>
<li><p>start with the SpringBoot sample app and git the ""complete"" solution from here: spring.io/guides/gs/convert-jar-to-war/</p>

<ul>
<li>in the sample app's package ""hello"", add a new public class HelloWebXml implements WebApplicationInitializer </li>
<li><p>take all the code from org.springframework.boot.context.web.SpringBootServletInitializer and copy it into HelloWebXml but change these lines:</p>

<p>protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {
    return application;
}</p></li>
</ul></li>
</ul>

<p>To this:</p>

<pre><code>    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {
      return application.sources(Application.class);
    }
</code></pre>

<ul>
<li>copy the class org.springframework.boot.context.web.ErrorPageFilter into package ""hello"" in the sample app</li>
<li><p>create a new file src/main/webapp/WEB-INF/weblogic.xml and put this contents in it:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;
&lt;wls:weblogic-web-app xmlns:wls=""http://xmlns.oracle.com/weblogic/weblogic-web-app"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xsi:schemaLocation=""http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd http://xmlns.oracle.com/weblogic/weblogic-web-app http://xmlns.oracle.com/weblogic/weblogic-web-app/1.4/weblogic-web-app.xsd""&gt;
    &lt;wls:weblogic-version&gt;12.1.1&lt;/wls:weblogic-version&gt;
    &lt;wls:context-root&gt;helloApp&lt;/wls:context-root&gt;
    &lt;wls:container-descriptor&gt;
        &lt;wls:prefer-application-packages&gt;
            &lt;wls:package-name&gt;org.slf4j.*&lt;/wls:package-name&gt;
        &lt;/wls:prefer-application-packages&gt;
    &lt;/wls:container-descriptor&gt;
&lt;/wls:weblogic-web-app&gt;
</code></pre>

<ul>
<li>gradle war</li>
<li>deploy to Weblogic12C</li>
<li>it should work now :) Thanks so much to both Dave Syer and Evgeni!</li>
</ul></li>
</ul>

<p>NOTE: There is a similar questions here:
<a href=""https://stackoverflow.com/questions/24835051/deploy-spring-boot-app-in-weblogic"">Deploy Spring Boot app in Weblogic</a>
...but that other question is about the deployment and it's a little vague (deployment itself works fine for me)</p>
",3930172,,-1,,2017-05-23 10:29:47,2017-07-13 12:11:00,Problems accessing fresh deploy of SpringBoot sample app on Weblogic12C,<java><spring><spring-boot><weblogic12c>,3,2,5,,
Spring,37970709,1,37971596,,2016,,16,15445,"<p>I'm trying to create OAuth2 Server Provider using this tutorial <a href=""https://spring.io/blog/2015/02/03/sso-with-oauth2-angular-js-and-spring-security-part-v"" rel=""noreferrer"">Spring OAuth2</a> . The main difference between example and my project - I do not use Spring Boot. I try to split this classes (<a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/blob/master/oauth2/authserver/src/main/java/demo/AuthserverApplication.java"" rel=""noreferrer"">GitHub example link</a>) I created 2 classes:</p>

<pre><code>@Configuration
@Order(-20)
@EnableResourceServer
public class WebSecurityConfig extends WebSecurityConfigurerAdapter {

  @Autowired
  private AuthenticationManager authenticationManager;

  @Override
  protected void configure(HttpSecurity http) throws Exception {
    http.formLogin().loginPage(""/login"").permitAll()
            .and()
            .requestMatchers().antMatchers(""/login"", ""/oauth/authorize"", ""/oauth/confirm_access"")
            .and()
            .authorizeRequests().anyRequest().authenticated();
  }

  @Override
  protected void configure(AuthenticationManagerBuilder auth) throws Exception {
    auth.parentAuthenticationManager(authenticationManager);
  }
</code></pre>

<p>}</p>

<p>Second class:</p>

<pre><code>@Configuration
@EnableAuthorizationServer
@EnableResourceServer
public class OAuth2AuthorizationConfiguration extends AuthorizationServerConfigurerAdapter {

  @Autowired
  private AuthenticationManager authenticationManager;

  @Bean
  public JwtAccessTokenConverter jwtAccessTokenConverter() {
    JwtAccessTokenConverter converter = new JwtAccessTokenConverter();
    KeyPair keyPair = new KeyStoreKeyFactory(
            new ClassPathResource(""keystore.jks""), ""foobar"".toCharArray())
            .getKeyPair(""test"");
    converter.setKeyPair(keyPair);
    return converter;
  }

  @Override
  public void configure(ClientDetailsServiceConfigurer clients) throws Exception {
    clients.inMemory()
            .withClient(""acme"")
            .secret(""acmesecret"")
            .authorizedGrantTypes(""authorization_code"", ""refresh_token"",
                    ""password"").scopes(""openid"").autoApprove(true).accessTokenValiditySeconds(30);
}

  @Override
  public void configure(AuthorizationServerEndpointsConfigurer endpoints) throws Exception {
    endpoints.authenticationManager(authenticationManager).accessTokenConverter(
            jwtAccessTokenConverter());
  }

  @Override
  public void configure(AuthorizationServerSecurityConfigurer oauthServer) throws Exception {
    oauthServer.tokenKeyAccess(""permitAll()"").checkTokenAccess(
            ""isAuthenticated()"");
  }

}
</code></pre>

<p>But when I try to start this code, I get:</p>

<pre><code>SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'OAuth2AuthorizationConfiguration': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private   org.springframework.security.authentication.AuthenticationManager com.example.configuration.security.OAuth2AuthorizationConfiguration.authenticationManager; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [org.springframework.security.authentication.AuthenticationManager] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
at   org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:292)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1185)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:302)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:298)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:703)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:760)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:482)
at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:403)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:306)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:106)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:5066)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5584)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:147)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:899)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:875)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:652)
at org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1863)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:498)
at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:301)
at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)
at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)
at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:618)
at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:565)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:498)
at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:301)
at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)
at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)
at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1468)
at javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.java:76)
at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1309)
at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1401)
at javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:498)
at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:324)
at sun.rmi.transport.Transport$1.run(Transport.java:200)
at sun.rmi.transport.Transport$1.run(Transport.java:197)
at java.security.AccessController.doPrivileged(Native Method)
at sun.rmi.transport.Transport.serviceCall(Transport.java:196)
at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:568)
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:826)
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:683)
at java.security.AccessController.doPrivileged(Native Method)
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:682)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
at java.lang.Thread.run(Thread.java:745)
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.springframework.security.authentication.AuthenticationManager com.example.configuration.security.OAuth2AuthorizationConfiguration.authenticationManager; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [org.springframework.security.authentication.AuthenticationManager] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:508)
at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:289)
... 58 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [org.springframework.security.authentication.AuthenticationManager] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:1103)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:963)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:858)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:480)
... 60 more
</code></pre>

<p>I guess, the problem is in Spring Boot that I do not use in my app. 
I tried following solutions: <a href=""https://stackoverflow.com/questions/21633555/how-to-inject-authenticationmanager-using-java-configuration-in-a-custom-filter"">First</a>, <a href=""https://stackoverflow.com/questions/32081578/spring-security-nosuchbeandefinitionexception-no-qualifying-bean-of-type-org"">Second</a>
I use only code-based configuration. 
Additional info:
Java 8
spring-security-oauth2 - 2.0.7.RELEASE, 
spring-security-version - 4.0.1.RELEASE, 
spring-version - 4.0.6.RELEASE. </p>

<p>How to fix it?</p>

<p><strong>UPDATE</strong></p>

<p>I created </p>

<pre><code>@Configuration
public class AuthManager extends WebSecurityConfigurerAdapter {

    @Bean
    public AuthenticationManager customAuthenticationManager() throws Exception {
        return authenticationManager();
    }

}
</code></pre>

<p>And now I have exception:</p>

<pre><code>Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.springframework.security.authentication.AuthenticationManager org.com.example.configuration.security.WebSecurityConfig.authenticationManager; nested exception is org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'customAuthenticationManager': Requested bean is currently in creation: Is there an unresolvable circular reference?
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:508)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:289)
    ... 100 more
Caused by: org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'customAuthenticationManager': Requested bean is currently in creation: Is there an unresolvable circular reference?
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.beforeSingletonCreation(DefaultSingletonBeanRegistry.java:335)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:298)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1017)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:960)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:858)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:480)
</code></pre>

<p>This exception in OAuth2AuthorizationConfiguration class.</p>
",2114952,,-1,,2017-05-23 10:34:05,2018-05-08 10:15:38,Could not autowire field: private org.springframework.security.authentication.AuthenticationManager,<java><spring><spring-mvc><spring-security><spring-boot>,3,1,3,,
Spring,49942640,1,50349078,,2018,,29,2165,"<p>According the tutorial <a href=""https://spring.io/guides/tutorials/spring-boot-oauth2/#_social_login_authserver"" rel=""noreferrer"">Spring Boot and OAuth2</a></p>

<p>I have following project structure:</p>

<p><a href=""https://i.stack.imgur.com/O0A5t.jpg"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/O0A5t.jpg"" alt=""enter image description here""></a></p>

<p>And following source code:</p>

<p><strong>SocialApplication.class:</strong>  </p>

<pre><code>@SpringBootApplication
@RestController
@EnableOAuth2Client
@EnableAuthorizationServer
@Order(200)
public class SocialApplication extends WebSecurityConfigurerAdapter {

    @Autowired
    OAuth2ClientContext oauth2ClientContext;

    @RequestMapping({ ""/user"", ""/me"" })
    public Map&lt;String, String&gt; user(Principal principal) {
        Map&lt;String, String&gt; map = new LinkedHashMap&lt;&gt;();
        map.put(""name"", principal.getName());
        return map;
    }

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        // @formatter:off
        http.antMatcher(""/**"").authorizeRequests().antMatchers(""/"", ""/login**"", ""/webjars/**"").permitAll().anyRequest()
                .authenticated().and().exceptionHandling()
                .authenticationEntryPoint(new LoginUrlAuthenticationEntryPoint(""/"")).and().logout()
                .logoutSuccessUrl(""/"").permitAll().and().csrf()
                .csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse()).and()
                .addFilterBefore(ssoFilter(), BasicAuthenticationFilter.class);
        // @formatter:on
    }

    @Configuration
    @EnableResourceServer
    protected static class ResourceServerConfiguration extends ResourceServerConfigurerAdapter {
        @Override
        public void configure(HttpSecurity http) throws Exception {
            // @formatter:off
            http.antMatcher(""/me"").authorizeRequests().anyRequest().authenticated();
            // @formatter:on
        }
    }

    public static void main(String[] args) {
        SpringApplication.run(SocialApplication.class, args);
    }

    @Bean
    public FilterRegistrationBean&lt;OAuth2ClientContextFilter&gt; oauth2ClientFilterRegistration(OAuth2ClientContextFilter filter) {
        FilterRegistrationBean&lt;OAuth2ClientContextFilter&gt; registration = new FilterRegistrationBean&lt;OAuth2ClientContextFilter&gt;();
        registration.setFilter(filter);
        registration.setOrder(-100);
        return registration;
    }

    @Bean
    @ConfigurationProperties(""github"")
    public ClientResources github() {
        return new ClientResources();
    }

    @Bean
    @ConfigurationProperties(""facebook"")
    public ClientResources facebook() {
        return new ClientResources();
    }

    private Filter ssoFilter() {
        CompositeFilter filter = new CompositeFilter();
        List&lt;Filter&gt; filters = new ArrayList&lt;&gt;();
        filters.add(ssoFilter(facebook(), ""/login/facebook""));
        filters.add(ssoFilter(github(), ""/login/github""));
        filter.setFilters(filters);
        return filter;
    }

    private Filter ssoFilter(ClientResources client, String path) {
        OAuth2ClientAuthenticationProcessingFilter filter = new OAuth2ClientAuthenticationProcessingFilter(
                path);
        OAuth2RestTemplate template = new OAuth2RestTemplate(client.getClient(), oauth2ClientContext);
        filter.setRestTemplate(template);
        UserInfoTokenServices tokenServices = new UserInfoTokenServices(
                client.getResource().getUserInfoUri(),
                client.getClient().getClientId());
        tokenServices.setRestTemplate(template);
        filter.setTokenServices(new UserInfoTokenServices(
                client.getResource().getUserInfoUri(),
                client.getClient().getClientId()));
        return filter;
    }

}

class ClientResources {

    @NestedConfigurationProperty
    private AuthorizationCodeResourceDetails client = new AuthorizationCodeResourceDetails();

    @NestedConfigurationProperty
    private ResourceServerProperties resource = new ResourceServerProperties();

    public AuthorizationCodeResourceDetails getClient() {
        return client;
    }

    public ResourceServerProperties getResource() {
        return resource;
    }
}
</code></pre>

<p><strong>index.html:</strong></p>

<pre><code>&lt;!doctype html&gt;
&lt;html lang=""en""&gt;
&lt;head&gt;
    &lt;meta charset=""utf-8""/&gt;
    &lt;meta http-equiv=""X-UA-Compatible"" content=""IE=edge""/&gt;
    &lt;title&gt;Demo&lt;/title&gt;
    &lt;meta name=""description"" content=""""/&gt;
    &lt;meta name=""viewport"" content=""width=device-width""/&gt;
    &lt;base href=""/""/&gt;
    &lt;link rel=""stylesheet"" type=""text/css""
          href=""/webjars/bootstrap/css/bootstrap.min.css""/&gt;
    &lt;script type=""text/javascript"" src=""/webjars/jquery/jquery.min.js""&gt;&lt;/script&gt;
    &lt;script type=""text/javascript""
            src=""/webjars/bootstrap/js/bootstrap.min.js""&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Login&lt;/h1&gt;
&lt;div class=""container unauthenticated""&gt;
    With Facebook: &lt;a href=""/login/facebook""&gt;click here&lt;/a&gt;
&lt;/div&gt;
&lt;div class=""container authenticated"" style=""display: none""&gt;
    Logged in as: &lt;span id=""user""&gt;&lt;/span&gt;
    &lt;div&gt;
        &lt;button onClick=""logout()"" class=""btn btn-primary""&gt;Logout&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;script type=""text/javascript""
        src=""/webjars/js-cookie/js.cookie.js""&gt;&lt;/script&gt;
&lt;script type=""text/javascript""&gt;
    $.ajaxSetup({
        beforeSend: function (xhr, settings) {
            if (settings.type == 'POST' || settings.type == 'PUT'
                || settings.type == 'DELETE') {
                if (!(/^http:.*/.test(settings.url) || /^https:.*/
                        .test(settings.url))) {
                    // Only send the token to relative URLs i.e. locally.
                    xhr.setRequestHeader(""X-XSRF-TOKEN"",
                        Cookies.get('XSRF-TOKEN'));
                }
            }
        }
    });
    $.get(""/user"", function (data) {
        $(""#user"").html(data.userAuthentication.details.name);
        $("".unauthenticated"").hide();
        $("".authenticated"").show();
    });
    var logout = function () {
        $.post(""/logout"", function () {
            $(""#user"").html('');
            $("".unauthenticated"").show();
            $("".authenticated"").hide();
        });
        return true;
    }
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p><strong>application.yml:</strong></p>

<pre><code>server:
  port: 8080
security:
  oauth2:
    client:
      client-id: acme
      client-secret: acmesecret
      scope: read,write
      auto-approve-scopes: '.*'

facebook:
  client:
    clientId: 233668646673605
    clientSecret: 33b17e044ee6a4fa383f46ec6e28ea1d
    accessTokenUri: https://graph.facebook.com/oauth/access_token
    userAuthorizationUri: https://www.facebook.com/dialog/oauth
    tokenName: oauth_token
    authenticationScheme: query
    clientAuthenticationScheme: form
  resource:
    userInfoUri: https://graph.facebook.com/me
github:
  client:
    clientId: bd1c0a783ccdd1c9b9e4
    clientSecret: 1a9030fbca47a5b2c28e92f19050bb77824b5ad1
    accessTokenUri: https://github.com/login/oauth/access_token
    userAuthorizationUri: https://github.com/login/oauth/authorize
    clientAuthenticationScheme: form
  resource:
    userInfoUri: https://api.github.com/user

logging:
  level:
    org.springframework.security: DEBUG
</code></pre>

<p>But when I open browser and try to hit <code>http://localhost:8080</code></p>

<p>In browser console I see:</p>

<pre><code>(index):44 Uncaught TypeError: Cannot read property 'details' of undefined
    at Object.success ((index):44)
    at j (jquery.js:3073)
    at Object.fireWith [as resolveWith] (jquery.js:3185)
    at x (jquery.js:8251)
    at XMLHttpRequest.&lt;anonymous&gt; (jquery.js:8598)
</code></pre>

<p>in code:</p>

<pre><code>$.get(""/user"", function (data) {
        $(""#user"").html(data.userAuthentication.details.name);
        $("".unauthenticated"").hide();
        $("".authenticated"").show();
    });
</code></pre>

<p>It happens because <code>/user</code> response with 302 status code and js callback try to parse result of <code>localhost:8080</code>:</p>

<p><a href=""https://i.stack.imgur.com/LFbfu.jpg"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/LFbfu.jpg"" alt=""enter image description here""></a></p>

<p>I don't understand why this redirect happens. Can you explain this behavior and help to fix it?</p>

<h2>UPDATE</h2>

<p>I took this code from <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2"" rel=""noreferrer"">https://github.com/spring-guides/tut-spring-boot-oauth2</a></p>

<h2>important:</h2>

<p>It reproduces <strong>only after I start client application.</strong></p>

<h2>P.S.</h2>

<p><strong>How to reproduce:</strong></p>

<blockquote>
  <p>To test the new features you can just run both apps and visit
  localhost:9999/client in your browser. The client app will redirect to
  the local Authorization Server, which then gives the user the usual
  choice of authentication with Facebook or Github. Once that is
  complete control returns to the test client, the local access token is
  granted and authentication is complete (you should see a ""Hello""
  message in your browser). If you are already authenticated with Github
  or Facebook you may not even notice the remote authentication</p>
</blockquote>

<h2>ANSWER:</h2>

<p><a href=""https://stackoverflow.com/a/50349078/2674303"">https://stackoverflow.com/a/50349078/2674303</a></p>
",2674303,,2674303,,2018-12-10 12:06:44,2018-12-10 12:06:44,Official Spring security oauth2 example doesn't work because of cookies clashing(authorization code mechanism),<java><spring-security><oauth-2.0><spring-oauth2>,3,5,2,,
Spring,48772458,1,49214701,,2018,,4,593,"<p>So here's a new one, for meI'm working with one of the Spring Boot guides, and getting the</p>

<pre><code>Error: Could not find or load main class org.apache.maven.wrapper.MavenWrapperMain
</code></pre>

<p>error when running</p>

<pre><code>./mvnw spring-boot:run
</code></pre>

<p>(or any Maven Wrapper command)</p>

<p>That said, I see the <code>wrapper</code> jar within <code>.mvn</code> where I would expect it to be. </p>

<p>Has anyone else hit this? It seems like it must be a system-level issue because I've had no issue with this in the past.</p>

<p>Here is the repo I am running this command on: <a href=""https://github.com/spring-guides/gs-scheduling-tasks.git"" rel=""noreferrer"">https://github.com/spring-guides/gs-scheduling-tasks.git</a></p>
",2355712,,,,,2018-03-16 19:39:49,"could not find MavenWrapperMain class, but is contained within .m2 in the directory",<java><maven>,4,7,2,,
Spring,42867921,1,,,2017,,4,931,"<p>I created a simple authorization server, but cannot configure it. </p>

<ol>
<li>Start both apps (8080 is for auth server and 9999 is for client).</li>
<li>Go to <code>localhost:9999/client</code> and get redirected to <code>localhost:8080/login</code> (as expected).</li>
<li>Fill the login form with <em>user/user</em>.</li>
<li>Get redirected to <code>localhost:9999/client</code> (as expected), but have <code>Hello, null</code> instead of <code>Hello, user</code>.</li>
</ol>

<p>However, if I go straight to <code>localhost:8080/me</code>, I have <code>{""name"":""user""}</code>. How can I retrieve <code>Hello, user</code>?</p>

<p><strong>Authorization server</strong></p>

<pre><code>@RestController
@EnableAuthorizationServer
@SpringBootApplication
public class Application extends WebSecurityConfigurerAdapter {

    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }

    @GetMapping({ ""/user"", ""/me"" })
    public Map&lt;String, String&gt; user(Principal principal) {
        return Collections.singletonMap(""name"", principal == null ? ""null"" : principal.getName());
    }

    @Override
    protected void configure(AuthenticationManagerBuilder auth) throws Exception {
        auth.inMemoryAuthentication()
                .withUser(""user"").password(""user"").authorities(AuthorityUtils.NO_AUTHORITIES);
    }

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http.formLogin();
    }
}
</code></pre>

<p><strong>Application's properties</strong></p>

<pre><code>security:
  oauth2:
    client:
      client-id: clientid
      client-secret: clientsecret
      scope: read,write
      auto-approve-scopes: '.*'
</code></pre>

<p><strong>Client</strong></p>

<pre><code>@Configuration
@EnableAutoConfiguration
@EnableOAuth2Sso
@RestController
public class Client {

    @GetMapping(""/"")
    public String home(Principal principal) {
        return ""Hello, "" + principal.getName();
    }

    public static void main(String[] args) {
        new SpringApplicationBuilder(Client.class)
                .properties(""spring.config.name=client"").run(args);
    }

}
</code></pre>

<p><strong>Client's properties</strong></p>

<pre><code>server:
  port: 9999
  context-path: /client
security:
  oauth2:
    client:
      client-id: clientid
      client-secret: clientsecret
      access-token-uri: http://localhost:8080/oauth/token
      user-authorization-uri: http://localhost:8080/oauth/authorize
    resource:
      user-info-uri: http://localhost:8080/me
</code></pre>

<p><strong>UPDATE:</strong><br>
I downloaded <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/tree/master/auth-server"" rel=""nofollow noreferrer"">a tutorial</a> when all works, but it has <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/blob/master/auth-server/src/main/java/com/example/SocialApplication.java#L81"" rel=""nofollow noreferrer"">ssoFilter</a> that is only for OAuth2 authentication. I just want to configure it with <code>loginForm</code>.<br>
I have also shared a temporary <a href=""https://github.com/delverdev/login-server-example"" rel=""nofollow noreferrer"">example</a> on GitHub. I think it will be easier to look up the problem with it.</p>
",4725496,,4725496,,2017-03-27 3:09:46,2017-03-27 14:02:39,Spring cannot configure authorization server,<java><spring><spring-boot><spring-security><spring-security-oauth2>,4,3,3,,
Spring,40585031,1,40595012,,2016,,7,11431,"<p>Tried springboot for the first time but I am unable to get it to start.
I used the sample app: <a href=""https://github.com/spring-guides/gs-spring-boot.git"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-spring-boot.git</a>
I also made modifications to use an embedded jetty instead of tomcat but still no success.</p>

<p>The exception I get is this: org.springframework.context.ApplicationContextException: Unable to start embedded container; nested exception is java.lang.IllegalArgumentException: Resource location must not be null.</p>

<p>This is on MacOSX.</p>

<p>Edit: I have confirmed this is an environment issue. I can start the app just fine in a linux(fedora) VM but for whatever reason I run into this problem on my Mac. Not sure if anyone else run into this and has any clues on what might be causing this.</p>

<p>Edit 2: So this appears to be an issue with trying to configure ssl by default. I am not sure why this is the case since I haven't specified this anywhere; So my question now is, how do I disable https in spring-boot? </p>

<pre><code>mvn -version
Apache Maven 3.2.5 (12a6b3acb947671f09b81f49094c53f426d8cea1; 2014-12-14T09:29:23-08:00)
Maven home: /usr/local/Cellar/maven/3.2.5/libexec
Java version: 1.8.0_25, vendor: Oracle Corporation
Java home: /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre
Default locale: en_US, platform encoding: UTF-8
OS name: ""mac os x"", version: ""10.10.5"", arch: ""x86_64"", family: ""mac""
</code></pre>

<p>Any help is appreciated. </p>

<pre><code>org.springframework.context.ApplicationContextException: Unable to start embedded container; nested exception is java.lang.IllegalArgumentException: Resource location must not be null
    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:137) ~[spring-boot-1.4.2.RELEASE.jar!/:1.4.2.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:536) ~[spring-context-4.3.4.RELEASE.jar!/:4.3.4.RELEASE]
    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122) ~[spring-boot-1.4.2.RELEASE.jar!/:1.4.2.RELEASE]
    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:761) [spring-boot-1.4.2.RELEASE.jar!/:1.4.2.RELEASE]
    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:371) [spring-boot-1.4.2.RELEASE.jar!/:1.4.2.RELEASE]
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:315) [spring-boot-1.4.2.RELEASE.jar!/:1.4.2.RELEASE]
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1186) [spring-boot-1.4.2.RELEASE.jar!/:1.4.2.RELEASE]
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1175) [spring-boot-1.4.2.RELEASE.jar!/:1.4.2.RELEASE]
    at hello.Application.main(Application.java:15) [classes!/:0.1.0]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_25]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_25]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_25]
    at java.lang.reflect.Method.invoke(Method.java:483) ~[na:1.8.0_25]
    at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:48) [gs-spring-boot-0.1.0.jar:0.1.0]
    at org.springframework.boot.loader.Launcher.launch(Launcher.java:87) [gs-spring-boot-0.1.0.jar:0.1.0]
    at org.springframework.boot.loader.Launcher.launch(Launcher.java:50) [gs-spring-boot-0.1.0.jar:0.1.0]
    at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:58) [gs-spring-boot-0.1.0.jar:0.1.0]
Caused by: java.lang.IllegalArgumentException: Resource location must not be null
    at org.springframework.util.Assert.notNull(Assert.java:115) ~[spring-core-4.3.4.RELEASE.jar!/:4.3.4.RELEASE]
    at org.springframework.util.ResourceUtils.getURL(ResourceUtils.java:131) ~[spring-core-4.3.4.RELEASE.jar!/:4.3.4.RELEASE]
    at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainerFactory.configureSslKeyStore(TomcatEmbeddedServletContainerFactory.java:417) ~[spring-boot-1.4.2.RELEASE.jar!/:1.4.2.RELEASE]
    at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainerFactory.configureSsl(TomcatEmbeddedServletContainerFactory.java:395) ~[spring-boot-1.4.2.RELEASE.jar!/:1.4.2.RELEASE]
    at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainerFactory.customizeSsl(TomcatEmbeddedServletContainerFactory.java:332) ~[spring-boot-1.4.2.RELEASE.jar!/:1.4.2.RELEASE]
    at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainerFactory.customizeConnector(TomcatEmbeddedServletContainerFactory.java:311) ~[spring-boot-1.4.2.RELEASE.jar!/:1.4.2.RELEASE]
    at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainerFactory.getEmbeddedServletContainer(TomcatEmbeddedServletContainerFactory.java:169) ~[spring-boot-1.4.2.RELEASE.jar!/:1.4.2.RELEASE]
    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.createEmbeddedServletContainer(EmbeddedWebApplicationContext.java:164) ~[spring-boot-1.4.2.RELEASE.jar!/:1.4.2.RELEASE]
    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:134) ~[spring-boot-1.4.2.RELEASE.jar!/:1.4.2.RELEASE]
    ... 16 common frames omitted
</code></pre>
",979467,,1399491,,2018-12-12 18:26:43,2019-03-07 16:10:00,Unable to start springboot app - Resource location must not be null,<spring><spring-boot>,4,5,,,
Spring,23366226,1,23366746,,2014,,28,23955,"<p>I'm having trouble with my first steps using Spring-Boot with JPA. I've started with a pretty minimalistic <a href=""https://github.com/spring-guides/gs-accessing-data-jpa.git"">example from Git</a> using Gradle. </p>

<p>Now simply moving <code>Customer</code> to another package, let's say to <code>hello2</code> results in an exception <code>Caused by: java.lang.IllegalArgumentException: Not an managed type: class hello2.Customer</code>. I tried to add </p>

<p><code>@ComponentScan(basePackageClasses= {Customer.class}) // AND OR
@EnableJpaRepositories(basePackageClasses= {Customer.class})</code></p>

<p>to <code>Application</code>, but without success. </p>

<p>What am I doing wrong?</p>
",294068,,,,,2017-11-24 7:18:08,Spring Boot w/ JPA: move @Entity to different package,<spring><jpa><spring-data><spring-data-jpa><spring-boot>,4,0,5,,
Spring,46794654,2,,46792838,2017,,1,,"<p>You missed to <em>join</em> the asynchronous jobs, that's why the <code>run</code> method exits (far) before all threads complete - and the awkward behavior is ""more comprehensible"".</p>

<p>According to <a href=""https://github.com/spring-guides/gs-async-method/blob/master/complete/src/main/java/hello/AppRunner.java"" rel=""nofollow noreferrer"">doc</a>, you could join like:</p>

<pre><code>...
CompletableFuture&lt;Void&gt;[] myJobs = new CompletableFuture&lt;&gt;[N];
...
for (int i = 0; i &lt; N; i++) {
        myJobs[i] = asyncService.runAsyncMethod();
}
...
CompletableFuture.allOf(myJobs).join();
</code></pre>

<p>And your <code>runAsyncMethod()</code> would need to return a <code>CompletableFuture&lt;Void&gt;</code>. To do so, you can just <code>return CompletableFuture.completedFuture(null);</code></p>
",592355,,2561365,,2017-10-17 16:21:48,2017-10-17 16:21:48,,,,0,,,
Spring,37928963,2,,37918414,2016,,1,,"<p>What you are describing are Integration Tests and something <em>Spring Data GemFire</em> does almost exactly as you describe, albeit a bit more directly (i.e. injecting GemFire Regions or perhaps other GemFire components directly into test classes).  For instance have a look at the <a href=""https://github.com/jxblum/spring-data-gemfire/blob/master/src/test/java/org/springframework/data/gemfire/GemfireTemplateIntegrationTest.java#L58-L61"" rel=""nofollow"">GemFireTemplateIntegrationTest</a> class along with it's associated <a href=""https://github.com/jxblum/spring-data-gemfire/blob/master/src/test/resources/org/springframework/data/gemfire/GemfireTemplateIntegrationTest-context.xml#L13-L23"" rel=""nofollow"">Spring (XML) config</a>.</p>

<p>This makes sense for <em>Spring Data GemFire</em> to use GemFire components directly in tests.  Although, this is perhaps less than ideal in an actual application test suite, primarily because I believe in good Separation of Concerns and providing appropriate facades around the dependencies my application uses.</p>

<p>In other words, and as you alluded to above, having the following (traditional n) tiers in the application...</p>

<p>UI -> Service -> DAO</p>

<p>The Service tier is pure business logic and rules and any interactions (CRUD, Querying, Function execution, etc) with any data store (GemFire/Geode included) is done so via the DAO.</p>

<p>This makes mocking the DAO very easy so that you can focus on the point of the Service tests, to test the business logic and rules independently of how the underlying data store behaves.</p>

<p>Of course, it is important to have Integration Tests to ensure the proper interactions with your underlying data store, such as GemFire/Geode, if only to ensure proper transactional behavior, or that your OQL (query) statements are well formed.</p>

<p>But, there are many options when it comes to implementing your DAO.</p>

<ol>
<li><p>You can inject the Region into your DAO(s) and perform operations (CRUD, Queries, etc) directly on the Region.</p></li>
<li><p>If you are using <em>Spring Data GemFire</em>, you might prefer to shield your DAO(s) from direct use of the GemFire/Geode API using the <a href=""http://docs.spring.io/spring-data-gemfire/docs/current/api/org/springframework/data/gemfire/GemfireTemplate.html"" rel=""nofollow"">GemfireTemplate</a> (in case of interface breaking changes introduced by GemFire/Geode, or to wrap GemFire/Geode Exceptions in <em>Spring's</em> convenient and consistent (across data stores) <a href=""http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#dao-exceptions"" rel=""nofollow"">Exception class hierarchy</a>, which is useful if you ever swap out data stores).  See <a href=""http://docs.spring.io/spring-data-gemfire/docs/current/reference/html/#apis"" rel=""nofollow"">here</a> for more details.</p></li>
<li><p>Lastly (but not least), you can use <em>Spring Data GemFire's</em> <a href=""http://docs.spring.io/spring-data-gemfire/docs/current/reference/html/#gemfire-repositories"" rel=""nofollow"">extension</a> of <em>Spring Data Common's</em> Repository abstraction with support for GemFire/Geode.  This makes implementing DAOs (a.k.a. Repositories) as simples as defining an interface that extends <a href=""http://docs.spring.io/spring-data-gemfire/docs/current/api/org/springframework/data/gemfire/repository/GemfireRepository.html"" rel=""nofollow"">GemfireRepository</a>.</p></li>
</ol>

<p>You choice depends on the level of abstraction you prefer and each choice will slightly change how you approach your Integration Testing.</p>

<p>As one final tidbit, this does not preclude you from still writing true Unit Tests either.</p>

<p><em>Spring Data GemFire</em> employs a <a href=""https://github.com/jxblum/spring-data-gemfire/tree/master/src/test/java/org/springframework/data/gemfire/test"" rel=""nofollow"">custom test framework</a> (with mocks and stubs) to simplify Unit Tests involving GemFire components (such as Regions, AEQs, Gateways, etc).  This ""<em>custom test framework</em>"" is rooted in the <a href=""https://github.com/jxblum/spring-data-gemfire/blob/master/src/test/java/org/springframework/data/gemfire/test/GemfireTestApplicationContextInitializer.java"" rel=""nofollow"">GemfireTestApplicationContextInitializer</a> and the associated <a href=""https://github.com/jxblum/spring-data-gemfire/blob/master/src/test/java/org/springframework/data/gemfire/test/GemfireTestBeanPostProcessor.java"" rel=""nofollow"">GemfireTestBeanPostProcessor</a>.  If you follow the logic through you will begin to see how it works.</p>

<p>This custom test framework is very useful for testing the validity of the GemFire components created and initialized using <a href=""http://docs.spring.io/spring-data-gemfire/docs/current/reference/html/#appendix-schema"" rel=""nofollow"">SDG's XML namespace</a>.  However, it is becoming increasingly popular to put configuration meta-data, even for GemFire/Geode components into <a href=""https://github.com/spring-guides/gs-accessing-data-gemfire/blob/master/complete/src/main/java/hello/Application.java#L22-L47"" rel=""nofollow"">Spring config now</a>, something I am looking to <a href=""https://jira.spring.io/browse/SGF-492"" rel=""nofollow"">enhance/simplify</a> further in <em>Spring Data GemFire</em> 1.9.</p>

<p>In addition, I hope to, at some point, work that I have already begun, to uplift and refactor <em>Spring Data GemFire's</em> custom test framework into a separate, top-level Spring project extension for <em>Spring Data GemFire</em> as this sort of question has been asked a lot.</p>

<p>Anyway, hopefully this gives you some ideas how to best approach tests for you application in a simple, concise and consistent manner.</p>

<p>Cheers!</p>
",3390417,,,,,2016-06-20 18:01:01,,,,8,,,
Spring,39527800,2,,39527308,2016,,1,,"<p>I am able to achieve social login with multiple RESTful resource by following two example applications, following are the steps:</p>

<p>(1) Checkout <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2"" rel=""nofollow"">https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2</a></p>

<p>(2) Delete ""authserver"" folder (We will use auth-server from another project)</p>

<p>(3) Checkout auth-server from social demo: <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/tree/master/auth-server"" rel=""nofollow"">https://github.com/spring-guides/tut-spring-boot-oauth2/tree/master/auth-server</a></p>

<p>(4) Open application.yml of ""ui"" project and do following changes:</p>

<pre><code>server.port: 9001
server.context-path: /zuul
debug: true

spring:
  aop:
    proxy-target-class: true


security:
  oauth2:
    client:
      client-id: acme
      client-secret: acmesecret
      access-token-uri: http://localhost:8080/oauth/token
      user-authorization-uri: http://localhost:8080/oauth/authorize
      grant-type: implicit
    resource:
      user-info-uri: http://localhost:8080/me

zuul:
  routes:
    resource:
      path: /resource/**
      url: http://localhost:9000/resource
    user:
      path: /user/**
      url: http://localhost:8080/me

logging:
  level:
    org.springframework.security: DEBUG
</code></pre>

<p>(5) Open application.yml of auth-server and add google properties:</p>

<pre><code>google:
  client:
    clientId: &lt;your client id&gt;
    clientSecret: &lt;your client secret&gt;
    accessTokenUri: https://accounts.google.com/o/oauth2/token
    scope: profile,email
    userAuthorizationUri: https://accounts.google.com/o/oauth2/auth
    clientAuthenticationScheme: form
    redirect-uri: http://localhost:8080
  resource:
    userInfoUri: https://www.googleapis.com/plus/v1/people/me
</code></pre>

<p>(6) Open SocialApplication.java of auth-server :
Add google related bean and filters (similar to facebook and github).</p>

<p>(7) rename application.properties to application.yml of ""resource"" project 
following is the content of that yml:</p>

<pre><code>server:
  port: 9000
  context-path: /resource
security:
  oauth2:
    resource:
      user-info-uri: http://localhost:8080/me

logging:
  level:
    org.springframework.security: DEBUG
    org.springframework.web: DEBUG
</code></pre>

<p>(8) Now run auth-server, resource and ui projects and hit URL with port 9001 and context /zuul.</p>
",4405397,,,,,2016-09-16 9:17:01,,,,4,,,
Spring,37848824,2,,37846821,2016,,1,,"<h2><a href=""https://github.com/eirslett/frontend-maven-plugin"" rel=""nofollow"">Maven Frontend Plugin</a></h2>

<p>This plugin allows you to harness the power of the Node.js ecosystem including Gulp, Bower &amp; much more.</p>

<p>Examples:</p>

<ul>
<li><a href=""https://github.com/jhipster/jhipster-sample-app"" rel=""nofollow"">JHipster Sample App</a></li>
<li><a href=""https://github.com/mikaelhg/spring-boot-webpack-es6-react-poc"" rel=""nofollow"">Spring Boot + Maven Frontend Plugin</a></li>
<li><a href=""https://github.com/spring-guides/tut-react-and-spring-data-rest"" rel=""nofollow"">React.js + Spring Data REST</a></li>
</ul>

<p>The aforementioned applications each use the plugin differently.  It supports a wide variety of configurations.  My preference is putting all my frontend code into src/main/frontend and directing the output to the <strong>target</strong> directory.</p>
",1078565,,,,,2016-06-16 2:18:28,,,,0,,,
Spring,37911755,2,,37911120,2016,,1,,"<p>Have you looked at the <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/tree/master/auth-server"" rel=""nofollow""><em>Hosting an Authorization Server</em> OAuth 2</a> and <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/blob/master/auth-server/src/main/java/com/example/SocialApplication.java#L71"" rel=""nofollow""><code>SocialApplication.java</code></a> examples that are part of Spring Boot?</p>

<p>This example configures a server that's able to grant OAuth tokens using the <code>@EnableAuthorizationServer</code> annotation.</p>

<p>There are also two <code>curl</code> examples that demonstrate how a client can request an access token:</p>

<blockquote>
<pre><code>$ curl acme:acmesecret@localhost:8080/oauth/token -d grant_type=client_credentials
{""access_token"":""370592fd-b9f8-452d-816a-4fd5c6b4b8a6"",""token_type"":""bearer"",""expires_in"":43199,""scope"":""read write""}

$ curl acme:acmesecret@localhost:8080/oauth/token -d grant_type=password -d username=user -d password=...
{""access_token"":""aa49e025-c4fe-4892-86af-15af2e6b72a2"",""token_type"":""bearer"",""refresh_token"":""97a9f978-7aad-4af7-9329-78ff2ce9962d"",""expires_in"":43199,""scope"":""read write""}
</code></pre>
</blockquote>
",6243024,,,,,2016-06-19 20:56:03,,,,2,,,
Spring,31998792,2,,31993487,2015,,1,,"<p>Your problem is, your rest endpoints are authenticated with spring security. So the error message clearly indicates that, you want to be authenticate yourself before sending the request. You can ignore the authentication, until you make sure everything is working. What you will need is something like this.</p>

<pre><code>@Override
protected void configure(HttpSecurity http) throws Exception {
    http.authorizeRequests().antMatchers(""/submitEnrollment"").permitAll().and().csrf().disable();
}
</code></pre>

<p>You can find a good config from <a href=""https://github.com/spring-guides/gs-securing-web/blob/master/complete/src/main/java/hello/WebSecurityConfig.java"" rel=""nofollow"">here</a>. If you need more complex config, go through this jhipster <a href=""https://github.com/jhipster/jhipster-sample-app-gradle"" rel=""nofollow"">project</a>, and specifically this <a href=""https://github.com/jhipster/jhipster-sample-app-gradle/blob/master/src/main/java/com/mycompany/myapp/config/SecurityConfiguration.java"" rel=""nofollow"">file</a>.</p>

<p>It is better you can go through <a href=""http://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-security.html"" rel=""nofollow"">these</a> <a href=""http://docs.spring.io/spring-security/site/docs/3.2.7.RELEASE/reference/htmlsingle/"" rel=""nofollow"">docs</a> as well. Hope this helps.</p>
",814025,,,,,2015-08-13 21:31:45,,,,0,,,
Spring,37898342,2,,37898055,2016,,1,,"<p>I'll give you some examples of Java + Angular but they use the Spring Framework.  Should be easy enough to port to Dropwizard.</p>

<ul>
<li><strong><a href=""https://jhipster.github.io/"" rel=""nofollow"">JHipster</a></strong></li>
<li><strong><a href=""http://spring.io/guides/tutorials/spring-security-and-angular-js/"" rel=""nofollow"">Spring + Angular</a> | <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js"" rel=""nofollow"">GitHub</a></strong></li>
<li><strong><a href=""https://github.com/kbastani/spring-cloud-event-sourcing-example/tree/master/online-store-web"" rel=""nofollow"">Spring Cloud Online Store</a></strong></li>
</ul>
",1078565,,,,,2016-06-18 14:59:13,,,,3,,,
Spring,38784322,2,,36840857,2016,,1,,"<p>Using the FacebookTemplate constructor directly will provide you with an unauthenticated (that is, without OAuth) connection only, that will work for queries that do not require authentication. This is why you get Authorization Exceptions, accessing feeds require authentication (an authenticated facebook user, that has given your application the proper authorization to perform these actions).</p>

<p>Note that you will need a way to get the user's access token to be authenticated, and doing so in a console application might prove tricky. Using Spring Social in a WebApplication however is quite easy, basically all you need is </p>

<pre><code>@Controller
@RequestMapping(""/"")
public class HelloController {

    private Facebook facebook;
    private ConnectionRepository connectionRepository;

    @Inject
    public HelloController(Facebook facebook, ConnectionRepository connectionRepository) {
        this.facebook = facebook;
        this.connectionRepository = connectionRepository;
    }

    @RequestMapping(method=RequestMethod.GET)
    public String helloFacebook(Model model) {
        if (connectionRepository.findPrimaryConnection(Facebook.class) == null) {
            return ""redirect:/connect/facebook"";
        }

        model.addAttribute(""facebookProfile"", facebook.userOperations().getUserProfile());
        PagedList&lt;Post&gt; feed = facebook.feedOperations().getFeed();
        model.addAttribute(""feed"", feed);
        return ""hello"";
    }

}
</code></pre>

<p>(example taken from here: <a href=""https://github.com/spring-guides/gs-accessing-facebook"" rel=""nofollow"">https://github.com/spring-guides/gs-accessing-facebook</a>)
with a configuration with <code>spring.social.facebook.appId</code> and <code>spring.social.facebook.appSecret</code> configured properly.</p>

<p>To <strong>test</strong> your queries with a console application however, you might</p>

<ol>
<li>Create app on Facebook's api pages.</li>
<li>Go to <a href=""https://developers.facebook.com/tools/accesstoken/"" rel=""nofollow"">https://developers.facebook.com/tools/accesstoken/</a></li>
<li>Use that tokens in the <code>FacebookTemplate</code>-Constructor</li>
</ol>

<p>This will always be your user, so you might not want to release this app into the wild ;)</p>
",6681381,,,,,2016-08-05 8:10:08,,,,0,,,
Spring,52871335,2,,52870403,2018,,1,,"<p>You can use this method from <a href=""https://spring.io/guides/gs/uploading-files/"" rel=""nofollow noreferrer"">spring guide</a>   </p>

<pre><code>public Stream&lt;Path&gt; loadAll() {
    Path rootLocation = Paths.get(""&lt;your path&gt;"");
    try {
        return Files.walk(rootLocation, 1).filter(path -&gt; !path.equals(rootLocation)).map(rootLocation::relativize);
    } catch (IOException e) {
        e.printStackTrace();
    }
}
</code></pre>

<p>In order to list files:</p>

<pre><code>@GetMapping(""/"")
public String listUploadedFiles(Model model) throws IOException {

    model.addAttribute(""files"",
            storageService.loadAll()
                    .map(path -&gt; MvcUriComponentsBuilder
                            .fromMethodName(FileUploadController.class, ""serveFile"", path.getFileName().toString())
                            .build().toString())
                    .collect(Collectors.toList()));

    return ""uploadForm"";
}
</code></pre>

<p>Where <em>uploadForm</em> is html document. For more details check out <a href=""https://github.com/spring-guides/gs-uploading-files"" rel=""nofollow noreferrer"">guide repo</a>.</p>
",8349029,,,,,2018-10-18 9:46:15,,,,0,,,
Spring,45359294,2,,45357194,2017,,1,,"<p>This answer is written based on this application: <a href=""https://github.com/spring-guides/gs-messaging-stomp-websocket"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-messaging-stomp-websocket</a></p>

<p>In order to register a user, you must first create an object that will represent it, for example:</p>

<pre><code>public final class User implements Principal {

    private final String name;

    public User(String name) {
        this.name = name;
    }

    @Override
    public String getName() {
        return name;
    }
}
</code></pre>

<p>Then you'll need a way to create these <code>User</code> objects. One way of doing it is when <code>SockJS</code> sends you the connect message headers. In order to do so, you need to intercept the connect message. You can do that by creating our your interceptor, for example:</p>

<pre><code>public class UserInterceptor extends ChannelInterceptorAdapter {

    @Override
    public Message&lt;?&gt; preSend(Message&lt;?&gt; message, MessageChannel channel) {

        StompHeaderAccessor accessor =
                MessageHeaderAccessor.getAccessor(message, StompHeaderAccessor.class);

        if (StompCommand.CONNECT.equals(accessor.getCommand())) {
            Object raw = message
                    .getHeaders()
                    .get(SimpMessageHeaderAccessor.NATIVE_HEADERS);

            if (raw instanceof Map) {
                Object name = ((Map) raw).get(""name"");

                if (name instanceof LinkedList) {
                    accessor.setUser(new User(((LinkedList) name).get(0).toString()));
                }
            }
        }
        return message;
    }
}
</code></pre>

<p>Once you have that, you must also register this <code>UserInterceptor</code>. I'm guessing somewhere in your application you have defined a configuration <code>AbstractWebSocketMessageBrokerConfigurer</code> class. In this class you can register your user interceptor by overriding <code>configureClientInboundChannel</code> method. You can do it like this:</p>

<pre><code>@Override
public void configureClientInboundChannel(ChannelRegistration registration) {
    registration.setInterceptors(new UserInterceptor());
}
</code></pre>

<p>And then finally, when your clients connect, they'll have to provide their usernames:</p>

<pre><code>stompClient.connect({
    name: 'test' // Username!
}, function () {
    console.log('connected');
});
</code></pre>

<p>After you have all this setup, <code>simpUserRegistry.getUsers()</code> will return a list of users and you'll be able to use <code>convertAndSendToUser</code> method:</p>

<pre><code>messaging.convertAndSendToUser(""test"", ..., ...);
</code></pre>

<p><strong>Edit</strong></p>

<p>Testing this out a bit further, when subscribing, you'll have to prefix your topics with <code>/user</code> as <code>SimpMessagingTemplate</code> uses this as a default prefix, for example:</p>

<pre><code>stompClient.subscribe('/user/...', ...);
</code></pre>

<p>Also I had made a mistake in <code>UserInterceptor</code> and corrected it (name parsing part).</p>
",3274974,,3274974,,2017-07-27 19:50:37,2017-07-27 19:50:37,,,,3,,,
Spring,41493864,2,,6610563,2017,,1,,"<p>I realized following the tutorial <a href=""https://github.com/spring-guides/gs-async-method"" rel=""nofollow noreferrer"">async-method tutorial code</a> that my issue source was: the bean with the annotated <code>@Async</code> method was not being created wrapped in a proxy.
I started digging and realized that there was a message saying </p>

<blockquote>
  <p>Bean 'NameOfTheBean' is not eligible for getting processed by all
  BeanPostProcessors (for example: not eligible for auto-proxying)</p>
</blockquote>

<p>You can see <a href=""https://stackoverflow.com/questions/1201726/tracking-down-cause-of-springs-not-eligible-for-auto-proxying"">here</a> responses about this issue and its basically that BeanPostProcessors are required by every Bean, so every bean injected here and its dependencies will be excluded to be processed later by other BeanPostProcessors, because it corrupted the life cycle of beans. So identify which is the <code>BeanPostProcessor</code> that is causing this and dont use or create beans inside of it.</p>

<p>In my case i had this configuration</p>

<pre><code>@EnableWs
@Configuration
public class WebServiceConfig extends WsConfigurerAdapter {

    @Autowired
    private Wss4jSecurityInterceptor securityInterceptor;

    @Autowired
    private DefaultPayloadLoggingInterceptor payloadLoggingInterceptor;

    @Override
    public void addInterceptors(List&lt;EndpointInterceptor&gt; interceptors) {
        interceptors.add(securityInterceptor);
        interceptors.add(payloadLoggingInterceptor);
    }
}
</code></pre>

<p><code>WsConfigurerAdapter</code> is actually a <code>BeanPostProcessor</code> and you realize it because there is always a pattern: <code>@Configuration</code> that extends classes and override some of it functions to install or tweak beans involved in some non functional features, like web service or security.</p>

<p>In the aforementioned example you have to override the <code>addInterceptors</code> and added interceptors beans, so if you are using some annotation like <code>@Async</code> inside <code>DefaultPayloadLoggingInterceptor</code> it wont work. What is the solution? Get ride of <code>WsConfigurerAdapter</code> to start. 
After digging a bit i realized a class named <code>PayloadRootAnnotationMethodEndpointMapping</code> at the end was which had all valid interceptors, so i did it manually insted of overriding a function.</p>

<pre><code>@EnableWs
@Configuration
public class WebServiceConfig {

    @Autowired
    private Wss4jSecurityInterceptor securityInterceptor;

    @Autowired
    private DefaultPayloadLoggingInterceptor payloadLoggingInterceptor;

    @Autowired
    public void setupInterceptors(PayloadRootAnnotationMethodEndpointMapping endpointMapping) {
        EndpointInterceptor[] interceptors = {
                securityInterceptor,
                payloadLoggingInterceptor
        };

        endpointMapping.setInterceptors(interceptors);
    }
}
</code></pre>

<p>So this will be run after all <code>BeanPostProcessor</code> have done their job. The <code>setupInterceptors</code> function will run when that party is over and install the interceptors beans. This use case may be extrapolated to cases like Security.</p>

<p>Conclusions:</p>

<ul>
<li>If you are using a @Configuration extending from some class that runs some given functions automatically and you override them, you are probably inside of a <code>BeanPostProcessor</code>, so dont inject beans there and try to use AOP behaviour, because it wont work, and you will see Spring tells it to you with the beforementioned message in the console. In those cases dont use beans but objects (using the <code>new</code> clause).</li>
<li>If you need to use beans digg about which class is carrying the beans you want to setup at the end, <code>@Autowired</code> it and add those beans like i did before.</li>
</ul>

<p>I hope this may save some time for you.</p>
",3233398,,-1,,2017-05-23 12:10:26,2017-01-10 15:40:48,,,,0,,,
Spring,40962303,2,,40961878,2016,,1,,"<p>Spring has a few examples - <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js"" rel=""nofollow noreferrer"">https://github.com/spring-guides/tut-spring-security-and-angular-js</a>. You could see the folder structure and the mechanism for unit testing.</p>

<p>Another good resource is <a href=""https://dzone.com/articles/java-maven-angularjs-seed"" rel=""nofollow noreferrer"">https://dzone.com/articles/java-maven-angularjs-seed</a></p>

<p>jHipster <a href=""https://jhipster.github.io/"" rel=""nofollow noreferrer"">https://jhipster.github.io/</a> is another good framework which sets up a maven or gradle project with the required project structure for angularjs and spring boot. They however use npm but its worth exploring.</p>
",5947369,,5947369,,2016-12-04 18:58:24,2016-12-04 18:58:24,,,,0,,,
Spring,55401367,2,,18762318,2019,,1,,"<p>In case of </p>

<pre><code>Exception in thread ""main"" java.lang.NoClassDefFoundError: com/sun/tools/xjc/api/ErrorListener
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.access$100(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Unknown Source)
    at java.lang.Class.getConstructor0(Unknown Source)
    at java.lang.Class.getConstructor(Unknown Source)
    at org.codehaus.mojo.jaxws.Invoker.main(Invoker.java:72)
Caused by: java.lang.ClassNotFoundException: com.sun.tools.xjc.api.ErrorListener
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 16 more
</code></pre>

<p>it could be that you are using a JRE instead of a JDK as project (or default) Eclipse JRE</p>

<p>Reference: <a href=""https://github.com/spring-guides/gs-consuming-web-service/issues/15#issuecomment-314018799"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-consuming-web-service/issues/15#issuecomment-314018799</a> </p>
",2929757,,,,,2019-03-28 15:27:09,,,,0,,,
Spring,39933279,2,,39923714,2016,,1,,"<p>The point here is that Spring Boot (in reality Spring Security) creates an <a href=""https://javaee-spec.java.net/nonav/javadocs/javax/servlet/http/HttpSession.html"" rel=""nofollow""><code>HttpSession</code></a> on the backend side after successful authentication.</p>

<p>Actually, the backend is stateful because it retains session data (authenticated user) on the server side. A client (here browser) gets identified by the supplied session id.</p>

<p>The authentication flow looks like this from a protocol perspective.</p>

<p><strong>Use case</strong>: Browser initiates an HTTP call to the backend: Backend answers with <code>Unauthorized</code> because the client tries to access a protected resource without <code>Authorization</code> header</p>

<pre><code>$ curl -I -H ""X-Requested-With:XMLHttpRequest"" http://localhost:8080/user

HTTP/1.1 401
Set-Cookie: XSRF-TOKEN=b1137571-5e15-491c-8df5-9db5d34f29a8;path=/
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
X-Frame-Options: DENY
Transfer-Encoding: chunked
</code></pre>

<p><strong>Use case</strong>: Preemptive basic authentication. Backend grants access to resource and notifies client about session id</p>

<pre><code>$ curl -I -H ""X-Requested-With:XMLHttpRequest"" -H ""Authorization:Basic dXNlcjpwYXNzd29yZA=="" http://localhost:8080/user

HTTP/1.1 200
Set-Cookie: XSRF-TOKEN=ef72f0b8-4262-4ea2-8a46-5f7e19558079;path=/
Set-Cookie: JSESSIONID=52B61923DE639EE339A653845FBFC5F2;path=/;HttpOnly
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
X-Frame-Options: DENY
Content-Type    : application/json;charset=UTF-8
Content-Length: 343
</code></pre>

<p>Due to the fact that the browser sends valid user credentials via the HTTP header <code>Authorization</code>, the backend creates a new <code>HttpSession</code> and sends back an identifier (the session id) to the browser </p>

<pre><code>Set-Cookie: JSESSIONID=52B61923DE639EE339A653845FBFC5F2;path=/;HttpOnly
</code></pre>

<p>Now, the browser attaches to every subsequent HTTP call the <code>Cookie</code> header automatically</p>

<pre><code>Cookie: JSESSIONID=52B61923DE639EE339A653845FBFC5F2
</code></pre>

<p>which prevents a new authentication cycle. As long as the session does not timeout on the server side, the server ""assigns"" the session data to this particular HTTP request.</p>

<p>Basic authentication is not limited to Spring Boot (Spring Security) nor Angular. It is a <a href=""https://www.ietf.org/rfc/rfc2617.txt"" rel=""nofollow"">standardized authentication scheme</a> for the Internet since many years.</p>

<p>Bear in mind, basic authentication is an old-fashioned authentication scheme and <strong>highly discouraged in modern web applications</strong>. </p>

<blockquote>
  <p>Will Spring simply let the request through since the user is already authenticated and does this happen because the Authentication Basic header is set post form authentication?</p>
</blockquote>

<p>Regarding the quoted example, you may now understand why an empty <code>headers</code> object does not lead to a rejection.</p>

<ol>
<li>The browser (the Angular application) sets preemptive the <code>Authorization</code> header with valid user credentials and initiates an HTTP request to a restricted resource</li>
<li>The server validates user credentials, creates an <code>HttpSession</code> identified by a session id and sends it back to the browser</li>
<li>The browser attaches the session id as a cookie to every subsequent HTTP request automatically</li>
<li>The server identifies the HTTP request by session id and accepts the incoming request</li>
</ol>

<p>What happens if you instruct Spring Security not to create sessions on the server? For that purpose append </p>

<pre><code>.and().sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)
</code></pre>

<p>to <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/blob/e383841dc390b1dcd45972cf346327b6d6fd18c5/single/src/main/java/demo/UiApplication.java#L54"" rel=""nofollow""><code>SecurityConfiguration::configure</code></a>.</p>

<p>Now, you can see that every call to <code>/resource</code> in the example leads to an HTTP 401 because there is no session on the server anymore. The Angular application is now forced to set the <code>Authorization</code> header on every HTTP request on its own.</p>

<p>The browser may attach <code>Authorization</code> header automatically too. For the sake of brevity, I will skip that part. Please keep in mind, <strong>basic authentication is highly discouraged in modern web applications</strong>. </p>

<p>The intention of the example is not to show you how to implement a sign in with Spring Boot and Angular. The <a href=""https://spring.io/blog/2015/01/12/spring-and-angular-js-a-secure-single-page-application"" rel=""nofollow"">main intention</a> is to evolve the primitive sign in towards a single sign on based on OAuth2 and Spring in a microservice architecture.</p>

<p>Don't take the code example for granted. </p>
",3151168,,1684269,,2016-10-12 21:36:11,2016-10-12 21:36:11,,,,0,,,
Spring,40226857,2,,40225023,2016,,1,,"<p>Your code sample looks totally fine for me. Moreover, I've created a project with sample code you've provided and it worked( with spring.boot.version 1.2.1.RELEASE ).</p>

<p>There is a similar project on <a href=""https://github.com/spring-guides/gs-scheduling-tasks/tree/master/complete"" rel=""nofollow"">github</a> you may be interested in.</p>
",5202500,,,,,2016-10-24 20:19:47,,,,1,,,
Spring,41020009,2,,40846972,2016,,1,,"<p>You can have a look at <a href=""https://spring.io/guides/tutorials/spring-boot-oauth2/"" rel=""nofollow noreferrer"">spring's tutorial focusing on oauth2</a>, and checkout the github project. They have a nice auth-server project where you can find an exemple of what you want to achieve.</p>

<h3>Steps to test your scenario are:</h3>

<ul>
<li>Checkout the tutorial project <code>git clone https://github.com/spring-guides/tut-spring-boot-oauth2.git</code></li>
<li>Run the spring boot project named <code>auth-server</code>
<code>cd auth-server &amp;&amp; mvn spring-boot:run</code></li>
<li>Authenticate through <a href=""http://localhost:8080"" rel=""nofollow noreferrer"">http://localhost:8080</a></li>
</ul>

<p>You'll find out that on auth-server side (the api server), an <code>OAuth2Authentication</code> principal will be available with a bearer token made available. You could use this auth-server exemple to design a Controller returning this token if user is authenticated.</p>

<ul>
<li>Then you'll be able to wget or curl the auth-server with such requests:</li>
</ul>

<p><code>curl -X GET ""http://localhost:8080/me"" -H ""Authorization: Bearer 22e70fcf-eb60-483c-9105-xxxx""</code></p>

<p>In my tests I got following response: <code>{""name"":""674008369426415""}</code></p>

<p>without the bearer, I fortunately got:</p>

<p><code>curl -X GET ""http://localhost:8080/me""</code>                                                                </p>

<p><code>{""error"":""unauthorized"",""error_description"":""Full authentication is required to access this resource""}</code></p>

<h3>Missing parts of code</h3>

<p>Looking at your code, I think you're missing the SSO Filter part of the spring's tutorial:</p>

<pre><code>http.antMatcher(""/**"")
// more configuration here
.addFilterBefore(ssoFilter(), BasicAuthenticationFilter.class);
</code></pre>

<p>and </p>

<pre><code>@Bean
public FilterRegistrationBean oauth2ClientFilterRegistration(OAuth2ClientContextFilter filter) {
    FilterRegistrationBean registration = new FilterRegistrationBean();
    registration.setFilter(filter);
    registration.setOrder(-100);
    return registration;
}
</code></pre>

<p>There must be an interception of client's request somewhere, so this may be something worth looking.</p>
",4757672,,,,,2016-12-07 14:28:23,,,,2,,,
Spring,22770418,2,,22770220,2014,,1,,"<p>Have you tried removing the WEB-INF folder completely and sticking everything in resources as is done in <a href=""https://github.com/spring-guides/gs-serving-web-content/tree/master/complete/src/main/resources/templates"" rel=""nofollow"">this</a> guide?</p>
",2504224,,,,,2014-03-31 19:25:48,,,,8,,,
Spring,48295077,2,,48247788,2018,,1,,"<p>There are two things that you need to take care of </p>

<p><strong>FIRST -</strong>  You need to keep your angular artifacts outside of the <code>WEB-INF</code> directory. You should copy the contents of you <code>dist</code> folder directly to your <code>web</code> directory.</p>

<p>Ref - <a href=""https://stackoverflow.com/questions/2386031/jsp-in-web-inf-returns-http-status-404-the-requested-resource-is-not-available"">JSP in /WEB-INF returns &quot;HTTP Status 404 The requested resource is not available&quot;</a> for more details.</p>

<p><strong>SECOND -</strong> Your <code>index.html</code> should contain correct <code>base href</code> not just default <code>""/""</code>. Your <code>base href</code> should be </p>

<pre><code>&lt;base href=""/myUrl/""&gt;
</code></pre>

<p>where <code>myUrl</code> is your web application context.</p>

<p>You can either manually modify the base href in you index.html or you can provide it while building your angular app like this.</p>

<pre><code>ng build --base-href /myUrl/
</code></pre>

<p>Ref - <a href=""https://stackoverflow.com/questions/38112891/set-base-href-dynamically-angular-2-4-5/41949470#41949470"">Set base href dynamically - Angular 2 / 4 / 5</a> for more details.</p>

<p><strong>UPDATE</strong></p>

<p>If you really want to keep your angular artifacts in <code>/web/dist</code> directory then </p>

<p>your <code>web.xml</code> should have following</p>

<pre><code>&lt;welcome-file-list&gt;
    &lt;welcome-file&gt;dist/index.html&lt;/welcome-file&gt;
&lt;/welcome-file-list&gt;
</code></pre>

<p>and your <code>index.html</code> should contain </p>

<pre><code>&lt;base href=""/myUrl/dist/""&gt;
</code></pre>

<p>and you should define an endpoint </p>

<pre><code>@GetMapping(""/dist"")
public void forward(HttpServletResponse response) throws IOException {
    response.sendRedirect(""/myUrl/dist/index.html"");
}
</code></pre>

<p>Then you can access your angular application with any of the following urls</p>

<pre><code>http://host:port/myUrl
http://host:port/myUrl/dist
http://host:port/myUrl/dist/index.html
</code></pre>

<p>and reload will also not cause any problem.</p>

<p><strong>UPDATE - 2</strong></p>

<p>The above endpoint may not be able to reload the html5 angular routes url. So instead of the above endpoint you can apply this below filter which will be able to handle the reloads.</p>

<pre><code>@Override
    protected void configure(HttpSecurity http) throws Exception {
        http.
             ....
             .addFilterAfter(new OncePerRequestFilter() {
                   // add the values you want to redirect for
                   private Pattern patt = Pattern.compile(""/dist/.*"");

                   @Override
                   protected void doFilterInternal(HttpServletRequest request, 
                                                   HttpServletResponse response, 
                                                   FilterChain filterChain)
                                    throws ServletException, IOException {
                        if(this.patt.matcher(request.getRequestURI()).matches()) {
                            RequestDispatcher rd = request.getRequestDispatcher(""/dist/index.html"");
                            rd.forward(request, response);
                        } else {
                            filterChain.doFilter(request, response);
                        }
                 }
        }, FilterSecurityInterceptor.class)
        .... 
</code></pre>

<p>Ref - <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/issues/68#issuecomment-187675742"" rel=""nofollow noreferrer"">https://github.com/spring-guides/tut-spring-security-and-angular-js/issues/68#issuecomment-187675742</a> for more details.</p>
",8949547,,8949547,,2018-01-24 20:30:06,2018-01-24 20:30:06,,,,5,,,
Spring,41700354,2,,41696541,2017,,1,,"<p>There is a issue related: <a href=""https://github.com/spring-guides/gs-messaging-stomp-websocket/issues/10"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-messaging-stomp-websocket/issues/10</a></p>

<p>use </p>

<pre><code>stompClient.connect({}, function(frame) {
</code></pre>

<p>instead of </p>

<pre><code>stompClient.connect("""","""",function (frame) {
</code></pre>

<p>Edit:
If you are wondering to use Rest Controller please use SimpMessagingTemplate to send your messages.</p>

<pre><code>@Autowired
private SimpMessagingTemplate messagingTemplate;
</code></pre>

<p>and your method will call </p>

<pre><code>messagingTemplate.convertAndSend(""/topic/notification"", ""test"");
</code></pre>

<p>If not, be sure to annotate your sendToMenuItems with <code>@MessageMapping(value = ""/sentToMenu"")</code> and you have a proper stomp client sending a message: <code>stompClient.send(""/sentToMenu"", {}, 'teste');</code></p>
",5734165,,5734165,,2017-01-17 19:00:03,2017-01-17 19:00:03,,,,6,,,
Spring,32189453,2,,32189144,2015,,1,,"<p>//edit:</p>

<p>I was sure that above will work, but..:)</p>

<p>according to documentation (<a href=""http://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-application-property-files"" rel=""nofollow"">here</a>) you can create <code>config</code> directory next to your war/jar file, and create <code>application.properties</code> file there. It will be loaded.
Ive tested that by cloning <a href=""https://github.com/spring-guides/gs-spring-boot"" rel=""nofollow"">this</a> repo. Edit <code>HelloController</code> class in <code>initial</code> project:</p>

<pre><code>@RestController
public class HelloController {

@Value(""${test.property}"")
private String testProperty;

@RequestMapping(""/"")
public String index() {
    return ""Greetings from Spring Boot! Test property value=""+testProperty;
}
}
</code></pre>

<p>build jar with maven:</p>

<pre><code>mvn clean package
</code></pre>

<p>create <code>config</code> directory, add our property there, run app:</p>

<pre><code>cd target
mkdir config
echo ""test.property=Value from external config"" &gt;&gt; config/application.properties 
java -jar gs-spring-boot-0.1.0.jar
</code></pre>

<p>goto <code>localhost:8080</code> - value from external property file should be there :)</p>

<p>Ofcourse if you really have to store your files on <code>/etc/projects/</code> then you can create symlinks inside <code>config</code> dir. </p>
",1806005,,1806005,,2015-08-25 6:47:17,2015-08-25 6:47:17,,,,2,,,
Spring,48402254,2,,48370628,2018,,1,,"<p>If you want to create only the PubSub Listener, the following worked for me:</p>

<ol>
<li><code>git clone https://github.com/spring-guides/gs-messaging-gcp-pubsub</code></li>
<li><code>cd gs-messaging-gcp-pubsub/complete</code></li>
<li>Change your build.gradle file to the build.gradle file below.</li>
<li><code>cd gs-messaging-gcp-pubsub/complete/src/main/resources</code> Once in there you can delete the static folder.</li>
<li>Go to gs-messaging-gcp-pubsub/complete/src/main/java/hello ; In there you should have two files: PubSubApplication.java and WebAppController.java. Remove WebAppController.java and change the PubSubApplication.java to the file below:</li>
</ol>

<p>build.gradle:</p>

<pre><code>buildscript { 
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath(""org.springframework.boot:spring-boot-gradle-plugin:1.5.9.RELEASE"")
    }    
}

apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'org.springframework.boot'

jar {
    baseName = 'gs-spring-cloud-gcp'
    version =  '0.1.0'
}

repositories {
    mavenCentral()
    maven {
        url ""http://repo.spring.io/snapshot""
    }
}

sourceCompatibility = 1.8
targetCompatibility = 1.8

dependencies {
    compile(""org.springframework.cloud:spring-cloud-gcp-starter-pubsub:1.0.0.BUILD-SNAPSHOT"")
    compile(""org.springframework.cloud:spring-integration-gcp:1.0.0.BUILD-SNAPSHOT"")
}
</code></pre>

<p>pubSubApplication.java</p>

<pre><code>package hello;

import java.io.IOException;

import com.google.cloud.pubsub.v1.AckReplyConsumer;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;

import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.cloud.gcp.pubsub.core.PubSubOperations;
import org.springframework.cloud.gcp.pubsub.core.PubSubTemplate;
import org.springframework.cloud.gcp.pubsub.support.GcpHeaders;
import org.springframework.context.annotation.Bean;
import org.springframework.integration.annotation.MessagingGateway;
import org.springframework.integration.annotation.ServiceActivator;
import org.springframework.integration.channel.DirectChannel;
import org.springframework.integration.gcp.pubsub.AckMode;

import org.springframework.integration.gcp.pubsub.inbound.PubSubInboundChannelAdapter;
import org.springframework.integration.gcp.pubsub.outbound.PubSubMessageHandler;
import org.springframework.messaging.MessageChannel;
import org.springframework.messaging.MessageHandler;

@SpringBootApplication
public class PubSubApplication {

  private static final Log LOGGER = LogFactory.getLog(PubSubApplication.class);

  public static void main(String[] args) throws IOException {
    SpringApplication.run(PubSubApplication.class, args);
  }


  @Bean
  public MessageChannel pubsubInputChannel() {
    return new DirectChannel();
  }

  @Bean
  public PubSubInboundChannelAdapter messageChannelAdapter(
      @Qualifier(""pubsubInputChannel"") MessageChannel inputChannel,
      PubSubOperations pubSubTemplate) {
    PubSubInboundChannelAdapter adapter =
        new PubSubInboundChannelAdapter(pubSubTemplate, ""testSubscription"");
    adapter.setOutputChannel(inputChannel);
    adapter.setAckMode(AckMode.MANUAL);

    return adapter;


      }

  @Bean
  @ServiceActivator(inputChannel = ""pubsubInputChannel"")
  public MessageHandler messageReceiver() {
    return message -&gt; {
      LOGGER.info(""Message arrived! Payload: "" + message.getPayload());
      AckReplyConsumer consumer =
          (AckReplyConsumer) message.getHeaders().get(GcpHeaders.ACKNOWLEDGEMENT);
      consumer.ack();
    };

  }

}
</code></pre>

<p>Change ""testSubscription"" <a href=""https://spring.io/guides/gs/messaging-gcp-pubsub/#_set_up_google_cloud_pub_sub_environment"" rel=""nofollow noreferrer"">to the Subscription you are using</a></p>

<p>Now in folder gs-messaging-gcp-pubsub/complete, if you run ./gradlew bootRun the app hello.PubSubApplication should get running on local. Any message you publish to the Topic where you are subscribed should appear where you are running the app.</p>

<p>If you have problems with credentials/authenticaion change the parameters in: </p>

<p>gs-messaging-gcp-pubsub/complete/src/main/resources/application.properties</p>
",6915507,,,,,2018-01-23 12:52:15,,,,2,,,
Spring,40634383,2,,40615279,2016,,1,,"<p>After way too much time, I settled on this approach. </p>

<p><a href=""https://spring.io/blog/2016/08/30/custom-test-slice-with-spring-boot-1-4"" rel=""nofollow noreferrer"">Custom Test Slice with Spring Boot 1.4</a> looked promising but I couldn't get anywhere with it.</p>

<p>While going over and over</p>

<p><a href=""https://spring.io/guides/gs/accessing-data-rest/"" rel=""nofollow noreferrer"">Accessing JPA Data with REST</a></p>

<p>I realised I had to include the JPA setup because <code>spring-data-rest</code> is using them directly - no chance to mock them or run unit tests without an embedded database. </p>

<p>At least not as far as I understand it. Maybe it is possible to mock them and have <code>spring-data-rest</code> run on the mocks against test data, but I think <code>spring-data-rest</code> and <code>spring-data</code> are probably too tightly coupled. </p>

<p>So integration testing it must be.</p>

<p>In the Spring source code provided with the articles above</p>

<p><a href=""https://github.com/spring-guides/gs-accessing-data-rest/blob/master/complete/src/test/java/hello/ApplicationTests.java"" rel=""nofollow noreferrer"">gs-accessing-data-rest/ApplicationTests.java</a></p>

<p>the logging shows Spring Boot pulling in the whole configuration for the application context.</p>

<p>So that my <code>SpringBootApplication</code> class is avoided and the security module isn't loaded up, I set up my tests like this:</p>

<pre><code>@RunWith(SpringRunner.class)
@SpringBootTest
@ContextConfiguration(classes = {
        JpaDataConfiguration.class,
        TestJpaConfiguration.class,
        TestRestConfiguration.class,
        PropertySpringConfig.class})
public class ForecastRestTests {

    @SuppressWarnings(""SpringJavaAutowiringInspection"")
    @Autowired
    private MockMvc mockMvc;

    @Autowired
    private ForecastRepository forecastRepository;

    @Before
    public void deleteAllBeforeTests() throws Exception {
        forecastRepository.deleteAll();
    }

    @Test
    public void shouldReturnRepositoryIndex() throws Exception {

        mockMvc.perform(get(""/"")).andDo(print()).andExpect(status().isOk()).andExpect(
                jsonPath(""$._links.forecasts"").exists());
    }

}
</code></pre>

<p>with these configuration classes:</p>

<pre><code>@Configuration
@EnableJpaRepositories(basePackages = {""com.bp.gis.tardis.repository""})
@EntityScan(basePackages = {""com.bp.gis.tardis.type""})
public class JpaDataConfiguration {
</code></pre>

<p>and </p>

<pre><code>@Configuration
@OverrideAutoConfiguration(enabled = false)
@ImportAutoConfiguration(value = {
        CacheAutoConfiguration.class,
        JpaRepositoriesAutoConfiguration.class,
        DataSourceAutoConfiguration.class,
        DataSourceTransactionManagerAutoConfiguration.class,
        HibernateJpaAutoConfiguration.class,
        TransactionAutoConfiguration.class,
        TestDatabaseAutoConfiguration.class,
        TestEntityManagerAutoConfiguration.class })
public class TestJpaConfiguration {}
</code></pre>

<p>and </p>

<pre><code>@Configuration
@OverrideAutoConfiguration(enabled = false)
@ImportAutoConfiguration(value = {
        RepositoryRestMvcAutoConfiguration.class,
        HttpMessageConvertersAutoConfiguration.class,
        WebMvcAutoConfiguration.class,
        MockMvcAutoConfiguration.class,
        MockMvcSecurityAutoConfiguration.class
})
public class TestRestConfiguration {}
</code></pre>

<p>so the TL;DR summary is: use <code>@ContextConfiguration</code> to specify the configuration files that specify <code>@OverrideAutoConfiguration</code> and <code>@ImportAutoConfiguration</code></p>
",1385174,,,,,2016-11-16 14:15:40,,,,0,,,
Spring,30053139,2,,20740956,2015,,1,,"<p>Also if you want not to pass login/password to server (as you might rely on Spring security) then you shouldn't use</p>

<pre><code>stompClient.connect('', '', function(frame) {
</code></pre>

<p>but instead</p>

<pre><code>stompClient.connect({}, function(frame) {
</code></pre>

<p>Take a look here: <a href=""https://github.com/spring-guides/gs-messaging-stomp-websocket/issues/10"" rel=""nofollow"">https://github.com/spring-guides/gs-messaging-stomp-websocket/issues/10</a></p>
",1210071,,,,,2015-05-05 12:36:45,,,,1,,,
Spring,52701488,2,,52701198,2018,,1,,"<p>Maven is frequently installed by java developpers, but there is a workaround if you don't have maven:</p>

<p>You can use the Spring boot maven wrapper, you don't need Spring boot dependencies, it's only 2 script and a directory with a jar that can be copied/pasted in your project : <strong>mvnw</strong> and mvnw.cmd and .mvn/*</p>

<p>Find an example of source here:</p>

<p><a href=""https://github.com/spring-guides/gs-spring-boot/blob/master/complete/mvnw"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-spring-boot/blob/master/complete/mvnw</a></p>

<p><a href=""https://github.com/spring-guides/gs-spring-boot/blob/master/complete/mvnw.cmd"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-spring-boot/blob/master/complete/mvnw.cmd</a></p>

<p><a href=""https://github.com/spring-guides/gs-spring-boot/tree/master/complete/.mvn/wrapper"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-spring-boot/tree/master/complete/.mvn/wrapper</a></p>

<p>It works just like the graddle wrapper: </p>

<ul>
<li>It download a maven runtime from the tiny jar</li>
<li>It launch it.</li>
</ul>

<p>CLI usage:</p>

<pre><code>$ ./mvnw clean install
</code></pre>

<p>PS: The inconvenience of this method is that you rely on having the network for the download (with proxy well configured if needed) and every project you build will need the wrapper.</p>
",2173392,,2173392,,2018-10-08 11:49:25,2018-10-08 11:49:25,,,,0,,,
Spring,42791800,2,,42789583,2017,,1,,"<p>You can use OAuth in combination with your JDBC login. If the user chooses to login using Google he will be redirected to Google Login page. This is absolutely possible. </p>

<p>Examples: <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2"" rel=""nofollow noreferrer"">https://github.com/spring-guides/tut-spring-boot-oauth2</a>
       <a href=""https://github.com/Baeldung/spring-security-oauth"" rel=""nofollow noreferrer"">https://github.com/Baeldung/spring-security-oauth</a></p>
",6387370,,,,,2017-03-14 16:44:03,,,,7,,,
Spring,49824007,2,,49817462,2018,,1,,"<p>Look into this tutorial from Spring, there is a ""frontend-maven-plugin"" that you might find very useful. I would ditch the war and just build your spring boot app as a jar, then place your js files in src/main/js, and your index.html in /src/main/resources/static. </p>

<p>The tutorial is available here:</p>

<p><a href=""https://spring.io/guides/tutorials/react-and-spring-data-rest/"" rel=""nofollow noreferrer"">https://spring.io/guides/tutorials/react-and-spring-data-rest/</a></p>

<p>And the code is available here:</p>

<p><a href=""https://github.com/spring-guides/tut-react-and-spring-data-rest/tree/master/basic"" rel=""nofollow noreferrer"">https://github.com/spring-guides/tut-react-and-spring-data-rest/tree/master/basic</a></p>

<p>Use a webpack.config.js config similar to the one used in the tutorial, and it will ""just work"" once you build using the maven front end plugin.</p>

<p>As others have suggested, you will be better off separating your front-end and back-end code (keep them in separate repositories).</p>
",3154872,,3154872,,2018-04-17 14:42:23,2018-04-17 14:42:23,,,,8,,,
Spring,49162710,2,,29734305,2018,,1,,"<p>This <a href=""https://spring.io/guides/tutorials/spring-boot-oauth2/#_social_login_authserver"" rel=""nofollow noreferrer"">tutorial</a> shows how to achieve exactly that (if I understood the problem correctly) : having an auth server issuing your own oauth2 tokens based on external oauth2 authentication.
The corresponding code is available <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/blob/master/auth-server/src/main/java/com/example/SocialApplication.java"" rel=""nofollow noreferrer"">here</a>.</p>

<p>The gist of it is that you use <code>@EnableOAuth2Client</code> in addition to <code>@EnableAuthorizationServer</code> and insert an <code>OAuth2ClientAuthenticationProcessingFilter</code> filter before spring security default ones.</p>
",1688851,,,,,2018-03-07 23:04:27,,,,0,,,
Spring,40312890,2,,40306791,2016,,1,,"<p>To start from scratch, move on to Build with Gradle.</p>

<p>If you know basics and want code template, do the following:</p>

<p>Download and unzip the source repository or clone it using Git: git clone <a href=""https://github.com/spring-guides/gs-serving-web-content.git"" rel=""nofollow"">https://github.com/spring-guides/gs-serving-web-content.git</a>
cd into gs-serving-web-content/initial
Jump ahead to Create a web controller.
When youre finished, you can check your results against the code in gs-serving-web-content/complete.</p>

<p><strong>Build with Gradle</strong></p>

<p>First you set up a basic build script. You can use any build system you like when building apps with Spring, but the code you need to work with Gradle is included here.</p>

<p><strong>Create the directory structure</strong></p>

<p>In a project directory of your choosing, create the following subdirectory structure; for example, with mkdir -p src/main/java/hello on *nix systems:</p>

<pre><code> src

     main

         java

             hello
</code></pre>

<p>Create a Gradle build file</p>

<p>Below is the initial Gradle build file.</p>

<pre><code>build.gradle

buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath(""org.springframework.boot:spring-boot-gradle-plugin:1.4.1.RELEASE"")
    }
}

apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'idea'
apply plugin: 'spring-boot'

jar {
    baseName = 'gs-serving-web-content'
    version =  '0.1.0'
}

repositories {
    mavenCentral()
}

sourceCompatibility = 1.8
targetCompatibility = 1.8

dependencies {
    compile(""org.springframework.boot:spring-boot-starter-thymeleaf"")
    compile(""org.springframework.boot:spring-boot-devtools"")
    testCompile(""junit:junit"")
}


The Spring Boot gradle plugin provides many convenient features:

It collects all the jars on the classpath and builds a single, runnable ""ber-jar"", which makes it more convenient to execute and transport your service.
    It searches for the public static void main() method to flag as a runnable class.
    It provides a built-in dependency resolver that sets the version number to match Spring Boot dependencies. You can override any version you wish, but it will default to Boots chosen set of versions.

    **Create a web controller**

    In Springs approach to building web sites, HTTP requests are handled by a controller. You can easily identify these requests by the @Controller annotation. In the following example, the GreetingController handles GET requests for /greeting by returning the name of a View, in this case, ""greeting"". A View is responsible for rendering the HTML content:


src/main/java/hello/GreetingController.java

package hello;

import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;

@Controller
public class GreetingController {

    @RequestMapping(""/greeting"")
    public String greeting(@RequestParam(value=""name"", required=false, defaultValue=""World"") String name, Model model) {
        model.addAttribute(""name"", name);
        return ""greeting"";
    }

}
</code></pre>

<p>This controller is concise and simple, but theres plenty going on. Lets break it down step by step.</p>

<p>The @RequestMapping annotation ensures that HTTP requests to /greeting are mapped to the greeting() method.</p>

<p>The above example does not specify GET vs. PUT, POST, and so forth, because @RequestMapping maps all HTTP operations by default. Use @RequestMapping(method=GET) to narrow this mapping.
@RequestParam binds the value of the query String parameter name into the name parameter of the greeting() method. This query String parameter is not required; if it is absent in the request, the defaultValue of ""World"" is used. The value of the name parameter is added to a Model object, ultimately making it accessible to the view template.</p>

<p>The implementation of the method body relies on a view technology, in this case Thymeleaf, to perform server-side rendering of the HTML. Thymeleaf parses the greeting.html template below and evaluates the th:text expression to render the value of the ${name} parameter that was set in the controller.</p>

<pre><code>src/main/resources/templates/greeting.html

&lt;!DOCTYPE HTML&gt;
&lt;html xmlns:th=""http://www.thymeleaf.org""&gt;
&lt;head&gt;
    &lt;title&gt;Getting Started: Serving Web Content&lt;/title&gt;
    &lt;meta http-equiv=""Content-Type"" content=""text/html; charset=UTF-8"" /&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;p th:text=""'Hello, ' + ${name} + '!'"" /&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p><strong>Developing web apps</strong></p>

<p>A common feature of developing web apps is coding a change, restarting your app, and refreshing the browser to view the change. This entire process can eat up a lot of time. To speed up the cycle of things, Spring Boot comes with a handy module known as spring-boot-devtools.</p>

<p>Enable hot swapping
Switches template engines to disable caching
Enables LiveReload to refresh browser automatically
Other reasonable defaults based on development instead of production
Make the application executable</p>

<p>Although it is possible to package this service as a traditional WAR file for deployment to an external application server, the simpler approach demonstrated below creates a standalone application. You package everything in a single, executable JAR file, driven by a good old Java main() method. Along the way, you use Springs support for embedding the Tomcat servlet container as the HTTP runtime, instead of deploying to an external instance.</p>

<pre><code>src/main/java/hello/Application.java

package hello;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class Application {

    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }

}
</code></pre>

<p>@SpringBootApplication is a convenience annotation that adds all of the following:</p>

<p>@Configuration tags the class as a source of bean definitions for the application context.
@EnableAutoConfiguration tells Spring Boot to start adding beans based on classpath settings, other beans, and various property settings.
Normally you would add @EnableWebMvc for a Spring MVC app, but Spring Boot adds it automatically when it sees spring-webmvc on the classpath. This flags the application as a web application and activates key behaviors such as setting up a DispatcherServlet.
@ComponentScan tells Spring to look for other components, configurations, and services in the the hello package, allowing it to find the controllers.
The main() method uses Spring Boots SpringApplication.run() method to launch an application. Did you notice that there wasnt a single line of XML? No web.xml file either. This web application is 100% pure Java and you didnt have to deal with configuring any plumbing or infrastructure.</p>

<p><strong>Build an executable JAR</strong></p>

<p>You can run the application from the command line with Gradle or Maven. Or you can build a single executable JAR file that contains all the necessary dependencies, classes, and resources, and run that. This makes it easy to ship, version, and deploy the service as an application throughout the development lifecycle, across different environments, and so forth.</p>

<p>If you are using Gradle, you can run the application using ./gradlew bootRun. Or you can build the JAR file using ./gradlew build. Then you can run the JAR file:</p>

<p>java -jar build/libs/gs-serving-web-content-0.1.0.jar
If you are using Maven, you can run the application using ./mvnw spring-boot:run. Or you can build the JAR file with ./mvnw clean package. Then you can run the JAR file:</p>

<p>java -jar target/gs-serving-web-content-0.1.0.jar
The procedure above will create a runnable JAR. You can also opt to build a classic WAR file instead.
Logging output is displayed. The app should be up and running within a few seconds.</p>

<p><strong>Test the App</strong></p>

<p>Now that the web site is running, visit <a href=""http://localhost:8080/greeting"" rel=""nofollow"">http://localhost:8080/greeting</a>, where you see:</p>

<p>""Hello, World!""
Provide a name query string parameter with <a href=""http://localhost:8080/greeting?name=User"" rel=""nofollow"">http://localhost:8080/greeting?name=User</a>. Notice how the message changes from ""Hello, World!"" to ""Hello, User!"":</p>

<p>""Hello, User!""
This change demonstrates that the @RequestParam arrangement in GreetingController is working as expected. The name parameter has been given a default value of ""World"", but can always be explicitly overridden through the query string.</p>

<p><strong>Add a Home Page</strong></p>

<p>Static resources, like HTML or JavaScript or CSS, can easily be served from your Spring Boot application just be dropping them into the right place in the source code. By default Spring Boot serves static content from resources in the classpath at ""/static"" (or ""/public""). The index.html resource is special because it is used as a ""welcome page"" if it exists, which means it will be served up as the root resource, i.e. at <a href=""http://localhost:8080/"" rel=""nofollow"">http://localhost:8080/</a> in our example. So create this file:</p>

<pre><code>src/main/resources/static/index.html

&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Getting Started: Serving Web Content&lt;/title&gt;
    &lt;meta http-equiv=""Content-Type"" content=""text/html; charset=UTF-8"" /&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;p&gt;Get your greeting &lt;a href=""/greeting""&gt;here&lt;/a&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
and when you restart the app you will see the HTML at http://localhost:8080/.
</code></pre>
",4539626,,,,,2016-10-28 20:37:58,,,,0,,,
Spring,49041769,2,,45348065,2018,,1,,"<p>Have a look through this repository it's from spring. The projects here uses React+SpringBoot+WebpackV1</p>

<p><a href=""https://github.com/spring-guides/tut-react-and-spring-data-rest"" rel=""nofollow noreferrer"">https://github.com/spring-guides/tut-react-and-spring-data-rest</a></p>

<p>Here is the actual tutorial for the above repository, have a read through its very well explained.
<a href=""https://spring.io/guides/tutorials/react-and-spring-data-rest/"" rel=""nofollow noreferrer"">https://spring.io/guides/tutorials/react-and-spring-data-rest/</a></p>
",1111063,,,,,2018-03-01 2:36:55,,,,0,,,
Spring,43758305,2,,43756960,2017,,1,,"<p>I would not mix JSP views with an API serving JSON. I would suggest either using JSP/Thymeleaf views with the spring Model(AndView) OR building an API that serves JSON and then use a frontend javascript framework like angular to handle the view and model.</p>

<p>If I were in your situation i would move forward with Thymeleaf as a templating engine and drop the JSON stuff. Since you mentioned a lack of experience with frontend I think this route is less of a leap. Good examples can be found on the <a href=""https://github.com/spring-guides/gs-serving-web-content/tree/master/complete"" rel=""nofollow noreferrer"">Spring Github</a>
found through <a href=""https://spring.io/guides/gs/serving-web-content/"" rel=""nofollow noreferrer"">this guide</a> </p>
",4165604,,4165604,,2017-05-03 12:46:29,2017-05-03 12:46:29,,,,1,,,
Spring,44845539,2,,44845359,2017,,1,,"<p>It works as supposed, when you <em>separate</em> the methods into different services (public facades).</p>

<p>Starting from <a href=""https://github.com/spring-guides/gs-caching.git"" rel=""nofollow noreferrer"">spring-caching example</a> (<code>/complete</code>), I moved <code>SimpleBookRepository</code> with small adjustments to a new class (supposed to be the ""cached service""):</p>

<pre><code>@Component
public class SimpleCache {

    @Cacheable(""map"")
    public Map&lt;String, String&gt; getMap() {
        simulateSlowService();
        Map&lt;String, String&gt; result = new HashMap&lt;&gt;();
        result.put(""foo"", ""bar"");
        result.put(""bar"", ""foo"");
        return result;
    }

    // Don't do this at home
    private void simulateSlowService() {
        try {
            long time = 3000L;
            Thread.sleep(time);
        } catch (InterruptedException e) {
            throw new IllegalStateException(e);
        }
    }

}
</code></pre>

<p>Some small adjustments to match the question/example:</p>

<pre><code>package hello;

public interface BookRepository {
    //originally it returned {@link hello.Book}
    String getByIsbn(String isbn);
}
</code></pre>

<p>...and introducing (as the cache facade/invoker  ... no sense in caching <code>getByIsbn()</code>!!):</p>

<pre><code>@Component
public class SimpleBookRepository implements BookRepository {
    @Autowired
    private transient SimpleCache cache;

    @Override
    public String getByIsbn(String isbn) {
       return cache.getMap().get(isbn);
    }

}
</code></pre>

<p>With a slightly adjusted <code>AppRunner</code>:</p>

<pre><code>//...
logger.info("".... Fetching books"");
logger.info(""foo --&gt; {}"", bookRepository.getByIsbn(""foo""));
logger.info(""bar --&gt; {}"", bookRepository.getByIsbn(""bar""));
logger.info(""foo --&gt; {}"", bookRepository.getByIsbn(""foo""));
logger.info(""bar --&gt; {}"", bookRepository.getByIsbn(""bar""));
logger.info(""foo --&gt; {}"", bookRepository.getByIsbn(""foo""));
logger.info(""foo --&gt; {}"", bookRepository.getByIsbn(""foo""));
//...
</code></pre>

<p>...we get the following output:</p>

<pre><code>2017-06-30 15:54:52.584 INFO 3984 --- [ main] hello.AppRunner : .... Fetching books
2017-06-30 15:54:55.616 INFO 3984 --- [ main] hello.AppRunner : foo --&gt; bar
2017-06-30 15:54:55.618 INFO 3984 --- [ main] hello.AppRunner : bar --&gt; foo
2017-06-30 15:54:55.619 INFO 3984 --- [ main] hello.AppRunner : foo --&gt; bar
2017-06-30 15:54:55.619 INFO 3984 --- [ main] hello.AppRunner : bar --&gt; foo
2017-06-30 15:54:55.619 INFO 3984 --- [ main] hello.AppRunner : foo --&gt; bar
2017-06-30 15:54:55.619 INFO 3984 --- [ main] hello.AppRunner : foo --&gt; bar
2017-06-30 15:54:55.623 INFO 3984 --- [ main] hello.Application  : Started Application in 4.982 seconds (JVM running for 5.513)
</code></pre>

<p>;)</p>
",592355,,592355,,2017-07-03 11:05:27,2017-07-03 11:05:27,,,,3,,,
Spring,34397080,2,,33743370,2015,,1,,"<p>It seems you are using Spring Cloud ""<strong>Angel</strong>"" together with Spring Boot ""1.3"". Instead you should use Spring Cloud ""<strong>Brixton</strong>"". Try to add a new parent like:</p>

<pre><code>&lt;parent&gt;
    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
    &lt;artifactId&gt;spring-cloud-starter-parent&lt;/artifactId&gt;
    &lt;version&gt;Brixton.M3&lt;/version&gt;
    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
&lt;/parent&gt;
</code></pre>

<p>and delete you version entries related to <strong>org.springframework.cloud</strong>.</p>

<p>You also need to add these repositories to be able to find the Brixton version:</p>

<pre><code>&lt;repositories&gt;
    &lt;repository&gt;
        &lt;id&gt;spring-snapshots&lt;/id&gt;
        &lt;name&gt;Spring Snapshots&lt;/name&gt;
        &lt;url&gt;http://repo.spring.io/libs-snapshot-local&lt;/url&gt;
        &lt;snapshots&gt;
            &lt;enabled&gt;true&lt;/enabled&gt;
        &lt;/snapshots&gt;
    &lt;/repository&gt;
    &lt;repository&gt;
        &lt;id&gt;spring-milestones&lt;/id&gt;
        &lt;name&gt;Spring Milestones&lt;/name&gt;
        &lt;url&gt;http://repo.spring.io/libs-milestone-local&lt;/url&gt;
        &lt;snapshots&gt;
            &lt;enabled&gt;false&lt;/enabled&gt;
        &lt;/snapshots&gt;
    &lt;/repository&gt;
    &lt;repository&gt;
        &lt;id&gt;spring-releases&lt;/id&gt;
        &lt;name&gt;Spring Releases&lt;/name&gt;
        &lt;url&gt;http://repo.spring.io/libs-release-local&lt;/url&gt;
        &lt;snapshots&gt;
            &lt;enabled&gt;false&lt;/enabled&gt;
        &lt;/snapshots&gt;
    &lt;/repository&gt;
&lt;/repositories&gt;
</code></pre>

<p>And there is also a known bug in Spring Boot 1.3 you might need to handle: <a href=""https://spring.io/blog/2015/11/30/migrating-oauth2-apps-from-spring-boot-1-2-to-1-3"" rel=""nofollow"">https://spring.io/blog/2015/11/30/migrating-oauth2-apps-from-spring-boot-1-2-to-1-3</a></p>

<p>Usefull examples: </p>

<ul>
<li><code>https://github.com/spring-guides/tut-spring-security-and-angular-js/blob/master/proxy/ui/pom.xml</code></li>
<li><code>https://github.com/spring-cloud-samples/sso/blob/master/pom.xml</code></li>
</ul>
",5663017,,,,,2015-12-21 13:40:01,,,,1,,,
Spring,50038545,2,,34927236,2018,,1,,"<h1>Short answer</h1>

<ul>
<li>use gradle plugins: <code>eclipse-wtp</code> and <code>war</code></li>
<li>extend <code>SpringBootServletInitializer</code> in <code>Application</code></li>
</ul>

<h2>Explanation:</h2>

<p>In order to run a spring boot application on tomcat generally the produced artifact has to be a <code>war</code> application.</p>

<p>In order to make it run on tomcat inside Eclipse you have to use a WTP-Project (Web Tools Platform aka Dynamic Web Module) using the <code>eclipse-wtp</code> gradle plugin.</p>

<p>The <code>SpringBootServletInitializer</code> thing has to be extended in order to make Spring Boot application context launch when Tomcat is launched.</p>

<h1>How to create a test project</h1>

<p>Spring offers a <a href=""https://spring.io/guides/gs/rest-service/"" rel=""nofollow noreferrer"">Getting Started Tutorial</a> how to build a REST webservice with Spring Boot. I enhanced the project to work with Tomcat and Eclipse:</p>

<h2>Check out</h2>

<p>the sample project:</p>

<pre><code>git clone https://github.com/spring-guides/gs-rest-service.git
</code></pre>

<h2>Import it into eclipse</h2>

<p>Import the <code>complete/</code> subfolder as gradle project.</p>

<h2>Change <code>build.gradle</code></h2>

<p>remove</p>

<pre><code>apply plugin: 'java'
apply plugin: 'eclipse'
</code></pre>

<p>add</p>

<pre><code>apply plugin: 'war'
apply plugin: 'eclipse-wtp'
</code></pre>

<h2>Change <code>src/main/java/hello/Application.java</code></h2>

<p>add extension of <code>SpringBootServletInitializer</code></p>

<pre><code>public class Application extends SpringBootServletInitializer {
    ...
}
</code></pre>

<p>That done I could deploy the sample project to a Tomcat server configured in eclipse and start the server. The url is: <a href=""http://localhost:8080/complete/greeting?name=User"" rel=""nofollow noreferrer"">http://localhost:8080/complete/greeting?name=User</a></p>

<p>Check out the <a href=""https://github.com/rasenderhase/gs-rest-service"" rel=""nofollow noreferrer"">Complete Sample</a>.</p>
",1032484,,1032484,,2018-04-26 9:03:21,2018-04-26 9:03:21,,,,0,,,
Spring,36142806,2,,36142489,2016,,1,,"<p>If you read the tutorial carefully, you'll see:</p>

<blockquote>
  <p>In the configuration, you need to add the <code>@EnableNeo4jRepositories</code> annotation as well as extend the <code>Neo4jConfiguration</code> class to conveniently spin up needed components.</p>
  
  <p>By default, <code>@EnableNeo4jRepositories</code> will scan the current package for any interfaces that extend one of Spring Datas repository interfaces. Use its <code>basePackageClasses=MyRepository.class</code> to safely tell Spring Data GemFire to scan a different root package by type if your project layout has multiple projects and its not finding your repositories.</p>
  
  <p>One piece thats missing is the graph database service bean. In this case, you are using the <code>EmbeddedGraphDatabase</code>, which creates and reuses a file-based data store at <code>accessingdataneo4j.db</code>.</p>
</blockquote>

<p>As such, you need to write a class that will add the configuration of the Sprint Boot application. Let's call it <code>ApplicationConfig.java</code>. Putting into code what the tutorial is saying, we come up with:</p>

<pre><code>package hello;

import org.neo4j.graphdb.GraphDatabaseService;
import org.neo4j.graphdb.factory.GraphDatabaseFactory;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.data.neo4j.config.EnableNeo4jRepositories;
import org.springframework.data.neo4j.config.Neo4jConfiguration;

@Configuration
@EnableNeo4jRepositories
class ApplicationConfig extends Neo4jConfiguration {

    public ApplicationConfig() {
        setBasePackage(""hello"");
    }

    @Bean
    GraphDatabaseService graphDatabaseService() {
        return new GraphDatabaseFactory().newEmbeddedDatabase(""accessingdataneo4j.db"");
    }
}
</code></pre>

<p>If you add this class to your <code>hello</code> package, the application will run correctly.</p>

<p>Note that you should keep the <code>PersonRepository</code> as it is defined in the tutorial, which is like the following:</p>

<pre><code>package hello;

import java.util.List;

import org.springframework.data.repository.CrudRepository;

public interface PersonRepository extends CrudRepository&lt;Person, String&gt; {

    Person findByName(String name);

    List&lt;Person&gt; findByTeammatesName(String name);

}
</code></pre>

<hr>

<p>As a side-note, you can see its full code on the <a href=""https://github.com/spring-guides/gs-accessing-data-neo4j/blob/master/complete"" rel=""nofollow"">Spring GitHub repo</a>.</p>
",1743880,,1743880,,2016-03-21 22:31:50,2016-03-21 22:31:50,,,,0,,,
Spring,45491682,2,,45491308,2017,,1,,"<p><code>@RestController</code> itself adds <code>@ResponseBody</code> annotation. You can see it in the <a href=""https://github.com/spring-guides/tut-bookmarks/issues/22"" rel=""nofollow noreferrer"">Github Issue</a></p>

<p>You can also check the <a href=""https://spring.io/guides/tutorials/bookmarks/"" rel=""nofollow noreferrer"">official spring tutorials</a>. Here you can check the below lines and examples:</p>

<blockquote>
  <p>These controller methods return simple POJOs - <code>Collection&lt;Bookmark&gt;</code>,
  and <code>Bookmark</code>, etc., in all but the <code>add</code> case. When an HTTP request
  comes in that specifies an <code>Accept header</code>, <code>Spring MVC</code> loops through the
  configured <code>HttpMessageConverter</code> until it finds one that can convert
  from the <code>POJO</code> domain model types into the content-type specified in
  the <code>Accept header</code>, if so configured.</p>
</blockquote>

<p>You can also follow the below lines and examples from <a href=""http://docs.spring.io/spring/docs/4.3.3.RELEASE/spring-framework-reference/htmlsingle/#mvc-ann-restcontroller"" rel=""nofollow noreferrer"">Official doc</a></p>

<blockquote>
  <p>@RestController is a stereotype annotation that combines @ResponseBody
  and @Controller. More than that, it gives more meaning to your
  Controller and also may carry additional semantics in future releases
  of the framework.</p>
</blockquote>

<p>And, </p>

<blockquote>
  <p>As with @RequestBody and @ResponseBody, Spring uses
  HttpMessageConverter to convert from and to the request and response
  streams.</p>
</blockquote>
",2315473,,2315473,,2017-08-04 15:29:16,2017-08-04 15:29:16,,,,3,,,
Spring,45770857,2,,45761054,2017,,1,,"<p>You have to use a composite filter in which you configure your desired authentication providers, for example: </p>

<pre><code>private Filter ssoFilter() {
    CompositeFilter filter = new CompositeFilter();
    List&lt;Filter&gt; filters = new ArrayList&lt;&gt;();
    filters.add(ssoFilter(facebook(), ""/login/facebook""));
    filters.add(ssoFilter(google(), ""/login/google""));
    filter.setFilters(filters);
    return filter;
}

private Filter ssoFilter(ClientResources client, String path) {
    OAuth2ClientAuthenticationProcessingFilter oAuth2ClientAuthenticationFilter = new OAuth2ClientAuthenticationProcessingFilter(
            path);
    OAuth2RestTemplate oAuth2RestTemplate = new OAuth2RestTemplate(client.getClient(), oauth2ClientContext);

    oAuth2ClientAuthenticationFilter.setRestTemplate(oAuth2RestTemplate);
    UserInfoTokenServices tokenServices = new UserInfoTokenServices(client.getResource().getUserInfoUri(),
            client.getClient().getClientId());

    tokenServices.setRestTemplate(oAuth2RestTemplate);
    oAuth2ClientAuthenticationFilter.setTokenServices(tokenServices);
    return oAuth2ClientAuthenticationFilter;
}
</code></pre>

<p>where: </p>

<pre><code>@Bean
@ConfigurationProperties(""google"")
public ClientResources google() {
    return new ClientResources();
}

@Bean
@ConfigurationProperties(""facebook"")
public ClientResources facebook() {
    return new ClientResources();
}
</code></pre>

<p>and:</p>

<pre><code>class ClientResources {

    @NestedConfigurationProperty
    private AuthorizationCodeResourceDetails client = new AuthorizationCodeResourceDetails();


    @NestedConfigurationProperty
    private ResourceServerProperties resource = new ResourceServerProperties();

    public AuthorizationCodeResourceDetails getClient() {
        return client;
    }

    public ResourceServerProperties getResource() {
        return resource;
    }
}
</code></pre>

<p>finally, add the filter before the BasicAuthenticationFilter in your HTTP security config:</p>

<pre><code>@Override
    protected void configure(HttpSecurity http) throws Exception {
        String[] anonymousRequest = { urls};

        http
        .authorizeRequests()
        //..other rules
        addFilterBefore(ssoFilter(), BasicAuthenticationFilter.class);
</code></pre>

<p>Ps: your configuration properties has to start with the value specified in the <code>@ConfigurationProperties(""facebook"")</code>:</p>

<pre><code>facebook:
  client:
    clientId: yourCliendId
    clientSecret: yourClientSecret
    accessTokenUri: https://graph.facebook.com/oauth/access_token
    userAuthorizationUri: https://www.facebook.com/dialog/oauth
    tokenName: oauth_token
    authenticationScheme: query
    registeredRedirectUri: http://localhost:8083/app.html
    preEstablishedRedirectUri: http://localhost:8083/app.html
    clientAuthenticationScheme: form
  resource:
    userInfoUri: https://graph.facebook.com/me
</code></pre>

<p>This is inspired from the example presented here:  <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/tree/master/github"" rel=""nofollow noreferrer"">https://github.com/spring-guides/tut-spring-boot-oauth2/tree/master/github</a></p>
",6387370,,,,,2017-08-19 11:14:47,,,,1,,,
Spring,54694402,2,,54693472,2019,,1,,"<p>Please have a try to add follow script in the pom.xml file.</p>

<pre><code>&lt;properties&gt; 
&lt;maven.compiler.source&gt;1.6&lt;/maven.compiler.source&gt; 
&lt;maven.compiler.target&gt;1.6&lt;/maven.compiler.target&gt; 
&lt;/properties&gt;
</code></pre>

<p>For more information, please refer to this <a href=""https://github.com/spring-guides/gs-maven/issues/21"" rel=""nofollow noreferrer"">issue</a>.</p>
",7005159,,,,,2019-02-14 15:57:46,,,,4,,,
Spring,38826220,2,,38792637,2016,,2,,"<p>The problem and solution is described <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/issues/68#issuecomment-187675742"" rel=""nofollow"">here</a>. The solution consist in the implementation of a OncePerRequestFilter where you can match the full URI against whatever you want.</p>
",1121555,,,,,2016-08-08 9:58:25,,,,0,,,
Spring,38372142,2,,38279753,2016,,2,,"<p>I think I figured out what the problem was. </p>

<p>I went through the following example available on github where form based authentication mechanism was used (which is what I was looking for).</p>

<p><a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/"" rel=""nofollow"">https://github.com/spring-guides/tut-spring-security-and-angular-js/</a></p>

<p>The exact code is working fine if I use a non HTML page as my login page. For example, JSP or FTL. The example uses Freemarker. Everything is working fine with my settings if I use ftl pages. But the same are not working in case of .html pages. </p>
",1198911,,,,,2016-07-14 10:45:27,,,,0,,,
Spring,41837989,2,,41738864,2017,,2,,"<p>If I understand your question correctly, </p>

<blockquote>
  <p>how can I use the other SSO providers to get such token as well from
  the auth server?</p>
</blockquote>

<p>This custom Auth server is abstracting out your interaction with FB or Github and issuing you it's own token. The token that your custom Auth server spitting out is not an FB or Github token, it's a token generated by your custom Auth server (After authenticating with FB/Github token).</p>

<blockquote>
  <p>Then why do we need FB/github?</p>
</blockquote>

<p>How else your custom Auth server can identify a person, It sure can use user Id and Password; consider 'login with FB' as another nice option it gives to the user.</p>

<blockquote>
  <p>How to add other SSO providers like digitalocean in addition to FB and github?</p>
</blockquote>

<p>Just do the same as we did for FB and Github (register a client id with digital ocean and then in auth server application, Add client Id and secret in the properties/yaml file etc)</p>

<blockquote>
  <p>The resource server should not care how did I get the token and
  whether I am authenticated using Facebook or my custom auth server. It
  should simply ask the auth server what is the Principal (logged user)
  and then decide which resources to show him, right?</p>
</blockquote>

<p>Yes, your understanding is correct.</p>

<h1>Edit (To answer question asked in the comment)</h1>

<blockquote>
  <p>But lets say I log in with Facebook through my Auth server. Where do I
  find the token that I can use with the Resource server? Let's say I
  have a RestClient and want to make a request to obtain some resource
  belonging to a user which went through the Facebook auth process via
  my auth server. Where do I find the token to use?</p>
</blockquote>

<p>If that's a requirement, I think you can use this <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/tree/master/github"" rel=""nofollow noreferrer"">example</a> instead; you may not need a custom auth server as such. Whole point of having custom auth server is abstracting out the interaction with FB or github.</p>

<p>Or</p>

<p>If you still want to go with custom auth server direction, then expose an endpoint from Auth server (which will get you the resources you need from FB) and then make use of that from your resource server.</p>
",6785908,,6785908,,2017-01-27 6:36:10,2017-01-27 6:36:10,,,,4,,,
Spring,44587309,2,,44568463,2017,,2,,"<p><code>SpringRunner</code> tries to find any spring configuration class in your classpath and doesn't find anything.
It will be enough to create class annotated with <code>@SpringBootApplication</code> in the root of your src hierarchy as it's done in the <a href=""https://spring.io/guides/gs/testing-web/"" rel=""nofollow noreferrer"">test sample</a> or provide any other spring configuration class using <code>@ContextConfiguration</code> on your test class.</p>

<p><a href=""https://github.com/spring-guides/gs-testing-web/tree/master/complete/src/main/java/hello"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-testing-web/tree/master/complete/src/main/java/hello</a></p>
",4337243,,,,,2017-06-16 10:44:36,,,,0,,,
Spring,30488897,2,,30486487,2015,,2,,"<p>You aren't missing anything.  This is related to issue number 8 for that guide (<a href=""https://github.com/spring-guides/gs-batch-processing/issues/8"" rel=""nofollow"">https://github.com/spring-guides/gs-batch-processing/issues/8</a>).  I just created a pull request to address this issue.  You can view the PR here (<a href=""https://github.com/spring-guides/gs-batch-processing/pull/9"" rel=""nofollow"">https://github.com/spring-guides/gs-batch-processing/pull/9</a>) until it's merged.</p>

<p><strong>UPDATE</strong><br>
The PR has been merged and the guid has been updated.  The new version should no longer have this issue.</p>
",618059,,618059,,2015-05-27 18:15:19,2015-05-27 18:15:19,,,,0,,,
Spring,42947325,2,,31018377,2017,,2,,"<p>As stated in this git issue: <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/issues/140"" rel=""nofollow noreferrer"">https://github.com/spring-guides/tut-spring-security-and-angular-js/issues/140</a>, the problem might be related to the fact that with versions 1.4 and above of spring boot the Zuul filter that handles the downstream of access tokens to services (<code>org.springframework.cloud.security.oauth2.proxy.OAuth2TokenRelayFilter</code>)  is missing a bean of type <code>OAuth2RestTemplate</code>, which is used by the filter itself to automatically handle the refresh_token grant when access tokens expire.</p>

<p>I had the same issue and I solved it by adding in a configuration class the following bean:</p>

<pre><code>@Configuration
public class ZuulConfiguration {
    @Bean
    protected OAuth2RestTemplate oauth2RestTemplate(OAuth2ProtectedResourceDetails resource, 
        OAuth2ClientContext context) {

        return new OAuth2RestTemplate(resource, context);
    }
}
</code></pre>
",1095446,,,,,2017-03-22 9:23:01,,,,0,,,
Spring,29155839,2,,29155316,2015,,2,,"<p>You should put <a href=""https://github.com/spring-guides/gs-batch-processing/blob/master/initial/src/main/resources/schema-all.sql"" rel=""nofollow"">schema initialisation</a> in your <code>src/main/resources</code>. Spring batch automatically runs <code>schema-@@platform@@.sql</code> during startup and <code>-all</code> tells it to be for all platforms as noted in <code>readme.adoc</code> on github:</p>

<blockquote>
  <p>Next, you write a SQL script to create a table to store the data.</p>
  
  <p>src/main/resources/schema-all.sql</p>
  
  <p>link:initial/src/main/resources/schema-all.sql</p>
  
  <p><strong>Note:</strong> Spring Boot runs
  schema-@@platform@@.sql automatically during startup. -all is the
  default for all platforms.</p>
</blockquote>
",4617377,,,,,2015-03-19 22:03:03,,,,8,,,
Spring,52645021,2,,52644505,2018,,2,,"<p>A good option is run rabbitmq in a docker container on the local machine. You could use a rabbitmq image <a href=""https://hub.docker.com/_/rabbitmq/"" rel=""nofollow noreferrer"">already published on dockerhub</a> and if you want to you could even start it automatically in your integration tests using the <a href=""https://github.com/fabric8io/docker-maven-plugin"" rel=""nofollow noreferrer"">fabric8 maven plugin</a>. We've been <a href=""https://github.com/Activiti/activiti-cloud-runtime-bundle-service/blob/7.0.0.Beta1/activiti-cloud-starter-runtime-bundle/pom.xml#L222"" rel=""nofollow noreferrer"">doing that on the Activiti project</a>, also with spring cloud streams. You could run this in a maven profile so that you only activate it on machines which have docker available.</p>

<p>For tests <a href=""https://dzone.com/articles/mocking-rabbitmq-for-integration-tests"" rel=""nofollow noreferrer"">apache qpid</a> might be an option. There aren't many examples with spring cloud streams available right now but there is <a href=""https://github.com/spring-guides/gs-messaging-rabbitmq/pull/12"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-messaging-rabbitmq/pull/12</a></p>
",9705485,,9705485,,2018-10-04 11:14:10,2018-10-04 11:14:10,,,,2,,,
Spring,39189586,2,,39186670,2016,,2,,"<p>What you're doing wrong is that the methods in your <code>@Configuration</code> class are not public. Just add <code>public</code> to <code>facebook</code> and <code>facebookResource</code> and you'll be fine. I've just polished that doc in <a href=""https://github.com/spring-projects/spring-boot/commit/c4cb8317704add37b5d1a8070d943ecad3152578"" rel=""nofollow"">c4cb8317</a> and I've <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/pull/35"" rel=""nofollow"">submitted a PR to fix the tutorial</a> you were using as a base.</p>

<p>Also the generated metadata were mostly empty since nested objects were not flagged with <code>@NestedConfigurationProperty</code>. I've submitted <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/pull/36"" rel=""nofollow"">another pull request</a> to fix that.</p>
",613628,,613628,,2016-08-29 9:54:18,2016-08-29 9:54:18,,,,6,,,
Spring,26441702,2,,26441383,2014,,3,,"<p>Yes, version is not optional.</p>

<p>Consider a multimodule application which has 10 modules, say module1, module2.. module10.Assume that all of these 10 projects use the <code>spring-boot-starter-web</code>. In case these 10 modules are interdependent, you might want to use the same version of the <code>spring-boot-starter-web</code> in each of these 10. </p>

<p>Now just imagine how complicated it would be if you were to maintain the same version number in all of these 10 pom files and then update all of them when you want to use a newer version of <code>spring-boot-starter-web</code>. Wouldn't it be better if this information can be managed centrally?</p>

<p>Maven has got something known a <code>&lt;dependencyManagement/&gt;</code> tag to get around this and centralize dependency information.</p>

<p>For the example which you have provided, below set of links will help you understand how the version number is resolved even though it's not present in the pom which you are looking at.</p>

<p>Look at the parent tag of the pom you are looking at (<a href=""https://github.com/spring-guides/gs-authenticating-ldap/blob/master/complete/pom.xml"" rel=""nofollow"">https://github.com/spring-guides/gs-authenticating-ldap/blob/master/complete/pom.xml</a>)</p>

<p>Now lets go to that parent and see if the versions are specified in the dependencyManagement section of that pom(<a href=""https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-parent/pom.xml"" rel=""nofollow"">https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-parent/pom.xml</a>). No it's not defined there as well. Now lets look at the parent of parent. <a href=""https://github.com/spring-projects/spring-boot/blob/master/spring-boot-dependencies/pom.xml"" rel=""nofollow"">https://github.com/spring-projects/spring-boot/blob/master/spring-boot-dependencies/pom.xml</a>. Oh yea, we have got the version numbers there.</p>

<p>Similar to dependencyManagement, plugins can be managed in the pluginManagement section of the pom. </p>

<p>Hope that explains it.</p>

<p>Refer : <a href=""http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Management"" rel=""nofollow"">dependencyManagement</a>, <a href=""http://maven.apache.org/pom.html#Plugin_Management"" rel=""nofollow"">pluginManagement</a></p>
",775467,,775467,,2014-10-18 20:42:53,2014-10-18 20:42:53,,,,0,,,
Spring,24359284,2,,24359162,2014,,3,,"<p>That's a mistake in the guide.
Somewhere below it mentions ""spring-context"", so I believe that should have been:</p>

<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
    &lt;artifactId&gt;spring-context&lt;/artifactId&gt;
    &lt;version&gt;4.0.5.RELEASE&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

<p>Notice ""spring-context"" instead of ""spring-framework"".
Github issue to have that fixed: <a href=""https://github.com/spring-guides/getting-started-guides/issues/6"" rel=""nofollow"">Github issue</a>.</p>
",3498062,,3498062,,2014-06-23 11:47:22,2014-06-23 11:47:22,,,,1,,,
Spring,45958165,2,,45796021,2017,,3,,"<p>Thanks for the feedback. This is a little bit confusing indeed and I've created <a href=""https://github.com/spring-guides/gs-messaging-jms/issues/15"" rel=""nofollow noreferrer"">an issue</a> to improve the sample.</p>

<p><code>@EnableJms</code> is a framework signal to start processing listeners and it has to be explicit because the framework has no way to know that you want to use JMS.</p>

<p>Spring Boot, on the other hand, can take default decisions for you based on the context. If you have the necessary bits to create a <code>ConnectionFactory</code> it will do so. Down the road, if we detect that a <code>ConnectionFactory</code> is available, we'll automatically enable the processing of JMS listeners.</p>
",613628,,,,,2017-08-30 10:36:22,,,,0,,,
Spring,38791619,2,,38790753,2016,,4,,"<p>The problem that you've encountered happened because of the bug in the sample application. I see that they've upgraded the application to use Spring Boot 1.4 a week ago, but what they forgot to do is to migrate configuration.</p>

<p>Quote from <a href=""https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-1.4-Release-Notes#multipart-support"" rel=""nofollow"">Spring Boot 1.4 release note</a>:</p>

<blockquote>
  <p>The multipart properties have moved from the <code>multipart.</code> namespace to the <code>spring.http.multipart.</code> namespace.</p>
</blockquote>

<p>It means that obvious fix for you will be in modifying <code>application.properties</code> file.</p>

<p>Updated: I've filled issue for that: <a href=""https://github.com/spring-guides/gs-uploading-files/issues/29"" rel=""nofollow"">https://github.com/spring-guides/gs-uploading-files/issues/29</a></p>
",352708,,,,,2016-08-05 14:25:07,,,,2,,,
Spring,38723291,2,,38698426,2016,,4,,"<p>I'm sure, this is not security issue. This is chrome handler issue. I do not know how it happens, but my Firefox works correctly, and IE can process it in good way.</p>

<p>I have checked <em>chrome settings</em> and have found next: <em>settings</em> >> <em>Show advanced settings...</em> >> <em>Manage passwords</em> >> <em><strong>Auto Sign-in</strong></em> flag was turn on. I removed this flag. Problem was not solved. I changed my login in <em><strong>application.yml</strong></em>. After restarting application <em>IE</em>, <em>Firefox</em> continued work as accepted (show home page\login\logout and so on), <em><strong>BUT Chrome</strong></em> asked login password in popup window (window was like system), if i do not put here login\password - i can not see any page in chrome (<em>Whitelabel Error Page</em>), but if i put in popup window my credentials - i have got authorized session. If i press logout authorization do not disappear (after reloading page i can see details for authorized users only).</p>

<p>So i think question is closed in general. But if someone knows what should be fixed in chrome - please let me know. (i cleaned all cookies in chrome and cached data using <em><strong>Ctrl+Shift+Del</strong></em> - it does not help).</p>

<p><em>Add more details</em>
My user for application last time was <strong>u2</strong>. I renamed user in <em><strong>application.yml</strong></em> file to <strong>u3</strong>. I used chrome last time with <strong>u2</strong>, but server knows nothing about user <strong>u2</strong>. After restarting server i tried load home page with <em>chrome</em> -> than i have got <em>Authentication Request</em> pop up window in chrome. Server logs you can see below.</p>

<pre><code>2016-08-02 20:30:35.866  INFO 18404 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring FrameworkServlet 'dispatcherServlet'
2016-08-02 20:30:35.867  INFO 18404 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : FrameworkServlet 'dispatcherServlet': initialization started
2016-08-02 20:30:35.883  INFO 18404 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : FrameworkServlet 'dispatcherServlet': initialization completed in 16 ms
2016-08-02 20:30:35.901 DEBUG 18404 --- [nio-8080-exec-1] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/'; against '/css/**'
2016-08-02 20:30:35.901 DEBUG 18404 --- [nio-8080-exec-1] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/'; against '/js/**'
2016-08-02 20:30:35.901 DEBUG 18404 --- [nio-8080-exec-1] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/'; against '/images/**'
2016-08-02 20:30:35.901 DEBUG 18404 --- [nio-8080-exec-1] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/'; against '/**/favicon.ico'
2016-08-02 20:30:35.901 DEBUG 18404 --- [nio-8080-exec-1] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/'; against '/error'
2016-08-02 20:30:35.902 DEBUG 18404 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : / at position 1 of 13 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2016-08-02 20:30:35.903 DEBUG 18404 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : / at position 2 of 13 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2016-08-02 20:30:35.903 DEBUG 18404 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : No HttpSession currently exists
2016-08-02 20:30:35.903 DEBUG 18404 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : No SecurityContext was available from the HttpSession: null. A new one will be created.
2016-08-02 20:30:35.906 DEBUG 18404 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : / at position 3 of 13 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2016-08-02 20:30:35.906 DEBUG 18404 --- [nio-8080-exec-1] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@2583a7b2
2016-08-02 20:30:35.907 DEBUG 18404 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : / at position 4 of 13 in additional filter chain; firing Filter: 'CsrfFilter'
2016-08-02 20:30:35.925 DEBUG 18404 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : / at position 5 of 13 in additional filter chain; firing Filter: ''
2016-08-02 20:30:35.935 DEBUG 18404 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : / at position 6 of 13 in additional filter chain; firing Filter: 'LogoutFilter'
2016-08-02 20:30:35.935 DEBUG 18404 --- [nio-8080-exec-1] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/'; against '/logout'
2016-08-02 20:30:35.935 DEBUG 18404 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : / at position 7 of 13 in additional filter chain; firing Filter: 'BasicAuthenticationFilter'
2016-08-02 20:30:35.937 DEBUG 18404 --- [nio-8080-exec-1] o.s.s.w.a.www.BasicAuthenticationFilter  : Basic Authentication Authorization header found for user 'u2'
2016-08-02 20:30:35.939 DEBUG 18404 --- [nio-8080-exec-1] o.s.s.authentication.ProviderManager     : Authentication attempt using org.springframework.security.authentication.dao.DaoAuthenticationProvider
2016-08-02 20:30:35.940 DEBUG 18404 --- [nio-8080-exec-1] o.s.s.a.dao.DaoAuthenticationProvider    : User 'u2' not found
2016-08-02 20:30:35.941 DEBUG 18404 --- [nio-8080-exec-1] o.s.s.w.a.www.BasicAuthenticationFilter  : Authentication request for failed: org.springframework.security.authentication.BadCredentialsException: Bad credentials
2016-08-02 20:30:35.941 DEBUG 18404 --- [nio-8080-exec-1] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2016-08-02 20:30:35.941 DEBUG 18404 --- [nio-8080-exec-1] s.w.a.DelegatingAuthenticationEntryPoint : No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@32c6200d
2016-08-02 20:30:35.941 DEBUG 18404 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession.
2016-08-02 20:30:35.942 DEBUG 18404 --- [nio-8080-exec-1] s.s.w.c.SecurityContextPersistenceFilter : SecurityContextHolder now cleared, as request processing completed
</code></pre>

<p>Please pay attention i did not use user <strong>u2</strong> in this request but you can see information about this user in server logs:</p>

<pre><code>2016-08-02 20:30:35.937 DEBUG 18404 --- [nio-8080-exec-1] o.s.s.w.a.www.BasicAuthenticationFilter  : Basic Authentication Authorization header found for user 'u2'
2016-08-02 20:30:35.939 DEBUG 18404 --- [nio-8080-exec-1] o.s.s.authentication.ProviderManager     : Authentication attempt using org.springframework.security.authentication.dao.DaoAuthenticationProvider
2016-08-02 20:30:35.940 DEBUG 18404 --- [nio-8080-exec-1] o.s.s.a.dao.DaoAuthenticationProvider    : User 'u2' not found
</code></pre>

<p><em><strong>It seems chrome provides unexpected behavior.
AND <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/single"" rel=""nofollow"">Example</a> works correctly without additional changes.</strong></em></p>

<p><strong>P.S. Solution for chrome.</strong></p>

<p>I think each time if you are using chrome you need use <em>incognito</em> mode. In <em>incognito mode</em> you have no any token for first request, <em>incognito mode</em> provides expected behavior as it should be without chrome <em>hacks</em> or <em>workarounds</em>.</p>
",5728095,,5728095,,2016-08-02 18:41:55,2016-08-02 18:41:55,,,,1,,,
Spring,44610148,2,,44575555,2017,,4,,"<p>I would suggest you Spring as the most popular framework for building web apps in Java. It has Spring Security module that can facilitate developing OAuth 2.0 clients as well as resource servers, as shown <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/blob/master/simple/src/main/resources/application.yml"" rel=""nofollow noreferrer"">here</a> or <a href=""https://github.com/making/oauth2-sso-demo/blob/master/resource/src/main/resources/application.properties"" rel=""nofollow noreferrer"">here</a>.</p>
",2328781,,,,,2017-06-17 22:54:20,,,,4,,,
Spring,25883140,2,,25823606,2014,,4,,"<p>One can never please everyone. </p>

<p>When adding plain Spring samples people will start asking question why <code>DataSource</code>s don't work or their activemq setup doesn't work (people usually don't takes days to figure it out, if it doesn't work &lt; 5m a guide/project/sample is crap even if the error is their own).</p>

<p>The same for XML and JavaConfig for years the argument was that Spring == XML Hell (just take a look at their samples was often overheard/-read) now that is Java based config (a road that even Java EE is taking) it isn't ok either. </p>

<p>The Spring Boot guides allow you to focus on the core content at hand, instead of all the necessities/complexities around them. Nonetheless I do agree that some basic plain Spring Framework guides should exist. You might wan to comment on <a href=""https://github.com/spring-guides/getting-started-guides/issues/9"" rel=""nofollow"">this issue</a></p>
",2696260,,472792,,2014-09-17 7:16:20,2014-09-17 7:16:20,,,,1,,,
Spring,39947995,2,,39938585,2016,,5,,"<p>You don't need such a complicated configuration. Add <code>@EnableOAuth2Sso</code> to your <code>MainConfiguration</code> and set appropriate application properties.</p>

<p>Here is what I have done in order to use Facebook as a authorization server.</p>

<p><strong>a)</strong> Remove <code>clientId</code> and <code>authServer</code> from <code>UserServiceImpl</code>. Otherwise you'll be forced to configure an authorization server that is not needed.</p>

<p><strong>b)</strong> Remove <code>AuthorizationServerConfiguration</code> completely.</p>

<p><strong>c)</strong> Add <code>@EnableWebSecurity</code> and <code>@EnableOAuth2Sso</code> to your <code>MainConfiguration</code>.</p>

<p><strong>d)</strong> Change <code>MainConfiguration::configure</code> to </p>

<pre><code>http
    .logout().logoutSuccessUrl(""/"").permitAll().and()
    .authorizeRequests().antMatchers(""/"", ""/login"", ""/home.html"").permitAll()
    .anyRequest().authenticated()
    .and().csrf().csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse());
</code></pre>

<p><strong>e)</strong> Delete everything else except nested class <code>AuthenticationSecurity</code> from <code>MainConfiguration</code>.</p>

<p><strong>f)</strong> Change <code>ResourceServerConfiguration::configure(HttpSecurity)</code> to</p>

<pre><code>http.antMatcher(""/api/**"").authorizeRequests().anyRequest().authenticated();
</code></pre>

<p><strong>f)</strong> Remove attribute <code>tokenStore</code> and method <code>ResourceServerConfiguration::configure(ResourceServerSecurityConfigurer)</code> from <code>ResourceServerConfiguration</code>.</p>

<p><strong>g)</strong> Remove configuration block <code>security</code> and <code>facebook</code> from <code>application.yml</code>. Instead add this</p>

<pre><code>security:
  oauth2:
    client:
      client-id: &lt;CLIENT_ID&gt;
      token-name: oauth_token
      authentication-scheme: query
      client-authentication-scheme: form
      access-token-uri: https://graph.facebook.com/oauth/access_token
      user-authorization-uri: https://www.facebook.com/dialog/oauth
    resource:
      user-info-uri: https://graph.facebook.com/me
      client-id: &lt;CLIENT_ID&gt;
      client-secret: &lt;CLIENT_SECRET&gt;
      token-type: code
</code></pre>

<p><strong>h)</strong> In <code>index.html</code> change <code>&lt;a href=""#/login""&gt;login&lt;/a&gt;</code> to <code>&lt;a href=""/login""&gt;login&lt;/a&gt;</code>.
<strong>i)</strong> Replace the content of <code>hello.js</code> with this <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/blob/e26998812799ae7a8ee3786c3e5fd35ea43e0b81/oauth2/ui/src/main/resources/static/js/hello.js"" rel=""nofollow"">one</a>.</p>

<blockquote>
  <p>But I'd like to have the traditional username/password form login experience (log user in directly instead of showing the Authorization page).</p>
</blockquote>

<p>I would never use a site that requires my credentials without redirecting me to the origin! I don't know you and you are under suspicion being a phishing site.
You should really reconsider your decision.</p>

<p>Btw, I created a pull request with these changes.</p>
",3151168,,3151168,,2016-10-10 5:12:54,2016-10-10 5:12:54,,,,2,,,
Spring,50328339,2,,49798302,2018,,5,,"<p>I had this error while following the <a href=""https://spring.io/guides/gs/spring-boot-docker/"" rel=""nofollow noreferrer"">Spring Boot with Docker</a> guide because my application is using Spring Boot 1.5.10.RELEASE and <a href=""https://docs.spring.io/spring-boot/docs/current/gradle-plugin/api/org/springframework/boot/gradle/tasks/run/BootRun.html"" rel=""nofollow noreferrer"">bootRun</a> was only introduced in 2.0.0.</p>

<p>Luckily, the Spring Boot Docker guide code is in a Github repository, so I was able to navigate back to a pre 2.0.0 version: <a href=""https://github.com/spring-guides/gs-spring-boot-docker/tree/8933f6efa9a94cf596095658dc0b81986d11a3ec"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-spring-boot-docker/tree/8933f6efa9a94cf596095658dc0b81986d11a3ec</a></p>

<p>See the completed <a href=""https://github.com/spring-guides/gs-spring-boot-docker/blob/8933f6efa9a94cf596095658dc0b81986d11a3ec/complete/build.gradle"" rel=""nofollow noreferrer"">build.gradle</a> file for 1.5.10-RELEASE:</p>

<pre><code>// This is used as the docker image prefix (org)
group = 'springio'

jar {
    baseName = 'gs-spring-boot-docker'
    version =  '0.1.0'
}

// tag::task[]
docker {
    name ""${project.group}/${jar.baseName}""
    files jar.archivePath
    buildArgs(['JAR_FILE': ""${jar.archiveName}""])
}
// end::task[]
</code></pre>
",1912127,,1912127,,2018-10-25 7:51:04,2018-10-25 7:51:04,,,,0,,,
Spring,50349078,2,,49942640,2018,,6,,"<p>Finally I've found the problem. I see this behaviour due the fact of cookies clashing for client and server if you start both applications on localhost.</p>

<p>It happens due the fact of usage wrong property for context.</p>

<p>So to fix application you need to replace:</p>

<pre><code>server:
  context-path: /client
</code></pre>

<p>with</p>

<pre><code>server:  
  servlet:
    context-path: /client
</code></pre>

<h2>P.S.</h2>

<p>I've created issue on github:  </p>

<p><a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/issues/80"" rel=""nofollow noreferrer"">https://github.com/spring-guides/tut-spring-boot-oauth2/issues/80</a></p>

<p>and made the pull request:</p>

<p><a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/pull/81"" rel=""nofollow noreferrer"">https://github.com/spring-guides/tut-spring-boot-oauth2/pull/81</a></p>

<h2>P.S.2</h2>

<p>Finally my pull request was merged:
<a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/pull/81"" rel=""nofollow noreferrer"">https://github.com/spring-guides/tut-spring-boot-oauth2/pull/81</a></p>
",2674303,,2674303,,2018-12-05 21:06:28,2018-12-05 21:06:28,,,,0,,,
Spring,40145674,2,,40144561,2016,,6,,"<p>I just took the complete Spring boot example from : <a href=""https://github.com/spring-guides/gs-messaging-jms/"" rel=""noreferrer"">https://github.com/spring-guides/gs-messaging-jms/</a></p>

<p>In this it is created for sending and receipt of messages from a queue. To Change this to a topic , you have to set the Pub-Sub property in the Factory instance.</p>

<pre><code>import org.springframework.beans.factory.support.BeanDefinitionBuilder;
import org.springframework.beans.factory.support.DefaultListableBeanFactory;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.boot.autoconfigure.jms.DefaultJmsListenerContainerFactoryConfigurer;
import org.springframework.context.ConfigurableApplicationContext;
import org.springframework.context.annotation.Bean;
import org.springframework.jms.annotation.EnableJms;
import org.springframework.jms.config.DefaultJmsListenerContainerFactory;
import org.springframework.jms.config.JmsListenerContainerFactory;
import org.springframework.jms.connection.CachingConnectionFactory;
import org.springframework.jms.core.JmsTemplate;
import org.springframework.jms.support.converter.MappingJackson2MessageConverter;
import org.springframework.jms.support.converter.MessageConverter;
import org.springframework.jms.support.converter.MessageType;

import javax.jms.ConnectionFactory;

@SpringBootApplication
@EnableJms
public class JmsSampleApplication {

public void registerBeans(ConfigurableApplicationContext context ){
    BeanDefinitionBuilder builder = BeanDefinitionBuilder.rootBeanDefinition(JmsTemplate.class);
    CachingConnectionFactory cachingConnectionFactory = new CachingConnectionFactory();

    builder.addPropertyValue(""connectionFactory"", cachingConnectionFactory);      // set property value
    DefaultListableBeanFactory factory = (DefaultListableBeanFactory) context.getAutowireCapableBeanFactory();
    factory.registerBeanDefinition(""jmsTemplateName"", builder.getBeanDefinition());
}

@Bean
public JmsListenerContainerFactory&lt;?&gt; topicListenerFactory(ConnectionFactory connectionFactory,
                                                DefaultJmsListenerContainerFactoryConfigurer configurer) {
    DefaultJmsListenerContainerFactory factory = new DefaultJmsListenerContainerFactory();
    factory.setPubSubDomain(true);
    // This provides all boot's default to this factory, including the message converter
    configurer.configure(factory, connectionFactory);
    // You could still override some of Boot's default if necessary.
    return factory;
}

@Bean
public JmsListenerContainerFactory&lt;?&gt; queueListenerFactory(ConnectionFactory connectionFactory,
                                                           DefaultJmsListenerContainerFactoryConfigurer configurer) {
    DefaultJmsListenerContainerFactory factory = new DefaultJmsListenerContainerFactory();
    //factory.setPubSubDomain(true);
    // This provides all boot's default to this factory, including the message converter
    configurer.configure(factory, connectionFactory);
    return factory;
}

@Bean // Serialize message content to json using TextMessage
public MessageConverter jacksonJmsMessageConverter() {
    MappingJackson2MessageConverter converter = new MappingJackson2MessageConverter();
    converter.setTargetType(MessageType.TEXT);
    converter.setTypeIdPropertyName(""_type"");
    return converter;
}
public static void main(String[] args) {
    ConfigurableApplicationContext context = SpringApplication.run(JmsSampleApplication.class, args);

    JmsTemplate jmsTemplate = context.getBean(JmsTemplate.class);

    // Send a message with a POJO - the template reuse the message converter
    System.out.println(""Sending an email message."");
    jmsTemplate.convertAndSend(""mailbox.topic"", new Email(""info@example.com"", ""Hello""));
    jmsTemplate.convertAndSend(""mailbox.queue"", new Email(""info@example.com"", ""Hello""));

    }
}
</code></pre>

<p><strong>The listener</strong></p>

<pre><code>package org.springboot.jms;

import org.springframework.jms.annotation.JmsListener;
import org.springframework.stereotype.Component;

/**
 * Created by RGOVIND on 10/20/2016.
 */
@Component
public class HelloTopicListener {

    @JmsListener(destination = ""mailbox.topic"", containerFactory = ""topicListenerFactory"")
    public void receiveTopicMessage(Email email) {
        System.out.println(""Received &lt;"" + email + ""&gt;"");
    }

    @JmsListener(destination = ""mailbox.queue"", containerFactory = ""queueListenerFactory"")
    public void receiveQueueMessage(Email email) {
        System.out.println(""Received &lt;"" + email + ""&gt;"");
    }
}
</code></pre>

<p>Once this is done , you are all set to subscribe to the topic of choice.</p>

<p>There are multiple approaches to this of course , you can have a map of beans for different jmsTemplates , each of which can be used when you need them based on queue or topic. The template &amp; beans can be instantiated in a method you choose to like discussed in this <a href=""https://stackoverflow.com/questions/32332840/spring-dynamically-create-jmstemplates"">SO Question</a>. Hope it helps</p>
",6617152,,6617152,,2016-10-21 6:12:25,2016-10-21 6:12:25,,,,4,,,
Spring,31654593,2,,31609078,2015,,6,,"<p>Without seeing your entire configuration it is hard to know exactly what is going on in your situation.  However using the latest guide at <a href=""https://github.com/spring-guides/gs-accessing-data-mongodb.git"" rel=""noreferrer"">https://github.com/spring-guides/gs-accessing-data-mongodb.git</a> I am able to get it working by making the following changes:</p>

<ul>
<li><p>Adding spring-boot-starter-data-rest as a dependency in the POM file.</p>

<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre></li>
<li><p>Adding this annotation to the CustomerRepository class.</p>

<pre><code>@RepositoryRestResource(path = ""people"")
</code></pre></li>
<li><p>Setting up getters and setters in the Customer class for the 2 name fields in the constructor to avoid a Jackson serialization error.</p></li>
</ul>

<p>Using this when I run the application I am able to access the repository at <a href=""http://localhost:8080/people"" rel=""noreferrer"">http://localhost:8080/people</a>.  If I remove the annotation then the CustomerRepository is accessed at <a href=""http://localhost:8080/customers"" rel=""noreferrer"">http://localhost:8080/customers</a>.  Let me know if you want me to post a fork on GitHub.</p>

<p>To answer your question about what RepositoryRestResource is that it overrides the attributes for the <a href=""http://docs.spring.io/spring-data/rest/docs/current/api/org/springframework/data/rest/core/mapping/ResourceMapping.html"" rel=""noreferrer"">ResourceMapping</a> that is created by default.  It's attributes are used in creating the mapping and change the related return values of the methods on the mapping class.  By default Spring Data Rest creates defaults based on the class names of the objects used in the repository definition.</p>
",4768873,,,,,2015-07-27 13:36:12,,,,0,,,
Spring,43096324,2,,43094830,2017,,7,,"<p>Once you're working with the API, you've to use either HTTP Basic or token authentication and not Form one. It's required to use HTTPS when using any of them.</p>

<p>To auth in HTTP Basic way using Angular 2 the login service may look like this:</p>

<pre><code>login (loginDetails: any): Observable&lt;LoginResponse&gt; { // custom class, may be empty for now

    let headers = new Headers({ 
          'Authorization': 'Basic ' + btoa(loginDetails.login + ':' + loginDetails.pass),
          'X-Requested-With': 'XMLHttpRequest' // to suppress 401 browser popup
    });

    let options = new RequestOptions({ 
           headers: headers 
    });

    return this
              .http
              .post(this.loginUrl, {}, options)
              .catch(e =&gt; this.handleError(e); // handle 401 error - bad credentials
}
</code></pre>

<p>... then you can subscribe this in a component:</p>

<pre><code>loginNow() {
   this
     .loginService
     .login(this.loginDetails)
     .subscribe(next =&gt; {
        this.router.navigateByUrl(""/""); // login succeed
     }, error =&gt; {
        this.error = ""Bad credentials""; // or extract smth from &lt;error&gt; object
     });
}
</code></pre>

<p>Then you can use the <code>loginNow()</code> method inside the component templates like this <code>(click)=""loginNow()</code>. </p>

<p>Once the server will accept the authorization, <code>JSESSIONID</code> will be stored in your browser automatically because of Spring Security features and you won't be forced to send the credential details each time in order to access private resources.</p>

<p>Your login server method may look like this:</p>

<pre><code>@PreAuthorize(""hasRole('USER')"")
@PostMapping(""/login"")
public ResponseEntity login() {
    return new ResponseEntity&lt;&gt;(HttpStatus.OK);
}
</code></pre>

<p>... it will reject with <code>401 UNAUTHORIZED</code> once the authorization fails or accept with <code>200 SUCCESS</code> if it won't.</p>

<p>How to setup the server in the proper way there's a number of Spring Security demo projects - <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js"" rel=""nofollow noreferrer"">https://github.com/spring-guides/tut-spring-security-and-angular-js</a></p>

<p>the code isn't tested though :(</p>
",3019024,,3019024,,2019-01-28 17:36:00,2019-01-28 17:36:00,,,,4,,,
Spring,39337121,2,,39331929,2016,,7,,"<p><strong>Avoid @EnableWebMvc</strong></p>

<p>By default Spring-Boot serves static content in <code>src/main/resources</code>:</p>

<ul>
<li>/META-INF/resources/</li>
<li>/resources/</li>
<li>/static/</li>
<li>/public/</li>
</ul>

<p>Take a look at <a href=""https://spring.io/blog/2013/12/19/serving-static-web-content-with-spring-boot"" rel=""noreferrer"">this</a> and <a href=""https://stackoverflow.com/a/29022362/641627"">this</a>;</p>

<p><strong>Or keep @EnableWebMvc and override addViewControllers</strong></p>

<p>Did you specify <code>@EnableWebMvc</code> ? Take a look a this: <a href=""https://stackoverflow.com/questions/27381781/java-spring-boot-how-to-map-my-app-root-to-index-html"">Java Spring Boot: How to map my app root (/) to index.html?</a></p>

<p>Either you remove @EnableWebMvc, or you can re-define <code>addViewControllers</code>:</p>

<pre><code>@Override
public void addViewControllers(ViewControllerRegistry registry) {
    registry.addViewController(""/"").setViewName(""forward:/index.html"");
}
</code></pre>

<p><strong>Or define a Controller to catch <code>/</code></strong></p>

<p>You may take a look a this <a href=""https://github.com/spring-guides/tut-react-and-spring-data-rest/tree/master/basic"" rel=""noreferrer"">spring-boot-reactjs sample project on github</a>:</p>

<p>It does what you want using a Controller:</p>

<pre><code>@Controller
public class HomeController {

    @RequestMapping(value = ""/"")
    public String index() {
        return ""index"";
    }

}
</code></pre>

<p>Its <code>index.html</code> is under <code>src/main/resources/templates</code></p>
",641627,,641627,,2017-09-26 14:50:36,2017-09-26 14:50:36,,,,2,,,
Spring,27458161,2,,27457442,2014,,7,,"<p>Angular looks for a cookie called ""XSRF-TOKEN"" I believe, so the easiest thing to do for the client is to send that. You can do it in a <code>Filter</code> for instance (example from <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/blob/master/single/src/main/java/demo/UiApplication.java#L65"" rel=""nofollow noreferrer"">https://github.com/spring-guides/tut-spring-security-and-angular-js/blob/master/single/src/main/java/demo/UiApplication.java#L65</a>):</p>

<pre><code>    private Filter csrfHeaderFilter() {
        return new OncePerRequestFilter() {
            @Override
            protected void doFilterInternal(HttpServletRequest request,
                    HttpServletResponse response, FilterChain filterChain)
                    throws ServletException, IOException {
                CsrfToken csrf = (CsrfToken) request.getAttribute(CsrfToken.class
                        .getName());
                if (csrf != null) {
                    Cookie cookie = new Cookie(""XSRF-TOKEN"", csrf.getToken());
                    cookie.setPath(""/"");
                    response.addCookie(cookie);
                }
                filterChain.doFilter(request, response);
            }
        };
    }
</code></pre>

<p>Update: since spring security 4.2 the correct cookie name for angular is used by default if you use the cookie csrf  repository(the link is still the best source), i.e. there is no longer any need for a custom filter. Example:</p>

<pre><code>@Configuration
@Order(SecurityProperties.ACCESS_OVERRIDE_ORDER)
protected static class SecurityConfiguration extends WebSecurityConfigurerAdapter {
    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http
                ...
                .and()
            .csrf()
                .csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse());
</code></pre>
",1259109,,1259109,,2017-05-14 9:23:15,2017-05-14 9:23:15,,,,7,,,
Spring,36883381,2,,36878189,2016,,7,,"<p>Looking at the security configuration of that project, you will notice that a <code>XSRF-TOKEN</code> cookie is being added in each request <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/blob/master/double/gateway/src/main/java/demo/GatewayApplication.java#L93-L94"" rel=""noreferrer"">using a filter</a>. So what you have to do is take the value of that cookie and store it in <code>X-XSRF-TOKEN</code> header. I've made a test project with similar security configuration to test out this case, the complete code looks like this:</p>

<pre><code>@RestController
@SpringBootApplication
public class TestApplication extends WebSecurityConfigurerAdapter {

    public static void main(String[] args) {
        SpringApplication.run(TestApplication.class, args);
    }

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http
            .authorizeRequests()
            .antMatchers(""/**"")  // Disable authentication for all requests.
            .permitAll()
            .and()
            .csrf().csrfTokenRepository(csrfTokenRepository())
            .and()
            .addFilterAfter(csrfHeaderFilter(), SessionManagementFilter.class); // Register csrf filter.
    }

    private Filter csrfHeaderFilter() {
        return new OncePerRequestFilter() {

            @Override
            protected void doFilterInternal(HttpServletRequest request,
                                            HttpServletResponse response,
                                            FilterChain filterChain) throws ServletException, IOException {

                CsrfToken csrf = (CsrfToken) request.getAttribute(CsrfToken.class.getName());
                if (csrf != null) {
                    Cookie cookie = WebUtils.getCookie(request, ""XSRF-TOKEN"");
                    String token = csrf.getToken();
                    if (cookie == null || token != null
                            &amp;&amp; !token.equals(cookie.getValue())) {

                        // Token is being added to the XSRF-TOKEN cookie.
                        cookie = new Cookie(""XSRF-TOKEN"", token);
                        cookie.setPath(""/"");
                        response.addCookie(cookie);
                    }
                }
                filterChain.doFilter(request, response);
            }
        };
    }

    private CsrfTokenRepository csrfTokenRepository() {
        HttpSessionCsrfTokenRepository repository = new HttpSessionCsrfTokenRepository();
        repository.setHeaderName(""X-XSRF-TOKEN"");
        return repository;
    }

    @RequestMapping(value = ""/test"", method = RequestMethod.GET)
    public String testGet() {
        return ""hello"";
    }

    @RequestMapping(value = ""/test"", method = RequestMethod.POST)
    public String testPost() {
        return ""works!"";
    }
}
</code></pre>

<p>To test this out with postman do the following:</p>

<ul>
<li>Enable <a href=""https://www.getpostman.com/docs/capture"" rel=""noreferrer"">interceptor</a> to start capturing cookies.</li>
<li>Perform a <code>GET /test</code> request and open the cookies tab. There you should notice a cookie with a name <code>XSRF-TOKEN</code>.</li>
<li>Take the value of that cookie and put it in <code>X-XSRF-TOKEN</code> header and perform a <code>POST /test</code> request.</li>
</ul>
",3274974,,,,,2016-04-27 7:40:49,,,,0,,,
Spring,21205372,2,,21203402,2014,,10,,"<p>Put <em>css</em> files into <em>webapp</em> resources folder:</p>

<pre><code>src/main/webapp/resources/css/ 
</code></pre>

<p>Configure resource handler</p>

<pre><code>public class WebConfig extends WebMvcConfigurerAdapter {

        @Override
        public void addResourceHandlers(ResourceHandlerRegistry registry) {
                registry.addResourceHandler(""/resources/**"")
                        .addResourceLocations(""/resources/"");
        }
</code></pre>

<p>Example projects: </p>

<ul>
<li><a href=""https://github.com/spring-guides/tut-web/tree/master/6/complete"" rel=""noreferrer"">https://github.com/spring-guides/tut-web/tree/master/6/complete</a></li>
<li><a href=""https://github.com/jaylindquist/spring-boot-service-and-static"" rel=""noreferrer"">Spring Boot Service Template with Static Content</a></li>
</ul>

<p>Source:</p>

<ul>
<li><a href=""https://spring.io/guides/tutorials/web/"" rel=""noreferrer"">Designing and Implementing a Web Application with Spring</a></li>
<li><a href=""http://spring.io/guides/gs/serving-web-content/"" rel=""noreferrer"">Serving Web Content with Spring MVC</a></li>
</ul>
",516167,,516167,,2014-01-18 16:38:44,2014-01-18 16:38:44,,,,3,,,
Spring,20935012,2,,20934985,2014,,11,,"<h2>Spring Guides</h2>

<p>Take look at <a href=""http://spring.io/guides"">Spring Guides</a>,
 all with Spring 4.0.</p>

<blockquote>
  <p>(..) these guides are designed to get you productive as quickly as possible  using the latest <strong>Spring</strong> project releases and techniques as <strong>recommended by the Spring team</strong>.</p>
</blockquote>

<p>I think tutorial <a href=""http://spring.io/guides/tutorials/data/"">Data Access with Spring</a> can help you,  especially step 3:</p>

<ul>
<li><a href=""http://spring.io/guides/tutorials/data/3/"">Storing Order Data Using the Java Persistence API (JPA)</a></li>
</ul>

<p>with source code: <a href=""https://github.com/spring-guides/tut-data"">https://github.com/spring-guides/tut-data</a></p>

<p>There is also Getting Started Guide, designed to be completed in 15-30 minutes</p>

<ul>
<li><a href=""http://spring.io/guides/gs/accessing-data-jpa/"">Accessing Data with JPA</a></li>
</ul>

<p>with source code: <a href=""https://github.com/spring-guides/gs-accessing-data-jpa"">https://github.com/spring-guides/gs-accessing-data-jpa</a>.</p>

<p>This give you general look at possibilites. You can use solutions from this (like <a href=""http://projects.spring.io/spring-data-jpa/"">Spring Data JPA</a> etc) with or without <a href=""http://projects.spring.io/spring-boot/"">Spring Boot</a>.</p>

<h2>Appfuse archetypes</h2>

<p>There is also <a href=""http://appfuse.org/pages/viewpage.action?pageId=15990813"">Appfuse 3.0</a> recently released with support for Spring 4.0. </p>

<blockquote>
  <p>AppFuse is a full-stack framework for building web applications on the JVM. It was originally developed to eliminate the ramp-up time when building new web applications. Over the years, it has matured into a very testable and secure system for creating Java-based webapps.</p>
</blockquote>

<p>AppFuse is full of good patterns, simply build new project from <a href=""http://appfuse.org/display/APF/AppFuse+QuickStart"">appfuse archetype</a> and take look. </p>
",516167,,516167,,2014-01-06 10:38:29,2014-01-06 10:38:29,,,,0,,,
Spring,40454751,2,,26549379,2016,,37,,"<p>According to official documentation: <a href=""http://docs.spring.io/spring/docs/4.3.3.RELEASE/spring-framework-reference/htmlsingle/#mvc-ann-restcontroller"" rel=""noreferrer"">Creating REST Controllers with the @RestController annotation</a></p>

<blockquote>
  <p>@RestController is a stereotype annotation that combines @ResponseBody
  and @Controller. <strong>More than that, it gives more meaning to your
  Controller and also may carry additional semantics in future releases
  of the framework.</strong></p>
</blockquote>

<p>It seems that it's best to use <code>@RestController</code> for clarity, but you can also <strong>combine</strong> it with <code>ResponseEntity</code> for flexibility when needed (<a href=""https://spring.io/guides/tutorials/bookmarks/"" rel=""noreferrer"">According to official tutorial</a> and <a href=""https://github.com/spring-guides/tut-bookmarks/blob/a5b4d43d63d3c7d8a6107873841526f92d7bad2d/rest/src/main/java/bookmarks/BookmarkRestController.java#L56"" rel=""noreferrer"">the code here</a> and <a href=""https://github.com/spring-guides/tut-bookmarks/issues/22"" rel=""noreferrer"">my question to confirm that</a>).</p>

<p>For example:</p>

<pre><code>@RestController
public class MyController {

    @GetMapping(path = ""/test"")
    @ResponseStatus(HttpStatus.OK)
    public User test() {
        User user = new User();
        user.setName(""Name 1"");

        return user;
    }

}
</code></pre>

<p>is the same as:</p>

<pre><code>@RestController
public class MyController {

    @GetMapping(path = ""/test"")
    public ResponseEntity&lt;User&gt; test() {
        User user = new User();
        user.setName(""Name 1"");

        HttpHeaders responseHeaders = new HttpHeaders();
        // ...
        return new ResponseEntity&lt;&gt;(user, responseHeaders, HttpStatus.OK);
    }

}
</code></pre>

<p>This way, you can define <code>ResponseEntity</code> only when needed.</p>

<p><strong>Update</strong></p>

<p>You can use this: </p>

<pre><code>    return ResponseEntity.ok().headers(responseHeaders).body(user);
</code></pre>
",4791401,,6630785,,2017-11-14 9:45:48,2017-11-14 9:45:48,,,,3,,,
